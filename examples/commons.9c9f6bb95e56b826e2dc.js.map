{"version":3,"sources":["webpack:///../../src/ol/xml.js","webpack:///../../src/ol/extent.js","webpack:///../../src/ol/events.js","webpack:///../../src/ol/util.js","webpack:///../../../src/ol/format/xsd.js","webpack:///../../../src/ol/geom/GeometryType.js","webpack:///../../../src/ol/proj/epsg3857.js","webpack:///../../../src/ol/proj/epsg4326.js","webpack:///../../../src/ol/proj/projections.js","webpack:///../../src/ol/proj.js","webpack:///../../../src/ol/events/EventType.js","webpack:///../../../src/ol/render/canvas.js","webpack:///../../src/ol/math.js","webpack:///../../src/ol/array.js","webpack:///../../src/ol/TileState.js","webpack:///../../src/ol/asserts.js","webpack:///../../src/ol/obj.js","webpack:///../../src/ol/transform.js","webpack:///../../src/ol/ImageState.js","webpack:///./src/olcs/util.js","webpack:///../../../src/ol/layer/TileProperty.js","webpack:///../../../src/ol/layer/Tile.js","webpack:///../../../src/ol/geom/GeometryLayout.js","webpack:///../../src/ol/dom.js","webpack:///./src/olcs/core/OLImageryProvider.js","webpack:///./src/olcs/core.js","webpack:///../../src/ol/centerconstraint.js","webpack:///../../src/ol/ViewProperty.js","webpack:///../../src/ol/View.js","webpack:///../../src/ol/resolutionconstraint.js","webpack:///../../../src/ol/style/Style.js","webpack:///../../src/ol/ViewHint.js","webpack:///../../../src/ol/style/Stroke.js","webpack:///../../../src/ol/source/OSM.js","webpack:///../../src/ol/MapEvent.js","webpack:///../../src/ol/MapBrowserEvent.js","webpack:///../../src/ol/MapBrowserPointerEvent.js","webpack:///../../../src/ol/pointer/EventType.js","webpack:///../../../src/ol/pointer/EventSource.js","webpack:///../../../src/ol/pointer/MouseSource.js","webpack:///../../../src/ol/pointer/MsSource.js","webpack:///../../../src/ol/pointer/NativeSource.js","webpack:///../../../src/ol/pointer/PointerEvent.js","webpack:///../../../src/ol/pointer/TouchSource.js","webpack:///../../../src/ol/pointer/PointerEventHandler.js","webpack:///../../src/ol/MapBrowserEventHandler.js","webpack:///../../src/ol/MapProperty.js","webpack:///../../../src/ol/structs/PriorityQueue.js","webpack:///../../src/ol/TileQueue.js","webpack:///../../src/ol/PluggableMap.js","webpack:///../../src/ol/ImageCanvas.js","webpack:///../../../src/ol/render/Event.js","webpack:///../../../src/ol/render/VectorContext.js","webpack:///../../../../src/ol/render/canvas/Immediate.js","webpack:///../../../src/ol/renderer/Map.js","webpack:///../../../../src/ol/renderer/canvas/Map.js","webpack:///../../../../src/ol/renderer/canvas/Layer.js","webpack:///../../../src/ol/renderer/Layer.js","webpack:///../../../../src/ol/renderer/canvas/IntermediateCanvas.js","webpack:///../../../../src/ol/renderer/canvas/ImageLayer.js","webpack:///../../../../src/ol/renderer/canvas/TileLayer.js","webpack:///../../../src/ol/render/ReplayGroup.js","webpack:///../../../src/ol/render/ReplayType.js","webpack:///../../../../src/ol/geom/flat/textpath.js","webpack:///../../../../src/ol/render/canvas/Instruction.js","webpack:///../../../src/ol/render/replay.js","webpack:///../../../../src/ol/render/canvas/Replay.js","webpack:///../../../../src/ol/render/canvas/ImageReplay.js","webpack:///../../../../src/ol/render/canvas/LineStringReplay.js","webpack:///../../../../src/ol/render/canvas/PolygonReplay.js","webpack:///../../../../src/ol/geom/flat/straightchunk.js","webpack:///../../../../src/ol/render/canvas/TextReplay.js","webpack:///../../../../src/ol/render/canvas/ReplayGroup.js","webpack:///../../../src/ol/renderer/vector.js","webpack:///../../../../src/ol/renderer/canvas/VectorLayer.js","webpack:///../../../src/ol/layer/VectorTileRenderType.js","webpack:///../../../../src/ol/renderer/canvas/VectorTileLayer.js","webpack:///../../src/ol/Map.js","webpack:///./src/olcs/AutoRenderLoop.js","webpack:///./src/olcs/Camera.js","webpack:///./src/olcs/AbstractSynchronizer.js","webpack:///./src/olcs/RasterSynchronizer.js","webpack:///../../../src/ol/source/Cluster.js","webpack:///./src/olcs/core/VectorLayerCounterpart.js","webpack:///./src/olcs/FeatureConverter.js","webpack:///./src/olcs/VectorSynchronizer.js","webpack:///./src/olcs/SynchronizedOverlay.js","webpack:///./src/olcs/OverlaySynchronizer.js","webpack:///./src/olcs/OLCesium.js","webpack:///../../src/ol/functions.js","webpack:///../../src/ol/Object.js","webpack:///../../../src/ol/style/Fill.js","webpack:///../../src/ol/Feature.js","webpack:///../../src/ol/MapBrowserEventType.js","webpack:///../../../src/ol/geom/Point.js","webpack:///../../../src/ol/interaction/Property.js","webpack:///../../../src/ol/interaction/Interaction.js","webpack:///../../src/ol/has.js","webpack:///../../../src/ol/events/Event.js","webpack:///../../src/ol/featureloader.js","webpack:///../../src/ol/loadingstrategy.js","webpack:///../../../src/ol/source/VectorEventType.js","webpack:///../../../src/ol/structs/RBush.js","webpack:///../../../src/ol/source/Vector.js","webpack:///../../../src/ol/format/Feature.js","webpack:///../../src/ol/easing.js","webpack:///../../../src/ol/layer/Property.js","webpack:///../../../src/ol/geom/LinearRing.js","webpack:///../../../src/ol/geom/Polygon.js","webpack:///../../src/ol/tilecoord.js","webpack:///../../src/ol/css.js","webpack:///../../../src/ol/style/IconOrigin.js","webpack:///../../../src/ol/geom/SimpleGeometry.js","webpack:///../../../src/ol/source/State.js","webpack:///../../../src/ol/extent/Relationship.js","webpack:///../../../src/ol/proj/Units.js","webpack:///../../../src/ol/layer/Vector.js","webpack:///../../src/ol/size.js","webpack:///../../src/ol/Observable.js","webpack:///../../src/ol/coordinate.js","webpack:///../../../src/ol/reproj/common.js","webpack:///../../src/ol/CollectionEventType.js","webpack:///../../../src/ol/style/IconAnchorUnits.js","webpack:///../../../../src/ol/geom/flat/deflate.js","webpack:///../../src/ol/LayerType.js","webpack:///../../../../src/ol/geom/flat/inflate.js","webpack:///../../src/ol/color.js","webpack:///../../src/ol/Collection.js","webpack:///../../../src/ol/layer/Layer.js","webpack:///../../../../src/ol/geom/flat/closest.js","webpack:///../../../../src/ol/geom/flat/transform.js","webpack:///../../../src/ol/events/Target.js","webpack:///../../../src/ol/geom/LineString.js","webpack:///../../../src/ol/render/EventType.js","webpack:///../../../src/ol/style/IconImage.js","webpack:///../../../src/ol/style/Icon.js","webpack:///../../../src/ol/tilegrid/TileGrid.js","webpack:///../../src/ol/tilegrid.js","webpack:///../../src/ol/colorlike.js","webpack:///../../../src/ol/control/Control.js","webpack:///../../../src/ol/control/Attribution.js","webpack:///../../../src/ol/control/Rotate.js","webpack:///../../../src/ol/control/Zoom.js","webpack:///../../../src/ol/control/util.js","webpack:///../../src/ol/string.js","webpack:///../../../../src/ol/geom/flat/simplify.js","webpack:///../../../src/ol/format/FormatType.js","webpack:///../../../../src/ol/geom/flat/contains.js","webpack:///../../../src/ol/style/Text.js","webpack:///./src/olcs/math.js","webpack:///../../../src/ol/layer/Group.js","webpack:///../../../src/ol/style/Circle.js","webpack:///../../../src/ol/style/RegularShape.js","webpack:///../../../src/ol/proj/transforms.js","webpack:///../../src/ol/Tile.js","webpack:///../../src/ol/ImageTile.js","webpack:///../../src/ol/TileCache.js","webpack:///../../../src/ol/reproj/Tile.js","webpack:///../../../src/ol/source/Tile.js","webpack:///../../../src/ol/source/TileEventType.js","webpack:///../../../src/ol/source/TileImage.js","webpack:///../../../src/ol/source/UrlTile.js","webpack:///../../src/ol/ObjectEventType.js","webpack:///../../src/ol/reproj.js","webpack:///../../src/ol/rotationconstraint.js","webpack:///../../../src/ol/source/WMSServerType.js","webpack:///../../../src/ol/layer/Image.js","webpack:///../../../src/ol/geom/MultiLineString.js","webpack:///../../../src/ol/proj/Projection.js","webpack:///../../../../src/ol/geom/flat/intersectsextent.js","webpack:///../../../src/ol/geom/MultiPoint.js","webpack:///../../src/ol/Kinetic.js","webpack:///../../../src/ol/interaction/DoubleClickZoom.js","webpack:///../../../src/ol/events/condition.js","webpack:///../../../src/ol/interaction/Pointer.js","webpack:///../../../src/ol/interaction/DragPan.js","webpack:///../../../src/ol/interaction/DragRotate.js","webpack:///../../../src/ol/render/Box.js","webpack:///../../../src/ol/interaction/DragBox.js","webpack:///../../../src/ol/interaction/DragZoom.js","webpack:///../../../src/ol/events/KeyCode.js","webpack:///../../../src/ol/interaction/KeyboardPan.js","webpack:///../../../src/ol/interaction/KeyboardZoom.js","webpack:///../../../src/ol/interaction/MouseWheelZoom.js","webpack:///../../../src/ol/interaction/PinchRotate.js","webpack:///../../../src/ol/interaction/PinchZoom.js","webpack:///../../src/ol/interaction.js","webpack:///../../../src/ol/geom/MultiPolygon.js","webpack:///../../../../src/ol/geom/flat/center.js","webpack:///../../src/ol/tileurlfunction.js","webpack:///../../src/ol/MapEventType.js","webpack:///../../../src/ol/reproj/Image.js","webpack:///../../../src/ol/source/Image.js","webpack:///../../../src/ol/source/common.js","webpack:///../../../../src/ol/geom/flat/reverse.js","webpack:///../../../../src/ol/geom/flat/orient.js","webpack:///../../../src/ol/tilegrid/common.js","webpack:///../../../src/ol/geom/Geometry.js","webpack:///../../../src/ol/format/GeoJSON.js","webpack:///../../../src/ol/extent/Corner.js","webpack:///../../src/ol/TileRange.js","webpack:///../../src/ol/Disposable.js","webpack:///../../../src/ol/source/ImageWMS.js","webpack:///../../src/ol/ImageBase.js","webpack:///../../../src/ol/source/Source.js","webpack:///./node_modules/rbush/index.js","webpack:///../../../../src/ol/geom/flat/area.js","webpack:///../../../src/ol/geom/GeometryCollection.js","webpack:///../../../../src/ol/geom/flat/interpolate.js","webpack:///../../../src/ol/source/TileJSON.js","webpack:///../../src/ol/OverlayPositioning.js","webpack:///../../src/ol/Overlay.js","webpack:///../../src/ol/sphere.js","webpack:///../../../src/ol/style/IconImageCache.js","webpack:///../../../src/ol/geom/Circle.js","webpack:///../../../src/ol/interaction/DragAndDrop.js","webpack:///../../src/ol/AssertionError.js","webpack:///../../../src/ol/layer/Base.js","webpack:///../../../src/ol/reproj/Triangulation.js","webpack:///../../src/ol/Image.js","webpack:///../../src/ol/uri.js","webpack:///../../../src/ol/source/TileWMS.js","webpack:///../../../src/ol/structs/LRUCache.js","webpack:///../../../src/ol/source/ImageStatic.js","webpack:///../../../../src/ol/geom/flat/interiorpoint.js","webpack:///../../../../src/ol/geom/flat/segments.js","webpack:///../../../src/ol/style/Image.js","webpack:///../../../src/ol/layer/VectorRenderType.js","webpack:///../../../../src/ol/geom/flat/length.js","webpack:///../../../src/ol/style/TextPlacement.js","webpack:///../../src/ol/net.js","webpack:///../../../src/ol/source/XYZ.js","webpack:///../../../src/ol/format/JSONFeature.js","webpack:///../../../src/ol/format/XMLFeature.js","webpack:///./node_modules/proj4/dist/proj4-src.js","webpack:///../../../src/ol/source/BingMaps.js","webpack:///../../../src/ol/proj/proj4.js","webpack:///../../../src/ol/source/Stamen.js","webpack:///../../../src/ol/format/GPX.js","webpack:///../../../src/ol/format/KML.js","webpack:///../../../src/ol/format/TopoJSON.js","webpack:///../../../src/ol/format/TextFeature.js","webpack:///../../../src/ol/format/IGC.js","webpack:///./node_modules/quickselect/quickselect.js"],"names":["__webpack_require__","d","__webpack_exports__","DOCUMENT","XML_SCHEMA_INSTANCE_URI","createElementNS","getAllTextContent","isDocument","parse","makeArrayExtender","makeArrayPusher","makeReplacer","makeObjectPropertySetter","makeChildAppender","makeArraySerializer","makeSimpleNodeFactory","OBJECT_PROPERTY_NODE_FACTORY","makeSequence","makeStructureNS","parseNode","pushParseAndPop","pushSerializeAndPop","_array_js__WEBPACK_IMPORTED_MODULE_0__","document","implementation","createDocument","namespaceURI","qualifiedName","node","normalizeWhitespace","getAllTextContent_","accumulator","nodeType","Node","CDATA_SECTION_NODE","TEXT_NODE","push","String","nodeValue","replace","let","n","firstChild","nextSibling","join","object","xml","DOMParser","parseFromString","valueReader","opt_this","objectStack","const","value","call","undefined","this","array","length","Object","opt_property","localName","nodeWriter","appendChild","serializersNS","nodeFactory","serializers","serialize","opt_nodeName","opt_namespaceURI","fixedNodeName","nodeName","orderedKeys","sequence","Array","i","namespaceURIs","structure","opt_structureNS","ii","structureNS","parsersNS","firstElementChild","nextElementSibling","parsers","parser","pop","values","opt_keys","boundingExtent","buffer","clone","closestSquaredDistanceXY","containsCoordinate","containsExtent","containsXY","coordinateRelationship","createEmpty","createOrUpdate","createOrUpdateEmpty","createOrUpdateFromCoordinate","createOrUpdateFromCoordinates","createOrUpdateFromFlatCoordinates","equals","extend","extendCoordinate","extendFlatCoordinates","forEachCorner","getArea","getBottomLeft","getBottomRight","getCenter","getCorner","getForViewAndSize","getHeight","getIntersection","getTopLeft","getTopRight","getWidth","intersects","isEmpty","returnOrUpdate","scaleFromCenter","intersectsSegment","applyTransform","_asserts_js__WEBPACK_IMPORTED_MODULE_0__","_extent_Corner_js__WEBPACK_IMPORTED_MODULE_1__","_extent_Relationship_js__WEBPACK_IMPORTED_MODULE_2__","coordinates","extent","opt_extent","slice","x","y","dx","dy","coordinate","extent1","extent2","minX","minY","maxX","maxY","relationship","UNKNOWN","LEFT","RIGHT","BELOW","ABOVE","INTERSECTING","Infinity","extendCoordinates","flatCoordinates","offset","end","stride","extendXY","Math","min","max","callback","val","area","corner","BOTTOM_LEFT","BOTTOM_RIGHT","TOP_LEFT","TOP_RIGHT","center","resolution","rotation","size","cosRotation","cos","sinRotation","sin","xCos","xSin","yCos","ySin","x0","x1","x2","x3","y0","y1","y2","y3","intersection","deltaX","deltaY","start","startRel","endRel","startX","startY","endX","endY","slope","transformFn","xs","ys","apply","_boundingExtentXYs","listen","listenOnce","unlisten","unlistenByKey","unlistenAll","_obj_js__WEBPACK_IMPORTED_MODULE_0__","findListener","listeners","listener","opt_setDeleteIndex","listenerObj","bindTo","deleteIndex","getListeners","target","type","listenerMap","getListenerMap","opt_create","ol_lm","removeListeners","removeEventListener","boundListener","keys","removeListenerMap","opt_once","callOnce","addEventListener","evt","bindListener","key","indexOf","splice","abstract","Error","getUid","VERSION","uidCounter_","obj","ol_uid","readBoolean","readDateTime","readDecimal","readNonNegativeInteger","readString","writeBooleanTextNode","writeCDATASection","writeDateTimeTextNode","writeDecimalTextNode","writeNonNegativeIntegerTextNode","writeStringTextNode","_xml_js__WEBPACK_IMPORTED_MODULE_0__","_string_js__WEBPACK_IMPORTED_MODULE_1__","m","s","exec","dateTime","Date","isNaN","parseFloat","parseInt","trim","bool","string","createCDATASection","date","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","createTextNode","decimal","toPrecision","nonNegativeInteger","toString","POINT","LINE_STRING","LINEAR_RING","POLYGON","MULTI_POINT","MULTI_LINE_STRING","MULTI_POLYGON","GEOMETRY_COLLECTION","CIRCLE","RADIUS","HALF_SIZE","PI","EXTENT","WORLD_EXTENT","epsg3857_EPSG3857Projection","Projection","EPSG3857Projection","code","super","units","Units","METERS","global","worldExtent","getPointResolution","point","math","prototype","constructor","proj_Projection","PROJECTIONS","fromEPSG4326","input","opt_output","opt_dimension","dimension","output","halfSize","log","tan","epsg3857_toEPSG4326","atan","exp","epsg4326_EXTENT","METERS_PER_UNIT","epsg4326_EPSG4326Projection","EPSG4326Projection","opt_axisOrientation","DEGREES","axisOrientation","metersPerUnit","epsg4326_PROJECTIONS","cache","projections2","forwardTransform","inverseTransform","cloneTransform","identityTransform","addProjection","projection","add","getCode","transforms","proj_get","projectionLike","proj_getPointResolution","opt_units","pointResolution","getter","getPointResolutionFunc","getUnits","toEPSG4326","getTransformFromProjections","vertices","sphere","getMetersPerUnit","addEquivalentProjections","projections","forEach","addProjections","source","destination","createProjection","defaultCode","createTransformFromCoordinateTransform","coordTransform","j","addCoordinateTransforms","forward","inverse","sourceProj","destProj","fromLonLat","opt_projection","transform","equivalent","projection1","projection2","equalUnits","sourceProjection","destinationProjection","sourceCode","destinationCode","transformFunc","getTransform","transformExtent","ol_extent","CHANGE","CLEAR","CONTEXTMENU","CLICK","DBLCLICK","DRAGENTER","DRAGOVER","DROP","ERROR","KEYDOWN","KEYPRESS","LOAD","MOUSEDOWN","MOUSEMOVE","MOUSEOUT","MOUSEUP","MOUSEWHEEL","MSPOINTERDOWN","RESIZE","TOUCHSTART","TOUCHMOVE","TOUCHEND","WHEEL","defaultFont","defaultFillStyle","defaultLineCap","defaultLineDash","defaultLineDashOffset","defaultLineJoin","defaultMiterLimit","defaultStrokeStyle","defaultTextAlign","defaultTextBaseline","defaultPadding","defaultLineWidth","labelCache","checkFont","measureTextHeight","measureTextWidth","rotateAtOffset","resetTransform","drawImage","_css_js__WEBPACK_IMPORTED_MODULE_0__","_dom_js__WEBPACK_IMPORTED_MODULE_1__","_obj_js__WEBPACK_IMPORTED_MODULE_2__","_structs_LRUCache_js__WEBPACK_IMPORTED_MODULE_3__","_transform_js__WEBPACK_IMPORTED_MODULE_4__","checkedFonts","measureContext","textHeights","interval","referenceWidth","retries","checked","referenceFonts","len","text","isAvailable","font","context","getMeasureContext","weight","fontWeight","available","referenceFont","measureText","width","check","done","clear","clearInterval","fontSpec","fontFamilies","fontFamily","setInterval","span","heights","height","createElement","textContent","style","margin","padding","position","left","body","offsetHeight","removeChild","offsetX","offsetY","translate","rotate","opacity","image","originX","originY","w","h","scale","alpha","globalAlpha","setTransform","clamp","cosh","squaredSegmentDistance","squaredDistance","solveLinearSystem","toDegrees","toRadians","modulo","lerp","t","mat","maxRow","maxEl","abs","r","absValue","tmp","coef","k","l","angleInRadians","angleInDegrees","a","b","binarySearch","haystack","needle","opt_comparator","mid","cmp","comparator","numberSafeCompareFunction","low","high","found","includes","arr","linearFindNearest","direction","reverseSubArray","begin","data","extension","isArray","remove","arr1","arr2","len1","stableSort","compareFnc","index","sort","isSorted","opt_func","opt_strict","compare","every","currentVal","res","IDLE","LOADING","LOADED","EMPTY","ABORT","assert","_AssertionError_js__WEBPACK_IMPORTED_MODULE_0__","assertion","errorCode","assign","getValues","var_sources","TypeError","arguments","hasOwnProperty","property","create","reset","setFromArray","compose","invert","tmp_","set","multiply","transform1","transform2","a1","b1","c1","d1","e1","f1","a2","b2","c2","d2","e2","f2","c","e","f","dx1","dy1","sx","sy","angle","dx2","dy2","det","olcsListen","removeNode","removeChildren","isGroundPolylinePrimitiveSupported","exports","observable","on","param","supportsImageRenderingPixelatedResult_","imageRenderingValueResult_","supportsImageRenderingPixelated","canvas","setAttribute","imageRenderingValue","getSourceProjection","get","getProjection","olcs_uid","parentNode","lastChild","scene","Cesium","GroundPolylinePrimitive","isSupported","TileProperty","Tile_TileLayer","Layer","TileLayer","opt_options","options","baseOptions","preload","useInterimTilesOnError","setPreload","setUseInterimTilesOnError","LayerType","TILE","getPreload","getUseInterimTilesOnError","layer_Layer","getSource","XY","XYZ","XYM","XYZM","createCanvasContext2D","opt_width","opt_height","getContext","outerWidth","element","offsetWidth","getComputedStyle","marginLeft","marginRight","outerHeight","marginTop","marginBottom","replaceNode","newNode","oldNode","parent","replaceChild","OLImageryProvider","olMap","opt_fallbackProj","_this","source_","projection_","fallbackProj_","ready_","tilingScheme_","rectangle_","map_","proxy","proxy_","getURL","DefaultProxy","errorEvent_","Event","emptyCanvas_","handleSourceChanged_","frameState","getState","olcsUtil","GeographicTilingScheme","WebMercatorTilingScheme","rectangle","getTileCredits","level","getView","calculateExtent","getSize","viewState","zoom","attributionsFunction","getAttributions","attributions","map","html","Credit","requestImage","tileUrlFunction","getTileUrlFunction","z_","y_","url","ImageryProvider","loadImage","defineProperties","ready","tileWidth","tg","getTileGrid","getTileSize","tileHeight","maximumLevel","getMaxZoom","minimumLevel","tilingScheme","tileDiscardPolicy","errorEvent","hasAlphaChannel","pickFeatures","camera","frustum","distance","Cartesian3","magnitude","subtract","pixelSize","Cartesian2","getPixelDimensions","clientWidth","clientHeight","amount","computePixelSizeAtCoordinate","Transforms","eastNorthUpToFixedFrame","bottomLeft","Matrix4","multiplyByPoint","topRight","Ellipsoid","WGS84","cartesianArrayToCartographicArray","geometry","translation","ZERO","ol4326CoordinateToCesiumCartesian","rawMatrix","quaternion","Quaternion","fromAxisAngle","UNIT_Z","rotationMatrix","fromTranslationQuaternionRotationScale","axis","defaultValue","duration","easing","linearEasing","lastProgress","oldTransform","now","window","requestAnimationFrame","step","timestamp","progress","stepAngle","lookAtTransform","heading","bottomCenter","angleToZenith","computeAngleToZenith","right","Matrix3","fromQuaternion","vector","zenith","multiplyByVector","fromTranslation","rotateAroundAxis","pixel","ray","getPickRay","globe","pick","pickEllipsoid","bottom","pickOnTerrainOrEllipsoid","Ray","ellipsoid","IntersectionTests","rayEllipsoid","getPoint","normal","geocentricSurfaceNormal","angleBetween","signedAngleBetween","convertLongitudeRange","fovy2","fovy","matrix","first","second","normalize","cross","cosine","dot","sine","sign","atan2","pivot","fy","bottomFovRay","negate","ext","Rectangle","fromDegrees","olLayer","viewProj","olLayerTile","olLayerImage","provider","olSourceImageWMS","getUrl","getImageLoadFunction","defaultImageLoadFunction","sourceProps","olcs.proxy","olcs.extent","olcs.projection","olcs.imagesource","olSourceTileWMS","params","getParams","setProperties","olSourceTileImage","isCesiumProjection","olcsCoreOLImageryProvider","olSourceImageStatic","SingleTileImageryProvider","getImageExtent","layerOptions","getExtent","extentToRectangle","ImageryLayer","olLayerWithParents","csLayer","visible","layer","concat","parents","layerOpacity","getOpacity","layerVisible","getVisible","show","coo","toCartesian","cartesians","proj4326","proj","properties","getProperties","olColor","Color","byteToFloat","fromCssColorString","CanvasPattern","CanvasGradient","ctx","fillStyle","fillRect","ImageMaterialProperty","subdomains","re","match","charCode","startCharCode","charCodeAt","stopCharCode","fromCharCode","Promise","resolve","reject","pickBottomPoint","currentHeading","getRotation","setHeadingUsingBottomCenter","view","normalizeView","getResolution","setRotation","setResolution","constrainResolution","is3857","is4326","none","ViewProperty","DEFAULT_MIN_ZOOM","View_View","BaseObject","View","hints_","animations_","updateAnimationKey_","updateAnimations_","bind","applyOptions_","resolutionConstraintInfo","resolutionConstraint","maxResolution","minResolution","minZoom","maxZoom","zoomFactor","resolutions","delta","z","floor","power","pow","createSnapToResolutions","defaultMaxResolution","common","defaultMinResolution","opt_maxLevel","oldLevel","newLevel","createSnapToPower","constraint","createResolutionConstraint","maxResolution_","minResolution_","zoomFactor_","resolutions_","minZoom_","centerConstraint","createCenterConstraint","rotationConstraint","enableRotation","constrainRotation","rotationconstraint","createRotationConstraint","constraints_","Number","options_","getUpdatedOptions_","newOptions","getZoom","animate","var_args","animationCount","isDef","state","setCenter","setZoom","animationCallback","series","animation","complete","anchor","sourceCenter","targetCenter","sourceResolution","targetResolution","sourceRotation","targetRotation","isNoopAnimation","setHint","ViewHint","ANIMATING","getAnimating","getInteracting","INTERACTING","cancelAnimations","cancelAnimationFrame","more","seriesComplete","jj","elapsed","fraction","calculateCenterZoom","calculateCenterRotate","filter","Boolean","currentCenter","currentResolution","getSizeFromViewport_","selector","util","querySelector","metrics","constrainCenter","opt_delta","opt_direction","getConstraints","getHints","opt_hints","opt_size","asserts","getMaxResolution","getMinResolution","getZoomForResolution","setMaxZoom","getMinZoom","setMinZoom","getResolutions","getResolutionForExtent","xResolution","yResolution","getResolutionForValueFunction","opt_power","getValueForResolutionFunction","pixelRatio","pixelResolution","round","nearest","getResolutionForZoom","fit","geometryOrExtent","getSimplifiedGeometry","Polygon","getType","GeometryType","coords","getFlatCoordinates","cosAngle","sinAngle","minRotX","minRotY","maxRotX","maxRotY","getStride","rotX","rotY","constrainedResolution","centerRotX","centerRotY","functions","centerOn","centerX","centerY","opt_anchor","hint","changed","ol_Object","returnValue","setTimeout","toFunction","createDefaultStyle","_Circle_js__WEBPACK_IMPORTED_MODULE_2__","_Fill_js__WEBPACK_IMPORTED_MODULE_3__","_Stroke_js__WEBPACK_IMPORTED_MODULE_4__","Style","geometry_","geometryFunction_","defaultGeometryFunction","setGeometry","fill_","fill","image_","renderer_","renderer","stroke_","stroke","text_","zIndex_","zIndex","styleFunction","styles","getZIndex","getGeometry","getFill","getImage","getStroke","getText","getRenderer","setRenderer","getGeometryFunction","setFill","setImage","setStroke","setText","feature","setZIndex","defaultStyles","color","radius","_util_js__WEBPACK_IMPORTED_MODULE_0__","Stroke","color_","lineCap_","lineCap","lineDash_","lineDash","lineDashOffset_","lineDashOffset","lineJoin_","lineJoin","miterLimit_","miterLimit","width_","checksum_","getColor","getLineCap","getLineDash","getLineDashOffset","getLineJoin","getMiterLimit","setColor","setLineCap","setLineDash","setLineDashOffset","setLineJoin","setMiterLimit","setWidth","getChecksum","ATTRIBUTION","_XYZ_js__WEBPACK_IMPORTED_MODULE_0__","OSM","crossOrigin","cacheSize","opaque","reprojectionErrorThreshold","tileLoadFunction","wrapX","attributionsCollapsible","ol_MapEvent","MapEvent","opt_frameState","ol_MapBrowserEvent","MapBrowserEvent","browserEvent","opt_dragging","originalEvent","getEventPixel","getCoordinateFromPixel","dragging","preventDefault","stopPropagation","ol_MapBrowserPointerEvent","MapBrowserPointerEvent","pointerEvent","EventType","POINTERMOVE","POINTERDOWN","POINTERUP","POINTEROVER","POINTEROUT","POINTERENTER","POINTERLEAVE","POINTERCANCEL","EventSource_EventSource","dispatcher","mapping","mapping_","getEvents","getHandlerForEvent","eventType","pointer_EventSource","POINTER_ID","POINTER_TYPE","mousedown","inEvent","isEventSimulatedFromTouch_","pointerMap","cancel","prepareEvent","down","mousemove","move","mouseup","p","button","up","cleanupMouse","mouseover","enterOver","mouseout","leaveOut","cloneEvent","pd","pointerId","isPrimary","pointerType","pointer_MouseSource","EventSource","MouseSource","lastTouches","lts","clientX","clientY","POINTER_TYPES","msPointerDown","prepareEvent_","msPointerMove","msPointerUp","cleanup","msPointerOut","msPointerOver","msPointerCancel","msLostPointerCapture","makeEvent","dispatchEvent","msGotPointerCapture","pointer_MsSource","MsSource","MSPointerDown","MSPointerMove","MSPointerUp","MSPointerOut","MSPointerOver","MSPointerCancel","MSGotPointerCapture","MSLostPointerCapture","pointerDown","fireNativeEvent","pointerMove","pointerUp","pointerOut","pointerOver","pointerCancel","lostPointerCapture","gotPointerCapture","pointer_NativeSource","NativeSource","pointerdown","pointermove","pointerup","pointerout","pointerover","pointercancel","gotpointercapture","lostpointercapture","HAS_BUTTONS","PointerEvent","_Event","opt_eventDict","eventDict","buttons","which","getButtons","pressure","getPressure","bubbles","cancelable","detail","screenX","screenY","ctrlKey","altKey","shiftKey","metaKey","relatedTarget","tiltX","tiltY","hwTimestamp","ev","MouseEvent","pointer_PointerEvent","touchstart","vacuumTouches_","setPrimaryTouch_","changedTouches","dedupSynthMouse_","clickCount_","processTouches_","overDown_","touchmove","moveOverOut_","touchend","upOut_","touchcancel","cancelOut_","pointer_TouchSource","TouchSource","mouseSource","firstTouchId_","resetId_","dedupTimeout_","isPrimaryTouch_","inTouch","identifier","count","cancelResetClickCount_","removePrimaryPointer_","inPointer","resetClickCount_","resetClickCountHandler_","clearTimeout","touchToPointer_","radiusX","radiusY","force","inFunction","touches","pointer","findTouch_","touchList","searchId","out","outTarget","over","enter","event","outEvent","leave","cleanUpPointer_","lt","CLONE_PROPS","pointer_PointerEventHandler","EventTarget","PointerEventHandler","element_","eventMap_","eventSourceList_","registerSources","has","registerSource","register_","name","newEvents","handler","eventSource","addEvents_","unregister_","removeEvents_","eventHandler_","events","eventName","ol_events","eventCopy","fireEvent","contains_","container","contained","contains","inType","wrapMouseEvent","disposeInternal","Target","ol_MapBrowserEventHandler","MapBrowserEventHandler","moveTolerance","clickTimeoutId_","dragging_","dragListenerKeys_","moveTolerance_","down_","getViewport","activePointers_","trackedTouches_","pointerEventHandler_","documentPointerEventHandler_","pointerdownListenerKey_","handlePointerDown_","relayedListenerKey_","relayEvent_","emulateClick_","newEvent","MapBrowserEventType","SINGLECLICK","updateActivePointers_","handlePointerUp_","propagationStopped","isMouseActionButton_","dispose","handlePointerMove_","isMoving_","POINTERDRAG","MapProperty","LAYERGROUP","SIZE","TARGET","VIEW","PriorityQueue_PriorityQueue","priorityFunction","keyFunction","priorityFunction_","keyFunction_","elements_","priorities_","queuedElements_","dequeue","elements","priorities","siftUp_","elementKey","enqueue","priority","siftDown_","getCount","getLeftChildIndex_","getRightChildIndex_","getParentIndex_","heapify_","isKeyQueued","isQueued","startIndex","lIndex","rIndex","smallerChildIndex","parentIndex","reprioritize","ol_TileQueue","PriorityQueue","TileQueue","tilePriorityFunction","tileChangeCallback","getKey","tileChangeCallback_","tilesLoading_","tilesLoadingKeys_","added","tile","events_EventType","handleTileChange","getTilesLoading","TileState","tileKey","loadMoreTiles","maxTotalLoading","maxNewLoads","newLoads","abortedTiles","load","ol_PluggableMap","PluggableMap","optionsInternal","keyboardEventTarget","getElementById","controls","interactions","overlays","layerGroup","layers","getLayers","Group","Collection","getArray","createOptionsInternal","maxTilesLoading_","maxTilesLoading","loadTilesWhileAnimating_","loadTilesWhileAnimating","loadTilesWhileInteracting_","loadTilesWhileInteracting","pixelRatio_","animationDelayKey_","animationDelay_","renderFrame_","coordinateToPixelTransform_","ol_transform","pixelToCoordinateTransform_","frameIndex_","frameState_","previousExtent_","viewPropertyListenerKey_","viewChangeListenerKey_","layerGroupPropertyListenerKeys_","viewport_","className","overflow","msTouchAction","touchAction","overlayContainer_","overlayContainerStopEvent_","overlayEvents","mapBrowserEventHandler_","handleMapBrowserEvent","keyboardEventTarget_","keyHandlerKeys_","handleBrowserEvent","overlays_","overlayIdIndex_","createRenderer","handleResize_","focus_","postRenderFunctions_","tileQueue_","getTilePriority","handleTileChange_","skippedFeatureUids_","handleLayerGroupChanged_","handleViewChanged_","handleSizeChanged_","handleTargetChanged_","control","setMap","CollectionEventType","ADD","REMOVE","interaction","addOverlayInternal_","id","getId","addControl","getControls","addInteraction","getInteractions","addLayer","getLayerGroup","addOverlay","overlay","getOverlays","setTarget","forEachFeatureAtPixel","hitTolerance","layerFilter","forEachFeatureAtCoordinate","getFeaturesAtPixel","features","forEachLayerAtPixel","hasFeatureAtPixel","hasFeatureAtCoordinate","getEventCoordinate","viewportPosition","getBoundingClientRect","eventPosition","top","getTarget","getTargetElement","pixelToCoordinateTransform","getOverlayById","getPixelFromCoordinate","coordinateToPixelTransform","getOverlayContainer","getOverlayContainerStopEvent","tileSourceKey","tileCenter","tileResolution","wantedTiles","focus","sqrt","opt_type","mapBrowserEvent","interactionsArray","getActive","handleEvent","handlePostRender","tileQueue","hints","viewHints","hasListener","render_EventType","RENDERCOMPLETE","getLoading","loading","dispatchRenderEvent","postRenderFunctions","render","targetElement","updateSize","removeLayerRenderers","dom","handleViewPropertyChanged_","ObjectEventType","PROPERTYCHANGE","isRendered","renderSync","removeControl","removeInteraction","removeLayer","removeOverlay","time","previousFrameState","ol_size","layerStatesArray","getLayerStatesArray","layerStates","skippedFeatureUids","usedTiles","renderFrame","MapEventType","MOVESTART","MOVEEND","POSTRENDER","setLayerGroup","setSize","setView","skipFeature","computedStyle","unskipFeature","ol_ImageCanvas","ImageBase","ImageCanvas","opt_loader","ImageState","loader_","canvas_","error_","getError","handleLoad_","err","ol_ImageBase","render_Event","RenderEvent","opt_vectorContext","opt_context","opt_glContext","vectorContext","glContext","VectorContext_VectorContext","drawCustom","drawGeometry","setStyle","drawCircle","circleGeometry","drawFeature","drawGeometryCollection","geometryCollectionGeometry","drawLineString","lineStringGeometry","drawMultiLineString","multiLineStringGeometry","drawMultiPoint","multiPointGeometry","drawMultiPolygon","multiPolygonGeometry","drawPoint","pointGeometry","drawPolygon","polygonGeometry","drawText","setFillStrokeStyle","strokeStyle","setImageStyle","imageStyle","opt_declutterGroup","setTextStyle","textStyle","render_VectorContext","Immediate","VectorContext","CanvasImmediateRenderer","viewRotation","context_","extent_","transform_","viewRotation_","contextFillState_","contextStrokeState_","contextTextState_","fillState_","strokeState_","imageAnchorX_","imageAnchorY_","imageHeight_","imageOpacity_","imageOriginX_","imageOriginY_","imageRotateWithView_","imageRotation_","imageScale_","imageWidth_","textOffsetX_","textOffsetY_","textRotateWithView_","textRotation_","textScale_","textFillState_","textStrokeState_","textState_","pixelCoordinates_","tmpLocalTransform_","drawImages_","pixelCoordinates","flat_transform","localTransform","drawText_","setContextFillState_","setContextStrokeState_","setContextTextState_","strokeText","fillText","moveToLineTo_","close","moveTo","lineTo","closePath","drawRings_","ends","SimpleGeometry","beginPath","arc","geometries","getGeometriesArray","flatMidpoint","getFlatMidpoint","geometryExtent","getEnds","flatMidpoints","getFlatMidpoints","getOrientedFlatCoordinates","flatInteriorPoint","getFlatInteriorPoint","endss","getEndss","flatInteriorPoints","getFlatInteriorPoints","fillState","contextFillState","strokeState","contextStrokeState","lineWidth","textState","contextTextState","textAlign","render_canvas","textBaseline","fillStyleColor","colorlike","strokeStyleColor","strokeStyleLineCap","strokeStyleLineDash","strokeStyleLineDashOffset","strokeStyleLineJoin","strokeStyleWidth","strokeStyleMiterLimit","imageAnchor","getAnchor","imageImage","imageOrigin","getOrigin","imageSize","getRotateWithView","getScale","textFillStyle","textFillStyleColor","textStrokeStyle","textStrokeStyleColor","textStrokeStyleLineCap","textStrokeStyleLineDash","textStrokeStyleLineDashOffset","textStrokeStyleLineJoin","textStrokeStyleWidth","textStrokeStyleMiterLimit","textFont","getFont","textOffsetX","getOffsetX","textOffsetY","getOffsetY","textRotateWithView","textRotation","textScale","textText","textTextAlign","getTextAlign","textTextBaseline","getTextBaseline","expireIconCache","IconImageCache","expire","sortByZIndex","state1","state2","renderer_Map","Disposable","MapRenderer","layerRenderers_","layerRendererListeners_","layerRendererConstructors_","registerLayerRenderers","constructors","calculateMatrices2D","removeLayerRendererByKey_","thisArg","thisArg2","result","viewResolution","managed","translatedCoordinate","canWrapX","projectionExtent","worldWidth","ceil","layerState","layerRenderer","getLayerRenderer","getWrapX","layerKey","candidate","handleLayerRendererChange_","getLayerRendererByKey","getLayerRenderers","getMap","removeUnusedLayerRenderers_","scheduleExpireIconCache","scheduleRemoveUnusedLayerRenderers","ol_Disposable","layerRendererConstructors","canvas_Map","CanvasMapRenderer","display","css","insertBefore","childNodes","renderedVisible_","composeEvent","clearRect","PRECOMPOSE","save","sourceState","State","READY","prepareFrame","composeFrame","restore","POSTCOMPOSE","numLayers","forEachLayerAtCoordinate","ctor","canvas_Layer","LayerRenderer","CanvasLayerRenderer","renderedResolution","clip","topLeft","bottomRight","dispatchComposeEvent_","opt_transform","getLayer","postCompose","preCompose","RENDER","Observable","layer_","createLoadedTileFinder","tiles","tileRange","forEachLoadedTile","tileCoord","handleImageChange_","renderIfReadyAndVisible","imageState","getSourceState","scheduleExpireCache","tileSource","canExpireCache","postRenderFunction","expireCache","updateUsedTiles","zKey","manageTilePyramid","tileGrid","currentZ","opt_tileCallback","getTileRangeForExtentAndZ","getTile","getTileCoordCenter","useTile","IntermediateCanvas","IntermediateCanvasRenderer","coordinateToCanvasPixelTransform","hitCanvasContext_","clipped","imageTransform","getImageTransform","dw","dh","ol_coordinate","imageData","getImageData","ImageLayer_CanvasImageLayerRenderer","CanvasImageLayerRenderer","imageLayer","imageTransform_","skippedFeatures_","vectorRenderer_","VECTOR","viewCenter","imageSource","vectorRenderer","renderedExtent","skippedFeatures","imageFrameState","newSkippedFeatures","replayGroupChanged","imageExtent","imageResolution","imagePixelRatio","getPixelRatio","IMAGE","getRenderMode","VectorRenderType","mapRenderer","ImageLayer","TileLayer_CanvasTileLayerRenderer","CanvasTileLayerRenderer","tileLayer","opt_noContext","oversampling_","renderedExtent_","renderedRevision","renderedTiles","newTiles_","tmpExtent","tmpTileRange_","TileRange","zDirection","isDrawableTile_","tileState","setState","getInterimTile","sourceRevision","getRevision","getTileGridForProjection","getZForResolution","oversampling","getTileRangeExtent","tilePixelRatio","getTilePixelRatio","tilesToDrawByZ","findLoadedTiles","animatingOrInteracting","tmpTileRange","uid","inTransition","getAlpha","childTileRange","getTileCoordChildTileRange","covered","forEachTileCoordParentTileRange","tilePixelSize","getTilePixelSize","currentScale","currentTilePixelSize","tileExtent","tileGutter","tilesToDraw","zs","tileCoordKey","getGutterForProjection","getTileCoordExtent","getTileCoord","drawTileImage","gutter","transition","getTileImage","getOpaque","alphaChanged","endTransition","ReplayGroup_ReplayGroup","getReplay","replayType","addDeclutter","group","render_ReplayGroup","ReplayType","DEFAULT","TEXT","drawTextOnPath","measure","startM","maxAngle","previousAngle","reverse","numChars","segmentM","segmentLength","chunk","chunkLength","char","charAt","charLength","charM","segmentPos","interpolate","unshift","Instruction","BEGIN_GEOMETRY","BEGIN_PATH","CLOSE_PATH","CUSTOM","DRAW_CHARS","DRAW_IMAGE","END_GEOMETRY","FILL","MOVE_TO_LINE_TO","SET_FILL_STYLE","SET_STROKE_STYLE","STROKE","Instruction_fillInstruction","Instruction_strokeInstruction","beginPathInstruction","closePathInstruction","canvas_Instruction","ORDER","TEXT_ALIGN","middle","hanging","alphabetic","ideographic","Replay_tmpExtent","tmpTransform","Replay","CanvasReplay","tolerance","maxExtent","overlaps","declutterTree","maxLineWidth","alignFill_","beginGeometryInstruction1_","beginGeometryInstruction2_","bufferedMaxExtent_","instructions","coordinateCache_","renderedTransform_","hitDetectionInstructions","replayTextBackground_","p1","p2","p3","p4","fillInstruction","strokeInstruction","setStrokeStyle_","replayImage_","anchorX","anchorY","declutterGroup","snapToPixel","fillStroke","boxW","boxH","boxX","boxY","strokePadding","declutterArgs","applyPixelRatio","dashArray","dash","appendFlatCoordinates","closed","skipFirst","myEnd","getBufferedMaxExtent","lastRel","nextRel","lastCoord","nextCoord","NaN","skipped","Relationship","drawCustomCoordinates_","replayEnds","replayEnd","beginGeometry","replayEndss","replayBegin","myEnds","inflate","endGeometry","finish","origin","repeatSize","instruction","renderDeclutter_","groupCount","box","collides","insert","declutterData","replay_","skippedFeaturesHash","featureCallback","opt_hitExtent","dd","prevX","prevY","roundX","roundY","skipFeatures","pendingFill","pendingStroke","lastFillInstruction","lastStrokeInstruction","coordinateCache","batchSize","fn","rotateWithView","backgroundFill","backgroundStroke","baseline","fillKey","strokeKey","strokeWidth","textKey","pathLength","flat_length","textLength","textStates","parts","cc","chars","label","part","replay","replayHitDetection","opt_featureCallback","reverseHitDetectionInstructions","createFill","applyStroke","createStroke","updateFillStyle","currentFillStyle","updateStrokeStyle","currentStrokeStyle","currentLineCap","currentLineDash","currentLineDashOffset","currentLineJoin","currentLineWidth","currentMiterLimit","endGeometryInstruction","ImageReplay","CanvasImageReplay","declutterGroup_","hitDetectionImage_","anchorX_","anchorY_","height_","opacity_","originX_","originY_","rotateWithView_","rotation_","scale_","drawCoordinates_","myBegin","hitDetectionImage","getHitDetectionImage","LineStringReplay","CanvasLineStringReplay","drawFlatCoordinates_","moveToLineToInstruction","lastStroke","PolygonReplay","CanvasPolygonReplay","drawFlatCoordinatess_","numEnds","setFillStrokeStyles_","circleInstruction","simplify","matchingChunk","m12","m23","x12","y12","x23","y23","chunkStart","chunkEnd","chunkM","acos","BATCH_CONSTRUCTORS","Circle","Default","Image","LineString","Text","CanvasTextReplay","labels_","fillStates","strokeStates","textKey_","fillKey_","strokeKey_","widths_","prune","geometryType","placement","TextPlacement","LINE","flatEnd","flatOffset","o","oo","range","drawChars_","interiorPoints","drawTextImage_","containsKey","align","lines","split","numLines","widths","currentWidth","measureTextWidths","lineHeight","renderWidth","leftRight","getOverflow","getMaxAngle","getPlacement","getBackgroundFill","getBackgroundStroke","getPadding","ReplayGroup_CanvasReplayGroup","ReplayGroup","CanvasReplayGroup","opt_renderBuffer","declutterTree_","tolerance_","maxExtent_","overlaps_","resolution_","renderBuffer_","replaysByZIndex_","hitDetectionContext_","hitDetectionTransform_","declutter","flatClipCoords","getClipCoords","hasReplays","replays","candidates","replayKey","declutterReplays","hitExtent","contextSize","declutteredFeatures","mask","circleArrayCache","arraySize","error","fillCircleArrayRowToMiddle","getCircleArray","all","entry","zIndexKey","Constructor","getReplays","opt_replayTypes","opt_declutterReplays","replayTypes","0","canvas_ReplayGroup","SIMPLIFY_TOLERANCE","GEOMETRY_RENDERERS","Point","replayGroup","getImageState","imageReplay","textReplay","lineStringReplay","polygonReplay","MultiPoint","MultiLineString","MultiPolygon","GeometryCollection","geometryRenderer","circleReplay","defaultOrder","feature1","feature2","getSquaredTolerance","getTolerance","renderFeature","squaredTolerance","unlistenImageChange","listenImageChange","simplifiedGeometry","renderGeometry","getGeometries","renderFeatureInternal","VectorLayer_CanvasVectorLayerRenderer","CanvasVectorLayerRenderer","vectorLayer","getDeclutter","rbush_default","dirty_","renderedRevision_","renderedResolution_","renderedRenderOrder_","replayGroup_","handleFontsChanged_","vectorSource","clipExtent","replayContext","drawOffsetX","drawOffsetY","transparentLayer","hasRenderListeners","drawWidth","drawHeight","drawSize","world","mainContextAlpha","handleStyleImageChange_","animating","interacting","updateWhileAnimating","getUpdateWhileAnimating","updateWhileInteracting","getUpdateWhileInteracting","frameStateExtent","vectorLayerRevision","vectorLayerRenderBuffer","getRenderBuffer","vectorLayerRenderOrder","getRenderOrder","getOverlaps","loadFeatures","getStyleFunction","dirty","forEachFeatureInExtent","VectorLayer","VectorTileRenderType","HYBRID","IMAGE_REPLAYS","hybrid","VECTOR_REPLAYS","VectorTileLayer_CanvasVectorTileLayerRenderer","CanvasVectorTileLayerRenderer","renderedLayerRevision_","tmpTransform_","renderMode","createReplayGroup_","renderTileImage_","layerRevision","revision","renderOrder","replayState","getReplayState","renderedRenderOrder","sourceTileGrid","sourceTile","tileKeys","sourceTileCoord","sourceTileExtent","sharedExtent","bufferedExtent","tileProjection","reproject","setProjection","getFeatures","TILE_PIXELS","setWorldExtent","setExtent","setReplayGroup","tt","loop","getReplayGroup","getReplayTransform_","renderResolution","clips","worldOffset","currentClip","zz","replayData","replayDeclutter","renderedTileRevision","wrappedTileCoord","pixelScale","VECTOR_TILE","VectorTileLayer","Map_Map","Map","control_util","AutoRenderLoop","ol3d","scene_","getCesiumScene","_boundNotifyRepaintRequired","notifyRepaintRequired","repaintEventNames_","enable","requestRenderMode","maximumRenderTimeChange","_iterator","_isArray","_i","Symbol","iterator","_ref","next","repaintKey","getOlMap","disable","_iterator2","_isArray2","_i2","_ref2","un","restartRenderLoop","requestRender","Camera","cam_","view_","viewListenKey_","toLonLat_","identityProjection","fromLonLat_","tilt_","distance_","lastCameraViewMatrix_","viewUpdateInProgress_","setView_","dim","_this2","olObservableUnByKey","toLonLat","handleViewEvent_","readFromView","setHeading","getHeading","setTilt","tilt","updateCamera_","getTilt","setDistance","updateView","getDistance","setPosition","ll","carto","Cartographic","getAltitude","cartographicToCartesian","getPosition","cartesianToCartographic","longitude","latitude","setAltitude","altitude","orientation","pitch","PI_OVER_TWO","roll","moveBackward","checkCameraChange","calcDistanceForResolution","olcsCore","pickCenterPoint","bestTarget","positionCartographic","bestTargetCartographic","calcResolutionForDistance","pos","targetNormal","targetToCamera","tiltAngle","opt_dontSync","old","current","viewMatrix","equalsEpsilon","AbstractSynchronizer","olLayers","mapLayerGroup","layerMap","olLayerListenKeys","olGroupListenKeys_","synchronize","destroyAll","addLayers_","orderLayers","root","fifo","_loop","olLayerId","cesiumObjects","olLayerGroup","listenForGroupChanges_","createSingleLayerCounterparts","newOlLayerWithParents","layerId","layerWithParents","onLayerChange","cesiumObjs","addCesiumObjects_","cesiumObject","addCesiumObject","removeAndDestroySingleLayer_","_this3","counterparts","counterpart","removeSingleCesiumObject","destroyCesiumObject","unlistenSingleGroup_","removeLayer_","_this4","uuid","listenKeyArray","contentKeys","listenAddRemove","_this5","collection","el","objKey","removeAllCesiumObjects","destroy","RasterSynchronizer","_olcsAbstractSynchron","cesiumLayers_","imageryLayers","ourLayers_","ImageryLayerCollection","removeAll","convertLayerToCesiumImageries","tileLayerToImageryLayer","_this$olLayerListenKe","olLayerItem","updateCesiumLayerProperties","zIndices","queue","sublayers","layer1","layer2","raiseToTop","olcsAbstractSynchronizer","source_Cluster","VectorSource","Cluster","geometryFunction","refresh","cluster","addFeatures","mapDistance","clustered","ol_util","getCoordinates","neighbors","getFeaturesInExtent","neighbor","createCluster","centroid","Feature","Vector","VectorLayerCounterpart","layerProjection","billboards","BillboardCollection","primitives","PrimitiveCollection","olListenKeys","rootCollection_","featureToCesiumMap","getRootPrimitive","FeatureConverter","boundOnRemoveOrClearFeatureListener_","onRemoveOrClearFeature_","defaultBillboardEyeOffset_","cancellers","canceller","setReferenceForPicking","primitive","olFeature","createColoredPrimitive","olGeometry","opt_lineWidth","flat","renderState","depthTest","enabled","instances","instance","GeometryInstance","attributes","ColorGeometryInstanceAttribute","fromColor","createInstance","getHeightReference","HeightReference","CLAMP_TO_GROUND","GroundPrimitive","geometryInstances","Primitive","dataUri","getValue","toDataURL","appearance","MaterialAppearance","material","Material","fabric","uniforms","PerInstanceColorAppearance","extractColorFromOlStyle","outline","fillColor","strokeColor","convertColorToCesium","extractLineWidthFromOlStyle","wrapFillAndOutlineGeometries","fillGeometry","outlineGeometry","olStyle","outlineColor","addTextStyle","olGeometry4326TextPartToCesium","csAddBillboard","bbOptions","eyeOffset","bb","olCircleGeometryToCesium","olGeometryCloneTo4326","getRadius","outlinePrimitive","CircleGeometry","circlePolygon","olCreateCircularPolygon","positions","ol4326CoordinateArrayToCsCartesians","getLinearRing","GroundPolylineGeometry","PolylineMaterialAppearance","olStyleToCesium","classificationType","ClassificationType","TERRAIN","readyPromise","then","_primitive","createStackedGroundCorridors","CircleOutlineGeometry","extrudedHeight","previousDistance","_arr","geometryOptions","vertexFormat","VertexFormat","POSITION_ONLY","linePositions","CorridorGeometry","distanceDisplayCondition","DistanceDisplayConditionGeometryInstanceAttribute","olLineStringGeometryToCesium","heightReference","primitiveOptions","PolylineGeometry","olPolygonGeometryToCesium","maxHeight","RectangleGeometry","RectangleOutlineGeometry","rings","getLinearRings","hierarchy","polygonHierarchy","olPos","holes","PolygonGeometry","perPositionHeight","_i4","polylineGeometry","PolygonOutlineGeometry","altitudeMode","NONE","RELATIVE_TO_GROUND","createBillboardFromImage","opt_newBillboardCallback","olStyleIcon","reallyCreateBillboard","HTMLCanvasElement","HTMLImageElement","pixelOffset","src","naturalHeight","naturalWidth","isImageLoaded","cancelled","fuid","isDestroyed","olPointGeometryToCesium","modelPrimitive","olcsModelFunction","olcsModel","cesiumOptions","model","Model","fromGltf","debugModelMatrix","DebugModelMatrixPrimitive","modelMatrix","olMultiGeometryToCesium","subgeos","accumulate","functor","getPoints","getLineStrings","getPolygons","labels","LabelCollection","extentCenter","olGeomSimpleGeometry","getFirstCoordinate","horizontalOrigin","labelStyle","LabelStyle","outlineWidth","OUTLINE","FILL_AND_OUTLINE","HorizontalOrigin","CENTER","verticalOrigin","VerticalOrigin","TOP","BOTTOM","fromType","horizontal","repeat","evenColor","oddColor","computePlainStyle","fallbackStyleFunction","featureStyleFunction","getGeometryFromFeature","opt_geom","geom3d","olGeomGeometry","geomFuncRes","olFeatureToCesium","geom","newBillboardAddedCallback","featureBb","prims","bbs","result2","olVectorLayerToCesium","olView","featurePrimitiveMap","olSourceCluster","olcsCoreVectorLayerCounterpart","layerStyle","prim","convert","VectorSynchronizer","opt_converter","converter","olcsFeatureConverter","csAllPrimitives_","destroyPrimitives","updateLayerVisibility","csPrimitive","olLayerVector","csPrimitives","onAddFeature","onRemoveFeature","Billboard","SynchronizedOverlay","_olOverlay","getOptions","scenePostRenderListenerRemover_","synchronizer_","synchronizer","parent_","positionWGS84_","observer_","MutationObserver","handleElementChanged","_assertThisInitialized","attributeObserver_","listenerKeys_","setPropertyFromEvent","setPropertyFromEvent_","handleMapChanged","observeTarget_","disconnect","observe","childList","characterData","subtree","observer","getScene","postRender","updatePixelPosition","stopEvent","insertFirst","handlePositionChanged","cloneNode","nodes","getElement","clonedNode","globeHeight","tilesLoaded","cartesian","ellipsoidBoundingSphere","BoundingSphere","Occluder","isPointVisible","computeCullingVolume","computeVisibility","setVisible","pixelCartesian","cartesianToCanvasCoordinates","mapSize","updateRenderedPosition","olOverlay","OverlaySynchronizer","parentElement","overlayMap_","addOverlays","addOverlayFromEvent_","removeOverlayFromEvent_","cesiumOverlay","olcsSynchronizedOverlay","overlayId","removedOverlay","csOverlay","OLCesium","autoRenderLoop_","time_","JulianDate","to4326Transform_","resolutionScale_","canvasClientWidth_","canvasClientHeight_","resolutionScaleChanged_","fillArea","container_","containerAttribute","createAttribute","setAttributeNode","oc","isOverMap_","stopOpenLayersEventsPropagation","canvasAttribute","oncontextmenu","onselectstart","enabled_","pausedInteractions_","hiddenRootGroup_","sceneOptions","scene3DOnly","Scene","sscc","screenSpaceCameraController","tiltEventTypes","CameraEventType","LEFT_DRAG","modifier","KeyboardEventModifier","SHIFT","ALT","enableLook","constrainedAxis","camera_","olcsCamera","globe_","Globe","baseColor","WHITE","skyAtmosphere","SkyAtmosphere","firstImageryProvider","addImageryProvider","dataSourceCollection_","DataSourceCollection","dataSourceDisplay_","DataSourceDisplay","dataSourceCollection","synchronizers","createSynchronizers","olcsRasterSynchronizer","olcsVectorSynchronizer","olcsOverlaySynchronizer","lastFrameTime_","renderId_","targetFrameRate_","POSITIVE_INFINITY","blockCesiumRendering_","warmingUp_","trackedFeature_","trackedEntity_","entityView_","needTrackedEntityUpdate_","boundingSphereScratch_","EventHelper","updateTrackedEntity_","enableSuspendTerrainAdjustment","render_","onAnimationFrame_","frameTime","julianDate","initializeFrame","update","trackedEntity","getBoundingSphere","BoundingSphereState","DONE","PENDING","enableTilt","bs","FAILED","EntityView","mapProjection","resolutionScale","devicePixelRatio","aspectRatio","getCamera","getOlView","getDataSources","getDataSourceDisplay","getEnabled","setEnabled","visibility","throwOnUnitializedMap_","rootGroup","classList","warmUp","timeout","csCamera","setBlockCesiumRendering","block","enableAutoRenderLoop","olcsAutoRenderLoop","getAutoRenderLoop","setResolutionScale","setTargetFrameRate","trackedFeature","defaultDataSource","entities","IDENTITY","to4326Transform","CallbackProperty","coo4326","TRANSPARENT","TRUE","FALSE","VOID","getChangeEventType","_ObjectEventType_js__WEBPACK_IMPORTED_MODULE_1__","_Observable_js__WEBPACK_IMPORTED_MODULE_2__","_events_Event_js__WEBPACK_IMPORTED_MODULE_3__","_obj_js__WEBPACK_IMPORTED_MODULE_4__","ObjectEvent","oldValue","opt_values","values_","getKeys","notify","opt_silent","unset","changeEventTypeCache","_color_js__WEBPACK_IMPORTED_MODULE_1__","Fill","_events_js__WEBPACK_IMPORTED_MODULE_1__","_events_EventType_js__WEBPACK_IMPORTED_MODULE_2__","_Object_js__WEBPACK_IMPORTED_MODULE_3__","opt_geometryOrProperties","id_","geometryName_","style_","styleFunction_","geometryChangeKey_","handleGeometryChanged_","setGeometryName","getGeometryName","getStyle","handleGeometryChange_","createStyleFunction","setId","_events_EventType_js__WEBPACK_IMPORTED_MODULE_0__","_extent_js__WEBPACK_IMPORTED_MODULE_0__","_GeometryType_js__WEBPACK_IMPORTED_MODULE_1__","_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_2__","_flat_deflate_js__WEBPACK_IMPORTED_MODULE_3__","_math_js__WEBPACK_IMPORTED_MODULE_4__","opt_layout","setCoordinates","layout","closestPointXY","closestPoint","minSquaredDistance","computeExtent","intersectsExtent","setLayout","Property","pan","rotateWithoutConstraints","zoomByDelta","zoomWithoutConstraints","Interaction_Interaction","Interaction","setActive","active","opt_duration","currentRotation","FIREFOX","SAFARI","WEBKIT","MAC","DEVICE_PIXEL_RATIO","CANVAS_LINE_DASH","TOUCH","POINTER","MSPOINTER","ua","navigator","userAgent","toLowerCase","msPointerEnabled","featureloader_xhr","format","success","failure","xhr","XMLHttpRequest","open","FormatType","ARRAY_BUFFER","responseType","onload","status","JSON","responseText","XML","responseXML","response","readFeatures","featureProjection","readProjection","getLastExtent","onerror","send","loadFeaturesXhr","dataProjection","loadingstrategy_all","VectorEventType","RBush_RBush","opt_maxEntries","rbush_","items_","item","extents","items","bbox","getAll","getInExtent","search","forEach_","forEachInExtent","ol_obj","toJSON","rbush","structs_RBush","VectorSourceEvent","opt_feature","Vector_VectorSource","Source","format_","url_","loader","strategy_","strategy","useSpatialIndex","featuresRtree_","loadedExtentsRtree_","nullGeometryFeatures_","idIndex_","undefIdIndex_","featureChangeKeys_","featuresCollection_","addFeaturesInternal","bindFeaturesCollection_","addFeature","addFeatureInternal","featureKey","addToIndex_","setupChangeEvents_","handleFeatureChange_","valid","newFeatures","geometryFeatures","modifyingCollection","removeFeature","opt_fast","featureId","removeFeatureInternal","clearEvent","forEachFeature","forEachFeatureAtCoordinateDirect","intersectsCoordinate","forEachFeatureIntersectingExtent","getFeaturesCollection","getFeaturesAtCoordinate","getClosestFeatureToCoordinate","opt_filter","closestFeature","previousMinSquaredDistance","minDistance","getFeatureById","getFormat","sid","removeFromIdIndex_","hasFeature","loadedExtentsRtree","extentsToLoad","extentToLoad","removeLoadedExtent","removed","setLoader","source_Source","transformWithOptions","_util_js__WEBPACK_IMPORTED_MODULE_1__","_proj_js__WEBPACK_IMPORTED_MODULE_2__","FeatureFormat","defaultFeatureProjection","write","transformed","decimals","getReadOptions","adaptOptions","readFeature","readGeometry","writeFeature","writeFeatures","writeGeometry","easeIn","easeOut","inAndOut","linear","OPACITY","VISIBLE","Z_INDEX","MAX_RESOLUTION","MIN_RESOLUTION","SOURCE","geom_LinearRing","LinearRing","maxDelta_","maxDeltaRevision_","setFlatCoordinates","closest","flat_area","getSimplifiedGeometryInternal","simplifiedFlatCoordinates","GeometryLayout","deflate","geom_SimpleGeometry","circular","fromExtent","Polygon_Polygon","opt_ends","ends_","flatInteriorPointRevision_","flatInteriorPoint_","orientedRevision_","orientedFlatCoordinates_","appendLinearRing","linearRing","opt_right","orient","flatCenter","interiorpoint","getInteriorPoint","getLinearRingCount","linearRings","simplifiedEnds","intersectsextent","opt_n","opt_sphereRadius","opt_tileCoord","getKeyZXY","fromKey","hash","quadKey","digits","withinExtentAndZ","getFullTileRange","CLASS_HIDDEN","CLASS_SELECTABLE","CLASS_UNSELECTABLE","CLASS_CONTROL","CLASS_COLLAPSED","getFontFamilies","family","transformGeom2D","_extent_js__WEBPACK_IMPORTED_MODULE_1__","_Geometry_js__WEBPACK_IMPORTED_MODULE_2__","_GeometryLayout_js__WEBPACK_IMPORTED_MODULE_3__","_flat_transform_js__WEBPACK_IMPORTED_MODULE_4__","_obj_js__WEBPACK_IMPORTED_MODULE_5__","Geometry","getLastCoordinate","getLayout","simplifiedGeometryRevision","simplifiedGeometryCache","simplifiedGeometryMaxMinSquaredTolerance","getStrideForLayout","nesting","getLayoutForStride","opt_sy","simpleGeometry","opt_dest","UNDEFINED","FEET","PIXELS","USFEET","_LayerType_js__WEBPACK_IMPORTED_MODULE_0__","_Layer_js__WEBPACK_IMPORTED_MODULE_1__","_VectorRenderType_js__WEBPACK_IMPORTED_MODULE_2__","_obj_js__WEBPACK_IMPORTED_MODULE_3__","_style_Style_js__WEBPACK_IMPORTED_MODULE_4__","renderBuffer","declutter_","updateWhileAnimating_","updateWhileInteracting_","renderMode_","setDeclutter","setRenderOrder","num","hasArea","ratio","toSize","unByKey","_events_js__WEBPACK_IMPORTED_MODULE_0__","_events_Target_js__WEBPACK_IMPORTED_MODULE_1__","revision_","once","toStringHDMS","_math_js__WEBPACK_IMPORTED_MODULE_0__","degreesToStringHDMS","hemispheres","degrees","opt_fractionDigits","normalizedDegrees","dflPrecision","precision","deg","sec","coordinate1","coordinate2","ERROR_THRESHOLD","ENABLE_RASTER_REPROJECTION","FRACTION","deflateCoordinate","deflateCoordinates","deflateCoordinatesArray","coordinatess","deflateMultiCoordinatesArray","coordinatesss","opt_endss","inflateCoordinates","opt_coordinates","inflateCoordinatesArray","opt_coordinatess","inflateMultiCoordinatesArray","opt_coordinatesss","asString","asArray","_math_js__WEBPACK_IMPORTED_MODULE_1__","HEX_COLOR_RE_","NAMED_COLOR_RE_","fromString","g","rgb","fromNamed","hasAlpha","substr","fromStringInternal_","_CollectionEventType_js__WEBPACK_IMPORTED_MODULE_1__","_Object_js__WEBPACK_IMPORTED_MODULE_2__","CollectionEvent","opt_element","opt_array","unique_","unique","array_","assertUnique_","updateLength_","getLength","insertAt","elem","removeAt","prev","setAt","opt_except","visibleAtResolution","_events_EventType_js__WEBPACK_IMPORTED_MODULE_1__","_util_js__WEBPACK_IMPORTED_MODULE_2__","_Base_js__WEBPACK_IMPORTED_MODULE_4__","_Property_js__WEBPACK_IMPORTED_MODULE_5__","_obj_js__WEBPACK_IMPORTED_MODULE_6__","_render_EventType_js__WEBPACK_IMPORTED_MODULE_7__","_source_State_js__WEBPACK_IMPORTED_MODULE_8__","BaseLayer","mapPrecomposeKey_","mapRenderKey_","sourceChangeKey_","handleSourcePropertyChange_","setSource","getLayersArray","opt_states","states","getLayerState","handleSourceChange_","renderEvent","maxSquaredDelta","arrayMaxSquaredDelta","multiArrayMaxSquaredDelta","assignClosestPoint","assignClosestArrayPoint","assignClosestMultiArrayPoint","assignClosest","offset1","offset2","squaredDelta","maxDelta","isRing","opt_tmpPoint","tmpPoint","transform2D","dest","_Disposable_js__WEBPACK_IMPORTED_MODULE_0__","_functions_js__WEBPACK_IMPORTED_MODULE_2__","_Event_js__WEBPACK_IMPORTED_MODULE_3__","pendingRemovals_","dispatching_","listeners_","propagate","pendingRemovals","_GeometryLayout_js__WEBPACK_IMPORTED_MODULE_2__","_GeometryType_js__WEBPACK_IMPORTED_MODULE_3__","_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_4__","_flat_closest_js__WEBPACK_IMPORTED_MODULE_5__","_flat_deflate_js__WEBPACK_IMPORTED_MODULE_6__","_flat_inflate_js__WEBPACK_IMPORTED_MODULE_7__","_flat_interpolate_js__WEBPACK_IMPORTED_MODULE_8__","_flat_intersectsextent_js__WEBPACK_IMPORTED_MODULE_9__","_flat_length_js__WEBPACK_IMPORTED_MODULE_10__","_flat_segments_js__WEBPACK_IMPORTED_MODULE_11__","_flat_simplify_js__WEBPACK_IMPORTED_MODULE_12__","flatMidpoint_","flatMidpointRevision_","appendCoordinate","forEachSegment","getCoordinateAtM","opt_extrapolate","extrapolate","getCoordinateAt","IconImage_IconImage","IconImage","imageListenerKeys_","imageState_","size_","src_","tainted_","isTainted_","dispatchChangeEvent_","handleImageError_","unlistenImage_","handleImageLoad_","replaceColor_","getSrc","imgData","putImageData","Icon_Icon","ImageStyle","Icon","anchor_","normalizedAnchor_","anchorOrigin_","anchorOrigin","IconOrigin","anchorXUnits_","anchorXUnits","IconAnchorUnits","anchorYUnits_","anchorYUnits","crossOrigin_","img","imgSize","ol_color","iconImage_","iconImage","offset_","offsetOrigin_","offsetOrigin","origin_","setAnchor","getImageSize","getHitDetectionImageSize","iconImageSize","tmpTileCoord","TileGrid_TileGrid","origins","origins_","tileSizes_","tileSizes","tileSize_","tileSize","fullTileRanges_","tmpSize_","sizes","calculateTileRanges_","forEachTileCoord","opt_tileRange","tileCoordExtent","getTileCoordForXYAndZ_","getTileCoordForCoordAndResolution","getTileCoordForXYAndResolution_","reverseIntersectionPolicy","adjustX","adjustY","xFromOrigin","yFromOrigin","tileCoordX","tileCoordY","tilecoord","getTileCoordForCoordAndZ","getTileCoordResolution","fullTileRanges","tilegrid_TileGrid","getForProjection","getDefaultTileGrid","opt_maxZoom","opt_tileSize","opt_corner","Corner","resolutionsFromExtent","createForExtent","extentFromProjection","createForProjection","setDefaultTileGrid","worldsAway","createXYZ","xyzOptions","gridOptions","half","asColorLike","_color_js__WEBPACK_IMPORTED_MODULE_0__","control_Control","Control","target_","listenerKeys","mapEvent","updateElement_","control_Attribution","Attribution","ulElement_","collapsed_","collapsed","overrideCollapsible_","collapsible","collapsible_","tipLabel","collapseLabel","collapseLabel_","label_","activeLabel","title","handleClick_","cssClasses","renderedAttributions_","collectSourceAttributions_","lookup","visibleAttributions","attributionGetter","getAttributionsCollapsible","setCollapsible","innerHTML","handleToggle_","toggle","getCollapsible","setCollapsed","getCollapsed","Rotate_render","autoHide_","msTransform","webkitTransform","control_Rotate","Rotate","callResetNorth_","resetNorth","duration_","autoHide","resetNorth_","control_Zoom","Zoom","zoomInLabel","zoomOutLabel","zoomInTipLabel","zoomOutTipLabel","inElement","outElement","zoomByDelta_","newResolution","defaults","zoomOptions","rotateOptions","attribution","attributionOptions","padNumber","number","opt_precision","numberString","toFixed","compareVersions","v1","v2","s1","s2","n1","n2","douglasPeucker","douglasPeuckerArray","snap","quantizeArray","quantizeMultiArray","simplifiedOffset","markers","stack","last","maxSquaredDistance","quantize","simplifiedEndss","linearRingContainsExtent","linearRingContainsXY","linearRingsContainsXY","linearRingssContainsXY","wn","_Fill_js__WEBPACK_IMPORTED_MODULE_0__","_TextPlacement_js__WEBPACK_IMPORTED_MODULE_1__","font_","textAlign_","textBaseline_","maxAngle_","placement_","overflow_","offsetX_","offsetY_","backgroundFill_","backgroundStroke_","padding_","setOverflow","setFont","setMaxAngle","setOffsetX","setOffsetY","setPlacement","setScale","setTextAlign","setTextBaseline","setBackgroundFill","setBackgroundStroke","setPadding","_Collection_js__WEBPACK_IMPORTED_MODULE_1__","_CollectionEventType_js__WEBPACK_IMPORTED_MODULE_2__","_ObjectEventType_js__WEBPACK_IMPORTED_MODULE_4__","_asserts_js__WEBPACK_IMPORTED_MODULE_5__","_events_js__WEBPACK_IMPORTED_MODULE_6__","_events_EventType_js__WEBPACK_IMPORTED_MODULE_7__","_extent_js__WEBPACK_IMPORTED_MODULE_8__","_Base_js__WEBPACK_IMPORTED_MODULE_9__","_obj_js__WEBPACK_IMPORTED_MODULE_10__","_source_State_js__WEBPACK_IMPORTED_MODULE_11__","LAYERS","LayerGroup","layersListenerKeys_","handleLayersChanged_","setLayers","handleLayerChange_","handleLayersAdd_","handleLayersRemove_","layersArray","collectionEvent","ownLayerState","CircleStyle","RegularShape","points","atlasManager","atlasManager_","setOpacity","setRadius","radius_","checksums_","hitDetectionCanvas_","points_","radius1","radius2_","radius2","angle_","imageSize_","hitDetectionImageSize_","getRadius2","getAngle","renderOptions","draw_","createHitDetectionCanvas_","renderHitDetectionCallback","hasCustomHitDetectionImage","drawHitDetectionCanvas_","info","hitImage","angle0","radiusC","strokeChecksum","fillChecksum","checksum","ol_Tile","Tile","interimTile","transition_","transitionStarts_","refreshInterimChain","getBlankImage","ol_ImageTile","ImageTile","tileLoadFunction_","ol_TileCache","LRUCache","TileCache","opt_highWaterMark","peekLast","pruneExceptNewestZ","peekFirstKey","structs_LRUCache","reproj_Tile","ReprojTile","targetProj","targetTileGrid","getTileFunction","opt_errorThreshold","opt_renderEdges","renderEdges_","gutter_","sourceTileGrid_","targetTileGrid_","wrappedTileCoord_","sourceTiles_","sourcesListenerKeys_","sourceZ_","targetExtent","maxTargetExtent","maxSourceExtent","limitedTargetExtent","sourceProjExtent","reproj","isFinite","errorThresholdInPixels","triangulation_","Triangulation","getTriangles","sourceExtent","calculateSourceExtent","sourceRange","srcX","srcY","unlistenSources_","reproject_","sources","leftToLoad","sourceListenKey","Tile_TileSource","TileSource","opaque_","tilePixelRatio_","tileCache","tmpSize","key_","tileOptions","getTileCacheForProjection","loaded","setKey","ol_tilegrid","thisProj","ol_proj","getTileCoordForTileUrlFunction","isGlobal","TileSourceEvent","TileEventType","TileImage_TileImage","UrlTile","TileImage","defaultTileLoadFunction","urls","tileClass","tileCacheForProjection","tileGridForProjection","reprojectionErrorThreshold_","renderReprojectionEdges_","usedTileCache","getGutter","projKey","highWaterMark","createTile_","urlTileCoord","tileUrl","newTile","getTileInternal","setRenderReprojectionEdges","setTileGridForProjection","tilegrid","generateTileUrlFunction_","tileurlfunction","setUrls","setUrl","setTileUrlFunction","tileLoadingKeys_","getTileLoadFunction","getUrls","setTileLoadFunction","imageTile","calculateSourceResolution","_dom_js__WEBPACK_IMPORTED_MODULE_0__","_math_js__WEBPACK_IMPORTED_MODULE_2__","_proj_js__WEBPACK_IMPORTED_MODULE_3__","targetMetersPerUnit","sourceMetersPerUnit","compensationFactor","enlargeClipPoint","centroidX","centroidY","dX","dY","triangulation","sourceDataExtent","canvasWidthInUnits","canvasHeightInUnits","stitchContext","stitchScale","xPos","yPos","srcWidth","srcHeight","targetTopLeft","triangle","u0","v0","u1","u2","sourceNumericalShiftX","sourceNumericalShiftY","augmentedMatrix","affineCoefs","p0","createSnapToN","createSnapToZero","theta","opt_tolerance","CARMENTA_SERVER","GEOSERVER","MAPSERVER","QGIS","_LineString_js__WEBPACK_IMPORTED_MODULE_4__","_SimpleGeometry_js__WEBPACK_IMPORTED_MODULE_5__","_flat_closest_js__WEBPACK_IMPORTED_MODULE_6__","_flat_deflate_js__WEBPACK_IMPORTED_MODULE_7__","_flat_inflate_js__WEBPACK_IMPORTED_MODULE_8__","_flat_interpolate_js__WEBPACK_IMPORTED_MODULE_9__","_flat_intersectsextent_js__WEBPACK_IMPORTED_MODULE_10__","_flat_simplify_js__WEBPACK_IMPORTED_MODULE_11__","lineStrings","lineString","appendLineString","opt_interpolate","getLineString","midpoints","midpoint","_Units_js__WEBPACK_IMPORTED_MODULE_0__","code_","units_","worldExtent_","axisOrientation_","global_","canWrapX_","getPointResolutionFunc_","defaultTileGrid_","metersPerUnit_","getWorldExtent","getAxisOrientation","setGlobal","setGetPointResolution","func","intersectsLineString","intersectsLineStringArray","intersectsLinearRingArray","intersectsLinearRingMultiArray","_contains_js__WEBPACK_IMPORTED_MODULE_1__","_segments_js__WEBPACK_IMPORTED_MODULE_2__","coordinatesExtent","point1","point2","intersectsLinearRing","_GeometryType_js__WEBPACK_IMPORTED_MODULE_2__","_Point_js__WEBPACK_IMPORTED_MODULE_3__","_flat_deflate_js__WEBPACK_IMPORTED_MODULE_5__","_flat_inflate_js__WEBPACK_IMPORTED_MODULE_6__","_math_js__WEBPACK_IMPORTED_MODULE_7__","appendPoint","Kinetic","decay","minVelocity","delay","decay_","minVelocity_","delay_","initialVelocity_","lastIndex","firstIndex","ol_Kinetic","DoubleClickZoom_handleEvent","delta_","interaction_Interaction","interaction_DoubleClickZoom","DoubleClickZoom","altShiftKeysOnly","condition_focus","activeElement","always","condition_mouseActionButton","noModifierKeys","shiftKeyOnly","targetNotEditable","tagName","condition_mouseOnly","Pointer_centroid","pointerEvents","Pointer","PointerInteraction","handleDownEvent","handleDragEvent","handleMoveEvent","handleUpEvent","stopDown","handlingDownUpSequence","trackedPointers_","targetPointers","updateTrackedPointers_","handledUp","handled","isPointerDraggingEvent","interaction_DragPan","DragPan","kinetic_","kinetic","lastCentroid","lastPointersCount_","panning_","condition_","condition","noKinetic_","centerpx","interaction_DragRotate","DragRotate","lastAngle_","Box","RenderBox","startPixel_","endPixel_","startPixel","endPixel","setPixels","createOrUpdateGeometry","DragBoxEventType","DragBoxEvent","onBoxEnd","out_","mapExtent","boxPixelExtent","factor","interaction_DragZoom","DragBox","DragZoom","box_","minArea_","minArea","onBoxEnd_","boxEndCondition_","boxEndCondition","defaultBoxEndCondition","KeyCode","UP","DOWN","KeyboardPan_handleEvent","keyCode","mapUnitsDelta","pixelDelta_","interaction_KeyboardPan","KeyboardPan","defaultCondition_","pixelDelta","KeyboardZoom_handleEvent","interaction_KeyboardZoom","KeyboardZoom","Mode","interaction_MouseWheelZoom","MouseWheelZoom","timeout_","useAnchor_","useAnchor","constrainResolution_","lastAnchor_","startTime_","timeoutId_","mode_","trackpadEventGap_","trackpadTimeoutId_","trackpadDeltaPerZoom_","trackpadZoomBuffer_","decrementInteractingHint_","wheelEvent","deltaMode","WheelEvent","DOM_DELTA_PIXEL","DOM_DELTA_LINE","wheelDeltaY","rebound","timeLeft","handleWheelZoom_","setMouseAnchor","interaction_PinchRotate","PinchRotate","pointerOptions","rotating_","rotationDelta_","threshold_","threshold","rotationDelta","touch0","touch1","interaction_PinchZoom","PinchZoom","lastDistance_","lastScaleDelta_","scaleDelta","altShiftDragRotate","doubleClickZoom","zoomDelta","zoomDuration","dragPan","onFocusOnly","pinchRotate","pinchZoom","keyboard","mouseWheelZoom","shiftDragZoom","MultiPolygon_MultiPolygon","endss_","flatInteriorPointsRevision_","flatInteriorPoints_","polygons","polygon","appendPolygon","newEndss","flatCenters","linearRingss","getInteriorPoints","getPolygon","prevEnds","lastEnds","createFromTemplates","createFromTileUrlFunctions","nullTileUrlFunction","expandUrl","_tilecoord_js__WEBPACK_IMPORTED_MODULE_2__","createFromTemplate","template","zRegEx","xRegEx","yRegEx","dashYRegEx","templates","tileUrlFunctions","stop","ReprojImage","getImageFunction","sourceImage","sourcePixelRatio","targetProj_","maxSourceExtent_","targetResolution_","targetExtent_","sourceImage_","sourcePixelRatio_","sourceListenerKey_","unlistenSource_","ImageSourceEventType","ImageSourceEvent","Image_ImageSource","ImageSource","reprojectedImage_","reprojectedRevision_","findNearestResolution","idx","getImageInternal","handleImageChange","DEFAULT_WMS_VERSION","linearRingIsClockwise","edge","linearRingIsOriented","isClockwise","linearRingsAreOriented","orientLinearRings","orientLinearRingsArray","DEFAULT_MAX_ZOOM","DEFAULT_TILE_SIZE","_Object_js__WEBPACK_IMPORTED_MODULE_1__","_extent_js__WEBPACK_IMPORTED_MODULE_2__","_flat_transform_js__WEBPACK_IMPORTED_MODULE_3__","_proj_js__WEBPACK_IMPORTED_MODULE_4__","_proj_Units_js__WEBPACK_IMPORTED_MODULE_5__","_transform_js__WEBPACK_IMPORTED_MODULE_6__","extentRevision_","getClosestPoint","opt_closestPoint","inCoordinates","outCoordinates","pixelExtent","projectedExtent","_Feature_js__WEBPACK_IMPORTED_MODULE_1__","_Feature_js__WEBPACK_IMPORTED_MODULE_2__","_JSONFeature_js__WEBPACK_IMPORTED_MODULE_3__","_geom_GeometryCollection_js__WEBPACK_IMPORTED_MODULE_4__","_geom_LineString_js__WEBPACK_IMPORTED_MODULE_5__","_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_6__","_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_7__","_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_8__","_geom_Point_js__WEBPACK_IMPORTED_MODULE_9__","_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_10__","_obj_js__WEBPACK_IMPORTED_MODULE_11__","_proj_js__WEBPACK_IMPORTED_MODULE_12__","_geom_GeometryType_js__WEBPACK_IMPORTED_MODULE_13__","GeoJSON","JSONFeature","geometryName","extractGeometryName_","extractGeometryName","readFeatureFromObject","geoJSONFeature","readFeaturesFromObject","geoJSONFeatures","readGeometryFromObject","readProjectionFromObject","crs","writeFeatureObject","writeFeaturesObject","objects","writeGeometryObject","readPointGeometry","readLineStringGeometry","readPolygonGeometry","readMultiPointGeometry","readMultiLineStringGeometry","readMultiPolygonGeometry","readGeometryCollectionGeometry","geoJSON","writePointGeometry","writeLineStringGeometry","rightHanded","writePolygonGeometry","writeMultiPointGeometry","writeMultiLineStringGeometry","writeMultiPolygonGeometry","writeGeometryCollectionGeometry","containsTileRange","disposed_","_common_js__WEBPACK_IMPORTED_MODULE_0__","_Image_js__WEBPACK_IMPORTED_MODULE_1__","_asserts_js__WEBPACK_IMPORTED_MODULE_2__","_events_js__WEBPACK_IMPORTED_MODULE_3__","_events_EventType_js__WEBPACK_IMPORTED_MODULE_4__","_extent_js__WEBPACK_IMPORTED_MODULE_5__","_proj_js__WEBPACK_IMPORTED_MODULE_7__","_reproj_js__WEBPACK_IMPORTED_MODULE_8__","_Image_js__WEBPACK_IMPORTED_MODULE_9__","_WMSServerType_js__WEBPACK_IMPORTED_MODULE_10__","_string_js__WEBPACK_IMPORTED_MODULE_11__","_uri_js__WEBPACK_IMPORTED_MODULE_12__","GETFEATUREINFO_IMAGE_SIZE","ImageWMS","imageLoadFunction_","imageLoadFunction","params_","v13_","updateV13_","serverType_","serverType","hidpi_","hidpi","ratio_","getGetFeatureInfoUrl","projectionObj","sourceProjectionObj","baseParams","SERVICE","REQUEST","FORMAT","QUERY_LAYERS","getRequestUrl_","viewWidth","viewHeight","viewExtent","requestWidth","requestHeight","requestExtent","dpi","setImageLoadFunction","updateParams","version","_State_js__WEBPACK_IMPORTED_MODULE_3__","attributions_","adaptAttributions","attributionsCollapsible_","state_","wrapX_","setAttributions","attributionLike","module","default","quickselect","maxEntries","_maxEntries","_minEntries","_initFormat","findItem","equalsFn","calcBBox","toBBox","distBBox","children","destNode","createNode","child","leaf","compareNodeMinX","compareNodeMinY","bboxArea","bboxMargin","multiSelect","_all","childBBox","nodesToSearch","_build","_splitRoot","tmpNode","_insert","goingUp","path","indexes","_condense","compareMinX","compareMinY","fromJSON","N","M","right2","right3","N2","N1","_chooseSubtree","targetNode","enlargement","minEnlargement","isNode","insertPath","_split","_adjustParentBBoxes","_chooseSplitAxis","splitIndex","_chooseSplitIndex","bbox1","bbox2","overlap","minOverlap","_allDistMargin","leftBBox","rightBBox","siblings","compareArr","Function","twiceArea","_Geometry_js__WEBPACK_IMPORTED_MODULE_3__","_GeometryType_js__WEBPACK_IMPORTED_MODULE_4__","opt_geometries","geometries_","listenGeometriesChange_","unlistenGeometriesChange_","geometryCollection","setGeometries","cloneGeometries","simplifiedGeometries","simplified","simplifiedGeometryCollection","setGeometriesArray","clonedGeometries","interpolatePoint","lineStringCoordinateAtM","lineStringsCoordinateAtM","pointX","pointY","cumulativeLengths","lo","hi","m0","_tileurlfunction_js__WEBPACK_IMPORTED_MODULE_0__","_asserts_js__WEBPACK_IMPORTED_MODULE_1__","_net_js__WEBPACK_IMPORTED_MODULE_3__","_State_js__WEBPACK_IMPORTED_MODULE_5__","_TileImage_js__WEBPACK_IMPORTED_MODULE_6__","_tilegrid_js__WEBPACK_IMPORTED_MODULE_7__","TileJSON","tileJSON_","jsonp","handleTileJSONResponse","handleTileJSONError","client","onXHRLoad_","onXHRError_","tileJSON","getTileJSON","epsg4326Projection","attributionExtent","OverlayPositioning","BOTTOM_CENTER","CENTER_LEFT","CENTER_CENTER","CENTER_RIGHT","TOP_CENTER","ELEMENT","MAP","OFFSET","POSITION","POSITIONING","Overlay_Overlay","Overlay","autoPan","autoPanAnimation","autoPanMargin","rendered","bottom_","left_","right_","top_","mapPostrenderListenerKey","handleOffsetChanged","handlePositioningChanged","setElement","setOffset","setPositioning","positioning","getOffset","getPositioning","panIntoView","mapRect","getRect","overlayRect","offsetLeft","offsetRight","offsetTop","offsetBottom","centerPx","newCenterPx","pageXOffset","pageYOffset","DEFAULT_RADIUS","opt_radius","lat1","lat2","deltaLatBy2","deltaLonBy2","bearing","lon1","dByR","lat","asin","lon","shared","cache_","cacheSize_","maxCacheSize_","maxCacheSize","setCenterAndRadius","getRadiusSquared_","circleExtent","_functions_js__WEBPACK_IMPORTED_MODULE_0__","_events_Event_js__WEBPACK_IMPORTED_MODULE_2__","_events_EventType_js__WEBPACK_IMPORTED_MODULE_3__","_Interaction_js__WEBPACK_IMPORTED_MODULE_4__","_proj_js__WEBPACK_IMPORTED_MODULE_5__","DragAndDropEventType","DragAndDropEvent","file","opt_features","DragAndDrop","formatConstructors_","formatConstructors","dropListenKeys_","handleResult_","tryReadFeatures_","registerListeners_","dropArea","handleDrop","handleStop","unregisterListeners_","files","dataTransfer","reader","FileReader","readAsText","dropEffect","AssertionError","message","_Property_js__WEBPACK_IMPORTED_MODULE_2__","_math_js__WEBPACK_IMPORTED_MODULE_3__","setMaxResolution","setMinResolution","zindex","errorThreshold","sourceProj_","transformInvCache","transformInv","transformInv_","errorThresholdSquared_","triangles_","wrapsXInSource_","canWrapXInSource_","sourceWorldWidth_","targetWorldWidth_","destinationTopLeft","destinationTopRight","destinationBottomRight","destinationBottomLeft","sourceTopLeft","sourceTopRight","sourceBottomRight","sourceBottomLeft","addQuad_","leftBound","newTriangle","addTriangle_","aSrc","bSrc","cSrc","dSrc","maxSubdivision","sourceQuadExtent","sourceCoverageX","sourceWorldWidth","wrapsX","needsSubdivision","targetQuadExtent","centerSrc","bc","bcSrc","da","daSrc","ab","abSrc","cd","cdSrc","_ImageBase_js__WEBPACK_IMPORTED_MODULE_0__","_ImageState_js__WEBPACK_IMPORTED_MODULE_1__","_events_js__WEBPACK_IMPORTED_MODULE_2__","_extent_js__WEBPACK_IMPORTED_MODULE_4__","ImageWrapper","appendParams","uri","keyParams","encodeURIComponent","qs","_reproj_js__WEBPACK_IMPORTED_MODULE_6__","_size_js__WEBPACK_IMPORTED_MODULE_7__","_TileImage_js__WEBPACK_IMPORTED_MODULE_8__","_WMSServerType_js__WEBPACK_IMPORTED_MODULE_9__","_tilecoord_js__WEBPACK_IMPORTED_MODULE_10__","TileWMS","transparent","tmpExtent_","getKeyForParams_","count_","entries_","oldest_","newest_","value_","newer","older","peekLastKey","_Image_js__WEBPACK_IMPORTED_MODULE_0__","_dom_js__WEBPACK_IMPORTED_MODULE_2__","_proj_js__WEBPACK_IMPORTED_MODULE_6__","_Image_js__WEBPACK_IMPORTED_MODULE_7__","Static","imageExtent_","imageWidth","imageHeight","targetWidth","getInteriorPointOfArray","getInteriorPointsOfMultiArray","flatCentersOffset","intersections","rr","maxSegmentLength","ret","getSnapToPixel","setRotateWithView","setSnapToPixel","lineStringLength","opt_errback","opt_callbackParam","script","async","timer","getElementsByTagName","_TileImage_js__WEBPACK_IMPORTED_MODULE_0__","_tilegrid_js__WEBPACK_IMPORTED_MODULE_1__","_FormatType_js__WEBPACK_IMPORTED_MODULE_2__","getObject","stringify","_array_js__WEBPACK_IMPORTED_MODULE_1__","_format_Feature_js__WEBPACK_IMPORTED_MODULE_2__","_format_FormatType_js__WEBPACK_IMPORTED_MODULE_3__","_xml_js__WEBPACK_IMPORTED_MODULE_4__","XMLFeature","xmlSerializer_","XMLSerializer","doc","readFeatureFromDocument","readFeatureFromNode","readFeaturesFromDocument","readFeaturesFromNode","ELEMENT_NODE","readGeometryFromDocument","readGeometryFromNode","readProjectionFromDocument","readProjectionFromNode","writeFeatureNode","serializeToString","writeFeaturesNode","writeGeometryNode","PJD_3PARAM","PJD_7PARAM","PJD_WGS84","PJD_NODATUM","SEC_TO_RAD","HALF_PI","SIXTH","RA4","RA6","EPSLN","D2R","R2D","FORTPI","TWO_PI","SPI","exports$1","greenwich","lisbon","paris","bogota","madrid","rome","bern","jakarta","ferro","brussels","stockholm","athens","oslo","ft","to_meter","us-ft","ignoredChar","testkey","lkey","parseProj","defData","paramName","paramVal","paramOutname","self","paramObj","v","reduce","datum","rf","lat_0","lat0","lat_1","lat_2","lat_ts","lon_0","long0","lon_1","long1","lon_2","long2","lonc","longc","x_0","y_0","k_0","k0","r_a","R_A","zone","south","utmSouth","towgs84","datum_params","unit","from_greenwich","pm","nadgrids","datumCode","NEUTRAL","whitespace","latin","keyword","endThings","digets","Parser","place","currentObject","mapit","thing","newObj","sExpr","shift","readCharicter","test","neutral","quoted","afterquote","word","afterItem","newObjects","D2R$1","d2r","wkt","lisp","projName","local","PROJECTION","UNIT","DATUM","SPHEROID","geogcs","GEOGCS","toMeter","ellps","TOWGS84","outName","inName","cleanWKT","defs","that","def","EPSG","ESRI","IAU2000","GOOGLE","globals","codeWords","codes","testObj","testDef","some","testWKT","auth","checkMercator","maybeProjStr","checkProjStr","testProj","msfnz","eccent","sinphi","cosphi","con","adjust_lon","tsfnz","phi","com","phi2z","ts","dphi","eccnth","identity","pt","projs","init","es","names","projStore","exports$2","MERIT","ellipseName","SGS85","GRS80","IAU76","airy","APL4","NWL9D","mod_airy","andrae","aust_SA","GRS67","bessel","bess_nam","clrk66","clrk80","clrk58","CPM","delmbr","engelis","evrst30","evrst48","evrst56","evrst69","evrstSS","fschr60","fschr60m","fschr68","helmert","hough","intl","kaula","lerch","mprts","new_intl","plessis","krass","SEasia","walbeck","WGS60","WGS66","WGS7","exports$3","srsCode","json","ourProj","datumDef","ellipse","datumName","sphere_","ecc","ep2","datumObj","datum_type","checkParams","wgs84","ch1903","ggrs87","nad83","nad27","potsdam","carthage","hermannskogel","osni52","ire65","rassadiran","nzgd49","osgb36","s_jtsk","beduaram","gunung_segara","rnb72","datum_transform","compareDatums","Rn","Sin_Lat","Sin2_Lat","Cos_Lat","Longitude","Latitude","Height","geodeticToGeocentric","Dx_BF","Dy_BF","Dz_BF","Rx_BF","Ry_BF","Rz_BF","M_BF","geocentricToWgs84","x_tmp","y_tmp","z_tmp","geocentricFromWgs84","P","RR","CT","ST","RX","RK","RN","CPHI0","SPHI0","CPHI","SPHI","SDPHI","iter","X","Y","Z","geocentricToGeodetic","adjust_axis","denorm","xin","yin","zin","toPoint","checkSanity","checkCoord","checkNotWGS","transformer","from","to","transformedArray","checkProj","oProj","proj4$1","fromProj","toProj","coord","single","NUM_100K_SETS","SET_ORIGIN_COLUMN_LETTERS","SET_ORIGIN_ROW_LETTERS","A","I","O","V","mgrs","forward$1","UTMtoLL","decode","toUpperCase","toPoint$1","accuracy","utm","column","row","colOrigin","rowOrigin","colInt","rowInt","rollover","easting","northing","zoneNumber","setParm","setColumn","setRow","seasting","snorthing","zoneLetter","get100kSetForZone","encode","T","C","LongOriginRad","ZoneNumber","Lat","Long","LatRad","degToRad","LongRad","LetterDesignator","UTMEasting","UTMNorthing","LLtoUTM","radToDeg","rad","T1","C1","R1","D","LongOrigin","mu","phi1Rad","mgrsString","testChar","hunK","sb","substring","east100k","curCol","eastingValue","rewindMarker","getEastingFromChar","north100k","curRow","northingValue","getNorthingFromChar","getMinNorthing","remainder","accuracyBonus","sepEastingString","sepNorthingString","sep","sepEasting","sepNorthing","fromMGRS","mgrsStr","toMGRS","C08","pj_enfn","en","pj_mlfn","sphi","cphi","pj_inv_mlfn","arg","tmerc","ml0","delta_lon","sin_phi","cos_phi","al","als","cs","tq","ml","tan_phi","ds","temp","sinh","hypot","asinhy","log1py","gatg","pp","B","cos_2B","h1","h2","clens","arg_r","hr","hr1","hr2","clens_cmplx","arg_i","hi2","sin_arg_r","cos_arg_r","sinh_arg_i","cosh_arg_i","hi1","etmerc","cgb","cbg","utg","gtu","np","Qn","Zb","Ce","Cn","sin_Cn","cos_Cn","sin_Ce","cos_Ce","adjust_zone","dependsOn","srat","esinp","MAX_ITER$1","gauss","rc","phic0","ratexp","K","sterea","sinc0","cosc0","R2","sinc","cosc","cosl","rho","stere","coslat0","sinlat0","cons","ms1","X0","ssfn_","cosX0","sinX0","sinX","cosX","rh","sinlat","coslat","dlon","ce","Chi","phit","eccen","somerc","phy0","lambda0","sinPhy0","semiMajorAxis","flattening","R","b0","k1","k2","k3","Sa1","Sa2","S","rotI","rotB","lambda","phy","prevPhy","iteration","omerc","no_off","no_rot","bl","fl","gl","t0","dl","t1","t2","hl","jl","pl","dlon12","dlon10","gamma0","uc","us","vs","ql","sl","tl","vl","ul","qp","sp","tp","vp","lcc","sin1","cos1","ts1","sin2","cos2","ms2","ts2","ts0","ns","f0","rh1","krovak","s45","s90","fi0","alfa","uq","n0","s0","ro0","ad","gfi","u","deltav","eps","ro","czech","fi1","ok","mlfn","e0","e3","e0fn","e1fn","e2fn","e3fn","gN","adjust_lat","imlfn","cass","lam","nl","asq","cl","ml1","phi1","nl1","rl1","tl1","dsq","qsfnz","P00","P01","P02","P10","P11","P20","laea","mode","S_POLE","N_POLE","EQUIT","OBLIQ","mmf","apa","APA","authset","rq","xmf","ymf","sinb1","cosb1","sinph0","cosph0","coslam","sinlam","q","sinb","cosb","phi0","cCe","sCe","beta","cosz","sinz","asinz","aea","sin_po","cos_po","qs1","qs2","t3","qs0","ns0","phi1z","eccnts","gnom","sin_p14","cos_p14","infinity_dist","coslon","iqsfnz","cea","eqc","dlat","MAX_ITER$2","poly","tanphi","mln","mlnp","ma","nzmg","B_re","B_im","C_re","C_im","delta_lat","d_phi","d_lambda","d_phi_n","d_psi","th_n_im1","th_re","th_im","th_n_re","th_n_im","z_re","z_im","z_n_im1","delta_x","z_n_re","z_n_im","iterations","num_re","num_im","den_re","den_im","den2","d_psi_n","mill","MAX_ITER$3","sinu","C_y","C_x","moll","delta_theta","eqdc","ml2","vandg","sinth","costh","gsq","msq","xx","yy","xys","c3","m1","th1","aeqd","sin_p12","cos_p12","Mlp","Ml","Nl1","Nl","psi","Az","G","H","GH","Hs","kp","cos_c","s3","s4","cosAz","Ee","F","ortho","FACE_ENUM","FRONT","BACK","AREA_ENUM","AREA_0","AREA_1","AREA_2","AREA_3","qsc_fwd_equat_face_theta","qsc_shift_lon_origin","slon","proj4","qsc","face","one_minus_f","one_minus_f_squared","xy","sinlon","nu","cosmu","tannu","tantheta","invert_sign","xa","lp","COEFS_X","COEFS_Y","FXC","FYC","RC1","NODES","poly3_val","coefs","poly3_der","robin","f_df","max_err","iters","upd","newton_rapshon","defaultDatum","Proj","factory","_net_js__WEBPACK_IMPORTED_MODULE_2__","_State_js__WEBPACK_IMPORTED_MODULE_4__","_TileImage_js__WEBPACK_IMPORTED_MODULE_5__","_tilecoord_js__WEBPACK_IMPORTED_MODULE_6__","BingMaps","culture_","culture","maxZoom_","apiKey_","imagerySet_","imagerySet","handleImageryMetadataResponse","getApiKey","getImagerySet","statusCode","statusDescription","authenticationResultCode","resourceSets","resources","resource","zoomMax","zoomMin","imageUrlSubdomains","subdomain","quadKeyTileCoord","imageUrl","imageryProviders","imageryProvider","intersecting","coverageAreas","coverageArea","epsg4326Extent","register","_proj_js__WEBPACK_IMPORTED_MODULE_0__","_transforms_js__WEBPACK_IMPORTED_MODULE_1__","_Projection_js__WEBPACK_IMPORTED_MODULE_2__","projCodes","code1","proj1","code2","proj2","_OSM_js__WEBPACK_IMPORTED_MODULE_0__","_XYZ_js__WEBPACK_IMPORTED_MODULE_1__","ATTRIBUTIONS","LayerConfig","terrain","terrain-background","terrain-labels","terrain-lines","toner-background","toner","toner-hybrid","toner-labels","toner-lines","toner-lite","watercolor","ProviderConfig","Stamen","providerConfig","layerConfig","_Feature_js__WEBPACK_IMPORTED_MODULE_0__","_XMLFeature_js__WEBPACK_IMPORTED_MODULE_3__","_xsd_js__WEBPACK_IMPORTED_MODULE_4__","_geom_GeometryLayout_js__WEBPACK_IMPORTED_MODULE_5__","_geom_GeometryType_js__WEBPACK_IMPORTED_MODULE_6__","_geom_LineString_js__WEBPACK_IMPORTED_MODULE_7__","_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_8__","_proj_js__WEBPACK_IMPORTED_MODULE_10__","_xml_js__WEBPACK_IMPORTED_MODULE_11__","NAMESPACE_URIS","FEATURE_READER","rte","readRte","trk","readTrk","wpt","readWpt","GPX_PARSERS","LINK_PARSERS","GPX_SERIALIZERS","RTE_SEQUENCE","RTE_SERIALIZERS","multiLineString","TRK_SEQUENCE","TRK_SERIALIZERS","writeWptType","GPX","readExtensions_","readExtensions","handleReadExtensions_","extensionsNode","featureReader","gpx","setAttributeNS","GPX_NODE_FACTORY","RTE_PARSERS","cmt","desc","link","parseLink","extensions","parseExtensions","rtept","RTEPT_PARSERS","rteValues","layoutOptions","ele","TRK_PARSERS","trkseg","TRKSEG_PARSERS","trkpt","TRKPT_PARSERS","trkValues","WPT_PARSERS","magvar","geoidheight","sym","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid","LINK_SEQUENCE","LINK_SERIALIZERS","writeLink","RTEPT_TYPE_SEQUENCE","TRKSEG_SERIALIZERS","TRKSEG_NODE_FACTORY","WPT_TYPE_SEQUENCE","WPT_TYPE_SERIALIZERS","GEOMETRY_TYPE_TO_NODENAME","getAttribute","hasZ","hasM","applyLayoutOptions","href","DEFAULT_COLOR","DEFAULT_IMAGE_STYLE_ANCHOR","DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS","DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS","DEFAULT_IMAGE_STYLE_SIZE","DEFAULT_IMAGE_STYLE_SRC","DEFAULT_IMAGE_SCALE_MULTIPLIER","_color_js__WEBPACK_IMPORTED_MODULE_3__","_Feature_js__WEBPACK_IMPORTED_MODULE_4__","_XMLFeature_js__WEBPACK_IMPORTED_MODULE_5__","_xsd_js__WEBPACK_IMPORTED_MODULE_6__","_geom_GeometryCollection_js__WEBPACK_IMPORTED_MODULE_7__","_geom_GeometryLayout_js__WEBPACK_IMPORTED_MODULE_8__","_geom_GeometryType_js__WEBPACK_IMPORTED_MODULE_9__","_geom_LineString_js__WEBPACK_IMPORTED_MODULE_10__","_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_11__","_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_12__","_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_13__","_geom_Point_js__WEBPACK_IMPORTED_MODULE_14__","_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_15__","_math_js__WEBPACK_IMPORTED_MODULE_16__","_proj_js__WEBPACK_IMPORTED_MODULE_17__","_style_Fill_js__WEBPACK_IMPORTED_MODULE_18__","_style_Icon_js__WEBPACK_IMPORTED_MODULE_19__","_style_IconAnchorUnits_js__WEBPACK_IMPORTED_MODULE_20__","_style_IconOrigin_js__WEBPACK_IMPORTED_MODULE_21__","_style_Stroke_js__WEBPACK_IMPORTED_MODULE_22__","_style_Style_js__WEBPACK_IMPORTED_MODULE_23__","_style_Text_js__WEBPACK_IMPORTED_MODULE_24__","_xml_js__WEBPACK_IMPORTED_MODULE_25__","GX_NAMESPACE_URIS","ICON_ANCHOR_UNITS_MAP","pixels","insetPixels","PLACEMARK_PARSERS","ExtendedData","extendedDataParser","Region","regionParser","MultiGeometry","readMultiGeometry","readLineString","readLinearRing","readPoint","readPolygon","readStyle","StyleMap","styleMapValue","readStyleMapValue","placemarkObject","address","description","phoneNumber","styleUrl","readURI","MultiTrack","GX_MULTITRACK_GEOMETRY_PARSERS","Track","readGxTrack","NETWORK_LINK_PARSERS","Link","REGION_PARSERS","LatLonAltBox","LAT_LON_ALT_BOX_PARSERS","regionObject","Lod","LOD_PARSERS","lodObject","KML_SEQUENCE","KML_SERIALIZERS","Document","DOCUMENT_SERIALIZERS","DOCUMENT_NODE_FACTORY","Placemark","writePlacemark","DEFAULT_FILL_STYLE","DEFAULT_NO_IMAGE_STYLE","DEFAULT_IMAGE_STYLE","DEFAULT_TEXT_STROKE_STYLE","DEFAULT_STROKE_STYLE","DEFAULT_TEXT_STYLE","DEFAULT_STYLE","DEFAULT_STYLE_ARRAY","KML","defaultStyle_","defaultStyle","extractStyles_","extractStyles","writeStyles_","writeStyles","sharedStyles_","showPointNames_","showPointNames","readDocumentOrFolder_","Folder","readPlacemark_","readSharedStyle_","readSharedStyleMap_","sharedStyles","nameStyle","drawName","createNameStyleFunction","foundStyle","findStyle","styleValue","createFeatureStyleFunction","styleUri","baseURI","location","URL","fs","readName","readNameFromDocument","readNameFromNode","readNetworkLinks","networkLinks","readNetworkLinksFromDocument","readNetworkLinksFromNode","readRegion","regions","readRegionFromDocument","readRegionFromNode","kml","xmlnsUri","textOffset","imageScale","foundText","readColor","hexColor","readFlatCoordinates","readScale","STYLE_MAP_PARSERS","Pair","pairObject","PAIR_PARSERS","ICON_STYLE_PARSERS","iconObject","ICON_PARSERS","hotSpot","xunits","yunits","LABEL_STYLE_PARSERS","LINE_STYLE_PARSERS","POLY_STYLE_PARSERS","FLAT_LINEAR_RING_PARSERS","readFlatLinearRing","GX_TRACK_PARSERS","when","whens","gxTrackObject","GEOMETRY_FLAT_COORDINATES_PARSERS","readFlatCoordinatesFromNode","EXTRUDE_AND_ALTITUDE_MODE_PARSERS","extrude","tessellate","MULTI_GEOMETRY_PARSERS","multiGeometry","homogeneous","setCommonGeometryProperties","FLAT_LINEAR_RINGS_PARSERS","innerBoundaryIs","flatLinearRing","INNER_BOUNDARY_IS_PARSERS","flatLinearRings","outerBoundaryIs","OUTER_BOUNDARY_IS_PARSERS","STYLE_PARSERS","IconStyle","styleObject","IconObject","drawIcon","LineStyle","PolyStyle","hasExtrude","hasTessellate","hasAltitudeMode","extrudes","tessellates","altitudeModes","DATA_PARSERS","displayName","EXTENDED_DATA_PARSERS","Data","featureObject","SchemaData","SCHEMA_DATA_PARSERS","SimpleData","minAltitude","maxAltitude","north","east","west","minLodPixels","maxLodPixels","minFadeExtent","maxFadeExtent","writeColorTextNode","rgba","abgr","hex","EXTENDEDDATA_NODE_SERIALIZERS","pair","DATA_NODE_FACTORY","ICON_SEQUENCE","ICON_SERIALIZERS","GX_NODE_FACTORY","ICON_STYLE_SEQUENCE","ICON_STYLE_SERIALIZERS","icon","vec2","writeScaleTextNode","LABEL_STYLE_SEQUENCE","LABEL_STYLE_SERIALIZERS","LINE_STYLE_SEQUENCE","LINE_STYLE_SERIALIZERS","GEOMETRY_NODE_FACTORY","POINT_NODE_FACTORY","LINE_STRING_NODE_FACTORY","LINEAR_RING_NODE_FACTORY","POLYGON_NODE_FACTORY","MULTI_GEOMETRY_SERIALIZERS","writePrimitiveGeometry","writePolygon","writeMultiGeometry","BOUNDARY_IS_SERIALIZERS","writeBoundaryIs","PLACEMARK_SERIALIZERS","namesAndValues","STYLE_SEQUENCE","STYLE_SERIALIZERS","PLACEMARK_SEQUENCE","EXTENDEDDATA_NODE_FACTORY","PRIMITIVE_GEOMETRY_SEQUENCE","PRIMITIVE_GEOMETRY_SERIALIZERS","POLYGON_SERIALIZERS","INNER_BOUNDARY_NODE_FACTORY","OUTER_BOUNDARY_NODE_FACTORY","outerRing","POLY_STYLE_SERIALIZERS","COLOR_NODE_FACTORY","iconProperties","_JSONFeature_js__WEBPACK_IMPORTED_MODULE_2__","_geom_LineString_js__WEBPACK_IMPORTED_MODULE_3__","_geom_MultiLineString_js__WEBPACK_IMPORTED_MODULE_4__","_geom_MultiPoint_js__WEBPACK_IMPORTED_MODULE_5__","_geom_MultiPolygon_js__WEBPACK_IMPORTED_MODULE_6__","_geom_Point_js__WEBPACK_IMPORTED_MODULE_7__","_geom_Polygon_js__WEBPACK_IMPORTED_MODULE_8__","_proj_js__WEBPACK_IMPORTED_MODULE_9__","TopoJSON","layerName_","layerName","layers_","topoJSONTopology","arcs","transformArc","transformArcs","topoJSONFeatures","objectName","readFeaturesFromGeometryCollection","readFeatureFromGeometry","GEOMETRY_READERS","transformVertex","concatenateArcs","polyArray","ringCoords","indices","geometryReader","vertex","format_TextFeature","TextFeature","readFeatureFromText","readFeaturesFromText","readGeometryFromText","readProjectionFromText","writeFeatureText","writeFeaturesText","writeGeometryText","format_Feature","IGCZ","BAROMETRIC","GPS","B_RECORD_RE","H_RECORD_RE","HFDTE_RECORD_RE","NEWLINE_RE","IGC_IGC","IGC","altitudeMode_","year","month","day","lastDateTime","line","hour","minute","UTC","swap","defaultCompare","quickselectStep","sd","newLeft","newRight"],"mappings":"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","file":"commons.9c9f6bb95e56b826e2dc.js","sourcesContent":["/**\n * @module ol/xml\n */\nimport {extend} from './array.js';\n\n\n/**\n * When using {@link module:ol/xml~makeChildAppender} or\n * {@link module:ol/xml~makeSimpleNodeFactory}, the top `objectStack` item needs\n * to have this structure.\n * @typedef {Object} NodeStackItem\n * @property {Node} node\n */\n\n\n/**\n * @typedef {function(Element, Array<*>)} Parser\n */\n\n\n/**\n * @typedef {function(Element, *, Array<*>)} Serializer\n */\n\n\n/**\n * This document should be used when creating nodes for XML serializations. This\n * document is also used by {@link module:ol/xml~createElementNS}\n * @const\n * @type {Document}\n */\nexport const DOCUMENT = document.implementation.createDocument('', '', null);\n\n\n/**\n * @type {string}\n */\nexport const XML_SCHEMA_INSTANCE_URI = 'http://www.w3.org/2001/XMLSchema-instance';\n\n\n/**\n * @param {string} namespaceURI Namespace URI.\n * @param {string} qualifiedName Qualified name.\n * @return {Element} Node.\n */\nexport function createElementNS(namespaceURI, qualifiedName) {\n  return DOCUMENT.createElementNS(namespaceURI, qualifiedName);\n}\n\n\n/**\n * Recursively grab all text content of child nodes into a single string.\n * @param {Node} node Node.\n * @param {boolean} normalizeWhitespace Normalize whitespace: remove all line\n * breaks.\n * @return {string} All text content.\n * @api\n */\nexport function getAllTextContent(node, normalizeWhitespace) {\n  return getAllTextContent_(node, normalizeWhitespace, []).join('');\n}\n\n\n/**\n * Recursively grab all text content of child nodes into a single string.\n * @param {Node} node Node.\n * @param {boolean} normalizeWhitespace Normalize whitespace: remove all line\n * breaks.\n * @param {Array<string>} accumulator Accumulator.\n * @private\n * @return {Array<string>} Accumulator.\n */\nexport function getAllTextContent_(node, normalizeWhitespace, accumulator) {\n  if (node.nodeType == Node.CDATA_SECTION_NODE ||\n      node.nodeType == Node.TEXT_NODE) {\n    if (normalizeWhitespace) {\n      accumulator.push(String(node.nodeValue).replace(/(\\r\\n|\\r|\\n)/g, ''));\n    } else {\n      accumulator.push(node.nodeValue);\n    }\n  } else {\n    let n;\n    for (n = node.firstChild; n; n = n.nextSibling) {\n      getAllTextContent_(n, normalizeWhitespace, accumulator);\n    }\n  }\n  return accumulator;\n}\n\n\n/**\n * @param {Object} object Object.\n * @return {boolean} Is a document.\n */\nexport function isDocument(object) {\n  return 'documentElement' in object;\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {?string} namespaceURI Namespace URI.\n * @param {string} name Attribute name.\n * @return {string} Value\n */\nexport function getAttributeNS(node, namespaceURI, name) {\n  return node.getAttributeNS(namespaceURI, name) || '';\n}\n\n\n/**\n * Parse an XML string to an XML Document.\n * @param {string} xml XML.\n * @return {Document} Document.\n * @api\n */\nexport function parse(xml) {\n  return new DOMParser().parseFromString(xml, 'application/xml');\n}\n\n\n/**\n * Make an array extender function for extending the array at the top of the\n * object stack.\n * @param {function(this: T, Node, Array<*>): (Array<*>|undefined)} valueReader Value reader.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeArrayExtender(valueReader, opt_this) {\n  return (\n    /**\n     * @param {Node} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      const value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n      if (value !== undefined) {\n        const array = /** @type {Array<*>} */ (objectStack[objectStack.length - 1]);\n        extend(array, value);\n      }\n    }\n  );\n}\n\n\n/**\n * Make an array pusher function for pushing to the array at the top of the\n * object stack.\n * @param {function(this: T, Element, Array<*>): *} valueReader Value reader.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeArrayPusher(valueReader, opt_this) {\n  return (\n    /**\n     * @param {Element} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      const value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n      if (value !== undefined) {\n        const array = /** @type {Array<*>} */ (objectStack[objectStack.length - 1]);\n        array.push(value);\n      }\n    });\n}\n\n\n/**\n * Make an object stack replacer function for replacing the object at the\n * top of the stack.\n * @param {function(this: T, Node, Array<*>): *} valueReader Value reader.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeReplacer(valueReader, opt_this) {\n  return (\n    /**\n     * @param {Node} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      const value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n      if (value !== undefined) {\n        objectStack[objectStack.length - 1] = value;\n      }\n    });\n}\n\n\n/**\n * Make an object property pusher function for adding a property to the\n * object at the top of the stack.\n * @param {function(this: T, Element, Array<*>): *} valueReader Value reader.\n * @param {string=} opt_property Property.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeObjectPropertyPusher(valueReader, opt_property, opt_this) {\n  return (\n    /**\n     * @param {Element} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      const value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n      if (value !== undefined) {\n        const object = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\n        const property = opt_property !== undefined ? opt_property : node.localName;\n        let array;\n        if (property in object) {\n          array = object[property];\n        } else {\n          array = object[property] = [];\n        }\n        array.push(value);\n      }\n    });\n}\n\n\n/**\n * Make an object property setter function.\n * @param {function(this: T, Element, Array<*>): *} valueReader Value reader.\n * @param {string=} opt_property Property.\n * @param {T=} opt_this The object to use as `this` in `valueReader`.\n * @return {Parser} Parser.\n * @template T\n */\nexport function makeObjectPropertySetter(valueReader, opt_property, opt_this) {\n  return (\n    /**\n     * @param {Element} node Node.\n     * @param {Array<*>} objectStack Object stack.\n     */\n    function(node, objectStack) {\n      const value = valueReader.call(opt_this !== undefined ? opt_this : this, node, objectStack);\n      if (value !== undefined) {\n        const object = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\n        const property = opt_property !== undefined ? opt_property : node.localName;\n        object[property] = value;\n      }\n    });\n}\n\n\n/**\n * Create a serializer that appends nodes written by its `nodeWriter` to its\n * designated parent. The parent is the `node` of the\n * {@link module:ol/xml~NodeStackItem} at the top of the `objectStack`.\n * @param {function(this: T, Node, V, Array<*>)} nodeWriter Node writer.\n * @param {T=} opt_this The object to use as `this` in `nodeWriter`.\n * @return {Serializer} Serializer.\n * @template T, V\n */\nexport function makeChildAppender(nodeWriter, opt_this) {\n  return function(node, value, objectStack) {\n    nodeWriter.call(opt_this !== undefined ? opt_this : this, node, value, objectStack);\n    const parent = /** @type {NodeStackItem} */ (objectStack[objectStack.length - 1]);\n    const parentNode = parent.node;\n    parentNode.appendChild(node);\n  };\n}\n\n\n/**\n * Create a serializer that calls the provided `nodeWriter` from\n * {@link module:ol/xml~serialize}. This can be used by the parent writer to have the\n * 'nodeWriter' called with an array of values when the `nodeWriter` was\n * designed to serialize a single item. An example would be a LineString\n * geometry writer, which could be reused for writing MultiLineString\n * geometries.\n * @param {function(this: T, Element, V, Array<*>)} nodeWriter Node writer.\n * @param {T=} opt_this The object to use as `this` in `nodeWriter`.\n * @return {Serializer} Serializer.\n * @template T, V\n */\nexport function makeArraySerializer(nodeWriter, opt_this) {\n  let serializersNS, nodeFactory;\n  return function(node, value, objectStack) {\n    if (serializersNS === undefined) {\n      serializersNS = {};\n      const serializers = {};\n      serializers[node.localName] = nodeWriter;\n      serializersNS[node.namespaceURI] = serializers;\n      nodeFactory = makeSimpleNodeFactory(node.localName);\n    }\n    serialize(serializersNS, nodeFactory, value, objectStack);\n  };\n}\n\n\n/**\n * Create a node factory which can use the `opt_keys` passed to\n * {@link module:ol/xml~serialize} or {@link module:ol/xml~pushSerializeAndPop} as node names,\n * or a fixed node name. The namespace of the created nodes can either be fixed,\n * or the parent namespace will be used.\n * @param {string=} opt_nodeName Fixed node name which will be used for all\n *     created nodes. If not provided, the 3rd argument to the resulting node\n *     factory needs to be provided and will be the nodeName.\n * @param {string=} opt_namespaceURI Fixed namespace URI which will be used for\n *     all created nodes. If not provided, the namespace of the parent node will\n *     be used.\n * @return {function(*, Array<*>, string=): (Node|undefined)} Node factory.\n */\nexport function makeSimpleNodeFactory(opt_nodeName, opt_namespaceURI) {\n  const fixedNodeName = opt_nodeName;\n  return (\n    /**\n     * @param {*} value Value.\n     * @param {Array<*>} objectStack Object stack.\n     * @param {string=} opt_nodeName Node name.\n     * @return {Node} Node.\n     */\n    function(value, objectStack, opt_nodeName) {\n      const context = /** @type {NodeStackItem} */ (objectStack[objectStack.length - 1]);\n      const node = context.node;\n      let nodeName = fixedNodeName;\n      if (nodeName === undefined) {\n        nodeName = opt_nodeName;\n      }\n\n      const namespaceURI = opt_namespaceURI !== undefined ? opt_namespaceURI : node.namespaceURI;\n      return createElementNS(namespaceURI, /** @type {string} */ (nodeName));\n    }\n  );\n}\n\n\n/**\n * A node factory that creates a node using the parent's `namespaceURI` and the\n * `nodeName` passed by {@link module:ol/xml~serialize} or\n * {@link module:ol/xml~pushSerializeAndPop} to the node factory.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nexport const OBJECT_PROPERTY_NODE_FACTORY = makeSimpleNodeFactory();\n\n\n/**\n * Create an array of `values` to be used with {@link module:ol/xml~serialize} or\n * {@link module:ol/xml~pushSerializeAndPop}, where `orderedKeys` has to be provided as\n * `opt_key` argument.\n * @param {Object<string, V>} object Key-value pairs for the sequence. Keys can\n *     be a subset of the `orderedKeys`.\n * @param {Array<string>} orderedKeys Keys in the order of the sequence.\n * @return {Array<V>} Values in the order of the sequence. The resulting array\n *     has the same length as the `orderedKeys` array. Values that are not\n *     present in `object` will be `undefined` in the resulting array.\n * @template V\n */\nexport function makeSequence(object, orderedKeys) {\n  const length = orderedKeys.length;\n  const sequence = new Array(length);\n  for (let i = 0; i < length; ++i) {\n    sequence[i] = object[orderedKeys[i]];\n  }\n  return sequence;\n}\n\n\n/**\n * Create a namespaced structure, using the same values for each namespace.\n * This can be used as a starting point for versioned parsers, when only a few\n * values are version specific.\n * @param {Array<string>} namespaceURIs Namespace URIs.\n * @param {T} structure Structure.\n * @param {Object<string, T>=} opt_structureNS Namespaced structure to add to.\n * @return {Object<string, T>} Namespaced structure.\n * @template T\n */\nexport function makeStructureNS(namespaceURIs, structure, opt_structureNS) {\n  /**\n   * @type {Object<string, T>}\n   */\n  const structureNS = opt_structureNS !== undefined ? opt_structureNS : {};\n  let i, ii;\n  for (i = 0, ii = namespaceURIs.length; i < ii; ++i) {\n    structureNS[namespaceURIs[i]] = structure;\n  }\n  return structureNS;\n}\n\n\n/**\n * Parse a node using the parsers and object stack.\n * @param {Object<string, Object<string, Parser>>} parsersNS\n *     Parsers by namespace.\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @param {*=} opt_this The object to use as `this`.\n */\nexport function parseNode(parsersNS, node, objectStack, opt_this) {\n  let n;\n  for (n = node.firstElementChild; n; n = n.nextElementSibling) {\n    const parsers = parsersNS[n.namespaceURI];\n    if (parsers !== undefined) {\n      const parser = parsers[n.localName];\n      if (parser !== undefined) {\n        parser.call(opt_this, n, objectStack);\n      }\n    }\n  }\n}\n\n\n/**\n * Push an object on top of the stack, parse and return the popped object.\n * @param {T} object Object.\n * @param {Object<string, Object<string, Parser>>} parsersNS\n *     Parsers by namespace.\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @param {*=} opt_this The object to use as `this`.\n * @return {T} Object.\n * @template T\n */\nexport function pushParseAndPop(object, parsersNS, node, objectStack, opt_this) {\n  objectStack.push(object);\n  parseNode(parsersNS, node, objectStack, opt_this);\n  return /** @type {T} */ (objectStack.pop());\n}\n\n\n/**\n * Walk through an array of `values` and call a serializer for each value.\n * @param {Object<string, Object<string, Serializer>>} serializersNS\n *     Namespaced serializers.\n * @param {function(this: T, *, Array<*>, (string|undefined)): (Node|undefined)} nodeFactory\n *     Node factory. The `nodeFactory` creates the node whose namespace and name\n *     will be used to choose a node writer from `serializersNS`. This\n *     separation allows us to decide what kind of node to create, depending on\n *     the value we want to serialize. An example for this would be different\n *     geometry writers based on the geometry type.\n * @param {Array<*>} values Values to serialize. An example would be an array\n *     of {@link module:ol/Feature~Feature} instances.\n * @param {Array<*>} objectStack Node stack.\n * @param {Array<string>=} opt_keys Keys of the `values`. Will be passed to the\n *     `nodeFactory`. This is used for serializing object literals where the\n *     node name relates to the property key. The array length of `opt_keys` has\n *     to match the length of `values`. For serializing a sequence, `opt_keys`\n *     determines the order of the sequence.\n * @param {T=} opt_this The object to use as `this` for the node factory and\n *     serializers.\n * @template T\n */\nexport function serialize(\n  serializersNS, nodeFactory, values, objectStack, opt_keys, opt_this) {\n  const length = (opt_keys !== undefined ? opt_keys : values).length;\n  let value, node;\n  for (let i = 0; i < length; ++i) {\n    value = values[i];\n    if (value !== undefined) {\n      node = nodeFactory.call(opt_this !== undefined ? opt_this : this, value, objectStack,\n        opt_keys !== undefined ? opt_keys[i] : undefined);\n      if (node !== undefined) {\n        serializersNS[node.namespaceURI][node.localName]\n          .call(opt_this, node, value, objectStack);\n      }\n    }\n  }\n}\n\n\n/**\n * @param {O} object Object.\n * @param {Object<string, Object<string, Serializer>>} serializersNS\n *     Namespaced serializers.\n * @param {function(this: T, *, Array<*>, (string|undefined)): (Node|undefined)} nodeFactory\n *     Node factory. The `nodeFactory` creates the node whose namespace and name\n *     will be used to choose a node writer from `serializersNS`. This\n *     separation allows us to decide what kind of node to create, depending on\n *     the value we want to serialize. An example for this would be different\n *     geometry writers based on the geometry type.\n * @param {Array<*>} values Values to serialize. An example would be an array\n *     of {@link module:ol/Feature~Feature} instances.\n * @param {Array<*>} objectStack Node stack.\n * @param {Array<string>=} opt_keys Keys of the `values`. Will be passed to the\n *     `nodeFactory`. This is used for serializing object literals where the\n *     node name relates to the property key. The array length of `opt_keys` has\n *     to match the length of `values`. For serializing a sequence, `opt_keys`\n *     determines the order of the sequence.\n * @param {T=} opt_this The object to use as `this` for the node factory and\n *     serializers.\n * @return {O|undefined} Object.\n * @template O, T\n */\nexport function pushSerializeAndPop(object, serializersNS, nodeFactory, values, objectStack, opt_keys, opt_this) {\n  objectStack.push(object);\n  serialize(serializersNS, nodeFactory, values, objectStack, opt_keys, opt_this);\n  return /** @type {O|undefined} */ (objectStack.pop());\n}\n","/**\n * @module ol/extent\n */\nimport {assert} from './asserts.js';\nimport Corner from './extent/Corner.js';\nimport Relationship from './extent/Relationship.js';\n\n\n/**\n * An array of numbers representing an extent: `[minx, miny, maxx, maxy]`.\n * @typedef {Array<number>} Extent\n * @api\n */\n\n/**\n * Build an extent that includes all given coordinates.\n *\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @return {Extent} Bounding extent.\n * @api\n */\nexport function boundingExtent(coordinates) {\n  const extent = createEmpty();\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    extendCoordinate(extent, coordinates[i]);\n  }\n  return extent;\n}\n\n\n/**\n * @param {Array<number>} xs Xs.\n * @param {Array<number>} ys Ys.\n * @param {Extent=} opt_extent Destination extent.\n * @private\n * @return {Extent} Extent.\n */\nfunction _boundingExtentXYs(xs, ys, opt_extent) {\n  const minX = Math.min.apply(null, xs);\n  const minY = Math.min.apply(null, ys);\n  const maxX = Math.max.apply(null, xs);\n  const maxY = Math.max.apply(null, ys);\n  return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n}\n\n\n/**\n * Return extent increased by the provided value.\n * @param {Extent} extent Extent.\n * @param {number} value The amount by which the extent should be buffered.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n * @api\n */\nexport function buffer(extent, value, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = extent[0] - value;\n    opt_extent[1] = extent[1] - value;\n    opt_extent[2] = extent[2] + value;\n    opt_extent[3] = extent[3] + value;\n    return opt_extent;\n  } else {\n    return [\n      extent[0] - value,\n      extent[1] - value,\n      extent[2] + value,\n      extent[3] + value\n    ];\n  }\n}\n\n\n/**\n * Creates a clone of an extent.\n *\n * @param {Extent} extent Extent to clone.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} The clone.\n */\nexport function clone(extent, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = extent[0];\n    opt_extent[1] = extent[1];\n    opt_extent[2] = extent[2];\n    opt_extent[3] = extent[3];\n    return opt_extent;\n  } else {\n    return extent.slice();\n  }\n}\n\n\n/**\n * @param {Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {number} Closest squared distance.\n */\nexport function closestSquaredDistanceXY(extent, x, y) {\n  let dx, dy;\n  if (x < extent[0]) {\n    dx = extent[0] - x;\n  } else if (extent[2] < x) {\n    dx = x - extent[2];\n  } else {\n    dx = 0;\n  }\n  if (y < extent[1]) {\n    dy = extent[1] - y;\n  } else if (extent[3] < y) {\n    dy = y - extent[3];\n  } else {\n    dy = 0;\n  }\n  return dx * dx + dy * dy;\n}\n\n\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {Extent} extent Extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @return {boolean} The coordinate is contained in the extent.\n * @api\n */\nexport function containsCoordinate(extent, coordinate) {\n  return containsXY(extent, coordinate[0], coordinate[1]);\n}\n\n\n/**\n * Check if one extent contains another.\n *\n * An extent is deemed contained if it lies completely within the other extent,\n * including if they share one or more edges.\n *\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {boolean} The second extent is contained by or on the edge of the\n *     first.\n * @api\n */\nexport function containsExtent(extent1, extent2) {\n  return extent1[0] <= extent2[0] && extent2[2] <= extent1[2] &&\n      extent1[1] <= extent2[1] && extent2[3] <= extent1[3];\n}\n\n\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {Extent} extent Extent.\n * @param {number} x X coordinate.\n * @param {number} y Y coordinate.\n * @return {boolean} The x, y values are contained in the extent.\n * @api\n */\nexport function containsXY(extent, x, y) {\n  return extent[0] <= x && x <= extent[2] && extent[1] <= y && y <= extent[3];\n}\n\n\n/**\n * Get the relationship between a coordinate and extent.\n * @param {Extent} extent The extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate The coordinate.\n * @return {Relationship} The relationship (bitwise compare with\n *     import(\"./extent/Relationship.js\").Relationship).\n */\nexport function coordinateRelationship(extent, coordinate) {\n  const minX = extent[0];\n  const minY = extent[1];\n  const maxX = extent[2];\n  const maxY = extent[3];\n  const x = coordinate[0];\n  const y = coordinate[1];\n  let relationship = Relationship.UNKNOWN;\n  if (x < minX) {\n    relationship = relationship | Relationship.LEFT;\n  } else if (x > maxX) {\n    relationship = relationship | Relationship.RIGHT;\n  }\n  if (y < minY) {\n    relationship = relationship | Relationship.BELOW;\n  } else if (y > maxY) {\n    relationship = relationship | Relationship.ABOVE;\n  }\n  if (relationship === Relationship.UNKNOWN) {\n    relationship = Relationship.INTERSECTING;\n  }\n  return relationship;\n}\n\n\n/**\n * Create an empty extent.\n * @return {Extent} Empty extent.\n * @api\n */\nexport function createEmpty() {\n  return [Infinity, Infinity, -Infinity, -Infinity];\n}\n\n\n/**\n * Create a new extent or update the provided extent.\n * @param {number} minX Minimum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxX Maximum X.\n * @param {number} maxY Maximum Y.\n * @param {Extent=} opt_extent Destination extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdate(minX, minY, maxX, maxY, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = minX;\n    opt_extent[1] = minY;\n    opt_extent[2] = maxX;\n    opt_extent[3] = maxY;\n    return opt_extent;\n  } else {\n    return [minX, minY, maxX, maxY];\n  }\n}\n\n\n/**\n * Create a new empty extent or make the provided one empty.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateEmpty(opt_extent) {\n  return createOrUpdate(\n    Infinity, Infinity, -Infinity, -Infinity, opt_extent);\n}\n\n\n/**\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromCoordinate(coordinate, opt_extent) {\n  const x = coordinate[0];\n  const y = coordinate[1];\n  return createOrUpdate(x, y, x, y, opt_extent);\n}\n\n\n/**\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromCoordinates(coordinates, opt_extent) {\n  const extent = createOrUpdateEmpty(opt_extent);\n  return extendCoordinates(extent, coordinates);\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromFlatCoordinates(flatCoordinates, offset, end, stride, opt_extent) {\n  const extent = createOrUpdateEmpty(opt_extent);\n  return extendFlatCoordinates(extent, flatCoordinates, offset, end, stride);\n}\n\n/**\n * @param {Array<Array<import(\"./coordinate.js\").Coordinate>>} rings Rings.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromRings(rings, opt_extent) {\n  const extent = createOrUpdateEmpty(opt_extent);\n  return extendRings(extent, rings);\n}\n\n\n/**\n * Determine if two extents are equivalent.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {boolean} The two extents are equivalent.\n * @api\n */\nexport function equals(extent1, extent2) {\n  return extent1[0] == extent2[0] && extent1[2] == extent2[2] &&\n      extent1[1] == extent2[1] && extent1[3] == extent2[3];\n}\n\n\n/**\n * Modify an extent to include another extent.\n * @param {Extent} extent1 The extent to be modified.\n * @param {Extent} extent2 The extent that will be included in the first.\n * @return {Extent} A reference to the first (extended) extent.\n * @api\n */\nexport function extend(extent1, extent2) {\n  if (extent2[0] < extent1[0]) {\n    extent1[0] = extent2[0];\n  }\n  if (extent2[2] > extent1[2]) {\n    extent1[2] = extent2[2];\n  }\n  if (extent2[1] < extent1[1]) {\n    extent1[1] = extent2[1];\n  }\n  if (extent2[3] > extent1[3]) {\n    extent1[3] = extent2[3];\n  }\n  return extent1;\n}\n\n\n/**\n * @param {Extent} extent Extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n */\nexport function extendCoordinate(extent, coordinate) {\n  if (coordinate[0] < extent[0]) {\n    extent[0] = coordinate[0];\n  }\n  if (coordinate[0] > extent[2]) {\n    extent[2] = coordinate[0];\n  }\n  if (coordinate[1] < extent[1]) {\n    extent[1] = coordinate[1];\n  }\n  if (coordinate[1] > extent[3]) {\n    extent[3] = coordinate[1];\n  }\n}\n\n\n/**\n * @param {Extent} extent Extent.\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @return {Extent} Extent.\n */\nexport function extendCoordinates(extent, coordinates) {\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    extendCoordinate(extent, coordinates[i]);\n  }\n  return extent;\n}\n\n\n/**\n * @param {Extent} extent Extent.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {Extent} Extent.\n */\nexport function extendFlatCoordinates(extent, flatCoordinates, offset, end, stride) {\n  for (; offset < end; offset += stride) {\n    extendXY(extent, flatCoordinates[offset], flatCoordinates[offset + 1]);\n  }\n  return extent;\n}\n\n\n/**\n * @param {Extent} extent Extent.\n * @param {Array<Array<import(\"./coordinate.js\").Coordinate>>} rings Rings.\n * @return {Extent} Extent.\n */\nexport function extendRings(extent, rings) {\n  for (let i = 0, ii = rings.length; i < ii; ++i) {\n    extendCoordinates(extent, rings[i]);\n  }\n  return extent;\n}\n\n\n/**\n * @param {Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n */\nexport function extendXY(extent, x, y) {\n  extent[0] = Math.min(extent[0], x);\n  extent[1] = Math.min(extent[1], y);\n  extent[2] = Math.max(extent[2], x);\n  extent[3] = Math.max(extent[3], y);\n}\n\n\n/**\n * This function calls `callback` for each corner of the extent. If the\n * callback returns a truthy value the function returns that value\n * immediately. Otherwise the function returns `false`.\n * @param {Extent} extent Extent.\n * @param {function(this:T, import(\"./coordinate.js\").Coordinate): S} callback Callback.\n * @param {T=} opt_this Value to use as `this` when executing `callback`.\n * @return {S|boolean} Value.\n * @template S, T\n */\nexport function forEachCorner(extent, callback, opt_this) {\n  let val;\n  val = callback.call(opt_this, getBottomLeft(extent));\n  if (val) {\n    return val;\n  }\n  val = callback.call(opt_this, getBottomRight(extent));\n  if (val) {\n    return val;\n  }\n  val = callback.call(opt_this, getTopRight(extent));\n  if (val) {\n    return val;\n  }\n  val = callback.call(opt_this, getTopLeft(extent));\n  if (val) {\n    return val;\n  }\n  return false;\n}\n\n\n/**\n * Get the size of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Area.\n * @api\n */\nexport function getArea(extent) {\n  let area = 0;\n  if (!isEmpty(extent)) {\n    area = getWidth(extent) * getHeight(extent);\n  }\n  return area;\n}\n\n\n/**\n * Get the bottom left coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Bottom left coordinate.\n * @api\n */\nexport function getBottomLeft(extent) {\n  return [extent[0], extent[1]];\n}\n\n\n/**\n * Get the bottom right coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Bottom right coordinate.\n * @api\n */\nexport function getBottomRight(extent) {\n  return [extent[2], extent[1]];\n}\n\n\n/**\n * Get the center coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Center.\n * @api\n */\nexport function getCenter(extent) {\n  return [(extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2];\n}\n\n\n/**\n * Get a corner coordinate of an extent.\n * @param {Extent} extent Extent.\n * @param {Corner} corner Corner.\n * @return {import(\"./coordinate.js\").Coordinate} Corner coordinate.\n */\nexport function getCorner(extent, corner) {\n  let coordinate;\n  if (corner === Corner.BOTTOM_LEFT) {\n    coordinate = getBottomLeft(extent);\n  } else if (corner === Corner.BOTTOM_RIGHT) {\n    coordinate = getBottomRight(extent);\n  } else if (corner === Corner.TOP_LEFT) {\n    coordinate = getTopLeft(extent);\n  } else if (corner === Corner.TOP_RIGHT) {\n    coordinate = getTopRight(extent);\n  } else {\n    assert(false, 13); // Invalid corner\n  }\n  return coordinate;\n}\n\n\n/**\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {number} Enlarged area.\n */\nexport function getEnlargedArea(extent1, extent2) {\n  const minX = Math.min(extent1[0], extent2[0]);\n  const minY = Math.min(extent1[1], extent2[1]);\n  const maxX = Math.max(extent1[2], extent2[2]);\n  const maxY = Math.max(extent1[3], extent2[3]);\n  return (maxX - minX) * (maxY - minY);\n}\n\n\n/**\n * @param {import(\"./coordinate.js\").Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {import(\"./size.js\").Size} size Size.\n * @param {Extent=} opt_extent Destination extent.\n * @return {Extent} Extent.\n */\nexport function getForViewAndSize(center, resolution, rotation, size, opt_extent) {\n  const dx = resolution * size[0] / 2;\n  const dy = resolution * size[1] / 2;\n  const cosRotation = Math.cos(rotation);\n  const sinRotation = Math.sin(rotation);\n  const xCos = dx * cosRotation;\n  const xSin = dx * sinRotation;\n  const yCos = dy * cosRotation;\n  const ySin = dy * sinRotation;\n  const x = center[0];\n  const y = center[1];\n  const x0 = x - xCos + ySin;\n  const x1 = x - xCos - ySin;\n  const x2 = x + xCos - ySin;\n  const x3 = x + xCos + ySin;\n  const y0 = y - xSin - yCos;\n  const y1 = y - xSin + yCos;\n  const y2 = y + xSin + yCos;\n  const y3 = y + xSin - yCos;\n  return createOrUpdate(\n    Math.min(x0, x1, x2, x3), Math.min(y0, y1, y2, y3),\n    Math.max(x0, x1, x2, x3), Math.max(y0, y1, y2, y3),\n    opt_extent);\n}\n\n\n/**\n * Get the height of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Height.\n * @api\n */\nexport function getHeight(extent) {\n  return extent[3] - extent[1];\n}\n\n\n/**\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {number} Intersection area.\n */\nexport function getIntersectionArea(extent1, extent2) {\n  const intersection = getIntersection(extent1, extent2);\n  return getArea(intersection);\n}\n\n\n/**\n * Get the intersection of two extents.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @param {Extent=} opt_extent Optional extent to populate with intersection.\n * @return {Extent} Intersecting extent.\n * @api\n */\nexport function getIntersection(extent1, extent2, opt_extent) {\n  const intersection = opt_extent ? opt_extent : createEmpty();\n  if (intersects(extent1, extent2)) {\n    if (extent1[0] > extent2[0]) {\n      intersection[0] = extent1[0];\n    } else {\n      intersection[0] = extent2[0];\n    }\n    if (extent1[1] > extent2[1]) {\n      intersection[1] = extent1[1];\n    } else {\n      intersection[1] = extent2[1];\n    }\n    if (extent1[2] < extent2[2]) {\n      intersection[2] = extent1[2];\n    } else {\n      intersection[2] = extent2[2];\n    }\n    if (extent1[3] < extent2[3]) {\n      intersection[3] = extent1[3];\n    } else {\n      intersection[3] = extent2[3];\n    }\n  } else {\n    createOrUpdateEmpty(intersection);\n  }\n  return intersection;\n}\n\n\n/**\n * @param {Extent} extent Extent.\n * @return {number} Margin.\n */\nexport function getMargin(extent) {\n  return getWidth(extent) + getHeight(extent);\n}\n\n\n/**\n * Get the size (width, height) of an extent.\n * @param {Extent} extent The extent.\n * @return {import(\"./size.js\").Size} The extent size.\n * @api\n */\nexport function getSize(extent) {\n  return [extent[2] - extent[0], extent[3] - extent[1]];\n}\n\n\n/**\n * Get the top left coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Top left coordinate.\n * @api\n */\nexport function getTopLeft(extent) {\n  return [extent[0], extent[3]];\n}\n\n\n/**\n * Get the top right coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Top right coordinate.\n * @api\n */\nexport function getTopRight(extent) {\n  return [extent[2], extent[3]];\n}\n\n\n/**\n * Get the width of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Width.\n * @api\n */\nexport function getWidth(extent) {\n  return extent[2] - extent[0];\n}\n\n\n/**\n * Determine if one extent intersects another.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent.\n * @return {boolean} The two extents intersect.\n * @api\n */\nexport function intersects(extent1, extent2) {\n  return extent1[0] <= extent2[2] &&\n      extent1[2] >= extent2[0] &&\n      extent1[1] <= extent2[3] &&\n      extent1[3] >= extent2[1];\n}\n\n\n/**\n * Determine if an extent is empty.\n * @param {Extent} extent Extent.\n * @return {boolean} Is empty.\n * @api\n */\nexport function isEmpty(extent) {\n  return extent[2] < extent[0] || extent[3] < extent[1];\n}\n\n\n/**\n * @param {Extent} extent Extent.\n * @param {Extent=} opt_extent Extent.\n * @return {Extent} Extent.\n */\nexport function returnOrUpdate(extent, opt_extent) {\n  if (opt_extent) {\n    opt_extent[0] = extent[0];\n    opt_extent[1] = extent[1];\n    opt_extent[2] = extent[2];\n    opt_extent[3] = extent[3];\n    return opt_extent;\n  } else {\n    return extent;\n  }\n}\n\n\n/**\n * @param {Extent} extent Extent.\n * @param {number} value Value.\n */\nexport function scaleFromCenter(extent, value) {\n  const deltaX = ((extent[2] - extent[0]) / 2) * (value - 1);\n  const deltaY = ((extent[3] - extent[1]) / 2) * (value - 1);\n  extent[0] -= deltaX;\n  extent[2] += deltaX;\n  extent[1] -= deltaY;\n  extent[3] += deltaY;\n}\n\n\n/**\n * Determine if the segment between two coordinates intersects (crosses,\n * touches, or is contained by) the provided extent.\n * @param {Extent} extent The extent.\n * @param {import(\"./coordinate.js\").Coordinate} start Segment start coordinate.\n * @param {import(\"./coordinate.js\").Coordinate} end Segment end coordinate.\n * @return {boolean} The segment intersects the extent.\n */\nexport function intersectsSegment(extent, start, end) {\n  let intersects = false;\n  const startRel = coordinateRelationship(extent, start);\n  const endRel = coordinateRelationship(extent, end);\n  if (startRel === Relationship.INTERSECTING ||\n      endRel === Relationship.INTERSECTING) {\n    intersects = true;\n  } else {\n    const minX = extent[0];\n    const minY = extent[1];\n    const maxX = extent[2];\n    const maxY = extent[3];\n    const startX = start[0];\n    const startY = start[1];\n    const endX = end[0];\n    const endY = end[1];\n    const slope = (endY - startY) / (endX - startX);\n    let x, y;\n    if (!!(endRel & Relationship.ABOVE) &&\n        !(startRel & Relationship.ABOVE)) {\n      // potentially intersects top\n      x = endX - ((endY - maxY) / slope);\n      intersects = x >= minX && x <= maxX;\n    }\n    if (!intersects && !!(endRel & Relationship.RIGHT) &&\n        !(startRel & Relationship.RIGHT)) {\n      // potentially intersects right\n      y = endY - ((endX - maxX) * slope);\n      intersects = y >= minY && y <= maxY;\n    }\n    if (!intersects && !!(endRel & Relationship.BELOW) &&\n        !(startRel & Relationship.BELOW)) {\n      // potentially intersects bottom\n      x = endX - ((endY - minY) / slope);\n      intersects = x >= minX && x <= maxX;\n    }\n    if (!intersects && !!(endRel & Relationship.LEFT) &&\n        !(startRel & Relationship.LEFT)) {\n      // potentially intersects left\n      y = endY - ((endX - minX) * slope);\n      intersects = y >= minY && y <= maxY;\n    }\n\n  }\n  return intersects;\n}\n\n\n/**\n * Apply a transform function to the extent.\n * @param {Extent} extent Extent.\n * @param {import(\"./proj.js\").TransformFunction} transformFn Transform function.\n * Called with `[minX, minY, maxX, maxY]` extent coordinates.\n * @param {Extent=} opt_extent Destination extent.\n * @return {Extent} Extent.\n * @api\n */\nexport function applyTransform(extent, transformFn, opt_extent) {\n  const coordinates = [\n    extent[0], extent[1],\n    extent[0], extent[3],\n    extent[2], extent[1],\n    extent[2], extent[3]\n  ];\n  transformFn(coordinates, coordinates, 2);\n  const xs = [coordinates[0], coordinates[2], coordinates[4], coordinates[6]];\n  const ys = [coordinates[1], coordinates[3], coordinates[5], coordinates[7]];\n  return _boundingExtentXYs(xs, ys, opt_extent);\n}\n","/**\n * @module ol/events\n */\nimport {clear} from './obj.js';\n\n\n/**\n * Key to use with {@link module:ol/Observable~Observable#unByKey}.\n * @typedef {Object} EventsKey\n * @property {Object} [bindTo]\n * @property {ListenerFunction} [boundListener]\n * @property {boolean} callOnce\n * @property {number} [deleteIndex]\n * @property {ListenerFunction} listener\n * @property {import(\"./events/Target.js\").EventTargetLike} target\n * @property {string} type\n * @api\n */\n\n\n/**\n * Listener function. This function is called with an event object as argument.\n * When the function returns `false`, event propagation will stop.\n *\n * @typedef {function((Event|import(\"./events/Event.js\").default)): (void|boolean)} ListenerFunction\n * @api\n */\n\n\n/**\n * @param {EventsKey} listenerObj Listener object.\n * @return {ListenerFunction} Bound listener.\n */\nexport function bindListener(listenerObj) {\n  const boundListener = function(evt) {\n    const listener = listenerObj.listener;\n    const bindTo = listenerObj.bindTo || listenerObj.target;\n    if (listenerObj.callOnce) {\n      unlistenByKey(listenerObj);\n    }\n    return listener.call(bindTo, evt);\n  };\n  listenerObj.boundListener = boundListener;\n  return boundListener;\n}\n\n\n/**\n * Finds the matching {@link module:ol/events~EventsKey} in the given listener\n * array.\n *\n * @param {!Array<!EventsKey>} listeners Array of listeners.\n * @param {!Function} listener The listener function.\n * @param {Object=} opt_this The `this` value inside the listener.\n * @param {boolean=} opt_setDeleteIndex Set the deleteIndex on the matching\n *     listener, for {@link module:ol/events~unlistenByKey}.\n * @return {EventsKey|undefined} The matching listener object.\n */\nexport function findListener(listeners, listener, opt_this, opt_setDeleteIndex) {\n  let listenerObj;\n  for (let i = 0, ii = listeners.length; i < ii; ++i) {\n    listenerObj = listeners[i];\n    if (listenerObj.listener === listener &&\n        listenerObj.bindTo === opt_this) {\n      if (opt_setDeleteIndex) {\n        listenerObj.deleteIndex = i;\n      }\n      return listenerObj;\n    }\n  }\n  return undefined;\n}\n\n\n/**\n * @param {import(\"./events/Target.js\").EventTargetLike} target Target.\n * @param {string} type Type.\n * @return {Array<EventsKey>|undefined} Listeners.\n */\nexport function getListeners(target, type) {\n  const listenerMap = getListenerMap(target);\n  return listenerMap ? listenerMap[type] : undefined;\n}\n\n\n/**\n * Get the lookup of listeners.\n * @param {Object} target Target.\n * @param {boolean=} opt_create If a map should be created if it doesn't exist.\n * @return {!Object<string, Array<EventsKey>>} Map of\n *     listeners by event type.\n */\nfunction getListenerMap(target, opt_create) {\n  let listenerMap = target.ol_lm;\n  if (!listenerMap && opt_create) {\n    listenerMap = target.ol_lm = {};\n  }\n  return listenerMap;\n}\n\n\n/**\n * Remove the listener map from a target.\n * @param {Object} target Target.\n */\nfunction removeListenerMap(target) {\n  delete target.ol_lm;\n}\n\n\n/**\n * Clean up all listener objects of the given type.  All properties on the\n * listener objects will be removed, and if no listeners remain in the listener\n * map, it will be removed from the target.\n * @param {import(\"./events/Target.js\").EventTargetLike} target Target.\n * @param {string} type Type.\n */\nfunction removeListeners(target, type) {\n  const listeners = getListeners(target, type);\n  if (listeners) {\n    for (let i = 0, ii = listeners.length; i < ii; ++i) {\n      /** @type {import(\"./events/Target.js\").default} */ (target).\n        removeEventListener(type, listeners[i].boundListener);\n      clear(listeners[i]);\n    }\n    listeners.length = 0;\n    const listenerMap = getListenerMap(target);\n    if (listenerMap) {\n      delete listenerMap[type];\n      if (Object.keys(listenerMap).length === 0) {\n        removeListenerMap(target);\n      }\n    }\n  }\n}\n\n\n/**\n * Registers an event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` to a `this` object, and returns\n * a key for use with {@link module:ol/events~unlistenByKey}.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object=} opt_this Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @param {boolean=} opt_once If true, add the listener as one-off listener.\n * @return {EventsKey} Unique key for the listener.\n */\nexport function listen(target, type, listener, opt_this, opt_once) {\n  const listenerMap = getListenerMap(target, true);\n  let listeners = listenerMap[type];\n  if (!listeners) {\n    listeners = listenerMap[type] = [];\n  }\n  let listenerObj = findListener(listeners, listener, opt_this, false);\n  if (listenerObj) {\n    if (!opt_once) {\n      // Turn one-off listener into a permanent one.\n      listenerObj.callOnce = false;\n    }\n  } else {\n    listenerObj = /** @type {EventsKey} */ ({\n      bindTo: opt_this,\n      callOnce: !!opt_once,\n      listener: listener,\n      target: target,\n      type: type\n    });\n    /** @type {import(\"./events/Target.js\").default} */ (target).\n      addEventListener(type, bindListener(listenerObj));\n    listeners.push(listenerObj);\n  }\n\n  return listenerObj;\n}\n\n\n/**\n * Registers a one-off event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * This function efficiently binds a `listener` as self-unregistering listener\n * to a `this` object, and returns a key for use with\n * {@link module:ol/events~unlistenByKey} in case the listener needs to be\n * unregistered before it is called.\n *\n * When {@link module:ol/events~listen} is called with the same arguments after this\n * function, the self-unregistering listener will be turned into a permanent\n * listener.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object=} opt_this Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n * @return {EventsKey} Key for unlistenByKey.\n */\nexport function listenOnce(target, type, listener, opt_this) {\n  return listen(target, type, listener, opt_this, true);\n}\n\n\n/**\n * Unregisters an event listener on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * To return a listener, this function needs to be called with the exact same\n * arguments that were used for a previous {@link module:ol/events~listen} call.\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Event target.\n * @param {string} type Event type.\n * @param {ListenerFunction} listener Listener.\n * @param {Object=} opt_this Object referenced by the `this` keyword in the\n *     listener. Default is the `target`.\n */\nexport function unlisten(target, type, listener, opt_this) {\n  const listeners = getListeners(target, type);\n  if (listeners) {\n    const listenerObj = findListener(listeners, listener, opt_this, true);\n    if (listenerObj) {\n      unlistenByKey(listenerObj);\n    }\n  }\n}\n\n\n/**\n * Unregisters event listeners on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * The argument passed to this function is the key returned from\n * {@link module:ol/events~listen} or {@link module:ol/events~listenOnce}.\n *\n * @param {EventsKey} key The key.\n */\nexport function unlistenByKey(key) {\n  if (key && key.target) {\n    /** @type {import(\"./events/Target.js\").default} */ (key.target).\n      removeEventListener(key.type, key.boundListener);\n    const listeners = getListeners(key.target, key.type);\n    if (listeners) {\n      const i = 'deleteIndex' in key ? key.deleteIndex : listeners.indexOf(key);\n      if (i !== -1) {\n        listeners.splice(i, 1);\n      }\n      if (listeners.length === 0) {\n        removeListeners(key.target, key.type);\n      }\n    }\n    clear(key);\n  }\n}\n\n\n/**\n * Unregisters all event listeners on an event target. Inspired by\n * https://google.github.io/closure-library/api/source/closure/goog/events/events.js.src.html\n *\n * @param {import(\"./events/Target.js\").EventTargetLike} target Target.\n */\nexport function unlistenAll(target) {\n  const listenerMap = getListenerMap(target);\n  if (listenerMap) {\n    for (const type in listenerMap) {\n      removeListeners(target, type);\n    }\n  }\n}\n","/**\n * @module ol/util\n */\n\n/**\n * @return {?} Any return.\n */\nexport function abstract() {\n  return /** @type {?} */ ((function() {\n    throw new Error('Unimplemented abstract method.');\n  })());\n}\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * Usage:\n *\n *     function ParentClass(a, b) { }\n *     ParentClass.prototype.foo = function(a) { }\n *\n *     function ChildClass(a, b, c) {\n *       // Call parent constructor\n *       ParentClass.call(this, a, b);\n *     }\n *     inherits(ChildClass, ParentClass);\n *\n *     var child = new ChildClass('a', 'b', 'see');\n *     child.foo(); // This works.\n *\n * @param {!Function} childCtor Child constructor.\n * @param {!Function} parentCtor Parent constructor.\n * @function module:ol.inherits\n * @deprecated\n * @api\n */\nexport function inherits(childCtor, parentCtor) {\n  childCtor.prototype = Object.create(parentCtor.prototype);\n  childCtor.prototype.constructor = childCtor;\n}\n\n/**\n * Counter for getUid.\n * @type {number}\n * @private\n */\nlet uidCounter_ = 0;\n\n/**\n * Gets a unique ID for an object. This mutates the object so that further calls\n * with the same object as a parameter returns the same value. Unique IDs are generated\n * as a strictly increasing sequence. Adapted from goog.getUid.\n *\n * @param {Object} obj The object to get the unique ID for.\n * @return {string} The unique ID for the object.\n * @function module:ol.getUid\n * @api\n */\nexport function getUid(obj) {\n  return obj.ol_uid || (obj.ol_uid = String(++uidCounter_));\n}\n\n/**\n * OpenLayers version.\n * @type {string}\n */\nexport const VERSION = 'latest';\n","/**\n * @module ol/format/xsd\n */\nimport {getAllTextContent, DOCUMENT} from '../xml.js';\nimport {padNumber} from '../string.js';\n\n\n/**\n * @param {Node} node Node.\n * @return {boolean|undefined} Boolean.\n */\nexport function readBoolean(node) {\n  const s = getAllTextContent(node, false);\n  return readBooleanString(s);\n}\n\n\n/**\n * @param {string} string String.\n * @return {boolean|undefined} Boolean.\n */\nexport function readBooleanString(string) {\n  const m = /^\\s*(true|1)|(false|0)\\s*$/.exec(string);\n  if (m) {\n    return m[1] !== undefined || false;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} DateTime in seconds.\n */\nexport function readDateTime(node) {\n  const s = getAllTextContent(node, false);\n  const dateTime = Date.parse(s);\n  return isNaN(dateTime) ? undefined : dateTime / 1000;\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} Decimal.\n */\nexport function readDecimal(node) {\n  const s = getAllTextContent(node, false);\n  return readDecimalString(s);\n}\n\n\n/**\n * @param {string} string String.\n * @return {number|undefined} Decimal.\n */\nexport function readDecimalString(string) {\n  // FIXME check spec\n  const m = /^\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?)\\s*$/i.exec(string);\n  if (m) {\n    return parseFloat(m[1]);\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} Non negative integer.\n */\nexport function readNonNegativeInteger(node) {\n  const s = getAllTextContent(node, false);\n  return readNonNegativeIntegerString(s);\n}\n\n\n/**\n * @param {string} string String.\n * @return {number|undefined} Non negative integer.\n */\nexport function readNonNegativeIntegerString(string) {\n  const m = /^\\s*(\\d+)\\s*$/.exec(string);\n  if (m) {\n    return parseInt(m[1], 10);\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {string|undefined} String.\n */\nexport function readString(node) {\n  return getAllTextContent(node, false).trim();\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the boolean to.\n * @param {boolean} bool Boolean.\n */\nexport function writeBooleanTextNode(node, bool) {\n  writeStringTextNode(node, (bool) ? '1' : '0');\n}\n\n\n/**\n * @param {Node} node Node to append a CDATA Section with the string to.\n * @param {string} string String.\n */\nexport function writeCDATASection(node, string) {\n  node.appendChild(DOCUMENT.createCDATASection(string));\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the dateTime to.\n * @param {number} dateTime DateTime in seconds.\n */\nexport function writeDateTimeTextNode(node, dateTime) {\n  const date = new Date(dateTime * 1000);\n  const string = date.getUTCFullYear() + '-' +\n      padNumber(date.getUTCMonth() + 1, 2) + '-' +\n      padNumber(date.getUTCDate(), 2) + 'T' +\n      padNumber(date.getUTCHours(), 2) + ':' +\n      padNumber(date.getUTCMinutes(), 2) + ':' +\n      padNumber(date.getUTCSeconds(), 2) + 'Z';\n  node.appendChild(DOCUMENT.createTextNode(string));\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the decimal to.\n * @param {number} decimal Decimal.\n */\nexport function writeDecimalTextNode(node, decimal) {\n  const string = decimal.toPrecision();\n  node.appendChild(DOCUMENT.createTextNode(string));\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the decimal to.\n * @param {number} nonNegativeInteger Non negative integer.\n */\nexport function writeNonNegativeIntegerTextNode(node, nonNegativeInteger) {\n  const string = nonNegativeInteger.toString();\n  node.appendChild(DOCUMENT.createTextNode(string));\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the string to.\n * @param {string} string String.\n */\nexport function writeStringTextNode(node, string) {\n  node.appendChild(DOCUMENT.createTextNode(string));\n}\n","/**\n * @module ol/geom/GeometryType\n */\n\n/**\n * The geometry type. One of `'Point'`, `'LineString'`, `'LinearRing'`,\n * `'Polygon'`, `'MultiPoint'`, `'MultiLineString'`, `'MultiPolygon'`,\n * `'GeometryCollection'`, `'Circle'`.\n * @enum {string}\n */\nexport default {\n  POINT: 'Point',\n  LINE_STRING: 'LineString',\n  LINEAR_RING: 'LinearRing',\n  POLYGON: 'Polygon',\n  MULTI_POINT: 'MultiPoint',\n  MULTI_LINE_STRING: 'MultiLineString',\n  MULTI_POLYGON: 'MultiPolygon',\n  GEOMETRY_COLLECTION: 'GeometryCollection',\n  CIRCLE: 'Circle'\n};\n","/**\n * @module ol/proj/epsg3857\n */\nimport {cosh} from '../math.js';\nimport Projection from './Projection.js';\nimport Units from './Units.js';\n\n\n/**\n * Radius of WGS84 sphere\n *\n * @const\n * @type {number}\n */\nexport const RADIUS = 6378137;\n\n\n/**\n * @const\n * @type {number}\n */\nexport const HALF_SIZE = Math.PI * RADIUS;\n\n\n/**\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport const EXTENT = [\n  -HALF_SIZE, -HALF_SIZE,\n  HALF_SIZE, HALF_SIZE\n];\n\n\n/**\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport const WORLD_EXTENT = [-180, -85, 180, 85];\n\n\n/**\n * @classdesc\n * Projection object for web/spherical Mercator (EPSG:3857).\n */\nclass EPSG3857Projection extends Projection {\n\n  /**\n   * @param {string} code Code.\n   */\n  constructor(code) {\n    super({\n      code: code,\n      units: Units.METERS,\n      extent: EXTENT,\n      global: true,\n      worldExtent: WORLD_EXTENT,\n      getPointResolution: function(resolution, point) {\n        return resolution / cosh(point[1] / RADIUS);\n      }\n    });\n\n  }\n\n}\n\n\n/**\n * Projections equal to EPSG:3857.\n *\n * @const\n * @type {Array<import(\"./Projection.js\").default>}\n */\nexport const PROJECTIONS = [\n  new EPSG3857Projection('EPSG:3857'),\n  new EPSG3857Projection('EPSG:102100'),\n  new EPSG3857Projection('EPSG:102113'),\n  new EPSG3857Projection('EPSG:900913'),\n  new EPSG3857Projection('urn:ogc:def:crs:EPSG:6.18:3:3857'),\n  new EPSG3857Projection('urn:ogc:def:crs:EPSG::3857'),\n  new EPSG3857Projection('http://www.opengis.net/gml/srs/epsg.xml#3857')\n];\n\n\n/**\n * Transformation from EPSG:4326 to EPSG:3857.\n *\n * @param {Array<number>} input Input array of coordinate values.\n * @param {Array<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension (default is `2`).\n * @return {Array<number>} Output array of coordinate values.\n */\nexport function fromEPSG4326(input, opt_output, opt_dimension) {\n  const length = input.length;\n  const dimension = opt_dimension > 1 ? opt_dimension : 2;\n  let output = opt_output;\n  if (output === undefined) {\n    if (dimension > 2) {\n      // preserve values beyond second dimension\n      output = input.slice();\n    } else {\n      output = new Array(length);\n    }\n  }\n  const halfSize = HALF_SIZE;\n  for (let i = 0; i < length; i += dimension) {\n    output[i] = halfSize * input[i] / 180;\n    let y = RADIUS *\n        Math.log(Math.tan(Math.PI * (input[i + 1] + 90) / 360));\n    if (y > halfSize) {\n      y = halfSize;\n    } else if (y < -halfSize) {\n      y = -halfSize;\n    }\n    output[i + 1] = y;\n  }\n  return output;\n}\n\n\n/**\n * Transformation from EPSG:3857 to EPSG:4326.\n *\n * @param {Array<number>} input Input array of coordinate values.\n * @param {Array<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension (default is `2`).\n * @return {Array<number>} Output array of coordinate values.\n */\nexport function toEPSG4326(input, opt_output, opt_dimension) {\n  const length = input.length;\n  const dimension = opt_dimension > 1 ? opt_dimension : 2;\n  let output = opt_output;\n  if (output === undefined) {\n    if (dimension > 2) {\n      // preserve values beyond second dimension\n      output = input.slice();\n    } else {\n      output = new Array(length);\n    }\n  }\n  for (let i = 0; i < length; i += dimension) {\n    output[i] = 180 * input[i] / HALF_SIZE;\n    output[i + 1] = 360 * Math.atan(\n      Math.exp(input[i + 1] / RADIUS)) / Math.PI - 90;\n  }\n  return output;\n}\n","/**\n * @module ol/proj/epsg4326\n */\nimport Projection from './Projection.js';\nimport Units from './Units.js';\n\n\n/**\n * Semi-major radius of the WGS84 ellipsoid.\n *\n * @const\n * @type {number}\n */\nexport const RADIUS = 6378137;\n\n\n/**\n * Extent of the EPSG:4326 projection which is the whole world.\n *\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport const EXTENT = [-180, -90, 180, 90];\n\n\n/**\n * @const\n * @type {number}\n */\nexport const METERS_PER_UNIT = Math.PI * RADIUS / 180;\n\n\n/**\n * @classdesc\n * Projection object for WGS84 geographic coordinates (EPSG:4326).\n *\n * Note that OpenLayers does not strictly comply with the EPSG definition.\n * The EPSG registry defines 4326 as a CRS for Latitude,Longitude (y,x).\n * OpenLayers treats EPSG:4326 as a pseudo-projection, with x,y coordinates.\n */\nclass EPSG4326Projection extends Projection {\n\n  /**\n   * @param {string} code Code.\n   * @param {string=} opt_axisOrientation Axis orientation.\n   */\n  constructor(code, opt_axisOrientation) {\n    super({\n      code: code,\n      units: Units.DEGREES,\n      extent: EXTENT,\n      axisOrientation: opt_axisOrientation,\n      global: true,\n      metersPerUnit: METERS_PER_UNIT,\n      worldExtent: EXTENT\n    });\n\n  }\n\n}\n\n\n/**\n * Projections equal to EPSG:4326.\n *\n * @const\n * @type {Array<import(\"./Projection.js\").default>}\n */\nexport const PROJECTIONS = [\n  new EPSG4326Projection('CRS:84'),\n  new EPSG4326Projection('EPSG:4326', 'neu'),\n  new EPSG4326Projection('urn:ogc:def:crs:EPSG::4326', 'neu'),\n  new EPSG4326Projection('urn:ogc:def:crs:EPSG:6.6:4326', 'neu'),\n  new EPSG4326Projection('urn:ogc:def:crs:OGC:1.3:CRS84'),\n  new EPSG4326Projection('urn:ogc:def:crs:OGC:2:84'),\n  new EPSG4326Projection('http://www.opengis.net/gml/srs/epsg.xml#4326', 'neu'),\n  new EPSG4326Projection('urn:x-ogc:def:crs:EPSG:4326', 'neu')\n];\n","/**\n * @module ol/proj/projections\n */\n\n\n/**\n * @type {Object<string, import(\"./Projection.js\").default>}\n */\nlet cache = {};\n\n\n/**\n * Clear the projections cache.\n */\nexport function clear() {\n  cache = {};\n}\n\n\n/**\n * Get a cached projection by code.\n * @param {string} code The code for the projection.\n * @return {import(\"./Projection.js\").default} The projection (if cached).\n */\nexport function get(code) {\n  return cache[code] || null;\n}\n\n\n/**\n * Add a projection to the cache.\n * @param {string} code The projection code.\n * @param {import(\"./Projection.js\").default} projection The projection to cache.\n */\nexport function add(code, projection) {\n  cache[code] = projection;\n}\n","/**\n * @module ol/proj\n */\n\n/**\n * The ol/proj module stores:\n * * a list of {@link module:ol/proj/Projection}\n * objects, one for each projection supported by the application\n * * a list of transform functions needed to convert coordinates in one projection\n * into another.\n *\n * The static functions are the methods used to maintain these.\n * Each transform function can handle not only simple coordinate pairs, but also\n * large arrays of coordinates such as vector geometries.\n *\n * When loaded, the library adds projection objects for EPSG:4326 (WGS84\n * geographic coordinates) and EPSG:3857 (Web or Spherical Mercator, as used\n * for example by Bing Maps or OpenStreetMap), together with the relevant\n * transform functions.\n *\n * Additional transforms may be added by using the http://proj4js.org/\n * library (version 2.2 or later). You can use the full build supplied by\n * Proj4js, or create a custom build to support those projections you need; see\n * the Proj4js website for how to do this. You also need the Proj4js definitions\n * for the required projections. These definitions can be obtained from\n * https://epsg.io/, and are a JS function, so can be loaded in a script\n * tag (as in the examples) or pasted into your application.\n *\n * After all required projection definitions are added to proj4's registry (by\n * using `proj4.defs()`), simply call `register(proj4)` from the `ol/proj/proj4`\n * package. Existing transforms are not changed by this function. See\n * examples/wms-image-custom-proj for an example of this.\n *\n * Additional projection definitions can be registered with `proj4.defs()` any\n * time. Just make sure to call `register(proj4)` again; for example, with user-supplied data where you don't\n * know in advance what projections are needed, you can initially load minimal\n * support and then load whichever are requested.\n *\n * Note that Proj4js does not support projection extents. If you want to add\n * one for creating default tile grids, you can add it after the Projection\n * object has been created with `setExtent`, for example,\n * `get('EPSG:1234').setExtent(extent)`.\n *\n * In addition to Proj4js support, any transform functions can be added with\n * {@link module:ol/proj~addCoordinateTransforms}. To use this, you must first create\n * a {@link module:ol/proj/Projection} object for the new projection and add it with\n * {@link module:ol/proj~addProjection}. You can then add the forward and inverse\n * functions with {@link module:ol/proj~addCoordinateTransforms}. See\n * examples/wms-custom-proj for an example of this.\n *\n * Note that if no transforms are needed and you only need to define the\n * projection, just add a {@link module:ol/proj/Projection} with\n * {@link module:ol/proj~addProjection}. See examples/wms-no-proj for an example of\n * this.\n */\nimport {getDistance} from './sphere.js';\nimport {applyTransform} from './extent.js';\nimport {modulo} from './math.js';\nimport {toEPSG4326, fromEPSG4326, PROJECTIONS as EPSG3857_PROJECTIONS} from './proj/epsg3857.js';\nimport {PROJECTIONS as EPSG4326_PROJECTIONS} from './proj/epsg4326.js';\nimport Projection from './proj/Projection.js';\nimport Units, {METERS_PER_UNIT} from './proj/Units.js';\nimport * as projections from './proj/projections.js';\nimport {add as addTransformFunc, clear as clearTransformFuncs, get as getTransformFunc} from './proj/transforms.js';\n\n\n/**\n * A projection as {@link module:ol/proj/Projection}, SRS identifier\n * string or undefined.\n * @typedef {Projection|string|undefined} ProjectionLike\n * @api\n */\n\n\n/**\n * A transform function accepts an array of input coordinate values, an optional\n * output array, and an optional dimension (default should be 2).  The function\n * transforms the input coordinate values, populates the output array, and\n * returns the output array.\n *\n * @typedef {function(Array<number>, Array<number>=, number=): Array<number>} TransformFunction\n * @api\n */\n\n\nexport {METERS_PER_UNIT};\n\nexport {Projection};\n\n/**\n * @param {Array<number>} input Input coordinate array.\n * @param {Array<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension.\n * @return {Array<number>} Output coordinate array (new array, same coordinate\n *     values).\n */\nexport function cloneTransform(input, opt_output, opt_dimension) {\n  let output;\n  if (opt_output !== undefined) {\n    for (let i = 0, ii = input.length; i < ii; ++i) {\n      opt_output[i] = input[i];\n    }\n    output = opt_output;\n  } else {\n    output = input.slice();\n  }\n  return output;\n}\n\n\n/**\n * @param {Array<number>} input Input coordinate array.\n * @param {Array<number>=} opt_output Output array of coordinate values.\n * @param {number=} opt_dimension Dimension.\n * @return {Array<number>} Input coordinate array (same array as input).\n */\nexport function identityTransform(input, opt_output, opt_dimension) {\n  if (opt_output !== undefined && input !== opt_output) {\n    for (let i = 0, ii = input.length; i < ii; ++i) {\n      opt_output[i] = input[i];\n    }\n    input = opt_output;\n  }\n  return input;\n}\n\n\n/**\n * Add a Projection object to the list of supported projections that can be\n * looked up by their code.\n *\n * @param {Projection} projection Projection instance.\n * @api\n */\nexport function addProjection(projection) {\n  projections.add(projection.getCode(), projection);\n  addTransformFunc(projection, projection, cloneTransform);\n}\n\n\n/**\n * @param {Array<Projection>} projections Projections.\n */\nexport function addProjections(projections) {\n  projections.forEach(addProjection);\n}\n\n\n/**\n * Fetches a Projection object for the code specified.\n *\n * @param {ProjectionLike} projectionLike Either a code string which is\n *     a combination of authority and identifier such as \"EPSG:4326\", or an\n *     existing projection object, or undefined.\n * @return {Projection} Projection object, or null if not in list.\n * @api\n */\nexport function get(projectionLike) {\n  return typeof projectionLike === 'string' ?\n    projections.get(/** @type {string} */ (projectionLike)) :\n    (/** @type {Projection} */ (projectionLike) || null);\n}\n\n\n/**\n * Get the resolution of the point in degrees or distance units.\n * For projections with degrees as the unit this will simply return the\n * provided resolution. For other projections the point resolution is\n * by default estimated by transforming the 'point' pixel to EPSG:4326,\n * measuring its width and height on the normal sphere,\n * and taking the average of the width and height.\n * A custom function can be provided for a specific projection, either\n * by setting the `getPointResolution` option in the\n * {@link module:ol/proj/Projection~Projection} constructor or by using\n * {@link module:ol/proj/Projection~Projection#setGetPointResolution} to change an existing\n * projection object.\n * @param {ProjectionLike} projection The projection.\n * @param {number} resolution Nominal resolution in projection units.\n * @param {import(\"./coordinate.js\").Coordinate} point Point to find adjusted resolution at.\n * @param {Units=} opt_units Units to get the point resolution in.\n * Default is the projection's units.\n * @return {number} Point resolution.\n * @api\n */\nexport function getPointResolution(projection, resolution, point, opt_units) {\n  projection = get(projection);\n  let pointResolution;\n  const getter = projection.getPointResolutionFunc();\n  if (getter) {\n    pointResolution = getter(resolution, point);\n  } else {\n    const units = projection.getUnits();\n    if (units == Units.DEGREES && !opt_units || opt_units == Units.DEGREES) {\n      pointResolution = resolution;\n    } else {\n      // Estimate point resolution by transforming the center pixel to EPSG:4326,\n      // measuring its width and height on the normal sphere, and taking the\n      // average of the width and height.\n      const toEPSG4326 = getTransformFromProjections(projection, get('EPSG:4326'));\n      let vertices = [\n        point[0] - resolution / 2, point[1],\n        point[0] + resolution / 2, point[1],\n        point[0], point[1] - resolution / 2,\n        point[0], point[1] + resolution / 2\n      ];\n      vertices = toEPSG4326(vertices, vertices, 2);\n      const width = getDistance(vertices.slice(0, 2), vertices.slice(2, 4));\n      const height = getDistance(vertices.slice(4, 6), vertices.slice(6, 8));\n      pointResolution = (width + height) / 2;\n      const metersPerUnit = opt_units ?\n        METERS_PER_UNIT[opt_units] :\n        projection.getMetersPerUnit();\n      if (metersPerUnit !== undefined) {\n        pointResolution /= metersPerUnit;\n      }\n    }\n  }\n  return pointResolution;\n}\n\n\n/**\n * Registers transformation functions that don't alter coordinates. Those allow\n * to transform between projections with equal meaning.\n *\n * @param {Array<Projection>} projections Projections.\n * @api\n */\nexport function addEquivalentProjections(projections) {\n  addProjections(projections);\n  projections.forEach(function(source) {\n    projections.forEach(function(destination) {\n      if (source !== destination) {\n        addTransformFunc(source, destination, cloneTransform);\n      }\n    });\n  });\n}\n\n\n/**\n * Registers transformation functions to convert coordinates in any projection\n * in projection1 to any projection in projection2.\n *\n * @param {Array<Projection>} projections1 Projections with equal\n *     meaning.\n * @param {Array<Projection>} projections2 Projections with equal\n *     meaning.\n * @param {TransformFunction} forwardTransform Transformation from any\n *   projection in projection1 to any projection in projection2.\n * @param {TransformFunction} inverseTransform Transform from any projection\n *   in projection2 to any projection in projection1..\n */\nexport function addEquivalentTransforms(projections1, projections2, forwardTransform, inverseTransform) {\n  projections1.forEach(function(projection1) {\n    projections2.forEach(function(projection2) {\n      addTransformFunc(projection1, projection2, forwardTransform);\n      addTransformFunc(projection2, projection1, inverseTransform);\n    });\n  });\n}\n\n\n/**\n * Clear all cached projections and transforms.\n */\nexport function clearAllProjections() {\n  projections.clear();\n  clearTransformFuncs();\n}\n\n\n/**\n * @param {Projection|string|undefined} projection Projection.\n * @param {string} defaultCode Default code.\n * @return {Projection} Projection.\n */\nexport function createProjection(projection, defaultCode) {\n  if (!projection) {\n    return get(defaultCode);\n  } else if (typeof projection === 'string') {\n    return get(projection);\n  } else {\n    return (\n      /** @type {Projection} */ (projection)\n    );\n  }\n}\n\n\n/**\n * Creates a {@link module:ol/proj~TransformFunction} from a simple 2D coordinate transform\n * function.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} coordTransform Coordinate\n *     transform.\n * @return {TransformFunction} Transform function.\n */\nexport function createTransformFromCoordinateTransform(coordTransform) {\n  return (\n    /**\n     * @param {Array<number>} input Input.\n     * @param {Array<number>=} opt_output Output.\n     * @param {number=} opt_dimension Dimension.\n     * @return {Array<number>} Output.\n     */\n    function(input, opt_output, opt_dimension) {\n      const length = input.length;\n      const dimension = opt_dimension !== undefined ? opt_dimension : 2;\n      const output = opt_output !== undefined ? opt_output : new Array(length);\n      for (let i = 0; i < length; i += dimension) {\n        const point = coordTransform([input[i], input[i + 1]]);\n        output[i] = point[0];\n        output[i + 1] = point[1];\n        for (let j = dimension - 1; j >= 2; --j) {\n          output[i + j] = input[i + j];\n        }\n      }\n      return output;\n    });\n}\n\n\n/**\n * Registers coordinate transform functions to convert coordinates between the\n * source projection and the destination projection.\n * The forward and inverse functions convert coordinate pairs; this function\n * converts these into the functions used internally which also handle\n * extents and coordinate arrays.\n *\n * @param {ProjectionLike} source Source projection.\n * @param {ProjectionLike} destination Destination projection.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} forward The forward transform\n *     function (that is, from the source projection to the destination\n *     projection) that takes a {@link module:ol/coordinate~Coordinate} as argument and returns\n *     the transformed {@link module:ol/coordinate~Coordinate}.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} inverse The inverse transform\n *     function (that is, from the destination projection to the source\n *     projection) that takes a {@link module:ol/coordinate~Coordinate} as argument and returns\n *     the transformed {@link module:ol/coordinate~Coordinate}.\n * @api\n */\nexport function addCoordinateTransforms(source, destination, forward, inverse) {\n  const sourceProj = get(source);\n  const destProj = get(destination);\n  addTransformFunc(sourceProj, destProj, createTransformFromCoordinateTransform(forward));\n  addTransformFunc(destProj, sourceProj, createTransformFromCoordinateTransform(inverse));\n}\n\n\n/**\n * Transforms a coordinate from longitude/latitude to a different projection.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate as longitude and latitude, i.e.\n *     an array with longitude as 1st and latitude as 2nd element.\n * @param {ProjectionLike=} opt_projection Target projection. The\n *     default is Web Mercator, i.e. 'EPSG:3857'.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate projected to the target projection.\n * @api\n */\nexport function fromLonLat(coordinate, opt_projection) {\n  return transform(coordinate, 'EPSG:4326',\n    opt_projection !== undefined ? opt_projection : 'EPSG:3857');\n}\n\n\n/**\n * Transforms a coordinate to longitude/latitude.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Projected coordinate.\n * @param {ProjectionLike=} opt_projection Projection of the coordinate.\n *     The default is Web Mercator, i.e. 'EPSG:3857'.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate as longitude and latitude, i.e. an array\n *     with longitude as 1st and latitude as 2nd element.\n * @api\n */\nexport function toLonLat(coordinate, opt_projection) {\n  const lonLat = transform(coordinate,\n    opt_projection !== undefined ? opt_projection : 'EPSG:3857', 'EPSG:4326');\n  const lon = lonLat[0];\n  if (lon < -180 || lon > 180) {\n    lonLat[0] = modulo(lon + 180, 360) - 180;\n  }\n  return lonLat;\n}\n\n\n/**\n * Checks if two projections are the same, that is every coordinate in one\n * projection does represent the same geographic point as the same coordinate in\n * the other projection.\n *\n * @param {Projection} projection1 Projection 1.\n * @param {Projection} projection2 Projection 2.\n * @return {boolean} Equivalent.\n * @api\n */\nexport function equivalent(projection1, projection2) {\n  if (projection1 === projection2) {\n    return true;\n  }\n  const equalUnits = projection1.getUnits() === projection2.getUnits();\n  if (projection1.getCode() === projection2.getCode()) {\n    return equalUnits;\n  } else {\n    const transformFunc = getTransformFromProjections(projection1, projection2);\n    return transformFunc === cloneTransform && equalUnits;\n  }\n}\n\n\n/**\n * Searches in the list of transform functions for the function for converting\n * coordinates from the source projection to the destination projection.\n *\n * @param {Projection} sourceProjection Source Projection object.\n * @param {Projection} destinationProjection Destination Projection\n *     object.\n * @return {TransformFunction} Transform function.\n */\nexport function getTransformFromProjections(sourceProjection, destinationProjection) {\n  const sourceCode = sourceProjection.getCode();\n  const destinationCode = destinationProjection.getCode();\n  let transformFunc = getTransformFunc(sourceCode, destinationCode);\n  if (!transformFunc) {\n    transformFunc = identityTransform;\n  }\n  return transformFunc;\n}\n\n\n/**\n * Given the projection-like objects, searches for a transformation\n * function to convert a coordinates array from the source projection to the\n * destination projection.\n *\n * @param {ProjectionLike} source Source.\n * @param {ProjectionLike} destination Destination.\n * @return {TransformFunction} Transform function.\n * @api\n */\nexport function getTransform(source, destination) {\n  const sourceProjection = get(source);\n  const destinationProjection = get(destination);\n  return getTransformFromProjections(sourceProjection, destinationProjection);\n}\n\n\n/**\n * Transforms a coordinate from source projection to destination projection.\n * This returns a new coordinate (and does not modify the original).\n *\n * See {@link module:ol/proj~transformExtent} for extent transformation.\n * See the transform method of {@link module:ol/geom/Geometry~Geometry} and its\n * subclasses for geometry transforms.\n *\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {ProjectionLike} source Source projection-like.\n * @param {ProjectionLike} destination Destination projection-like.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate.\n * @api\n */\nexport function transform(coordinate, source, destination) {\n  const transformFunc = getTransform(source, destination);\n  return transformFunc(coordinate, undefined, coordinate.length);\n}\n\n\n/**\n * Transforms an extent from source projection to destination projection.  This\n * returns a new extent (and does not modify the original).\n *\n * @param {import(\"./extent.js\").Extent} extent The extent to transform.\n * @param {ProjectionLike} source Source projection-like.\n * @param {ProjectionLike} destination Destination projection-like.\n * @return {import(\"./extent.js\").Extent} The transformed extent.\n * @api\n */\nexport function transformExtent(extent, source, destination) {\n  const transformFunc = getTransform(source, destination);\n  return applyTransform(extent, transformFunc);\n}\n\n\n/**\n * Transforms the given point to the destination projection.\n *\n * @param {import(\"./coordinate.js\").Coordinate} point Point.\n * @param {Projection} sourceProjection Source projection.\n * @param {Projection} destinationProjection Destination projection.\n * @return {import(\"./coordinate.js\").Coordinate} Point.\n */\nexport function transformWithProjections(point, sourceProjection, destinationProjection) {\n  const transformFunc = getTransformFromProjections(sourceProjection, destinationProjection);\n  return transformFunc(point);\n}\n\n/**\n * Add transforms to and from EPSG:4326 and EPSG:3857.  This function is called\n * by when this module is executed and should only need to be called again after\n * `clearAllProjections()` is called (e.g. in tests).\n */\nexport function addCommon() {\n  // Add transformations that don't alter coordinates to convert within set of\n  // projections with equal meaning.\n  addEquivalentProjections(EPSG3857_PROJECTIONS);\n  addEquivalentProjections(EPSG4326_PROJECTIONS);\n  // Add transformations to convert EPSG:4326 like coordinates to EPSG:3857 like\n  // coordinates and back.\n  addEquivalentTransforms(EPSG4326_PROJECTIONS, EPSG3857_PROJECTIONS, fromEPSG4326, toEPSG4326);\n}\n\naddCommon();\n","/**\n * @module ol/events/EventType\n */\n\n/**\n * @enum {string}\n * @const\n */\nexport default {\n  /**\n   * Generic change event. Triggered when the revision counter is increased.\n   * @event module:ol/events/Event~Event#change\n   * @api\n   */\n  CHANGE: 'change',\n\n  CLEAR: 'clear',\n  CONTEXTMENU: 'contextmenu',\n  CLICK: 'click',\n  DBLCLICK: 'dblclick',\n  DRAGENTER: 'dragenter',\n  DRAGOVER: 'dragover',\n  DROP: 'drop',\n  ERROR: 'error',\n  KEYDOWN: 'keydown',\n  KEYPRESS: 'keypress',\n  LOAD: 'load',\n  MOUSEDOWN: 'mousedown',\n  MOUSEMOVE: 'mousemove',\n  MOUSEOUT: 'mouseout',\n  MOUSEUP: 'mouseup',\n  MOUSEWHEEL: 'mousewheel',\n  MSPOINTERDOWN: 'MSPointerDown',\n  RESIZE: 'resize',\n  TOUCHSTART: 'touchstart',\n  TOUCHMOVE: 'touchmove',\n  TOUCHEND: 'touchend',\n  WHEEL: 'wheel'\n};\n","/**\n * @module ol/render/canvas\n */\nimport {getFontFamilies} from '../css.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport {clear} from '../obj.js';\nimport LRUCache from '../structs/LRUCache.js';\nimport {create as createTransform} from '../transform.js';\n\n\n/**\n * @typedef {Object} FillState\n * @property {import(\"../colorlike.js\").ColorLike} fillStyle\n */\n\n\n/**\n * @typedef {Object} FillStrokeState\n * @property {import(\"../colorlike.js\").ColorLike} [currentFillStyle]\n * @property {import(\"../colorlike.js\").ColorLike} [currentStrokeStyle]\n * @property {string} [currentLineCap]\n * @property {Array<number>} currentLineDash\n * @property {number} [currentLineDashOffset]\n * @property {string} [currentLineJoin]\n * @property {number} [currentLineWidth]\n * @property {number} [currentMiterLimit]\n * @property {number} [lastStroke]\n * @property {import(\"../colorlike.js\").ColorLike} [fillStyle]\n * @property {import(\"../colorlike.js\").ColorLike} [strokeStyle]\n * @property {string} [lineCap]\n * @property {Array<number>} lineDash\n * @property {number} [lineDashOffset]\n * @property {string} [lineJoin]\n * @property {number} [lineWidth]\n * @property {number} [miterLimit]\n */\n\n\n/**\n * @typedef {Object} StrokeState\n * @property {string} lineCap\n * @property {Array<number>} lineDash\n * @property {number} lineDashOffset\n * @property {string} lineJoin\n * @property {number} lineWidth\n * @property {number} miterLimit\n * @property {import(\"../colorlike.js\").ColorLike} strokeStyle\n */\n\n\n/**\n * @typedef {Object} TextState\n * @property {string} font\n * @property {string} [textAlign]\n * @property {string} textBaseline\n * @property {string} [placement]\n * @property {number} [maxAngle]\n * @property {boolean} [overflow]\n * @property {import(\"../style/Fill.js\").default} [backgroundFill]\n * @property {import(\"../style/Stroke.js\").default} [backgroundStroke]\n * @property {number} [scale]\n * @property {Array<number>} [padding]\n */\n\n\n/**\n * Container for decluttered replay instructions that need to be rendered or\n * omitted together, i.e. when styles render both an image and text, or for the\n * characters that form text along lines. The basic elements of this array are\n * `[minX, minY, maxX, maxY, count]`, where the first four entries are the\n * rendered extent of the group in pixel space. `count` is the number of styles\n * in the group, i.e. 2 when an image and a text are grouped, or 1 otherwise.\n * In addition to these four elements, declutter instruction arrays (i.e. the\n * arguments to {@link module:ol/render/canvas~drawImage} are appended to the array.\n * @typedef {Array<*>} DeclutterGroup\n */\n\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultFont = '10px sans-serif';\n\n\n/**\n * @const\n * @type {import(\"../color.js\").Color}\n */\nexport const defaultFillStyle = [0, 0, 0, 1];\n\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultLineCap = 'round';\n\n\n/**\n * @const\n * @type {Array<number>}\n */\nexport const defaultLineDash = [];\n\n\n/**\n * @const\n * @type {number}\n */\nexport const defaultLineDashOffset = 0;\n\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultLineJoin = 'round';\n\n\n/**\n * @const\n * @type {number}\n */\nexport const defaultMiterLimit = 10;\n\n\n/**\n * @const\n * @type {import(\"../color.js\").Color}\n */\nexport const defaultStrokeStyle = [0, 0, 0, 1];\n\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultTextAlign = 'center';\n\n\n/**\n * @const\n * @type {string}\n */\nexport const defaultTextBaseline = 'middle';\n\n\n/**\n * @const\n * @type {Array<number>}\n */\nexport const defaultPadding = [0, 0, 0, 0];\n\n\n/**\n * @const\n * @type {number}\n */\nexport const defaultLineWidth = 1;\n\n\n/**\n * The label cache for text rendering. To change the default cache size of 2048\n * entries, use {@link module:ol/structs/LRUCache#setSize}.\n * @type {LRUCache<HTMLCanvasElement>}\n * @api\n */\nexport const labelCache = new LRUCache();\n\n\n/**\n * @type {!Object<string, number>}\n */\nexport const checkedFonts = {};\n\n\n/**\n * @type {CanvasRenderingContext2D}\n */\nlet measureContext = null;\n\n\n/**\n * @type {!Object<string, number>}\n */\nexport const textHeights = {};\n\n\n/**\n * Clears the label cache when a font becomes available.\n * @param {string} fontSpec CSS font spec.\n */\nexport const checkFont = (function() {\n  const retries = 60;\n  const checked = checkedFonts;\n  const size = '32px ';\n  const referenceFonts = ['monospace', 'serif'];\n  const len = referenceFonts.length;\n  const text = 'wmytzilWMYTZIL@#/&?$%10\\uF013';\n  let interval, referenceWidth;\n\n  function isAvailable(font) {\n    const context = getMeasureContext();\n    // Check weight ranges according to\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/font-weight#Fallback_weights\n    for (let weight = 100; weight <= 700; weight += 300) {\n      const fontWeight = weight + ' ';\n      let available = true;\n      for (let i = 0; i < len; ++i) {\n        const referenceFont = referenceFonts[i];\n        context.font = fontWeight + size + referenceFont;\n        referenceWidth = context.measureText(text).width;\n        if (font != referenceFont) {\n          context.font = fontWeight + size + font + ',' + referenceFont;\n          const width = context.measureText(text).width;\n          // If width and referenceWidth are the same, then the fallback was used\n          // instead of the font we wanted, so the font is not available.\n          available = available && width != referenceWidth;\n        }\n      }\n      if (available) {\n        // Consider font available when it is available in one weight range.\n        //FIXME With this we miss rare corner cases, so we should consider\n        //FIXME checking availability for each requested weight range.\n        return true;\n      }\n    }\n    return false;\n  }\n\n  function check() {\n    let done = true;\n    for (const font in checked) {\n      if (checked[font] < retries) {\n        if (isAvailable(font)) {\n          checked[font] = retries;\n          clear(textHeights);\n          // Make sure that loaded fonts are picked up by Safari\n          measureContext = null;\n          labelCache.clear();\n        } else {\n          ++checked[font];\n          done = false;\n        }\n      }\n    }\n    if (done) {\n      clearInterval(interval);\n      interval = undefined;\n    }\n  }\n\n  return function(fontSpec) {\n    const fontFamilies = getFontFamilies(fontSpec);\n    if (!fontFamilies) {\n      return;\n    }\n    for (let i = 0, ii = fontFamilies.length; i < ii; ++i) {\n      const fontFamily = fontFamilies[i];\n      if (!(fontFamily in checked)) {\n        checked[fontFamily] = retries;\n        if (!isAvailable(fontFamily)) {\n          checked[fontFamily] = 0;\n          if (interval === undefined) {\n            interval = setInterval(check, 32);\n          }\n        }\n      }\n    }\n  };\n})();\n\n\n/**\n * @return {CanvasRenderingContext2D} Measure context.\n */\nfunction getMeasureContext() {\n  if (!measureContext) {\n    measureContext = createCanvasContext2D(1, 1);\n  }\n  return measureContext;\n}\n\n\n/**\n * @param {string} font Font to use for measuring.\n * @return {import(\"../size.js\").Size} Measurement.\n */\nexport const measureTextHeight = (function() {\n  let span;\n  const heights = textHeights;\n  return function(font) {\n    let height = heights[font];\n    if (height == undefined) {\n      if (!span) {\n        span = document.createElement('span');\n        span.textContent = 'M';\n        span.style.margin = span.style.padding = '0 !important';\n        span.style.position = 'absolute !important';\n        span.style.left = '-99999px !important';\n      }\n      span.style.font = font;\n      document.body.appendChild(span);\n      height = heights[font] = span.offsetHeight;\n      document.body.removeChild(span);\n    }\n    return height;\n  };\n})();\n\n\n/**\n * @param {string} font Font.\n * @param {string} text Text.\n * @return {number} Width.\n */\nexport function measureTextWidth(font, text) {\n  const measureContext = getMeasureContext();\n  if (font != measureContext.font) {\n    measureContext.font = font;\n  }\n  return measureContext.measureText(text).width;\n}\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {number} rotation Rotation.\n * @param {number} offsetX X offset.\n * @param {number} offsetY Y offset.\n */\nexport function rotateAtOffset(context, rotation, offsetX, offsetY) {\n  if (rotation !== 0) {\n    context.translate(offsetX, offsetY);\n    context.rotate(rotation);\n    context.translate(-offsetX, -offsetY);\n  }\n}\n\n\nexport const resetTransform = createTransform();\n\n\n/**\n * @param {CanvasRenderingContext2D} context Context.\n * @param {import(\"../transform.js\").Transform|null} transform Transform.\n * @param {number} opacity Opacity.\n * @param {HTMLImageElement|HTMLCanvasElement|HTMLVideoElement} image Image.\n * @param {number} originX Origin X.\n * @param {number} originY Origin Y.\n * @param {number} w Width.\n * @param {number} h Height.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} scale Scale.\n */\nexport function drawImage(context,\n  transform, opacity, image, originX, originY, w, h, x, y, scale) {\n  let alpha;\n  if (opacity != 1) {\n    alpha = context.globalAlpha;\n    context.globalAlpha = alpha * opacity;\n  }\n  if (transform) {\n    context.setTransform.apply(context, transform);\n  }\n\n  context.drawImage(image, originX, originY, w, h, x, y, w * scale, h * scale);\n\n  if (alpha) {\n    context.globalAlpha = alpha;\n  }\n  if (transform) {\n    context.setTransform.apply(context, resetTransform);\n  }\n}\n","/**\n * @module ol/math\n */\nimport {assert} from './asserts.js';\n\n/**\n * Takes a number and clamps it to within the provided bounds.\n * @param {number} value The input number.\n * @param {number} min The minimum value to return.\n * @param {number} max The maximum value to return.\n * @return {number} The input number if it is within bounds, or the nearest\n *     number within the bounds.\n */\nexport function clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n\n\n/**\n * Return the hyperbolic cosine of a given number. The method will use the\n * native `Math.cosh` function if it is available, otherwise the hyperbolic\n * cosine will be calculated via the reference implementation of the Mozilla\n * developer network.\n *\n * @param {number} x X.\n * @return {number} Hyperbolic cosine of x.\n */\nexport const cosh = (function() {\n  // Wrapped in a iife, to save the overhead of checking for the native\n  // implementation on every invocation.\n  let cosh;\n  if ('cosh' in Math) {\n    // The environment supports the native Math.cosh function, use it\n    cosh = Math.cosh;\n  } else {\n    //  else, use the reference implementation of MDN:\n    cosh = function(x) {\n      const y = /** @type {Math} */ (Math).exp(x);\n      return (y + 1 / y) / 2;\n    };\n  }\n  return cosh;\n}());\n\n\n/**\n * @param {number} x X.\n * @return {number} The smallest power of two greater than or equal to x.\n */\nexport function roundUpToPowerOfTwo(x) {\n  assert(0 < x, 29); // `x` must be greater than `0`\n  return Math.pow(2, Math.ceil(Math.log(x) / Math.LN2));\n}\n\n\n/**\n * Returns the square of the closest distance between the point (x, y) and the\n * line segment (x1, y1) to (x2, y2).\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredSegmentDistance(x, y, x1, y1, x2, y2) {\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  if (dx !== 0 || dy !== 0) {\n    const t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n    if (t > 1) {\n      x1 = x2;\n      y1 = y2;\n    } else if (t > 0) {\n      x1 += dx * t;\n      y1 += dy * t;\n    }\n  }\n  return squaredDistance(x, y, x1, y1);\n}\n\n\n/**\n * Returns the square of the distance between the points (x1, y1) and (x2, y2).\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredDistance(x1, y1, x2, y2) {\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  return dx * dx + dy * dy;\n}\n\n\n/**\n * Solves system of linear equations using Gaussian elimination method.\n *\n * @param {Array<Array<number>>} mat Augmented matrix (n x n + 1 column)\n *                                     in row-major order.\n * @return {Array<number>} The resulting vector.\n */\nexport function solveLinearSystem(mat) {\n  const n = mat.length;\n\n  for (let i = 0; i < n; i++) {\n    // Find max in the i-th column (ignoring i - 1 first rows)\n    let maxRow = i;\n    let maxEl = Math.abs(mat[i][i]);\n    for (let r = i + 1; r < n; r++) {\n      const absValue = Math.abs(mat[r][i]);\n      if (absValue > maxEl) {\n        maxEl = absValue;\n        maxRow = r;\n      }\n    }\n\n    if (maxEl === 0) {\n      return null; // matrix is singular\n    }\n\n    // Swap max row with i-th (current) row\n    const tmp = mat[maxRow];\n    mat[maxRow] = mat[i];\n    mat[i] = tmp;\n\n    // Subtract the i-th row to make all the remaining rows 0 in the i-th column\n    for (let j = i + 1; j < n; j++) {\n      const coef = -mat[j][i] / mat[i][i];\n      for (let k = i; k < n + 1; k++) {\n        if (i == k) {\n          mat[j][k] = 0;\n        } else {\n          mat[j][k] += coef * mat[i][k];\n        }\n      }\n    }\n  }\n\n  // Solve Ax=b for upper triangular matrix A (mat)\n  const x = new Array(n);\n  for (let l = n - 1; l >= 0; l--) {\n    x[l] = mat[l][n] / mat[l][l];\n    for (let m = l - 1; m >= 0; m--) {\n      mat[m][n] -= mat[m][l] * x[l];\n    }\n  }\n  return x;\n}\n\n\n/**\n * Converts radians to to degrees.\n *\n * @param {number} angleInRadians Angle in radians.\n * @return {number} Angle in degrees.\n */\nexport function toDegrees(angleInRadians) {\n  return angleInRadians * 180 / Math.PI;\n}\n\n\n/**\n * Converts degrees to radians.\n *\n * @param {number} angleInDegrees Angle in degrees.\n * @return {number} Angle in radians.\n */\nexport function toRadians(angleInDegrees) {\n  return angleInDegrees * Math.PI / 180;\n}\n\n/**\n * Returns the modulo of a / b, depending on the sign of b.\n *\n * @param {number} a Dividend.\n * @param {number} b Divisor.\n * @return {number} Modulo.\n */\nexport function modulo(a, b) {\n  const r = a % b;\n  return r * b < 0 ? r + b : r;\n}\n\n/**\n * Calculates the linearly interpolated value of x between a and b.\n *\n * @param {number} a Number\n * @param {number} b Number\n * @param {number} x Value to be interpolated.\n * @return {number} Interpolated value.\n */\nexport function lerp(a, b, x) {\n  return a + x * (b - a);\n}\n","/**\n * @module ol/array\n */\n\n\n/**\n * Performs a binary search on the provided sorted list and returns the index of the item if found. If it can't be found it'll return -1.\n * https://github.com/darkskyapp/binary-search\n *\n * @param {Array<*>} haystack Items to search through.\n * @param {*} needle The item to look for.\n * @param {Function=} opt_comparator Comparator function.\n * @return {number} The index of the item if found, -1 if not.\n */\nexport function binarySearch(haystack, needle, opt_comparator) {\n  let mid, cmp;\n  const comparator = opt_comparator || numberSafeCompareFunction;\n  let low = 0;\n  let high = haystack.length;\n  let found = false;\n\n  while (low < high) {\n    /* Note that \"(low + high) >>> 1\" may overflow, and results in a typecast\n     * to double (which gives the wrong results). */\n    mid = low + (high - low >> 1);\n    cmp = +comparator(haystack[mid], needle);\n\n    if (cmp < 0.0) { /* Too low. */\n      low = mid + 1;\n\n    } else { /* Key found or too high */\n      high = mid;\n      found = !cmp;\n    }\n  }\n\n  /* Key not found. */\n  return found ? low : ~low;\n}\n\n\n/**\n * Compare function for array sort that is safe for numbers.\n * @param {*} a The first object to be compared.\n * @param {*} b The second object to be compared.\n * @return {number} A negative number, zero, or a positive number as the first\n *     argument is less than, equal to, or greater than the second.\n */\nexport function numberSafeCompareFunction(a, b) {\n  return a > b ? 1 : a < b ? -1 : 0;\n}\n\n\n/**\n * Whether the array contains the given object.\n * @param {Array<*>} arr The array to test for the presence of the element.\n * @param {*} obj The object for which to test.\n * @return {boolean} The object is in the array.\n */\nexport function includes(arr, obj) {\n  return arr.indexOf(obj) >= 0;\n}\n\n\n/**\n * @param {Array<number>} arr Array.\n * @param {number} target Target.\n * @param {number} direction 0 means return the nearest, > 0\n *    means return the largest nearest, < 0 means return the\n *    smallest nearest.\n * @return {number} Index.\n */\nexport function linearFindNearest(arr, target, direction) {\n  const n = arr.length;\n  if (arr[0] <= target) {\n    return 0;\n  } else if (target <= arr[n - 1]) {\n    return n - 1;\n  } else {\n    let i;\n    if (direction > 0) {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] < target) {\n          return i - 1;\n        }\n      }\n    } else if (direction < 0) {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] <= target) {\n          return i;\n        }\n      }\n    } else {\n      for (i = 1; i < n; ++i) {\n        if (arr[i] == target) {\n          return i;\n        } else if (arr[i] < target) {\n          if (arr[i - 1] - target < target - arr[i]) {\n            return i - 1;\n          } else {\n            return i;\n          }\n        }\n      }\n    }\n    return n - 1;\n  }\n}\n\n\n/**\n * @param {Array<*>} arr Array.\n * @param {number} begin Begin index.\n * @param {number} end End index.\n */\nexport function reverseSubArray(arr, begin, end) {\n  while (begin < end) {\n    const tmp = arr[begin];\n    arr[begin] = arr[end];\n    arr[end] = tmp;\n    ++begin;\n    --end;\n  }\n}\n\n\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {!Array<VALUE>|VALUE} data The elements or arrays of elements to add to arr.\n * @template VALUE\n */\nexport function extend(arr, data) {\n  const extension = Array.isArray(data) ? data : [data];\n  const length = extension.length;\n  for (let i = 0; i < length; i++) {\n    arr[arr.length] = extension[i];\n  }\n}\n\n\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {VALUE} obj The element to remove.\n * @template VALUE\n * @return {boolean} If the element was removed.\n */\nexport function remove(arr, obj) {\n  const i = arr.indexOf(obj);\n  const found = i > -1;\n  if (found) {\n    arr.splice(i, 1);\n  }\n  return found;\n}\n\n\n/**\n * @param {Array<VALUE>} arr The array to search in.\n * @param {function(VALUE, number, ?) : boolean} func The function to compare.\n * @template VALUE\n * @return {VALUE|null} The element found or null.\n */\nexport function find(arr, func) {\n  const length = arr.length >>> 0;\n  let value;\n\n  for (let i = 0; i < length; i++) {\n    value = arr[i];\n    if (func(value, i, arr)) {\n      return value;\n    }\n  }\n  return null;\n}\n\n\n/**\n * @param {Array|Uint8ClampedArray} arr1 The first array to compare.\n * @param {Array|Uint8ClampedArray} arr2 The second array to compare.\n * @return {boolean} Whether the two arrays are equal.\n */\nexport function equals(arr1, arr2) {\n  const len1 = arr1.length;\n  if (len1 !== arr2.length) {\n    return false;\n  }\n  for (let i = 0; i < len1; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n\n/**\n * Sort the passed array such that the relative order of equal elements is preverved.\n * See https://en.wikipedia.org/wiki/Sorting_algorithm#Stability for details.\n * @param {Array<*>} arr The array to sort (modifies original).\n * @param {!function(*, *): number} compareFnc Comparison function.\n * @api\n */\nexport function stableSort(arr, compareFnc) {\n  const length = arr.length;\n  const tmp = Array(arr.length);\n  let i;\n  for (i = 0; i < length; i++) {\n    tmp[i] = {index: i, value: arr[i]};\n  }\n  tmp.sort(function(a, b) {\n    return compareFnc(a.value, b.value) || a.index - b.index;\n  });\n  for (i = 0; i < arr.length; i++) {\n    arr[i] = tmp[i].value;\n  }\n}\n\n\n/**\n * @param {Array<*>} arr The array to search in.\n * @param {Function} func Comparison function.\n * @return {number} Return index.\n */\nexport function findIndex(arr, func) {\n  let index;\n  const found = !arr.every(function(el, idx) {\n    index = idx;\n    return !func(el, idx, arr);\n  });\n  return found ? index : -1;\n}\n\n\n/**\n * @param {Array<*>} arr The array to test.\n * @param {Function=} opt_func Comparison function.\n * @param {boolean=} opt_strict Strictly sorted (default false).\n * @return {boolean} Return index.\n */\nexport function isSorted(arr, opt_func, opt_strict) {\n  const compare = opt_func || numberSafeCompareFunction;\n  return arr.every(function(currentVal, index) {\n    if (index === 0) {\n      return true;\n    }\n    const res = compare(arr[index - 1], currentVal);\n    return !(res > 0 || opt_strict && res === 0);\n  });\n}\n","/**\n * @module ol/TileState\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  IDLE: 0,\n  LOADING: 1,\n  LOADED: 2,\n  /**\n   * Indicates that tile loading failed\n   * @type {number}\n   */\n  ERROR: 3,\n  EMPTY: 4,\n  ABORT: 5\n};\n","/**\n * @module ol/asserts\n */\nimport AssertionError from './AssertionError.js';\n\n/**\n * @param {*} assertion Assertion we expected to be truthy.\n * @param {number} errorCode Error code.\n */\nexport function assert(assertion, errorCode) {\n  if (!assertion) {\n    throw new AssertionError(errorCode);\n  }\n}\n","/**\n * @module ol/obj\n */\n\n\n/**\n * Polyfill for Object.assign().  Assigns enumerable and own properties from\n * one or more source objects to a target object.\n * See https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign.\n *\n * @param {!Object} target The target object.\n * @param {...Object} var_sources The source object(s).\n * @return {!Object} The modified target object.\n */\nexport const assign = (typeof Object.assign === 'function') ? Object.assign : function(target, var_sources) {\n  if (target === undefined || target === null) {\n    throw new TypeError('Cannot convert undefined or null to object');\n  }\n\n  const output = Object(target);\n  for (let i = 1, ii = arguments.length; i < ii; ++i) {\n    const source = arguments[i];\n    if (source !== undefined && source !== null) {\n      for (const key in source) {\n        if (source.hasOwnProperty(key)) {\n          output[key] = source[key];\n        }\n      }\n    }\n  }\n  return output;\n};\n\n\n/**\n * Removes all properties from an object.\n * @param {Object} object The object to clear.\n */\nexport function clear(object) {\n  for (const property in object) {\n    delete object[property];\n  }\n}\n\n\n/**\n * Get an array of property values from an object.\n * @param {Object<K,V>} object The object from which to get the values.\n * @return {!Array<V>} The property values.\n * @template K,V\n */\nexport function getValues(object) {\n  const values = [];\n  for (const property in object) {\n    values.push(object[property]);\n  }\n  return values;\n}\n\n\n/**\n * Determine if an object has any properties.\n * @param {Object} object The object to check.\n * @return {boolean} The object is empty.\n */\nexport function isEmpty(object) {\n  let property;\n  for (property in object) {\n    return false;\n  }\n  return !property;\n}\n","/**\n * @module ol/transform\n */\nimport {assert} from './asserts.js';\n\n\n/**\n * An array representing an affine 2d transformation for use with\n * {@link module:ol/transform} functions. The array has 6 elements.\n * @typedef {!Array<number>} Transform\n */\n\n\n/**\n * Collection of affine 2d transformation functions. The functions work on an\n * array of 6 elements. The element order is compatible with the [SVGMatrix\n * interface](https://developer.mozilla.org/en-US/docs/Web/API/SVGMatrix) and is\n * a subset (elements a to f) of a 33 matrix:\n * ```\n * [ a c e ]\n * [ b d f ]\n * [ 0 0 1 ]\n * ```\n */\n\n\n/**\n * @private\n * @type {Transform}\n */\nconst tmp_ = new Array(6);\n\n\n/**\n * Create an identity transform.\n * @return {!Transform} Identity transform.\n */\nexport function create() {\n  return [1, 0, 0, 1, 0, 0];\n}\n\n\n/**\n * Resets the given transform to an identity transform.\n * @param {!Transform} transform Transform.\n * @return {!Transform} Transform.\n */\nexport function reset(transform) {\n  return set(transform, 1, 0, 0, 1, 0, 0);\n}\n\n\n/**\n * Multiply the underlying matrices of two transforms and return the result in\n * the first transform.\n * @param {!Transform} transform1 Transform parameters of matrix 1.\n * @param {!Transform} transform2 Transform parameters of matrix 2.\n * @return {!Transform} transform1 multiplied with transform2.\n */\nexport function multiply(transform1, transform2) {\n  const a1 = transform1[0];\n  const b1 = transform1[1];\n  const c1 = transform1[2];\n  const d1 = transform1[3];\n  const e1 = transform1[4];\n  const f1 = transform1[5];\n  const a2 = transform2[0];\n  const b2 = transform2[1];\n  const c2 = transform2[2];\n  const d2 = transform2[3];\n  const e2 = transform2[4];\n  const f2 = transform2[5];\n\n  transform1[0] = a1 * a2 + c1 * b2;\n  transform1[1] = b1 * a2 + d1 * b2;\n  transform1[2] = a1 * c2 + c1 * d2;\n  transform1[3] = b1 * c2 + d1 * d2;\n  transform1[4] = a1 * e2 + c1 * f2 + e1;\n  transform1[5] = b1 * e2 + d1 * f2 + f1;\n\n  return transform1;\n}\n\n/**\n * Set the transform components a-f on a given transform.\n * @param {!Transform} transform Transform.\n * @param {number} a The a component of the transform.\n * @param {number} b The b component of the transform.\n * @param {number} c The c component of the transform.\n * @param {number} d The d component of the transform.\n * @param {number} e The e component of the transform.\n * @param {number} f The f component of the transform.\n * @return {!Transform} Matrix with transform applied.\n */\nexport function set(transform, a, b, c, d, e, f) {\n  transform[0] = a;\n  transform[1] = b;\n  transform[2] = c;\n  transform[3] = d;\n  transform[4] = e;\n  transform[5] = f;\n  return transform;\n}\n\n\n/**\n * Set transform on one matrix from another matrix.\n * @param {!Transform} transform1 Matrix to set transform to.\n * @param {!Transform} transform2 Matrix to set transform from.\n * @return {!Transform} transform1 with transform from transform2 applied.\n */\nexport function setFromArray(transform1, transform2) {\n  transform1[0] = transform2[0];\n  transform1[1] = transform2[1];\n  transform1[2] = transform2[2];\n  transform1[3] = transform2[3];\n  transform1[4] = transform2[4];\n  transform1[5] = transform2[5];\n  return transform1;\n}\n\n\n/**\n * Transforms the given coordinate with the given transform returning the\n * resulting, transformed coordinate. The coordinate will be modified in-place.\n *\n * @param {Transform} transform The transformation.\n * @param {import(\"./coordinate.js\").Coordinate|import(\"./pixel.js\").Pixel} coordinate The coordinate to transform.\n * @return {import(\"./coordinate.js\").Coordinate|import(\"./pixel.js\").Pixel} return coordinate so that operations can be\n *     chained together.\n */\nexport function apply(transform, coordinate) {\n  const x = coordinate[0];\n  const y = coordinate[1];\n  coordinate[0] = transform[0] * x + transform[2] * y + transform[4];\n  coordinate[1] = transform[1] * x + transform[3] * y + transform[5];\n  return coordinate;\n}\n\n\n/**\n * Applies rotation to the given transform.\n * @param {!Transform} transform Transform.\n * @param {number} angle Angle in radians.\n * @return {!Transform} The rotated transform.\n */\nexport function rotate(transform, angle) {\n  const cos = Math.cos(angle);\n  const sin = Math.sin(angle);\n  return multiply(transform, set(tmp_, cos, sin, -sin, cos, 0, 0));\n}\n\n\n/**\n * Applies scale to a given transform.\n * @param {!Transform} transform Transform.\n * @param {number} x Scale factor x.\n * @param {number} y Scale factor y.\n * @return {!Transform} The scaled transform.\n */\nexport function scale(transform, x, y) {\n  return multiply(transform, set(tmp_, x, 0, 0, y, 0, 0));\n}\n\n\n/**\n * Applies translation to the given transform.\n * @param {!Transform} transform Transform.\n * @param {number} dx Translation x.\n * @param {number} dy Translation y.\n * @return {!Transform} The translated transform.\n */\nexport function translate(transform, dx, dy) {\n  return multiply(transform, set(tmp_, 1, 0, 0, 1, dx, dy));\n}\n\n\n/**\n * Creates a composite transform given an initial translation, scale, rotation, and\n * final translation (in that order only, not commutative).\n * @param {!Transform} transform The transform (will be modified in place).\n * @param {number} dx1 Initial translation x.\n * @param {number} dy1 Initial translation y.\n * @param {number} sx Scale factor x.\n * @param {number} sy Scale factor y.\n * @param {number} angle Rotation (in counter-clockwise radians).\n * @param {number} dx2 Final translation x.\n * @param {number} dy2 Final translation y.\n * @return {!Transform} The composite transform.\n */\nexport function compose(transform, dx1, dy1, sx, sy, angle, dx2, dy2) {\n  const sin = Math.sin(angle);\n  const cos = Math.cos(angle);\n  transform[0] = sx * cos;\n  transform[1] = sy * sin;\n  transform[2] = -sx * sin;\n  transform[3] = sy * cos;\n  transform[4] = dx2 * sx * cos - dy2 * sx * sin + dx1;\n  transform[5] = dx2 * sy * sin + dy2 * sy * cos + dy1;\n  return transform;\n}\n\n\n/**\n * Invert the given transform.\n * @param {!Transform} transform Transform.\n * @return {!Transform} Inverse of the transform.\n */\nexport function invert(transform) {\n  const det = determinant(transform);\n  assert(det !== 0, 32); // Transformation matrix cannot be inverted\n\n  const a = transform[0];\n  const b = transform[1];\n  const c = transform[2];\n  const d = transform[3];\n  const e = transform[4];\n  const f = transform[5];\n\n  transform[0] = d / det;\n  transform[1] = -b / det;\n  transform[2] = -c / det;\n  transform[3] = a / det;\n  transform[4] = (c * f - d * e) / det;\n  transform[5] = -(a * f - b * e) / det;\n\n  return transform;\n}\n\n\n/**\n * Returns the determinant of the given matrix.\n * @param {!Transform} mat Matrix.\n * @return {number} Determinant.\n */\nexport function determinant(mat) {\n  return mat[0] * mat[3] - mat[1] * mat[2];\n}\n","/**\n * @module ol/ImageState\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  IDLE: 0,\n  LOADING: 1,\n  LOADED: 2,\n  ERROR: 3\n};\n","/**\n * @module olcs.util\n */\nconst exports = {};\n\n\n/**\n * Cast to object.\n * @param {Object} param\n * @return {Object}\n */\nexports.obj = function(param) {\n  return param;\n};\n\n\n/**\n * @type {boolean|undefined}\n * @private\n */\nexports.supportsImageRenderingPixelatedResult_ = undefined;\n\n\n/**\n * @type {string|undefined}\n * @private\n */\nexports.imageRenderingValueResult_ = undefined;\n\n\n/**\n * @return {boolean}\n */\nexports.supportsImageRenderingPixelated = function() {\n  if (exports.supportsImageRenderingPixelatedResult_ === undefined) {\n    const canvas = document.createElement('canvas');\n    canvas.setAttribute('style', 'image-rendering: -moz-crisp-edges; image-rendering: pixelated;');\n    // canvas.style.imageRendering will be undefined, null or an\n    // empty string on unsupported browsers.\n    const tmp = canvas.style['imageRendering']; // non standard\n    exports.supportsImageRenderingPixelatedResult_ = !!tmp;\n    if (exports.supportsImageRenderingPixelatedResult_) {\n      exports.imageRenderingValueResult_ = tmp;\n    }\n  }\n  return exports.supportsImageRenderingPixelatedResult_;\n};\n\n\n/**\n * @return {string}\n */\nexports.imageRenderingValue = function() {\n  exports.supportsImageRenderingPixelated();\n  return exports.imageRenderingValueResult_ || '';\n};\n\n/**\n * Return the projection of the source that Cesium should use.\n *\n * @param {ol.source.Source} source Source.\n * @returns {ol.proj.Projection} The projection of the source.\n */\nexports.getSourceProjection = function(source) {\n  return /** @type {ol.proj.Projection} */ (source.get('olcs.projection'))\n    || source.getProjection();\n};\n\n/**\n * @param {ol.Observable} observable\n * @param {string} type\n * @param {Function} listener\n * @return {!ol.events.EventsKey}\n */\nexport function olcsListen(observable, type, listener) {\n  // See https://github.com/openlayers/openlayers/pull/8481\n  // ol.events.listen is internal so we use `on` instead.\n  // And since `on` as a convoluted API (can return an EventsKey or an array of them)\n  // we use a cast here.\n  return /** @type {!ol.events.EventsKey} */ (observable.on(type, listener));\n}\n\n/**\n * Counter for getUid.\n * @type {number}\n */\nlet uidCounter_ = 0;\n\n/**\n * Gets a unique ID for an object. This mutates the object so that further calls\n * with the same object as a parameter returns the same value. Unique IDs are generated\n * as a strictly increasing sequence. Adapted from goog.getUid.\n *\n * @param {Object} obj The object to get the unique ID for.\n * @return {number} The unique ID for the object.\n */\nexport function getUid(obj) {\n  return obj.olcs_uid || (obj.olcs_uid = ++uidCounter_);\n}\n\n/**\n * Sort the passed array such that the relative order of equal elements is preverved.\n * See https://en.wikipedia.org/wiki/Sorting_algorithm#Stability for details.\n * @param {Array<*>} arr The array to sort (modifies original).\n * @param {!function(*, *): number} compareFnc Comparison function.\n */\nexport function stableSort(arr, compareFnc) {\n  const length = arr.length;\n  const tmp = Array(arr.length);\n  for (let i = 0; i < length; i++) {\n    tmp[i] = {index: i, value: arr[i]};\n  }\n  tmp.sort((a, b) => compareFnc(a.value, b.value) || a.index - b.index);\n  for (let i = 0; i < arr.length; i++) {\n    arr[i] = tmp[i].value;\n  }\n}\n\n/**\n * @param {Node} node The node to remove.\n * @returns {Node} The node that was removed or null.\n */\nexport function removeNode(node) {\n  return node && node.parentNode ? node.parentNode.removeChild(node) : null;\n}\n\n/**\n * @param {Node} node The node to remove the children from.\n */\nexport function removeChildren(node) {\n  while (node.lastChild) {\n    node.removeChild(node.lastChild);\n  }\n}\n\n/**\n * @param {Cesium.Scene} scene The scene.\n */\nexport function isGroundPolylinePrimitiveSupported(scene) {\n  const obj = Cesium.GroundPolylinePrimitive;\n  return obj && obj.isSupported(scene);\n}\n\nexport default exports;\n","/**\n * @module ol/layer/TileProperty\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  PRELOAD: 'preload',\n  USE_INTERIM_TILES_ON_ERROR: 'useInterimTilesOnError'\n};\n","/**\n * @module ol/layer/Tile\n */\nimport LayerType from '../LayerType.js';\nimport Layer from './Layer.js';\nimport TileProperty from './TileProperty.js';\nimport {assign} from '../obj.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {number} [preload=0] Preload. Load low-resolution tiles up to `preload` levels. `0`\n * means no preloading.\n * @property {import(\"../source/Tile.js\").default} [source] Source for this layer.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {boolean} [useInterimTilesOnError=true] Use interim tiles on error.\n */\n\n/**\n * @classdesc\n * For layer sources that provide pre-rendered, tiled images in grids that are\n * organized by zoom levels for specific resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @api\n */\nclass TileLayer extends Layer {\n  /**\n   * @param {Options=} opt_options Tile layer options.\n   */\n  constructor(opt_options) {\n    const options = opt_options ? opt_options : {};\n\n    const baseOptions = assign({}, options);\n\n    delete baseOptions.preload;\n    delete baseOptions.useInterimTilesOnError;\n    super(baseOptions);\n\n    this.setPreload(options.preload !== undefined ? options.preload : 0);\n    this.setUseInterimTilesOnError(options.useInterimTilesOnError !== undefined ?\n      options.useInterimTilesOnError : true);\n\n    /**\n    * The layer type.\n    * @protected\n    * @type {import(\"../LayerType.js\").default}\n    */\n    this.type = LayerType.TILE;\n\n  }\n\n  /**\n  * Return the level as number to which we will preload tiles up to.\n  * @return {number} The level to preload tiles up to.\n  * @observable\n  * @api\n  */\n  getPreload() {\n    return /** @type {number} */ (this.get(TileProperty.PRELOAD));\n  }\n\n  /**\n  * Set the level as number to which we will preload tiles up to.\n  * @param {number} preload The level to preload tiles up to.\n  * @observable\n  * @api\n  */\n  setPreload(preload) {\n    this.set(TileProperty.PRELOAD, preload);\n  }\n\n  /**\n  * Whether we use interim tiles on error.\n  * @return {boolean} Use interim tiles on error.\n  * @observable\n  * @api\n  */\n  getUseInterimTilesOnError() {\n    return /** @type {boolean} */ (this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR));\n  }\n\n  /**\n  * Set whether we use interim tiles on error.\n  * @param {boolean} useInterimTilesOnError Use interim tiles on error.\n  * @observable\n  * @api\n  */\n  setUseInterimTilesOnError(useInterimTilesOnError) {\n    this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR, useInterimTilesOnError);\n  }\n}\n\n\n/**\n * Return the associated {@link module:ol/source/Tile tilesource} of the layer.\n * @function\n * @return {import(\"../source/Tile.js\").default} Source.\n * @api\n */\nTileLayer.prototype.getSource;\n\n\nexport default TileLayer;\n","/**\n * @module ol/geom/GeometryLayout\n */\n\n/**\n * The coordinate layout for geometries, indicating whether a 3rd or 4th z ('Z')\n * or measure ('M') coordinate is available. Supported values are `'XY'`,\n * `'XYZ'`, `'XYM'`, `'XYZM'`.\n * @enum {string}\n */\nexport default {\n  XY: 'XY',\n  XYZ: 'XYZ',\n  XYM: 'XYM',\n  XYZM: 'XYZM'\n};\n","/**\n * @module ol/dom\n */\n\n\n/**\n * Create an html canvas element and returns its 2d context.\n * @param {number=} opt_width Canvas width.\n * @param {number=} opt_height Canvas height.\n * @return {CanvasRenderingContext2D} The context.\n */\nexport function createCanvasContext2D(opt_width, opt_height) {\n  const canvas = /** @type {HTMLCanvasElement} */ (document.createElement('canvas'));\n  if (opt_width) {\n    canvas.width = opt_width;\n  }\n  if (opt_height) {\n    canvas.height = opt_height;\n  }\n  return /** @type {CanvasRenderingContext2D} */ (canvas.getContext('2d'));\n}\n\n\n/**\n * Get the current computed width for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerWidth(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The width.\n */\nexport function outerWidth(element) {\n  let width = element.offsetWidth;\n  const style = getComputedStyle(element);\n  width += parseInt(style.marginLeft, 10) + parseInt(style.marginRight, 10);\n\n  return width;\n}\n\n\n/**\n * Get the current computed height for the given element including margin,\n * padding and border.\n * Equivalent to jQuery's `$(el).outerHeight(true)`.\n * @param {!HTMLElement} element Element.\n * @return {number} The height.\n */\nexport function outerHeight(element) {\n  let height = element.offsetHeight;\n  const style = getComputedStyle(element);\n  height += parseInt(style.marginTop, 10) + parseInt(style.marginBottom, 10);\n\n  return height;\n}\n\n/**\n * @param {Node} newNode Node to replace old node\n * @param {Node} oldNode The node to be replaced\n */\nexport function replaceNode(newNode, oldNode) {\n  const parent = oldNode.parentNode;\n  if (parent) {\n    parent.replaceChild(newNode, oldNode);\n  }\n}\n\n/**\n * @param {Node} node The node to remove.\n * @returns {Node} The node that was removed or null.\n */\nexport function removeNode(node) {\n  return node && node.parentNode ? node.parentNode.removeChild(node) : null;\n}\n\n/**\n * @param {Node} node The node to remove the children from.\n */\nexport function removeChildren(node) {\n  while (node.lastChild) {\n    node.removeChild(node.lastChild);\n  }\n}\n","/**\n * @module olcs.core.OLImageryProvider\n */\nimport {get as getProjection} from 'ol/proj.js';\nimport olcsUtil from '../util.js';\n\nclass OLImageryProvider /* should not extend Cesium.ImageryProvider */ {\n  /**\n   * Special class derived from Cesium.ImageryProvider\n   * that is connected to the given ol.source.TileImage.\n   * @param {!ol.Map} olMap\n   * @param {!ol.source.TileImage} source\n   * @param {ol.proj.Projection=} opt_fallbackProj Projection to assume if the\n   *                                               projection of the source is not defined.\n   * @constructor\n   * @extends {Cesium.ImageryProvider}\n   */\n  constructor(olMap, source, opt_fallbackProj) {\n    // Do not extend or call super constructor from\n    // Cesium.ImageryProvider since this particular function is a\n    // 'non instanciable interface' which throws on instanciation.\n\n    /**\n     * @type {!ol.source.TileImage}\n     * @private\n     */\n    this.source_ = source;\n\n    /**\n     * @type {?ol.proj.Projection}\n     * @private\n     */\n    this.projection_ = null;\n\n    /**\n     * @type {?ol.proj.Projection}\n     * @private\n     */\n    this.fallbackProj_ = opt_fallbackProj || null;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.ready_ = false;\n\n    /**\n     * @type {?Cesium.TilingScheme}\n     * @private\n     */\n    this.tilingScheme_ = null;\n\n    /**\n     * @type {?Cesium.Rectangle}\n     * @private\n     */\n    this.rectangle_ = null;\n\n    /**\n     * @type {!ol.Map}\n     * @private\n     */\n    this.map_ = olMap;\n\n    const proxy = this.source_.get('olcs.proxy');\n    if (proxy) {\n      if (typeof proxy === 'function') {\n        this.proxy_ = {\n          'getURL': proxy\n        };\n      } else if (typeof proxy === 'string') {\n        this.proxy_ = new Cesium.DefaultProxy(proxy);\n      }\n    }\n\n    this.errorEvent_ = new Cesium.Event();\n\n    this.emptyCanvas_ = document.createElement('canvas');\n    this.emptyCanvas_.width = 1;\n    this.emptyCanvas_.height = 1;\n\n    this.source_.on('change', (e) => {\n      this.handleSourceChanged_();\n    });\n    this.handleSourceChanged_();\n  }\n\n  /**\n   * Checks if the underlying source is ready and cached required data.\n   * @private\n   */\n  handleSourceChanged_(frameState) {\n    if (!this.ready_ && this.source_.getState() == 'ready') {\n      this.projection_ = olcsUtil.getSourceProjection(this.source_) || this.fallbackProj_;\n      if (this.projection_ == getProjection('EPSG:4326')) {\n        this.tilingScheme_ = new Cesium.GeographicTilingScheme();\n      } else if (this.projection_ == getProjection('EPSG:3857')) {\n        this.tilingScheme_ = new Cesium.WebMercatorTilingScheme();\n      } else {\n        return;\n      }\n      this.rectangle_ = this.tilingScheme_.rectangle;\n\n      this.ready_ = true;\n    }\n  }\n\n  /**\n   * Generates the proper attributions for a given position and zoom\n   * level.\n   * @export\n   * @override\n   */\n  getTileCredits(x, y, level) {\n    const extent = this.map_.getView().calculateExtent(this.map_.getSize());\n    const center = this.map_.getView().getCenter();\n    const zoom = this.tilingScheme_ instanceof Cesium.GeographicTilingScheme ? level + 1 : level;\n\n    const frameState = {\n      viewState: {zoom, center},\n      extent,\n    };\n\n    const attributionsFunction = this.source_.getAttributions();\n    if (!attributionsFunction) {\n      return [];\n    }\n    let attributions = attributionsFunction(frameState);\n    if (!Array.isArray(attributions)) {\n      attributions = [attributions];\n    }\n\n    return attributions.map(html => new Cesium.Credit(html, true));\n  }\n\n  /**\n   * @export\n   * @override\n   */\n  requestImage(x, y, level) {\n    const tileUrlFunction = this.source_.getTileUrlFunction();\n    if (tileUrlFunction && this.projection_) {\n\n      // Perform mapping of Cesium tile coordinates to OpenLayers tile coordinates:\n      // 1) Cesium zoom level 0 is OpenLayers zoom level 1 for EPSG:4326\n      const z_ = this.tilingScheme_ instanceof Cesium.GeographicTilingScheme ? level + 1 : level;\n      // 2) OpenLayers tile coordinates increase from bottom to top\n      const y_ = -y - 1;\n\n      let url = tileUrlFunction.call(this.source_,\n          [z_, x, y_], 1, this.projection_);\n      if (this.proxy_) {\n        url = this.proxy_.getURL(url);\n      }\n      return url ? Cesium.ImageryProvider.loadImage(this, url) : this.emptyCanvas_;\n    } else {\n      // return empty canvas to stop Cesium from retrying later\n      return this.emptyCanvas_;\n    }\n  }\n}\n\n// definitions of getters that are required to be present\n// in the Cesium.ImageryProvider instance:\nObject.defineProperties(OLImageryProvider.prototype, {\n  'ready': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.ready_;}\n  },\n\n  'rectangle': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.rectangle_;}\n  },\n\n  'tileWidth': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {\n          const tg = this.source_.getTileGrid();\n          return tg ? (Array.isArray(tg.getTileSize(0)) ? tg.getTileSize(0)[0] : tg.getTileSize(0)) : 256;\n        }\n  },\n\n  'tileHeight': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {\n          const tg = this.source_.getTileGrid();\n          return tg ? (Array.isArray(tg.getTileSize(0)) ? tg.getTileSize(0)[1] : tg.getTileSize(0)) : 256;\n        }\n  },\n\n  'maximumLevel': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {\n          const tg = this.source_.getTileGrid();\n          return tg ? tg.getMaxZoom() : 18;\n        }\n  },\n\n  'minimumLevel': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {\n          // WARNING: Do not use the minimum level (at least until the extent is\n          // properly set). Cesium assumes the minimumLevel to contain only\n          // a few tiles and tries to load them all at once -- this can\n          // freeze and/or crash the browser !\n          return 0;\n          //var tg = this.source_.getTileGrid();\n          //return tg ? tg.getMinZoom() : 0;\n        }\n  },\n\n  'tilingScheme': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.tilingScheme_;}\n  },\n\n  'tileDiscardPolicy': {\n    'get': function() {return undefined;}\n  },\n\n  'errorEvent': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.errorEvent_;}\n  },\n\n  'proxy': {\n    'get': /** @this {olcs.core.OLImageryProvider} */\n        function() {return this.proxy_;}\n  },\n\n  'hasAlphaChannel': {\n    'get': function() {return true;}\n  },\n\n  'pickFeatures': {\n    'get': function() {return undefined;}\n  }\n});\n\n\nexport default OLImageryProvider;\n","/**\n * @module olcs.core\n */\nconst exports = {};\nimport {linear as linearEasing} from 'ol/easing.js';\nimport olLayerTile from 'ol/layer/Tile.js';\nimport olLayerImage from 'ol/layer/Image.js';\nimport {get as getProjection, transformExtent} from 'ol/proj.js';\nimport olSourceImageStatic from 'ol/source/ImageStatic';\nimport olSourceImageWMS from 'ol/source/ImageWMS.js';\nimport olSourceTileImage from 'ol/source/TileImage.js';\nimport olSourceTileWMS from 'ol/source/TileWMS.js';\nimport {defaultImageLoadFunction} from 'ol/source/Image.js';\nimport olcsCoreOLImageryProvider from './core/OLImageryProvider.js';\nimport olcsUtil from './util.js';\n\n\n/**\n * Compute the pixel width and height of a point in meters using the\n * camera frustum.\n * @param {!Cesium.Scene} scene\n * @param {!Cesium.Cartesian3} target\n * @return {!Cesium.Cartesian2} the pixel size\n * @api\n */\nexports.computePixelSizeAtCoordinate = function(scene, target) {\n  const camera = scene.camera;\n  const canvas = scene.canvas;\n  const frustum = camera.frustum;\n  const distance = Cesium.Cartesian3.magnitude(Cesium.Cartesian3.subtract(\n      camera.position, target, new Cesium.Cartesian3()));\n  const pixelSize = new Cesium.Cartesian2();\n  return frustum.getPixelDimensions(canvas.clientWidth, canvas.clientHeight,\n      distance, pixelSize);\n};\n\n\n/**\n * Compute bounding box around a target point.\n * @param {!Cesium.Scene} scene\n * @param {!Cesium.Cartesian3} target\n * @param {number} amount Half the side of the box, in pixels.\n * @return {Array<Cesium.Cartographic>} bottom left and top right\n * coordinates of the box\n */\nexports.computeBoundingBoxAtTarget = function(scene, target, amount) {\n  const pixelSize = exports.computePixelSizeAtCoordinate(scene, target);\n  const transform = Cesium.Transforms.eastNorthUpToFixedFrame(target);\n\n  const bottomLeft = Cesium.Matrix4.multiplyByPoint(\n      transform,\n      new Cesium.Cartesian3(-pixelSize.x * amount, -pixelSize.y * amount, 0),\n      new Cesium.Cartesian3());\n\n  const topRight = Cesium.Matrix4.multiplyByPoint(\n      transform,\n      new Cesium.Cartesian3(pixelSize.x * amount, pixelSize.y * amount, 0),\n      new Cesium.Cartesian3());\n\n  return Cesium.Ellipsoid.WGS84.cartesianArrayToCartographicArray(\n      [bottomLeft, topRight]);\n};\n\n\n/**\n *\n * @param {!ol.geom.Geometry} geometry\n * @param {number} height\n * @api\n */\nexports.applyHeightOffsetToGeometry = function(geometry, height) {\n  geometry.applyTransform((input, output, stride) => {\n    console.assert(input === output);\n    if (stride !== undefined && stride >= 3) {\n      for (let i = 0; i < output.length; i += stride) {\n        output[i + 2] = output[i + 2] + height;\n      }\n    }\n    return output;\n  });\n};\n\n\n/**\n * @param {ol.Coordinate} coordinates\n * @param {number=} rotation\n * @param {!Cesium.Cartesian3=} translation\n * @param {!Cesium.Cartesian3=} scale\n * @return {!Cesium.Matrix4}\n * @api\n */\nexports.createMatrixAtCoordinates = function(coordinates, rotation = 0, translation = Cesium.Cartesian3.ZERO, scale = new Cesium.Cartesian3(1, 1, 1)) {\n  const position = exports.ol4326CoordinateToCesiumCartesian(coordinates);\n  const rawMatrix = Cesium.Transforms.eastNorthUpToFixedFrame(position);\n  const quaternion = Cesium.Quaternion.fromAxisAngle(Cesium.Cartesian3.UNIT_Z, -rotation);\n  const rotationMatrix = Cesium.Matrix4.fromTranslationQuaternionRotationScale(translation, quaternion, scale);\n  return Cesium.Matrix4.multiply(rawMatrix, rotationMatrix, new Cesium.Matrix4());\n};\n\n\n/**\n * @param {!Cesium.Camera} camera\n * @param {number} angle\n * @param {!Cesium.Cartesian3} axis\n * @param {!Cesium.Matrix4} transform\n * @param {olcsx.core.RotateAroundAxisOption=} opt_options\n * @api\n */\nexports.rotateAroundAxis = function(camera, angle, axis, transform,\n    opt_options) {\n  const clamp = Cesium.Math.clamp;\n  const defaultValue = Cesium.defaultValue;\n\n  const options = opt_options || {};\n  const duration = defaultValue(options.duration, 500); // ms\n  const easing = defaultValue(options.easing, linearEasing);\n  const callback = options.callback;\n\n  let lastProgress = 0;\n  const oldTransform = new Cesium.Matrix4();\n\n  const start = Date.now();\n  const step = function() {\n    const timestamp = Date.now();\n    const timeDifference = timestamp - start;\n    const progress = easing(clamp(timeDifference / duration, 0, 1));\n    console.assert(progress >= lastProgress);\n\n    camera.transform.clone(oldTransform);\n    const stepAngle = (progress - lastProgress) * angle;\n    lastProgress = progress;\n    camera.lookAtTransform(transform);\n    camera.rotate(axis, stepAngle);\n    camera.lookAtTransform(oldTransform);\n\n    if (progress < 1) {\n      window.requestAnimationFrame(step);\n    } else {\n      if (callback) {\n        callback();\n      }\n    }\n  };\n  window.requestAnimationFrame(step);\n};\n\n\n/**\n * @param {!Cesium.Scene} scene\n * @param {number} heading\n * @param {!Cesium.Cartesian3} bottomCenter\n * @param {olcsx.core.RotateAroundAxisOption=} opt_options\n * @api\n */\nexports.setHeadingUsingBottomCenter = function(scene, heading,\n    bottomCenter, opt_options) {\n  const camera = scene.camera;\n  // Compute the camera position to zenith quaternion\n  const angleToZenith = exports.computeAngleToZenith(scene, bottomCenter);\n  const axis = camera.right;\n  const quaternion = Cesium.Quaternion.fromAxisAngle(axis, angleToZenith);\n  const rotation = Cesium.Matrix3.fromQuaternion(quaternion);\n\n  // Get the zenith point from the rotation of the position vector\n  const vector = new Cesium.Cartesian3();\n  Cesium.Cartesian3.subtract(camera.position, bottomCenter, vector);\n  const zenith = new Cesium.Cartesian3();\n  Cesium.Matrix3.multiplyByVector(rotation, vector, zenith);\n  Cesium.Cartesian3.add(zenith, bottomCenter, zenith);\n\n  // Actually rotate around the zenith normal\n  const transform = Cesium.Matrix4.fromTranslation(zenith);\n  const rotateAroundAxis = exports.rotateAroundAxis;\n  rotateAroundAxis(camera, heading, zenith, transform, opt_options);\n};\n\n\n/**\n * Get the 3D position of the given pixel of the canvas.\n * @param {!Cesium.Scene} scene\n * @param {!Cesium.Cartesian2} pixel\n * @return {!Cesium.Cartesian3|undefined}\n * @api\n */\nexports.pickOnTerrainOrEllipsoid = function(scene, pixel) {\n  const ray = scene.camera.getPickRay(pixel);\n  const target = scene.globe.pick(ray, scene);\n  return target || scene.camera.pickEllipsoid(pixel);\n};\n\n\n/**\n * Get the 3D position of the point at the bottom-center of the screen.\n * @param {!Cesium.Scene} scene\n * @return {!Cesium.Cartesian3|undefined}\n * @api\n */\nexports.pickBottomPoint = function(scene) {\n  const canvas = scene.canvas;\n  const bottom = new Cesium.Cartesian2(\n      canvas.clientWidth / 2, canvas.clientHeight);\n  return exports.pickOnTerrainOrEllipsoid(scene, bottom);\n};\n\n\n/**\n * Get the 3D position of the point at the center of the screen.\n * @param {!Cesium.Scene} scene\n * @return {!Cesium.Cartesian3|undefined}\n * @api\n */\nexports.pickCenterPoint = function(scene) {\n  const canvas = scene.canvas;\n  const center = new Cesium.Cartesian2(\n      canvas.clientWidth / 2,\n      canvas.clientHeight / 2);\n  return exports.pickOnTerrainOrEllipsoid(scene, center);\n};\n\n\n/**\n * Compute the signed tilt angle on globe, between the opposite of the\n * camera direction and the target normal. Return undefined if there is no\n * intersection of the camera direction with the globe.\n * @param {!Cesium.Scene} scene\n * @return {number|undefined}\n * @api\n */\nexports.computeSignedTiltAngleOnGlobe = function(scene) {\n  const camera = scene.camera;\n  const ray = new Cesium.Ray(camera.position, camera.direction);\n  let target = scene.globe.pick(ray, scene);\n\n  if (!target) {\n    // no tiles in the area were loaded?\n    const ellipsoid = Cesium.Ellipsoid.WGS84;\n    const obj = Cesium.IntersectionTests.rayEllipsoid(ray, ellipsoid);\n    if (obj) {\n      target = Cesium.Ray.getPoint(ray, obj.start);\n    }\n  }\n\n  if (!target) {\n    return undefined;\n  }\n\n  const normal = new Cesium.Cartesian3();\n  Cesium.Ellipsoid.WGS84.geocentricSurfaceNormal(target, normal);\n\n  const angleBetween = exports.signedAngleBetween;\n  const angle = angleBetween(camera.direction, normal, camera.right) - Math.PI;\n  return Cesium.Math.convertLongitudeRange(angle);\n};\n\n\n/**\n * Compute the ray from the camera to the bottom-center of the screen.\n * @param {!Cesium.Scene} scene\n * @return {!Cesium.Ray}\n */\nexports.bottomFovRay = function(scene) {\n  const camera = scene.camera;\n  const fovy2 = camera.frustum.fovy / 2;\n  const direction = camera.direction;\n  const rotation = Cesium.Quaternion.fromAxisAngle(camera.right, fovy2);\n  const matrix = Cesium.Matrix3.fromQuaternion(rotation);\n  const vector = new Cesium.Cartesian3();\n  Cesium.Matrix3.multiplyByVector(matrix, direction, vector);\n  return new Cesium.Ray(camera.position, vector);\n};\n\n\n/**\n * Compute the angle between two Cartesian3.\n * @param {!Cesium.Cartesian3} first\n * @param {!Cesium.Cartesian3} second\n * @param {!Cesium.Cartesian3} normal Normal to test orientation against.\n * @return {number}\n */\nexports.signedAngleBetween = function(first, second, normal) {\n  // We are using the dot for the angle.\n  // Then the cross and the dot for the sign.\n  const a = new Cesium.Cartesian3();\n  const b = new Cesium.Cartesian3();\n  const c = new Cesium.Cartesian3();\n  Cesium.Cartesian3.normalize(first, a);\n  Cesium.Cartesian3.normalize(second, b);\n  Cesium.Cartesian3.cross(a, b, c);\n\n  const cosine = Cesium.Cartesian3.dot(a, b);\n  const sine = Cesium.Cartesian3.magnitude(c);\n\n  // Sign of the vector product and the orientation normal\n  const sign = Cesium.Cartesian3.dot(normal, c);\n  const angle = Math.atan2(sine, cosine);\n  return sign >= 0 ? angle : -angle;\n};\n\n\n/**\n * Compute the rotation angle around a given point, needed to reach the\n * zenith position.\n * At a zenith position, the camera direction is going througth the earth\n * center and the frustrum bottom ray is going through the chosen pivot\n * point.\n * The bottom-center of the screen is a good candidate for the pivot point.\n * @param {!Cesium.Scene} scene\n * @param {!Cesium.Cartesian3} pivot Point around which the camera rotates.\n * @return {number}\n * @api\n */\nexports.computeAngleToZenith = function(scene, pivot) {\n  // This angle is the sum of the angles 'fy' and 'a', which are defined\n  // using the pivot point and its surface normal.\n  //        Zenith |    camera\n  //           \\   |   /\n  //            \\fy|  /\n  //             \\ |a/\n  //              \\|/pivot\n  const camera = scene.camera;\n  const fy = camera.frustum.fovy / 2;\n  const ray = exports.bottomFovRay(scene);\n  const direction = Cesium.Cartesian3.clone(ray.direction);\n  Cesium.Cartesian3.negate(direction, direction);\n\n  const normal = new Cesium.Cartesian3();\n  Cesium.Ellipsoid.WGS84.geocentricSurfaceNormal(pivot, normal);\n\n  const left = new Cesium.Cartesian3();\n  Cesium.Cartesian3.negate(camera.right, left);\n\n  const a = exports.signedAngleBetween(normal, direction, left);\n  return a + fy;\n};\n\n\n/**\n * Convert an OpenLayers extent to a Cesium rectangle.\n * @param {ol.Extent} extent Extent.\n * @param {ol.ProjectionLike} projection Extent projection.\n * @return {Cesium.Rectangle} The corresponding Cesium rectangle.\n * @api\n */\nexports.extentToRectangle = function(extent, projection) {\n  if (extent && projection) {\n    const ext = transformExtent(extent, projection, 'EPSG:4326');\n    return Cesium.Rectangle.fromDegrees(ext[0], ext[1], ext[2], ext[3]);\n  } else {\n    return null;\n  }\n};\n\n\n/**\n * Creates Cesium.ImageryLayer best corresponding to the given ol.layer.Layer.\n * Only supports raster layers and static images\n * @param {!ol.Map} olMap\n * @param {!ol.layer.Base} olLayer\n * @param {!ol.proj.Projection} viewProj Projection of the view.\n * @return {?Cesium.ImageryLayer} null if not possible (or supported)\n * @api\n */\nexports.tileLayerToImageryLayer = function(olMap, olLayer, viewProj) {\n\n  if (!(olLayer instanceof olLayerTile) && !(olLayer instanceof olLayerImage)) {\n    return null;\n  }\n\n  let provider = null;\n  let source = olLayer.getSource();\n\n  // Convert ImageWMS to TileWMS\n  if (source instanceof olSourceImageWMS && source.getUrl() &&\n    source.getImageLoadFunction() === defaultImageLoadFunction) {\n    const sourceProps = {\n      'olcs.proxy': source.get('olcs.proxy'),\n      'olcs.extent': source.get('olcs.extent'),\n      'olcs.projection': source.get('olcs.projection'),\n      'olcs.imagesource': source\n    };\n    source = new olSourceTileWMS({\n      url: source.getUrl(),\n      attributions: source.getAttributions(),\n      projection: source.getProjection(),\n      params: source.getParams()\n    });\n    source.setProperties(sourceProps);\n  }\n\n  if (source instanceof olSourceTileImage) {\n    let projection = olcsUtil.getSourceProjection(source);\n\n    if (!projection) {\n      // if not explicit, assume the same projection as view\n      projection = viewProj;\n    }\n\n    if (exports.isCesiumProjection(projection)) {\n      provider = new olcsCoreOLImageryProvider(olMap, source, viewProj);\n    }\n    // Projection not supported by Cesium\n    else {\n      return null;\n    }\n\n  } else if (source instanceof olSourceImageStatic) {\n    let projection = olcsUtil.getSourceProjection(source);\n\n    if (!projection) {\n      projection = viewProj;\n    }\n\n    if (exports.isCesiumProjection(projection)) {\n      provider = new Cesium.SingleTileImageryProvider({\n        url: source.getUrl(),\n        rectangle: new Cesium.Rectangle.fromDegrees(\n            source.getImageExtent()[0],\n            source.getImageExtent()[1],\n            source.getImageExtent()[2],\n            source.getImageExtent()[3]\n        )\n      });\n    }\n    // Projection not supported by Cesium\n    else {\n      return null;\n    }\n  } else {\n    // sources other than TileImage|ImageStatic are currently not supported\n    return null;\n  }\n\n  // the provider is always non-null if we got this far\n\n  const layerOptions = {};\n\n  const forcedExtent = /** @type {ol.Extent} */ (olLayer.get('olcs.extent'));\n  const ext = forcedExtent || olLayer.getExtent();\n  if (ext) {\n    layerOptions.rectangle = exports.extentToRectangle(ext, viewProj);\n  }\n\n  const cesiumLayer = new Cesium.ImageryLayer(provider, layerOptions);\n  return cesiumLayer;\n};\n\n\n/**\n * Synchronizes the layer rendering properties (opacity, visible)\n * to the given Cesium ImageryLayer.\n * @param {olcsx.LayerWithParents} olLayerWithParents\n * @param {!Cesium.ImageryLayer} csLayer\n * @api\n */\nexports.updateCesiumLayerProperties = function(olLayerWithParents, csLayer) {\n  let opacity = 1;\n  let visible = true;\n  [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach((olLayer) => {\n    const layerOpacity = olLayer.getOpacity();\n    if (layerOpacity !== undefined) {\n      opacity *= layerOpacity;\n    }\n    const layerVisible = olLayer.getVisible();\n    if (layerVisible !== undefined) {\n      visible &= layerVisible;\n    }\n  });\n  csLayer.alpha = opacity;\n  csLayer.show = visible;\n};\n\n\n/**\n * Convert a 2D or 3D OpenLayers coordinate to Cesium.\n * @param {ol.Coordinate} coordinate Ol3 coordinate.\n * @return {!Cesium.Cartesian3} Cesium cartesian coordinate\n * @api\n */\nexports.ol4326CoordinateToCesiumCartesian = function(coordinate) {\n  const coo = coordinate;\n  return coo.length > 2 ?\n    Cesium.Cartesian3.fromDegrees(coo[0], coo[1], coo[2]) :\n    Cesium.Cartesian3.fromDegrees(coo[0], coo[1]);\n};\n\n\n/**\n * Convert an array of 2D or 3D OpenLayers coordinates to Cesium.\n * @param {Array.<!ol.Coordinate>} coordinates Ol3 coordinates.\n * @return {!Array.<Cesium.Cartesian3>} Cesium cartesian coordinates\n * @api\n */\nexports.ol4326CoordinateArrayToCsCartesians = function(coordinates) {\n  console.assert(coordinates !== null);\n  const toCartesian = exports.ol4326CoordinateToCesiumCartesian;\n  const cartesians = [];\n  for (let i = 0; i < coordinates.length; ++i) {\n    cartesians.push(toCartesian(coordinates[i]));\n  }\n  return cartesians;\n};\n\n\n/**\n * Reproject an OpenLayers geometry to EPSG:4326 if needed.\n * The geometry will be cloned only when original projection is not EPSG:4326\n * and the properties will be shallow copied.\n * @param {!T} geometry\n * @param {!ol.ProjectionLike} projection\n * @return {!T}\n * @template T\n * @api\n */\nexports.olGeometryCloneTo4326 = function(geometry, projection) {\n  console.assert(projection);\n\n  const proj4326 = getProjection('EPSG:4326');\n  const proj = getProjection(projection);\n  if (proj !== proj4326) {\n    const properties = geometry.getProperties();\n    geometry = geometry.clone();\n    geometry.transform(proj, proj4326);\n    geometry.setProperties(properties);\n  }\n  return geometry;\n};\n\n\n/**\n * Convert an OpenLayers color to Cesium.\n * @param {ol.Color|CanvasGradient|CanvasPattern|string} olColor\n * @return {!Cesium.Color}\n * @api\n */\nexports.convertColorToCesium = function(olColor) {\n  olColor = olColor || 'black';\n  if (Array.isArray(olColor)) {\n    return new Cesium.Color(\n        Cesium.Color.byteToFloat(olColor[0]),\n        Cesium.Color.byteToFloat(olColor[1]),\n        Cesium.Color.byteToFloat(olColor[2]),\n        olColor[3]\n    );\n  } else if (typeof olColor == 'string') {\n    return Cesium.Color.fromCssColorString(olColor);\n  } else if (olColor instanceof CanvasPattern || olColor instanceof CanvasGradient) {\n    // Render the CanvasPattern/CanvasGradient into a canvas that will be sent to Cesium as material\n    const canvas = document.createElement('canvas');\n    const ctx = canvas.getContext('2d');\n    canvas.width = canvas.height = 256;\n    ctx.fillStyle = olColor;\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    return new Cesium.ImageMaterialProperty({\n      image: canvas\n    });\n  }\n  console.assert(false, 'impossible');\n};\n\n\n/**\n * Convert an OpenLayers url to Cesium.\n * @param {string} url\n * @return {!olcsx.core.CesiumUrlDefinition}\n * @api\n */\nexports.convertUrlToCesium = function(url) {\n  let subdomains = '';\n  const re = /\\{(\\d|[a-z])-(\\d|[a-z])\\}/;\n  const match = re.exec(url);\n  if (match) {\n    url = url.replace(re, '{s}');\n    const startCharCode = match[1].charCodeAt(0);\n    const stopCharCode = match[2].charCodeAt(0);\n    let charCode;\n    for (charCode = startCharCode; charCode <= stopCharCode; ++charCode) {\n      subdomains += String.fromCharCode(charCode);\n    }\n  }\n  return {\n    url,\n    subdomains\n  };\n};\n\n\n/**\n * Animate the return to a top-down view from the zenith.\n * The camera is rotated to orient to the North.\n * @param {!ol.Map} map\n * @param {!Cesium.Scene} scene\n * @return {Promise<undefined>}\n * @api\n */\nexports.resetToNorthZenith = function(map, scene) {\n  return new Promise((resolve, reject) => {\n    const camera = scene.camera;\n    const pivot = exports.pickBottomPoint(scene);\n    if (!pivot) {\n      reject('Could not get bottom pivot');\n      return;\n    }\n\n    const currentHeading = map.getView().getRotation();\n    if (currentHeading === undefined) {\n      reject('The view is not initialized');\n      return;\n    }\n    const angle = exports.computeAngleToZenith(scene, pivot);\n\n    // Point to North\n    exports.setHeadingUsingBottomCenter(scene, currentHeading, pivot);\n\n    // Go to zenith\n    const transform = Cesium.Matrix4.fromTranslation(pivot);\n    const axis = camera.right;\n    const options = {\n      callback: () => {\n        const view = map.getView();\n        exports.normalizeView(view);\n        resolve();\n      }\n    };\n    exports.rotateAroundAxis(camera, -angle, axis, transform, options);\n  });\n};\n\n\n/**\n * @param {!Cesium.Scene} scene\n * @param {number} angle in radian\n * @return {Promise<undefined>}\n * @api\n */\nexports.rotateAroundBottomCenter = function(scene, angle) {\n  return new Promise((resolve, reject) => {\n    const camera = scene.camera;\n    const pivot = exports.pickBottomPoint(scene);\n    if (!pivot) {\n      reject('could not get bottom pivot');\n      return;\n    }\n\n    const options = {callback: resolve};\n    const transform = Cesium.Matrix4.fromTranslation(pivot);\n    const axis = camera.right;\n    const rotateAroundAxis = exports.rotateAroundAxis;\n    rotateAroundAxis(camera, -angle, axis, transform, options);\n  });\n};\n\n\n/**\n * Set the OpenLayers view to a specific rotation and\n * the nearest resolution.\n * @param {ol.View} view\n * @param {number=} angle\n * @api\n */\nexports.normalizeView = function(view, angle = 0) {\n  const resolution = view.getResolution();\n  view.setRotation(angle);\n  view.setResolution(view.constrainResolution(resolution));\n};\n\n/**\n * Check if the given projection is managed by Cesium (WGS84 or Mercator Spheric)\n *\n * @param {ol.proj.Projection} projection Projection to check.\n * @returns {boolean} Whether it's managed by Cesium.\n */\nexports.isCesiumProjection = function(projection) {\n  const is3857 = projection === getProjection('EPSG:3857');\n  const is4326 = projection === getProjection('EPSG:4326');\n  return is3857 || is4326;\n};\n\n\nexport default exports;\n","/**\n * @module ol/centerconstraint\n */\nimport {clamp} from './math.js';\n\n\n/**\n * @typedef {function((import(\"./coordinate.js\").Coordinate|undefined)): (import(\"./coordinate.js\").Coordinate|undefined)} Type\n */\n\n\n/**\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @return {Type} The constraint.\n */\nexport function createExtent(extent) {\n  return (\n    /**\n     * @param {import(\"./coordinate.js\").Coordinate=} center Center.\n     * @return {import(\"./coordinate.js\").Coordinate|undefined} Center.\n     */\n    function(center) {\n      if (center) {\n        return [\n          clamp(center[0], extent[0], extent[2]),\n          clamp(center[1], extent[1], extent[3])\n        ];\n      } else {\n        return undefined;\n      }\n    }\n  );\n}\n\n\n/**\n * @param {import(\"./coordinate.js\").Coordinate=} center Center.\n * @return {import(\"./coordinate.js\").Coordinate|undefined} Center.\n */\nexport function none(center) {\n  return center;\n}\n","/**\n * @module ol/ViewProperty\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  CENTER: 'center',\n  RESOLUTION: 'resolution',\n  ROTATION: 'rotation'\n};\n","/**\n * @module ol/View\n */\nimport {DEFAULT_TILE_SIZE} from './tilegrid/common.js';\nimport {getUid} from './util.js';\nimport {VOID} from './functions.js';\nimport {createExtent, none as centerNone} from './centerconstraint.js';\nimport BaseObject from './Object.js';\nimport {createSnapToResolutions, createSnapToPower} from './resolutionconstraint.js';\nimport {createSnapToZero, createSnapToN, none as rotationNone, disable} from './rotationconstraint.js';\nimport ViewHint from './ViewHint.js';\nimport ViewProperty from './ViewProperty.js';\nimport {linearFindNearest} from './array.js';\nimport {assert} from './asserts.js';\nimport {add as addCoordinate, rotate as rotateCoordinate, equals as coordinatesEqual} from './coordinate.js';\nimport {inAndOut} from './easing.js';\nimport {getForViewAndSize, getCenter, getHeight, getWidth, isEmpty} from './extent.js';\nimport GeometryType from './geom/GeometryType.js';\nimport {fromExtent as polygonFromExtent} from './geom/Polygon.js';\nimport {clamp, modulo} from './math.js';\nimport {assign} from './obj.js';\nimport {createProjection, METERS_PER_UNIT} from './proj.js';\nimport Units from './proj/Units.js';\n\n\n/**\n * An animation configuration\n *\n * @typedef {Object} Animation\n * @property {import(\"./coordinate.js\").Coordinate} [sourceCenter]\n * @property {import(\"./coordinate.js\").Coordinate} [targetCenter]\n * @property {number} [sourceResolution]\n * @property {number} [targetResolution]\n * @property {number} [sourceRotation]\n * @property {number} [targetRotation]\n * @property {import(\"./coordinate.js\").Coordinate} [anchor]\n * @property {number} start\n * @property {number} duration\n * @property {boolean} complete\n * @property {function(number):number} easing\n * @property {function(boolean)} callback\n */\n\n\n/**\n * @typedef {Object} Constraints\n * @property {import(\"./centerconstraint.js\").Type} center\n * @property {import(\"./resolutionconstraint.js\").Type} resolution\n * @property {import(\"./rotationconstraint.js\").Type} rotation\n */\n\n\n/**\n * @typedef {Object} FitOptions\n * @property {import(\"./size.js\").Size} [size] The size in pixels of the box to fit\n * the extent into. Default is the current size of the first map in the DOM that\n * uses this view, or `[100, 100]` if no such map is found.\n * @property {!Array<number>} [padding=[0, 0, 0, 0]] Padding (in pixels) to be\n * cleared inside the view. Values in the array are top, right, bottom and left\n * padding.\n * @property {boolean} [constrainResolution=true] Constrain the resolution.\n * @property {boolean} [nearest=false] If `constrainResolution` is `true`, get\n * the nearest extent instead of the closest that actually fits the view.\n * @property {number} [minResolution=0] Minimum resolution that we zoom to.\n * @property {number} [maxZoom] Maximum zoom level that we zoom to. If\n * `minResolution` is given, this property is ignored.\n * @property {number} [duration] The duration of the animation in milliseconds.\n * By default, there is no animation to the target extent.\n * @property {function(number):number} [easing] The easing function used during\n * the animation (defaults to {@link module:ol/easing~inAndOut}).\n * The function will be called for each frame with a number representing a\n * fraction of the animation's duration.  The function should return a number\n * between 0 and 1 representing the progress toward the destination state.\n * @property {function(boolean)} [callback] Function called when the view is in\n * its final position. The callback will be called with `true` if the animation\n * series completed on its own or `false` if it was cancelled.\n */\n\n\n/**\n * @typedef {Object} ViewOptions\n * @property {import(\"./coordinate.js\").Coordinate} [center] The initial center for\n * the view. The coordinate system for the center is specified with the\n * `projection` option. Layer sources will not be fetched if this is not set,\n * but the center can be set later with {@link #setCenter}.\n * @property {boolean|number} [constrainRotation=true] Rotation constraint.\n * `false` means no constraint. `true` means no constraint, but snap to zero\n * near zero. A number constrains the rotation to that number of values. For\n * example, `4` will constrain the rotation to 0, 90, 180, and 270 degrees.\n * @property {boolean} [enableRotation=true] Enable rotation.\n * If `false`, a rotation constraint that always sets the rotation to zero is\n * used. The `constrainRotation` option has no effect if `enableRotation` is\n * `false`.\n * @property {import(\"./extent.js\").Extent} [extent] The extent that constrains the\n * center, in other words, center cannot be set outside this extent.\n * @property {number} [maxResolution] The maximum resolution used to determine\n * the resolution constraint. It is used together with `minResolution` (or\n * `maxZoom`) and `zoomFactor`. If unspecified it is calculated in such a way\n * that the projection's validity extent fits in a 256x256 px tile. If the\n * projection is Spherical Mercator (the default) then `maxResolution` defaults\n * to `40075016.68557849 / 256 = 156543.03392804097`.\n * @property {number} [minResolution] The minimum resolution used to determine\n * the resolution constraint.  It is used together with `maxResolution` (or\n * `minZoom`) and `zoomFactor`.  If unspecified it is calculated assuming 29\n * zoom levels (with a factor of 2). If the projection is Spherical Mercator\n * (the default) then `minResolution` defaults to\n * `40075016.68557849 / 256 / Math.pow(2, 28) = 0.0005831682455839253`.\n * @property {number} [maxZoom=28] The maximum zoom level used to determine the\n * resolution constraint. It is used together with `minZoom` (or\n * `maxResolution`) and `zoomFactor`.  Note that if `minResolution` is also\n * provided, it is given precedence over `maxZoom`.\n * @property {number} [minZoom=0] The minimum zoom level used to determine the\n * resolution constraint. It is used together with `maxZoom` (or\n * `minResolution`) and `zoomFactor`.  Note that if `maxResolution` is also\n * provided, it is given precedence over `minZoom`.\n * @property {import(\"./proj.js\").ProjectionLike} [projection='EPSG:3857'] The\n * projection. The default is Spherical Mercator.\n * @property {number} [resolution] The initial resolution for the view. The\n * units are `projection` units per pixel (e.g. meters per pixel). An\n * alternative to setting this is to set `zoom`. Layer sources will not be\n * fetched if neither this nor `zoom` are defined, but they can be set later\n * with {@link #setZoom} or {@link #setResolution}.\n * @property {Array<number>} [resolutions] Resolutions to determine the\n * resolution constraint. If set the `maxResolution`, `minResolution`,\n * `minZoom`, `maxZoom`, and `zoomFactor` options are ignored.\n * @property {number} [rotation=0] The initial rotation for the view in radians\n * (positive rotation clockwise, 0 means North).\n * @property {number} [zoom] Only used if `resolution` is not defined. Zoom\n * level used to calculate the initial resolution for the view. The initial\n * resolution is determined using the {@link #constrainResolution} method.\n * @property {number} [zoomFactor=2] The zoom factor used to determine the\n * resolution constraint.\n */\n\n\n/**\n * @typedef {Object} AnimationOptions\n * @property {import(\"./coordinate.js\").Coordinate} [center] The center of the view at the end of\n * the animation.\n * @property {number} [zoom] The zoom level of the view at the end of the\n * animation. This takes precedence over `resolution`.\n * @property {number} [resolution] The resolution of the view at the end\n * of the animation.  If `zoom` is also provided, this option will be ignored.\n * @property {number} [rotation] The rotation of the view at the end of\n * the animation.\n * @property {import(\"./coordinate.js\").Coordinate} [anchor] Optional anchor to remained fixed\n * during a rotation or resolution animation.\n * @property {number} [duration=1000] The duration of the animation in milliseconds.\n * @property {function(number):number} [easing] The easing function used\n * during the animation (defaults to {@link module:ol/easing~inAndOut}).\n * The function will be called for each frame with a number representing a\n * fraction of the animation's duration.  The function should return a number\n * between 0 and 1 representing the progress toward the destination state.\n */\n\n\n/**\n * @typedef {Object} State\n * @property {import(\"./coordinate.js\").Coordinate} center\n * @property {import(\"./proj/Projection.js\").default} projection\n * @property {number} resolution\n * @property {number} rotation\n * @property {number} zoom\n */\n\n\n/**\n * Default min zoom level for the map view.\n * @type {number}\n */\nconst DEFAULT_MIN_ZOOM = 0;\n\n\n/**\n * @classdesc\n * A View object represents a simple 2D view of the map.\n *\n * This is the object to act upon to change the center, resolution,\n * and rotation of the map.\n *\n * ### The view states\n *\n * An View is determined by three states: `center`, `resolution`,\n * and `rotation`. Each state has a corresponding getter and setter, e.g.\n * `getCenter` and `setCenter` for the `center` state.\n *\n * An View has a `projection`. The projection determines the\n * coordinate system of the center, and its units determine the units of the\n * resolution (projection units per pixel). The default projection is\n * Spherical Mercator (EPSG:3857).\n *\n * ### The constraints\n *\n * `setCenter`, `setResolution` and `setRotation` can be used to change the\n * states of the view. Any value can be passed to the setters. And the value\n * that is passed to a setter will effectively be the value set in the view,\n * and returned by the corresponding getter.\n *\n * But a View object also has a *resolution constraint*, a\n * *rotation constraint* and a *center constraint*.\n *\n * As said above, no constraints are applied when the setters are used to set\n * new states for the view. Applying constraints is done explicitly through\n * the use of the `constrain*` functions (`constrainResolution` and\n * `constrainRotation` and `constrainCenter`).\n *\n * The main users of the constraints are the interactions and the\n * controls. For example, double-clicking on the map changes the view to\n * the \"next\" resolution. And releasing the fingers after pinch-zooming\n * snaps to the closest resolution (with an animation).\n *\n * The *resolution constraint* snaps to specific resolutions. It is\n * determined by the following options: `resolutions`, `maxResolution`,\n * `maxZoom`, and `zoomFactor`. If `resolutions` is set, the other three\n * options are ignored. See documentation for each option for more\n * information.\n *\n * The *rotation constraint* snaps to specific angles. It is determined\n * by the following options: `enableRotation` and `constrainRotation`.\n * By default the rotation value is snapped to zero when approaching the\n * horizontal.\n *\n * The *center constraint* is determined by the `extent` option. By\n * default the center is not constrained at all.\n *\n  * @api\n */\nclass View extends BaseObject {\n\n  /**\n   * @param {ViewOptions=} opt_options View options.\n   */\n  constructor(opt_options) {\n    super();\n\n    const options = assign({}, opt_options);\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.hints_ = [0, 0];\n\n    /**\n     * @private\n     * @type {Array<Array<Animation>>}\n     */\n    this.animations_ = [];\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.updateAnimationKey_;\n\n    this.updateAnimations_ = this.updateAnimations_.bind(this);\n\n    /**\n     * @private\n     * @const\n     * @type {import(\"./proj/Projection.js\").default}\n     */\n    this.projection_ = createProjection(options.projection, 'EPSG:3857');\n\n    this.applyOptions_(options);\n  }\n\n  /**\n   * Set up the view with the given options.\n   * @param {ViewOptions} options View options.\n   */\n  applyOptions_(options) {\n\n    /**\n     * @type {Object<string, *>}\n     */\n    const properties = {};\n    properties[ViewProperty.CENTER] = options.center !== undefined ?\n      options.center : null;\n\n    const resolutionConstraintInfo = createResolutionConstraint(options);\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxResolution_ = resolutionConstraintInfo.maxResolution;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.minResolution_ = resolutionConstraintInfo.minResolution;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.zoomFactor_ = resolutionConstraintInfo.zoomFactor;\n\n    /**\n     * @private\n     * @type {Array<number>|undefined}\n     */\n    this.resolutions_ = options.resolutions;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.minZoom_ = resolutionConstraintInfo.minZoom;\n\n    const centerConstraint = createCenterConstraint(options);\n    const resolutionConstraint = resolutionConstraintInfo.constraint;\n    const rotationConstraint = createRotationConstraint(options);\n\n    /**\n     * @private\n     * @type {Constraints}\n     */\n    this.constraints_ = {\n      center: centerConstraint,\n      resolution: resolutionConstraint,\n      rotation: rotationConstraint\n    };\n\n    if (options.resolution !== undefined) {\n      properties[ViewProperty.RESOLUTION] = options.resolution;\n    } else if (options.zoom !== undefined) {\n      properties[ViewProperty.RESOLUTION] = this.constrainResolution(\n        this.maxResolution_, options.zoom - this.minZoom_);\n\n      if (this.resolutions_) { // in case map zoom is out of min/max zoom range\n        properties[ViewProperty.RESOLUTION] = clamp(\n          Number(this.getResolution() || properties[ViewProperty.RESOLUTION]),\n          this.minResolution_, this.maxResolution_);\n      }\n    }\n    properties[ViewProperty.ROTATION] = options.rotation !== undefined ? options.rotation : 0;\n    this.setProperties(properties);\n\n    /**\n     * @private\n     * @type {ViewOptions}\n     */\n    this.options_ = options;\n\n  }\n\n  /**\n   * Get an updated version of the view options used to construct the view.  The\n   * current resolution (or zoom), center, and rotation are applied to any stored\n   * options.  The provided options can be used to apply new min/max zoom or\n   * resolution limits.\n   * @param {ViewOptions} newOptions New options to be applied.\n   * @return {ViewOptions} New options updated with the current view state.\n   */\n  getUpdatedOptions_(newOptions) {\n    const options = assign({}, this.options_);\n\n    // preserve resolution (or zoom)\n    if (options.resolution !== undefined) {\n      options.resolution = this.getResolution();\n    } else {\n      options.zoom = this.getZoom();\n    }\n\n    // preserve center\n    options.center = this.getCenter();\n\n    // preserve rotation\n    options.rotation = this.getRotation();\n\n    return assign({}, options, newOptions);\n  }\n\n  /**\n   * Animate the view.  The view's center, zoom (or resolution), and rotation\n   * can be animated for smooth transitions between view states.  For example,\n   * to animate the view to a new zoom level:\n   *\n   *     view.animate({zoom: view.getZoom() + 1});\n   *\n   * By default, the animation lasts one second and uses in-and-out easing.  You\n   * can customize this behavior by including `duration` (in milliseconds) and\n   * `easing` options (see {@link module:ol/easing}).\n   *\n   * To chain together multiple animations, call the method with multiple\n   * animation objects.  For example, to first zoom and then pan:\n   *\n   *     view.animate({zoom: 10}, {center: [0, 0]});\n   *\n   * If you provide a function as the last argument to the animate method, it\n   * will get called at the end of an animation series.  The callback will be\n   * called with `true` if the animation series completed on its own or `false`\n   * if it was cancelled.\n   *\n   * Animations are cancelled by user interactions (e.g. dragging the map) or by\n   * calling `view.setCenter()`, `view.setResolution()`, or `view.setRotation()`\n   * (or another method that calls one of these).\n   *\n   * @param {...(AnimationOptions|function(boolean))} var_args Animation\n   *     options.  Multiple animations can be run in series by passing multiple\n   *     options objects.  To run multiple animations in parallel, call the method\n   *     multiple times.  An optional callback can be provided as a final\n   *     argument.  The callback will be called with a boolean indicating whether\n   *     the animation completed without being cancelled.\n   * @api\n   */\n  animate(var_args) {\n    let animationCount = arguments.length;\n    let callback;\n    if (animationCount > 1 && typeof arguments[animationCount - 1] === 'function') {\n      callback = arguments[animationCount - 1];\n      --animationCount;\n    }\n    if (!this.isDef()) {\n      // if view properties are not yet set, shortcut to the final state\n      const state = arguments[animationCount - 1];\n      if (state.center) {\n        this.setCenter(state.center);\n      }\n      if (state.zoom !== undefined) {\n        this.setZoom(state.zoom);\n      }\n      if (state.rotation !== undefined) {\n        this.setRotation(state.rotation);\n      }\n      if (callback) {\n        animationCallback(callback, true);\n      }\n      return;\n    }\n    let start = Date.now();\n    let center = this.getCenter().slice();\n    let resolution = this.getResolution();\n    let rotation = this.getRotation();\n    const series = [];\n    for (let i = 0; i < animationCount; ++i) {\n      const options = /** @type {AnimationOptions} */ (arguments[i]);\n\n      const animation = /** @type {Animation} */ ({\n        start: start,\n        complete: false,\n        anchor: options.anchor,\n        duration: options.duration !== undefined ? options.duration : 1000,\n        easing: options.easing || inAndOut\n      });\n\n      if (options.center) {\n        animation.sourceCenter = center;\n        animation.targetCenter = options.center;\n        center = animation.targetCenter;\n      }\n\n      if (options.zoom !== undefined) {\n        animation.sourceResolution = resolution;\n        animation.targetResolution = this.constrainResolution(\n          this.maxResolution_, options.zoom - this.minZoom_, 0);\n        resolution = animation.targetResolution;\n      } else if (options.resolution) {\n        animation.sourceResolution = resolution;\n        animation.targetResolution = options.resolution;\n        resolution = animation.targetResolution;\n      }\n\n      if (options.rotation !== undefined) {\n        animation.sourceRotation = rotation;\n        const delta = modulo(options.rotation - rotation + Math.PI, 2 * Math.PI) - Math.PI;\n        animation.targetRotation = rotation + delta;\n        rotation = animation.targetRotation;\n      }\n\n      animation.callback = callback;\n\n      // check if animation is a no-op\n      if (isNoopAnimation(animation)) {\n        animation.complete = true;\n        // we still push it onto the series for callback handling\n      } else {\n        start += animation.duration;\n      }\n      series.push(animation);\n    }\n    this.animations_.push(series);\n    this.setHint(ViewHint.ANIMATING, 1);\n    this.updateAnimations_();\n  }\n\n  /**\n   * Determine if the view is being animated.\n   * @return {boolean} The view is being animated.\n   * @api\n   */\n  getAnimating() {\n    return this.hints_[ViewHint.ANIMATING] > 0;\n  }\n\n  /**\n   * Determine if the user is interacting with the view, such as panning or zooming.\n   * @return {boolean} The view is being interacted with.\n   * @api\n   */\n  getInteracting() {\n    return this.hints_[ViewHint.INTERACTING] > 0;\n  }\n\n  /**\n   * Cancel any ongoing animations.\n   * @api\n   */\n  cancelAnimations() {\n    this.setHint(ViewHint.ANIMATING, -this.hints_[ViewHint.ANIMATING]);\n    for (let i = 0, ii = this.animations_.length; i < ii; ++i) {\n      const series = this.animations_[i];\n      if (series[0].callback) {\n        animationCallback(series[0].callback, false);\n      }\n    }\n    this.animations_.length = 0;\n  }\n\n  /**\n   * Update all animations.\n   */\n  updateAnimations_() {\n    if (this.updateAnimationKey_ !== undefined) {\n      cancelAnimationFrame(this.updateAnimationKey_);\n      this.updateAnimationKey_ = undefined;\n    }\n    if (!this.getAnimating()) {\n      return;\n    }\n    const now = Date.now();\n    let more = false;\n    for (let i = this.animations_.length - 1; i >= 0; --i) {\n      const series = this.animations_[i];\n      let seriesComplete = true;\n      for (let j = 0, jj = series.length; j < jj; ++j) {\n        const animation = series[j];\n        if (animation.complete) {\n          continue;\n        }\n        const elapsed = now - animation.start;\n        let fraction = animation.duration > 0 ? elapsed / animation.duration : 1;\n        if (fraction >= 1) {\n          animation.complete = true;\n          fraction = 1;\n        } else {\n          seriesComplete = false;\n        }\n        const progress = animation.easing(fraction);\n        if (animation.sourceCenter) {\n          const x0 = animation.sourceCenter[0];\n          const y0 = animation.sourceCenter[1];\n          const x1 = animation.targetCenter[0];\n          const y1 = animation.targetCenter[1];\n          const x = x0 + progress * (x1 - x0);\n          const y = y0 + progress * (y1 - y0);\n          this.set(ViewProperty.CENTER, [x, y]);\n        }\n        if (animation.sourceResolution && animation.targetResolution) {\n          const resolution = progress === 1 ?\n            animation.targetResolution :\n            animation.sourceResolution + progress * (animation.targetResolution - animation.sourceResolution);\n          if (animation.anchor) {\n            this.set(ViewProperty.CENTER,\n              this.calculateCenterZoom(resolution, animation.anchor));\n          }\n          this.set(ViewProperty.RESOLUTION, resolution);\n        }\n        if (animation.sourceRotation !== undefined && animation.targetRotation !== undefined) {\n          const rotation = progress === 1 ?\n            modulo(animation.targetRotation + Math.PI, 2 * Math.PI) - Math.PI :\n            animation.sourceRotation + progress * (animation.targetRotation - animation.sourceRotation);\n          if (animation.anchor) {\n            this.set(ViewProperty.CENTER,\n              this.calculateCenterRotate(rotation, animation.anchor));\n          }\n          this.set(ViewProperty.ROTATION, rotation);\n        }\n        more = true;\n        if (!animation.complete) {\n          break;\n        }\n      }\n      if (seriesComplete) {\n        this.animations_[i] = null;\n        this.setHint(ViewHint.ANIMATING, -1);\n        const callback = series[0].callback;\n        if (callback) {\n          animationCallback(callback, true);\n        }\n      }\n    }\n    // prune completed series\n    this.animations_ = this.animations_.filter(Boolean);\n    if (more && this.updateAnimationKey_ === undefined) {\n      this.updateAnimationKey_ = requestAnimationFrame(this.updateAnimations_);\n    }\n  }\n\n  /**\n   * @param {number} rotation Target rotation.\n   * @param {import(\"./coordinate.js\").Coordinate} anchor Rotation anchor.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} Center for rotation and anchor.\n   */\n  calculateCenterRotate(rotation, anchor) {\n    let center;\n    const currentCenter = this.getCenter();\n    if (currentCenter !== undefined) {\n      center = [currentCenter[0] - anchor[0], currentCenter[1] - anchor[1]];\n      rotateCoordinate(center, rotation - this.getRotation());\n      addCoordinate(center, anchor);\n    }\n    return center;\n  }\n\n  /**\n   * @param {number} resolution Target resolution.\n   * @param {import(\"./coordinate.js\").Coordinate} anchor Zoom anchor.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} Center for resolution and anchor.\n   */\n  calculateCenterZoom(resolution, anchor) {\n    let center;\n    const currentCenter = this.getCenter();\n    const currentResolution = this.getResolution();\n    if (currentCenter !== undefined && currentResolution !== undefined) {\n      const x = anchor[0] - resolution * (anchor[0] - currentCenter[0]) / currentResolution;\n      const y = anchor[1] - resolution * (anchor[1] - currentCenter[1]) / currentResolution;\n      center = [x, y];\n    }\n    return center;\n  }\n\n  /**\n   * @private\n   * @return {import(\"./size.js\").Size} Viewport size or `[100, 100]` when no viewport is found.\n   */\n  getSizeFromViewport_() {\n    const size = [100, 100];\n    const selector = '.ol-viewport[data-view=\"' + getUid(this) + '\"]';\n    const element = document.querySelector(selector);\n    if (element) {\n      const metrics = getComputedStyle(element);\n      size[0] = parseInt(metrics.width, 10);\n      size[1] = parseInt(metrics.height, 10);\n    }\n    return size;\n  }\n\n  /**\n   * Get the constrained center of this view.\n   * @param {import(\"./coordinate.js\").Coordinate|undefined} center Center.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} Constrained center.\n   * @api\n   */\n  constrainCenter(center) {\n    return this.constraints_.center(center);\n  }\n\n  /**\n   * Get the constrained resolution of this view.\n   * @param {number|undefined} resolution Resolution.\n   * @param {number=} opt_delta Delta. Default is `0`.\n   * @param {number=} opt_direction Direction. Default is `0`.\n   * @return {number|undefined} Constrained resolution.\n   * @api\n   */\n  constrainResolution(resolution, opt_delta, opt_direction) {\n    const delta = opt_delta || 0;\n    const direction = opt_direction || 0;\n    return this.constraints_.resolution(resolution, delta, direction);\n  }\n\n  /**\n   * Get the constrained rotation of this view.\n   * @param {number|undefined} rotation Rotation.\n   * @param {number=} opt_delta Delta. Default is `0`.\n   * @return {number|undefined} Constrained rotation.\n   * @api\n   */\n  constrainRotation(rotation, opt_delta) {\n    const delta = opt_delta || 0;\n    return this.constraints_.rotation(rotation, delta);\n  }\n\n  /**\n   * Get the view center.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} The center of the view.\n   * @observable\n   * @api\n   */\n  getCenter() {\n    return (\n      /** @type {import(\"./coordinate.js\").Coordinate|undefined} */ (this.get(ViewProperty.CENTER))\n    );\n  }\n\n  /**\n   * @return {Constraints} Constraints.\n   */\n  getConstraints() {\n    return this.constraints_;\n  }\n\n  /**\n   * @param {Array<number>=} opt_hints Destination array.\n   * @return {Array<number>} Hint.\n   */\n  getHints(opt_hints) {\n    if (opt_hints !== undefined) {\n      opt_hints[0] = this.hints_[0];\n      opt_hints[1] = this.hints_[1];\n      return opt_hints;\n    } else {\n      return this.hints_.slice();\n    }\n  }\n\n  /**\n   * Calculate the extent for the current view state and the passed size.\n   * The size is the pixel dimensions of the box into which the calculated extent\n   * should fit. In most cases you want to get the extent of the entire map,\n   * that is `map.getSize()`.\n   * @param {import(\"./size.js\").Size=} opt_size Box pixel size. If not provided, the size of the\n   * first map that uses this view will be used.\n   * @return {import(\"./extent.js\").Extent} Extent.\n   * @api\n   */\n  calculateExtent(opt_size) {\n    const size = opt_size || this.getSizeFromViewport_();\n    const center = /** @type {!import(\"./coordinate.js\").Coordinate} */ (this.getCenter());\n    assert(center, 1); // The view center is not defined\n    const resolution = /** @type {!number} */ (this.getResolution());\n    assert(resolution !== undefined, 2); // The view resolution is not defined\n    const rotation = /** @type {!number} */ (this.getRotation());\n    assert(rotation !== undefined, 3); // The view rotation is not defined\n\n    return getForViewAndSize(center, resolution, rotation, size);\n  }\n\n  /**\n   * Get the maximum resolution of the view.\n   * @return {number} The maximum resolution of the view.\n   * @api\n   */\n  getMaxResolution() {\n    return this.maxResolution_;\n  }\n\n  /**\n   * Get the minimum resolution of the view.\n   * @return {number} The minimum resolution of the view.\n   * @api\n   */\n  getMinResolution() {\n    return this.minResolution_;\n  }\n\n  /**\n   * Get the maximum zoom level for the view.\n   * @return {number} The maximum zoom level.\n   * @api\n   */\n  getMaxZoom() {\n    return /** @type {number} */ (this.getZoomForResolution(this.minResolution_));\n  }\n\n  /**\n   * Set a new maximum zoom level for the view.\n   * @param {number} zoom The maximum zoom level.\n   * @api\n   */\n  setMaxZoom(zoom) {\n    this.applyOptions_(this.getUpdatedOptions_({maxZoom: zoom}));\n  }\n\n  /**\n   * Get the minimum zoom level for the view.\n   * @return {number} The minimum zoom level.\n   * @api\n   */\n  getMinZoom() {\n    return /** @type {number} */ (this.getZoomForResolution(this.maxResolution_));\n  }\n\n  /**\n   * Set a new minimum zoom level for the view.\n   * @param {number} zoom The minimum zoom level.\n   * @api\n   */\n  setMinZoom(zoom) {\n    this.applyOptions_(this.getUpdatedOptions_({minZoom: zoom}));\n  }\n\n  /**\n   * Get the view projection.\n   * @return {import(\"./proj/Projection.js\").default} The projection of the view.\n   * @api\n   */\n  getProjection() {\n    return this.projection_;\n  }\n\n  /**\n   * Get the view resolution.\n   * @return {number|undefined} The resolution of the view.\n   * @observable\n   * @api\n   */\n  getResolution() {\n    return /** @type {number|undefined} */ (this.get(ViewProperty.RESOLUTION));\n  }\n\n  /**\n   * Get the resolutions for the view. This returns the array of resolutions\n   * passed to the constructor of the View, or undefined if none were given.\n   * @return {Array<number>|undefined} The resolutions of the view.\n   * @api\n   */\n  getResolutions() {\n    return this.resolutions_;\n  }\n\n  /**\n   * Get the resolution for a provided extent (in map units) and size (in pixels).\n   * @param {import(\"./extent.js\").Extent} extent Extent.\n   * @param {import(\"./size.js\").Size=} opt_size Box pixel size.\n   * @return {number} The resolution at which the provided extent will render at\n   *     the given size.\n   * @api\n   */\n  getResolutionForExtent(extent, opt_size) {\n    const size = opt_size || this.getSizeFromViewport_();\n    const xResolution = getWidth(extent) / size[0];\n    const yResolution = getHeight(extent) / size[1];\n    return Math.max(xResolution, yResolution);\n  }\n\n  /**\n   * Return a function that returns a value between 0 and 1 for a\n   * resolution. Exponential scaling is assumed.\n   * @param {number=} opt_power Power.\n   * @return {function(number): number} Resolution for value function.\n   */\n  getResolutionForValueFunction(opt_power) {\n    const power = opt_power || 2;\n    const maxResolution = this.maxResolution_;\n    const minResolution = this.minResolution_;\n    const max = Math.log(maxResolution / minResolution) / Math.log(power);\n    return (\n      /**\n       * @param {number} value Value.\n       * @return {number} Resolution.\n       */\n      function(value) {\n        const resolution = maxResolution / Math.pow(power, value * max);\n        return resolution;\n      });\n  }\n\n  /**\n   * Get the view rotation.\n   * @return {number} The rotation of the view in radians.\n   * @observable\n   * @api\n   */\n  getRotation() {\n    return /** @type {number} */ (this.get(ViewProperty.ROTATION));\n  }\n\n  /**\n   * Return a function that returns a resolution for a value between\n   * 0 and 1. Exponential scaling is assumed.\n   * @param {number=} opt_power Power.\n   * @return {function(number): number} Value for resolution function.\n   */\n  getValueForResolutionFunction(opt_power) {\n    const power = opt_power || 2;\n    const maxResolution = this.maxResolution_;\n    const minResolution = this.minResolution_;\n    const max = Math.log(maxResolution / minResolution) / Math.log(power);\n    return (\n      /**\n       * @param {number} resolution Resolution.\n       * @return {number} Value.\n       */\n      function(resolution) {\n        const value = (Math.log(maxResolution / resolution) / Math.log(power)) / max;\n        return value;\n      });\n  }\n\n  /**\n   * @param {number} pixelRatio Pixel ratio for center rounding.\n   * @return {State} View state.\n   */\n  getState(pixelRatio) {\n    const center = /** @type {import(\"./coordinate.js\").Coordinate} */ (this.getCenter());\n    const projection = this.getProjection();\n    const resolution = /** @type {number} */ (this.getResolution());\n    const pixelResolution = resolution / pixelRatio;\n    const rotation = this.getRotation();\n    return (\n      /** @type {State} */ ({\n        center: [\n          Math.round(center[0] / pixelResolution) * pixelResolution,\n          Math.round(center[1] / pixelResolution) * pixelResolution\n        ],\n        projection: projection !== undefined ? projection : null,\n        resolution: resolution,\n        rotation: rotation,\n        zoom: this.getZoom()\n      })\n    );\n  }\n\n  /**\n   * Get the current zoom level.  If you configured your view with a resolutions\n   * array (this is rare), this method may return non-integer zoom levels (so\n   * the zoom level is not safe to use as an index into a resolutions array).\n   * @return {number|undefined} Zoom.\n   * @api\n   */\n  getZoom() {\n    let zoom;\n    const resolution = this.getResolution();\n    if (resolution !== undefined) {\n      zoom = this.getZoomForResolution(resolution);\n    }\n    return zoom;\n  }\n\n  /**\n   * Get the zoom level for a resolution.\n   * @param {number} resolution The resolution.\n   * @return {number|undefined} The zoom level for the provided resolution.\n   * @api\n   */\n  getZoomForResolution(resolution) {\n    let offset = this.minZoom_ || 0;\n    let max, zoomFactor;\n    if (this.resolutions_) {\n      const nearest = linearFindNearest(this.resolutions_, resolution, 1);\n      offset = nearest;\n      max = this.resolutions_[nearest];\n      if (nearest == this.resolutions_.length - 1) {\n        zoomFactor = 2;\n      } else {\n        zoomFactor = max / this.resolutions_[nearest + 1];\n      }\n    } else {\n      max = this.maxResolution_;\n      zoomFactor = this.zoomFactor_;\n    }\n    return offset + Math.log(max / resolution) / Math.log(zoomFactor);\n  }\n\n  /**\n   * Get the resolution for a zoom level.\n   * @param {number} zoom Zoom level.\n   * @return {number} The view resolution for the provided zoom level.\n   * @api\n   */\n  getResolutionForZoom(zoom) {\n    return /** @type {number} */ (this.constrainResolution(\n      this.maxResolution_, zoom - this.minZoom_, 0));\n  }\n\n  /**\n   * Fit the given geometry or extent based on the given map size and border.\n   * The size is pixel dimensions of the box to fit the extent into.\n   * In most cases you will want to use the map size, that is `map.getSize()`.\n   * Takes care of the map angle.\n   * @param {import(\"./geom/SimpleGeometry.js\").default|import(\"./extent.js\").Extent} geometryOrExtent The geometry or\n   *     extent to fit the view to.\n   * @param {FitOptions=} opt_options Options.\n   * @api\n   */\n  fit(geometryOrExtent, opt_options) {\n    const options = opt_options || {};\n    let size = options.size;\n    if (!size) {\n      size = this.getSizeFromViewport_();\n    }\n    /** @type {import(\"./geom/SimpleGeometry.js\").default} */\n    let geometry;\n    assert(Array.isArray(geometryOrExtent) || typeof /** @type {?} */ (geometryOrExtent).getSimplifiedGeometry === 'function',\n      24); // Invalid extent or geometry provided as `geometry`\n    if (Array.isArray(geometryOrExtent)) {\n      assert(!isEmpty(geometryOrExtent),\n        25); // Cannot fit empty extent provided as `geometry`\n      geometry = polygonFromExtent(geometryOrExtent);\n    } else if (geometryOrExtent.getType() === GeometryType.CIRCLE) {\n      geometryOrExtent = geometryOrExtent.getExtent();\n      geometry = polygonFromExtent(geometryOrExtent);\n      geometry.rotate(this.getRotation(), getCenter(geometryOrExtent));\n    } else {\n      geometry = geometryOrExtent;\n    }\n\n    const padding = options.padding !== undefined ? options.padding : [0, 0, 0, 0];\n    const constrainResolution = options.constrainResolution !== undefined ?\n      options.constrainResolution : true;\n    const nearest = options.nearest !== undefined ? options.nearest : false;\n    let minResolution;\n    if (options.minResolution !== undefined) {\n      minResolution = options.minResolution;\n    } else if (options.maxZoom !== undefined) {\n      minResolution = this.constrainResolution(\n        this.maxResolution_, options.maxZoom - this.minZoom_, 0);\n    } else {\n      minResolution = 0;\n    }\n    const coords = geometry.getFlatCoordinates();\n\n    // calculate rotated extent\n    const rotation = this.getRotation();\n    const cosAngle = Math.cos(-rotation);\n    let sinAngle = Math.sin(-rotation);\n    let minRotX = +Infinity;\n    let minRotY = +Infinity;\n    let maxRotX = -Infinity;\n    let maxRotY = -Infinity;\n    const stride = geometry.getStride();\n    for (let i = 0, ii = coords.length; i < ii; i += stride) {\n      const rotX = coords[i] * cosAngle - coords[i + 1] * sinAngle;\n      const rotY = coords[i] * sinAngle + coords[i + 1] * cosAngle;\n      minRotX = Math.min(minRotX, rotX);\n      minRotY = Math.min(minRotY, rotY);\n      maxRotX = Math.max(maxRotX, rotX);\n      maxRotY = Math.max(maxRotY, rotY);\n    }\n\n    // calculate resolution\n    let resolution = this.getResolutionForExtent(\n      [minRotX, minRotY, maxRotX, maxRotY],\n      [size[0] - padding[1] - padding[3], size[1] - padding[0] - padding[2]]);\n    resolution = isNaN(resolution) ? minResolution :\n      Math.max(resolution, minResolution);\n    if (constrainResolution) {\n      let constrainedResolution = this.constrainResolution(resolution, 0, 0);\n      if (!nearest && constrainedResolution < resolution) {\n        constrainedResolution = this.constrainResolution(\n          constrainedResolution, -1, 0);\n      }\n      resolution = constrainedResolution;\n    }\n\n    // calculate center\n    sinAngle = -sinAngle; // go back to original rotation\n    let centerRotX = (minRotX + maxRotX) / 2;\n    let centerRotY = (minRotY + maxRotY) / 2;\n    centerRotX += (padding[1] - padding[3]) / 2 * resolution;\n    centerRotY += (padding[0] - padding[2]) / 2 * resolution;\n    const centerX = centerRotX * cosAngle - centerRotY * sinAngle;\n    const centerY = centerRotY * cosAngle + centerRotX * sinAngle;\n    const center = [centerX, centerY];\n    const callback = options.callback ? options.callback : VOID;\n\n    if (options.duration !== undefined) {\n      this.animate({\n        resolution: resolution,\n        center: center,\n        duration: options.duration,\n        easing: options.easing\n      }, callback);\n    } else {\n      this.setResolution(resolution);\n      this.setCenter(center);\n      animationCallback(callback, true);\n    }\n  }\n\n  /**\n   * Center on coordinate and view position.\n   * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"./size.js\").Size} size Box pixel size.\n   * @param {import(\"./pixel.js\").Pixel} position Position on the view to center on.\n   * @api\n   */\n  centerOn(coordinate, size, position) {\n    // calculate rotated position\n    const rotation = this.getRotation();\n    const cosAngle = Math.cos(-rotation);\n    let sinAngle = Math.sin(-rotation);\n    let rotX = coordinate[0] * cosAngle - coordinate[1] * sinAngle;\n    let rotY = coordinate[1] * cosAngle + coordinate[0] * sinAngle;\n    const resolution = this.getResolution();\n    rotX += (size[0] / 2 - position[0]) * resolution;\n    rotY += (position[1] - size[1] / 2) * resolution;\n\n    // go back to original angle\n    sinAngle = -sinAngle; // go back to original rotation\n    const centerX = rotX * cosAngle - rotY * sinAngle;\n    const centerY = rotY * cosAngle + rotX * sinAngle;\n\n    this.setCenter([centerX, centerY]);\n  }\n\n  /**\n   * @return {boolean} Is defined.\n   */\n  isDef() {\n    return !!this.getCenter() && this.getResolution() !== undefined;\n  }\n\n  /**\n   * Rotate the view around a given coordinate.\n   * @param {number} rotation New rotation value for the view.\n   * @param {import(\"./coordinate.js\").Coordinate=} opt_anchor The rotation center.\n   * @api\n   */\n  rotate(rotation, opt_anchor) {\n    if (opt_anchor !== undefined) {\n      const center = this.calculateCenterRotate(rotation, opt_anchor);\n      this.setCenter(center);\n    }\n    this.setRotation(rotation);\n  }\n\n  /**\n   * Set the center of the current view.\n   * @param {import(\"./coordinate.js\").Coordinate|undefined} center The center of the view.\n   * @observable\n   * @api\n   */\n  setCenter(center) {\n    this.set(ViewProperty.CENTER, center);\n    if (this.getAnimating()) {\n      this.cancelAnimations();\n    }\n  }\n\n  /**\n   * @param {ViewHint} hint Hint.\n   * @param {number} delta Delta.\n   * @return {number} New value.\n   */\n  setHint(hint, delta) {\n    this.hints_[hint] += delta;\n    this.changed();\n    return this.hints_[hint];\n  }\n\n  /**\n   * Set the resolution for this view.\n   * @param {number|undefined} resolution The resolution of the view.\n   * @observable\n   * @api\n   */\n  setResolution(resolution) {\n    this.set(ViewProperty.RESOLUTION, resolution);\n    if (this.getAnimating()) {\n      this.cancelAnimations();\n    }\n  }\n\n  /**\n   * Set the rotation for this view.\n   * @param {number} rotation The rotation of the view in radians.\n   * @observable\n   * @api\n   */\n  setRotation(rotation) {\n    this.set(ViewProperty.ROTATION, rotation);\n    if (this.getAnimating()) {\n      this.cancelAnimations();\n    }\n  }\n\n  /**\n   * Zoom to a specific zoom level.\n   * @param {number} zoom Zoom level.\n   * @api\n   */\n  setZoom(zoom) {\n    this.setResolution(this.getResolutionForZoom(zoom));\n  }\n}\n\n\n/**\n * @param {Function} callback Callback.\n * @param {*} returnValue Return value.\n */\nfunction animationCallback(callback, returnValue) {\n  setTimeout(function() {\n    callback(returnValue);\n  }, 0);\n}\n\n\n/**\n * @param {ViewOptions} options View options.\n * @return {import(\"./centerconstraint.js\").Type} The constraint.\n */\nexport function createCenterConstraint(options) {\n  if (options.extent !== undefined) {\n    return createExtent(options.extent);\n  } else {\n    return centerNone;\n  }\n}\n\n\n/**\n * @param {ViewOptions} options View options.\n * @return {{constraint: import(\"./resolutionconstraint.js\").Type, maxResolution: number,\n *     minResolution: number, minZoom: number, zoomFactor: number}} The constraint.\n */\nexport function createResolutionConstraint(options) {\n  let resolutionConstraint;\n  let maxResolution;\n  let minResolution;\n\n  // TODO: move these to be ol constants\n  // see https://github.com/openlayers/openlayers/issues/2076\n  const defaultMaxZoom = 28;\n  const defaultZoomFactor = 2;\n\n  let minZoom = options.minZoom !== undefined ?\n    options.minZoom : DEFAULT_MIN_ZOOM;\n\n  let maxZoom = options.maxZoom !== undefined ?\n    options.maxZoom : defaultMaxZoom;\n\n  const zoomFactor = options.zoomFactor !== undefined ?\n    options.zoomFactor : defaultZoomFactor;\n\n  if (options.resolutions !== undefined) {\n    const resolutions = options.resolutions;\n    maxResolution = resolutions[minZoom];\n    minResolution = resolutions[maxZoom] !== undefined ?\n      resolutions[maxZoom] : resolutions[resolutions.length - 1];\n    resolutionConstraint = createSnapToResolutions(\n      resolutions);\n  } else {\n    // calculate the default min and max resolution\n    const projection = createProjection(options.projection, 'EPSG:3857');\n    const extent = projection.getExtent();\n    const size = !extent ?\n      // use an extent that can fit the whole world if need be\n      360 * METERS_PER_UNIT[Units.DEGREES] /\n            projection.getMetersPerUnit() :\n      Math.max(getWidth(extent), getHeight(extent));\n\n    const defaultMaxResolution = size / DEFAULT_TILE_SIZE / Math.pow(\n      defaultZoomFactor, DEFAULT_MIN_ZOOM);\n\n    const defaultMinResolution = defaultMaxResolution / Math.pow(\n      defaultZoomFactor, defaultMaxZoom - DEFAULT_MIN_ZOOM);\n\n    // user provided maxResolution takes precedence\n    maxResolution = options.maxResolution;\n    if (maxResolution !== undefined) {\n      minZoom = 0;\n    } else {\n      maxResolution = defaultMaxResolution / Math.pow(zoomFactor, minZoom);\n    }\n\n    // user provided minResolution takes precedence\n    minResolution = options.minResolution;\n    if (minResolution === undefined) {\n      if (options.maxZoom !== undefined) {\n        if (options.maxResolution !== undefined) {\n          minResolution = maxResolution / Math.pow(zoomFactor, maxZoom);\n        } else {\n          minResolution = defaultMaxResolution / Math.pow(zoomFactor, maxZoom);\n        }\n      } else {\n        minResolution = defaultMinResolution;\n      }\n    }\n\n    // given discrete zoom levels, minResolution may be different than provided\n    maxZoom = minZoom + Math.floor(\n      Math.log(maxResolution / minResolution) / Math.log(zoomFactor));\n    minResolution = maxResolution / Math.pow(zoomFactor, maxZoom - minZoom);\n\n    resolutionConstraint = createSnapToPower(\n      zoomFactor, maxResolution, maxZoom - minZoom);\n  }\n  return {constraint: resolutionConstraint, maxResolution: maxResolution,\n    minResolution: minResolution, minZoom: minZoom, zoomFactor: zoomFactor};\n}\n\n\n/**\n * @param {ViewOptions} options View options.\n * @return {import(\"./rotationconstraint.js\").Type} Rotation constraint.\n */\nexport function createRotationConstraint(options) {\n  const enableRotation = options.enableRotation !== undefined ?\n    options.enableRotation : true;\n  if (enableRotation) {\n    const constrainRotation = options.constrainRotation;\n    if (constrainRotation === undefined || constrainRotation === true) {\n      return createSnapToZero();\n    } else if (constrainRotation === false) {\n      return rotationNone;\n    } else if (typeof constrainRotation === 'number') {\n      return createSnapToN(constrainRotation);\n    } else {\n      return rotationNone;\n    }\n  } else {\n    return disable;\n  }\n}\n\n\n/**\n * Determine if an animation involves no view change.\n * @param {Animation} animation The animation.\n * @return {boolean} The animation involves no view change.\n */\nexport function isNoopAnimation(animation) {\n  if (animation.sourceCenter && animation.targetCenter) {\n    if (!coordinatesEqual(animation.sourceCenter, animation.targetCenter)) {\n      return false;\n    }\n  }\n  if (animation.sourceResolution !== animation.targetResolution) {\n    return false;\n  }\n  if (animation.sourceRotation !== animation.targetRotation) {\n    return false;\n  }\n  return true;\n}\n\nexport default View;\n","/**\n * @module ol/resolutionconstraint\n */\nimport {linearFindNearest} from './array.js';\nimport {clamp} from './math.js';\n\n\n/**\n * @typedef {function((number|undefined), number, number): (number|undefined)} Type\n */\n\n\n/**\n * @param {Array<number>} resolutions Resolutions.\n * @return {Type} Zoom function.\n */\nexport function createSnapToResolutions(resolutions) {\n  return (\n    /**\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} delta Delta.\n     * @param {number} direction Direction.\n     * @return {number|undefined} Resolution.\n     */\n    function(resolution, delta, direction) {\n      if (resolution !== undefined) {\n        let z = linearFindNearest(resolutions, resolution, direction);\n        z = clamp(z + delta, 0, resolutions.length - 1);\n        const index = Math.floor(z);\n        if (z != index && index < resolutions.length - 1) {\n          const power = resolutions[index] / resolutions[index + 1];\n          return resolutions[index] / Math.pow(power, z - index);\n        } else {\n          return resolutions[index];\n        }\n      } else {\n        return undefined;\n      }\n    }\n  );\n}\n\n\n/**\n * @param {number} power Power.\n * @param {number} maxResolution Maximum resolution.\n * @param {number=} opt_maxLevel Maximum level.\n * @return {Type} Zoom function.\n */\nexport function createSnapToPower(power, maxResolution, opt_maxLevel) {\n  return (\n    /**\n     * @param {number|undefined} resolution Resolution.\n     * @param {number} delta Delta.\n     * @param {number} direction Direction.\n     * @return {number|undefined} Resolution.\n     */\n    function(resolution, delta, direction) {\n      if (resolution !== undefined) {\n        const offset = -direction / 2 + 0.5;\n        const oldLevel = Math.floor(\n          Math.log(maxResolution / resolution) / Math.log(power) + offset);\n        let newLevel = Math.max(oldLevel + delta, 0);\n        if (opt_maxLevel !== undefined) {\n          newLevel = Math.min(newLevel, opt_maxLevel);\n        }\n        return maxResolution / Math.pow(power, newLevel);\n      } else {\n        return undefined;\n      }\n    });\n}\n","/**\n * @module ol/style/Style\n */\n\n/**\n * Feature styles.\n *\n * If no style is defined, the following default style is used:\n * ```js\n *  import {Fill, Stroke, Circle, Style} from 'ol/style';\n *\n *  var fill = new Fill({\n *    color: 'rgba(255,255,255,0.4)'\n *  });\n *  var stroke = new Stroke({\n *    color: '#3399CC',\n *    width: 1.25\n *  });\n *  var styles = [\n *    new Style({\n *      image: new Circle({\n *        fill: fill,\n *        stroke: stroke,\n *        radius: 5\n *      }),\n *      fill: fill,\n *      stroke: stroke\n *    })\n *  ];\n * ```\n *\n * A separate editing style has the following defaults:\n * ```js\n *  import {Fill, Stroke, Circle, Style} from 'ol/style';\n *  import GeometryType from 'ol/geom/GeometryType';\n *\n *  var white = [255, 255, 255, 1];\n *  var blue = [0, 153, 255, 1];\n *  var width = 3;\n *  styles[GeometryType.POLYGON] = [\n *    new Style({\n *      fill: new Fill({\n *        color: [255, 255, 255, 0.5]\n *      })\n *    })\n *  ];\n *  styles[GeometryType.MULTI_POLYGON] =\n *      styles[GeometryType.POLYGON];\n *  styles[GeometryType.LINE_STRING] = [\n *    new Style({\n *      stroke: new Stroke({\n *        color: white,\n *        width: width + 2\n *      })\n *    }),\n *    new Style({\n *      stroke: new Stroke({\n *        color: blue,\n *        width: width\n *      })\n *    })\n *  ];\n *  styles[GeometryType.MULTI_LINE_STRING] =\n *      styles[GeometryType.LINE_STRING];\n *  styles[GeometryType.POINT] = [\n *    new Style({\n *      image: new Circle({\n *        radius: width * 2,\n *        fill: new Fill({\n *          color: blue\n *        }),\n *        stroke: new Stroke({\n *          color: white,\n *          width: width / 2\n *        })\n *      }),\n *      zIndex: Infinity\n *    })\n *  ];\n *  styles[GeometryType.MULTI_POINT] =\n *      styles[GeometryType.POINT];\n *  styles[GeometryType.GEOMETRY_COLLECTION] =\n *      styles[GeometryType.POLYGON].concat(\n *          styles[GeometryType.LINE_STRING],\n *          styles[GeometryType.POINT]\n *      );\n * ```\n */\nimport {assert} from '../asserts.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport CircleStyle from './Circle.js';\nimport Fill from './Fill.js';\nimport Stroke from './Stroke.js';\n\n\n/**\n * A function that takes an {@link module:ol/Feature} and a `{number}`\n * representing the view's resolution. The function should return a\n * {@link module:ol/style/Style} or an array of them. This way e.g. a\n * vector layer can be styled.\n *\n * @typedef {function(import(\"../Feature.js\").FeatureLike, number):(Style|Array<Style>)} StyleFunction\n */\n\n/**\n * A {@link Style}, an array of {@link Style}, or a {@link StyleFunction}.\n * @typedef {Style|Array<Style>|StyleFunction} StyleLike\n */\n\n/**\n * A function that takes an {@link module:ol/Feature} as argument and returns an\n * {@link module:ol/geom/Geometry} that will be rendered and styled for the feature.\n *\n * @typedef {function(import(\"../Feature.js\").FeatureLike):\n *     (import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default|undefined)} GeometryFunction\n */\n\n\n/**\n * Custom renderer function. Takes two arguments:\n *\n * 1. The pixel coordinates of the geometry in GeoJSON notation.\n * 2. The {@link module:ol/render~State} of the layer renderer.\n *\n * @typedef {function((import(\"../coordinate.js\").Coordinate|Array<import(\"../coordinate.js\").Coordinate>|Array<Array<import(\"../coordinate.js\").Coordinate>>),import(\"../render.js\").State)}\n * RenderFunction\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {string|import(\"../geom/Geometry.js\").default|GeometryFunction} [geometry] Feature property or geometry\n * or function returning a geometry to render for this style.\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {import(\"./Image.js\").default} [image] Image style.\n * @property {RenderFunction} [renderer] Custom renderer. When configured, `fill`, `stroke` and `image` will be\n * ignored, and the provided function will be called with each render frame for each geometry.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {import(\"./Text.js\").default} [text] Text style.\n * @property {number} [zIndex] Z index.\n */\n\n/**\n * @classdesc\n * Container for vector feature rendering styles. Any changes made to the style\n * or its children through `set*()` methods will not take effect until the\n * feature or layer that uses the style is re-rendered.\n * @api\n */\nclass Style {\n  /**\n   * @param {Options=} opt_options Style options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n\n    /**\n     * @private\n     * @type {string|import(\"../geom/Geometry.js\").default|GeometryFunction}\n     */\n    this.geometry_ = null;\n\n    /**\n     * @private\n     * @type {!GeometryFunction}\n     */\n    this.geometryFunction_ = defaultGeometryFunction;\n\n    if (options.geometry !== undefined) {\n      this.setGeometry(options.geometry);\n    }\n\n    /**\n     * @private\n     * @type {import(\"./Fill.js\").default}\n     */\n    this.fill_ = options.fill !== undefined ? options.fill : null;\n\n    /**\n       * @private\n       * @type {import(\"./Image.js\").default}\n       */\n    this.image_ = options.image !== undefined ? options.image : null;\n\n    /**\n     * @private\n     * @type {RenderFunction|null}\n     */\n    this.renderer_ = options.renderer !== undefined ? options.renderer : null;\n\n    /**\n     * @private\n     * @type {import(\"./Stroke.js\").default}\n     */\n    this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n\n    /**\n     * @private\n     * @type {import(\"./Text.js\").default}\n     */\n    this.text_ = options.text !== undefined ? options.text : null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.zIndex_ = options.zIndex;\n\n  }\n\n  /**\n   * Clones the style.\n   * @return {Style} The cloned style.\n   * @api\n   */\n  clone() {\n    let geometry = this.getGeometry();\n    if (geometry && typeof geometry === 'object') {\n      geometry = /** @type {import(\"../geom/Geometry.js\").default} */ (geometry).clone();\n    }\n    return new Style({\n      geometry: geometry,\n      fill: this.getFill() ? this.getFill().clone() : undefined,\n      image: this.getImage() ? this.getImage().clone() : undefined,\n      stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n      text: this.getText() ? this.getText().clone() : undefined,\n      zIndex: this.getZIndex()\n    });\n  }\n\n  /**\n   * Get the custom renderer function that was configured with\n   * {@link #setRenderer} or the `renderer` constructor option.\n   * @return {RenderFunction|null} Custom renderer function.\n   * @api\n   */\n  getRenderer() {\n    return this.renderer_;\n  }\n\n  /**\n   * Sets a custom renderer function for this style. When set, `fill`, `stroke`\n   * and `image` options of the style will be ignored.\n   * @param {RenderFunction|null} renderer Custom renderer function.\n   * @api\n   */\n  setRenderer(renderer) {\n    this.renderer_ = renderer;\n  }\n\n  /**\n   * Get the geometry to be rendered.\n   * @return {string|import(\"../geom/Geometry.js\").default|GeometryFunction}\n   * Feature property or geometry or function that returns the geometry that will\n   * be rendered with this style.\n   * @api\n   */\n  getGeometry() {\n    return this.geometry_;\n  }\n\n  /**\n   * Get the function used to generate a geometry for rendering.\n   * @return {!GeometryFunction} Function that is called with a feature\n   * and returns the geometry to render instead of the feature's geometry.\n   * @api\n   */\n  getGeometryFunction() {\n    return this.geometryFunction_;\n  }\n\n  /**\n   * Get the fill style.\n   * @return {import(\"./Fill.js\").default} Fill style.\n   * @api\n   */\n  getFill() {\n    return this.fill_;\n  }\n\n  /**\n   * Set the fill style.\n   * @param {import(\"./Fill.js\").default} fill Fill style.\n   * @api\n   */\n  setFill(fill) {\n    this.fill_ = fill;\n  }\n\n  /**\n   * Get the image style.\n   * @return {import(\"./Image.js\").default} Image style.\n   * @api\n   */\n  getImage() {\n    return this.image_;\n  }\n\n  /**\n   * Set the image style.\n   * @param {import(\"./Image.js\").default} image Image style.\n   * @api\n   */\n  setImage(image) {\n    this.image_ = image;\n  }\n\n  /**\n   * Get the stroke style.\n   * @return {import(\"./Stroke.js\").default} Stroke style.\n   * @api\n   */\n  getStroke() {\n    return this.stroke_;\n  }\n\n  /**\n   * Set the stroke style.\n   * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n   * @api\n   */\n  setStroke(stroke) {\n    this.stroke_ = stroke;\n  }\n\n  /**\n   * Get the text style.\n   * @return {import(\"./Text.js\").default} Text style.\n   * @api\n   */\n  getText() {\n    return this.text_;\n  }\n\n  /**\n   * Set the text style.\n   * @param {import(\"./Text.js\").default} text Text style.\n   * @api\n   */\n  setText(text) {\n    this.text_ = text;\n  }\n\n  /**\n   * Get the z-index for the style.\n   * @return {number|undefined} ZIndex.\n   * @api\n   */\n  getZIndex() {\n    return this.zIndex_;\n  }\n\n  /**\n   * Set a geometry that is rendered instead of the feature's geometry.\n   *\n   * @param {string|import(\"../geom/Geometry.js\").default|GeometryFunction} geometry\n   *     Feature property or geometry or function returning a geometry to render\n   *     for this style.\n   * @api\n   */\n  setGeometry(geometry) {\n    if (typeof geometry === 'function') {\n      this.geometryFunction_ = geometry;\n    } else if (typeof geometry === 'string') {\n      this.geometryFunction_ = function(feature) {\n        return (\n          /** @type {import(\"../geom/Geometry.js\").default} */ (feature.get(geometry))\n        );\n      };\n    } else if (!geometry) {\n      this.geometryFunction_ = defaultGeometryFunction;\n    } else if (geometry !== undefined) {\n      this.geometryFunction_ = function() {\n        return (\n          /** @type {import(\"../geom/Geometry.js\").default} */ (geometry)\n        );\n      };\n    }\n    this.geometry_ = geometry;\n  }\n\n  /**\n   * Set the z-index.\n   *\n   * @param {number|undefined} zIndex ZIndex.\n   * @api\n   */\n  setZIndex(zIndex) {\n    this.zIndex_ = zIndex;\n  }\n}\n\n\n/**\n * Convert the provided object into a style function.  Functions passed through\n * unchanged.  Arrays of Style or single style objects wrapped in a\n * new style function.\n * @param {StyleFunction|Array<Style>|Style} obj\n *     A style function, a single style, or an array of styles.\n * @return {StyleFunction} A style function.\n */\nexport function toFunction(obj) {\n  let styleFunction;\n\n  if (typeof obj === 'function') {\n    styleFunction = obj;\n  } else {\n    /**\n     * @type {Array<Style>}\n     */\n    let styles;\n    if (Array.isArray(obj)) {\n      styles = obj;\n    } else {\n      assert(typeof /** @type {?} */ (obj).getZIndex === 'function',\n        41); // Expected an `Style` or an array of `Style`\n      const style = /** @type {Style} */ (obj);\n      styles = [style];\n    }\n    styleFunction = function() {\n      return styles;\n    };\n  }\n  return styleFunction;\n}\n\n\n/**\n * @type {Array<Style>}\n */\nlet defaultStyles = null;\n\n\n/**\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {number} resolution Resolution.\n * @return {Array<Style>} Style.\n */\nexport function createDefaultStyle(feature, resolution) {\n  // We don't use an immediately-invoked function\n  // and a closure so we don't get an error at script evaluation time in\n  // browsers that do not support Canvas. (import(\"./Circle.js\").CircleStyle does\n  // canvas.getContext('2d') at construction time, which will cause an.error\n  // in such browsers.)\n  if (!defaultStyles) {\n    const fill = new Fill({\n      color: 'rgba(255,255,255,0.4)'\n    });\n    const stroke = new Stroke({\n      color: '#3399CC',\n      width: 1.25\n    });\n    defaultStyles = [\n      new Style({\n        image: new CircleStyle({\n          fill: fill,\n          stroke: stroke,\n          radius: 5\n        }),\n        fill: fill,\n        stroke: stroke\n      })\n    ];\n  }\n  return defaultStyles;\n}\n\n\n/**\n * Default styles for editing features.\n * @return {Object<import(\"../geom/GeometryType.js\").default, Array<Style>>} Styles\n */\nexport function createEditingStyle() {\n  /** @type {Object<import(\"../geom/GeometryType.js\").default, Array<Style>>} */\n  const styles = {};\n  const white = [255, 255, 255, 1];\n  const blue = [0, 153, 255, 1];\n  const width = 3;\n  styles[GeometryType.POLYGON] = [\n    new Style({\n      fill: new Fill({\n        color: [255, 255, 255, 0.5]\n      })\n    })\n  ];\n  styles[GeometryType.MULTI_POLYGON] =\n      styles[GeometryType.POLYGON];\n\n  styles[GeometryType.LINE_STRING] = [\n    new Style({\n      stroke: new Stroke({\n        color: white,\n        width: width + 2\n      })\n    }),\n    new Style({\n      stroke: new Stroke({\n        color: blue,\n        width: width\n      })\n    })\n  ];\n  styles[GeometryType.MULTI_LINE_STRING] =\n      styles[GeometryType.LINE_STRING];\n\n  styles[GeometryType.CIRCLE] =\n      styles[GeometryType.POLYGON].concat(\n        styles[GeometryType.LINE_STRING]\n      );\n\n\n  styles[GeometryType.POINT] = [\n    new Style({\n      image: new CircleStyle({\n        radius: width * 2,\n        fill: new Fill({\n          color: blue\n        }),\n        stroke: new Stroke({\n          color: white,\n          width: width / 2\n        })\n      }),\n      zIndex: Infinity\n    })\n  ];\n  styles[GeometryType.MULTI_POINT] =\n      styles[GeometryType.POINT];\n\n  styles[GeometryType.GEOMETRY_COLLECTION] =\n      styles[GeometryType.POLYGON].concat(\n        styles[GeometryType.LINE_STRING],\n        styles[GeometryType.POINT]\n      );\n\n  return styles;\n}\n\n\n/**\n * Function that is called with a feature and returns its default geometry.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature to get the geometry for.\n * @return {import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default|undefined} Geometry to render.\n */\nfunction defaultGeometryFunction(feature) {\n  return feature.getGeometry();\n}\n\nexport default Style;\n","/**\n * @module ol/ViewHint\n */\n\n/**\n * @enum {number}\n */\nexport default {\n  ANIMATING: 0,\n  INTERACTING: 1\n};\n","/**\n * @module ol/style/Stroke\n */\nimport {getUid} from '../util.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [color] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n * @property {string} [lineCap='round'] Line cap style: `butt`, `round`, or `square`.\n * @property {string} [lineJoin='round'] Line join style: `bevel`, `round`, or `miter`.\n * @property {Array<number>} [lineDash] Line dash pattern. Default is `undefined` (no dash).\n * Please note that Internet Explorer 10 and lower do not support the `setLineDash` method on\n * the `CanvasRenderingContext2D` and therefore this option will have no visual effect in these browsers.\n * @property {number} [lineDashOffset=0] Line dash offset.\n * @property {number} [miterLimit=10] Miter limit.\n * @property {number} [width] Width.\n */\n\n\n/**\n * @classdesc\n * Set stroke style for vector features.\n * Note that the defaults given are the Canvas defaults, which will be used if\n * option is not defined. The `get` functions return whatever was entered in\n * the options; they will not return the default.\n * @api\n */\nclass Stroke {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike}\n     */\n    this.color_ = options.color !== undefined ? options.color : null;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.lineCap_ = options.lineCap;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.lineDash_ = options.lineDash !== undefined ? options.lineDash : null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.lineDashOffset_ = options.lineDashOffset;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.lineJoin_ = options.lineJoin;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.miterLimit_ = options.miterLimit;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.width_ = options.width;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * Clones the style.\n   * @return {Stroke} The cloned style.\n   * @api\n   */\n  clone() {\n    const color = this.getColor();\n    return new Stroke({\n      color: Array.isArray(color) ? color.slice() : color || undefined,\n      lineCap: this.getLineCap(),\n      lineDash: this.getLineDash() ? this.getLineDash().slice() : undefined,\n      lineDashOffset: this.getLineDashOffset(),\n      lineJoin: this.getLineJoin(),\n      miterLimit: this.getMiterLimit(),\n      width: this.getWidth()\n    });\n  }\n\n  /**\n   * Get the stroke color.\n   * @return {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} Color.\n   * @api\n   */\n  getColor() {\n    return this.color_;\n  }\n\n  /**\n   * Get the line cap type for the stroke.\n   * @return {string|undefined} Line cap.\n   * @api\n   */\n  getLineCap() {\n    return this.lineCap_;\n  }\n\n  /**\n   * Get the line dash style for the stroke.\n   * @return {Array<number>} Line dash.\n   * @api\n   */\n  getLineDash() {\n    return this.lineDash_;\n  }\n\n  /**\n   * Get the line dash offset for the stroke.\n   * @return {number|undefined} Line dash offset.\n   * @api\n   */\n  getLineDashOffset() {\n    return this.lineDashOffset_;\n  }\n\n  /**\n   * Get the line join type for the stroke.\n   * @return {string|undefined} Line join.\n   * @api\n   */\n  getLineJoin() {\n    return this.lineJoin_;\n  }\n\n  /**\n   * Get the miter limit for the stroke.\n   * @return {number|undefined} Miter limit.\n   * @api\n   */\n  getMiterLimit() {\n    return this.miterLimit_;\n  }\n\n  /**\n   * Get the stroke width.\n   * @return {number|undefined} Width.\n   * @api\n   */\n  getWidth() {\n    return this.width_;\n  }\n\n  /**\n   * Set the color.\n   *\n   * @param {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} color Color.\n   * @api\n   */\n  setColor(color) {\n    this.color_ = color;\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * Set the line cap.\n   *\n   * @param {string|undefined} lineCap Line cap.\n   * @api\n   */\n  setLineCap(lineCap) {\n    this.lineCap_ = lineCap;\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * Set the line dash.\n   *\n   * Please note that Internet Explorer 10 and lower [do not support][mdn] the\n   * `setLineDash` method on the `CanvasRenderingContext2D` and therefore this\n   * property will have no visual effect in these browsers.\n   *\n   * [mdn]: https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/setLineDash#Browser_compatibility\n   *\n   * @param {Array<number>} lineDash Line dash.\n   * @api\n   */\n  setLineDash(lineDash) {\n    this.lineDash_ = lineDash;\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * Set the line dash offset.\n   *\n   * @param {number|undefined} lineDashOffset Line dash offset.\n   * @api\n   */\n  setLineDashOffset(lineDashOffset) {\n    this.lineDashOffset_ = lineDashOffset;\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * Set the line join.\n   *\n   * @param {string|undefined} lineJoin Line join.\n   * @api\n   */\n  setLineJoin(lineJoin) {\n    this.lineJoin_ = lineJoin;\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * Set the miter limit.\n   *\n   * @param {number|undefined} miterLimit Miter limit.\n   * @api\n   */\n  setMiterLimit(miterLimit) {\n    this.miterLimit_ = miterLimit;\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * Set the width.\n   *\n   * @param {number|undefined} width Width.\n   * @api\n   */\n  setWidth(width) {\n    this.width_ = width;\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * @return {string} The checksum.\n   */\n  getChecksum() {\n    if (this.checksum_ === undefined) {\n      this.checksum_ = 's';\n      if (this.color_) {\n        if (typeof this.color_ === 'string') {\n          this.checksum_ += this.color_;\n        } else {\n          this.checksum_ += getUid(this.color_);\n        }\n      } else {\n        this.checksum_ += '-';\n      }\n      this.checksum_ += ',' +\n          (this.lineCap_ !== undefined ?\n            this.lineCap_.toString() : '-') + ',' +\n          (this.lineDash_ ?\n            this.lineDash_.toString() : '-') + ',' +\n          (this.lineDashOffset_ !== undefined ?\n            this.lineDashOffset_ : '-') + ',' +\n          (this.lineJoin_ !== undefined ?\n            this.lineJoin_ : '-') + ',' +\n          (this.miterLimit_ !== undefined ?\n            this.miterLimit_.toString() : '-') + ',' +\n          (this.width_ !== undefined ?\n            this.width_.toString() : '-');\n    }\n\n    return this.checksum_;\n  }\n}\n\nexport default Stroke;\n","/**\n * @module ol/source/OSM\n */\n\nimport XYZ from './XYZ.js';\n\n\n/**\n * The attribution containing a link to the OpenStreetMap Copyright and License\n * page.\n * @const\n * @type {string}\n * @api\n */\nexport const ATTRIBUTION = '&#169; ' +\n      '<a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> ' +\n      'contributors.';\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {number} [cacheSize=2048] Cache size.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you are using the WebGL renderer or if you want to\n * access pixel data with the Canvas renderer.  See\n * https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {number} [maxZoom=19] Max zoom.\n * @property {boolean} [opaque=true] Whether the layer is opaque.\n * @property {number} [reprojectionErrorThreshold=1.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {string} [url='https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png'] URL template.\n * Must include `{x}`, `{y}` or `{-y}`, and `{z}` placeholders.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n */\n\n\n/**\n * @classdesc\n * Layer source for the OpenStreetMap tile server.\n * @api\n */\nclass OSM extends XYZ {\n  /**\n   * @param {Options=} [opt_options] Open Street Map options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n\n    let attributions;\n    if (options.attributions !== undefined) {\n      attributions = options.attributions;\n    } else {\n      attributions = [ATTRIBUTION];\n    }\n\n    const crossOrigin = options.crossOrigin !== undefined ?\n      options.crossOrigin : 'anonymous';\n\n    const url = options.url !== undefined ?\n      options.url : 'https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png';\n\n    super({\n      attributions: attributions,\n      cacheSize: options.cacheSize,\n      crossOrigin: crossOrigin,\n      opaque: options.opaque !== undefined ? options.opaque : true,\n      maxZoom: options.maxZoom !== undefined ? options.maxZoom : 19,\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      tileLoadFunction: options.tileLoadFunction,\n      url: url,\n      wrapX: options.wrapX,\n      attributionsCollapsible: false\n    });\n\n  }\n\n}\n\nexport default OSM;\n","/**\n * @module ol/MapEvent\n */\nimport Event from './events/Event.js';\n\n/**\n * @classdesc\n * Events emitted as map events are instances of this type.\n * See {@link module:ol/PluggableMap~PluggableMap} for which events trigger a map event.\n */\nclass MapEvent extends Event {\n\n  /**\n   * @param {string} type Event type.\n   * @param {import(\"./PluggableMap.js\").default} map Map.\n   * @param {?import(\"./PluggableMap.js\").FrameState=} opt_frameState Frame state.\n   */\n  constructor(type, map, opt_frameState) {\n\n    super(type);\n\n    /**\n     * The map where the event occurred.\n     * @type {import(\"./PluggableMap.js\").default}\n     * @api\n     */\n    this.map = map;\n\n    /**\n     * The frame state at the time of the event.\n     * @type {?import(\"./PluggableMap.js\").FrameState}\n     * @api\n     */\n    this.frameState = opt_frameState !== undefined ? opt_frameState : null;\n\n  }\n\n}\n\nexport default MapEvent;\n","/**\n * @module ol/MapBrowserEvent\n */\nimport MapEvent from './MapEvent.js';\n\n/**\n * @classdesc\n * Events emitted as map browser events are instances of this type.\n * See {@link module:ol/PluggableMap~PluggableMap} for which events trigger a map browser event.\n */\nclass MapBrowserEvent extends MapEvent {\n\n  /**\n   * @param {string} type Event type.\n   * @param {import(\"./PluggableMap.js\").default} map Map.\n   * @param {Event} browserEvent Browser event.\n   * @param {boolean=} opt_dragging Is the map currently being dragged?\n   * @param {?import(\"./PluggableMap.js\").FrameState=} opt_frameState Frame state.\n   */\n  constructor(type, map, browserEvent, opt_dragging, opt_frameState) {\n\n    super(type, map, opt_frameState);\n\n    /**\n     * The original browser event.\n     * @const\n     * @type {Event}\n     * @api\n     */\n    this.originalEvent = browserEvent;\n\n    /**\n     * The map pixel relative to the viewport corresponding to the original browser event.\n     * @type {import(\"./pixel.js\").Pixel}\n     * @api\n     */\n    this.pixel = map.getEventPixel(browserEvent);\n\n    /**\n     * The coordinate in view projection corresponding to the original browser event.\n     * @type {import(\"./coordinate.js\").Coordinate}\n     * @api\n     */\n    this.coordinate = map.getCoordinateFromPixel(this.pixel);\n\n    /**\n     * Indicates if the map is currently being dragged. Only set for\n     * `POINTERDRAG` and `POINTERMOVE` events. Default is `false`.\n     *\n     * @type {boolean}\n     * @api\n     */\n    this.dragging = opt_dragging !== undefined ? opt_dragging : false;\n\n  }\n\n  /**\n   * Prevents the default browser action.\n   * See https://developer.mozilla.org/en-US/docs/Web/API/event.preventDefault.\n   * @override\n   * @api\n   */\n  preventDefault() {\n    super.preventDefault();\n    this.originalEvent.preventDefault();\n  }\n\n  /**\n   * Prevents further propagation of the current event.\n   * See https://developer.mozilla.org/en-US/docs/Web/API/event.stopPropagation.\n   * @override\n   * @api\n   */\n  stopPropagation() {\n    super.stopPropagation();\n    this.originalEvent.stopPropagation();\n  }\n}\n\n\nexport default MapBrowserEvent;\n","/**\n * @module ol/MapBrowserPointerEvent\n */\nimport MapBrowserEvent from './MapBrowserEvent.js';\n\nclass MapBrowserPointerEvent extends MapBrowserEvent {\n\n  /**\n   * @param {string} type Event type.\n   * @param {import(\"./PluggableMap.js\").default} map Map.\n   * @param {import(\"./pointer/PointerEvent.js\").default} pointerEvent Pointer event.\n   * @param {boolean=} opt_dragging Is the map currently being dragged?\n   * @param {?import(\"./PluggableMap.js\").FrameState=} opt_frameState Frame state.\n   */\n  constructor(type, map, pointerEvent, opt_dragging, opt_frameState) {\n\n    super(type, map, pointerEvent.originalEvent, opt_dragging, opt_frameState);\n\n    /**\n     * @const\n     * @type {import(\"./pointer/PointerEvent.js\").default}\n     */\n    this.pointerEvent = pointerEvent;\n\n  }\n\n}\n\nexport default MapBrowserPointerEvent;\n","/**\n * @module ol/pointer/EventType\n */\n\n/**\n * Constants for event names.\n * @enum {string}\n */\nexport default {\n  POINTERMOVE: 'pointermove',\n  POINTERDOWN: 'pointerdown',\n  POINTERUP: 'pointerup',\n  POINTEROVER: 'pointerover',\n  POINTEROUT: 'pointerout',\n  POINTERENTER: 'pointerenter',\n  POINTERLEAVE: 'pointerleave',\n  POINTERCANCEL: 'pointercancel'\n};\n","/**\n * @module ol/pointer/EventSource\n */\n\nclass EventSource {\n\n  /**\n   * @param {import(\"./PointerEventHandler.js\").default} dispatcher Event handler.\n   * @param {!Object<string, function(Event)>} mapping Event mapping.\n   */\n  constructor(dispatcher, mapping) {\n\n    /**\n     * @type {import(\"./PointerEventHandler.js\").default}\n     */\n    this.dispatcher = dispatcher;\n\n    /**\n     * @private\n     * @const\n     * @type {!Object<string, function(Event)>}\n     */\n    this.mapping_ = mapping;\n  }\n\n  /**\n   * List of events supported by this source.\n   * @return {Array<string>} Event names\n   */\n  getEvents() {\n    return Object.keys(this.mapping_);\n  }\n\n  /**\n   * Returns the handler that should handle a given event type.\n   * @param {string} eventType The event type.\n   * @return {function(Event)} Handler\n   */\n  getHandlerForEvent(eventType) {\n    return this.mapping_[eventType];\n  }\n\n}\n\nexport default EventSource;\n","/**\n * @module ol/pointer/MouseSource\n */\n\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport EventSource from './EventSource.js';\n\n\n/**\n * @type {number}\n */\nexport const POINTER_ID = 1;\n\n\n/**\n * @type {string}\n */\nexport const POINTER_TYPE = 'mouse';\n\n\n/**\n * Radius around touchend that swallows mouse events.\n *\n * @type {number}\n */\nconst DEDUP_DIST = 25;\n\n/**\n * Handler for `mousedown`.\n *\n * @this {MouseSource}\n * @param {MouseEvent} inEvent The in event.\n */\nfunction mousedown(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    // TODO(dfreedman) workaround for some elements not sending mouseup\n    // http://crbug/149091\n    if (POINTER_ID.toString() in this.pointerMap) {\n      this.cancel(inEvent);\n    }\n    const e = prepareEvent(inEvent, this.dispatcher);\n    this.pointerMap[POINTER_ID.toString()] = inEvent;\n    this.dispatcher.down(e, inEvent);\n  }\n}\n\n/**\n * Handler for `mousemove`.\n *\n * @this {MouseSource}\n * @param {MouseEvent} inEvent The in event.\n */\nfunction mousemove(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    const e = prepareEvent(inEvent, this.dispatcher);\n    this.dispatcher.move(e, inEvent);\n  }\n}\n\n/**\n * Handler for `mouseup`.\n *\n * @this {MouseSource}\n * @param {MouseEvent} inEvent The in event.\n */\nfunction mouseup(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    const p = this.pointerMap[POINTER_ID.toString()];\n\n    if (p && p.button === inEvent.button) {\n      const e = prepareEvent(inEvent, this.dispatcher);\n      this.dispatcher.up(e, inEvent);\n      this.cleanupMouse();\n    }\n  }\n}\n\n/**\n * Handler for `mouseover`.\n *\n * @this {MouseSource}\n * @param {MouseEvent} inEvent The in event.\n */\nfunction mouseover(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    const e = prepareEvent(inEvent, this.dispatcher);\n    this.dispatcher.enterOver(e, inEvent);\n  }\n}\n\n/**\n * Handler for `mouseout`.\n *\n * @this {MouseSource}\n * @param {MouseEvent} inEvent The in event.\n */\nfunction mouseout(inEvent) {\n  if (!this.isEventSimulatedFromTouch_(inEvent)) {\n    const e = prepareEvent(inEvent, this.dispatcher);\n    this.dispatcher.leaveOut(e, inEvent);\n  }\n}\n\n\nclass MouseSource extends EventSource {\n\n  /**\n   * @param {import(\"./PointerEventHandler.js\").default} dispatcher Event handler.\n   */\n  constructor(dispatcher) {\n    const mapping = {\n      'mousedown': mousedown,\n      'mousemove': mousemove,\n      'mouseup': mouseup,\n      'mouseover': mouseover,\n      'mouseout': mouseout\n    };\n    super(dispatcher, mapping);\n\n    /**\n     * @const\n     * @type {!Object<string, Event|Object>}\n     */\n    this.pointerMap = dispatcher.pointerMap;\n\n    /**\n     * @const\n     * @type {Array<import(\"../pixel.js\").Pixel>}\n     */\n    this.lastTouches = [];\n  }\n\n  /**\n   * Detect if a mouse event was simulated from a touch by\n   * checking if previously there was a touch event at the\n   * same position.\n   *\n   * FIXME - Known problem with the native Android browser on\n   * Samsung GT-I9100 (Android 4.1.2):\n   * In case the page is scrolled, this function does not work\n   * correctly when a canvas is used (WebGL or canvas renderer).\n   * Mouse listeners on canvas elements (for this browser), create\n   * two mouse events: One 'good' and one 'bad' one (on other browsers or\n   * when a div is used, there is only one event). For the 'bad' one,\n   * clientX/clientY and also pageX/pageY are wrong when the page\n   * is scrolled. Because of that, this function can not detect if\n   * the events were simulated from a touch event. As result, a\n   * pointer event at a wrong position is dispatched, which confuses\n   * the map interactions.\n   * It is unclear, how one can get the correct position for the event\n   * or detect that the positions are invalid.\n   *\n   * @private\n   * @param {MouseEvent} inEvent The in event.\n   * @return {boolean} True, if the event was generated by a touch.\n   */\n  isEventSimulatedFromTouch_(inEvent) {\n    const lts = this.lastTouches;\n    const x = inEvent.clientX;\n    const y = inEvent.clientY;\n    for (let i = 0, l = lts.length, t; i < l && (t = lts[i]); i++) {\n      // simulated mouse events will be swallowed near a primary touchend\n      const dx = Math.abs(x - t[0]);\n      const dy = Math.abs(y - t[1]);\n      if (dx <= DEDUP_DIST && dy <= DEDUP_DIST) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Dispatches a `pointercancel` event.\n   *\n   * @param {Event} inEvent The in event.\n   */\n  cancel(inEvent) {\n    const e = prepareEvent(inEvent, this.dispatcher);\n    this.dispatcher.cancel(e, inEvent);\n    this.cleanupMouse();\n  }\n\n  /**\n   * Remove the mouse from the list of active pointers.\n   */\n  cleanupMouse() {\n    delete this.pointerMap[POINTER_ID.toString()];\n  }\n}\n\n\n/**\n * Creates a copy of the original event that will be used\n * for the fake pointer event.\n *\n * @param {Event} inEvent The in event.\n * @param {import(\"./PointerEventHandler.js\").default} dispatcher Event handler.\n * @return {Object} The copied event.\n */\nexport function prepareEvent(inEvent, dispatcher) {\n  const e = dispatcher.cloneEvent(inEvent, inEvent);\n\n  // forward mouse preventDefault\n  const pd = e.preventDefault;\n  e.preventDefault = function() {\n    inEvent.preventDefault();\n    pd();\n  };\n\n  e.pointerId = POINTER_ID;\n  e.isPrimary = true;\n  e.pointerType = POINTER_TYPE;\n\n  return e;\n}\n\n\nexport default MouseSource;\n","/**\n * @module ol/pointer/MsSource\n */\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport EventSource from './EventSource.js';\n\n\n/**\n * @const\n * @type {Array<string>}\n */\nconst POINTER_TYPES = [\n  '',\n  'unavailable',\n  'touch',\n  'pen',\n  'mouse'\n];\n\n/**\n * Handler for `msPointerDown`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerDown(inEvent) {\n  this.pointerMap[inEvent.pointerId.toString()] = inEvent;\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.down(e, inEvent);\n}\n\n/**\n * Handler for `msPointerMove`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerMove(inEvent) {\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.move(e, inEvent);\n}\n\n/**\n * Handler for `msPointerUp`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerUp(inEvent) {\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.up(e, inEvent);\n  this.cleanup(inEvent.pointerId);\n}\n\n/**\n * Handler for `msPointerOut`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerOut(inEvent) {\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.leaveOut(e, inEvent);\n}\n\n/**\n * Handler for `msPointerOver`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerOver(inEvent) {\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.enterOver(e, inEvent);\n}\n\n/**\n * Handler for `msPointerCancel`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msPointerCancel(inEvent) {\n  const e = this.prepareEvent_(inEvent);\n  this.dispatcher.cancel(e, inEvent);\n  this.cleanup(inEvent.pointerId);\n}\n\n/**\n * Handler for `msLostPointerCapture`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msLostPointerCapture(inEvent) {\n  const e = this.dispatcher.makeEvent('lostpointercapture', inEvent, inEvent);\n  this.dispatcher.dispatchEvent(e);\n}\n\n/**\n * Handler for `msGotPointerCapture`.\n *\n * @this {MsSource}\n * @param {MSPointerEvent} inEvent The in event.\n */\nfunction msGotPointerCapture(inEvent) {\n  const e = this.dispatcher.makeEvent('gotpointercapture', inEvent, inEvent);\n  this.dispatcher.dispatchEvent(e);\n}\n\nclass MsSource extends EventSource {\n\n  /**\n   * @param {import(\"./PointerEventHandler.js\").default} dispatcher Event handler.\n   */\n  constructor(dispatcher) {\n    const mapping = {\n      'MSPointerDown': msPointerDown,\n      'MSPointerMove': msPointerMove,\n      'MSPointerUp': msPointerUp,\n      'MSPointerOut': msPointerOut,\n      'MSPointerOver': msPointerOver,\n      'MSPointerCancel': msPointerCancel,\n      'MSGotPointerCapture': msGotPointerCapture,\n      'MSLostPointerCapture': msLostPointerCapture\n    };\n    super(dispatcher, mapping);\n\n    /**\n     * @const\n     * @type {!Object<string, MSPointerEvent|Object>}\n     */\n    this.pointerMap = dispatcher.pointerMap;\n  }\n\n  /**\n   * Creates a copy of the original event that will be used\n   * for the fake pointer event.\n   *\n   * @private\n   * @param {MSPointerEvent} inEvent The in event.\n   * @return {Object} The copied event.\n   */\n  prepareEvent_(inEvent) {\n    /** @type {MSPointerEvent|Object} */\n    let e = inEvent;\n    if (typeof inEvent.pointerType === 'number') {\n      e = this.dispatcher.cloneEvent(inEvent, inEvent);\n      e.pointerType = POINTER_TYPES[inEvent.pointerType];\n    }\n\n    return e;\n  }\n\n  /**\n   * Remove this pointer from the list of active pointers.\n   * @param {number} pointerId Pointer identifier.\n   */\n  cleanup(pointerId) {\n    delete this.pointerMap[pointerId.toString()];\n  }\n\n}\n\nexport default MsSource;\n","/**\n * @module ol/pointer/NativeSource\n */\n\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport EventSource from './EventSource.js';\n\n/**\n * Handler for `pointerdown`.\n *\n * @this {NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction pointerDown(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\n/**\n * Handler for `pointermove`.\n *\n * @this {NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction pointerMove(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\n/**\n * Handler for `pointerup`.\n *\n * @this {NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction pointerUp(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\n/**\n * Handler for `pointerout`.\n *\n * @this {NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction pointerOut(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\n/**\n * Handler for `pointerover`.\n *\n * @this {NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction pointerOver(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\n/**\n * Handler for `pointercancel`.\n *\n * @this {NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction pointerCancel(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\n/**\n * Handler for `lostpointercapture`.\n *\n * @this {NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction lostPointerCapture(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\n/**\n * Handler for `gotpointercapture`.\n *\n * @this {NativeSource}\n * @param {Event} inEvent The in event.\n */\nfunction gotPointerCapture(inEvent) {\n  this.dispatcher.fireNativeEvent(inEvent);\n}\n\nclass NativeSource extends EventSource {\n\n  /**\n   * @param {import(\"./PointerEventHandler.js\").default} dispatcher Event handler.\n   */\n  constructor(dispatcher) {\n    const mapping = {\n      'pointerdown': pointerDown,\n      'pointermove': pointerMove,\n      'pointerup': pointerUp,\n      'pointerout': pointerOut,\n      'pointerover': pointerOver,\n      'pointercancel': pointerCancel,\n      'gotpointercapture': gotPointerCapture,\n      'lostpointercapture': lostPointerCapture\n    };\n    super(dispatcher, mapping);\n  }\n\n}\n\nexport default NativeSource;\n","/**\n * @module ol/pointer/PointerEvent\n */\n\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport _Event from '../events/Event.js';\n\n\n/**\n * Is the `buttons` property supported?\n * @type {boolean}\n */\nlet HAS_BUTTONS = false;\n\n\nclass PointerEvent extends _Event {\n\n  /**\n   * A class for pointer events.\n   *\n   * This class is used as an abstraction for mouse events,\n   * touch events and even native pointer events.\n   *\n   * @param {string} type The type of the event to create.\n   * @param {Event} originalEvent The event.\n   * @param {Object<string, ?>=} opt_eventDict An optional dictionary of\n   *    initial event properties.\n   */\n  constructor(type, originalEvent, opt_eventDict) {\n    super(type);\n\n    /**\n     * @const\n     * @type {Event}\n     */\n    this.originalEvent = originalEvent;\n\n    const eventDict = opt_eventDict ? opt_eventDict : {};\n\n    /**\n     * @type {number}\n     */\n    this.buttons = getButtons(eventDict);\n\n    /**\n     * @type {number}\n     */\n    this.pressure = getPressure(eventDict, this.buttons);\n\n    // MouseEvent related properties\n\n    /**\n     * @type {boolean}\n     */\n    this.bubbles = 'bubbles' in eventDict ? eventDict['bubbles'] : false;\n\n    /**\n     * @type {boolean}\n     */\n    this.cancelable = 'cancelable' in eventDict ? eventDict['cancelable'] : false;\n\n    /**\n     * @type {Object}\n     */\n    this.view = 'view' in eventDict ? eventDict['view'] : null;\n\n    /**\n     * @type {number}\n     */\n    this.detail = 'detail' in eventDict ? eventDict['detail'] : null;\n\n    /**\n     * @type {number}\n     */\n    this.screenX = 'screenX' in eventDict ? eventDict['screenX'] : 0;\n\n    /**\n     * @type {number}\n     */\n    this.screenY = 'screenY' in eventDict ? eventDict['screenY'] : 0;\n\n    /**\n     * @type {number}\n     */\n    this.clientX = 'clientX' in eventDict ? eventDict['clientX'] : 0;\n\n    /**\n     * @type {number}\n     */\n    this.clientY = 'clientY' in eventDict ? eventDict['clientY'] : 0;\n\n    /**\n     * @type {boolean}\n     */\n    this.ctrlKey = 'ctrlKey' in eventDict ? eventDict['ctrlKey'] : false;\n\n    /**\n     * @type {boolean}\n     */\n    this.altKey = 'altKey' in eventDict ? eventDict['altKey'] : false;\n\n    /**\n     * @type {boolean}\n     */\n    this.shiftKey = 'shiftKey' in eventDict ? eventDict['shiftKey'] : false;\n\n    /**\n     * @type {boolean}\n     */\n    this.metaKey = 'metaKey' in eventDict ? eventDict['metaKey'] : false;\n\n    /**\n     * @type {number}\n     */\n    this.button = 'button' in eventDict ? eventDict['button'] : 0;\n\n    /**\n     * @type {Node}\n     */\n    this.relatedTarget = 'relatedTarget' in eventDict ?\n      eventDict['relatedTarget'] : null;\n\n    // PointerEvent related properties\n\n    /**\n     * @const\n     * @type {number}\n     */\n    this.pointerId = 'pointerId' in eventDict ? eventDict['pointerId'] : 0;\n\n    /**\n     * @type {number}\n     */\n    this.width = 'width' in eventDict ? eventDict['width'] : 0;\n\n    /**\n     * @type {number}\n     */\n    this.height = 'height' in eventDict ? eventDict['height'] : 0;\n\n    /**\n     * @type {number}\n     */\n    this.tiltX = 'tiltX' in eventDict ? eventDict['tiltX'] : 0;\n\n    /**\n     * @type {number}\n     */\n    this.tiltY = 'tiltY' in eventDict ? eventDict['tiltY'] : 0;\n\n    /**\n     * @type {string}\n     */\n    this.pointerType = 'pointerType' in eventDict ? eventDict['pointerType'] : '';\n\n    /**\n     * @type {number}\n     */\n    this.hwTimestamp = 'hwTimestamp' in eventDict ? eventDict['hwTimestamp'] : 0;\n\n    /**\n     * @type {boolean}\n     */\n    this.isPrimary = 'isPrimary' in eventDict ? eventDict['isPrimary'] : false;\n\n    // keep the semantics of preventDefault\n    if (originalEvent.preventDefault) {\n      this.preventDefault = function() {\n        originalEvent.preventDefault();\n      };\n    }\n  }\n\n}\n\n\n/**\n * @param {Object<string, ?>} eventDict The event dictionary.\n * @return {number} Button indicator.\n */\nfunction getButtons(eventDict) {\n  // According to the w3c spec,\n  // http://www.w3.org/TR/DOM-Level-3-Events/#events-MouseEvent-button\n  // MouseEvent.button == 0 can mean either no mouse button depressed, or the\n  // left mouse button depressed.\n  //\n  // As of now, the only way to distinguish between the two states of\n  // MouseEvent.button is by using the deprecated MouseEvent.which property, as\n  // this maps mouse buttons to positive integers > 0, and uses 0 to mean that\n  // no mouse button is held.\n  //\n  // MouseEvent.which is derived from MouseEvent.button at MouseEvent creation,\n  // but initMouseEvent does not expose an argument with which to set\n  // MouseEvent.which. Calling initMouseEvent with a buttonArg of 0 will set\n  // MouseEvent.button == 0 and MouseEvent.which == 1, breaking the expectations\n  // of app developers.\n  //\n  // The only way to propagate the correct state of MouseEvent.which and\n  // MouseEvent.button to a new MouseEvent.button == 0 and MouseEvent.which == 0\n  // is to call initMouseEvent with a buttonArg value of -1.\n  //\n  // This is fixed with DOM Level 4's use of buttons\n  let buttons;\n  if (eventDict.buttons || HAS_BUTTONS) {\n    buttons = eventDict.buttons;\n  } else {\n    switch (eventDict.which) {\n      case 1: buttons = 1; break;\n      case 2: buttons = 4; break;\n      case 3: buttons = 2; break;\n      default: buttons = 0;\n    }\n  }\n  return buttons;\n}\n\n\n/**\n * @param {Object<string, ?>} eventDict The event dictionary.\n * @param {number} buttons Button indicator.\n * @return {number} The pressure.\n */\nfunction getPressure(eventDict, buttons) {\n  // Spec requires that pointers without pressure specified use 0.5 for down\n  // state and 0 for up state.\n  let pressure = 0;\n  if (eventDict.pressure) {\n    pressure = eventDict.pressure;\n  } else {\n    pressure = buttons ? 0.5 : 0;\n  }\n  return pressure;\n}\n\n\n/**\n * Checks if the `buttons` property is supported.\n */\n(function() {\n  try {\n    const ev = new MouseEvent('click', {buttons: 1});\n    HAS_BUTTONS = ev.buttons === 1;\n  } catch (e) {\n    // pass\n  }\n})();\n\nexport default PointerEvent;\n","/**\n * @module ol/pointer/TouchSource\n */\n\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport {remove} from '../array.js';\nimport EventSource from './EventSource.js';\nimport {POINTER_ID} from './MouseSource.js';\n\n\n/**\n * @type {number}\n */\nconst CLICK_COUNT_TIMEOUT = 200;\n\n/**\n * @type {string}\n */\nconst POINTER_TYPE = 'touch';\n\n/**\n * Handler for `touchstart`, triggers `pointerover`,\n * `pointerenter` and `pointerdown` events.\n *\n * @this {TouchSource}\n * @param {TouchEvent} inEvent The in event.\n */\nfunction touchstart(inEvent) {\n  this.vacuumTouches_(inEvent);\n  this.setPrimaryTouch_(inEvent.changedTouches[0]);\n  this.dedupSynthMouse_(inEvent);\n  this.clickCount_++;\n  this.processTouches_(inEvent, this.overDown_);\n}\n\n/**\n * Handler for `touchmove`.\n *\n * @this {TouchSource}\n * @param {TouchEvent} inEvent The in event.\n */\nfunction touchmove(inEvent) {\n  this.processTouches_(inEvent, this.moveOverOut_);\n}\n\n/**\n * Handler for `touchend`, triggers `pointerup`,\n * `pointerout` and `pointerleave` events.\n *\n * @this {TouchSource}\n * @param {TouchEvent} inEvent The event.\n */\nfunction touchend(inEvent) {\n  this.dedupSynthMouse_(inEvent);\n  this.processTouches_(inEvent, this.upOut_);\n}\n\n/**\n * Handler for `touchcancel`, triggers `pointercancel`,\n * `pointerout` and `pointerleave` events.\n *\n * @this {TouchSource}\n * @param {TouchEvent} inEvent The in event.\n */\nfunction touchcancel(inEvent) {\n  this.processTouches_(inEvent, this.cancelOut_);\n}\n\n\nclass TouchSource extends EventSource {\n\n  /**\n   * @param {import(\"./PointerEventHandler.js\").default} dispatcher The event handler.\n   * @param {import(\"./MouseSource.js\").default} mouseSource Mouse source.\n   */\n  constructor(dispatcher, mouseSource) {\n    const mapping = {\n      'touchstart': touchstart,\n      'touchmove': touchmove,\n      'touchend': touchend,\n      'touchcancel': touchcancel\n    };\n    super(dispatcher, mapping);\n\n    /**\n     * @const\n     * @type {!Object<string, Event|Object>}\n     */\n    this.pointerMap = dispatcher.pointerMap;\n\n    /**\n     * @const\n     * @type {import(\"./MouseSource.js\").default}\n     */\n    this.mouseSource = mouseSource;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.firstTouchId_ = undefined;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.clickCount_ = 0;\n\n    /**\n     * @private\n     * @type {?}\n     */\n    this.resetId_;\n\n    /**\n     * Mouse event timeout: This should be long enough to\n     * ignore compat mouse events made by touch.\n     * @private\n     * @type {number}\n     */\n    this.dedupTimeout_ = 2500;\n  }\n\n  /**\n   * @private\n   * @param {Touch} inTouch The in touch.\n   * @return {boolean} True, if this is the primary touch.\n   */\n  isPrimaryTouch_(inTouch) {\n    return this.firstTouchId_ === inTouch.identifier;\n  }\n\n  /**\n   * Set primary touch if there are no pointers, or the only pointer is the mouse.\n   * @param {Touch} inTouch The in touch.\n   * @private\n   */\n  setPrimaryTouch_(inTouch) {\n    const count = Object.keys(this.pointerMap).length;\n    if (count === 0 || (count === 1 && POINTER_ID.toString() in this.pointerMap)) {\n      this.firstTouchId_ = inTouch.identifier;\n      this.cancelResetClickCount_();\n    }\n  }\n\n  /**\n   * @private\n   * @param {PointerEvent} inPointer The in pointer object.\n   */\n  removePrimaryPointer_(inPointer) {\n    if (inPointer.isPrimary) {\n      this.firstTouchId_ = undefined;\n      this.resetClickCount_();\n    }\n  }\n\n  /**\n   * @private\n   */\n  resetClickCount_() {\n    this.resetId_ = setTimeout(\n      this.resetClickCountHandler_.bind(this),\n      CLICK_COUNT_TIMEOUT);\n  }\n\n  /**\n   * @private\n   */\n  resetClickCountHandler_() {\n    this.clickCount_ = 0;\n    this.resetId_ = undefined;\n  }\n\n  /**\n   * @private\n   */\n  cancelResetClickCount_() {\n    if (this.resetId_ !== undefined) {\n      clearTimeout(this.resetId_);\n    }\n  }\n\n  /**\n   * @private\n   * @param {TouchEvent} browserEvent Browser event\n   * @param {Touch} inTouch Touch event\n   * @return {PointerEvent} A pointer object.\n   */\n  touchToPointer_(browserEvent, inTouch) {\n    const e = this.dispatcher.cloneEvent(browserEvent, inTouch);\n    // Spec specifies that pointerId 1 is reserved for Mouse.\n    // Touch identifiers can start at 0.\n    // Add 2 to the touch identifier for compatibility.\n    e.pointerId = inTouch.identifier + 2;\n    // TODO: check if this is necessary?\n    //e.target = findTarget(e);\n    e.bubbles = true;\n    e.cancelable = true;\n    e.detail = this.clickCount_;\n    e.button = 0;\n    e.buttons = 1;\n    e.width = inTouch.radiusX || 0;\n    e.height = inTouch.radiusY || 0;\n    e.pressure = inTouch.force || 0.5;\n    e.isPrimary = this.isPrimaryTouch_(inTouch);\n    e.pointerType = POINTER_TYPE;\n\n    // make sure that the properties that are different for\n    // each `Touch` object are not copied from the BrowserEvent object\n    e.clientX = inTouch.clientX;\n    e.clientY = inTouch.clientY;\n    e.screenX = inTouch.screenX;\n    e.screenY = inTouch.screenY;\n\n    return e;\n  }\n\n  /**\n   * @private\n   * @param {TouchEvent} inEvent Touch event\n   * @param {function(TouchEvent, PointerEvent)} inFunction In function.\n   */\n  processTouches_(inEvent, inFunction) {\n    const touches = Array.prototype.slice.call(inEvent.changedTouches);\n    const count = touches.length;\n    function preventDefault() {\n      inEvent.preventDefault();\n    }\n    for (let i = 0; i < count; ++i) {\n      const pointer = this.touchToPointer_(inEvent, touches[i]);\n      // forward touch preventDefaults\n      pointer.preventDefault = preventDefault;\n      inFunction.call(this, inEvent, pointer);\n    }\n  }\n\n  /**\n   * @private\n   * @param {TouchList} touchList The touch list.\n   * @param {number} searchId Search identifier.\n   * @return {boolean} True, if the `Touch` with the given id is in the list.\n   */\n  findTouch_(touchList, searchId) {\n    const l = touchList.length;\n    for (let i = 0; i < l; i++) {\n      const touch = touchList[i];\n      if (touch.identifier === searchId) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * In some instances, a touchstart can happen without a touchend. This\n   * leaves the pointermap in a broken state.\n   * Therefore, on every touchstart, we remove the touches that did not fire a\n   * touchend event.\n   * To keep state globally consistent, we fire a pointercancel for\n   * this \"abandoned\" touch\n   *\n   * @private\n   * @param {TouchEvent} inEvent The in event.\n   */\n  vacuumTouches_(inEvent) {\n    const touchList = inEvent.touches;\n    // pointerMap.getCount() should be < touchList.length here,\n    // as the touchstart has not been processed yet.\n    const keys = Object.keys(this.pointerMap);\n    const count = keys.length;\n    if (count >= touchList.length) {\n      const d = [];\n      for (let i = 0; i < count; ++i) {\n        const key = Number(keys[i]);\n        const value = this.pointerMap[key];\n        // Never remove pointerId == 1, which is mouse.\n        // Touch identifiers are 2 smaller than their pointerId, which is the\n        // index in pointermap.\n        if (key != POINTER_ID && !this.findTouch_(touchList, key - 2)) {\n          d.push(value.out);\n        }\n      }\n      for (let i = 0; i < d.length; ++i) {\n        this.cancelOut_(inEvent, d[i]);\n      }\n    }\n  }\n\n  /**\n   * @private\n   * @param {TouchEvent} browserEvent The event.\n   * @param {PointerEvent} inPointer The in pointer object.\n   */\n  overDown_(browserEvent, inPointer) {\n    this.pointerMap[inPointer.pointerId] = {\n      target: inPointer.target,\n      out: inPointer,\n      outTarget: inPointer.target\n    };\n    this.dispatcher.over(inPointer, browserEvent);\n    this.dispatcher.enter(inPointer, browserEvent);\n    this.dispatcher.down(inPointer, browserEvent);\n  }\n\n  /**\n   * @private\n   * @param {TouchEvent} browserEvent The event.\n   * @param {PointerEvent} inPointer The in pointer.\n   */\n  moveOverOut_(browserEvent, inPointer) {\n    const event = inPointer;\n    const pointer = this.pointerMap[event.pointerId];\n    // a finger drifted off the screen, ignore it\n    if (!pointer) {\n      return;\n    }\n    const outEvent = pointer.out;\n    const outTarget = pointer.outTarget;\n    this.dispatcher.move(event, browserEvent);\n    if (outEvent && outTarget !== event.target) {\n      outEvent.relatedTarget = event.target;\n      /** @type {Object} */ (event).relatedTarget = outTarget;\n      // recover from retargeting by shadow\n      outEvent.target = outTarget;\n      if (event.target) {\n        this.dispatcher.leaveOut(outEvent, browserEvent);\n        this.dispatcher.enterOver(event, browserEvent);\n      } else {\n        // clean up case when finger leaves the screen\n        /** @type {Object} */ (event).target = outTarget;\n        /** @type {Object} */ (event).relatedTarget = null;\n        this.cancelOut_(browserEvent, event);\n      }\n    }\n    pointer.out = event;\n    pointer.outTarget = event.target;\n  }\n\n  /**\n   * @private\n   * @param {TouchEvent} browserEvent An event.\n   * @param {PointerEvent} inPointer The inPointer object.\n   */\n  upOut_(browserEvent, inPointer) {\n    this.dispatcher.up(inPointer, browserEvent);\n    this.dispatcher.out(inPointer, browserEvent);\n    this.dispatcher.leave(inPointer, browserEvent);\n    this.cleanUpPointer_(inPointer);\n  }\n\n  /**\n   * @private\n   * @param {TouchEvent} browserEvent The event.\n   * @param {PointerEvent} inPointer The in pointer.\n   */\n  cancelOut_(browserEvent, inPointer) {\n    this.dispatcher.cancel(inPointer, browserEvent);\n    this.dispatcher.out(inPointer, browserEvent);\n    this.dispatcher.leave(inPointer, browserEvent);\n    this.cleanUpPointer_(inPointer);\n  }\n\n  /**\n   * @private\n   * @param {PointerEvent} inPointer The inPointer object.\n   */\n  cleanUpPointer_(inPointer) {\n    delete this.pointerMap[inPointer.pointerId];\n    this.removePrimaryPointer_(inPointer);\n  }\n\n  /**\n   * Prevent synth mouse events from creating pointer events.\n   *\n   * @private\n   * @param {TouchEvent} inEvent The in event.\n   */\n  dedupSynthMouse_(inEvent) {\n    const lts = this.mouseSource.lastTouches;\n    const t = inEvent.changedTouches[0];\n    // only the primary finger will synth mouse events\n    if (this.isPrimaryTouch_(t)) {\n      // remember x/y of last touch\n      const lt = [t.clientX, t.clientY];\n      lts.push(lt);\n\n      setTimeout(function() {\n        // remove touch after timeout\n        remove(lts, lt);\n      }, this.dedupTimeout_);\n    }\n  }\n}\n\nexport default TouchSource;\n","/**\n * @module ol/pointer/PointerEventHandler\n */\n\n// Based on https://github.com/Polymer/PointerEvents\n\n// Copyright (c) 2013 The Polymer Authors. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nimport {listen, unlisten} from '../events.js';\nimport EventTarget from '../events/Target.js';\nimport {POINTER, MSPOINTER, TOUCH} from '../has.js';\nimport PointerEventType from './EventType.js';\nimport MouseSource, {prepareEvent as prepareMouseEvent} from './MouseSource.js';\nimport MsSource from './MsSource.js';\nimport NativeSource from './NativeSource.js';\nimport PointerEvent from './PointerEvent.js';\nimport TouchSource from './TouchSource.js';\n\n\n/**\n * Properties to copy when cloning an event, with default values.\n * @type {Array<Array>}\n */\nconst CLONE_PROPS = [\n  // MouseEvent\n  ['bubbles', false],\n  ['cancelable', false],\n  ['view', null],\n  ['detail', null],\n  ['screenX', 0],\n  ['screenY', 0],\n  ['clientX', 0],\n  ['clientY', 0],\n  ['ctrlKey', false],\n  ['altKey', false],\n  ['shiftKey', false],\n  ['metaKey', false],\n  ['button', 0],\n  ['relatedTarget', null],\n  // DOM Level 3\n  ['buttons', 0],\n  // PointerEvent\n  ['pointerId', 0],\n  ['width', 0],\n  ['height', 0],\n  ['pressure', 0],\n  ['tiltX', 0],\n  ['tiltY', 0],\n  ['pointerType', ''],\n  ['hwTimestamp', 0],\n  ['isPrimary', false],\n  // event instance\n  ['type', ''],\n  ['target', null],\n  ['currentTarget', null],\n  ['which', 0]\n];\n\n\nclass PointerEventHandler extends EventTarget {\n\n  /**\n   * @param {Element|HTMLDocument} element Viewport element.\n   */\n  constructor(element) {\n    super();\n\n    /**\n     * @const\n     * @private\n     * @type {Element|HTMLDocument}\n     */\n    this.element_ = element;\n\n    /**\n     * @const\n     * @type {!Object<string, Event|Object>}\n     */\n    this.pointerMap = {};\n\n    /**\n     * @type {Object<string, function(Event)>}\n     * @private\n     */\n    this.eventMap_ = {};\n\n    /**\n     * @type {Array<import(\"./EventSource.js\").default>}\n     * @private\n     */\n    this.eventSourceList_ = [];\n\n    this.registerSources();\n  }\n\n  /**\n   * Set up the event sources (mouse, touch and native pointers)\n   * that generate pointer events.\n   */\n  registerSources() {\n    if (POINTER) {\n      this.registerSource('native', new NativeSource(this));\n    } else if (MSPOINTER) {\n      this.registerSource('ms', new MsSource(this));\n    } else {\n      const mouseSource = new MouseSource(this);\n      this.registerSource('mouse', mouseSource);\n\n      if (TOUCH) {\n        this.registerSource('touch', new TouchSource(this, mouseSource));\n      }\n    }\n\n    // register events on the viewport element\n    this.register_();\n  }\n\n  /**\n   * Add a new event source that will generate pointer events.\n   *\n   * @param {string} name A name for the event source\n   * @param {import(\"./EventSource.js\").default} source The source event.\n   */\n  registerSource(name, source) {\n    const s = source;\n    const newEvents = s.getEvents();\n\n    if (newEvents) {\n      newEvents.forEach(function(e) {\n        const handler = s.getHandlerForEvent(e);\n\n        if (handler) {\n          this.eventMap_[e] = handler.bind(s);\n        }\n      }.bind(this));\n      this.eventSourceList_.push(s);\n    }\n  }\n\n  /**\n   * Set up the events for all registered event sources.\n   * @private\n   */\n  register_() {\n    const l = this.eventSourceList_.length;\n    for (let i = 0; i < l; i++) {\n      const eventSource = this.eventSourceList_[i];\n      this.addEvents_(eventSource.getEvents());\n    }\n  }\n\n  /**\n   * Remove all registered events.\n   * @private\n   */\n  unregister_() {\n    const l = this.eventSourceList_.length;\n    for (let i = 0; i < l; i++) {\n      const eventSource = this.eventSourceList_[i];\n      this.removeEvents_(eventSource.getEvents());\n    }\n  }\n\n  /**\n   * Calls the right handler for a new event.\n   * @private\n   * @param {Event} inEvent Browser event.\n   */\n  eventHandler_(inEvent) {\n    const type = inEvent.type;\n    const handler = this.eventMap_[type];\n    if (handler) {\n      handler(inEvent);\n    }\n  }\n\n  /**\n   * Setup listeners for the given events.\n   * @private\n   * @param {Array<string>} events List of events.\n   */\n  addEvents_(events) {\n    events.forEach(function(eventName) {\n      listen(this.element_, eventName, this.eventHandler_, this);\n    }.bind(this));\n  }\n\n  /**\n   * Unregister listeners for the given events.\n   * @private\n   * @param {Array<string>} events List of events.\n   */\n  removeEvents_(events) {\n    events.forEach(function(e) {\n      unlisten(this.element_, e, this.eventHandler_, this);\n    }.bind(this));\n  }\n\n  /**\n   * Returns a snapshot of inEvent, with writable properties.\n   *\n   * @param {Event} event Browser event.\n   * @param {Event|Touch} inEvent An event that contains\n   *    properties to copy.\n   * @return {Object} An object containing shallow copies of\n   *    `inEvent`'s properties.\n   */\n  cloneEvent(event, inEvent) {\n    const eventCopy = {};\n    for (let i = 0, ii = CLONE_PROPS.length; i < ii; i++) {\n      const p = CLONE_PROPS[i][0];\n      eventCopy[p] = event[p] || inEvent[p] || CLONE_PROPS[i][1];\n    }\n\n    return eventCopy;\n  }\n\n  // EVENTS\n\n\n  /**\n   * Triggers a 'pointerdown' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  down(data, event) {\n    this.fireEvent(PointerEventType.POINTERDOWN, data, event);\n  }\n\n  /**\n   * Triggers a 'pointermove' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  move(data, event) {\n    this.fireEvent(PointerEventType.POINTERMOVE, data, event);\n  }\n\n  /**\n   * Triggers a 'pointerup' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  up(data, event) {\n    this.fireEvent(PointerEventType.POINTERUP, data, event);\n  }\n\n  /**\n   * Triggers a 'pointerenter' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  enter(data, event) {\n    data.bubbles = false;\n    this.fireEvent(PointerEventType.POINTERENTER, data, event);\n  }\n\n  /**\n   * Triggers a 'pointerleave' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  leave(data, event) {\n    data.bubbles = false;\n    this.fireEvent(PointerEventType.POINTERLEAVE, data, event);\n  }\n\n  /**\n   * Triggers a 'pointerover' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  over(data, event) {\n    data.bubbles = true;\n    this.fireEvent(PointerEventType.POINTEROVER, data, event);\n  }\n\n  /**\n   * Triggers a 'pointerout' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  out(data, event) {\n    data.bubbles = true;\n    this.fireEvent(PointerEventType.POINTEROUT, data, event);\n  }\n\n  /**\n   * Triggers a 'pointercancel' event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  cancel(data, event) {\n    this.fireEvent(PointerEventType.POINTERCANCEL, data, event);\n  }\n\n  /**\n   * Triggers a combination of 'pointerout' and 'pointerleave' events.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  leaveOut(data, event) {\n    this.out(data, event);\n    if (!this.contains_(data.target, data.relatedTarget)) {\n      this.leave(data, event);\n    }\n  }\n\n  /**\n   * Triggers a combination of 'pointerover' and 'pointerevents' events.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  enterOver(data, event) {\n    this.over(data, event);\n    if (!this.contains_(data.target, data.relatedTarget)) {\n      this.enter(data, event);\n    }\n  }\n\n  /**\n   * @private\n   * @param {Element} container The container element.\n   * @param {Element} contained The contained element.\n   * @return {boolean} Returns true if the container element\n   *   contains the other element.\n   */\n  contains_(container, contained) {\n    if (!container || !contained) {\n      return false;\n    }\n    return container.contains(contained);\n  }\n\n  // EVENT CREATION AND TRACKING\n  /**\n   * Creates a new Event of type `inType`, based on the information in\n   * `data`.\n   *\n   * @param {string} inType A string representing the type of event to create.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   * @return {PointerEvent} A PointerEvent of type `inType`.\n   */\n  makeEvent(inType, data, event) {\n    return new PointerEvent(inType, event, data);\n  }\n\n  /**\n   * Make and dispatch an event in one call.\n   * @param {string} inType A string representing the type of event.\n   * @param {Object} data Pointer event data.\n   * @param {Event} event The event.\n   */\n  fireEvent(inType, data, event) {\n    const e = this.makeEvent(inType, data, event);\n    this.dispatchEvent(e);\n  }\n\n  /**\n   * Creates a pointer event from a native pointer event\n   * and dispatches this event.\n   * @param {Event} event A platform event with a target.\n   */\n  fireNativeEvent(event) {\n    const e = this.makeEvent(event.type, event, event);\n    this.dispatchEvent(e);\n  }\n\n  /**\n   * Wrap a native mouse event into a pointer event.\n   * This proxy method is required for the legacy IE support.\n   * @param {string} eventType The pointer event type.\n   * @param {Event} event The event.\n   * @return {PointerEvent} The wrapped event.\n   */\n  wrapMouseEvent(eventType, event) {\n    const pointerEvent = this.makeEvent(\n      eventType, prepareMouseEvent(event, this), event);\n    return pointerEvent;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    this.unregister_();\n    super.disposeInternal();\n  }\n}\n\nexport default PointerEventHandler;\n","/**\n * @module ol/MapBrowserEventHandler\n */\nimport {DEVICE_PIXEL_RATIO} from './has.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport MapBrowserPointerEvent from './MapBrowserPointerEvent.js';\nimport {listen, unlistenByKey} from './events.js';\nimport EventTarget from './events/Target.js';\nimport PointerEventType from './pointer/EventType.js';\nimport PointerEventHandler from './pointer/PointerEventHandler.js';\n\nclass MapBrowserEventHandler extends EventTarget {\n\n  /**\n   * @param {import(\"./PluggableMap.js\").default} map The map with the viewport to listen to events on.\n   * @param {number=} moveTolerance The minimal distance the pointer must travel to trigger a move.\n   */\n  constructor(map, moveTolerance) {\n\n    super();\n\n    /**\n     * This is the element that we will listen to the real events on.\n     * @type {import(\"./PluggableMap.js\").default}\n     * @private\n     */\n    this.map_ = map;\n\n    /**\n     * @type {any}\n     * @private\n     */\n    this.clickTimeoutId_;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.dragging_ = false;\n\n    /**\n     * @type {!Array<import(\"./events.js\").EventsKey>}\n     * @private\n     */\n    this.dragListenerKeys_ = [];\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.moveTolerance_ = moveTolerance ?\n      moveTolerance * DEVICE_PIXEL_RATIO : DEVICE_PIXEL_RATIO;\n\n    /**\n     * The most recent \"down\" type event (or null if none have occurred).\n     * Set on pointerdown.\n     * @type {import(\"./pointer/PointerEvent.js\").default}\n     * @private\n     */\n    this.down_ = null;\n\n    const element = this.map_.getViewport();\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.activePointers_ = 0;\n\n    /**\n     * @type {!Object<number, boolean>}\n     * @private\n     */\n    this.trackedTouches_ = {};\n\n    /**\n     * Event handler which generates pointer events for\n     * the viewport element.\n     *\n     * @type {PointerEventHandler}\n     * @private\n     */\n    this.pointerEventHandler_ = new PointerEventHandler(element);\n\n    /**\n     * Event handler which generates pointer events for\n     * the document (used when dragging).\n     *\n     * @type {PointerEventHandler}\n     * @private\n     */\n    this.documentPointerEventHandler_ = null;\n\n    /**\n     * @type {?import(\"./events.js\").EventsKey}\n     * @private\n     */\n    this.pointerdownListenerKey_ = listen(this.pointerEventHandler_,\n      PointerEventType.POINTERDOWN,\n      this.handlePointerDown_, this);\n\n    /**\n     * @type {?import(\"./events.js\").EventsKey}\n     * @private\n     */\n    this.relayedListenerKey_ = listen(this.pointerEventHandler_,\n      PointerEventType.POINTERMOVE,\n      this.relayEvent_, this);\n\n  }\n\n  /**\n   * @param {import(\"./pointer/PointerEvent.js\").default} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  emulateClick_(pointerEvent) {\n    let newEvent = new MapBrowserPointerEvent(\n      MapBrowserEventType.CLICK, this.map_, pointerEvent);\n    this.dispatchEvent(newEvent);\n    if (this.clickTimeoutId_ !== undefined) {\n      // double-click\n      clearTimeout(this.clickTimeoutId_);\n      this.clickTimeoutId_ = undefined;\n      newEvent = new MapBrowserPointerEvent(\n        MapBrowserEventType.DBLCLICK, this.map_, pointerEvent);\n      this.dispatchEvent(newEvent);\n    } else {\n      // click\n      this.clickTimeoutId_ = setTimeout(function() {\n        this.clickTimeoutId_ = undefined;\n        const newEvent = new MapBrowserPointerEvent(\n          MapBrowserEventType.SINGLECLICK, this.map_, pointerEvent);\n        this.dispatchEvent(newEvent);\n      }.bind(this), 250);\n    }\n  }\n\n  /**\n   * Keeps track on how many pointers are currently active.\n   *\n   * @param {import(\"./pointer/PointerEvent.js\").default} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  updateActivePointers_(pointerEvent) {\n    const event = pointerEvent;\n\n    if (event.type == MapBrowserEventType.POINTERUP ||\n        event.type == MapBrowserEventType.POINTERCANCEL) {\n      delete this.trackedTouches_[event.pointerId];\n    } else if (event.type == MapBrowserEventType.POINTERDOWN) {\n      this.trackedTouches_[event.pointerId] = true;\n    }\n    this.activePointers_ = Object.keys(this.trackedTouches_).length;\n  }\n\n  /**\n   * @param {import(\"./pointer/PointerEvent.js\").default} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  handlePointerUp_(pointerEvent) {\n    this.updateActivePointers_(pointerEvent);\n    const newEvent = new MapBrowserPointerEvent(\n      MapBrowserEventType.POINTERUP, this.map_, pointerEvent);\n    this.dispatchEvent(newEvent);\n\n    // We emulate click events on left mouse button click, touch contact, and pen\n    // contact. isMouseActionButton returns true in these cases (evt.button is set\n    // to 0).\n    // See http://www.w3.org/TR/pointerevents/#button-states\n    // We only fire click, singleclick, and doubleclick if nobody has called\n    // event.stopPropagation() or event.preventDefault().\n    if (!newEvent.propagationStopped && !this.dragging_ && this.isMouseActionButton_(pointerEvent)) {\n      this.emulateClick_(this.down_);\n    }\n\n    if (this.activePointers_ === 0) {\n      this.dragListenerKeys_.forEach(unlistenByKey);\n      this.dragListenerKeys_.length = 0;\n      this.dragging_ = false;\n      this.down_ = null;\n      this.documentPointerEventHandler_.dispose();\n      this.documentPointerEventHandler_ = null;\n    }\n  }\n\n  /**\n   * @param {import(\"./pointer/PointerEvent.js\").default} pointerEvent Pointer\n   * event.\n   * @return {boolean} If the left mouse button was pressed.\n   * @private\n   */\n  isMouseActionButton_(pointerEvent) {\n    return pointerEvent.button === 0;\n  }\n\n  /**\n   * @param {import(\"./pointer/PointerEvent.js\").default} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  handlePointerDown_(pointerEvent) {\n    this.updateActivePointers_(pointerEvent);\n    const newEvent = new MapBrowserPointerEvent(\n      MapBrowserEventType.POINTERDOWN, this.map_, pointerEvent);\n    this.dispatchEvent(newEvent);\n\n    this.down_ = pointerEvent;\n\n    if (this.dragListenerKeys_.length === 0) {\n      /* Set up a pointer event handler on the `document`,\n       * which is required when the pointer is moved outside\n       * the viewport when dragging.\n       */\n      this.documentPointerEventHandler_ =\n          new PointerEventHandler(document);\n\n      this.dragListenerKeys_.push(\n        listen(this.documentPointerEventHandler_,\n          MapBrowserEventType.POINTERMOVE,\n          this.handlePointerMove_, this),\n        listen(this.documentPointerEventHandler_,\n          MapBrowserEventType.POINTERUP,\n          this.handlePointerUp_, this),\n        /* Note that the listener for `pointercancel is set up on\n         * `pointerEventHandler_` and not `documentPointerEventHandler_` like\n         * the `pointerup` and `pointermove` listeners.\n         *\n         * The reason for this is the following: `TouchSource.vacuumTouches_()`\n         * issues `pointercancel` events, when there was no `touchend` for a\n         * `touchstart`. Now, let's say a first `touchstart` is registered on\n         * `pointerEventHandler_`. The `documentPointerEventHandler_` is set up.\n         * But `documentPointerEventHandler_` doesn't know about the first\n         * `touchstart`. If there is no `touchend` for the `touchstart`, we can\n         * only receive a `touchcancel` from `pointerEventHandler_`, because it is\n         * only registered there.\n         */\n        listen(this.pointerEventHandler_,\n          MapBrowserEventType.POINTERCANCEL,\n          this.handlePointerUp_, this)\n      );\n    }\n  }\n\n  /**\n   * @param {import(\"./pointer/PointerEvent.js\").default} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  handlePointerMove_(pointerEvent) {\n    // Between pointerdown and pointerup, pointermove events are triggered.\n    // To avoid a 'false' touchmove event to be dispatched, we test if the pointer\n    // moved a significant distance.\n    if (this.isMoving_(pointerEvent)) {\n      this.dragging_ = true;\n      const newEvent = new MapBrowserPointerEvent(\n        MapBrowserEventType.POINTERDRAG, this.map_, pointerEvent,\n        this.dragging_);\n      this.dispatchEvent(newEvent);\n    }\n\n    // Some native android browser triggers mousemove events during small period\n    // of time. See: https://code.google.com/p/android/issues/detail?id=5491 or\n    // https://code.google.com/p/android/issues/detail?id=19827\n    // ex: Galaxy Tab P3110 + Android 4.1.1\n    pointerEvent.preventDefault();\n  }\n\n  /**\n   * Wrap and relay a pointer event.  Note that this requires that the type\n   * string for the MapBrowserPointerEvent matches the PointerEvent type.\n   * @param {import(\"./pointer/PointerEvent.js\").default} pointerEvent Pointer\n   * event.\n   * @private\n   */\n  relayEvent_(pointerEvent) {\n    const dragging = !!(this.down_ && this.isMoving_(pointerEvent));\n    this.dispatchEvent(new MapBrowserPointerEvent(\n      pointerEvent.type, this.map_, pointerEvent, dragging));\n  }\n\n  /**\n   * @param {import(\"./pointer/PointerEvent.js\").default} pointerEvent Pointer\n   * event.\n   * @return {boolean} Is moving.\n   * @private\n   */\n  isMoving_(pointerEvent) {\n    return this.dragging_ ||\n        Math.abs(pointerEvent.clientX - this.down_.clientX) > this.moveTolerance_ ||\n        Math.abs(pointerEvent.clientY - this.down_.clientY) > this.moveTolerance_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    if (this.relayedListenerKey_) {\n      unlistenByKey(this.relayedListenerKey_);\n      this.relayedListenerKey_ = null;\n    }\n    if (this.pointerdownListenerKey_) {\n      unlistenByKey(this.pointerdownListenerKey_);\n      this.pointerdownListenerKey_ = null;\n    }\n\n    this.dragListenerKeys_.forEach(unlistenByKey);\n    this.dragListenerKeys_.length = 0;\n\n    if (this.documentPointerEventHandler_) {\n      this.documentPointerEventHandler_.dispose();\n      this.documentPointerEventHandler_ = null;\n    }\n    if (this.pointerEventHandler_) {\n      this.pointerEventHandler_.dispose();\n      this.pointerEventHandler_ = null;\n    }\n    super.disposeInternal();\n  }\n}\n\n\nexport default MapBrowserEventHandler;\n","/**\n * @module ol/MapProperty\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  LAYERGROUP: 'layergroup',\n  SIZE: 'size',\n  TARGET: 'target',\n  VIEW: 'view'\n};\n","/**\n * @module ol/structs/PriorityQueue\n */\nimport {assert} from '../asserts.js';\nimport {clear} from '../obj.js';\n\n\n/**\n * @type {number}\n */\nexport const DROP = Infinity;\n\n\n/**\n * @classdesc\n * Priority queue.\n *\n * The implementation is inspired from the Closure Library's Heap class and\n * Python's heapq module.\n *\n * See http://closure-library.googlecode.com/svn/docs/closure_goog_structs_heap.js.source.html\n * and http://hg.python.org/cpython/file/2.7/Lib/heapq.py.\n *\n * @template T\n */\nclass PriorityQueue {\n\n  /**\n   * @param {function(T): number} priorityFunction Priority function.\n   * @param {function(T): string} keyFunction Key function.\n   */\n  constructor(priorityFunction, keyFunction) {\n\n    /**\n     * @type {function(T): number}\n     * @private\n     */\n    this.priorityFunction_ = priorityFunction;\n\n    /**\n     * @type {function(T): string}\n     * @private\n     */\n    this.keyFunction_ = keyFunction;\n\n    /**\n     * @type {Array<T>}\n     * @private\n     */\n    this.elements_ = [];\n\n    /**\n     * @type {Array<number>}\n     * @private\n     */\n    this.priorities_ = [];\n\n    /**\n     * @type {!Object<string, boolean>}\n     * @private\n     */\n    this.queuedElements_ = {};\n\n  }\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  clear() {\n    this.elements_.length = 0;\n    this.priorities_.length = 0;\n    clear(this.queuedElements_);\n  }\n\n\n  /**\n   * Remove and return the highest-priority element. O(log N).\n   * @return {T} Element.\n   */\n  dequeue() {\n    const elements = this.elements_;\n    const priorities = this.priorities_;\n    const element = elements[0];\n    if (elements.length == 1) {\n      elements.length = 0;\n      priorities.length = 0;\n    } else {\n      elements[0] = elements.pop();\n      priorities[0] = priorities.pop();\n      this.siftUp_(0);\n    }\n    const elementKey = this.keyFunction_(element);\n    delete this.queuedElements_[elementKey];\n    return element;\n  }\n\n\n  /**\n   * Enqueue an element. O(log N).\n   * @param {T} element Element.\n   * @return {boolean} The element was added to the queue.\n   */\n  enqueue(element) {\n    assert(!(this.keyFunction_(element) in this.queuedElements_),\n      31); // Tried to enqueue an `element` that was already added to the queue\n    const priority = this.priorityFunction_(element);\n    if (priority != DROP) {\n      this.elements_.push(element);\n      this.priorities_.push(priority);\n      this.queuedElements_[this.keyFunction_(element)] = true;\n      this.siftDown_(0, this.elements_.length - 1);\n      return true;\n    }\n    return false;\n  }\n\n\n  /**\n   * @return {number} Count.\n   */\n  getCount() {\n    return this.elements_.length;\n  }\n\n\n  /**\n   * Gets the index of the left child of the node at the given index.\n   * @param {number} index The index of the node to get the left child for.\n   * @return {number} The index of the left child.\n   * @private\n   */\n  getLeftChildIndex_(index) {\n    return index * 2 + 1;\n  }\n\n\n  /**\n   * Gets the index of the right child of the node at the given index.\n   * @param {number} index The index of the node to get the right child for.\n   * @return {number} The index of the right child.\n   * @private\n   */\n  getRightChildIndex_(index) {\n    return index * 2 + 2;\n  }\n\n\n  /**\n   * Gets the index of the parent of the node at the given index.\n   * @param {number} index The index of the node to get the parent for.\n   * @return {number} The index of the parent.\n   * @private\n   */\n  getParentIndex_(index) {\n    return (index - 1) >> 1;\n  }\n\n\n  /**\n   * Make this a heap. O(N).\n   * @private\n   */\n  heapify_() {\n    let i;\n    for (i = (this.elements_.length >> 1) - 1; i >= 0; i--) {\n      this.siftUp_(i);\n    }\n  }\n\n\n  /**\n   * @return {boolean} Is empty.\n   */\n  isEmpty() {\n    return this.elements_.length === 0;\n  }\n\n\n  /**\n   * @param {string} key Key.\n   * @return {boolean} Is key queued.\n   */\n  isKeyQueued(key) {\n    return key in this.queuedElements_;\n  }\n\n\n  /**\n   * @param {T} element Element.\n   * @return {boolean} Is queued.\n   */\n  isQueued(element) {\n    return this.isKeyQueued(this.keyFunction_(element));\n  }\n\n\n  /**\n   * @param {number} index The index of the node to move down.\n   * @private\n   */\n  siftUp_(index) {\n    const elements = this.elements_;\n    const priorities = this.priorities_;\n    const count = elements.length;\n    const element = elements[index];\n    const priority = priorities[index];\n    const startIndex = index;\n\n    while (index < (count >> 1)) {\n      const lIndex = this.getLeftChildIndex_(index);\n      const rIndex = this.getRightChildIndex_(index);\n\n      const smallerChildIndex = rIndex < count &&\n          priorities[rIndex] < priorities[lIndex] ?\n        rIndex : lIndex;\n\n      elements[index] = elements[smallerChildIndex];\n      priorities[index] = priorities[smallerChildIndex];\n      index = smallerChildIndex;\n    }\n\n    elements[index] = element;\n    priorities[index] = priority;\n    this.siftDown_(startIndex, index);\n  }\n\n\n  /**\n   * @param {number} startIndex The index of the root.\n   * @param {number} index The index of the node to move up.\n   * @private\n   */\n  siftDown_(startIndex, index) {\n    const elements = this.elements_;\n    const priorities = this.priorities_;\n    const element = elements[index];\n    const priority = priorities[index];\n\n    while (index > startIndex) {\n      const parentIndex = this.getParentIndex_(index);\n      if (priorities[parentIndex] > priority) {\n        elements[index] = elements[parentIndex];\n        priorities[index] = priorities[parentIndex];\n        index = parentIndex;\n      } else {\n        break;\n      }\n    }\n    elements[index] = element;\n    priorities[index] = priority;\n  }\n\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  reprioritize() {\n    const priorityFunction = this.priorityFunction_;\n    const elements = this.elements_;\n    const priorities = this.priorities_;\n    let index = 0;\n    const n = elements.length;\n    let element, i, priority;\n    for (i = 0; i < n; ++i) {\n      element = elements[i];\n      priority = priorityFunction(element);\n      if (priority == DROP) {\n        delete this.queuedElements_[this.keyFunction_(element)];\n      } else {\n        priorities[index] = priority;\n        elements[index++] = element;\n      }\n    }\n    elements.length = index;\n    priorities.length = index;\n    this.heapify_();\n  }\n\n}\n\n\nexport default PriorityQueue;\n","/**\n * @module ol/TileQueue\n */\nimport TileState from './TileState.js';\nimport {listen, unlisten} from './events.js';\nimport EventType from './events/EventType.js';\nimport PriorityQueue from './structs/PriorityQueue.js';\n\n\n/**\n * @typedef {function(import(\"./Tile.js\").default, string, import(\"./coordinate.js\").Coordinate, number): number} PriorityFunction\n */\n\n\nclass TileQueue extends PriorityQueue {\n\n  /**\n   * @param {PriorityFunction} tilePriorityFunction Tile priority function.\n   * @param {function(): ?} tileChangeCallback Function called on each tile change event.\n   */\n  constructor(tilePriorityFunction, tileChangeCallback) {\n\n    super(\n      /**\n       * @param {Array} element Element.\n       * @return {number} Priority.\n       */\n      function(element) {\n        return tilePriorityFunction.apply(null, element);\n      },\n      /**\n       * @param {Array} element Element.\n       * @return {string} Key.\n       */\n      function(element) {\n        return (/** @type {import(\"./Tile.js\").default} */ (element[0]).getKey());\n      });\n\n    /**\n     * @private\n     * @type {function(): ?}\n     */\n    this.tileChangeCallback_ = tileChangeCallback;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.tilesLoading_ = 0;\n\n    /**\n     * @private\n     * @type {!Object<string,boolean>}\n     */\n    this.tilesLoadingKeys_ = {};\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  enqueue(element) {\n    const added = super.enqueue(element);\n    if (added) {\n      const tile = element[0];\n      listen(tile, EventType.CHANGE, this.handleTileChange, this);\n    }\n    return added;\n  }\n\n  /**\n   * @return {number} Number of tiles loading.\n   */\n  getTilesLoading() {\n    return this.tilesLoading_;\n  }\n\n  /**\n   * @param {import(\"./events/Event.js\").default} event Event.\n   * @protected\n   */\n  handleTileChange(event) {\n    const tile = /** @type {import(\"./Tile.js\").default} */ (event.target);\n    const state = tile.getState();\n    if (state === TileState.LOADED || state === TileState.ERROR ||\n        state === TileState.EMPTY || state === TileState.ABORT) {\n      unlisten(tile, EventType.CHANGE, this.handleTileChange, this);\n      const tileKey = tile.getKey();\n      if (tileKey in this.tilesLoadingKeys_) {\n        delete this.tilesLoadingKeys_[tileKey];\n        --this.tilesLoading_;\n      }\n      this.tileChangeCallback_();\n    }\n  }\n\n  /**\n   * @param {number} maxTotalLoading Maximum number tiles to load simultaneously.\n   * @param {number} maxNewLoads Maximum number of new tiles to load.\n   */\n  loadMoreTiles(maxTotalLoading, maxNewLoads) {\n    let newLoads = 0;\n    let abortedTiles = false;\n    let state, tile, tileKey;\n    while (this.tilesLoading_ < maxTotalLoading && newLoads < maxNewLoads &&\n           this.getCount() > 0) {\n      tile = /** @type {import(\"./Tile.js\").default} */ (this.dequeue()[0]);\n      tileKey = tile.getKey();\n      state = tile.getState();\n      if (state === TileState.ABORT) {\n        abortedTiles = true;\n      } else if (state === TileState.IDLE && !(tileKey in this.tilesLoadingKeys_)) {\n        this.tilesLoadingKeys_[tileKey] = true;\n        ++this.tilesLoading_;\n        ++newLoads;\n        tile.load();\n      }\n    }\n    if (newLoads === 0 && abortedTiles) {\n      // Do not stop the render loop when all wanted tiles were aborted due to\n      // a small, saturated tile cache.\n      this.tileChangeCallback_();\n    }\n  }\n}\n\n\nexport default TileQueue;\n","/**\n * @module ol/PluggableMap\n */\nimport {getUid} from './util.js';\nimport Collection from './Collection.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport MapBrowserEvent from './MapBrowserEvent.js';\nimport MapBrowserEventHandler from './MapBrowserEventHandler.js';\nimport MapBrowserEventType from './MapBrowserEventType.js';\nimport MapEvent from './MapEvent.js';\nimport MapEventType from './MapEventType.js';\nimport MapProperty from './MapProperty.js';\nimport RenderEventType from './render/EventType.js';\nimport BaseObject, {getChangeEventType} from './Object.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport TileQueue from './TileQueue.js';\nimport View from './View.js';\nimport ViewHint from './ViewHint.js';\nimport {assert} from './asserts.js';\nimport {removeNode} from './dom.js';\nimport {listen, unlistenByKey, unlisten} from './events.js';\nimport {stopPropagation} from './events/Event.js';\nimport EventType from './events/EventType.js';\nimport {createEmpty, clone, createOrUpdateEmpty, equals, getForViewAndSize, isEmpty} from './extent.js';\nimport {TRUE} from './functions.js';\nimport {DEVICE_PIXEL_RATIO, TOUCH} from './has.js';\nimport LayerGroup from './layer/Group.js';\nimport {hasArea} from './size.js';\nimport {DROP} from './structs/PriorityQueue.js';\nimport {create as createTransform, apply as applyTransform} from './transform.js';\n\n\n/**\n * State of the current frame. Only `pixelRatio`, `time` and `viewState` should\n * be used in applications.\n * @typedef {Object} FrameState\n * @property {number} pixelRatio The pixel ratio of the frame.\n * @property {number} time The time when rendering of the frame was requested.\n * @property {import(\"./View.js\").State} viewState The state of the current view.\n * @property {boolean} animate\n * @property {import(\"./transform.js\").Transform} coordinateToPixelTransform\n * @property {null|import(\"./extent.js\").Extent} extent\n * @property {import(\"./coordinate.js\").Coordinate} focus\n * @property {number} index\n * @property {Object<string, import(\"./layer/Layer.js\").State>} layerStates\n * @property {Array<import(\"./layer/Layer.js\").State>} layerStatesArray\n * @property {import(\"./transform.js\").Transform} pixelToCoordinateTransform\n * @property {Array<PostRenderFunction>} postRenderFunctions\n * @property {import(\"./size.js\").Size} size\n * @property {!Object<string, boolean>} skippedFeatureUids\n * @property {TileQueue} tileQueue\n * @property {Object<string, Object<string, import(\"./TileRange.js\").default>>} usedTiles\n * @property {Array<number>} viewHints\n * @property {!Object<string, Object<string, boolean>>} wantedTiles\n */\n\n\n/**\n * @typedef {function(PluggableMap, ?FrameState): boolean} PostRenderFunction\n */\n\n\n/**\n * @typedef {Object} AtPixelOptions\n * @property {undefined|function(import(\"./layer/Layer.js\").default): boolean} layerFilter Layer filter\n * function. The filter function will receive one argument, the\n * {@link module:ol/layer/Layer layer-candidate} and it should return a boolean value.\n * Only layers which are visible and for which this function returns `true`\n * will be tested for features. By default, all visible layers will be tested.\n * @property {number} [hitTolerance=0] Hit-detection tolerance in pixels. Pixels\n * inside the radius around the given position will be checked for features. This only\n * works for the canvas renderer and not for WebGL.\n */\n\n\n/**\n * @typedef {Object} MapOptionsInternal\n * @property {Collection<import(\"./control/Control.js\").default>} [controls]\n * @property {Collection<import(\"./interaction/Interaction.js\").default>} [interactions]\n * @property {HTMLElement|Document} keyboardEventTarget\n * @property {Collection<import(\"./Overlay.js\").default>} overlays\n * @property {Object<string, *>} values\n */\n\n\n/**\n * Object literal with config options for the map.\n * @typedef {Object} MapOptions\n * @property {Collection<import(\"./control/Control.js\").default>|Array<import(\"./control/Control.js\").default>} [controls]\n * Controls initially added to the map. If not specified,\n * {@link module:ol/control~defaults} is used.\n * @property {number} [pixelRatio=window.devicePixelRatio] The ratio between\n * physical pixels and device-independent pixels (dips) on the device.\n * @property {Collection<import(\"./interaction/Interaction.js\").default>|Array<import(\"./interaction/Interaction.js\").default>} [interactions]\n * Interactions that are initially added to the map. If not specified,\n * {@link module:ol/interaction~defaults} is used.\n * @property {HTMLElement|Document|string} [keyboardEventTarget] The element to\n * listen to keyboard events on. This determines when the `KeyboardPan` and\n * `KeyboardZoom` interactions trigger. For example, if this option is set to\n * `document` the keyboard interactions will always trigger. If this option is\n * not specified, the element the library listens to keyboard events on is the\n * map target (i.e. the user-provided div for the map). If this is not\n * `document`, the target element needs to be focused for key events to be\n * emitted, requiring that the target element has a `tabindex` attribute.\n * @property {Array<import(\"./layer/Base.js\").default>|Collection<import(\"./layer/Base.js\").default>|LayerGroup} [layers]\n * Layers. If this is not defined, a map with no layers will be rendered. Note\n * that layers are rendered in the order supplied, so if you want, for example,\n * a vector layer to appear on top of a tile layer, it must come after the tile\n * layer.\n * @property {number} [maxTilesLoading=16] Maximum number tiles to load\n * simultaneously.\n * @property {boolean} [loadTilesWhileAnimating=false] When set to `true`, tiles\n * will be loaded during animations. This may improve the user experience, but\n * can also make animations stutter on devices with slow memory.\n * @property {boolean} [loadTilesWhileInteracting=false] When set to `true`,\n * tiles will be loaded while interacting with the map. This may improve the\n * user experience, but can also make map panning and zooming choppy on devices\n * with slow memory.\n * @property {number} [moveTolerance=1] The minimum distance in pixels the\n * cursor must move to be detected as a map move event instead of a click.\n * Increasing this value can make it easier to click on the map.\n * @property {Collection<import(\"./Overlay.js\").default>|Array<import(\"./Overlay.js\").default>} [overlays]\n * Overlays initially added to the map. By default, no overlays are added.\n * @property {HTMLElement|string} [target] The container for the map, either the\n * element itself or the `id` of the element. If not specified at construction\n * time, {@link module:ol/Map~Map#setTarget} must be called for the map to be\n * rendered.\n * @property {View} [view] The map's view.  No layer sources will be\n * fetched unless this is specified at construction time or through\n * {@link module:ol/Map~Map#setView}.\n */\n\n\n/**\n * @fires import(\"./MapBrowserEvent.js\").MapBrowserEvent\n * @fires import(\"./MapEvent.js\").MapEvent\n * @fires module:ol/render/Event~RenderEvent#postcompose\n * @fires module:ol/render/Event~RenderEvent#precompose\n * @fires module:ol/render/Event~RenderEvent#rendercomplete\n * @api\n */\nclass PluggableMap extends BaseObject {\n\n  /**\n   * @param {MapOptions} options Map options.\n   */\n  constructor(options) {\n\n    super();\n\n    const optionsInternal = createOptionsInternal(options);\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.maxTilesLoading_ = options.maxTilesLoading !== undefined ? options.maxTilesLoading : 16;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.loadTilesWhileAnimating_ =\n        options.loadTilesWhileAnimating !== undefined ?\n          options.loadTilesWhileAnimating : false;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.loadTilesWhileInteracting_ =\n        options.loadTilesWhileInteracting !== undefined ?\n          options.loadTilesWhileInteracting : false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = options.pixelRatio !== undefined ?\n      options.pixelRatio : DEVICE_PIXEL_RATIO;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.animationDelayKey_;\n\n    /**\n     * @private\n     */\n    this.animationDelay_ = function() {\n      this.animationDelayKey_ = undefined;\n      this.renderFrame_.call(this, Date.now());\n    }.bind(this);\n\n    /**\n     * @private\n     * @type {import(\"./transform.js\").Transform}\n     */\n    this.coordinateToPixelTransform_ = createTransform();\n\n    /**\n     * @private\n     * @type {import(\"./transform.js\").Transform}\n     */\n    this.pixelToCoordinateTransform_ = createTransform();\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.frameIndex_ = 0;\n\n    /**\n     * @private\n     * @type {?FrameState}\n     */\n    this.frameState_ = null;\n\n    /**\n     * The extent at the previous 'moveend' event.\n     * @private\n     * @type {import(\"./extent.js\").Extent}\n     */\n    this.previousExtent_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"./events.js\").EventsKey}\n     */\n    this.viewPropertyListenerKey_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"./events.js\").EventsKey}\n     */\n    this.viewChangeListenerKey_ = null;\n\n    /**\n     * @private\n     * @type {Array<import(\"./events.js\").EventsKey>}\n     */\n    this.layerGroupPropertyListenerKeys_ = null;\n\n    /**\n     * @private\n     * @type {!HTMLElement}\n     */\n    this.viewport_ = document.createElement('div');\n    this.viewport_.className = 'ol-viewport' + (TOUCH ? ' ol-touch' : '');\n    this.viewport_.style.position = 'relative';\n    this.viewport_.style.overflow = 'hidden';\n    this.viewport_.style.width = '100%';\n    this.viewport_.style.height = '100%';\n    // prevent page zoom on IE >= 10 browsers\n    this.viewport_.style.msTouchAction = 'none';\n    this.viewport_.style.touchAction = 'none';\n\n    /**\n     * @private\n     * @type {!HTMLElement}\n     */\n    this.overlayContainer_ = document.createElement('div');\n    this.overlayContainer_.className = 'ol-overlaycontainer';\n    this.viewport_.appendChild(this.overlayContainer_);\n\n    /**\n     * @private\n     * @type {!HTMLElement}\n     */\n    this.overlayContainerStopEvent_ = document.createElement('div');\n    this.overlayContainerStopEvent_.className = 'ol-overlaycontainer-stopevent';\n    const overlayEvents = [\n      EventType.CLICK,\n      EventType.DBLCLICK,\n      EventType.MOUSEDOWN,\n      EventType.TOUCHSTART,\n      EventType.MSPOINTERDOWN,\n      MapBrowserEventType.POINTERDOWN,\n      EventType.MOUSEWHEEL,\n      EventType.WHEEL\n    ];\n    for (let i = 0, ii = overlayEvents.length; i < ii; ++i) {\n      listen(this.overlayContainerStopEvent_, overlayEvents[i], stopPropagation);\n    }\n    this.viewport_.appendChild(this.overlayContainerStopEvent_);\n\n    /**\n     * @private\n     * @type {MapBrowserEventHandler}\n     */\n    this.mapBrowserEventHandler_ = new MapBrowserEventHandler(this, options.moveTolerance);\n    for (const key in MapBrowserEventType) {\n      listen(this.mapBrowserEventHandler_, MapBrowserEventType[key],\n        this.handleMapBrowserEvent, this);\n    }\n\n    /**\n     * @private\n     * @type {HTMLElement|Document}\n     */\n    this.keyboardEventTarget_ = optionsInternal.keyboardEventTarget;\n\n    /**\n     * @private\n     * @type {Array<import(\"./events.js\").EventsKey>}\n     */\n    this.keyHandlerKeys_ = null;\n\n    listen(this.viewport_, EventType.CONTEXTMENU, this.handleBrowserEvent, this);\n    listen(this.viewport_, EventType.WHEEL, this.handleBrowserEvent, this);\n    listen(this.viewport_, EventType.MOUSEWHEEL, this.handleBrowserEvent, this);\n\n    /**\n     * @type {Collection<import(\"./control/Control.js\").default>}\n     * @protected\n     */\n    this.controls = optionsInternal.controls || new Collection();\n\n    /**\n     * @type {Collection<import(\"./interaction/Interaction.js\").default>}\n     * @protected\n     */\n    this.interactions = optionsInternal.interactions || new Collection();\n\n    /**\n     * @type {Collection<import(\"./Overlay.js\").default>}\n     * @private\n     */\n    this.overlays_ = optionsInternal.overlays;\n\n    /**\n     * A lookup of overlays by id.\n     * @private\n     * @type {Object<string, import(\"./Overlay.js\").default>}\n     */\n    this.overlayIdIndex_ = {};\n\n    /**\n     * @type {import(\"./renderer/Map.js\").default}\n     * @private\n     */\n    this.renderer_ = this.createRenderer();\n\n    /**\n     * @type {function(Event)|undefined}\n     * @private\n     */\n    this.handleResize_;\n\n    /**\n     * @private\n     * @type {import(\"./coordinate.js\").Coordinate}\n     */\n    this.focus_ = null;\n\n    /**\n     * @private\n     * @type {!Array<PostRenderFunction>}\n     */\n    this.postRenderFunctions_ = [];\n\n    /**\n     * @private\n     * @type {TileQueue}\n     */\n    this.tileQueue_ = new TileQueue(\n      this.getTilePriority.bind(this),\n      this.handleTileChange_.bind(this));\n\n    /**\n     * Uids of features to skip at rendering time.\n     * @type {Object<string, boolean>}\n     * @private\n     */\n    this.skippedFeatureUids_ = {};\n\n    listen(\n      this, getChangeEventType(MapProperty.LAYERGROUP),\n      this.handleLayerGroupChanged_, this);\n    listen(this, getChangeEventType(MapProperty.VIEW),\n      this.handleViewChanged_, this);\n    listen(this, getChangeEventType(MapProperty.SIZE),\n      this.handleSizeChanged_, this);\n    listen(this, getChangeEventType(MapProperty.TARGET),\n      this.handleTargetChanged_, this);\n\n    // setProperties will trigger the rendering of the map if the map\n    // is \"defined\" already.\n    this.setProperties(optionsInternal.values);\n\n    this.controls.forEach(\n      /**\n       * @param {import(\"./control/Control.js\").default} control Control.\n       * @this {PluggableMap}\n       */\n      (function(control) {\n        control.setMap(this);\n      }).bind(this));\n\n    listen(this.controls, CollectionEventType.ADD,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        event.element.setMap(this);\n      }, this);\n\n    listen(this.controls, CollectionEventType.REMOVE,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        event.element.setMap(null);\n      }, this);\n\n    this.interactions.forEach(\n      /**\n       * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction.\n       * @this {PluggableMap}\n       */\n      (function(interaction) {\n        interaction.setMap(this);\n      }).bind(this));\n\n    listen(this.interactions, CollectionEventType.ADD,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        event.element.setMap(this);\n      }, this);\n\n    listen(this.interactions, CollectionEventType.REMOVE,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        event.element.setMap(null);\n      }, this);\n\n    this.overlays_.forEach(this.addOverlayInternal_.bind(this));\n\n    listen(this.overlays_, CollectionEventType.ADD,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        this.addOverlayInternal_(/** @type {import(\"./Overlay.js\").default} */ (event.element));\n      }, this);\n\n    listen(this.overlays_, CollectionEventType.REMOVE,\n      /**\n       * @param {import(\"./Collection.js\").CollectionEvent} event CollectionEvent.\n       */\n      function(event) {\n        const overlay = /** @type {import(\"./Overlay.js\").default} */ (event.element);\n        const id = overlay.getId();\n        if (id !== undefined) {\n          delete this.overlayIdIndex_[id.toString()];\n        }\n        event.element.setMap(null);\n      }, this);\n\n  }\n\n  /**\n   * @abstract\n   * @return {import(\"./renderer/Map.js\").default} The map renderer\n   */\n  createRenderer() {\n    throw new Error('Use a map type that has a createRenderer method');\n  }\n\n  /**\n   * Add the given control to the map.\n   * @param {import(\"./control/Control.js\").default} control Control.\n   * @api\n   */\n  addControl(control) {\n    this.getControls().push(control);\n  }\n\n  /**\n   * Add the given interaction to the map.\n   * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction to add.\n   * @api\n   */\n  addInteraction(interaction) {\n    this.getInteractions().push(interaction);\n  }\n\n  /**\n   * Adds the given layer to the top of this map. If you want to add a layer\n   * elsewhere in the stack, use `getLayers()` and the methods available on\n   * {@link module:ol/Collection~Collection}.\n   * @param {import(\"./layer/Base.js\").default} layer Layer.\n   * @api\n   */\n  addLayer(layer) {\n    const layers = this.getLayerGroup().getLayers();\n    layers.push(layer);\n  }\n\n  /**\n   * Add the given overlay to the map.\n   * @param {import(\"./Overlay.js\").default} overlay Overlay.\n   * @api\n   */\n  addOverlay(overlay) {\n    this.getOverlays().push(overlay);\n  }\n\n  /**\n   * This deals with map's overlay collection changes.\n   * @param {import(\"./Overlay.js\").default} overlay Overlay.\n   * @private\n   */\n  addOverlayInternal_(overlay) {\n    const id = overlay.getId();\n    if (id !== undefined) {\n      this.overlayIdIndex_[id.toString()] = overlay;\n    }\n    overlay.setMap(this);\n  }\n\n  /**\n   *\n   * @inheritDoc\n   */\n  disposeInternal() {\n    this.mapBrowserEventHandler_.dispose();\n    unlisten(this.viewport_, EventType.CONTEXTMENU, this.handleBrowserEvent, this);\n    unlisten(this.viewport_, EventType.WHEEL, this.handleBrowserEvent, this);\n    unlisten(this.viewport_, EventType.MOUSEWHEEL, this.handleBrowserEvent, this);\n    if (this.handleResize_ !== undefined) {\n      removeEventListener(EventType.RESIZE, this.handleResize_, false);\n      this.handleResize_ = undefined;\n    }\n    if (this.animationDelayKey_) {\n      cancelAnimationFrame(this.animationDelayKey_);\n      this.animationDelayKey_ = undefined;\n    }\n    this.setTarget(null);\n    super.disposeInternal();\n  }\n\n  /**\n   * Detect features that intersect a pixel on the viewport, and execute a\n   * callback with each intersecting feature. Layers included in the detection can\n   * be configured through the `layerFilter` option in `opt_options`.\n   * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n   * @param {function(this: S, import(\"./Feature.js\").FeatureLike,\n   *     import(\"./layer/Layer.js\").default): T} callback Feature callback. The callback will be\n   *     called with two arguments. The first argument is one\n   *     {@link module:ol/Feature feature} or\n   *     {@link module:ol/render/Feature render feature} at the pixel, the second is\n   *     the {@link module:ol/layer/Layer layer} of the feature and will be null for\n   *     unmanaged layers. To stop detection, callback functions can return a\n   *     truthy value.\n   * @param {AtPixelOptions=} opt_options Optional options.\n   * @return {T|undefined} Callback result, i.e. the return value of last\n   * callback execution, or the first truthy callback return value.\n   * @template S,T\n   * @api\n   */\n  forEachFeatureAtPixel(pixel, callback, opt_options) {\n    if (!this.frameState_) {\n      return;\n    }\n    const coordinate = this.getCoordinateFromPixel(pixel);\n    opt_options = opt_options !== undefined ? opt_options :\n      /** @type {AtPixelOptions} */ ({});\n    const hitTolerance = opt_options.hitTolerance !== undefined ?\n      opt_options.hitTolerance * this.frameState_.pixelRatio : 0;\n    const layerFilter = opt_options.layerFilter !== undefined ?\n      opt_options.layerFilter : TRUE;\n    return this.renderer_.forEachFeatureAtCoordinate(\n      coordinate, this.frameState_, hitTolerance, callback, null,\n      layerFilter, null);\n  }\n\n  /**\n   * Get all features that intersect a pixel on the viewport.\n   * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n   * @param {AtPixelOptions=} opt_options Optional options.\n   * @return {Array<import(\"./Feature.js\").FeatureLike>} The detected features or\n   * `null` if none were found.\n   * @api\n   */\n  getFeaturesAtPixel(pixel, opt_options) {\n    let features = null;\n    this.forEachFeatureAtPixel(pixel, function(feature) {\n      if (!features) {\n        features = [];\n      }\n      features.push(feature);\n    }, opt_options);\n    return features;\n  }\n\n  /**\n   * Detect layers that have a color value at a pixel on the viewport, and\n   * execute a callback with each matching layer. Layers included in the\n   * detection can be configured through `opt_layerFilter`.\n   * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n   * @param {function(this: S, import(\"./layer/Layer.js\").default, (Uint8ClampedArray|Uint8Array)): T} callback\n   *     Layer callback. This callback will receive two arguments: first is the\n   *     {@link module:ol/layer/Layer layer}, second argument is an array representing\n   *     [R, G, B, A] pixel values (0 - 255) and will be `null` for layer types\n   *     that do not currently support this argument. To stop detection, callback\n   *     functions can return a truthy value.\n   * @param {AtPixelOptions=} opt_options Configuration options.\n   * @return {T|undefined} Callback result, i.e. the return value of last\n   * callback execution, or the first truthy callback return value.\n   * @template S,T\n   * @api\n   */\n  forEachLayerAtPixel(pixel, callback, opt_options) {\n    if (!this.frameState_) {\n      return;\n    }\n    const options = opt_options || /** @type {AtPixelOptions} */ ({});\n    const hitTolerance = options.hitTolerance !== undefined ?\n      opt_options.hitTolerance * this.frameState_.pixelRatio : 0;\n    const layerFilter = options.layerFilter || TRUE;\n    return this.renderer_.forEachLayerAtPixel(\n      pixel, this.frameState_, hitTolerance, callback, null, layerFilter, null);\n  }\n\n  /**\n   * Detect if features intersect a pixel on the viewport. Layers included in the\n   * detection can be configured through `opt_layerFilter`.\n   * @param {import(\"./pixel.js\").Pixel} pixel Pixel.\n   * @param {AtPixelOptions=} opt_options Optional options.\n   * @return {boolean} Is there a feature at the given pixel?\n   * @template U\n   * @api\n   */\n  hasFeatureAtPixel(pixel, opt_options) {\n    if (!this.frameState_) {\n      return false;\n    }\n    const coordinate = this.getCoordinateFromPixel(pixel);\n    opt_options = opt_options !== undefined ? opt_options :\n      /** @type {AtPixelOptions} */ ({});\n    const layerFilter = opt_options.layerFilter !== undefined ? opt_options.layerFilter : TRUE;\n    const hitTolerance = opt_options.hitTolerance !== undefined ?\n      opt_options.hitTolerance * this.frameState_.pixelRatio : 0;\n    return this.renderer_.hasFeatureAtCoordinate(\n      coordinate, this.frameState_, hitTolerance, layerFilter, null);\n  }\n\n  /**\n   * Returns the coordinate in view projection for a browser event.\n   * @param {Event} event Event.\n   * @return {import(\"./coordinate.js\").Coordinate} Coordinate.\n   * @api\n   */\n  getEventCoordinate(event) {\n    return this.getCoordinateFromPixel(this.getEventPixel(event));\n  }\n\n  /**\n   * Returns the map pixel position for a browser event relative to the viewport.\n   * @param {Event|TouchEvent} event Event.\n   * @return {import(\"./pixel.js\").Pixel} Pixel.\n   * @api\n   */\n  getEventPixel(event) {\n    const viewportPosition = this.viewport_.getBoundingClientRect();\n    const eventPosition = 'changedTouches' in event ?\n      /** @type {TouchEvent} */ (event).changedTouches[0] :\n      /** @type {MouseEvent} */ (event);\n\n    return [\n      eventPosition.clientX - viewportPosition.left,\n      eventPosition.clientY - viewportPosition.top\n    ];\n  }\n\n  /**\n   * Get the target in which this map is rendered.\n   * Note that this returns what is entered as an option or in setTarget:\n   * if that was an element, it returns an element; if a string, it returns that.\n   * @return {HTMLElement|string|undefined} The Element or id of the Element that the\n   *     map is rendered in.\n   * @observable\n   * @api\n   */\n  getTarget() {\n    return /** @type {HTMLElement|string|undefined} */ (this.get(MapProperty.TARGET));\n  }\n\n  /**\n   * Get the DOM element into which this map is rendered. In contrast to\n   * `getTarget` this method always return an `Element`, or `null` if the\n   * map has no target.\n   * @return {HTMLElement} The element that the map is rendered in.\n   * @api\n   */\n  getTargetElement() {\n    const target = this.getTarget();\n    if (target !== undefined) {\n      return typeof target === 'string' ? document.getElementById(target) : target;\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * Get the coordinate for a given pixel.  This returns a coordinate in the\n   * map view projection.\n   * @param {import(\"./pixel.js\").Pixel} pixel Pixel position in the map viewport.\n   * @return {import(\"./coordinate.js\").Coordinate} The coordinate for the pixel position.\n   * @api\n   */\n  getCoordinateFromPixel(pixel) {\n    const frameState = this.frameState_;\n    if (!frameState) {\n      return null;\n    } else {\n      return applyTransform(frameState.pixelToCoordinateTransform, pixel.slice());\n    }\n  }\n\n  /**\n   * Get the map controls. Modifying this collection changes the controls\n   * associated with the map.\n   * @return {Collection<import(\"./control/Control.js\").default>} Controls.\n   * @api\n   */\n  getControls() {\n    return this.controls;\n  }\n\n  /**\n   * Get the map overlays. Modifying this collection changes the overlays\n   * associated with the map.\n   * @return {Collection<import(\"./Overlay.js\").default>} Overlays.\n   * @api\n   */\n  getOverlays() {\n    return this.overlays_;\n  }\n\n  /**\n   * Get an overlay by its identifier (the value returned by overlay.getId()).\n   * Note that the index treats string and numeric identifiers as the same. So\n   * `map.getOverlayById(2)` will return an overlay with id `'2'` or `2`.\n   * @param {string|number} id Overlay identifier.\n   * @return {import(\"./Overlay.js\").default} Overlay.\n   * @api\n   */\n  getOverlayById(id) {\n    const overlay = this.overlayIdIndex_[id.toString()];\n    return overlay !== undefined ? overlay : null;\n  }\n\n  /**\n   * Get the map interactions. Modifying this collection changes the interactions\n   * associated with the map.\n   *\n   * Interactions are used for e.g. pan, zoom and rotate.\n   * @return {Collection<import(\"./interaction/Interaction.js\").default>} Interactions.\n   * @api\n   */\n  getInteractions() {\n    return this.interactions;\n  }\n\n  /**\n   * Get the layergroup associated with this map.\n   * @return {LayerGroup} A layer group containing the layers in this map.\n   * @observable\n   * @api\n   */\n  getLayerGroup() {\n    return (\n      /** @type {LayerGroup} */ (this.get(MapProperty.LAYERGROUP))\n    );\n  }\n\n  /**\n   * Get the collection of layers associated with this map.\n   * @return {!Collection<import(\"./layer/Base.js\").default>} Layers.\n   * @api\n   */\n  getLayers() {\n    const layers = this.getLayerGroup().getLayers();\n    return layers;\n  }\n\n  /**\n   * Get the pixel for a coordinate.  This takes a coordinate in the map view\n   * projection and returns the corresponding pixel.\n   * @param {import(\"./coordinate.js\").Coordinate} coordinate A map coordinate.\n   * @return {import(\"./pixel.js\").Pixel} A pixel position in the map viewport.\n   * @api\n   */\n  getPixelFromCoordinate(coordinate) {\n    const frameState = this.frameState_;\n    if (!frameState) {\n      return null;\n    } else {\n      return applyTransform(frameState.coordinateToPixelTransform, coordinate.slice(0, 2));\n    }\n  }\n\n  /**\n   * Get the map renderer.\n   * @return {import(\"./renderer/Map.js\").default} Renderer\n   */\n  getRenderer() {\n    return this.renderer_;\n  }\n\n  /**\n   * Get the size of this map.\n   * @return {import(\"./size.js\").Size|undefined} The size in pixels of the map in the DOM.\n   * @observable\n   * @api\n   */\n  getSize() {\n    return (\n      /** @type {import(\"./size.js\").Size|undefined} */ (this.get(MapProperty.SIZE))\n    );\n  }\n\n  /**\n   * Get the view associated with this map. A view manages properties such as\n   * center and resolution.\n   * @return {View} The view that controls this map.\n   * @observable\n   * @api\n   */\n  getView() {\n    return (\n      /** @type {View} */ (this.get(MapProperty.VIEW))\n    );\n  }\n\n  /**\n   * Get the element that serves as the map viewport.\n   * @return {HTMLElement} Viewport.\n   * @api\n   */\n  getViewport() {\n    return this.viewport_;\n  }\n\n  /**\n   * Get the element that serves as the container for overlays.  Elements added to\n   * this container will let mousedown and touchstart events through to the map,\n   * so clicks and gestures on an overlay will trigger {@link module:ol/MapBrowserEvent~MapBrowserEvent}\n   * events.\n   * @return {!HTMLElement} The map's overlay container.\n   */\n  getOverlayContainer() {\n    return this.overlayContainer_;\n  }\n\n  /**\n   * Get the element that serves as a container for overlays that don't allow\n   * event propagation. Elements added to this container won't let mousedown and\n   * touchstart events through to the map, so clicks and gestures on an overlay\n   * don't trigger any {@link module:ol/MapBrowserEvent~MapBrowserEvent}.\n   * @return {!HTMLElement} The map's overlay container that stops events.\n   */\n  getOverlayContainerStopEvent() {\n    return this.overlayContainerStopEvent_;\n  }\n\n  /**\n   * @param {import(\"./Tile.js\").default} tile Tile.\n   * @param {string} tileSourceKey Tile source key.\n   * @param {import(\"./coordinate.js\").Coordinate} tileCenter Tile center.\n   * @param {number} tileResolution Tile resolution.\n   * @return {number} Tile priority.\n   */\n  getTilePriority(tile, tileSourceKey, tileCenter, tileResolution) {\n    // Filter out tiles at higher zoom levels than the current zoom level, or that\n    // are outside the visible extent.\n    const frameState = this.frameState_;\n    if (!frameState || !(tileSourceKey in frameState.wantedTiles)) {\n      return DROP;\n    }\n    if (!frameState.wantedTiles[tileSourceKey][tile.getKey()]) {\n      return DROP;\n    }\n    // Prioritize the highest zoom level tiles closest to the focus.\n    // Tiles at higher zoom levels are prioritized using Math.log(tileResolution).\n    // Within a zoom level, tiles are prioritized by the distance in pixels\n    // between the center of the tile and the focus.  The factor of 65536 means\n    // that the prioritization should behave as desired for tiles up to\n    // 65536 * Math.log(2) = 45426 pixels from the focus.\n    const deltaX = tileCenter[0] - frameState.focus[0];\n    const deltaY = tileCenter[1] - frameState.focus[1];\n    return 65536 * Math.log(tileResolution) +\n        Math.sqrt(deltaX * deltaX + deltaY * deltaY) / tileResolution;\n  }\n\n  /**\n   * @param {Event} browserEvent Browser event.\n   * @param {string=} opt_type Type.\n   */\n  handleBrowserEvent(browserEvent, opt_type) {\n    const type = opt_type || browserEvent.type;\n    const mapBrowserEvent = new MapBrowserEvent(type, this, browserEvent);\n    this.handleMapBrowserEvent(mapBrowserEvent);\n  }\n\n  /**\n   * @param {MapBrowserEvent} mapBrowserEvent The event to handle.\n   */\n  handleMapBrowserEvent(mapBrowserEvent) {\n    if (!this.frameState_) {\n      // With no view defined, we cannot translate pixels into geographical\n      // coordinates so interactions cannot be used.\n      return;\n    }\n    this.focus_ = mapBrowserEvent.coordinate;\n    mapBrowserEvent.frameState = this.frameState_;\n    const interactionsArray = this.getInteractions().getArray();\n    if (this.dispatchEvent(mapBrowserEvent) !== false) {\n      for (let i = interactionsArray.length - 1; i >= 0; i--) {\n        const interaction = interactionsArray[i];\n        if (!interaction.getActive()) {\n          continue;\n        }\n        const cont = interaction.handleEvent(mapBrowserEvent);\n        if (!cont) {\n          break;\n        }\n      }\n    }\n  }\n\n  /**\n   * @protected\n   */\n  handlePostRender() {\n\n    const frameState = this.frameState_;\n\n    // Manage the tile queue\n    // Image loads are expensive and a limited resource, so try to use them\n    // efficiently:\n    // * When the view is static we allow a large number of parallel tile loads\n    //   to complete the frame as quickly as possible.\n    // * When animating or interacting, image loads can cause janks, so we reduce\n    //   the maximum number of loads per frame and limit the number of parallel\n    //   tile loads to remain reactive to view changes and to reduce the chance of\n    //   loading tiles that will quickly disappear from view.\n    const tileQueue = this.tileQueue_;\n    if (!tileQueue.isEmpty()) {\n      let maxTotalLoading = this.maxTilesLoading_;\n      let maxNewLoads = maxTotalLoading;\n      if (frameState) {\n        const hints = frameState.viewHints;\n        if (hints[ViewHint.ANIMATING]) {\n          maxTotalLoading = this.loadTilesWhileAnimating_ ? 8 : 0;\n          maxNewLoads = 2;\n        }\n        if (hints[ViewHint.INTERACTING]) {\n          maxTotalLoading = this.loadTilesWhileInteracting_ ? 8 : 0;\n          maxNewLoads = 2;\n        }\n      }\n      if (tileQueue.getTilesLoading() < maxTotalLoading) {\n        tileQueue.reprioritize(); // FIXME only call if view has changed\n        tileQueue.loadMoreTiles(maxTotalLoading, maxNewLoads);\n      }\n    }\n    if (frameState && this.hasListener(RenderEventType.RENDERCOMPLETE) && !frameState.animate &&\n        !this.tileQueue_.getTilesLoading() && !getLoading(this.getLayers().getArray())) {\n      this.renderer_.dispatchRenderEvent(RenderEventType.RENDERCOMPLETE, frameState);\n    }\n\n    const postRenderFunctions = this.postRenderFunctions_;\n    for (let i = 0, ii = postRenderFunctions.length; i < ii; ++i) {\n      postRenderFunctions[i](this, frameState);\n    }\n    postRenderFunctions.length = 0;\n  }\n\n  /**\n   * @private\n   */\n  handleSizeChanged_() {\n    this.render();\n  }\n\n  /**\n   * @private\n   */\n  handleTargetChanged_() {\n    // target may be undefined, null, a string or an Element.\n    // If it's a string we convert it to an Element before proceeding.\n    // If it's not now an Element we remove the viewport from the DOM.\n    // If it's an Element we append the viewport element to it.\n\n    let targetElement;\n    if (this.getTarget()) {\n      targetElement = this.getTargetElement();\n    }\n\n    if (this.keyHandlerKeys_) {\n      for (let i = 0, ii = this.keyHandlerKeys_.length; i < ii; ++i) {\n        unlistenByKey(this.keyHandlerKeys_[i]);\n      }\n      this.keyHandlerKeys_ = null;\n    }\n\n    if (!targetElement) {\n      this.renderer_.removeLayerRenderers();\n      removeNode(this.viewport_);\n      if (this.handleResize_ !== undefined) {\n        removeEventListener(EventType.RESIZE, this.handleResize_, false);\n        this.handleResize_ = undefined;\n      }\n    } else {\n      targetElement.appendChild(this.viewport_);\n\n      const keyboardEventTarget = !this.keyboardEventTarget_ ?\n        targetElement : this.keyboardEventTarget_;\n      this.keyHandlerKeys_ = [\n        listen(keyboardEventTarget, EventType.KEYDOWN, this.handleBrowserEvent, this),\n        listen(keyboardEventTarget, EventType.KEYPRESS, this.handleBrowserEvent, this)\n      ];\n\n      if (!this.handleResize_) {\n        this.handleResize_ = this.updateSize.bind(this);\n        addEventListener(EventType.RESIZE, this.handleResize_, false);\n      }\n    }\n\n    this.updateSize();\n    // updateSize calls setSize, so no need to call this.render\n    // ourselves here.\n  }\n\n  /**\n   * @private\n   */\n  handleTileChange_() {\n    this.render();\n  }\n\n  /**\n   * @private\n   */\n  handleViewPropertyChanged_() {\n    this.render();\n  }\n\n  /**\n   * @private\n   */\n  handleViewChanged_() {\n    if (this.viewPropertyListenerKey_) {\n      unlistenByKey(this.viewPropertyListenerKey_);\n      this.viewPropertyListenerKey_ = null;\n    }\n    if (this.viewChangeListenerKey_) {\n      unlistenByKey(this.viewChangeListenerKey_);\n      this.viewChangeListenerKey_ = null;\n    }\n    const view = this.getView();\n    if (view) {\n      this.viewport_.setAttribute('data-view', getUid(view));\n      this.viewPropertyListenerKey_ = listen(\n        view, ObjectEventType.PROPERTYCHANGE,\n        this.handleViewPropertyChanged_, this);\n      this.viewChangeListenerKey_ = listen(\n        view, EventType.CHANGE,\n        this.handleViewPropertyChanged_, this);\n    }\n    this.render();\n  }\n\n  /**\n   * @private\n   */\n  handleLayerGroupChanged_() {\n    if (this.layerGroupPropertyListenerKeys_) {\n      this.layerGroupPropertyListenerKeys_.forEach(unlistenByKey);\n      this.layerGroupPropertyListenerKeys_ = null;\n    }\n    const layerGroup = this.getLayerGroup();\n    if (layerGroup) {\n      this.layerGroupPropertyListenerKeys_ = [\n        listen(\n          layerGroup, ObjectEventType.PROPERTYCHANGE,\n          this.render, this),\n        listen(\n          layerGroup, EventType.CHANGE,\n          this.render, this)\n      ];\n    }\n    this.render();\n  }\n\n  /**\n   * @return {boolean} Is rendered.\n   */\n  isRendered() {\n    return !!this.frameState_;\n  }\n\n  /**\n   * Requests an immediate render in a synchronous manner.\n   * @api\n   */\n  renderSync() {\n    if (this.animationDelayKey_) {\n      cancelAnimationFrame(this.animationDelayKey_);\n    }\n    this.animationDelay_();\n  }\n\n  /**\n   * Request a map rendering (at the next animation frame).\n   * @api\n   */\n  render() {\n    if (this.animationDelayKey_ === undefined) {\n      this.animationDelayKey_ = requestAnimationFrame(this.animationDelay_);\n    }\n  }\n\n  /**\n   * Remove the given control from the map.\n   * @param {import(\"./control/Control.js\").default} control Control.\n   * @return {import(\"./control/Control.js\").default|undefined} The removed control (or undefined\n   *     if the control was not found).\n   * @api\n   */\n  removeControl(control) {\n    return this.getControls().remove(control);\n  }\n\n  /**\n   * Remove the given interaction from the map.\n   * @param {import(\"./interaction/Interaction.js\").default} interaction Interaction to remove.\n   * @return {import(\"./interaction/Interaction.js\").default|undefined} The removed interaction (or\n   *     undefined if the interaction was not found).\n   * @api\n   */\n  removeInteraction(interaction) {\n    return this.getInteractions().remove(interaction);\n  }\n\n  /**\n   * Removes the given layer from the map.\n   * @param {import(\"./layer/Base.js\").default} layer Layer.\n   * @return {import(\"./layer/Base.js\").default|undefined} The removed layer (or undefined if the\n   *     layer was not found).\n   * @api\n   */\n  removeLayer(layer) {\n    const layers = this.getLayerGroup().getLayers();\n    return layers.remove(layer);\n  }\n\n  /**\n   * Remove the given overlay from the map.\n   * @param {import(\"./Overlay.js\").default} overlay Overlay.\n   * @return {import(\"./Overlay.js\").default|undefined} The removed overlay (or undefined\n   *     if the overlay was not found).\n   * @api\n   */\n  removeOverlay(overlay) {\n    return this.getOverlays().remove(overlay);\n  }\n\n  /**\n   * @param {number} time Time.\n   * @private\n   */\n  renderFrame_(time) {\n    let viewState;\n\n    const size = this.getSize();\n    const view = this.getView();\n    const extent = createEmpty();\n    const previousFrameState = this.frameState_;\n    /** @type {?FrameState} */\n    let frameState = null;\n    if (size !== undefined && hasArea(size) && view && view.isDef()) {\n      const viewHints = view.getHints(this.frameState_ ? this.frameState_.viewHints : undefined);\n      const layerStatesArray = this.getLayerGroup().getLayerStatesArray();\n      const layerStates = {};\n      for (let i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n        layerStates[getUid(layerStatesArray[i].layer)] = layerStatesArray[i];\n      }\n      viewState = view.getState(this.pixelRatio_);\n      frameState = /** @type {FrameState} */ ({\n        animate: false,\n        coordinateToPixelTransform: this.coordinateToPixelTransform_,\n        extent: extent,\n        focus: this.focus_ ? this.focus_ : viewState.center,\n        index: this.frameIndex_++,\n        layerStates: layerStates,\n        layerStatesArray: layerStatesArray,\n        pixelRatio: this.pixelRatio_,\n        pixelToCoordinateTransform: this.pixelToCoordinateTransform_,\n        postRenderFunctions: [],\n        size: size,\n        skippedFeatureUids: this.skippedFeatureUids_,\n        tileQueue: this.tileQueue_,\n        time: time,\n        usedTiles: {},\n        viewState: viewState,\n        viewHints: viewHints,\n        wantedTiles: {}\n      });\n    }\n\n    if (frameState) {\n      frameState.extent = getForViewAndSize(viewState.center,\n        viewState.resolution, viewState.rotation, frameState.size, extent);\n    }\n\n    this.frameState_ = frameState;\n    this.renderer_.renderFrame(frameState);\n\n    if (frameState) {\n      if (frameState.animate) {\n        this.render();\n      }\n      Array.prototype.push.apply(this.postRenderFunctions_, frameState.postRenderFunctions);\n\n      if (previousFrameState) {\n        const moveStart = !this.previousExtent_ ||\n                    (!isEmpty(this.previousExtent_) &&\n                    !equals(frameState.extent, this.previousExtent_));\n        if (moveStart) {\n          this.dispatchEvent(\n            new MapEvent(MapEventType.MOVESTART, this, previousFrameState));\n          this.previousExtent_ = createOrUpdateEmpty(this.previousExtent_);\n        }\n      }\n\n      const idle = this.previousExtent_ &&\n          !frameState.viewHints[ViewHint.ANIMATING] &&\n          !frameState.viewHints[ViewHint.INTERACTING] &&\n          !equals(frameState.extent, this.previousExtent_);\n\n      if (idle) {\n        this.dispatchEvent(new MapEvent(MapEventType.MOVEEND, this, frameState));\n        clone(frameState.extent, this.previousExtent_);\n      }\n    }\n\n    this.dispatchEvent(new MapEvent(MapEventType.POSTRENDER, this, frameState));\n\n    setTimeout(this.handlePostRender.bind(this), 0);\n\n  }\n\n  /**\n   * Sets the layergroup of this map.\n   * @param {LayerGroup} layerGroup A layer group containing the layers in this map.\n   * @observable\n   * @api\n   */\n  setLayerGroup(layerGroup) {\n    this.set(MapProperty.LAYERGROUP, layerGroup);\n  }\n\n  /**\n   * Set the size of this map.\n   * @param {import(\"./size.js\").Size|undefined} size The size in pixels of the map in the DOM.\n   * @observable\n   * @api\n   */\n  setSize(size) {\n    this.set(MapProperty.SIZE, size);\n  }\n\n  /**\n   * Set the target element to render this map into.\n   * @param {HTMLElement|string|undefined} target The Element or id of the Element\n   *     that the map is rendered in.\n   * @observable\n   * @api\n   */\n  setTarget(target) {\n    this.set(MapProperty.TARGET, target);\n  }\n\n  /**\n   * Set the view for this map.\n   * @param {View} view The view that controls this map.\n   * @observable\n   * @api\n   */\n  setView(view) {\n    this.set(MapProperty.VIEW, view);\n  }\n\n  /**\n   * @param {import(\"./Feature.js\").default} feature Feature.\n   */\n  skipFeature(feature) {\n    this.skippedFeatureUids_[getUid(feature)] = true;\n    this.render();\n  }\n\n  /**\n   * Force a recalculation of the map viewport size.  This should be called when\n   * third-party code changes the size of the map viewport.\n   * @api\n   */\n  updateSize() {\n    const targetElement = this.getTargetElement();\n\n    if (!targetElement) {\n      this.setSize(undefined);\n    } else {\n      const computedStyle = getComputedStyle(targetElement);\n      this.setSize([\n        targetElement.offsetWidth -\n            parseFloat(computedStyle['borderLeftWidth']) -\n            parseFloat(computedStyle['paddingLeft']) -\n            parseFloat(computedStyle['paddingRight']) -\n            parseFloat(computedStyle['borderRightWidth']),\n        targetElement.offsetHeight -\n            parseFloat(computedStyle['borderTopWidth']) -\n            parseFloat(computedStyle['paddingTop']) -\n            parseFloat(computedStyle['paddingBottom']) -\n            parseFloat(computedStyle['borderBottomWidth'])\n      ]);\n    }\n  }\n\n  /**\n   * @param {import(\"./Feature.js\").default} feature Feature.\n   */\n  unskipFeature(feature) {\n    delete this.skippedFeatureUids_[getUid(feature)];\n    this.render();\n  }\n}\n\n\n/**\n * @param {MapOptions} options Map options.\n * @return {MapOptionsInternal} Internal map options.\n */\nfunction createOptionsInternal(options) {\n\n  /**\n   * @type {HTMLElement|Document}\n   */\n  let keyboardEventTarget = null;\n  if (options.keyboardEventTarget !== undefined) {\n    keyboardEventTarget = typeof options.keyboardEventTarget === 'string' ?\n      document.getElementById(options.keyboardEventTarget) :\n      options.keyboardEventTarget;\n  }\n\n  /**\n   * @type {Object<string, *>}\n   */\n  const values = {};\n\n  const layerGroup = options.layers && typeof /** @type {?} */ (options.layers).getLayers === 'function' ?\n    /** @type {LayerGroup} */ (options.layers) : new LayerGroup({layers: /** @type {Collection} */ (options.layers)});\n  values[MapProperty.LAYERGROUP] = layerGroup;\n\n  values[MapProperty.TARGET] = options.target;\n\n  values[MapProperty.VIEW] = options.view !== undefined ?\n    options.view : new View();\n\n  let controls;\n  if (options.controls !== undefined) {\n    if (Array.isArray(options.controls)) {\n      controls = new Collection(options.controls.slice());\n    } else {\n      assert(typeof /** @type {?} */ (options.controls).getArray === 'function',\n        47); // Expected `controls` to be an array or an `import(\"./Collection.js\").Collection`\n      controls = /** @type {Collection} */ (options.controls);\n    }\n  }\n\n  let interactions;\n  if (options.interactions !== undefined) {\n    if (Array.isArray(options.interactions)) {\n      interactions = new Collection(options.interactions.slice());\n    } else {\n      assert(typeof /** @type {?} */ (options.interactions).getArray === 'function',\n        48); // Expected `interactions` to be an array or an `import(\"./Collection.js\").Collection`\n      interactions = /** @type {Collection} */ (options.interactions);\n    }\n  }\n\n  let overlays;\n  if (options.overlays !== undefined) {\n    if (Array.isArray(options.overlays)) {\n      overlays = new Collection(options.overlays.slice());\n    } else {\n      assert(typeof /** @type {?} */ (options.overlays).getArray === 'function',\n        49); // Expected `overlays` to be an array or an `import(\"./Collection.js\").Collection`\n      overlays = options.overlays;\n    }\n  } else {\n    overlays = new Collection();\n  }\n\n  return {\n    controls: controls,\n    interactions: interactions,\n    keyboardEventTarget: keyboardEventTarget,\n    overlays: overlays,\n    values: values\n  };\n\n}\nexport default PluggableMap;\n\n/**\n * @param  {Array<import(\"./layer/Base.js\").default>} layers Layers.\n * @return {boolean} Layers have sources that are still loading.\n */\nfunction getLoading(layers) {\n  for (let i = 0, ii = layers.length; i < ii; ++i) {\n    const layer = layers[i];\n    if (typeof /** @type {?} */ (layer).getLayers === 'function') {\n      return getLoading(/** @type {LayerGroup} */ (layer).getLayers().getArray());\n    } else {\n      const source = /** @type {import(\"./layer/Layer.js\").default} */ (\n        layer).getSource();\n      if (source && source.loading) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n","/**\n * @module ol/ImageCanvas\n */\nimport ImageBase from './ImageBase.js';\nimport ImageState from './ImageState.js';\n\n\n/**\n * A function that is called to trigger asynchronous canvas drawing.  It is\n * called with a \"done\" callback that should be called when drawing is done.\n * If any error occurs during drawing, the \"done\" callback should be called with\n * that error.\n *\n * @typedef {function(function(Error=))} Loader\n */\n\n\nclass ImageCanvas extends ImageBase {\n\n  /**\n   * @param {import(\"./extent.js\").Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {HTMLCanvasElement} canvas Canvas.\n   * @param {Loader=} opt_loader Optional loader function to\n   *     support asynchronous canvas drawing.\n   */\n  constructor(extent, resolution, pixelRatio, canvas, opt_loader) {\n\n    const state = opt_loader !== undefined ? ImageState.IDLE : ImageState.LOADED;\n\n    super(extent, resolution, pixelRatio, state);\n\n    /**\n     * Optional canvas loader function.\n     * @type {?Loader}\n     * @private\n     */\n    this.loader_ = opt_loader !== undefined ? opt_loader : null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = canvas;\n\n    /**\n     * @private\n     * @type {Error}\n     */\n    this.error_ = null;\n\n  }\n\n  /**\n   * Get any error associated with asynchronous rendering.\n   * @return {Error} Any error that occurred during rendering.\n   */\n  getError() {\n    return this.error_;\n  }\n\n  /**\n   * Handle async drawing complete.\n   * @param {Error=} err Any error during drawing.\n   * @private\n   */\n  handleLoad_(err) {\n    if (err) {\n      this.error_ = err;\n      this.state = ImageState.ERROR;\n    } else {\n      this.state = ImageState.LOADED;\n    }\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  load() {\n    if (this.state == ImageState.IDLE) {\n      this.state = ImageState.LOADING;\n      this.changed();\n      this.loader_(this.handleLoad_.bind(this));\n    }\n  }\n\n  /**\n   * @return {HTMLCanvasElement} Canvas element.\n   */\n  getImage() {\n    return this.canvas_;\n  }\n}\n\n\nexport default ImageCanvas;\n","/**\n * @module ol/render/Event\n */\n\nimport Event from '../events/Event.js';\n\nclass RenderEvent extends Event {\n\n  /**\n   * @param {import(\"./EventType.js\").default} type Type.\n   * @param {import(\"./VectorContext.js\").default=} opt_vectorContext Vector context.\n   * @param {import(\"../PluggableMap.js\").FrameState=} opt_frameState Frame state.\n   * @param {?CanvasRenderingContext2D=} opt_context Context.\n   * @param {?import(\"../webgl/Context.js\").default=} opt_glContext WebGL Context.\n   */\n  constructor(type, opt_vectorContext, opt_frameState, opt_context, opt_glContext) {\n\n    super(type);\n\n    /**\n     * For canvas, this is an instance of {@link module:ol/render/canvas/Immediate}.\n     * @type {import(\"./VectorContext.js\").default|undefined}\n     * @api\n     */\n    this.vectorContext = opt_vectorContext;\n\n    /**\n     * An object representing the current render frame state.\n     * @type {import(\"../PluggableMap.js\").FrameState|undefined}\n     * @api\n     */\n    this.frameState = opt_frameState;\n\n    /**\n     * Canvas context. Only available when a Canvas renderer is used, null\n     * otherwise.\n     * @type {CanvasRenderingContext2D|null|undefined}\n     * @api\n     */\n    this.context = opt_context;\n\n    /**\n     * WebGL context. Only available when a WebGL renderer is used, null\n     * otherwise.\n     * @type {import(\"../webgl/Context.js\").default|null|undefined}\n     * @api\n     */\n    this.glContext = opt_glContext;\n\n  }\n\n}\n\nexport default RenderEvent;\n","/**\n * @module ol/render/VectorContext\n */\n\n/**\n * @classdesc\n * Context for drawing geometries.  A vector context is available on render\n * events and does not need to be constructed directly.\n * @api\n */\nclass VectorContext {\n  /**\n   * Render a geometry with a custom renderer.\n   *\n   * @param {import(\"../geom/SimpleGeometry.js\").default} geometry Geometry.\n   * @param {import(\"../Feature.js\").default|import(\"./Feature.js\").default} feature Feature.\n   * @param {Function} renderer Renderer.\n   */\n  drawCustom(geometry, feature, renderer) {}\n\n  /**\n   * Render a geometry.\n   *\n   * @param {import(\"../geom/Geometry.js\").default} geometry The geometry to render.\n   */\n  drawGeometry(geometry) {}\n\n  /**\n   * Set the rendering style.\n   *\n   * @param {import(\"../style/Style.js\").default} style The rendering style.\n   */\n  setStyle(style) {}\n\n  /**\n   * @param {import(\"../geom/Circle.js\").default} circleGeometry Circle geometry.\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   */\n  drawCircle(circleGeometry, feature) {}\n\n  /**\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"../style/Style.js\").default} style Style.\n   */\n  drawFeature(feature, style) {}\n\n  /**\n   * @param {import(\"../geom/GeometryCollection.js\").default} geometryCollectionGeometry Geometry collection.\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   */\n  drawGeometryCollection(geometryCollectionGeometry, feature) {}\n\n  /**\n   * @param {import(\"../geom/LineString.js\").default|import(\"./Feature.js\").default} lineStringGeometry Line string geometry.\n   * @param {import(\"../Feature.js\").default|import(\"./Feature.js\").default} feature Feature.\n   */\n  drawLineString(lineStringGeometry, feature) {}\n\n  /**\n   * @param {import(\"../geom/MultiLineString.js\").default|import(\"./Feature.js\").default} multiLineStringGeometry MultiLineString geometry.\n   * @param {import(\"../Feature.js\").default|import(\"./Feature.js\").default} feature Feature.\n   */\n  drawMultiLineString(multiLineStringGeometry, feature) {}\n\n  /**\n   * @param {import(\"../geom/MultiPoint.js\").default|import(\"./Feature.js\").default} multiPointGeometry MultiPoint geometry.\n   * @param {import(\"../Feature.js\").default|import(\"./Feature.js\").default} feature Feature.\n   */\n  drawMultiPoint(multiPointGeometry, feature) {}\n\n  /**\n   * @param {import(\"../geom/MultiPolygon.js\").default} multiPolygonGeometry MultiPolygon geometry.\n   * @param {import(\"../Feature.js\").default|import(\"./Feature.js\").default} feature Feature.\n   */\n  drawMultiPolygon(multiPolygonGeometry, feature) {}\n\n  /**\n   * @param {import(\"../geom/Point.js\").default|import(\"./Feature.js\").default} pointGeometry Point geometry.\n   * @param {import(\"../Feature.js\").default|import(\"./Feature.js\").default} feature Feature.\n   */\n  drawPoint(pointGeometry, feature) {}\n\n  /**\n   * @param {import(\"../geom/Polygon.js\").default|import(\"./Feature.js\").default} polygonGeometry Polygon geometry.\n   * @param {import(\"../Feature.js\").default|import(\"./Feature.js\").default} feature Feature.\n   */\n  drawPolygon(polygonGeometry, feature) {}\n\n  /**\n   * @param {import(\"../geom/Geometry.js\").default|import(\"./Feature.js\").default} geometry Geometry.\n   * @param {import(\"../Feature.js\").default|import(\"./Feature.js\").default} feature Feature.\n   */\n  drawText(geometry, feature) {}\n\n  /**\n   * @param {import(\"../style/Fill.js\").default} fillStyle Fill style.\n   * @param {import(\"../style/Stroke.js\").default} strokeStyle Stroke style.\n   */\n  setFillStrokeStyle(fillStyle, strokeStyle) {}\n\n  /**\n   * @param {import(\"../style/Image.js\").default} imageStyle Image style.\n   * @param {import(\"./canvas.js\").DeclutterGroup=} opt_declutterGroup Declutter.\n   */\n  setImageStyle(imageStyle, opt_declutterGroup) {}\n\n  /**\n   * @param {import(\"../style/Text.js\").default} textStyle Text style.\n   * @param {import(\"./canvas.js\").DeclutterGroup=} opt_declutterGroup Declutter.\n   */\n  setTextStyle(textStyle, opt_declutterGroup) {}\n}\n\nexport default VectorContext;\n","/**\n * @module ol/render/canvas/Immediate\n */\n// FIXME test, especially polygons with holes and multipolygons\n// FIXME need to handle large thick features (where pixel size matters)\n// FIXME add offset and end to ol/geom/flat/transform~transform2D?\n\nimport {equals} from '../../array.js';\nimport {asColorLike} from '../../colorlike.js';\nimport {intersects} from '../../extent.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport {transformGeom2D} from '../../geom/SimpleGeometry.js';\nimport {transform2D} from '../../geom/flat/transform.js';\nimport {CANVAS_LINE_DASH} from '../../has.js';\nimport VectorContext from '../VectorContext.js';\nimport {defaultTextAlign, defaultFillStyle, defaultLineCap, defaultLineDash, defaultLineDashOffset, defaultLineJoin, defaultLineWidth, defaultMiterLimit, defaultStrokeStyle, defaultTextBaseline, defaultFont} from '../canvas.js';\nimport {create as createTransform, compose as composeTransform} from '../../transform.js';\n\n/**\n * @classdesc\n * A concrete subclass of {@link module:ol/render/VectorContext} that implements\n * direct rendering of features and geometries to an HTML5 Canvas context.\n * Instances of this class are created internally by the library and\n * provided to application code as vectorContext member of the\n * {@link module:ol/render/Event~RenderEvent} object associated with postcompose, precompose and\n * render events emitted by layers and maps.\n */\nclass CanvasImmediateRenderer extends VectorContext {\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../../extent.js\").Extent} extent Extent.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   */\n  constructor(context, pixelRatio, extent, transform, viewRotation) {\n    super();\n\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n    this.context_ = context;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = pixelRatio;\n\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.extent_ = extent;\n\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.transform_ = transform;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.viewRotation_ = viewRotation;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").FillState}\n     */\n    this.contextFillState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").StrokeState}\n     */\n    this.contextStrokeState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").TextState}\n     */\n    this.contextTextState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").FillState}\n     */\n    this.fillState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").StrokeState}\n     */\n    this.strokeState_ = null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n     */\n    this.image_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageAnchorX_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageAnchorY_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageHeight_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageOpacity_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageOriginX_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageOriginY_ = 0;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.imageRotateWithView_ = false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageRotation_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageScale_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.imageWidth_ = 0;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.text_ = '';\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textOffsetX_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textOffsetY_ = 0;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.textRotateWithView_ = false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textRotation_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textScale_ = 0;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").FillState}\n     */\n    this.textFillState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").StrokeState}\n     */\n    this.textStrokeState_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").TextState}\n     */\n    this.textState_ = null;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.pixelCoordinates_ = [];\n\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.tmpLocalTransform_ = createTransform();\n\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   */\n  drawImages_(flatCoordinates, offset, end, stride) {\n    if (!this.image_) {\n      return;\n    }\n    const pixelCoordinates = transform2D(\n      flatCoordinates, offset, end, 2, this.transform_,\n      this.pixelCoordinates_);\n    const context = this.context_;\n    const localTransform = this.tmpLocalTransform_;\n    const alpha = context.globalAlpha;\n    if (this.imageOpacity_ != 1) {\n      context.globalAlpha = alpha * this.imageOpacity_;\n    }\n    let rotation = this.imageRotation_;\n    if (this.imageRotateWithView_) {\n      rotation += this.viewRotation_;\n    }\n    for (let i = 0, ii = pixelCoordinates.length; i < ii; i += 2) {\n      const x = pixelCoordinates[i] - this.imageAnchorX_;\n      const y = pixelCoordinates[i + 1] - this.imageAnchorY_;\n      if (rotation !== 0 || this.imageScale_ != 1) {\n        const centerX = x + this.imageAnchorX_;\n        const centerY = y + this.imageAnchorY_;\n        composeTransform(localTransform,\n          centerX, centerY,\n          this.imageScale_, this.imageScale_,\n          rotation,\n          -centerX, -centerY);\n        context.setTransform.apply(context, localTransform);\n      }\n      context.drawImage(this.image_, this.imageOriginX_, this.imageOriginY_,\n        this.imageWidth_, this.imageHeight_, x, y,\n        this.imageWidth_, this.imageHeight_);\n    }\n    if (rotation !== 0 || this.imageScale_ != 1) {\n      context.setTransform(1, 0, 0, 1, 0, 0);\n    }\n    if (this.imageOpacity_ != 1) {\n      context.globalAlpha = alpha;\n    }\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   */\n  drawText_(flatCoordinates, offset, end, stride) {\n    if (!this.textState_ || this.text_ === '') {\n      return;\n    }\n    if (this.textFillState_) {\n      this.setContextFillState_(this.textFillState_);\n    }\n    if (this.textStrokeState_) {\n      this.setContextStrokeState_(this.textStrokeState_);\n    }\n    this.setContextTextState_(this.textState_);\n    const pixelCoordinates = transform2D(\n      flatCoordinates, offset, end, stride, this.transform_,\n      this.pixelCoordinates_);\n    const context = this.context_;\n    let rotation = this.textRotation_;\n    if (this.textRotateWithView_) {\n      rotation += this.viewRotation_;\n    }\n    for (; offset < end; offset += stride) {\n      const x = pixelCoordinates[offset] + this.textOffsetX_;\n      const y = pixelCoordinates[offset + 1] + this.textOffsetY_;\n      if (rotation !== 0 || this.textScale_ != 1) {\n        const localTransform = composeTransform(this.tmpLocalTransform_,\n          x, y,\n          this.textScale_, this.textScale_,\n          rotation,\n          -x, -y);\n        context.setTransform.apply(context, localTransform);\n      }\n      if (this.textStrokeState_) {\n        context.strokeText(this.text_, x, y);\n      }\n      if (this.textFillState_) {\n        context.fillText(this.text_, x, y);\n      }\n    }\n    if (rotation !== 0 || this.textScale_ != 1) {\n      context.setTransform(1, 0, 0, 1, 0, 0);\n    }\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @param {boolean} close Close.\n   * @private\n   * @return {number} end End.\n   */\n  moveToLineTo_(flatCoordinates, offset, end, stride, close) {\n    const context = this.context_;\n    const pixelCoordinates = transform2D(\n      flatCoordinates, offset, end, stride, this.transform_,\n      this.pixelCoordinates_);\n    context.moveTo(pixelCoordinates[0], pixelCoordinates[1]);\n    let length = pixelCoordinates.length;\n    if (close) {\n      length -= 2;\n    }\n    for (let i = 2; i < length; i += 2) {\n      context.lineTo(pixelCoordinates[i], pixelCoordinates[i + 1]);\n    }\n    if (close) {\n      context.closePath();\n    }\n    return end;\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {Array<number>} ends Ends.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} End.\n   */\n  drawRings_(flatCoordinates, offset, ends, stride) {\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      offset = this.moveToLineTo_(flatCoordinates, offset, ends[i], stride, true);\n    }\n    return offset;\n  }\n\n  /**\n   * Render a circle geometry into the canvas.  Rendering is immediate and uses\n   * the current fill and stroke styles.\n   *\n   * @param {import(\"../../geom/Circle.js\").default} geometry Circle geometry.\n   * @override\n   * @api\n   */\n  drawCircle(geometry) {\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n    if (this.fillState_ || this.strokeState_) {\n      if (this.fillState_) {\n        this.setContextFillState_(this.fillState_);\n      }\n      if (this.strokeState_) {\n        this.setContextStrokeState_(this.strokeState_);\n      }\n      const pixelCoordinates = transformGeom2D(\n        geometry, this.transform_, this.pixelCoordinates_);\n      const dx = pixelCoordinates[2] - pixelCoordinates[0];\n      const dy = pixelCoordinates[3] - pixelCoordinates[1];\n      const radius = Math.sqrt(dx * dx + dy * dy);\n      const context = this.context_;\n      context.beginPath();\n      context.arc(\n        pixelCoordinates[0], pixelCoordinates[1], radius, 0, 2 * Math.PI);\n      if (this.fillState_) {\n        context.fill();\n      }\n      if (this.strokeState_) {\n        context.stroke();\n      }\n    }\n    if (this.text_ !== '') {\n      this.drawText_(geometry.getCenter(), 0, 2, 2);\n    }\n  }\n\n  /**\n   * Set the rendering style.  Note that since this is an immediate rendering API,\n   * any `zIndex` on the provided style will be ignored.\n   *\n   * @param {import(\"../../style/Style.js\").default} style The rendering style.\n   * @override\n   * @api\n   */\n  setStyle(style) {\n    this.setFillStrokeStyle(style.getFill(), style.getStroke());\n    this.setImageStyle(style.getImage());\n    this.setTextStyle(style.getText());\n  }\n\n  /**\n   * Render a geometry into the canvas.  Call\n   * {@link module:ol/render/canvas/Immediate#setStyle} first to set the rendering style.\n   *\n   * @param {import(\"../../geom/Geometry.js\").default|import(\"../Feature.js\").default} geometry The geometry to render.\n   * @override\n   * @api\n   */\n  drawGeometry(geometry) {\n    const type = geometry.getType();\n    switch (type) {\n      case GeometryType.POINT:\n        this.drawPoint(/** @type {import(\"../../geom/Point.js\").default} */ (geometry));\n        break;\n      case GeometryType.LINE_STRING:\n        this.drawLineString(/** @type {import(\"../../geom/LineString.js\").default} */ (geometry));\n        break;\n      case GeometryType.POLYGON:\n        this.drawPolygon(/** @type {import(\"../../geom/Polygon.js\").default} */ (geometry));\n        break;\n      case GeometryType.MULTI_POINT:\n        this.drawMultiPoint(/** @type {import(\"../../geom/MultiPoint.js\").default} */ (geometry));\n        break;\n      case GeometryType.MULTI_LINE_STRING:\n        this.drawMultiLineString(/** @type {import(\"../../geom/MultiLineString.js\").default} */ (geometry));\n        break;\n      case GeometryType.MULTI_POLYGON:\n        this.drawMultiPolygon(/** @type {import(\"../../geom/MultiPolygon.js\").default} */ (geometry));\n        break;\n      case GeometryType.GEOMETRY_COLLECTION:\n        this.drawGeometryCollection(/** @type {import(\"../../geom/GeometryCollection.js\").default} */ (geometry));\n        break;\n      case GeometryType.CIRCLE:\n        this.drawCircle(/** @type {import(\"../../geom/Circle.js\").default} */ (geometry));\n        break;\n      default:\n    }\n  }\n\n  /**\n   * Render a feature into the canvas.  Note that any `zIndex` on the provided\n   * style will be ignored - features are rendered immediately in the order that\n   * this method is called.  If you need `zIndex` support, you should be using an\n   * {@link module:ol/layer/Vector~VectorLayer} instead.\n   *\n   * @param {import(\"../../Feature.js\").default} feature Feature.\n   * @param {import(\"../../style/Style.js\").default} style Style.\n   * @override\n   * @api\n   */\n  drawFeature(feature, style) {\n    const geometry = style.getGeometryFunction()(feature);\n    if (!geometry || !intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n    this.setStyle(style);\n    this.drawGeometry(geometry);\n  }\n\n  /**\n   * Render a GeometryCollection to the canvas.  Rendering is immediate and\n   * uses the current styles appropriate for each geometry in the collection.\n   *\n   * @param {import(\"../../geom/GeometryCollection.js\").default} geometry Geometry collection.\n   * @override\n   */\n  drawGeometryCollection(geometry) {\n    const geometries = geometry.getGeometriesArray();\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      this.drawGeometry(geometries[i]);\n    }\n  }\n\n  /**\n   * Render a Point geometry into the canvas.  Rendering is immediate and uses\n   * the current style.\n   *\n   * @param {import(\"../../geom/Point.js\").default|import(\"../Feature.js\").default} geometry Point geometry.\n   * @override\n   */\n  drawPoint(geometry) {\n    const flatCoordinates = geometry.getFlatCoordinates();\n    const stride = geometry.getStride();\n    if (this.image_) {\n      this.drawImages_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n    if (this.text_ !== '') {\n      this.drawText_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n  }\n\n  /**\n   * Render a MultiPoint geometry  into the canvas.  Rendering is immediate and\n   * uses the current style.\n   *\n   * @param {import(\"../../geom/MultiPoint.js\").default|import(\"../Feature.js\").default} geometry MultiPoint geometry.\n   * @override\n   */\n  drawMultiPoint(geometry) {\n    const flatCoordinates = geometry.getFlatCoordinates();\n    const stride = geometry.getStride();\n    if (this.image_) {\n      this.drawImages_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n    if (this.text_ !== '') {\n      this.drawText_(flatCoordinates, 0, flatCoordinates.length, stride);\n    }\n  }\n\n  /**\n   * Render a LineString into the canvas.  Rendering is immediate and uses\n   * the current style.\n   *\n   * @param {import(\"../../geom/LineString.js\").default|import(\"../Feature.js\").default} geometry LineString geometry.\n   * @override\n   */\n  drawLineString(geometry) {\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n    if (this.strokeState_) {\n      this.setContextStrokeState_(this.strokeState_);\n      const context = this.context_;\n      const flatCoordinates = geometry.getFlatCoordinates();\n      context.beginPath();\n      this.moveToLineTo_(flatCoordinates, 0, flatCoordinates.length,\n        geometry.getStride(), false);\n      context.stroke();\n    }\n    if (this.text_ !== '') {\n      const flatMidpoint = geometry.getFlatMidpoint();\n      this.drawText_(flatMidpoint, 0, 2, 2);\n    }\n  }\n\n  /**\n   * Render a MultiLineString geometry into the canvas.  Rendering is immediate\n   * and uses the current style.\n   *\n   * @param {import(\"../../geom/MultiLineString.js\").default|import(\"../Feature.js\").default} geometry MultiLineString geometry.\n   * @override\n   */\n  drawMultiLineString(geometry) {\n    const geometryExtent = geometry.getExtent();\n    if (!intersects(this.extent_, geometryExtent)) {\n      return;\n    }\n    if (this.strokeState_) {\n      this.setContextStrokeState_(this.strokeState_);\n      const context = this.context_;\n      const flatCoordinates = geometry.getFlatCoordinates();\n      let offset = 0;\n      const ends = /** @type {Array<number>} */ (geometry.getEnds());\n      const stride = geometry.getStride();\n      context.beginPath();\n      for (let i = 0, ii = ends.length; i < ii; ++i) {\n        offset = this.moveToLineTo_(flatCoordinates, offset, ends[i], stride, false);\n      }\n      context.stroke();\n    }\n    if (this.text_ !== '') {\n      const flatMidpoints = geometry.getFlatMidpoints();\n      this.drawText_(flatMidpoints, 0, flatMidpoints.length, 2);\n    }\n  }\n\n  /**\n   * Render a Polygon geometry into the canvas.  Rendering is immediate and uses\n   * the current style.\n   *\n   * @param {import(\"../../geom/Polygon.js\").default|import(\"../Feature.js\").default} geometry Polygon geometry.\n   * @override\n   */\n  drawPolygon(geometry) {\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n    if (this.strokeState_ || this.fillState_) {\n      if (this.fillState_) {\n        this.setContextFillState_(this.fillState_);\n      }\n      if (this.strokeState_) {\n        this.setContextStrokeState_(this.strokeState_);\n      }\n      const context = this.context_;\n      context.beginPath();\n      this.drawRings_(geometry.getOrientedFlatCoordinates(),\n        0, /** @type {Array<number>} */ (geometry.getEnds()), geometry.getStride());\n      if (this.fillState_) {\n        context.fill();\n      }\n      if (this.strokeState_) {\n        context.stroke();\n      }\n    }\n    if (this.text_ !== '') {\n      const flatInteriorPoint = geometry.getFlatInteriorPoint();\n      this.drawText_(flatInteriorPoint, 0, 2, 2);\n    }\n  }\n\n  /**\n   * Render MultiPolygon geometry into the canvas.  Rendering is immediate and\n   * uses the current style.\n   * @param {import(\"../../geom/MultiPolygon.js\").default} geometry MultiPolygon geometry.\n   * @override\n   */\n  drawMultiPolygon(geometry) {\n    if (!intersects(this.extent_, geometry.getExtent())) {\n      return;\n    }\n    if (this.strokeState_ || this.fillState_) {\n      if (this.fillState_) {\n        this.setContextFillState_(this.fillState_);\n      }\n      if (this.strokeState_) {\n        this.setContextStrokeState_(this.strokeState_);\n      }\n      const context = this.context_;\n      const flatCoordinates = geometry.getOrientedFlatCoordinates();\n      let offset = 0;\n      const endss = geometry.getEndss();\n      const stride = geometry.getStride();\n      context.beginPath();\n      for (let i = 0, ii = endss.length; i < ii; ++i) {\n        const ends = endss[i];\n        offset = this.drawRings_(flatCoordinates, offset, ends, stride);\n      }\n      if (this.fillState_) {\n        context.fill();\n      }\n      if (this.strokeState_) {\n        context.stroke();\n      }\n    }\n    if (this.text_ !== '') {\n      const flatInteriorPoints = geometry.getFlatInteriorPoints();\n      this.drawText_(flatInteriorPoints, 0, flatInteriorPoints.length, 2);\n    }\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").FillState} fillState Fill state.\n   * @private\n   */\n  setContextFillState_(fillState) {\n    const context = this.context_;\n    const contextFillState = this.contextFillState_;\n    if (!contextFillState) {\n      context.fillStyle = fillState.fillStyle;\n      this.contextFillState_ = {\n        fillStyle: fillState.fillStyle\n      };\n    } else {\n      if (contextFillState.fillStyle != fillState.fillStyle) {\n        contextFillState.fillStyle = context.fillStyle = fillState.fillStyle;\n      }\n    }\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").StrokeState} strokeState Stroke state.\n   * @private\n   */\n  setContextStrokeState_(strokeState) {\n    const context = this.context_;\n    const contextStrokeState = this.contextStrokeState_;\n    if (!contextStrokeState) {\n      context.lineCap = /** @type {CanvasLineCap} */ (strokeState.lineCap);\n      if (CANVAS_LINE_DASH) {\n        context.setLineDash(strokeState.lineDash);\n        context.lineDashOffset = strokeState.lineDashOffset;\n      }\n      context.lineJoin = /** @type {CanvasLineJoin} */ (strokeState.lineJoin);\n      context.lineWidth = strokeState.lineWidth;\n      context.miterLimit = strokeState.miterLimit;\n      context.strokeStyle = strokeState.strokeStyle;\n      this.contextStrokeState_ = {\n        lineCap: strokeState.lineCap,\n        lineDash: strokeState.lineDash,\n        lineDashOffset: strokeState.lineDashOffset,\n        lineJoin: strokeState.lineJoin,\n        lineWidth: strokeState.lineWidth,\n        miterLimit: strokeState.miterLimit,\n        strokeStyle: strokeState.strokeStyle\n      };\n    } else {\n      if (contextStrokeState.lineCap != strokeState.lineCap) {\n        contextStrokeState.lineCap = context.lineCap = /** @type {CanvasLineCap} */ (strokeState.lineCap);\n      }\n      if (CANVAS_LINE_DASH) {\n        if (!equals(contextStrokeState.lineDash, strokeState.lineDash)) {\n          context.setLineDash(contextStrokeState.lineDash = strokeState.lineDash);\n        }\n        if (contextStrokeState.lineDashOffset != strokeState.lineDashOffset) {\n          contextStrokeState.lineDashOffset = context.lineDashOffset =\n              strokeState.lineDashOffset;\n        }\n      }\n      if (contextStrokeState.lineJoin != strokeState.lineJoin) {\n        contextStrokeState.lineJoin = context.lineJoin = /** @type {CanvasLineJoin} */ (strokeState.lineJoin);\n      }\n      if (contextStrokeState.lineWidth != strokeState.lineWidth) {\n        contextStrokeState.lineWidth = context.lineWidth = strokeState.lineWidth;\n      }\n      if (contextStrokeState.miterLimit != strokeState.miterLimit) {\n        contextStrokeState.miterLimit = context.miterLimit =\n            strokeState.miterLimit;\n      }\n      if (contextStrokeState.strokeStyle != strokeState.strokeStyle) {\n        contextStrokeState.strokeStyle = context.strokeStyle =\n            strokeState.strokeStyle;\n      }\n    }\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").TextState} textState Text state.\n   * @private\n   */\n  setContextTextState_(textState) {\n    const context = this.context_;\n    const contextTextState = this.contextTextState_;\n    const textAlign = textState.textAlign ?\n      textState.textAlign : defaultTextAlign;\n    if (!contextTextState) {\n      context.font = textState.font;\n      context.textAlign = /** @type {CanvasTextAlign} */ (textAlign);\n      context.textBaseline = /** @type {CanvasTextBaseline} */ (textState.textBaseline);\n      this.contextTextState_ = {\n        font: textState.font,\n        textAlign: textAlign,\n        textBaseline: textState.textBaseline\n      };\n    } else {\n      if (contextTextState.font != textState.font) {\n        contextTextState.font = context.font = textState.font;\n      }\n      if (contextTextState.textAlign != textAlign) {\n        contextTextState.textAlign = context.textAlign = /** @type {CanvasTextAlign} */ (textAlign);\n      }\n      if (contextTextState.textBaseline != textState.textBaseline) {\n        contextTextState.textBaseline = context.textBaseline =\n          /** @type {CanvasTextBaseline} */ (textState.textBaseline);\n      }\n    }\n  }\n\n  /**\n   * Set the fill and stroke style for subsequent draw operations.  To clear\n   * either fill or stroke styles, pass null for the appropriate parameter.\n   *\n   * @param {import(\"../../style/Fill.js\").default} fillStyle Fill style.\n   * @param {import(\"../../style/Stroke.js\").default} strokeStyle Stroke style.\n   * @override\n   */\n  setFillStrokeStyle(fillStyle, strokeStyle) {\n    if (!fillStyle) {\n      this.fillState_ = null;\n    } else {\n      const fillStyleColor = fillStyle.getColor();\n      this.fillState_ = {\n        fillStyle: asColorLike(fillStyleColor ?\n          fillStyleColor : defaultFillStyle)\n      };\n    }\n    if (!strokeStyle) {\n      this.strokeState_ = null;\n    } else {\n      const strokeStyleColor = strokeStyle.getColor();\n      const strokeStyleLineCap = strokeStyle.getLineCap();\n      const strokeStyleLineDash = strokeStyle.getLineDash();\n      const strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\n      const strokeStyleLineJoin = strokeStyle.getLineJoin();\n      const strokeStyleWidth = strokeStyle.getWidth();\n      const strokeStyleMiterLimit = strokeStyle.getMiterLimit();\n      this.strokeState_ = {\n        lineCap: strokeStyleLineCap !== undefined ?\n          strokeStyleLineCap : defaultLineCap,\n        lineDash: strokeStyleLineDash ?\n          strokeStyleLineDash : defaultLineDash,\n        lineDashOffset: strokeStyleLineDashOffset ?\n          strokeStyleLineDashOffset : defaultLineDashOffset,\n        lineJoin: strokeStyleLineJoin !== undefined ?\n          strokeStyleLineJoin : defaultLineJoin,\n        lineWidth: this.pixelRatio_ * (strokeStyleWidth !== undefined ?\n          strokeStyleWidth : defaultLineWidth),\n        miterLimit: strokeStyleMiterLimit !== undefined ?\n          strokeStyleMiterLimit : defaultMiterLimit,\n        strokeStyle: asColorLike(strokeStyleColor ?\n          strokeStyleColor : defaultStrokeStyle)\n      };\n    }\n  }\n\n  /**\n   * Set the image style for subsequent draw operations.  Pass null to remove\n   * the image style.\n   *\n   * @param {import(\"../../style/Image.js\").default} imageStyle Image style.\n   * @override\n   */\n  setImageStyle(imageStyle) {\n    if (!imageStyle) {\n      this.image_ = null;\n    } else {\n      const imageAnchor = imageStyle.getAnchor();\n      // FIXME pixel ratio\n      const imageImage = imageStyle.getImage(1);\n      const imageOrigin = imageStyle.getOrigin();\n      const imageSize = imageStyle.getSize();\n      this.imageAnchorX_ = imageAnchor[0];\n      this.imageAnchorY_ = imageAnchor[1];\n      this.imageHeight_ = imageSize[1];\n      this.image_ = imageImage;\n      this.imageOpacity_ = imageStyle.getOpacity();\n      this.imageOriginX_ = imageOrigin[0];\n      this.imageOriginY_ = imageOrigin[1];\n      this.imageRotateWithView_ = imageStyle.getRotateWithView();\n      this.imageRotation_ = imageStyle.getRotation();\n      this.imageScale_ = imageStyle.getScale() * this.pixelRatio_;\n      this.imageWidth_ = imageSize[0];\n    }\n  }\n\n  /**\n   * Set the text style for subsequent draw operations.  Pass null to\n   * remove the text style.\n   *\n   * @param {import(\"../../style/Text.js\").default} textStyle Text style.\n   * @override\n   */\n  setTextStyle(textStyle) {\n    if (!textStyle) {\n      this.text_ = '';\n    } else {\n      const textFillStyle = textStyle.getFill();\n      if (!textFillStyle) {\n        this.textFillState_ = null;\n      } else {\n        const textFillStyleColor = textFillStyle.getColor();\n        this.textFillState_ = {\n          fillStyle: asColorLike(textFillStyleColor ?\n            textFillStyleColor : defaultFillStyle)\n        };\n      }\n      const textStrokeStyle = textStyle.getStroke();\n      if (!textStrokeStyle) {\n        this.textStrokeState_ = null;\n      } else {\n        const textStrokeStyleColor = textStrokeStyle.getColor();\n        const textStrokeStyleLineCap = textStrokeStyle.getLineCap();\n        const textStrokeStyleLineDash = textStrokeStyle.getLineDash();\n        const textStrokeStyleLineDashOffset = textStrokeStyle.getLineDashOffset();\n        const textStrokeStyleLineJoin = textStrokeStyle.getLineJoin();\n        const textStrokeStyleWidth = textStrokeStyle.getWidth();\n        const textStrokeStyleMiterLimit = textStrokeStyle.getMiterLimit();\n        this.textStrokeState_ = {\n          lineCap: textStrokeStyleLineCap !== undefined ?\n            textStrokeStyleLineCap : defaultLineCap,\n          lineDash: textStrokeStyleLineDash ?\n            textStrokeStyleLineDash : defaultLineDash,\n          lineDashOffset: textStrokeStyleLineDashOffset ?\n            textStrokeStyleLineDashOffset : defaultLineDashOffset,\n          lineJoin: textStrokeStyleLineJoin !== undefined ?\n            textStrokeStyleLineJoin : defaultLineJoin,\n          lineWidth: textStrokeStyleWidth !== undefined ?\n            textStrokeStyleWidth : defaultLineWidth,\n          miterLimit: textStrokeStyleMiterLimit !== undefined ?\n            textStrokeStyleMiterLimit : defaultMiterLimit,\n          strokeStyle: asColorLike(textStrokeStyleColor ?\n            textStrokeStyleColor : defaultStrokeStyle)\n        };\n      }\n      const textFont = textStyle.getFont();\n      const textOffsetX = textStyle.getOffsetX();\n      const textOffsetY = textStyle.getOffsetY();\n      const textRotateWithView = textStyle.getRotateWithView();\n      const textRotation = textStyle.getRotation();\n      const textScale = textStyle.getScale();\n      const textText = textStyle.getText();\n      const textTextAlign = textStyle.getTextAlign();\n      const textTextBaseline = textStyle.getTextBaseline();\n      this.textState_ = {\n        font: textFont !== undefined ?\n          textFont : defaultFont,\n        textAlign: textTextAlign !== undefined ?\n          textTextAlign : defaultTextAlign,\n        textBaseline: textTextBaseline !== undefined ?\n          textTextBaseline : defaultTextBaseline\n      };\n      this.text_ = textText !== undefined ? textText : '';\n      this.textOffsetX_ =\n          textOffsetX !== undefined ? (this.pixelRatio_ * textOffsetX) : 0;\n      this.textOffsetY_ =\n          textOffsetY !== undefined ? (this.pixelRatio_ * textOffsetY) : 0;\n      this.textRotateWithView_ = textRotateWithView !== undefined ? textRotateWithView : false;\n      this.textRotation_ = textRotation !== undefined ? textRotation : 0;\n      this.textScale_ = this.pixelRatio_ * (textScale !== undefined ?\n        textScale : 1);\n    }\n  }\n}\n\n\nexport default CanvasImmediateRenderer;\n","/**\n * @module ol/renderer/Map\n */\nimport {abstract, getUid} from '../util.js';\nimport Disposable from '../Disposable.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {getWidth} from '../extent.js';\nimport {TRUE} from '../functions.js';\nimport {visibleAtResolution} from '../layer/Layer.js';\nimport {shared as iconImageCache} from '../style/IconImageCache.js';\nimport {compose as composeTransform, invert as invertTransform, setFromArray as transformSetFromArray} from '../transform.js';\n\n/**\n * @abstract\n */\nclass MapRenderer extends Disposable {\n\n  /**\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   */\n  constructor(map) {\n    super();\n\n    /**\n     * @private\n     * @type {import(\"../PluggableMap.js\").default}\n     */\n    this.map_ = map;\n\n    /**\n     * @private\n     * @type {!Object<string, import(\"./Layer.js\").default>}\n     */\n    this.layerRenderers_ = {};\n\n    /**\n     * @private\n     * @type {Object<string, import(\"../events.js\").EventsKey>}\n     */\n    this.layerRendererListeners_ = {};\n\n    /**\n     * @private\n     * @type {Array<typeof import(\"./Layer.js\").default>}\n     */\n    this.layerRendererConstructors_ = [];\n\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../render/EventType.js\").default} type Event type.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   */\n  dispatchRenderEvent(type, frameState) {\n    abstract();\n  }\n\n  /**\n   * Register layer renderer constructors.\n   * @param {Array<typeof import(\"./Layer.js\").default>} constructors Layer renderers.\n   */\n  registerLayerRenderers(constructors) {\n    this.layerRendererConstructors_.push.apply(this.layerRendererConstructors_, constructors);\n  }\n\n  /**\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n   * @protected\n   */\n  calculateMatrices2D(frameState) {\n    const viewState = frameState.viewState;\n    const coordinateToPixelTransform = frameState.coordinateToPixelTransform;\n    const pixelToCoordinateTransform = frameState.pixelToCoordinateTransform;\n\n    composeTransform(coordinateToPixelTransform,\n      frameState.size[0] / 2, frameState.size[1] / 2,\n      1 / viewState.resolution, -1 / viewState.resolution,\n      -viewState.rotation,\n      -viewState.center[0], -viewState.center[1]);\n\n    invertTransform(\n      transformSetFromArray(pixelToCoordinateTransform, coordinateToPixelTransform));\n  }\n\n  /**\n   * Removes all layer renderers.\n   */\n  removeLayerRenderers() {\n    for (const key in this.layerRenderers_) {\n      this.removeLayerRendererByKey_(key).dispose();\n    }\n  }\n\n  /**\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {function(this: S, import(\"../Feature.js\").FeatureLike,\n   *     import(\"../layer/Layer.js\").default): T} callback Feature callback.\n   * @param {S} thisArg Value to use as `this` when executing `callback`.\n   * @param {function(this: U, import(\"../layer/Layer.js\").default): boolean} layerFilter Layer filter\n   *     function, only layers which are visible and for which this function\n   *     returns `true` will be tested for features.  By default, all visible\n   *     layers will be tested.\n   * @param {U} thisArg2 Value to use as `this` when executing `layerFilter`.\n   * @return {T|undefined} Callback result.\n   * @template S,T,U\n   */\n  forEachFeatureAtCoordinate(\n    coordinate,\n    frameState,\n    hitTolerance,\n    callback,\n    thisArg,\n    layerFilter,\n    thisArg2\n  ) {\n    let result;\n    const viewState = frameState.viewState;\n    const viewResolution = viewState.resolution;\n\n    /**\n     * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n     * @param {import(\"../layer/Layer.js\").default} layer Layer.\n     * @return {?} Callback result.\n     */\n    function forEachFeatureAtCoordinate(feature, layer) {\n      const managed = frameState.layerStates[getUid(layer)].managed;\n      if (!(getUid(feature) in frameState.skippedFeatureUids && !managed)) {\n        return callback.call(thisArg, feature, managed ? layer : null);\n      }\n    }\n\n    const projection = viewState.projection;\n\n    let translatedCoordinate = coordinate;\n    if (projection.canWrapX()) {\n      const projectionExtent = projection.getExtent();\n      const worldWidth = getWidth(projectionExtent);\n      const x = coordinate[0];\n      if (x < projectionExtent[0] || x > projectionExtent[2]) {\n        const worldsAway = Math.ceil((projectionExtent[0] - x) / worldWidth);\n        translatedCoordinate = [x + worldWidth * worldsAway, coordinate[1]];\n      }\n    }\n\n    const layerStates = frameState.layerStatesArray;\n    const numLayers = layerStates.length;\n    let i;\n    for (i = numLayers - 1; i >= 0; --i) {\n      const layerState = layerStates[i];\n      const layer = layerState.layer;\n      if (visibleAtResolution(layerState, viewResolution) && layerFilter.call(thisArg2, layer)) {\n        const layerRenderer = this.getLayerRenderer(layer);\n        const source = /** @type {import(\"../layer/Layer.js\").default} */ (layer).getSource();\n        if (source) {\n          result = layerRenderer.forEachFeatureAtCoordinate(\n            source.getWrapX() ? translatedCoordinate : coordinate,\n            frameState, hitTolerance, forEachFeatureAtCoordinate);\n        }\n        if (result) {\n          return result;\n        }\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../pixel.js\").Pixel} pixel Pixel.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {function(this: S, import(\"../layer/Layer.js\").default, (Uint8ClampedArray|Uint8Array)): T} callback Layer\n   *     callback.\n   * @param {S} thisArg Value to use as `this` when executing `callback`.\n   * @param {function(this: U, import(\"../layer/Layer.js\").default): boolean} layerFilter Layer filter\n   *     function, only layers which are visible and for which this function\n   *     returns `true` will be tested for features.  By default, all visible\n   *     layers will be tested.\n   * @param {U} thisArg2 Value to use as `this` when executing `layerFilter`.\n   * @return {T|undefined} Callback result.\n   * @template S,T,U\n   */\n  forEachLayerAtPixel(pixel, frameState, hitTolerance, callback, thisArg, layerFilter, thisArg2) {\n    return abstract();\n  }\n\n  /**\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState FrameState.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {function(this: U, import(\"../layer/Layer.js\").default): boolean} layerFilter Layer filter\n   *     function, only layers which are visible and for which this function\n   *     returns `true` will be tested for features.  By default, all visible\n   *     layers will be tested.\n   * @param {U} thisArg Value to use as `this` when executing `layerFilter`.\n   * @return {boolean} Is there a feature at the given coordinate?\n   * @template U\n   */\n  hasFeatureAtCoordinate(coordinate, frameState, hitTolerance, layerFilter, thisArg) {\n    const hasFeature = this.forEachFeatureAtCoordinate(\n      coordinate, frameState, hitTolerance, TRUE, this, layerFilter, thisArg);\n\n    return hasFeature !== undefined;\n  }\n\n  /**\n   * @param {import(\"../layer/Base.js\").default} layer Layer.\n   * @protected\n   * @return {import(\"./Layer.js\").default} Layer renderer.\n   */\n  getLayerRenderer(layer) {\n    const layerKey = getUid(layer);\n    if (layerKey in this.layerRenderers_) {\n      return this.layerRenderers_[layerKey];\n    } else {\n      let renderer;\n      for (let i = 0, ii = this.layerRendererConstructors_.length; i < ii; ++i) {\n        const candidate = this.layerRendererConstructors_[i];\n        if (candidate['handles'](layer)) {\n          renderer = candidate['create'](this, layer);\n          break;\n        }\n      }\n      if (renderer) {\n        this.layerRenderers_[layerKey] = renderer;\n        this.layerRendererListeners_[layerKey] = listen(renderer,\n          EventType.CHANGE, this.handleLayerRendererChange_, this);\n      } else {\n        throw new Error('Unable to create renderer for layer: ' + layer.getType());\n      }\n      return renderer;\n    }\n  }\n\n  /**\n   * @param {string} layerKey Layer key.\n   * @protected\n   * @return {import(\"./Layer.js\").default} Layer renderer.\n   */\n  getLayerRendererByKey(layerKey) {\n    return this.layerRenderers_[layerKey];\n  }\n\n  /**\n   * @protected\n   * @return {Object<string, import(\"./Layer.js\").default>} Layer renderers.\n   */\n  getLayerRenderers() {\n    return this.layerRenderers_;\n  }\n\n  /**\n   * @return {import(\"../PluggableMap.js\").default} Map.\n   */\n  getMap() {\n    return this.map_;\n  }\n\n  /**\n   * Handle changes in a layer renderer.\n   * @private\n   */\n  handleLayerRendererChange_() {\n    this.map_.render();\n  }\n\n  /**\n   * @param {string} layerKey Layer key.\n   * @return {import(\"./Layer.js\").default} Layer renderer.\n   * @private\n   */\n  removeLayerRendererByKey_(layerKey) {\n    const layerRenderer = this.layerRenderers_[layerKey];\n    delete this.layerRenderers_[layerKey];\n\n    unlistenByKey(this.layerRendererListeners_[layerKey]);\n    delete this.layerRendererListeners_[layerKey];\n\n    return layerRenderer;\n  }\n\n  /**\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @private\n   */\n  removeUnusedLayerRenderers_(map, frameState) {\n    for (const layerKey in this.layerRenderers_) {\n      if (!frameState || !(layerKey in frameState.layerStates)) {\n        this.removeLayerRendererByKey_(layerKey).dispose();\n      }\n    }\n  }\n\n  /**\n   * Render.\n   * @abstract\n   * @param {?import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   */\n  renderFrame(frameState) {\n    abstract();\n  }\n\n  /**\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @protected\n   */\n  scheduleExpireIconCache(frameState) {\n    frameState.postRenderFunctions.push(/** @type {import(\"../PluggableMap.js\").PostRenderFunction} */ (expireIconCache));\n  }\n\n  /**\n   * @param {!import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @protected\n   */\n  scheduleRemoveUnusedLayerRenderers(frameState) {\n    for (const layerKey in this.layerRenderers_) {\n      if (!(layerKey in frameState.layerStates)) {\n        frameState.postRenderFunctions.push(\n          /** @type {import(\"../PluggableMap.js\").PostRenderFunction} */ (this.removeUnusedLayerRenderers_.bind(this))\n        );\n        return;\n      }\n    }\n  }\n}\n\n\n/**\n * @param {import(\"../PluggableMap.js\").default} map Map.\n * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n */\nfunction expireIconCache(map, frameState) {\n  iconImageCache.expire();\n}\n\n\n/**\n * @param {import(\"../layer/Layer.js\").State} state1 First layer state.\n * @param {import(\"../layer/Layer.js\").State} state2 Second layer state.\n * @return {number} The zIndex difference.\n */\nexport function sortByZIndex(state1, state2) {\n  return state1.zIndex - state2.zIndex;\n}\nexport default MapRenderer;\n","/**\n * @module ol/renderer/canvas/Map\n */\nimport {create as createTransform, apply as applyTransform, compose as composeTransform} from '../../transform.js';\nimport {includes, stableSort} from '../../array.js';\nimport {CLASS_UNSELECTABLE} from '../../css.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {visibleAtResolution} from '../../layer/Layer.js';\nimport RenderEvent from '../../render/Event.js';\nimport RenderEventType from '../../render/EventType.js';\nimport {rotateAtOffset} from '../../render/canvas.js';\nimport CanvasImmediateRenderer from '../../render/canvas/Immediate.js';\nimport MapRenderer, {sortByZIndex} from '../Map.js';\nimport SourceState from '../../source/State.js';\n\n\n/**\n * @type {Array<typeof import(\"../Layer.js\").default>}\n */\nexport const layerRendererConstructors = [];\n\n/**\n * @classdesc\n * Canvas map renderer.\n * @api\n */\nclass CanvasMapRenderer extends MapRenderer {\n\n  /**\n   * @param {import(\"../../PluggableMap.js\").default} map Map.\n   */\n  constructor(map) {\n    super(map);\n\n    const container = map.getViewport();\n\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n    this.context_ = createCanvasContext2D();\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = this.context_.canvas;\n\n    this.canvas_.style.width = '100%';\n    this.canvas_.style.height = '100%';\n    this.canvas_.style.display = 'block';\n    this.canvas_.className = CLASS_UNSELECTABLE;\n    container.insertBefore(this.canvas_, container.childNodes[0] || null);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.renderedVisible_ = true;\n\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.transform_ = createTransform();\n\n  }\n\n  /**\n   * @param {import(\"../../render/EventType.js\").default} type Event type.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   */\n  dispatchRenderEvent(type, frameState) {\n    const map = this.getMap();\n    const context = this.context_;\n    if (map.hasListener(type)) {\n      const extent = frameState.extent;\n      const pixelRatio = frameState.pixelRatio;\n      const viewState = frameState.viewState;\n      const rotation = viewState.rotation;\n\n      const transform = this.getTransform(frameState);\n\n      const vectorContext = new CanvasImmediateRenderer(context, pixelRatio,\n        extent, transform, rotation);\n      const composeEvent = new RenderEvent(type, vectorContext,\n        frameState, context, null);\n      map.dispatchEvent(composeEvent);\n    }\n  }\n\n  /**\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @protected\n   * @return {!import(\"../../transform.js\").Transform} Transform.\n   */\n  getTransform(frameState) {\n    const viewState = frameState.viewState;\n    const dx1 = this.canvas_.width / 2;\n    const dy1 = this.canvas_.height / 2;\n    const sx = frameState.pixelRatio / viewState.resolution;\n    const sy = -sx;\n    const angle = -viewState.rotation;\n    const dx2 = -viewState.center[0];\n    const dy2 = -viewState.center[1];\n    return composeTransform(this.transform_, dx1, dy1, sx, sy, angle, dx2, dy2);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  renderFrame(frameState) {\n\n    if (!frameState) {\n      if (this.renderedVisible_) {\n        this.canvas_.style.display = 'none';\n        this.renderedVisible_ = false;\n      }\n      return;\n    }\n\n    const context = this.context_;\n    const pixelRatio = frameState.pixelRatio;\n    const width = Math.round(frameState.size[0] * pixelRatio);\n    const height = Math.round(frameState.size[1] * pixelRatio);\n    if (this.canvas_.width != width || this.canvas_.height != height) {\n      this.canvas_.width = width;\n      this.canvas_.height = height;\n    } else {\n      context.clearRect(0, 0, width, height);\n    }\n\n    const rotation = frameState.viewState.rotation;\n\n    this.calculateMatrices2D(frameState);\n\n    this.dispatchRenderEvent(RenderEventType.PRECOMPOSE, frameState);\n\n    const layerStatesArray = frameState.layerStatesArray;\n    stableSort(layerStatesArray, sortByZIndex);\n\n    if (rotation) {\n      context.save();\n      rotateAtOffset(context, rotation, width / 2, height / 2);\n    }\n\n    const viewResolution = frameState.viewState.resolution;\n    let i, ii;\n    for (i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n      const layerState = layerStatesArray[i];\n      const layer = layerState.layer;\n      const layerRenderer = /** @type {import(\"./Layer.js\").default} */ (this.getLayerRenderer(layer));\n      if (!visibleAtResolution(layerState, viewResolution) ||\n          layerState.sourceState != SourceState.READY) {\n        continue;\n      }\n      if (layerRenderer.prepareFrame(frameState, layerState)) {\n        layerRenderer.composeFrame(frameState, layerState, context);\n      }\n    }\n\n    if (rotation) {\n      context.restore();\n    }\n\n    this.dispatchRenderEvent(RenderEventType.POSTCOMPOSE, frameState);\n\n    if (!this.renderedVisible_) {\n      this.canvas_.style.display = '';\n      this.renderedVisible_ = true;\n    }\n\n    this.scheduleRemoveUnusedLayerRenderers(frameState);\n    this.scheduleExpireIconCache(frameState);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  forEachLayerAtPixel(pixel, frameState, hitTolerance, callback, thisArg, layerFilter, thisArg2) {\n    let result;\n    const viewState = frameState.viewState;\n    const viewResolution = viewState.resolution;\n\n    const layerStates = frameState.layerStatesArray;\n    const numLayers = layerStates.length;\n\n    const coordinate = applyTransform(\n      frameState.pixelToCoordinateTransform, pixel.slice());\n\n    let i;\n    for (i = numLayers - 1; i >= 0; --i) {\n      const layerState = layerStates[i];\n      const layer = layerState.layer;\n      if (visibleAtResolution(layerState, viewResolution) && layerFilter.call(thisArg2, layer)) {\n        const layerRenderer = /** @type {import(\"./Layer.js\").default} */ (this.getLayerRenderer(layer));\n        result = layerRenderer.forEachLayerAtCoordinate(\n          coordinate, frameState, hitTolerance, callback, thisArg);\n        if (result) {\n          return result;\n        }\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  registerLayerRenderers(constructors) {\n    super.registerLayerRenderers(constructors);\n    for (let i = 0, ii = constructors.length; i < ii; ++i) {\n      const ctor = constructors[i];\n      if (!includes(layerRendererConstructors, ctor)) {\n        layerRendererConstructors.push(ctor);\n      }\n    }\n  }\n}\n\n\nexport default CanvasMapRenderer;\n","/**\n * @module ol/renderer/canvas/Layer\n */\nimport {abstract} from '../../util.js';\nimport {getBottomLeft, getBottomRight, getTopLeft, getTopRight} from '../../extent.js';\nimport {TRUE} from '../../functions.js';\nimport RenderEvent from '../../render/Event.js';\nimport RenderEventType from '../../render/EventType.js';\nimport {rotateAtOffset} from '../../render/canvas.js';\nimport CanvasImmediateRenderer from '../../render/canvas/Immediate.js';\nimport LayerRenderer from '../Layer.js';\nimport {create as createTransform, apply as applyTransform, compose as composeTransform} from '../../transform.js';\n\n/**\n * @abstract\n */\nclass CanvasLayerRenderer extends LayerRenderer {\n\n  /**\n   * @param {import(\"../../layer/Layer.js\").default} layer Layer.\n   */\n  constructor(layer) {\n\n    super(layer);\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.renderedResolution;\n\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.transform_ = createTransform();\n\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../../extent.js\").Extent} extent Clip extent.\n   * @protected\n   */\n  clip(context, frameState, extent) {\n    const pixelRatio = frameState.pixelRatio;\n    const width = frameState.size[0] * pixelRatio;\n    const height = frameState.size[1] * pixelRatio;\n    const rotation = frameState.viewState.rotation;\n    const topLeft = getTopLeft(extent);\n    const topRight = getTopRight(extent);\n    const bottomRight = getBottomRight(extent);\n    const bottomLeft = getBottomLeft(extent);\n\n    applyTransform(frameState.coordinateToPixelTransform, topLeft);\n    applyTransform(frameState.coordinateToPixelTransform, topRight);\n    applyTransform(frameState.coordinateToPixelTransform, bottomRight);\n    applyTransform(frameState.coordinateToPixelTransform, bottomLeft);\n\n    context.save();\n    rotateAtOffset(context, -rotation, width / 2, height / 2);\n    context.beginPath();\n    context.moveTo(topLeft[0] * pixelRatio, topLeft[1] * pixelRatio);\n    context.lineTo(topRight[0] * pixelRatio, topRight[1] * pixelRatio);\n    context.lineTo(bottomRight[0] * pixelRatio, bottomRight[1] * pixelRatio);\n    context.lineTo(bottomLeft[0] * pixelRatio, bottomLeft[1] * pixelRatio);\n    context.clip();\n    rotateAtOffset(context, rotation, width / 2, height / 2);\n  }\n\n  /**\n   * @param {import(\"../../render/EventType.js\").default} type Event type.\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../../transform.js\").Transform=} opt_transform Transform.\n   * @private\n   */\n  dispatchComposeEvent_(type, context, frameState, opt_transform) {\n    const layer = this.getLayer();\n    if (layer.hasListener(type)) {\n      const width = frameState.size[0] * frameState.pixelRatio;\n      const height = frameState.size[1] * frameState.pixelRatio;\n      const rotation = frameState.viewState.rotation;\n      rotateAtOffset(context, -rotation, width / 2, height / 2);\n      const transform = opt_transform !== undefined ?\n        opt_transform : this.getTransform(frameState, 0);\n      const render = new CanvasImmediateRenderer(\n        context, frameState.pixelRatio, frameState.extent, transform,\n        frameState.viewState.rotation);\n      const composeEvent = new RenderEvent(type, render, frameState,\n        context, null);\n      layer.dispatchEvent(composeEvent);\n      rotateAtOffset(context, rotation, width / 2, height / 2);\n    }\n  }\n\n  /**\n   * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState FrameState.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {function(this: S, import(\"../../layer/Layer.js\").default, (Uint8ClampedArray|Uint8Array)): T} callback Layer\n   *     callback.\n   * @param {S} thisArg Value to use as `this` when executing `callback`.\n   * @return {T|undefined} Callback result.\n   * @template S,T,U\n   */\n  forEachLayerAtCoordinate(coordinate, frameState, hitTolerance, callback, thisArg) {\n    const hasFeature = this.forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, TRUE);\n\n    if (hasFeature) {\n      return callback.call(thisArg, this.getLayer(), null);\n    } else {\n      return undefined;\n    }\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../../layer/Layer.js\").State} layerState Layer state.\n   * @param {import(\"../../transform.js\").Transform=} opt_transform Transform.\n   * @protected\n   */\n  postCompose(context, frameState, layerState, opt_transform) {\n    this.dispatchComposeEvent_(RenderEventType.POSTCOMPOSE, context, frameState, opt_transform);\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../../transform.js\").Transform=} opt_transform Transform.\n   * @protected\n   */\n  preCompose(context, frameState, opt_transform) {\n    this.dispatchComposeEvent_(RenderEventType.PRECOMPOSE, context, frameState, opt_transform);\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../../transform.js\").Transform=} opt_transform Transform.\n   * @protected\n   */\n  dispatchRenderEvent(context, frameState, opt_transform) {\n    this.dispatchComposeEvent_(RenderEventType.RENDER, context, frameState, opt_transform);\n  }\n\n  /**\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {number} offsetX Offset on the x-axis in view coordinates.\n   * @protected\n   * @return {!import(\"../../transform.js\").Transform} Transform.\n   */\n  getTransform(frameState, offsetX) {\n    const viewState = frameState.viewState;\n    const pixelRatio = frameState.pixelRatio;\n    const dx1 = pixelRatio * frameState.size[0] / 2;\n    const dy1 = pixelRatio * frameState.size[1] / 2;\n    const sx = pixelRatio / viewState.resolution;\n    const sy = -sx;\n    const angle = -viewState.rotation;\n    const dx2 = -viewState.center[0] + offsetX;\n    const dy2 = -viewState.center[1];\n    return composeTransform(this.transform_, dx1, dy1, sx, sy, angle, dx2, dy2);\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../../layer/Layer.js\").State} layerState Layer state.\n   * @param {CanvasRenderingContext2D} context Context.\n   */\n  composeFrame(frameState, layerState, context) {\n    abstract();\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../../layer/Layer.js\").State} layerState Layer state.\n   * @return {boolean} whether composeFrame should be called.\n   */\n  prepareFrame(frameState, layerState) {\n    return abstract();\n  }\n}\n\nexport default CanvasLayerRenderer;\n","/**\n * @module ol/renderer/Layer\n */\nimport {getUid} from '../util.js';\nimport ImageState from '../ImageState.js';\nimport Observable from '../Observable.js';\nimport TileState from '../TileState.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport SourceState from '../source/State.js';\n\nclass LayerRenderer extends Observable {\n\n  /**\n   * @param {import(\"../layer/Layer.js\").default} layer Layer.\n   */\n  constructor(layer) {\n\n    super();\n\n    /**\n     * @private\n     * @type {import(\"../layer/Layer.js\").default}\n     */\n    this.layer_ = layer;\n\n  }\n\n  /**\n   * Create a function that adds loaded tiles to the tile lookup.\n   * @param {import(\"../source/Tile.js\").default} source Tile source.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection of the tiles.\n   * @param {Object<number, Object<string, import(\"../Tile.js\").default>>} tiles Lookup of loaded tiles by zoom level.\n   * @return {function(number, import(\"../TileRange.js\").default):boolean} A function that can be\n   *     called with a zoom level and a tile range to add loaded tiles to the lookup.\n   * @protected\n   */\n  createLoadedTileFinder(source, projection, tiles) {\n    return (\n      /**\n       * @param {number} zoom Zoom level.\n       * @param {import(\"../TileRange.js\").default} tileRange Tile range.\n       * @return {boolean} The tile range is fully loaded.\n       */\n      function(zoom, tileRange) {\n        /**\n         * @param {import(\"../Tile.js\").default} tile Tile.\n         */\n        function callback(tile) {\n          if (!tiles[zoom]) {\n            tiles[zoom] = {};\n          }\n          tiles[zoom][tile.tileCoord.toString()] = tile;\n        }\n        return source.forEachLoadedTile(projection, zoom, tileRange, callback);\n      }\n    );\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {function(import(\"../Feature.js\").FeatureLike, import(\"../layer/Layer.js\").default): T} callback Feature callback.\n   * @return {T|void} Callback result.\n   * @template T\n   */\n  forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback) {}\n\n  /**\n   * @return {import(\"../layer/Layer.js\").default} Layer.\n   */\n  getLayer() {\n    return this.layer_;\n  }\n\n  /**\n   * Handle changes in image state.\n   * @param {import(\"../events/Event.js\").default} event Image change event.\n   * @private\n   */\n  handleImageChange_(event) {\n    const image = /** @type {import(\"../Image.js\").default} */ (event.target);\n    if (image.getState() === ImageState.LOADED) {\n      this.renderIfReadyAndVisible();\n    }\n  }\n\n  /**\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @return {boolean} Is there a feature at the given coordinate?\n   */\n  hasFeatureAtCoordinate(coordinate, frameState) {\n    return false;\n  }\n\n  /**\n   * Load the image if not already loaded, and register the image change\n   * listener if needed.\n   * @param {import(\"../ImageBase.js\").default} image Image.\n   * @return {boolean} `true` if the image is already loaded, `false` otherwise.\n   * @protected\n   */\n  loadImage(image) {\n    let imageState = image.getState();\n    if (imageState != ImageState.LOADED && imageState != ImageState.ERROR) {\n      listen(image, EventType.CHANGE, this.handleImageChange_, this);\n    }\n    if (imageState == ImageState.IDLE) {\n      image.load();\n      imageState = image.getState();\n    }\n    return imageState == ImageState.LOADED;\n  }\n\n  /**\n   * @protected\n   */\n  renderIfReadyAndVisible() {\n    const layer = this.getLayer();\n    if (layer.getVisible() && layer.getSourceState() == SourceState.READY) {\n      this.changed();\n    }\n  }\n\n  /**\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../source/Tile.js\").default} tileSource Tile source.\n   * @protected\n   */\n  scheduleExpireCache(frameState, tileSource) {\n    if (tileSource.canExpireCache()) {\n      /**\n       * @param {import(\"../source/Tile.js\").default} tileSource Tile source.\n       * @param {import(\"../PluggableMap.js\").default} map Map.\n       * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n       */\n      const postRenderFunction = function(tileSource, map, frameState) {\n        const tileSourceKey = getUid(tileSource);\n        if (tileSourceKey in frameState.usedTiles) {\n          tileSource.expireCache(frameState.viewState.projection,\n            frameState.usedTiles[tileSourceKey]);\n        }\n      }.bind(null, tileSource);\n\n      frameState.postRenderFunctions.push(\n        /** @type {import(\"../PluggableMap.js\").PostRenderFunction} */ (postRenderFunction)\n      );\n    }\n  }\n\n  /**\n   * @param {!Object<string, !Object<string, import(\"../TileRange.js\").default>>} usedTiles Used tiles.\n   * @param {import(\"../source/Tile.js\").default} tileSource Tile source.\n   * @param {number} z Z.\n   * @param {import(\"../TileRange.js\").default} tileRange Tile range.\n   * @protected\n   */\n  updateUsedTiles(usedTiles, tileSource, z, tileRange) {\n    // FIXME should we use tilesToDrawByZ instead?\n    const tileSourceKey = getUid(tileSource);\n    const zKey = z.toString();\n    if (tileSourceKey in usedTiles) {\n      if (zKey in usedTiles[tileSourceKey]) {\n        usedTiles[tileSourceKey][zKey].extend(tileRange);\n      } else {\n        usedTiles[tileSourceKey][zKey] = tileRange;\n      }\n    } else {\n      usedTiles[tileSourceKey] = {};\n      usedTiles[tileSourceKey][zKey] = tileRange;\n    }\n  }\n\n  /**\n   * Manage tile pyramid.\n   * This function performs a number of functions related to the tiles at the\n   * current zoom and lower zoom levels:\n   * - registers idle tiles in frameState.wantedTiles so that they are not\n   *   discarded by the tile queue\n   * - enqueues missing tiles\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../source/Tile.js\").default} tileSource Tile source.\n   * @param {import(\"../tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} currentZ Current Z.\n   * @param {number} preload Load low resolution tiles up to 'preload' levels.\n   * @param {function(this: T, import(\"../Tile.js\").default)=} opt_tileCallback Tile callback.\n   * @param {T=} opt_this Object to use as `this` in `opt_tileCallback`.\n   * @protected\n   * @template T\n   */\n  manageTilePyramid(\n    frameState,\n    tileSource,\n    tileGrid,\n    pixelRatio,\n    projection,\n    extent,\n    currentZ,\n    preload,\n    opt_tileCallback,\n    opt_this\n  ) {\n    const tileSourceKey = getUid(tileSource);\n    if (!(tileSourceKey in frameState.wantedTiles)) {\n      frameState.wantedTiles[tileSourceKey] = {};\n    }\n    const wantedTiles = frameState.wantedTiles[tileSourceKey];\n    const tileQueue = frameState.tileQueue;\n    const minZoom = tileGrid.getMinZoom();\n    let tile, tileRange, tileResolution, x, y, z;\n    for (z = minZoom; z <= currentZ; ++z) {\n      tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z, tileRange);\n      tileResolution = tileGrid.getResolution(z);\n      for (x = tileRange.minX; x <= tileRange.maxX; ++x) {\n        for (y = tileRange.minY; y <= tileRange.maxY; ++y) {\n          if (currentZ - z <= preload) {\n            tile = tileSource.getTile(z, x, y, pixelRatio, projection);\n            if (tile.getState() == TileState.IDLE) {\n              wantedTiles[tile.getKey()] = true;\n              if (!tileQueue.isKeyQueued(tile.getKey())) {\n                tileQueue.enqueue([tile, tileSourceKey,\n                  tileGrid.getTileCoordCenter(tile.tileCoord), tileResolution]);\n              }\n            }\n            if (opt_tileCallback !== undefined) {\n              opt_tileCallback.call(opt_this, tile);\n            }\n          } else {\n            tileSource.useTile(z, x, y, projection);\n          }\n        }\n      }\n    }\n  }\n}\n\nexport default LayerRenderer;\n","/**\n * @module ol/renderer/canvas/IntermediateCanvas\n */\nimport {abstract} from '../../util.js';\nimport {scale as scaleCoordinate} from '../../coordinate.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {containsExtent, intersects} from '../../extent.js';\nimport CanvasLayerRenderer from './Layer.js';\nimport {create as createTransform, apply as applyTransform} from '../../transform.js';\n\n/**\n * @abstract\n */\nclass IntermediateCanvasRenderer extends CanvasLayerRenderer {\n\n  /**\n   * @param {import(\"../../layer/Layer.js\").default} layer Layer.\n   */\n  constructor(layer) {\n\n    super(layer);\n\n    /**\n     * @protected\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.coordinateToCanvasPixelTransform = createTransform();\n\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n    this.hitCanvasContext_ = null;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  composeFrame(frameState, layerState, context) {\n\n    this.preCompose(context, frameState);\n\n    const image = this.getImage();\n    if (image) {\n\n      // clipped rendering if layer extent is set\n      const extent = layerState.extent;\n      const clipped = extent !== undefined &&\n          !containsExtent(extent, frameState.extent) &&\n          intersects(extent, frameState.extent);\n      if (clipped) {\n        this.clip(context, frameState, /** @type {import(\"../../extent.js\").Extent} */ (extent));\n      }\n\n      const imageTransform = this.getImageTransform();\n      // for performance reasons, context.save / context.restore is not used\n      // to save and restore the transformation matrix and the opacity.\n      // see http://jsperf.com/context-save-restore-versus-variable\n      const alpha = context.globalAlpha;\n      context.globalAlpha = layerState.opacity;\n\n      // for performance reasons, context.setTransform is only used\n      // when the view is rotated. see http://jsperf.com/canvas-transform\n      const dx = imageTransform[4];\n      const dy = imageTransform[5];\n      const dw = image.width * imageTransform[0];\n      const dh = image.height * imageTransform[3];\n      if (dw >= 0.5 && dh >= 0.5) {\n        context.drawImage(image, 0, 0, +image.width, +image.height,\n          Math.round(dx), Math.round(dy), Math.round(dw), Math.round(dh));\n      }\n      context.globalAlpha = alpha;\n\n      if (clipped) {\n        context.restore();\n      }\n    }\n\n    this.postCompose(context, frameState, layerState);\n  }\n\n  /**\n   * @abstract\n   * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Canvas.\n   */\n  getImage() {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @return {!import(\"../../transform.js\").Transform} Image transform.\n   */\n  getImageTransform() {\n    return abstract();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  forEachLayerAtCoordinate(coordinate, frameState, hitTolerance, callback, thisArg) {\n    if (!this.getImage()) {\n      return undefined;\n    }\n\n    const pixel = applyTransform(this.coordinateToCanvasPixelTransform, coordinate.slice());\n    scaleCoordinate(pixel, frameState.viewState.resolution / this.renderedResolution);\n\n    if (!this.hitCanvasContext_) {\n      this.hitCanvasContext_ = createCanvasContext2D(1, 1);\n    }\n\n    this.hitCanvasContext_.clearRect(0, 0, 1, 1);\n    this.hitCanvasContext_.drawImage(this.getImage(), pixel[0], pixel[1], 1, 1, 0, 0, 1, 1);\n\n    const imageData = this.hitCanvasContext_.getImageData(0, 0, 1, 1).data;\n    if (imageData[3] > 0) {\n      return callback.call(thisArg, this.getLayer(), imageData);\n    } else {\n      return undefined;\n    }\n  }\n}\n\n\nexport default IntermediateCanvasRenderer;\n","/**\n * @module ol/renderer/canvas/ImageLayer\n */\nimport {ENABLE_RASTER_REPROJECTION} from '../../reproj/common.js';\nimport ImageCanvas from '../../ImageCanvas.js';\nimport LayerType from '../../LayerType.js';\nimport ViewHint from '../../ViewHint.js';\nimport {equals} from '../../array.js';\nimport {getHeight, getIntersection, getWidth, isEmpty} from '../../extent.js';\nimport VectorRenderType from '../../layer/VectorRenderType.js';\nimport {assign} from '../../obj.js';\nimport {layerRendererConstructors} from './Map.js';\nimport IntermediateCanvasRenderer from './IntermediateCanvas.js';\nimport {create as createTransform, compose as composeTransform} from '../../transform.js';\n\n/**\n * @classdesc\n * Canvas renderer for image layers.\n * @api\n */\nclass CanvasImageLayerRenderer extends IntermediateCanvasRenderer {\n\n  /**\n   * @param {import(\"../../layer/Image.js\").default|import(\"../../layer/Vector.js\").default} imageLayer Image or vector layer.\n   */\n  constructor(imageLayer) {\n\n    super(imageLayer);\n\n    /**\n     * @private\n     * @type {?import(\"../../ImageBase.js\").default}\n     */\n    this.image_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.imageTransform_ = createTransform();\n\n    /**\n     * @type {!Array<string>}\n     */\n    this.skippedFeatures_ = [];\n\n    /**\n     * @private\n     * @type {import(\"./VectorLayer.js\").default}\n     */\n    this.vectorRenderer_ = null;\n\n    if (imageLayer.getType() === LayerType.VECTOR) {\n      for (let i = 0, ii = layerRendererConstructors.length; i < ii; ++i) {\n        const ctor = layerRendererConstructors[i];\n        if (ctor !== CanvasImageLayerRenderer && ctor['handles'](imageLayer)) {\n          this.vectorRenderer_ = /** @type {import(\"./VectorLayer.js\").default} */ (new ctor(imageLayer));\n          break;\n        }\n      }\n    }\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    if (this.vectorRenderer_) {\n      this.vectorRenderer_.dispose();\n    }\n    super.disposeInternal();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImage() {\n    return !this.image_ ? null : this.image_.getImage();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImageTransform() {\n    return this.imageTransform_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  prepareFrame(frameState, layerState) {\n\n    const pixelRatio = frameState.pixelRatio;\n    const size = frameState.size;\n    const viewState = frameState.viewState;\n    const viewCenter = viewState.center;\n    const viewResolution = viewState.resolution;\n\n    let image;\n    const imageLayer = /** @type {import(\"../../layer/Image.js\").default} */ (this.getLayer());\n    const imageSource = /** @type {import(\"../../source/Image.js\").default} */ (imageLayer.getSource());\n\n    const hints = frameState.viewHints;\n\n    const vectorRenderer = this.vectorRenderer_;\n    let renderedExtent = frameState.extent;\n    if (!vectorRenderer && layerState.extent !== undefined) {\n      renderedExtent = getIntersection(renderedExtent, layerState.extent);\n    }\n\n    if (!hints[ViewHint.ANIMATING] && !hints[ViewHint.INTERACTING] &&\n        !isEmpty(renderedExtent)) {\n      let projection = viewState.projection;\n      if (!ENABLE_RASTER_REPROJECTION) {\n        const sourceProjection = imageSource.getProjection();\n        if (sourceProjection) {\n          projection = sourceProjection;\n        }\n      }\n      let skippedFeatures = this.skippedFeatures_;\n      if (vectorRenderer) {\n        const context = vectorRenderer.context;\n        const imageFrameState = /** @type {import(\"../../PluggableMap.js\").FrameState} */ (assign({}, frameState, {\n          size: [\n            getWidth(renderedExtent) / viewResolution,\n            getHeight(renderedExtent) / viewResolution\n          ],\n          viewState: /** @type {import(\"../../View.js\").State} */ (assign({}, frameState.viewState, {\n            rotation: 0\n          }))\n        }));\n        const newSkippedFeatures = Object.keys(imageFrameState.skippedFeatureUids).sort();\n        image = new ImageCanvas(renderedExtent, viewResolution, pixelRatio, context.canvas, function(callback) {\n          if (vectorRenderer.prepareFrame(imageFrameState, layerState) &&\n              (vectorRenderer.replayGroupChanged ||\n              !equals(skippedFeatures, newSkippedFeatures))) {\n            context.canvas.width = imageFrameState.size[0] * pixelRatio;\n            context.canvas.height = imageFrameState.size[1] * pixelRatio;\n            vectorRenderer.compose(context, imageFrameState, layerState);\n            skippedFeatures = newSkippedFeatures;\n            callback();\n          }\n        });\n      } else {\n        image = imageSource.getImage(\n          renderedExtent, viewResolution, pixelRatio, projection);\n      }\n      if (image && this.loadImage(image)) {\n        this.image_ = image;\n        this.skippedFeatures_ = skippedFeatures;\n      }\n    }\n\n    if (this.image_) {\n      image = this.image_;\n      const imageExtent = image.getExtent();\n      const imageResolution = image.getResolution();\n      const imagePixelRatio = image.getPixelRatio();\n      const scale = pixelRatio * imageResolution /\n          (viewResolution * imagePixelRatio);\n      const transform = composeTransform(this.imageTransform_,\n        pixelRatio * size[0] / 2, pixelRatio * size[1] / 2,\n        scale, scale,\n        0,\n        imagePixelRatio * (imageExtent[0] - viewCenter[0]) / imageResolution,\n        imagePixelRatio * (viewCenter[1] - imageExtent[3]) / imageResolution);\n      composeTransform(this.coordinateToCanvasPixelTransform,\n        pixelRatio * size[0] / 2 - transform[4], pixelRatio * size[1] / 2 - transform[5],\n        pixelRatio / viewResolution, -pixelRatio / viewResolution,\n        0,\n        -viewCenter[0], -viewCenter[1]);\n\n      this.renderedResolution = imageResolution * pixelRatio / imagePixelRatio;\n    }\n\n    return !!this.image_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback) {\n    if (this.vectorRenderer_) {\n      return this.vectorRenderer_.forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback);\n    } else {\n      return super.forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback);\n    }\n  }\n}\n\n\n/**\n * Determine if this renderer handles the provided layer.\n * @param {import(\"../../layer/Layer.js\").default} layer The candidate layer.\n * @return {boolean} The renderer can render the layer.\n */\nCanvasImageLayerRenderer['handles'] = function(layer) {\n  return layer.getType() === LayerType.IMAGE ||\n    layer.getType() === LayerType.VECTOR &&\n    /** @type {import(\"../../layer/Vector.js\").default} */ (layer).getRenderMode() === VectorRenderType.IMAGE;\n};\n\n\n/**\n * Create a layer renderer.\n * @param {import(\"../Map.js\").default} mapRenderer The map renderer.\n * @param {import(\"../../layer/Layer.js\").default} layer The layer to be rendererd.\n * @return {CanvasImageLayerRenderer} The layer renderer.\n */\nCanvasImageLayerRenderer['create'] = function(mapRenderer, layer) {\n  return new CanvasImageLayerRenderer(/** @type {import(\"../../layer/Image.js\").default} */ (layer));\n};\n\n\nexport default CanvasImageLayerRenderer;\n","/**\n * @module ol/renderer/canvas/TileLayer\n */\nimport {getUid} from '../../util.js';\nimport LayerType from '../../LayerType.js';\nimport TileRange from '../../TileRange.js';\nimport TileState from '../../TileState.js';\nimport ViewHint from '../../ViewHint.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {containsExtent, createEmpty, equals, getIntersection, isEmpty} from '../../extent.js';\nimport IntermediateCanvasRenderer from './IntermediateCanvas.js';\nimport {create as createTransform, compose as composeTransform} from '../../transform.js';\n\n/**\n * @classdesc\n * Canvas renderer for tile layers.\n * @api\n */\nclass CanvasTileLayerRenderer extends IntermediateCanvasRenderer {\n\n  /**\n   * @param {import(\"../../layer/Tile.js\").default|import(\"../../layer/VectorTile.js\").default} tileLayer Tile layer.\n   * @param {boolean=} opt_noContext Skip the context creation.\n   */\n  constructor(tileLayer, opt_noContext) {\n\n    super(tileLayer);\n\n    /**\n     * @protected\n     * @type {CanvasRenderingContext2D}\n     */\n    this.context = opt_noContext ? null : createCanvasContext2D();\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.oversampling_;\n\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.renderedExtent_ = null;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.renderedRevision;\n\n    /**\n     * @protected\n     * @type {!Array<import(\"../../Tile.js\").default>}\n     */\n    this.renderedTiles = [];\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.newTiles_ = false;\n\n    /**\n     * @protected\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.tmpExtent = createEmpty();\n\n    /**\n     * @private\n     * @type {import(\"../../TileRange.js\").default}\n     */\n    this.tmpTileRange_ = new TileRange(0, 0, 0, 0);\n\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.imageTransform_ = createTransform();\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.zDirection = 0;\n\n  }\n\n  /**\n   * @private\n   * @param {import(\"../../Tile.js\").default} tile Tile.\n   * @return {boolean} Tile is drawable.\n   */\n  isDrawableTile_(tile) {\n    const tileLayer = /** @type {import(\"../../layer/Tile.js\").default} */ (this.getLayer());\n    const tileState = tile.getState();\n    const useInterimTilesOnError = tileLayer.getUseInterimTilesOnError();\n    return tileState == TileState.LOADED ||\n        tileState == TileState.EMPTY ||\n        tileState == TileState.ERROR && !useInterimTilesOnError;\n  }\n\n  /**\n   * @param {number} z Tile coordinate z.\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../../proj/Projection.js\").default} projection Projection.\n   * @return {!import(\"../../Tile.js\").default} Tile.\n   */\n  getTile(z, x, y, pixelRatio, projection) {\n    const tileLayer = /** @type {import(\"../../layer/Tile.js\").default} */ (this.getLayer());\n    const tileSource = /** @type {import(\"../../source/Tile.js\").default} */ (tileLayer.getSource());\n    let tile = tileSource.getTile(z, x, y, pixelRatio, projection);\n    if (tile.getState() == TileState.ERROR) {\n      if (!tileLayer.getUseInterimTilesOnError()) {\n        // When useInterimTilesOnError is false, we consider the error tile as loaded.\n        tile.setState(TileState.LOADED);\n      } else if (tileLayer.getPreload() > 0) {\n        // Preloaded tiles for lower resolutions might have finished loading.\n        this.newTiles_ = true;\n      }\n    }\n    if (!this.isDrawableTile_(tile)) {\n      tile = tile.getInterimTile();\n    }\n    return tile;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  prepareFrame(frameState, layerState) {\n\n    const pixelRatio = frameState.pixelRatio;\n    const size = frameState.size;\n    const viewState = frameState.viewState;\n    const projection = viewState.projection;\n    const viewResolution = viewState.resolution;\n    const viewCenter = viewState.center;\n\n    const tileLayer = /** @type {import(\"../../layer/Tile.js\").default} */ (this.getLayer());\n    const tileSource = /** @type {import(\"../../source/Tile.js\").default} */ (tileLayer.getSource());\n    const sourceRevision = tileSource.getRevision();\n    const tileGrid = tileSource.getTileGridForProjection(projection);\n    const z = tileGrid.getZForResolution(viewResolution, this.zDirection);\n    const tileResolution = tileGrid.getResolution(z);\n    let oversampling = Math.round(viewResolution / tileResolution) || 1;\n    let extent = frameState.extent;\n\n    if (layerState.extent !== undefined) {\n      extent = getIntersection(extent, layerState.extent);\n    }\n    if (isEmpty(extent)) {\n      // Return false to prevent the rendering of the layer.\n      return false;\n    }\n\n    const tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n    const imageExtent = tileGrid.getTileRangeExtent(z, tileRange);\n\n    const tilePixelRatio = tileSource.getTilePixelRatio(pixelRatio);\n\n    /**\n     * @type {Object<number, Object<string, import(\"../../Tile.js\").default>>}\n     */\n    const tilesToDrawByZ = {};\n    tilesToDrawByZ[z] = {};\n\n    const findLoadedTiles = this.createLoadedTileFinder(\n      tileSource, projection, tilesToDrawByZ);\n\n    const hints = frameState.viewHints;\n    const animatingOrInteracting = hints[ViewHint.ANIMATING] || hints[ViewHint.INTERACTING];\n\n    const tmpExtent = this.tmpExtent;\n    const tmpTileRange = this.tmpTileRange_;\n    this.newTiles_ = false;\n    let tile, x, y;\n    for (x = tileRange.minX; x <= tileRange.maxX; ++x) {\n      for (y = tileRange.minY; y <= tileRange.maxY; ++y) {\n        if (Date.now() - frameState.time > 16 && animatingOrInteracting) {\n          continue;\n        }\n        tile = this.getTile(z, x, y, pixelRatio, projection);\n        if (this.isDrawableTile_(tile)) {\n          const uid = getUid(this);\n          if (tile.getState() == TileState.LOADED) {\n            tilesToDrawByZ[z][tile.tileCoord.toString()] = tile;\n            const inTransition = tile.inTransition(uid);\n            if (!this.newTiles_ && (inTransition || this.renderedTiles.indexOf(tile) === -1)) {\n              this.newTiles_ = true;\n            }\n          }\n          if (tile.getAlpha(uid, frameState.time) === 1) {\n            // don't look for alt tiles if alpha is 1\n            continue;\n          }\n        }\n\n        const childTileRange = tileGrid.getTileCoordChildTileRange(\n          tile.tileCoord, tmpTileRange, tmpExtent);\n        let covered = false;\n        if (childTileRange) {\n          covered = findLoadedTiles(z + 1, childTileRange);\n        }\n        if (!covered) {\n          tileGrid.forEachTileCoordParentTileRange(\n            tile.tileCoord, findLoadedTiles, null, tmpTileRange, tmpExtent);\n        }\n\n      }\n    }\n\n    const renderedResolution = tileResolution * pixelRatio / tilePixelRatio * oversampling;\n    if (!(this.renderedResolution && Date.now() - frameState.time > 16 && animatingOrInteracting) && (\n      this.newTiles_ ||\n          !(this.renderedExtent_ && containsExtent(this.renderedExtent_, extent)) ||\n          this.renderedRevision != sourceRevision ||\n          oversampling != this.oversampling_ ||\n          !animatingOrInteracting && renderedResolution != this.renderedResolution\n    )) {\n\n      const context = this.context;\n      if (context) {\n        const tilePixelSize = tileSource.getTilePixelSize(z, pixelRatio, projection);\n        const width = Math.round(tileRange.getWidth() * tilePixelSize[0] / oversampling);\n        const height = Math.round(tileRange.getHeight() * tilePixelSize[1] / oversampling);\n        const canvas = context.canvas;\n        if (canvas.width != width || canvas.height != height) {\n          this.oversampling_ = oversampling;\n          canvas.width = width;\n          canvas.height = height;\n        } else {\n          if (this.renderedExtent_ && !equals(imageExtent, this.renderedExtent_)) {\n            context.clearRect(0, 0, width, height);\n          }\n          oversampling = this.oversampling_;\n        }\n      }\n\n      this.renderedTiles.length = 0;\n      /** @type {Array<number>} */\n      const zs = Object.keys(tilesToDrawByZ).map(Number);\n      zs.sort(function(a, b) {\n        if (a === z) {\n          return 1;\n        } else if (b === z) {\n          return -1;\n        } else {\n          return a > b ? 1 : a < b ? -1 : 0;\n        }\n      });\n      let currentResolution, currentScale, currentTilePixelSize, currentZ, i, ii;\n      let tileExtent, tileGutter, tilesToDraw, w, h;\n      for (i = 0, ii = zs.length; i < ii; ++i) {\n        currentZ = zs[i];\n        currentTilePixelSize = tileSource.getTilePixelSize(currentZ, pixelRatio, projection);\n        currentResolution = tileGrid.getResolution(currentZ);\n        currentScale = currentResolution / tileResolution;\n        tileGutter = tilePixelRatio * tileSource.getGutterForProjection(projection);\n        tilesToDraw = tilesToDrawByZ[currentZ];\n        for (const tileCoordKey in tilesToDraw) {\n          tile = tilesToDraw[tileCoordKey];\n          tileExtent = tileGrid.getTileCoordExtent(tile.getTileCoord(), tmpExtent);\n          x = (tileExtent[0] - imageExtent[0]) / tileResolution * tilePixelRatio / oversampling;\n          y = (imageExtent[3] - tileExtent[3]) / tileResolution * tilePixelRatio / oversampling;\n          w = currentTilePixelSize[0] * currentScale / oversampling;\n          h = currentTilePixelSize[1] * currentScale / oversampling;\n          this.drawTileImage(tile, frameState, layerState, x, y, w, h, tileGutter, z === currentZ);\n          this.renderedTiles.push(tile);\n        }\n      }\n\n      this.renderedRevision = sourceRevision;\n      this.renderedResolution = tileResolution * pixelRatio / tilePixelRatio * oversampling;\n      this.renderedExtent_ = imageExtent;\n    }\n\n    const scale = this.renderedResolution / viewResolution;\n    const transform = composeTransform(this.imageTransform_,\n      pixelRatio * size[0] / 2, pixelRatio * size[1] / 2,\n      scale, scale,\n      0,\n      (this.renderedExtent_[0] - viewCenter[0]) / this.renderedResolution * pixelRatio,\n      (viewCenter[1] - this.renderedExtent_[3]) / this.renderedResolution * pixelRatio);\n    composeTransform(this.coordinateToCanvasPixelTransform,\n      pixelRatio * size[0] / 2 - transform[4], pixelRatio * size[1] / 2 - transform[5],\n      pixelRatio / viewResolution, -pixelRatio / viewResolution,\n      0,\n      -viewCenter[0], -viewCenter[1]);\n\n\n    this.updateUsedTiles(frameState.usedTiles, tileSource, z, tileRange);\n    this.manageTilePyramid(frameState, tileSource, tileGrid, pixelRatio,\n      projection, extent, z, tileLayer.getPreload());\n    this.scheduleExpireCache(frameState, tileSource);\n\n    return this.renderedTiles.length > 0;\n  }\n\n  /**\n   * @param {import(\"../../Tile.js\").default} tile Tile.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../../layer/Layer.js\").State} layerState Layer state.\n   * @param {number} x Left of the tile.\n   * @param {number} y Top of the tile.\n   * @param {number} w Width of the tile.\n   * @param {number} h Height of the tile.\n   * @param {number} gutter Tile gutter.\n   * @param {boolean} transition Apply an alpha transition.\n   */\n  drawTileImage(tile, frameState, layerState, x, y, w, h, gutter, transition) {\n    const image = this.getTileImage(tile);\n    if (!image) {\n      return;\n    }\n    const uid = getUid(this);\n    const alpha = transition ? tile.getAlpha(uid, frameState.time) : 1;\n    const tileLayer = /** @type {import(\"../../layer/Tile.js\").default} */ (this.getLayer());\n    const tileSource = /** @type {import(\"../../source/Tile.js\").default} */ (tileLayer.getSource());\n    if (alpha === 1 && !tileSource.getOpaque(frameState.viewState.projection)) {\n      this.context.clearRect(x, y, w, h);\n    }\n    const alphaChanged = alpha !== this.context.globalAlpha;\n    if (alphaChanged) {\n      this.context.save();\n      this.context.globalAlpha = alpha;\n    }\n    this.context.drawImage(image, gutter, gutter,\n      image.width - 2 * gutter, image.height - 2 * gutter, x, y, w, h);\n\n    if (alphaChanged) {\n      this.context.restore();\n    }\n    if (alpha !== 1) {\n      frameState.animate = true;\n    } else if (transition) {\n      tile.endTransition(uid);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImage() {\n    const context = this.context;\n    return context ? context.canvas : null;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImageTransform() {\n    return this.imageTransform_;\n  }\n\n  /**\n   * Get the image from a tile.\n   * @param {import(\"../../Tile.js\").default} tile Tile.\n   * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n   * @protected\n   */\n  getTileImage(tile) {\n    return /** @type {import(\"../../ImageTile.js\").default} */ (tile).getImage();\n  }\n}\n\n\n/**\n * Determine if this renderer handles the provided layer.\n * @param {import(\"../../layer/Layer.js\").default} layer The candidate layer.\n * @return {boolean} The renderer can render the layer.\n */\nCanvasTileLayerRenderer['handles'] = function(layer) {\n  return layer.getType() === LayerType.TILE;\n};\n\n\n/**\n * Create a layer renderer.\n * @param {import(\"../Map.js\").default} mapRenderer The map renderer.\n * @param {import(\"../../layer/Layer.js\").default} layer The layer to be rendererd.\n * @return {CanvasTileLayerRenderer} The layer renderer.\n */\nCanvasTileLayerRenderer['create'] = function(mapRenderer, layer) {\n  return new CanvasTileLayerRenderer(/** @type {import(\"../../layer/Tile.js\").default} */ (layer));\n};\n\n\n/**\n * @function\n * @return {import(\"../../layer/Tile.js\").default|import(\"../../layer/VectorTile.js\").default}\n */\nCanvasTileLayerRenderer.prototype.getLayer;\n\n\nexport default CanvasTileLayerRenderer;\n","/**\n * @module ol/render/ReplayGroup\n */\nimport {abstract} from '../util.js';\n\n/**\n * Base class for replay groups.\n */\nclass ReplayGroup {\n  /**\n   * @abstract\n   * @param {number|undefined} zIndex Z index.\n   * @param {import(\"./ReplayType.js\").default} replayType Replay type.\n   * @return {import(\"./VectorContext.js\").default} Replay.\n   */\n  getReplay(zIndex, replayType) {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @return {boolean} Is empty.\n   */\n  isEmpty() {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @param {boolean} group Group with previous replay\n   * @return {Array<*>} The resulting instruction group\n   */\n  addDeclutter(group) {\n    return abstract();\n  }\n}\n\nexport default ReplayGroup;\n","/**\n * @module ol/render/ReplayType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  CIRCLE: 'Circle',\n  DEFAULT: 'Default',\n  IMAGE: 'Image',\n  LINE_STRING: 'LineString',\n  POLYGON: 'Polygon',\n  TEXT: 'Text'\n};\n","/**\n * @module ol/geom/flat/textpath\n */\nimport {lerp} from '../../math.js';\n\n\n/**\n * @param {Array<number>} flatCoordinates Path to put text on.\n * @param {number} offset Start offset of the `flatCoordinates`.\n * @param {number} end End offset of the `flatCoordinates`.\n * @param {number} stride Stride.\n * @param {string} text Text to place on the path.\n * @param {function(string):number} measure Measure function returning the\n * width of the character passed as 1st argument.\n * @param {number} startM m along the path where the text starts.\n * @param {number} maxAngle Max angle between adjacent chars in radians.\n * @return {Array<Array<*>>} The result array of null if `maxAngle` was\n * exceeded. Entries of the array are x, y, anchorX, angle, chunk.\n */\nexport function drawTextOnPath(\n  flatCoordinates, offset, end, stride, text, measure, startM, maxAngle) {\n  const result = [];\n\n  // Keep text upright\n  const reverse = flatCoordinates[offset] > flatCoordinates[end - stride];\n\n  const numChars = text.length;\n\n  let x1 = flatCoordinates[offset];\n  let y1 = flatCoordinates[offset + 1];\n  offset += stride;\n  let x2 = flatCoordinates[offset];\n  let y2 = flatCoordinates[offset + 1];\n  let segmentM = 0;\n  let segmentLength = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n\n  let chunk = '';\n  let chunkLength = 0;\n  let data, index, previousAngle;\n  for (let i = 0; i < numChars; ++i) {\n    index = reverse ? numChars - i - 1 : i;\n    const char = text.charAt(index);\n    chunk = reverse ? char + chunk : chunk + char;\n    const charLength = measure(chunk) - chunkLength;\n    chunkLength += charLength;\n    const charM = startM + charLength / 2;\n    while (offset < end - stride && segmentM + segmentLength < charM) {\n      x1 = x2;\n      y1 = y2;\n      offset += stride;\n      x2 = flatCoordinates[offset];\n      y2 = flatCoordinates[offset + 1];\n      segmentM += segmentLength;\n      segmentLength = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n    }\n    const segmentPos = charM - segmentM;\n    let angle = Math.atan2(y2 - y1, x2 - x1);\n    if (reverse) {\n      angle += angle > 0 ? -Math.PI : Math.PI;\n    }\n    if (previousAngle !== undefined) {\n      let delta = angle - previousAngle;\n      delta += (delta > Math.PI) ? -2 * Math.PI : (delta < -Math.PI) ? 2 * Math.PI : 0;\n      if (Math.abs(delta) > maxAngle) {\n        return null;\n      }\n    }\n    const interpolate = segmentPos / segmentLength;\n    const x = lerp(x1, x2, interpolate);\n    const y = lerp(y1, y2, interpolate);\n    if (previousAngle == angle) {\n      if (reverse) {\n        data[0] = x;\n        data[1] = y;\n        data[2] = charLength / 2;\n      }\n      data[4] = chunk;\n    } else {\n      chunk = char;\n      chunkLength = charLength;\n      data = [x, y, charLength / 2, angle, chunk];\n      if (reverse) {\n        result.unshift(data);\n      } else {\n        result.push(data);\n      }\n      previousAngle = angle;\n    }\n    startM += charLength;\n  }\n  return result;\n}\n","/**\n * @module ol/render/canvas/Instruction\n */\n\n/**\n * @enum {number}\n */\nconst Instruction = {\n  BEGIN_GEOMETRY: 0,\n  BEGIN_PATH: 1,\n  CIRCLE: 2,\n  CLOSE_PATH: 3,\n  CUSTOM: 4,\n  DRAW_CHARS: 5,\n  DRAW_IMAGE: 6,\n  END_GEOMETRY: 7,\n  FILL: 8,\n  MOVE_TO_LINE_TO: 9,\n  SET_FILL_STYLE: 10,\n  SET_STROKE_STYLE: 11,\n  STROKE: 12\n};\n\n\n/**\n * @type {Array<Instruction>}\n */\nexport const fillInstruction = [Instruction.FILL];\n\n\n/**\n * @type {Array<Instruction>}\n */\nexport const strokeInstruction = [Instruction.STROKE];\n\n\n/**\n * @type {Array<Instruction>}\n */\nexport const beginPathInstruction = [Instruction.BEGIN_PATH];\n\n\n/**\n * @type {Array<Instruction>}\n */\nexport const closePathInstruction = [Instruction.CLOSE_PATH];\n\n\nexport default Instruction;\n","/**\n * @module ol/render/replay\n */\nimport ReplayType from './ReplayType.js';\n\n\n/**\n * @const\n * @type {Array<ReplayType>}\n */\nexport const ORDER = [\n  ReplayType.POLYGON,\n  ReplayType.CIRCLE,\n  ReplayType.LINE_STRING,\n  ReplayType.IMAGE,\n  ReplayType.TEXT,\n  ReplayType.DEFAULT\n];\n\n/**\n * @const\n * @enum {number}\n */\nexport const TEXT_ALIGN = {};\nTEXT_ALIGN['left'] = 0;\nTEXT_ALIGN['end'] = 0;\nTEXT_ALIGN['center'] = 0.5;\nTEXT_ALIGN['right'] = 1;\nTEXT_ALIGN['start'] = 1;\nTEXT_ALIGN['top'] = 0;\nTEXT_ALIGN['middle'] = 0.5;\nTEXT_ALIGN['hanging'] = 0.2;\nTEXT_ALIGN['alphabetic'] = 0.8;\nTEXT_ALIGN['ideographic'] = 0.8;\nTEXT_ALIGN['bottom'] = 1;\n","/**\n * @module ol/render/canvas/Replay\n */\nimport {getUid} from '../../util.js';\nimport {equals, reverseSubArray} from '../../array.js';\nimport {asColorLike} from '../../colorlike.js';\nimport {buffer, clone, coordinateRelationship, createEmpty, createOrUpdate,\n  createOrUpdateEmpty, extend, extendCoordinate, intersects} from '../../extent.js';\nimport Relationship from '../../extent/Relationship.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport {inflateCoordinates, inflateCoordinatesArray, inflateMultiCoordinatesArray} from '../../geom/flat/inflate.js';\nimport {lineStringLength} from '../../geom/flat/length.js';\nimport {drawTextOnPath} from '../../geom/flat/textpath.js';\nimport {transform2D} from '../../geom/flat/transform.js';\nimport {CANVAS_LINE_DASH} from '../../has.js';\nimport {isEmpty} from '../../obj.js';\nimport VectorContext from '../VectorContext.js';\nimport {drawImage, resetTransform, defaultPadding, defaultFillStyle, defaultStrokeStyle,\n  defaultMiterLimit, defaultLineWidth, defaultLineJoin, defaultLineDashOffset,\n  defaultLineDash, defaultLineCap} from '../canvas.js';\nimport CanvasInstruction from './Instruction.js';\nimport {TEXT_ALIGN} from '../replay.js';\nimport {\n  create as createTransform,\n  compose as composeTransform,\n  apply as applyTransform,\n  setFromArray as transformSetFromArray\n} from '../../transform.js';\n\n\n/**\n * @type {import(\"../../extent.js\").Extent}\n */\nconst tmpExtent = createEmpty();\n\n\n/**\n * @type {!import(\"../../transform.js\").Transform}\n */\nconst tmpTransform = createTransform();\n\n\nclass CanvasReplay extends VectorContext {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {boolean} overlaps The replay can have overlapping geometries.\n   * @param {?} declutterTree Declutter tree.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n    super();\n\n    /**\n     * @type {?}\n     */\n    this.declutterTree = declutterTree;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.tolerance = tolerance;\n\n    /**\n     * @protected\n     * @const\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.maxExtent = maxExtent;\n\n    /**\n     * @protected\n     * @type {boolean}\n     */\n    this.overlaps = overlaps;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.pixelRatio = pixelRatio;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.maxLineWidth = 0;\n\n    /**\n     * @protected\n     * @const\n     * @type {number}\n     */\n    this.resolution = resolution;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.alignFill_;\n\n    /**\n     * @private\n     * @type {Array<*>}\n     */\n    this.beginGeometryInstruction1_ = null;\n\n    /**\n     * @private\n     * @type {Array<*>}\n     */\n    this.beginGeometryInstruction2_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.bufferedMaxExtent_ = null;\n\n    /**\n     * @protected\n     * @type {Array<*>}\n     */\n    this.instructions = [];\n\n    /**\n     * @protected\n     * @type {Array<number>}\n     */\n    this.coordinates = [];\n\n    /**\n     * @private\n     * @type {!Object<number,import(\"../../coordinate.js\").Coordinate|Array<import(\"../../coordinate.js\").Coordinate>|Array<Array<import(\"../../coordinate.js\").Coordinate>>>}\n     */\n    this.coordinateCache_ = {};\n\n    /**\n     * @private\n     * @type {!import(\"../../transform.js\").Transform}\n     */\n    this.renderedTransform_ = createTransform();\n\n    /**\n     * @protected\n     * @type {Array<*>}\n     */\n    this.hitDetectionInstructions = [];\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.pixelCoordinates_ = null;\n\n    /**\n     * @protected\n     * @type {import(\"../canvas.js\").FillStrokeState}\n     */\n    this.state = /** @type {import(\"../canvas.js\").FillStrokeState} */ ({});\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.viewRotation_ = 0;\n\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../coordinate.js\").Coordinate} p1 1st point of the background box.\n   * @param {import(\"../../coordinate.js\").Coordinate} p2 2nd point of the background box.\n   * @param {import(\"../../coordinate.js\").Coordinate} p3 3rd point of the background box.\n   * @param {import(\"../../coordinate.js\").Coordinate} p4 4th point of the background box.\n   * @param {Array<*>} fillInstruction Fill instruction.\n   * @param {Array<*>} strokeInstruction Stroke instruction.\n   */\n  replayTextBackground_(context, p1, p2, p3, p4, fillInstruction, strokeInstruction) {\n    context.beginPath();\n    context.moveTo.apply(context, p1);\n    context.lineTo.apply(context, p2);\n    context.lineTo.apply(context, p3);\n    context.lineTo.apply(context, p4);\n    context.lineTo.apply(context, p1);\n    if (fillInstruction) {\n      this.alignFill_ = /** @type {boolean} */ (fillInstruction[2]);\n      this.fill_(context);\n    }\n    if (strokeInstruction) {\n      this.setStrokeStyle_(context, /** @type {Array<*>} */ (strokeInstruction));\n      context.stroke();\n    }\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {HTMLImageElement|HTMLCanvasElement|HTMLVideoElement} image Image.\n   * @param {number} anchorX Anchor X.\n   * @param {number} anchorY Anchor Y.\n   * @param {import(\"../canvas.js\").DeclutterGroup} declutterGroup Declutter group.\n   * @param {number} height Height.\n   * @param {number} opacity Opacity.\n   * @param {number} originX Origin X.\n   * @param {number} originY Origin Y.\n   * @param {number} rotation Rotation.\n   * @param {number} scale Scale.\n   * @param {boolean} snapToPixel Snap to pixel.\n   * @param {number} width Width.\n   * @param {Array<number>} padding Padding.\n   * @param {Array<*>} fillInstruction Fill instruction.\n   * @param {Array<*>} strokeInstruction Stroke instruction.\n   */\n  replayImage_(\n    context,\n    x,\n    y,\n    image,\n    anchorX,\n    anchorY,\n    declutterGroup,\n    height,\n    opacity,\n    originX,\n    originY,\n    rotation,\n    scale,\n    snapToPixel,\n    width,\n    padding,\n    fillInstruction,\n    strokeInstruction\n  ) {\n    const fillStroke = fillInstruction || strokeInstruction;\n    anchorX *= scale;\n    anchorY *= scale;\n    x -= anchorX;\n    y -= anchorY;\n\n    const w = (width + originX > image.width) ? image.width - originX : width;\n    const h = (height + originY > image.height) ? image.height - originY : height;\n    const boxW = padding[3] + w * scale + padding[1];\n    const boxH = padding[0] + h * scale + padding[2];\n    const boxX = x - padding[3];\n    const boxY = y - padding[0];\n\n    /** @type {import(\"../../coordinate.js\").Coordinate} */\n    let p1;\n    /** @type {import(\"../../coordinate.js\").Coordinate} */\n    let p2;\n    /** @type {import(\"../../coordinate.js\").Coordinate} */\n    let p3;\n    /** @type {import(\"../../coordinate.js\").Coordinate} */\n    let p4;\n    if (fillStroke || rotation !== 0) {\n      p1 = [boxX, boxY];\n      p2 = [boxX + boxW, boxY];\n      p3 = [boxX + boxW, boxY + boxH];\n      p4 = [boxX, boxY + boxH];\n    }\n\n    let transform = null;\n    if (rotation !== 0) {\n      const centerX = x + anchorX;\n      const centerY = y + anchorY;\n      transform = composeTransform(tmpTransform, centerX, centerY, 1, 1, rotation, -centerX, -centerY);\n\n      createOrUpdateEmpty(tmpExtent);\n      extendCoordinate(tmpExtent, applyTransform(tmpTransform, p1));\n      extendCoordinate(tmpExtent, applyTransform(tmpTransform, p2));\n      extendCoordinate(tmpExtent, applyTransform(tmpTransform, p3));\n      extendCoordinate(tmpExtent, applyTransform(tmpTransform, p4));\n    } else {\n      createOrUpdate(boxX, boxY, boxX + boxW, boxY + boxH, tmpExtent);\n    }\n    const canvas = context.canvas;\n    const strokePadding = strokeInstruction ? (strokeInstruction[2] * scale / 2) : 0;\n    const intersects =\n        tmpExtent[0] - strokePadding <= canvas.width && tmpExtent[2] + strokePadding >= 0 &&\n        tmpExtent[1] - strokePadding <= canvas.height && tmpExtent[3] + strokePadding >= 0;\n\n    if (snapToPixel) {\n      x = Math.round(x);\n      y = Math.round(y);\n    }\n\n    if (declutterGroup) {\n      if (!intersects && declutterGroup[4] == 1) {\n        return;\n      }\n      extend(declutterGroup, tmpExtent);\n      const declutterArgs = intersects ?\n        [context, transform ? transform.slice(0) : null, opacity, image, originX, originY, w, h, x, y, scale] :\n        null;\n      if (declutterArgs && fillStroke) {\n        declutterArgs.push(fillInstruction, strokeInstruction, p1, p2, p3, p4);\n      }\n      declutterGroup.push(declutterArgs);\n    } else if (intersects) {\n      if (fillStroke) {\n        this.replayTextBackground_(context, p1, p2, p3, p4,\n          /** @type {Array<*>} */ (fillInstruction),\n          /** @type {Array<*>} */ (strokeInstruction));\n      }\n      drawImage(context, transform, opacity, image, originX, originY, w, h, x, y, scale);\n    }\n  }\n\n  /**\n   * @protected\n   * @param {Array<number>} dashArray Dash array.\n   * @return {Array<number>} Dash array with pixel ratio applied\n   */\n  applyPixelRatio(dashArray) {\n    const pixelRatio = this.pixelRatio;\n    return pixelRatio == 1 ? dashArray : dashArray.map(function(dash) {\n      return dash * pixelRatio;\n    });\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @param {boolean} closed Last input coordinate equals first.\n   * @param {boolean} skipFirst Skip first coordinate.\n   * @protected\n   * @return {number} My end.\n   */\n  appendFlatCoordinates(flatCoordinates, offset, end, stride, closed, skipFirst) {\n\n    let myEnd = this.coordinates.length;\n    const extent = this.getBufferedMaxExtent();\n    if (skipFirst) {\n      offset += stride;\n    }\n    const lastCoord = [flatCoordinates[offset], flatCoordinates[offset + 1]];\n    const nextCoord = [NaN, NaN];\n    let skipped = true;\n\n    let i, lastRel, nextRel;\n    for (i = offset + stride; i < end; i += stride) {\n      nextCoord[0] = flatCoordinates[i];\n      nextCoord[1] = flatCoordinates[i + 1];\n      nextRel = coordinateRelationship(extent, nextCoord);\n      if (nextRel !== lastRel) {\n        if (skipped) {\n          this.coordinates[myEnd++] = lastCoord[0];\n          this.coordinates[myEnd++] = lastCoord[1];\n        }\n        this.coordinates[myEnd++] = nextCoord[0];\n        this.coordinates[myEnd++] = nextCoord[1];\n        skipped = false;\n      } else if (nextRel === Relationship.INTERSECTING) {\n        this.coordinates[myEnd++] = nextCoord[0];\n        this.coordinates[myEnd++] = nextCoord[1];\n        skipped = false;\n      } else {\n        skipped = true;\n      }\n      lastCoord[0] = nextCoord[0];\n      lastCoord[1] = nextCoord[1];\n      lastRel = nextRel;\n    }\n\n    // Last coordinate equals first or only one point to append:\n    if ((closed && skipped) || i === offset + stride) {\n      this.coordinates[myEnd++] = lastCoord[0];\n      this.coordinates[myEnd++] = lastCoord[1];\n    }\n    return myEnd;\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {Array<number>} ends Ends.\n   * @param {number} stride Stride.\n   * @param {Array<number>} replayEnds Replay ends.\n   * @return {number} Offset.\n   */\n  drawCustomCoordinates_(flatCoordinates, offset, ends, stride, replayEnds) {\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      const end = ends[i];\n      const replayEnd = this.appendFlatCoordinates(flatCoordinates, offset, end, stride, false, false);\n      replayEnds.push(replayEnd);\n      offset = end;\n    }\n    return offset;\n  }\n\n  /**\n   * @inheritDoc.\n   */\n  drawCustom(geometry, feature, renderer) {\n    this.beginGeometry(geometry, feature);\n    const type = geometry.getType();\n    const stride = geometry.getStride();\n    const replayBegin = this.coordinates.length;\n    let flatCoordinates, replayEnd, replayEnds, replayEndss;\n    let offset;\n    if (type == GeometryType.MULTI_POLYGON) {\n      geometry = /** @type {import(\"../../geom/MultiPolygon.js\").default} */ (geometry);\n      flatCoordinates = geometry.getOrientedFlatCoordinates();\n      replayEndss = [];\n      const endss = geometry.getEndss();\n      offset = 0;\n      for (let i = 0, ii = endss.length; i < ii; ++i) {\n        const myEnds = [];\n        offset = this.drawCustomCoordinates_(flatCoordinates, offset, endss[i], stride, myEnds);\n        replayEndss.push(myEnds);\n      }\n      this.instructions.push([CanvasInstruction.CUSTOM,\n        replayBegin, replayEndss, geometry, renderer, inflateMultiCoordinatesArray]);\n    } else if (type == GeometryType.POLYGON || type == GeometryType.MULTI_LINE_STRING) {\n      replayEnds = [];\n      flatCoordinates = (type == GeometryType.POLYGON) ?\n        /** @type {import(\"../../geom/Polygon.js\").default} */ (geometry).getOrientedFlatCoordinates() :\n        geometry.getFlatCoordinates();\n      offset = this.drawCustomCoordinates_(flatCoordinates, 0,\n        /** @type {import(\"../../geom/Polygon.js\").default|import(\"../../geom/MultiLineString.js\").default} */ (geometry).getEnds(),\n        stride, replayEnds);\n      this.instructions.push([CanvasInstruction.CUSTOM,\n        replayBegin, replayEnds, geometry, renderer, inflateCoordinatesArray]);\n    } else if (type == GeometryType.LINE_STRING || type == GeometryType.MULTI_POINT) {\n      flatCoordinates = geometry.getFlatCoordinates();\n      replayEnd = this.appendFlatCoordinates(\n        flatCoordinates, 0, flatCoordinates.length, stride, false, false);\n      this.instructions.push([CanvasInstruction.CUSTOM,\n        replayBegin, replayEnd, geometry, renderer, inflateCoordinates]);\n    } else if (type == GeometryType.POINT) {\n      flatCoordinates = geometry.getFlatCoordinates();\n      this.coordinates.push(flatCoordinates[0], flatCoordinates[1]);\n      replayEnd = this.coordinates.length;\n      this.instructions.push([CanvasInstruction.CUSTOM,\n        replayBegin, replayEnd, geometry, renderer]);\n    }\n    this.endGeometry(geometry, feature);\n  }\n\n  /**\n   * @protected\n   * @param {import(\"../../geom/Geometry.js\").default|import(\"../Feature.js\").default} geometry Geometry.\n   * @param {import(\"../../Feature.js\").default|import(\"../Feature.js\").default} feature Feature.\n   */\n  beginGeometry(geometry, feature) {\n    this.beginGeometryInstruction1_ = [CanvasInstruction.BEGIN_GEOMETRY, feature, 0];\n    this.instructions.push(this.beginGeometryInstruction1_);\n    this.beginGeometryInstruction2_ = [CanvasInstruction.BEGIN_GEOMETRY, feature, 0];\n    this.hitDetectionInstructions.push(this.beginGeometryInstruction2_);\n  }\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  finish() {}\n\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context Context.\n   */\n  fill_(context) {\n    if (this.alignFill_) {\n      const origin = applyTransform(this.renderedTransform_, [0, 0]);\n      const repeatSize = 512 * this.pixelRatio;\n      context.translate(origin[0] % repeatSize, origin[1] % repeatSize);\n      context.rotate(this.viewRotation_);\n    }\n    context.fill();\n    if (this.alignFill_) {\n      context.setTransform.apply(context, resetTransform);\n    }\n  }\n\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {Array<*>} instruction Instruction.\n   */\n  setStrokeStyle_(context, instruction) {\n    context.strokeStyle = /** @type {import(\"../../colorlike.js\").ColorLike} */ (instruction[1]);\n    context.lineWidth = /** @type {number} */ (instruction[2]);\n    context.lineCap = /** @type {CanvasLineCap} */ (instruction[3]);\n    context.lineJoin = /** @type {CanvasLineJoin} */ (instruction[4]);\n    context.miterLimit = /** @type {number} */ (instruction[5]);\n    if (CANVAS_LINE_DASH) {\n      context.lineDashOffset = /** @type {number} */ (instruction[7]);\n      context.setLineDash(/** @type {Array<number>} */ (instruction[6]));\n    }\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").DeclutterGroup} declutterGroup Declutter group.\n   * @param {import(\"../../Feature.js\").default|import(\"../Feature.js\").default} feature Feature.\n   */\n  renderDeclutter_(declutterGroup, feature) {\n    if (declutterGroup && declutterGroup.length > 5) {\n      const groupCount = declutterGroup[4];\n      if (groupCount == 1 || groupCount == declutterGroup.length - 5) {\n        /** @type {import(\"../../structs/RBush.js\").Entry} */\n        const box = {\n          minX: /** @type {number} */ (declutterGroup[0]),\n          minY: /** @type {number} */ (declutterGroup[1]),\n          maxX: /** @type {number} */ (declutterGroup[2]),\n          maxY: /** @type {number} */ (declutterGroup[3]),\n          value: feature\n        };\n        if (!this.declutterTree.collides(box)) {\n          this.declutterTree.insert(box);\n          for (let j = 5, jj = declutterGroup.length; j < jj; ++j) {\n            const declutterData = /** @type {Array} */ (declutterGroup[j]);\n            if (declutterData) {\n              if (declutterData.length > 11) {\n                this.replayTextBackground_(declutterData[0],\n                  declutterData[13], declutterData[14], declutterData[15], declutterData[16],\n                  declutterData[11], declutterData[12]);\n              }\n              drawImage.apply(undefined, declutterData);\n            }\n          }\n        }\n        declutterGroup.length = 5;\n        createOrUpdateEmpty(declutterGroup);\n      }\n    }\n  }\n\n  /**\n   * @private\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {Object<string, boolean>} skippedFeaturesHash Ids of features\n   *     to skip.\n   * @param {Array<*>} instructions Instructions array.\n   * @param {boolean} snapToPixel Snap point symbols and text to integer pixels.\n   * @param {function((import(\"../../Feature.js\").default|import(\"../Feature.js\").default)): T|undefined} featureCallback Feature callback.\n   * @param {import(\"../../extent.js\").Extent=} opt_hitExtent Only check features that intersect this\n   *     extent.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n  replay_(\n    context,\n    transform,\n    skippedFeaturesHash,\n    instructions,\n    snapToPixel,\n    featureCallback,\n    opt_hitExtent\n  ) {\n    /** @type {Array<number>} */\n    let pixelCoordinates;\n    if (this.pixelCoordinates_ && equals(transform, this.renderedTransform_)) {\n      pixelCoordinates = this.pixelCoordinates_;\n    } else {\n      if (!this.pixelCoordinates_) {\n        this.pixelCoordinates_ = [];\n      }\n      pixelCoordinates = transform2D(\n        this.coordinates, 0, this.coordinates.length, 2,\n        transform, this.pixelCoordinates_);\n      transformSetFromArray(this.renderedTransform_, transform);\n    }\n    const skipFeatures = !isEmpty(skippedFeaturesHash);\n    let i = 0; // instruction index\n    const ii = instructions.length; // end of instructions\n    let d = 0; // data index\n    let dd; // end of per-instruction data\n    let anchorX, anchorY, prevX, prevY, roundX, roundY, declutterGroup, image;\n    let pendingFill = 0;\n    let pendingStroke = 0;\n    let lastFillInstruction = null;\n    let lastStrokeInstruction = null;\n    const coordinateCache = this.coordinateCache_;\n    const viewRotation = this.viewRotation_;\n\n    const state = /** @type {import(\"../../render.js\").State} */ ({\n      context: context,\n      pixelRatio: this.pixelRatio,\n      resolution: this.resolution,\n      rotation: viewRotation\n    });\n\n    // When the batch size gets too big, performance decreases. 200 is a good\n    // balance between batch size and number of fill/stroke instructions.\n    const batchSize = this.instructions != instructions || this.overlaps ? 0 : 200;\n    let /** @type {import(\"../../Feature.js\").default|import(\"../Feature.js\").default} */ feature;\n    let x, y;\n    while (i < ii) {\n      const instruction = instructions[i];\n      const type = /** @type {CanvasInstruction} */ (instruction[0]);\n      switch (type) {\n        case CanvasInstruction.BEGIN_GEOMETRY:\n          feature = /** @type {import(\"../../Feature.js\").default|import(\"../Feature.js\").default} */ (instruction[1]);\n          if ((skipFeatures && skippedFeaturesHash[getUid(feature)]) || !feature.getGeometry()) {\n            i = /** @type {number} */ (instruction[2]);\n          } else if (opt_hitExtent !== undefined && !intersects(\n            opt_hitExtent, feature.getGeometry().getExtent())) {\n            i = /** @type {number} */ (instruction[2]) + 1;\n          } else {\n            ++i;\n          }\n          break;\n        case CanvasInstruction.BEGIN_PATH:\n          if (pendingFill > batchSize) {\n            this.fill_(context);\n            pendingFill = 0;\n          }\n          if (pendingStroke > batchSize) {\n            context.stroke();\n            pendingStroke = 0;\n          }\n          if (!pendingFill && !pendingStroke) {\n            context.beginPath();\n            prevX = prevY = NaN;\n          }\n          ++i;\n          break;\n        case CanvasInstruction.CIRCLE:\n          d = /** @type {number} */ (instruction[1]);\n          const x1 = pixelCoordinates[d];\n          const y1 = pixelCoordinates[d + 1];\n          const x2 = pixelCoordinates[d + 2];\n          const y2 = pixelCoordinates[d + 3];\n          const dx = x2 - x1;\n          const dy = y2 - y1;\n          const r = Math.sqrt(dx * dx + dy * dy);\n          context.moveTo(x1 + r, y1);\n          context.arc(x1, y1, r, 0, 2 * Math.PI, true);\n          ++i;\n          break;\n        case CanvasInstruction.CLOSE_PATH:\n          context.closePath();\n          ++i;\n          break;\n        case CanvasInstruction.CUSTOM:\n          d = /** @type {number} */ (instruction[1]);\n          dd = instruction[2];\n          const geometry = /** @type {import(\"../../geom/SimpleGeometry.js\").default} */ (instruction[3]);\n          const renderer = instruction[4];\n          const fn = instruction.length == 6 ? instruction[5] : undefined;\n          state.geometry = geometry;\n          state.feature = feature;\n          if (!(i in coordinateCache)) {\n            coordinateCache[i] = [];\n          }\n          const coords = coordinateCache[i];\n          if (fn) {\n            fn(pixelCoordinates, d, dd, 2, coords);\n          } else {\n            coords[0] = pixelCoordinates[d];\n            coords[1] = pixelCoordinates[d + 1];\n            coords.length = 2;\n          }\n          renderer(coords, state);\n          ++i;\n          break;\n        case CanvasInstruction.DRAW_IMAGE:\n          d = /** @type {number} */ (instruction[1]);\n          dd = /** @type {number} */ (instruction[2]);\n          image = /** @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} */\n              (instruction[3]);\n          // Remaining arguments in DRAW_IMAGE are in alphabetical order\n          anchorX = /** @type {number} */ (instruction[4]);\n          anchorY = /** @type {number} */ (instruction[5]);\n          declutterGroup = featureCallback ? null : /** @type {import(\"../canvas.js\").DeclutterGroup} */ (instruction[6]);\n          const height = /** @type {number} */ (instruction[7]);\n          const opacity = /** @type {number} */ (instruction[8]);\n          const originX = /** @type {number} */ (instruction[9]);\n          const originY = /** @type {number} */ (instruction[10]);\n          const rotateWithView = /** @type {boolean} */ (instruction[11]);\n          let rotation = /** @type {number} */ (instruction[12]);\n          const scale = /** @type {number} */ (instruction[13]);\n          const width = /** @type {number} */ (instruction[14]);\n\n          let padding, backgroundFill, backgroundStroke;\n          if (instruction.length > 16) {\n            padding = /** @type {Array<number>} */ (instruction[15]);\n            backgroundFill = /** @type {boolean} */ (instruction[16]);\n            backgroundStroke = /** @type {boolean} */ (instruction[17]);\n          } else {\n            padding = defaultPadding;\n            backgroundFill = backgroundStroke = false;\n          }\n\n          if (rotateWithView) {\n            rotation += viewRotation;\n          }\n          for (; d < dd; d += 2) {\n            this.replayImage_(context,\n              pixelCoordinates[d], pixelCoordinates[d + 1], image, anchorX, anchorY,\n              declutterGroup, height, opacity, originX, originY, rotation, scale,\n              snapToPixel, width, padding,\n              backgroundFill ? /** @type {Array<*>} */ (lastFillInstruction) : null,\n              backgroundStroke ? /** @type {Array<*>} */ (lastStrokeInstruction) : null);\n          }\n          this.renderDeclutter_(declutterGroup, feature);\n          ++i;\n          break;\n        case CanvasInstruction.DRAW_CHARS:\n          const begin = /** @type {number} */ (instruction[1]);\n          const end = /** @type {number} */ (instruction[2]);\n          const baseline = /** @type {number} */ (instruction[3]);\n          declutterGroup = featureCallback ? null : /** @type {import(\"../canvas.js\").DeclutterGroup} */ (instruction[4]);\n          const overflow = /** @type {number} */ (instruction[5]);\n          const fillKey = /** @type {string} */ (instruction[6]);\n          const maxAngle = /** @type {number} */ (instruction[7]);\n          const measure = /** @type {function(string):number} */ (instruction[8]);\n          const offsetY = /** @type {number} */ (instruction[9]);\n          const strokeKey = /** @type {string} */ (instruction[10]);\n          const strokeWidth = /** @type {number} */ (instruction[11]);\n          const text = /** @type {string} */ (instruction[12]);\n          const textKey = /** @type {string} */ (instruction[13]);\n          const textScale = /** @type {number} */ (instruction[14]);\n\n          const pathLength = lineStringLength(pixelCoordinates, begin, end, 2);\n          const textLength = measure(text);\n          if (overflow || textLength <= pathLength) {\n            /** @type {import(\"./TextReplay.js\").default} */\n            const textReplay = /** @type {?} */ (this);\n            const textAlign = textReplay.textStates[textKey].textAlign;\n            const startM = (pathLength - textLength) * TEXT_ALIGN[textAlign];\n            const parts = drawTextOnPath(\n              pixelCoordinates, begin, end, 2, text, measure, startM, maxAngle);\n            if (parts) {\n              let c, cc, chars, label, part;\n              if (strokeKey) {\n                for (c = 0, cc = parts.length; c < cc; ++c) {\n                  part = parts[c]; // x, y, anchorX, rotation, chunk\n                  chars = /** @type {string} */ (part[4]);\n                  label = textReplay.getImage(chars, textKey, '', strokeKey);\n                  anchorX = /** @type {number} */ (part[2]) + strokeWidth;\n                  anchorY = baseline * label.height + (0.5 - baseline) * 2 * strokeWidth - offsetY;\n                  this.replayImage_(context,\n                    /** @type {number} */ (part[0]), /** @type {number} */ (part[1]), label,\n                    anchorX, anchorY, declutterGroup, label.height, 1, 0, 0,\n                    /** @type {number} */ (part[3]), textScale, false, label.width,\n                    defaultPadding, null, null);\n                }\n              }\n              if (fillKey) {\n                for (c = 0, cc = parts.length; c < cc; ++c) {\n                  part = parts[c]; // x, y, anchorX, rotation, chunk\n                  chars = /** @type {string} */ (part[4]);\n                  label = textReplay.getImage(chars, textKey, fillKey, '');\n                  anchorX = /** @type {number} */ (part[2]);\n                  anchorY = baseline * label.height - offsetY;\n                  this.replayImage_(context,\n                    /** @type {number} */ (part[0]), /** @type {number} */ (part[1]), label,\n                    anchorX, anchorY, declutterGroup, label.height, 1, 0, 0,\n                    /** @type {number} */ (part[3]), textScale, false, label.width,\n                    defaultPadding, null, null);\n                }\n              }\n            }\n          }\n          this.renderDeclutter_(declutterGroup, feature);\n          ++i;\n          break;\n        case CanvasInstruction.END_GEOMETRY:\n          if (featureCallback !== undefined) {\n            feature = /** @type {import(\"../../Feature.js\").default|import(\"../Feature.js\").default} */ (instruction[1]);\n            const result = featureCallback(feature);\n            if (result) {\n              return result;\n            }\n          }\n          ++i;\n          break;\n        case CanvasInstruction.FILL:\n          if (batchSize) {\n            pendingFill++;\n          } else {\n            this.fill_(context);\n          }\n          ++i;\n          break;\n        case CanvasInstruction.MOVE_TO_LINE_TO:\n          d = /** @type {number} */ (instruction[1]);\n          dd = /** @type {number} */ (instruction[2]);\n          x = pixelCoordinates[d];\n          y = pixelCoordinates[d + 1];\n          roundX = (x + 0.5) | 0;\n          roundY = (y + 0.5) | 0;\n          if (roundX !== prevX || roundY !== prevY) {\n            context.moveTo(x, y);\n            prevX = roundX;\n            prevY = roundY;\n          }\n          for (d += 2; d < dd; d += 2) {\n            x = pixelCoordinates[d];\n            y = pixelCoordinates[d + 1];\n            roundX = (x + 0.5) | 0;\n            roundY = (y + 0.5) | 0;\n            if (d == dd - 2 || roundX !== prevX || roundY !== prevY) {\n              context.lineTo(x, y);\n              prevX = roundX;\n              prevY = roundY;\n            }\n          }\n          ++i;\n          break;\n        case CanvasInstruction.SET_FILL_STYLE:\n          lastFillInstruction = instruction;\n          this.alignFill_ = instruction[2];\n\n          if (pendingFill) {\n            this.fill_(context);\n            pendingFill = 0;\n            if (pendingStroke) {\n              context.stroke();\n              pendingStroke = 0;\n            }\n          }\n\n          context.fillStyle = /** @type {import(\"../../colorlike.js\").ColorLike} */ (instruction[1]);\n          ++i;\n          break;\n        case CanvasInstruction.SET_STROKE_STYLE:\n          lastStrokeInstruction = instruction;\n          if (pendingStroke) {\n            context.stroke();\n            pendingStroke = 0;\n          }\n          this.setStrokeStyle_(context, /** @type {Array<*>} */ (instruction));\n          ++i;\n          break;\n        case CanvasInstruction.STROKE:\n          if (batchSize) {\n            pendingStroke++;\n          } else {\n            context.stroke();\n          }\n          ++i;\n          break;\n        default:\n          ++i; // consume the instruction anyway, to avoid an infinite loop\n          break;\n      }\n    }\n    if (pendingFill) {\n      this.fill_(context);\n    }\n    if (pendingStroke) {\n      context.stroke();\n    }\n    return undefined;\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   * @param {Object<string, boolean>} skippedFeaturesHash Ids of features\n   *     to skip.\n   * @param {boolean} snapToPixel Snap point symbols and text to integer pixels.\n   */\n  replay(context, transform, viewRotation, skippedFeaturesHash, snapToPixel) {\n    this.viewRotation_ = viewRotation;\n    this.replay_(context, transform,\n      skippedFeaturesHash, this.instructions, snapToPixel, undefined, undefined);\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   * @param {Object<string, boolean>} skippedFeaturesHash Ids of features\n   *     to skip.\n   * @param {function((import(\"../../Feature.js\").default|import(\"../Feature.js\").default)): T=} opt_featureCallback\n   *     Feature callback.\n   * @param {import(\"../../extent.js\").Extent=} opt_hitExtent Only check features that intersect this\n   *     extent.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n  replayHitDetection(\n    context,\n    transform,\n    viewRotation,\n    skippedFeaturesHash,\n    opt_featureCallback,\n    opt_hitExtent\n  ) {\n    this.viewRotation_ = viewRotation;\n    return this.replay_(context, transform, skippedFeaturesHash,\n      this.hitDetectionInstructions, true, opt_featureCallback, opt_hitExtent);\n  }\n\n  /**\n   * Reverse the hit detection instructions.\n   */\n  reverseHitDetectionInstructions() {\n    const hitDetectionInstructions = this.hitDetectionInstructions;\n    // step 1 - reverse array\n    hitDetectionInstructions.reverse();\n    // step 2 - reverse instructions within geometry blocks\n    let i;\n    const n = hitDetectionInstructions.length;\n    let instruction;\n    let type;\n    let begin = -1;\n    for (i = 0; i < n; ++i) {\n      instruction = hitDetectionInstructions[i];\n      type = /** @type {CanvasInstruction} */ (instruction[0]);\n      if (type == CanvasInstruction.END_GEOMETRY) {\n        begin = i;\n      } else if (type == CanvasInstruction.BEGIN_GEOMETRY) {\n        instruction[2] = i;\n        reverseSubArray(this.hitDetectionInstructions, begin, i);\n        begin = -1;\n      }\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setFillStrokeStyle(fillStyle, strokeStyle) {\n    const state = this.state;\n    if (fillStyle) {\n      const fillStyleColor = fillStyle.getColor();\n      state.fillStyle = asColorLike(fillStyleColor ?\n        fillStyleColor : defaultFillStyle);\n    } else {\n      state.fillStyle = undefined;\n    }\n    if (strokeStyle) {\n      const strokeStyleColor = strokeStyle.getColor();\n      state.strokeStyle = asColorLike(strokeStyleColor ?\n        strokeStyleColor : defaultStrokeStyle);\n      const strokeStyleLineCap = strokeStyle.getLineCap();\n      state.lineCap = strokeStyleLineCap !== undefined ?\n        strokeStyleLineCap : defaultLineCap;\n      const strokeStyleLineDash = strokeStyle.getLineDash();\n      state.lineDash = strokeStyleLineDash ?\n        strokeStyleLineDash.slice() : defaultLineDash;\n      const strokeStyleLineDashOffset = strokeStyle.getLineDashOffset();\n      state.lineDashOffset = strokeStyleLineDashOffset ?\n        strokeStyleLineDashOffset : defaultLineDashOffset;\n      const strokeStyleLineJoin = strokeStyle.getLineJoin();\n      state.lineJoin = strokeStyleLineJoin !== undefined ?\n        strokeStyleLineJoin : defaultLineJoin;\n      const strokeStyleWidth = strokeStyle.getWidth();\n      state.lineWidth = strokeStyleWidth !== undefined ?\n        strokeStyleWidth : defaultLineWidth;\n      const strokeStyleMiterLimit = strokeStyle.getMiterLimit();\n      state.miterLimit = strokeStyleMiterLimit !== undefined ?\n        strokeStyleMiterLimit : defaultMiterLimit;\n\n      if (state.lineWidth > this.maxLineWidth) {\n        this.maxLineWidth = state.lineWidth;\n        // invalidate the buffered max extent cache\n        this.bufferedMaxExtent_ = null;\n      }\n    } else {\n      state.strokeStyle = undefined;\n      state.lineCap = undefined;\n      state.lineDash = null;\n      state.lineDashOffset = undefined;\n      state.lineJoin = undefined;\n      state.lineWidth = undefined;\n      state.miterLimit = undefined;\n    }\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   * @param {import(\"../../geom/Geometry.js\").default|import(\"../Feature.js\").default} geometry Geometry.\n   * @return {Array<*>} Fill instruction.\n   */\n  createFill(state, geometry) {\n    const fillStyle = state.fillStyle;\n    /** @type {Array<*>} */\n    const fillInstruction = [CanvasInstruction.SET_FILL_STYLE, fillStyle];\n    if (typeof fillStyle !== 'string') {\n      // Fill is a pattern or gradient - align it!\n      fillInstruction.push(true);\n    }\n    return fillInstruction;\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   */\n  applyStroke(state) {\n    this.instructions.push(this.createStroke(state));\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   * @return {Array<*>} Stroke instruction.\n   */\n  createStroke(state) {\n    return [\n      CanvasInstruction.SET_STROKE_STYLE,\n      state.strokeStyle, state.lineWidth * this.pixelRatio, state.lineCap,\n      state.lineJoin, state.miterLimit,\n      this.applyPixelRatio(state.lineDash), state.lineDashOffset * this.pixelRatio\n    ];\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   * @param {function(this:CanvasReplay, import(\"../canvas.js\").FillStrokeState, (import(\"../../geom/Geometry.js\").default|import(\"../Feature.js\").default)):Array<*>} createFill Create fill.\n   * @param {import(\"../../geom/Geometry.js\").default|import(\"../Feature.js\").default} geometry Geometry.\n   */\n  updateFillStyle(state, createFill, geometry) {\n    const fillStyle = state.fillStyle;\n    if (typeof fillStyle !== 'string' || state.currentFillStyle != fillStyle) {\n      if (fillStyle !== undefined) {\n        this.instructions.push(createFill.call(this, state, geometry));\n      }\n      state.currentFillStyle = fillStyle;\n    }\n  }\n\n  /**\n   * @param {import(\"../canvas.js\").FillStrokeState} state State.\n   * @param {function(this:CanvasReplay, import(\"../canvas.js\").FillStrokeState)} applyStroke Apply stroke.\n   */\n  updateStrokeStyle(state, applyStroke) {\n    const strokeStyle = state.strokeStyle;\n    const lineCap = state.lineCap;\n    const lineDash = state.lineDash;\n    const lineDashOffset = state.lineDashOffset;\n    const lineJoin = state.lineJoin;\n    const lineWidth = state.lineWidth;\n    const miterLimit = state.miterLimit;\n    if (state.currentStrokeStyle != strokeStyle ||\n        state.currentLineCap != lineCap ||\n        (lineDash != state.currentLineDash && !equals(state.currentLineDash, lineDash)) ||\n        state.currentLineDashOffset != lineDashOffset ||\n        state.currentLineJoin != lineJoin ||\n        state.currentLineWidth != lineWidth ||\n        state.currentMiterLimit != miterLimit) {\n      if (strokeStyle !== undefined) {\n        applyStroke.call(this, state);\n      }\n      state.currentStrokeStyle = strokeStyle;\n      state.currentLineCap = lineCap;\n      state.currentLineDash = lineDash;\n      state.currentLineDashOffset = lineDashOffset;\n      state.currentLineJoin = lineJoin;\n      state.currentLineWidth = lineWidth;\n      state.currentMiterLimit = miterLimit;\n    }\n  }\n\n  /**\n   * @param {import(\"../../geom/Geometry.js\").default|import(\"../Feature.js\").default} geometry Geometry.\n   * @param {import(\"../../Feature.js\").default|import(\"../Feature.js\").default} feature Feature.\n   */\n  endGeometry(geometry, feature) {\n    this.beginGeometryInstruction1_[2] = this.instructions.length;\n    this.beginGeometryInstruction1_ = null;\n    this.beginGeometryInstruction2_[2] = this.hitDetectionInstructions.length;\n    this.beginGeometryInstruction2_ = null;\n    const endGeometryInstruction = [CanvasInstruction.END_GEOMETRY, feature];\n    this.instructions.push(endGeometryInstruction);\n    this.hitDetectionInstructions.push(endGeometryInstruction);\n  }\n\n  /**\n   * Get the buffered rendering extent.  Rendering will be clipped to the extent\n   * provided to the constructor.  To account for symbolizers that may intersect\n   * this extent, we calculate a buffered extent (e.g. based on stroke width).\n   * @return {import(\"../../extent.js\").Extent} The buffered rendering extent.\n   * @protected\n   */\n  getBufferedMaxExtent() {\n    if (!this.bufferedMaxExtent_) {\n      this.bufferedMaxExtent_ = clone(this.maxExtent);\n      if (this.maxLineWidth > 0) {\n        const width = this.resolution * (this.maxLineWidth + 1) / 2;\n        buffer(this.bufferedMaxExtent_, width, this.bufferedMaxExtent_);\n      }\n    }\n    return this.bufferedMaxExtent_;\n  }\n}\n\n\nexport default CanvasReplay;\n","/**\n * @module ol/render/canvas/ImageReplay\n */\nimport CanvasInstruction from './Instruction.js';\nimport CanvasReplay from './Replay.js';\n\nclass CanvasImageReplay extends CanvasReplay {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {boolean} overlaps The replay can have overlapping geometries.\n   * @param {?} declutterTree Declutter tree.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n    super(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree);\n\n    /**\n     * @private\n     * @type {import(\"../canvas.js\").DeclutterGroup}\n     */\n    this.declutterGroup_ = null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n     */\n    this.hitDetectionImage_ = null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement}\n     */\n    this.image_ = null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.anchorX_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.anchorY_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.height_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.opacity_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.originX_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.originY_ = undefined;\n\n    /**\n     * @private\n     * @type {boolean|undefined}\n     */\n    this.rotateWithView_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.rotation_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.scale_ = undefined;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.width_ = undefined;\n\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} My end.\n   */\n  drawCoordinates_(flatCoordinates, offset, end, stride) {\n    return this.appendFlatCoordinates(flatCoordinates, offset, end, stride, false, false);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawPoint(pointGeometry, feature) {\n    if (!this.image_) {\n      return;\n    }\n    this.beginGeometry(pointGeometry, feature);\n    const flatCoordinates = pointGeometry.getFlatCoordinates();\n    const stride = pointGeometry.getStride();\n    const myBegin = this.coordinates.length;\n    const myEnd = this.drawCoordinates_(flatCoordinates, 0, flatCoordinates.length, stride);\n    this.instructions.push([\n      CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.image_,\n      // Remaining arguments to DRAW_IMAGE are in alphabetical order\n      this.anchorX_, this.anchorY_, this.declutterGroup_, this.height_, this.opacity_,\n      this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n      this.scale_ * this.pixelRatio, this.width_\n    ]);\n    this.hitDetectionInstructions.push([\n      CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.hitDetectionImage_,\n      // Remaining arguments to DRAW_IMAGE are in alphabetical order\n      this.anchorX_, this.anchorY_, this.declutterGroup_, this.height_, this.opacity_,\n      this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n      this.scale_, this.width_\n    ]);\n    this.endGeometry(pointGeometry, feature);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawMultiPoint(multiPointGeometry, feature) {\n    if (!this.image_) {\n      return;\n    }\n    this.beginGeometry(multiPointGeometry, feature);\n    const flatCoordinates = multiPointGeometry.getFlatCoordinates();\n    const stride = multiPointGeometry.getStride();\n    const myBegin = this.coordinates.length;\n    const myEnd = this.drawCoordinates_(\n      flatCoordinates, 0, flatCoordinates.length, stride);\n    this.instructions.push([\n      CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.image_,\n      // Remaining arguments to DRAW_IMAGE are in alphabetical order\n      this.anchorX_, this.anchorY_, this.declutterGroup_, this.height_, this.opacity_,\n      this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n      this.scale_ * this.pixelRatio, this.width_\n    ]);\n    this.hitDetectionInstructions.push([\n      CanvasInstruction.DRAW_IMAGE, myBegin, myEnd, this.hitDetectionImage_,\n      // Remaining arguments to DRAW_IMAGE are in alphabetical order\n      this.anchorX_, this.anchorY_, this.declutterGroup_, this.height_, this.opacity_,\n      this.originX_, this.originY_, this.rotateWithView_, this.rotation_,\n      this.scale_, this.width_\n    ]);\n    this.endGeometry(multiPointGeometry, feature);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  finish() {\n    this.reverseHitDetectionInstructions();\n    // FIXME this doesn't really protect us against further calls to draw*Geometry\n    this.anchorX_ = undefined;\n    this.anchorY_ = undefined;\n    this.hitDetectionImage_ = null;\n    this.image_ = null;\n    this.height_ = undefined;\n    this.scale_ = undefined;\n    this.opacity_ = undefined;\n    this.originX_ = undefined;\n    this.originY_ = undefined;\n    this.rotateWithView_ = undefined;\n    this.rotation_ = undefined;\n    this.width_ = undefined;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setImageStyle(imageStyle, declutterGroup) {\n    const anchor = imageStyle.getAnchor();\n    const size = imageStyle.getSize();\n    const hitDetectionImage = imageStyle.getHitDetectionImage(1);\n    const image = imageStyle.getImage(1);\n    const origin = imageStyle.getOrigin();\n    this.anchorX_ = anchor[0];\n    this.anchorY_ = anchor[1];\n    this.declutterGroup_ = /** @type {import(\"../canvas.js\").DeclutterGroup} */ (declutterGroup);\n    this.hitDetectionImage_ = hitDetectionImage;\n    this.image_ = image;\n    this.height_ = size[1];\n    this.opacity_ = imageStyle.getOpacity();\n    this.originX_ = origin[0];\n    this.originY_ = origin[1];\n    this.rotateWithView_ = imageStyle.getRotateWithView();\n    this.rotation_ = imageStyle.getRotation();\n    this.scale_ = imageStyle.getScale();\n    this.width_ = size[0];\n  }\n}\n\n\nexport default CanvasImageReplay;\n","/**\n * @module ol/render/canvas/LineStringReplay\n */\nimport CanvasInstruction, {strokeInstruction, beginPathInstruction} from './Instruction.js';\nimport CanvasReplay from './Replay.js';\n\nclass CanvasLineStringReplay extends CanvasReplay {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {boolean} overlaps The replay can have overlapping geometries.\n   * @param {?} declutterTree Declutter tree.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n    super(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree);\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {number} end End.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} end.\n   */\n  drawFlatCoordinates_(flatCoordinates, offset, end, stride) {\n    const myBegin = this.coordinates.length;\n    const myEnd = this.appendFlatCoordinates(\n      flatCoordinates, offset, end, stride, false, false);\n    const moveToLineToInstruction = [CanvasInstruction.MOVE_TO_LINE_TO, myBegin, myEnd];\n    this.instructions.push(moveToLineToInstruction);\n    this.hitDetectionInstructions.push(moveToLineToInstruction);\n    return end;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawLineString(lineStringGeometry, feature) {\n    const state = this.state;\n    const strokeStyle = state.strokeStyle;\n    const lineWidth = state.lineWidth;\n    if (strokeStyle === undefined || lineWidth === undefined) {\n      return;\n    }\n    this.updateStrokeStyle(state, this.applyStroke);\n    this.beginGeometry(lineStringGeometry, feature);\n    this.hitDetectionInstructions.push([\n      CanvasInstruction.SET_STROKE_STYLE,\n      state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n      state.miterLimit, state.lineDash, state.lineDashOffset\n    ], beginPathInstruction);\n    const flatCoordinates = lineStringGeometry.getFlatCoordinates();\n    const stride = lineStringGeometry.getStride();\n    this.drawFlatCoordinates_(flatCoordinates, 0, flatCoordinates.length, stride);\n    this.hitDetectionInstructions.push(strokeInstruction);\n    this.endGeometry(lineStringGeometry, feature);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawMultiLineString(multiLineStringGeometry, feature) {\n    const state = this.state;\n    const strokeStyle = state.strokeStyle;\n    const lineWidth = state.lineWidth;\n    if (strokeStyle === undefined || lineWidth === undefined) {\n      return;\n    }\n    this.updateStrokeStyle(state, this.applyStroke);\n    this.beginGeometry(multiLineStringGeometry, feature);\n    this.hitDetectionInstructions.push([\n      CanvasInstruction.SET_STROKE_STYLE,\n      state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n      state.miterLimit, state.lineDash, state.lineDashOffset\n    ], beginPathInstruction);\n    const ends = multiLineStringGeometry.getEnds();\n    const flatCoordinates = multiLineStringGeometry.getFlatCoordinates();\n    const stride = multiLineStringGeometry.getStride();\n    let offset = 0;\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      offset = this.drawFlatCoordinates_(flatCoordinates, offset, ends[i], stride);\n    }\n    this.hitDetectionInstructions.push(strokeInstruction);\n    this.endGeometry(multiLineStringGeometry, feature);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  finish() {\n    const state = this.state;\n    if (state.lastStroke != undefined && state.lastStroke != this.coordinates.length) {\n      this.instructions.push(strokeInstruction);\n    }\n    this.reverseHitDetectionInstructions();\n    this.state = null;\n  }\n\n  /**\n   * @inheritDoc.\n   */\n  applyStroke(state) {\n    if (state.lastStroke != undefined && state.lastStroke != this.coordinates.length) {\n      this.instructions.push(strokeInstruction);\n      state.lastStroke = this.coordinates.length;\n    }\n    state.lastStroke = 0;\n    super.applyStroke(state);\n    this.instructions.push(beginPathInstruction);\n  }\n}\n\n\nexport default CanvasLineStringReplay;\n","/**\n * @module ol/render/canvas/PolygonReplay\n */\nimport {asString} from '../../color.js';\nimport {snap} from '../../geom/flat/simplify.js';\nimport {defaultFillStyle} from '../canvas.js';\nimport CanvasInstruction, {\n  fillInstruction, strokeInstruction, beginPathInstruction, closePathInstruction\n} from './Instruction.js';\nimport CanvasReplay from './Replay.js';\n\n\nclass CanvasPolygonReplay extends CanvasReplay {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {boolean} overlaps The replay can have overlapping geometries.\n   * @param {?} declutterTree Declutter tree.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n    super(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree);\n  }\n\n  /**\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   * @param {number} offset Offset.\n   * @param {Array<number>} ends Ends.\n   * @param {number} stride Stride.\n   * @private\n   * @return {number} End.\n   */\n  drawFlatCoordinatess_(flatCoordinates, offset, ends, stride) {\n    const state = this.state;\n    const fill = state.fillStyle !== undefined;\n    const stroke = state.strokeStyle != undefined;\n    const numEnds = ends.length;\n    this.instructions.push(beginPathInstruction);\n    this.hitDetectionInstructions.push(beginPathInstruction);\n    for (let i = 0; i < numEnds; ++i) {\n      const end = ends[i];\n      const myBegin = this.coordinates.length;\n      const myEnd = this.appendFlatCoordinates(flatCoordinates, offset, end, stride, true, !stroke);\n      const moveToLineToInstruction = [CanvasInstruction.MOVE_TO_LINE_TO, myBegin, myEnd];\n      this.instructions.push(moveToLineToInstruction);\n      this.hitDetectionInstructions.push(moveToLineToInstruction);\n      if (stroke) {\n        // Performance optimization: only call closePath() when we have a stroke.\n        // Otherwise the ring is closed already (see appendFlatCoordinates above).\n        this.instructions.push(closePathInstruction);\n        this.hitDetectionInstructions.push(closePathInstruction);\n      }\n      offset = end;\n    }\n    if (fill) {\n      this.instructions.push(fillInstruction);\n      this.hitDetectionInstructions.push(fillInstruction);\n    }\n    if (stroke) {\n      this.instructions.push(strokeInstruction);\n      this.hitDetectionInstructions.push(strokeInstruction);\n    }\n    return offset;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawCircle(circleGeometry, feature) {\n    const state = this.state;\n    const fillStyle = state.fillStyle;\n    const strokeStyle = state.strokeStyle;\n    if (fillStyle === undefined && strokeStyle === undefined) {\n      return;\n    }\n    this.setFillStrokeStyles_(circleGeometry);\n    this.beginGeometry(circleGeometry, feature);\n    if (state.fillStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_FILL_STYLE,\n        asString(defaultFillStyle)\n      ]);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_STROKE_STYLE,\n        state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n        state.miterLimit, state.lineDash, state.lineDashOffset\n      ]);\n    }\n    const flatCoordinates = circleGeometry.getFlatCoordinates();\n    const stride = circleGeometry.getStride();\n    const myBegin = this.coordinates.length;\n    this.appendFlatCoordinates(\n      flatCoordinates, 0, flatCoordinates.length, stride, false, false);\n    const circleInstruction = [CanvasInstruction.CIRCLE, myBegin];\n    this.instructions.push(beginPathInstruction, circleInstruction);\n    this.hitDetectionInstructions.push(beginPathInstruction, circleInstruction);\n    this.hitDetectionInstructions.push(fillInstruction);\n    if (state.fillStyle !== undefined) {\n      this.instructions.push(fillInstruction);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.instructions.push(strokeInstruction);\n      this.hitDetectionInstructions.push(strokeInstruction);\n    }\n    this.endGeometry(circleGeometry, feature);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawPolygon(polygonGeometry, feature) {\n    const state = this.state;\n    const fillStyle = state.fillStyle;\n    const strokeStyle = state.strokeStyle;\n    if (fillStyle === undefined && strokeStyle === undefined) {\n      return;\n    }\n    this.setFillStrokeStyles_(polygonGeometry);\n    this.beginGeometry(polygonGeometry, feature);\n    if (state.fillStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_FILL_STYLE,\n        asString(defaultFillStyle)\n      ]);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_STROKE_STYLE,\n        state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n        state.miterLimit, state.lineDash, state.lineDashOffset\n      ]);\n    }\n    const ends = polygonGeometry.getEnds();\n    const flatCoordinates = polygonGeometry.getOrientedFlatCoordinates();\n    const stride = polygonGeometry.getStride();\n    this.drawFlatCoordinatess_(flatCoordinates, 0, ends, stride);\n    this.endGeometry(polygonGeometry, feature);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawMultiPolygon(multiPolygonGeometry, feature) {\n    const state = this.state;\n    const fillStyle = state.fillStyle;\n    const strokeStyle = state.strokeStyle;\n    if (fillStyle === undefined && strokeStyle === undefined) {\n      return;\n    }\n    this.setFillStrokeStyles_(multiPolygonGeometry);\n    this.beginGeometry(multiPolygonGeometry, feature);\n    if (state.fillStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_FILL_STYLE,\n        asString(defaultFillStyle)\n      ]);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.hitDetectionInstructions.push([\n        CanvasInstruction.SET_STROKE_STYLE,\n        state.strokeStyle, state.lineWidth, state.lineCap, state.lineJoin,\n        state.miterLimit, state.lineDash, state.lineDashOffset\n      ]);\n    }\n    const endss = multiPolygonGeometry.getEndss();\n    const flatCoordinates = multiPolygonGeometry.getOrientedFlatCoordinates();\n    const stride = multiPolygonGeometry.getStride();\n    let offset = 0;\n    for (let i = 0, ii = endss.length; i < ii; ++i) {\n      offset = this.drawFlatCoordinatess_(flatCoordinates, offset, endss[i], stride);\n    }\n    this.endGeometry(multiPolygonGeometry, feature);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  finish() {\n    this.reverseHitDetectionInstructions();\n    this.state = null;\n    // We want to preserve topology when drawing polygons.  Polygons are\n    // simplified using quantization and point elimination. However, we might\n    // have received a mix of quantized and non-quantized geometries, so ensure\n    // that all are quantized by quantizing all coordinates in the batch.\n    const tolerance = this.tolerance;\n    if (tolerance !== 0) {\n      const coordinates = this.coordinates;\n      for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n        coordinates[i] = snap(coordinates[i], tolerance);\n      }\n    }\n  }\n\n  /**\n   * @private\n   * @param {import(\"../../geom/Geometry.js\").default|import(\"../Feature.js\").default} geometry Geometry.\n   */\n  setFillStrokeStyles_(geometry) {\n    const state = this.state;\n    const fillStyle = state.fillStyle;\n    if (fillStyle !== undefined) {\n      this.updateFillStyle(state, this.createFill, geometry);\n    }\n    if (state.strokeStyle !== undefined) {\n      this.updateStrokeStyle(state, this.applyStroke);\n    }\n  }\n}\n\n\nexport default CanvasPolygonReplay;\n","/**\n * @module ol/geom/flat/straightchunk\n */\n\n\n/**\n * @param {number} maxAngle Maximum acceptable angle delta between segments.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {Array<number>} Start and end of the first suitable chunk of the\n * given `flatCoordinates`.\n */\nexport function matchingChunk(maxAngle, flatCoordinates, offset, end, stride) {\n  let chunkStart = offset;\n  let chunkEnd = offset;\n  let chunkM = 0;\n  let m = 0;\n  let start = offset;\n  let acos, i, m12, m23, x1, y1, x12, y12, x23, y23;\n  for (i = offset; i < end; i += stride) {\n    const x2 = flatCoordinates[i];\n    const y2 = flatCoordinates[i + 1];\n    if (x1 !== undefined) {\n      x23 = x2 - x1;\n      y23 = y2 - y1;\n      m23 = Math.sqrt(x23 * x23 + y23 * y23);\n      if (x12 !== undefined) {\n        m += m12;\n        acos = Math.acos((x12 * x23 + y12 * y23) / (m12 * m23));\n        if (acos > maxAngle) {\n          if (m > chunkM) {\n            chunkM = m;\n            chunkStart = start;\n            chunkEnd = i;\n          }\n          m = 0;\n          start = i - stride;\n        }\n      }\n      m12 = m23;\n      x12 = x23;\n      y12 = y23;\n    }\n    x1 = x2;\n    y1 = y2;\n  }\n  m += m23;\n  return m > chunkM ? [start, i] : [chunkStart, chunkEnd];\n}\n","/**\n * @module ol/render/canvas/TextReplay\n */\nimport {getUid} from '../../util.js';\nimport {asColorLike} from '../../colorlike.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {intersects} from '../../extent.js';\nimport {matchingChunk} from '../../geom/flat/straightchunk.js';\nimport GeometryType from '../../geom/GeometryType.js';\nimport {CANVAS_LINE_DASH} from '../../has.js';\nimport {labelCache, measureTextWidth, defaultTextAlign, measureTextHeight, defaultPadding, defaultLineCap, defaultLineDashOffset, defaultLineDash, defaultLineJoin, defaultFillStyle, checkFont, defaultFont, defaultLineWidth, defaultMiterLimit, defaultStrokeStyle, defaultTextBaseline} from '../canvas.js';\nimport CanvasInstruction from './Instruction.js';\nimport CanvasReplay from './Replay.js';\nimport {TEXT_ALIGN} from '../replay.js';\nimport TextPlacement from '../../style/TextPlacement.js';\n\nclass CanvasTextReplay extends CanvasReplay {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Maximum extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {boolean} overlaps The replay can have overlapping geometries.\n   * @param {?} declutterTree Declutter tree.\n   */\n  constructor(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree) {\n    super(tolerance, maxExtent, resolution, pixelRatio, overlaps, declutterTree);\n\n    /**\n     * @private\n     * @type {import(\"../canvas.js\").DeclutterGroup}\n     */\n    this.declutterGroup_;\n\n    /**\n     * @private\n     * @type {Array<HTMLCanvasElement>}\n     */\n    this.labels_ = null;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.text_ = '';\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textOffsetX_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textOffsetY_ = 0;\n\n    /**\n     * @private\n     * @type {boolean|undefined}\n     */\n    this.textRotateWithView_ = undefined;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.textRotation_ = 0;\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").FillState}\n     */\n    this.textFillState_ = null;\n\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").FillState>}\n     */\n    this.fillStates = {};\n\n    /**\n     * @private\n     * @type {?import(\"../canvas.js\").StrokeState}\n     */\n    this.textStrokeState_ = null;\n\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").StrokeState>}\n     */\n    this.strokeStates = {};\n\n    /**\n     * @private\n     * @type {import(\"../canvas.js\").TextState}\n     */\n    this.textState_ = /** @type {import(\"../canvas.js\").TextState} */ ({});\n\n    /**\n     * @type {!Object<string, import(\"../canvas.js\").TextState>}\n     */\n    this.textStates = {};\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.textKey_ = '';\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.fillKey_ = '';\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.strokeKey_ = '';\n\n    /**\n     * @private\n     * @type {Object<string, Object<string, number>>}\n     */\n    this.widths_ = {};\n\n    labelCache.prune();\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  drawText(geometry, feature) {\n    const fillState = this.textFillState_;\n    const strokeState = this.textStrokeState_;\n    const textState = this.textState_;\n    if (this.text_ === '' || !textState || (!fillState && !strokeState)) {\n      return;\n    }\n\n    let begin = this.coordinates.length;\n\n    const geometryType = geometry.getType();\n    let flatCoordinates = null;\n    let end = 2;\n    let stride = 2;\n    let i, ii;\n\n    if (textState.placement === TextPlacement.LINE) {\n      if (!intersects(this.getBufferedMaxExtent(), geometry.getExtent())) {\n        return;\n      }\n      let ends;\n      flatCoordinates = geometry.getFlatCoordinates();\n      stride = geometry.getStride();\n      if (geometryType == GeometryType.LINE_STRING) {\n        ends = [flatCoordinates.length];\n      } else if (geometryType == GeometryType.MULTI_LINE_STRING) {\n        ends = geometry.getEnds();\n      } else if (geometryType == GeometryType.POLYGON) {\n        ends = geometry.getEnds().slice(0, 1);\n      } else if (geometryType == GeometryType.MULTI_POLYGON) {\n        const endss = geometry.getEndss();\n        ends = [];\n        for (i = 0, ii = endss.length; i < ii; ++i) {\n          ends.push(endss[i][0]);\n        }\n      }\n      this.beginGeometry(geometry, feature);\n      const textAlign = textState.textAlign;\n      let flatOffset = 0;\n      let flatEnd;\n      for (let o = 0, oo = ends.length; o < oo; ++o) {\n        if (textAlign == undefined) {\n          const range = matchingChunk(textState.maxAngle, flatCoordinates, flatOffset, ends[o], stride);\n          flatOffset = range[0];\n          flatEnd = range[1];\n        } else {\n          flatEnd = ends[o];\n        }\n        for (i = flatOffset; i < flatEnd; i += stride) {\n          this.coordinates.push(flatCoordinates[i], flatCoordinates[i + 1]);\n        }\n        end = this.coordinates.length;\n        flatOffset = ends[o];\n        this.drawChars_(begin, end, this.declutterGroup_);\n        begin = end;\n      }\n      this.endGeometry(geometry, feature);\n\n    } else {\n      const label = this.getImage(this.text_, this.textKey_, this.fillKey_, this.strokeKey_);\n      const width = label.width / this.pixelRatio;\n      switch (geometryType) {\n        case GeometryType.POINT:\n        case GeometryType.MULTI_POINT:\n          flatCoordinates = geometry.getFlatCoordinates();\n          end = flatCoordinates.length;\n          break;\n        case GeometryType.LINE_STRING:\n          flatCoordinates = /** @type {import(\"../../geom/LineString.js\").default} */ (geometry).getFlatMidpoint();\n          break;\n        case GeometryType.CIRCLE:\n          flatCoordinates = /** @type {import(\"../../geom/Circle.js\").default} */ (geometry).getCenter();\n          break;\n        case GeometryType.MULTI_LINE_STRING:\n          flatCoordinates = /** @type {import(\"../../geom/MultiLineString.js\").default} */ (geometry).getFlatMidpoints();\n          end = flatCoordinates.length;\n          break;\n        case GeometryType.POLYGON:\n          flatCoordinates = /** @type {import(\"../../geom/Polygon.js\").default} */ (geometry).getFlatInteriorPoint();\n          if (!textState.overflow && flatCoordinates[2] / this.resolution < width) {\n            return;\n          }\n          stride = 3;\n          break;\n        case GeometryType.MULTI_POLYGON:\n          const interiorPoints = /** @type {import(\"../../geom/MultiPolygon.js\").default} */ (geometry).getFlatInteriorPoints();\n          flatCoordinates = [];\n          for (i = 0, ii = interiorPoints.length; i < ii; i += 3) {\n            if (textState.overflow || interiorPoints[i + 2] / this.resolution >= width) {\n              flatCoordinates.push(interiorPoints[i], interiorPoints[i + 1]);\n            }\n          }\n          end = flatCoordinates.length;\n          if (end == 0) {\n            return;\n          }\n          break;\n        default:\n      }\n      end = this.appendFlatCoordinates(flatCoordinates, 0, end, stride, false, false);\n      if (textState.backgroundFill || textState.backgroundStroke) {\n        this.setFillStrokeStyle(textState.backgroundFill, textState.backgroundStroke);\n        if (textState.backgroundFill) {\n          this.updateFillStyle(this.state, this.createFill, geometry);\n          this.hitDetectionInstructions.push(this.createFill(this.state, geometry));\n        }\n        if (textState.backgroundStroke) {\n          this.updateStrokeStyle(this.state, this.applyStroke);\n          this.hitDetectionInstructions.push(this.createStroke(this.state));\n        }\n      }\n      this.beginGeometry(geometry, feature);\n      this.drawTextImage_(label, begin, end);\n      this.endGeometry(geometry, feature);\n    }\n  }\n\n  /**\n   * @param {string} text Text.\n   * @param {string} textKey Text style key.\n   * @param {string} fillKey Fill style key.\n   * @param {string} strokeKey Stroke style key.\n   * @return {HTMLCanvasElement} Image.\n   */\n  getImage(text, textKey, fillKey, strokeKey) {\n    let label;\n    const key = strokeKey + textKey + text + fillKey + this.pixelRatio;\n\n    if (!labelCache.containsKey(key)) {\n      const strokeState = strokeKey ? this.strokeStates[strokeKey] || this.textStrokeState_ : null;\n      const fillState = fillKey ? this.fillStates[fillKey] || this.textFillState_ : null;\n      const textState = this.textStates[textKey] || this.textState_;\n      const pixelRatio = this.pixelRatio;\n      const scale = textState.scale * pixelRatio;\n      const align = TEXT_ALIGN[textState.textAlign || defaultTextAlign];\n      const strokeWidth = strokeKey && strokeState.lineWidth ? strokeState.lineWidth : 0;\n\n      const lines = text.split('\\n');\n      const numLines = lines.length;\n      const widths = [];\n      const width = measureTextWidths(textState.font, lines, widths);\n      const lineHeight = measureTextHeight(textState.font);\n      const height = lineHeight * numLines;\n      const renderWidth = (width + strokeWidth);\n      const context = createCanvasContext2D(\n        Math.ceil(renderWidth * scale),\n        Math.ceil((height + strokeWidth) * scale));\n      label = context.canvas;\n      labelCache.set(key, label);\n      if (scale != 1) {\n        context.scale(scale, scale);\n      }\n      context.font = textState.font;\n      if (strokeKey) {\n        context.strokeStyle = strokeState.strokeStyle;\n        context.lineWidth = strokeWidth;\n        context.lineCap = /** @type {CanvasLineCap} */ (strokeState.lineCap);\n        context.lineJoin = /** @type {CanvasLineJoin} */ (strokeState.lineJoin);\n        context.miterLimit = strokeState.miterLimit;\n        if (CANVAS_LINE_DASH && strokeState.lineDash.length) {\n          context.setLineDash(strokeState.lineDash);\n          context.lineDashOffset = strokeState.lineDashOffset;\n        }\n      }\n      if (fillKey) {\n        context.fillStyle = fillState.fillStyle;\n      }\n      context.textBaseline = 'middle';\n      context.textAlign = 'center';\n      const leftRight = (0.5 - align);\n      const x = align * label.width / scale + leftRight * strokeWidth;\n      let i;\n      if (strokeKey) {\n        for (i = 0; i < numLines; ++i) {\n          context.strokeText(lines[i], x + leftRight * widths[i], 0.5 * (strokeWidth + lineHeight) + i * lineHeight);\n        }\n      }\n      if (fillKey) {\n        for (i = 0; i < numLines; ++i) {\n          context.fillText(lines[i], x + leftRight * widths[i], 0.5 * (strokeWidth + lineHeight) + i * lineHeight);\n        }\n      }\n    }\n    return labelCache.get(key);\n  }\n\n  /**\n   * @private\n   * @param {HTMLCanvasElement} label Label.\n   * @param {number} begin Begin.\n   * @param {number} end End.\n   */\n  drawTextImage_(label, begin, end) {\n    const textState = this.textState_;\n    const strokeState = this.textStrokeState_;\n    const pixelRatio = this.pixelRatio;\n    const align = TEXT_ALIGN[textState.textAlign || defaultTextAlign];\n    const baseline = TEXT_ALIGN[textState.textBaseline];\n    const strokeWidth = strokeState && strokeState.lineWidth ? strokeState.lineWidth : 0;\n\n    const anchorX = align * label.width / pixelRatio + 2 * (0.5 - align) * strokeWidth;\n    const anchorY = baseline * label.height / pixelRatio + 2 * (0.5 - baseline) * strokeWidth;\n    this.instructions.push([CanvasInstruction.DRAW_IMAGE, begin, end,\n      label, (anchorX - this.textOffsetX_) * pixelRatio, (anchorY - this.textOffsetY_) * pixelRatio,\n      this.declutterGroup_, label.height, 1, 0, 0, this.textRotateWithView_, this.textRotation_,\n      1, label.width,\n      textState.padding == defaultPadding ?\n        defaultPadding : textState.padding.map(function(p) {\n          return p * pixelRatio;\n        }),\n      !!textState.backgroundFill, !!textState.backgroundStroke\n    ]);\n    this.hitDetectionInstructions.push([CanvasInstruction.DRAW_IMAGE, begin, end,\n      label, (anchorX - this.textOffsetX_) * pixelRatio, (anchorY - this.textOffsetY_) * pixelRatio,\n      this.declutterGroup_, label.height, 1, 0, 0, this.textRotateWithView_, this.textRotation_,\n      1 / pixelRatio, label.width, textState.padding,\n      !!textState.backgroundFill, !!textState.backgroundStroke\n    ]);\n  }\n\n  /**\n   * @private\n   * @param {number} begin Begin.\n   * @param {number} end End.\n   * @param {import(\"../canvas.js\").DeclutterGroup} declutterGroup Declutter group.\n   */\n  drawChars_(begin, end, declutterGroup) {\n    const strokeState = this.textStrokeState_;\n    const textState = this.textState_;\n    const fillState = this.textFillState_;\n\n    const strokeKey = this.strokeKey_;\n    if (strokeState) {\n      if (!(strokeKey in this.strokeStates)) {\n        this.strokeStates[strokeKey] = /** @type {import(\"../canvas.js\").StrokeState} */ ({\n          strokeStyle: strokeState.strokeStyle,\n          lineCap: strokeState.lineCap,\n          lineDashOffset: strokeState.lineDashOffset,\n          lineWidth: strokeState.lineWidth,\n          lineJoin: strokeState.lineJoin,\n          miterLimit: strokeState.miterLimit,\n          lineDash: strokeState.lineDash\n        });\n      }\n    }\n    const textKey = this.textKey_;\n    if (!(this.textKey_ in this.textStates)) {\n      this.textStates[this.textKey_] = /** @type {import(\"../canvas.js\").TextState} */ ({\n        font: textState.font,\n        textAlign: textState.textAlign || defaultTextAlign,\n        scale: textState.scale\n      });\n    }\n    const fillKey = this.fillKey_;\n    if (fillState) {\n      if (!(fillKey in this.fillStates)) {\n        this.fillStates[fillKey] = /** @type {import(\"../canvas.js\").FillState} */ ({\n          fillStyle: fillState.fillStyle\n        });\n      }\n    }\n\n    const pixelRatio = this.pixelRatio;\n    const baseline = TEXT_ALIGN[textState.textBaseline];\n\n    const offsetY = this.textOffsetY_ * pixelRatio;\n    const text = this.text_;\n    const font = textState.font;\n    const textScale = textState.scale;\n    const strokeWidth = strokeState ? strokeState.lineWidth * textScale / 2 : 0;\n    let widths = this.widths_[font];\n    if (!widths) {\n      this.widths_[font] = widths = {};\n    }\n    this.instructions.push([CanvasInstruction.DRAW_CHARS,\n      begin, end, baseline, declutterGroup,\n      textState.overflow, fillKey, textState.maxAngle,\n      function(text) {\n        let width = widths[text];\n        if (!width) {\n          width = widths[text] = measureTextWidth(font, text);\n        }\n        return width * textScale * pixelRatio;\n      },\n      offsetY, strokeKey, strokeWidth * pixelRatio, text, textKey, 1\n    ]);\n    this.hitDetectionInstructions.push([CanvasInstruction.DRAW_CHARS,\n      begin, end, baseline, declutterGroup,\n      textState.overflow, fillKey, textState.maxAngle,\n      function(text) {\n        let width = widths[text];\n        if (!width) {\n          width = widths[text] = measureTextWidth(font, text);\n        }\n        return width * textScale;\n      },\n      offsetY, strokeKey, strokeWidth, text, textKey, 1 / pixelRatio\n    ]);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setTextStyle(textStyle, declutterGroup) {\n    let textState, fillState, strokeState;\n    if (!textStyle) {\n      this.text_ = '';\n    } else {\n      this.declutterGroup_ = /** @type {import(\"../canvas.js\").DeclutterGroup} */ (declutterGroup);\n\n      const textFillStyle = textStyle.getFill();\n      if (!textFillStyle) {\n        fillState = this.textFillState_ = null;\n      } else {\n        fillState = this.textFillState_;\n        if (!fillState) {\n          fillState = this.textFillState_ = /** @type {import(\"../canvas.js\").FillState} */ ({});\n        }\n        fillState.fillStyle = asColorLike(\n          textFillStyle.getColor() || defaultFillStyle);\n      }\n\n      const textStrokeStyle = textStyle.getStroke();\n      if (!textStrokeStyle) {\n        strokeState = this.textStrokeState_ = null;\n      } else {\n        strokeState = this.textStrokeState_;\n        if (!strokeState) {\n          strokeState = this.textStrokeState_ = /** @type {import(\"../canvas.js\").StrokeState} */ ({});\n        }\n        const lineDash = textStrokeStyle.getLineDash();\n        const lineDashOffset = textStrokeStyle.getLineDashOffset();\n        const lineWidth = textStrokeStyle.getWidth();\n        const miterLimit = textStrokeStyle.getMiterLimit();\n        strokeState.lineCap = textStrokeStyle.getLineCap() || defaultLineCap;\n        strokeState.lineDash = lineDash ? lineDash.slice() : defaultLineDash;\n        strokeState.lineDashOffset =\n            lineDashOffset === undefined ? defaultLineDashOffset : lineDashOffset;\n        strokeState.lineJoin = textStrokeStyle.getLineJoin() || defaultLineJoin;\n        strokeState.lineWidth =\n            lineWidth === undefined ? defaultLineWidth : lineWidth;\n        strokeState.miterLimit =\n            miterLimit === undefined ? defaultMiterLimit : miterLimit;\n        strokeState.strokeStyle = asColorLike(\n          textStrokeStyle.getColor() || defaultStrokeStyle);\n      }\n\n      textState = this.textState_;\n      const font = textStyle.getFont() || defaultFont;\n      checkFont(font);\n      const textScale = textStyle.getScale();\n      textState.overflow = textStyle.getOverflow();\n      textState.font = font;\n      textState.maxAngle = textStyle.getMaxAngle();\n      textState.placement = textStyle.getPlacement();\n      textState.textAlign = textStyle.getTextAlign();\n      textState.textBaseline = textStyle.getTextBaseline() || defaultTextBaseline;\n      textState.backgroundFill = textStyle.getBackgroundFill();\n      textState.backgroundStroke = textStyle.getBackgroundStroke();\n      textState.padding = textStyle.getPadding() || defaultPadding;\n      textState.scale = textScale === undefined ? 1 : textScale;\n\n      const textOffsetX = textStyle.getOffsetX();\n      const textOffsetY = textStyle.getOffsetY();\n      const textRotateWithView = textStyle.getRotateWithView();\n      const textRotation = textStyle.getRotation();\n      this.text_ = textStyle.getText() || '';\n      this.textOffsetX_ = textOffsetX === undefined ? 0 : textOffsetX;\n      this.textOffsetY_ = textOffsetY === undefined ? 0 : textOffsetY;\n      this.textRotateWithView_ = textRotateWithView === undefined ? false : textRotateWithView;\n      this.textRotation_ = textRotation === undefined ? 0 : textRotation;\n\n      this.strokeKey_ = strokeState ?\n        (typeof strokeState.strokeStyle == 'string' ? strokeState.strokeStyle : getUid(strokeState.strokeStyle)) +\n        strokeState.lineCap + strokeState.lineDashOffset + '|' + strokeState.lineWidth +\n        strokeState.lineJoin + strokeState.miterLimit + '[' + strokeState.lineDash.join() + ']' :\n        '';\n      this.textKey_ = textState.font + textState.scale + (textState.textAlign || '?');\n      this.fillKey_ = fillState ?\n        (typeof fillState.fillStyle == 'string' ? fillState.fillStyle : ('|' + getUid(fillState.fillStyle))) :\n        '';\n    }\n  }\n}\n\n\n/**\n * @param {string} font Font to use for measuring.\n * @param {Array<string>} lines Lines to measure.\n * @param {Array<number>} widths Array will be populated with the widths of\n * each line.\n * @return {number} Width of the whole text.\n */\nexport function measureTextWidths(font, lines, widths) {\n  const numLines = lines.length;\n  let width = 0;\n  for (let i = 0; i < numLines; ++i) {\n    const currentWidth = measureTextWidth(font, lines[i]);\n    width = Math.max(width, currentWidth);\n    widths.push(currentWidth);\n  }\n  return width;\n}\n\n\nexport default CanvasTextReplay;\n","/**\n * @module ol/render/canvas/ReplayGroup\n */\n\nimport {numberSafeCompareFunction} from '../../array.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {buffer, createEmpty, extendCoordinate} from '../../extent.js';\nimport {transform2D} from '../../geom/flat/transform.js';\nimport {isEmpty} from '../../obj.js';\nimport ReplayGroup from '../ReplayGroup.js';\nimport ReplayType from '../ReplayType.js';\nimport CanvasReplay from './Replay.js';\nimport CanvasImageReplay from './ImageReplay.js';\nimport CanvasLineStringReplay from './LineStringReplay.js';\nimport CanvasPolygonReplay from './PolygonReplay.js';\nimport CanvasTextReplay from './TextReplay.js';\nimport {ORDER} from '../replay.js';\nimport {create as createTransform, compose as composeTransform} from '../../transform.js';\n\n\n/**\n * @type {Object<ReplayType, typeof CanvasReplay>}\n */\nconst BATCH_CONSTRUCTORS = {\n  'Circle': CanvasPolygonReplay,\n  'Default': CanvasReplay,\n  'Image': CanvasImageReplay,\n  'LineString': CanvasLineStringReplay,\n  'Polygon': CanvasPolygonReplay,\n  'Text': CanvasTextReplay\n};\n\n\nclass CanvasReplayGroup extends ReplayGroup {\n  /**\n   * @param {number} tolerance Tolerance.\n   * @param {import(\"../../extent.js\").Extent} maxExtent Max extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {boolean} overlaps The replay group can have overlapping geometries.\n   * @param {?} declutterTree Declutter tree for declutter processing in postrender.\n   * @param {number=} opt_renderBuffer Optional rendering buffer.\n   */\n  constructor(\n    tolerance,\n    maxExtent,\n    resolution,\n    pixelRatio,\n    overlaps,\n    declutterTree,\n    opt_renderBuffer\n  ) {\n    super();\n\n    /**\n     * Declutter tree.\n     * @private\n     */\n    this.declutterTree_ = declutterTree;\n\n    /**\n     * @type {import(\"../canvas.js\").DeclutterGroup}\n     * @private\n     */\n    this.declutterGroup_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.tolerance_ = tolerance;\n\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.maxExtent_ = maxExtent;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.overlaps_ = overlaps;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = pixelRatio;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.resolution_ = resolution;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.renderBuffer_ = opt_renderBuffer;\n\n    /**\n     * @private\n     * @type {!Object<string, !Object<ReplayType, CanvasReplay>>}\n     */\n    this.replaysByZIndex_ = {};\n\n    /**\n     * @private\n     * @type {CanvasRenderingContext2D}\n     */\n    this.hitDetectionContext_ = createCanvasContext2D(1, 1);\n\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.hitDetectionTransform_ = createTransform();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  addDeclutter(group) {\n    let declutter = null;\n    if (this.declutterTree_) {\n      if (group) {\n        declutter = this.declutterGroup_;\n        /** @type {number} */ (declutter[4])++;\n      } else {\n        declutter = this.declutterGroup_ = createEmpty();\n        declutter.push(1);\n      }\n    }\n    return declutter;\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   */\n  clip(context, transform) {\n    const flatClipCoords = this.getClipCoords(transform);\n    context.beginPath();\n    context.moveTo(flatClipCoords[0], flatClipCoords[1]);\n    context.lineTo(flatClipCoords[2], flatClipCoords[3]);\n    context.lineTo(flatClipCoords[4], flatClipCoords[5]);\n    context.lineTo(flatClipCoords[6], flatClipCoords[7]);\n    context.clip();\n  }\n\n  /**\n   * @param {Array<ReplayType>} replays Replays.\n   * @return {boolean} Has replays of the provided types.\n   */\n  hasReplays(replays) {\n    for (const zIndex in this.replaysByZIndex_) {\n      const candidates = this.replaysByZIndex_[zIndex];\n      for (let i = 0, ii = replays.length; i < ii; ++i) {\n        if (replays[i] in candidates) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  finish() {\n    for (const zKey in this.replaysByZIndex_) {\n      const replays = this.replaysByZIndex_[zKey];\n      for (const replayKey in replays) {\n        replays[replayKey].finish();\n      }\n    }\n  }\n\n  /**\n   * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {number} resolution Resolution.\n   * @param {number} rotation Rotation.\n   * @param {number} hitTolerance Hit tolerance in pixels.\n   * @param {Object<string, boolean>} skippedFeaturesHash Ids of features to skip.\n   * @param {function((import(\"../../Feature.js\").default|import(\"../Feature.js\").default)): T} callback Feature callback.\n   * @param {Object<string, import(\"../canvas.js\").DeclutterGroup>} declutterReplays Declutter replays.\n   * @return {T|undefined} Callback result.\n   * @template T\n   */\n  forEachFeatureAtCoordinate(\n    coordinate,\n    resolution,\n    rotation,\n    hitTolerance,\n    skippedFeaturesHash,\n    callback,\n    declutterReplays\n  ) {\n\n    hitTolerance = Math.round(hitTolerance);\n    const contextSize = hitTolerance * 2 + 1;\n    const transform = composeTransform(this.hitDetectionTransform_,\n      hitTolerance + 0.5, hitTolerance + 0.5,\n      1 / resolution, -1 / resolution,\n      -rotation,\n      -coordinate[0], -coordinate[1]);\n    const context = this.hitDetectionContext_;\n\n    if (context.canvas.width !== contextSize || context.canvas.height !== contextSize) {\n      context.canvas.width = contextSize;\n      context.canvas.height = contextSize;\n    } else {\n      context.clearRect(0, 0, contextSize, contextSize);\n    }\n\n    /**\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    let hitExtent;\n    if (this.renderBuffer_ !== undefined) {\n      hitExtent = createEmpty();\n      extendCoordinate(hitExtent, coordinate);\n      buffer(hitExtent, resolution * (this.renderBuffer_ + hitTolerance), hitExtent);\n    }\n\n    const mask = getCircleArray(hitTolerance);\n    let declutteredFeatures;\n    if (this.declutterTree_) {\n      declutteredFeatures = this.declutterTree_.all().map(function(entry) {\n        return entry.value;\n      });\n    }\n\n    let replayType;\n\n    /**\n     * @param {import(\"../../Feature.js\").default|import(\"../Feature.js\").default} feature Feature.\n     * @return {?} Callback result.\n     */\n    function featureCallback(feature) {\n      const imageData = context.getImageData(0, 0, contextSize, contextSize).data;\n      for (let i = 0; i < contextSize; i++) {\n        for (let j = 0; j < contextSize; j++) {\n          if (mask[i][j]) {\n            if (imageData[(j * contextSize + i) * 4 + 3] > 0) {\n              let result;\n              if (!(declutteredFeatures && (replayType == ReplayType.IMAGE || replayType == ReplayType.TEXT)) ||\n                  declutteredFeatures.indexOf(feature) !== -1) {\n                result = callback(feature);\n              }\n              if (result) {\n                return result;\n              } else {\n                context.clearRect(0, 0, contextSize, contextSize);\n                return undefined;\n              }\n            }\n          }\n        }\n      }\n    }\n\n    /** @type {Array<number>} */\n    const zs = Object.keys(this.replaysByZIndex_).map(Number);\n    zs.sort(numberSafeCompareFunction);\n\n    let i, j, replays, replay, result;\n    for (i = zs.length - 1; i >= 0; --i) {\n      const zIndexKey = zs[i].toString();\n      replays = this.replaysByZIndex_[zIndexKey];\n      for (j = ORDER.length - 1; j >= 0; --j) {\n        replayType = ORDER[j];\n        replay = replays[replayType];\n        if (replay !== undefined) {\n          if (declutterReplays &&\n              (replayType == ReplayType.IMAGE || replayType == ReplayType.TEXT)) {\n            const declutter = declutterReplays[zIndexKey];\n            if (!declutter) {\n              declutterReplays[zIndexKey] = [replay, transform.slice(0)];\n            } else {\n              declutter.push(replay, transform.slice(0));\n            }\n          } else {\n            result = replay.replayHitDetection(context, transform, rotation,\n              skippedFeaturesHash, featureCallback, hitExtent);\n            if (result) {\n              return result;\n            }\n          }\n        }\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @return {Array<number>} Clip coordinates.\n   */\n  getClipCoords(transform) {\n    const maxExtent = this.maxExtent_;\n    const minX = maxExtent[0];\n    const minY = maxExtent[1];\n    const maxX = maxExtent[2];\n    const maxY = maxExtent[3];\n    const flatClipCoords = [minX, minY, minX, maxY, maxX, maxY, maxX, minY];\n    transform2D(\n      flatClipCoords, 0, 8, 2, transform, flatClipCoords);\n    return flatClipCoords;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getReplay(zIndex, replayType) {\n    const zIndexKey = zIndex !== undefined ? zIndex.toString() : '0';\n    let replays = this.replaysByZIndex_[zIndexKey];\n    if (replays === undefined) {\n      replays = {};\n      this.replaysByZIndex_[zIndexKey] = replays;\n    }\n    let replay = replays[replayType];\n    if (replay === undefined) {\n      const Constructor = BATCH_CONSTRUCTORS[replayType];\n      replay = new Constructor(this.tolerance_, this.maxExtent_,\n        this.resolution_, this.pixelRatio_, this.overlaps_, this.declutterTree_);\n      replays[replayType] = replay;\n    }\n    return replay;\n  }\n\n  /**\n   * @return {Object<string, Object<ReplayType, CanvasReplay>>} Replays.\n   */\n  getReplays() {\n    return this.replaysByZIndex_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  isEmpty() {\n    return isEmpty(this.replaysByZIndex_);\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../transform.js\").Transform} transform Transform.\n   * @param {number} viewRotation View rotation.\n   * @param {Object<string, boolean>} skippedFeaturesHash Ids of features to skip.\n   * @param {boolean} snapToPixel Snap point symbols and test to integer pixel.\n   * @param {Array<ReplayType>=} opt_replayTypes Ordered replay types to replay.\n   *     Default is {@link module:ol/render/replay~ORDER}\n   * @param {Object<string, import(\"../canvas.js\").DeclutterGroup>=} opt_declutterReplays Declutter replays.\n   */\n  replay(\n    context,\n    transform,\n    viewRotation,\n    skippedFeaturesHash,\n    snapToPixel,\n    opt_replayTypes,\n    opt_declutterReplays\n  ) {\n\n    /** @type {Array<number>} */\n    const zs = Object.keys(this.replaysByZIndex_).map(Number);\n    zs.sort(numberSafeCompareFunction);\n\n    // setup clipping so that the parts of over-simplified geometries are not\n    // visible outside the current extent when panning\n    context.save();\n    this.clip(context, transform);\n\n    const replayTypes = opt_replayTypes ? opt_replayTypes : ORDER;\n    let i, ii, j, jj, replays, replay;\n    for (i = 0, ii = zs.length; i < ii; ++i) {\n      const zIndexKey = zs[i].toString();\n      replays = this.replaysByZIndex_[zIndexKey];\n      for (j = 0, jj = replayTypes.length; j < jj; ++j) {\n        const replayType = replayTypes[j];\n        replay = replays[replayType];\n        if (replay !== undefined) {\n          if (opt_declutterReplays &&\n              (replayType == ReplayType.IMAGE || replayType == ReplayType.TEXT)) {\n            const declutter = opt_declutterReplays[zIndexKey];\n            if (!declutter) {\n              opt_declutterReplays[zIndexKey] = [replay, transform.slice(0)];\n            } else {\n              declutter.push(replay, transform.slice(0));\n            }\n          } else {\n            replay.replay(context, transform, viewRotation, skippedFeaturesHash, snapToPixel);\n          }\n        }\n      }\n    }\n\n    context.restore();\n  }\n}\n\n\n/**\n * This cache is used for storing calculated pixel circles for increasing performance.\n * It is a static property to allow each Replaygroup to access it.\n * @type {Object<number, Array<Array<(boolean|undefined)>>>}\n */\nconst circleArrayCache = {\n  0: [[true]]\n};\n\n\n/**\n * This method fills a row in the array from the given coordinate to the\n * middle with `true`.\n * @param {Array<Array<(boolean|undefined)>>} array The array that will be altered.\n * @param {number} x X coordinate.\n * @param {number} y Y coordinate.\n */\nfunction fillCircleArrayRowToMiddle(array, x, y) {\n  let i;\n  const radius = Math.floor(array.length / 2);\n  if (x >= radius) {\n    for (i = radius; i < x; i++) {\n      array[i][y] = true;\n    }\n  } else if (x < radius) {\n    for (i = x + 1; i < radius; i++) {\n      array[i][y] = true;\n    }\n  }\n}\n\n\n/**\n * This methods creates a circle inside a fitting array. Points inside the\n * circle are marked by true, points on the outside are undefined.\n * It uses the midpoint circle algorithm.\n * A cache is used to increase performance.\n * @param {number} radius Radius.\n * @returns {Array<Array<(boolean|undefined)>>} An array with marked circle points.\n */\nexport function getCircleArray(radius) {\n  if (circleArrayCache[radius] !== undefined) {\n    return circleArrayCache[radius];\n  }\n\n  const arraySize = radius * 2 + 1;\n  const arr = new Array(arraySize);\n  for (let i = 0; i < arraySize; i++) {\n    arr[i] = new Array(arraySize);\n  }\n\n  let x = radius;\n  let y = 0;\n  let error = 0;\n\n  while (x >= y) {\n    fillCircleArrayRowToMiddle(arr, radius + x, radius + y);\n    fillCircleArrayRowToMiddle(arr, radius + y, radius + x);\n    fillCircleArrayRowToMiddle(arr, radius - y, radius + x);\n    fillCircleArrayRowToMiddle(arr, radius - x, radius + y);\n    fillCircleArrayRowToMiddle(arr, radius - x, radius - y);\n    fillCircleArrayRowToMiddle(arr, radius - y, radius - x);\n    fillCircleArrayRowToMiddle(arr, radius + y, radius - x);\n    fillCircleArrayRowToMiddle(arr, radius + x, radius - y);\n\n    y++;\n    error += 1 + 2 * y;\n    if (2 * (error - x) + 1 > 0) {\n      x -= 1;\n      error += 1 - 2 * x;\n    }\n  }\n\n  circleArrayCache[radius] = arr;\n  return arr;\n}\n\n\n/**\n * @param {!Object<string, Array<*>>} declutterReplays Declutter replays.\n * @param {CanvasRenderingContext2D} context Context.\n * @param {number} rotation Rotation.\n * @param {boolean} snapToPixel Snap point symbols and text to integer pixels.\n */\nexport function replayDeclutter(declutterReplays, context, rotation, snapToPixel) {\n  const zs = Object.keys(declutterReplays).map(Number).sort(numberSafeCompareFunction);\n  const skippedFeatureUids = {};\n  for (let z = 0, zz = zs.length; z < zz; ++z) {\n    const replayData = declutterReplays[zs[z].toString()];\n    for (let i = 0, ii = replayData.length; i < ii;) {\n      const replay = replayData[i++];\n      const transform = replayData[i++];\n      replay.replay(context, transform, rotation, skippedFeatureUids, snapToPixel);\n    }\n  }\n}\n\n\nexport default CanvasReplayGroup;\n","/**\n * @module ol/renderer/vector\n */\nimport {getUid} from '../util.js';\nimport ImageState from '../ImageState.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport ReplayType from '../render/ReplayType.js';\n\n\n/**\n * Tolerance for geometry simplification in device pixels.\n * @type {number}\n */\nconst SIMPLIFY_TOLERANCE = 0.5;\n\n\n/**\n * @const\n * @type {Object<import(\"../geom/GeometryType.js\").default,\n *                function(import(\"../render/ReplayGroup.js\").default, import(\"../geom/Geometry.js\").default,\n *                         import(\"../style/Style.js\").default, Object)>}\n */\nconst GEOMETRY_RENDERERS = {\n  'Point': renderPointGeometry,\n  'LineString': renderLineStringGeometry,\n  'Polygon': renderPolygonGeometry,\n  'MultiPoint': renderMultiPointGeometry,\n  'MultiLineString': renderMultiLineStringGeometry,\n  'MultiPolygon': renderMultiPolygonGeometry,\n  'GeometryCollection': renderGeometryCollectionGeometry,\n  'Circle': renderCircleGeometry\n};\n\n\n/**\n * @param {import(\"../Feature.js\").FeatureLike} feature1 Feature 1.\n * @param {import(\"../Feature.js\").FeatureLike} feature2 Feature 2.\n * @return {number} Order.\n */\nexport function defaultOrder(feature1, feature2) {\n  return parseInt(getUid(feature1), 10) - parseInt(getUid(feature2), 10);\n}\n\n\n/**\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @return {number} Squared pixel tolerance.\n */\nexport function getSquaredTolerance(resolution, pixelRatio) {\n  const tolerance = getTolerance(resolution, pixelRatio);\n  return tolerance * tolerance;\n}\n\n\n/**\n * @param {number} resolution Resolution.\n * @param {number} pixelRatio Pixel ratio.\n * @return {number} Pixel tolerance.\n */\nexport function getTolerance(resolution, pixelRatio) {\n  return SIMPLIFY_TOLERANCE * resolution / pixelRatio;\n}\n\n\n/**\n * @param {import(\"../render/ReplayGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/Circle.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").default} feature Feature.\n */\nfunction renderCircleGeometry(replayGroup, geometry, style, feature) {\n  const fillStyle = style.getFill();\n  const strokeStyle = style.getStroke();\n  if (fillStyle || strokeStyle) {\n    const circleReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.CIRCLE);\n    circleReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    circleReplay.drawCircle(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {import(\"../render/ReplayGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {function(this: T, import(\"../events/Event.js\").default)} listener Listener function.\n * @param {T} thisArg Value to use as `this` when executing `listener`.\n * @return {boolean} `true` if style is loading.\n * @template T\n */\nexport function renderFeature(replayGroup, feature, style, squaredTolerance, listener, thisArg) {\n  let loading = false;\n  const imageStyle = style.getImage();\n  if (imageStyle) {\n    let imageState = imageStyle.getImageState();\n    if (imageState == ImageState.LOADED || imageState == ImageState.ERROR) {\n      imageStyle.unlistenImageChange(listener, thisArg);\n    } else {\n      if (imageState == ImageState.IDLE) {\n        imageStyle.load();\n      }\n      imageState = imageStyle.getImageState();\n      imageStyle.listenImageChange(listener, thisArg);\n      loading = true;\n    }\n  }\n  renderFeatureInternal(replayGroup, feature, style, squaredTolerance);\n\n  return loading;\n}\n\n\n/**\n * @param {import(\"../render/ReplayGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {number} squaredTolerance Squared tolerance.\n */\nfunction renderFeatureInternal(replayGroup, feature, style, squaredTolerance) {\n  const geometry = style.getGeometryFunction()(feature);\n  if (!geometry) {\n    return;\n  }\n  const simplifiedGeometry = geometry.getSimplifiedGeometry(squaredTolerance);\n  const renderer = style.getRenderer();\n  if (renderer) {\n    renderGeometry(replayGroup, simplifiedGeometry, style, feature);\n  } else {\n    const geometryRenderer = GEOMETRY_RENDERERS[simplifiedGeometry.getType()];\n    geometryRenderer(replayGroup, simplifiedGeometry, style, feature);\n  }\n}\n\n\n/**\n * @param {import(\"../render/ReplayGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/Geometry.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n */\nfunction renderGeometry(replayGroup, geometry, style, feature) {\n  if (geometry.getType() == GeometryType.GEOMETRY_COLLECTION) {\n    const geometries = /** @type {import(\"../geom/GeometryCollection.js\").default} */ (geometry).getGeometries();\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      renderGeometry(replayGroup, geometries[i], style, feature);\n    }\n    return;\n  }\n  const replay = replayGroup.getReplay(style.getZIndex(), ReplayType.DEFAULT);\n  replay.drawCustom(/** @type {import(\"../geom/SimpleGeometry.js\").default} */ (geometry), feature, style.getRenderer());\n}\n\n\n/**\n * @param {import(\"../render/ReplayGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/GeometryCollection.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").default} feature Feature.\n */\nfunction renderGeometryCollectionGeometry(replayGroup, geometry, style, feature) {\n  const geometries = geometry.getGeometriesArray();\n  let i, ii;\n  for (i = 0, ii = geometries.length; i < ii; ++i) {\n    const geometryRenderer =\n        GEOMETRY_RENDERERS[geometries[i].getType()];\n    geometryRenderer(replayGroup, geometries[i], style, feature);\n  }\n}\n\n\n/**\n * @param {import(\"../render/ReplayGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/LineString.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n */\nfunction renderLineStringGeometry(replayGroup, geometry, style, feature) {\n  const strokeStyle = style.getStroke();\n  if (strokeStyle) {\n    const lineStringReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.LINE_STRING);\n    lineStringReplay.setFillStrokeStyle(null, strokeStyle);\n    lineStringReplay.drawLineString(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {import(\"../render/ReplayGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/MultiLineString.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n */\nfunction renderMultiLineStringGeometry(replayGroup, geometry, style, feature) {\n  const strokeStyle = style.getStroke();\n  if (strokeStyle) {\n    const lineStringReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.LINE_STRING);\n    lineStringReplay.setFillStrokeStyle(null, strokeStyle);\n    lineStringReplay.drawMultiLineString(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {import(\"../render/ReplayGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/MultiPolygon.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").default} feature Feature.\n */\nfunction renderMultiPolygonGeometry(replayGroup, geometry, style, feature) {\n  const fillStyle = style.getFill();\n  const strokeStyle = style.getStroke();\n  if (strokeStyle || fillStyle) {\n    const polygonReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.POLYGON);\n    polygonReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    polygonReplay.drawMultiPolygon(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {import(\"../render/ReplayGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/Point.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n */\nfunction renderPointGeometry(replayGroup, geometry, style, feature) {\n  const imageStyle = style.getImage();\n  if (imageStyle) {\n    if (imageStyle.getImageState() != ImageState.LOADED) {\n      return;\n    }\n    const imageReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.IMAGE);\n    imageReplay.setImageStyle(imageStyle, replayGroup.addDeclutter(false));\n    imageReplay.drawPoint(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(!!imageStyle));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {import(\"../render/ReplayGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/MultiPoint.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n */\nfunction renderMultiPointGeometry(replayGroup, geometry, style, feature) {\n  const imageStyle = style.getImage();\n  if (imageStyle) {\n    if (imageStyle.getImageState() != ImageState.LOADED) {\n      return;\n    }\n    const imageReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.IMAGE);\n    imageReplay.setImageStyle(imageStyle, replayGroup.addDeclutter(false));\n    imageReplay.drawMultiPoint(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(!!imageStyle));\n    textReplay.drawText(geometry, feature);\n  }\n}\n\n\n/**\n * @param {import(\"../render/ReplayGroup.js\").default} replayGroup Replay group.\n * @param {import(\"../geom/Polygon.js\").default|import(\"../render/Feature.js\").default} geometry Geometry.\n * @param {import(\"../style/Style.js\").default} style Style.\n * @param {import(\"../Feature.js\").FeatureLike} feature Feature.\n */\nfunction renderPolygonGeometry(replayGroup, geometry, style, feature) {\n  const fillStyle = style.getFill();\n  const strokeStyle = style.getStroke();\n  if (fillStyle || strokeStyle) {\n    const polygonReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.POLYGON);\n    polygonReplay.setFillStrokeStyle(fillStyle, strokeStyle);\n    polygonReplay.drawPolygon(geometry, feature);\n  }\n  const textStyle = style.getText();\n  if (textStyle) {\n    const textReplay = replayGroup.getReplay(style.getZIndex(), ReplayType.TEXT);\n    textReplay.setTextStyle(textStyle, replayGroup.addDeclutter(false));\n    textReplay.drawText(geometry, feature);\n  }\n}\n","/**\n * @module ol/renderer/canvas/VectorLayer\n */\nimport {getUid} from '../../util.js';\nimport LayerType from '../../LayerType.js';\nimport ViewHint from '../../ViewHint.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {listen, unlisten} from '../../events.js';\nimport EventType from '../../events/EventType.js';\nimport rbush from 'rbush';\nimport {buffer, createEmpty, containsExtent, getWidth} from '../../extent.js';\nimport RenderEventType from '../../render/EventType.js';\nimport {labelCache, rotateAtOffset} from '../../render/canvas.js';\nimport CanvasReplayGroup from '../../render/canvas/ReplayGroup.js';\nimport CanvasLayerRenderer from './Layer.js';\nimport {defaultOrder as defaultRenderOrder, getTolerance as getRenderTolerance, getSquaredTolerance as getSquaredRenderTolerance, renderFeature} from '../vector.js';\n\n/**\n * @classdesc\n * Canvas renderer for vector layers.\n * @api\n */\nclass CanvasVectorLayerRenderer extends CanvasLayerRenderer {\n\n  /**\n   * @param {import(\"../../layer/Vector.js\").default} vectorLayer Vector layer.\n   */\n  constructor(vectorLayer) {\n\n    super(vectorLayer);\n\n    /**\n     * Declutter tree.\n     * @private\n     */\n    this.declutterTree_ = vectorLayer.getDeclutter() ? rbush(9, undefined) : null;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.dirty_ = false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.renderedRevision_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.renderedResolution_ = NaN;\n\n    /**\n     * @private\n     * @type {import(\"../../extent.js\").Extent}\n     */\n    this.renderedExtent_ = createEmpty();\n\n    /**\n     * @private\n     * @type {function(import(\"../../Feature.js\").default, import(\"../../Feature.js\").default): number|null}\n     */\n    this.renderedRenderOrder_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../../render/canvas/ReplayGroup.js\").default}\n     */\n    this.replayGroup_ = null;\n\n    /**\n     * A new replay group had to be created by `prepareFrame()`\n     * @type {boolean}\n     */\n    this.replayGroupChanged = true;\n\n    /**\n     * @type {CanvasRenderingContext2D}\n     */\n    this.context = createCanvasContext2D();\n\n    listen(labelCache, EventType.CLEAR, this.handleFontsChanged_, this);\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    unlisten(labelCache, EventType.CLEAR, this.handleFontsChanged_, this);\n    super.disposeInternal();\n  }\n\n  /**\n   * @param {CanvasRenderingContext2D} context Context.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @param {import(\"../../layer/Layer.js\").State} layerState Layer state.\n   */\n  compose(context, frameState, layerState) {\n    const extent = frameState.extent;\n    const pixelRatio = frameState.pixelRatio;\n    const skippedFeatureUids = layerState.managed ?\n      frameState.skippedFeatureUids : {};\n    const viewState = frameState.viewState;\n    const projection = viewState.projection;\n    const rotation = viewState.rotation;\n    const projectionExtent = projection.getExtent();\n    const vectorSource = /** @type {import(\"../../source/Vector.js\").default} */ (this.getLayer().getSource());\n\n    let transform = this.getTransform(frameState, 0);\n\n    // clipped rendering if layer extent is set\n    const clipExtent = layerState.extent;\n    const clipped = clipExtent !== undefined;\n    if (clipped) {\n      this.clip(context, frameState, /** @type {import(\"../../extent.js\").Extent} */ (clipExtent));\n    }\n    const replayGroup = this.replayGroup_;\n    if (replayGroup && !replayGroup.isEmpty()) {\n      if (this.declutterTree_) {\n        this.declutterTree_.clear();\n      }\n      const layer = /** @type {import(\"../../layer/Vector.js\").default} */ (this.getLayer());\n      let drawOffsetX = 0;\n      let drawOffsetY = 0;\n      let replayContext;\n      const transparentLayer = layerState.opacity !== 1;\n      const hasRenderListeners = layer.hasListener(RenderEventType.RENDER);\n      if (transparentLayer || hasRenderListeners) {\n        let drawWidth = context.canvas.width;\n        let drawHeight = context.canvas.height;\n        if (rotation) {\n          const drawSize = Math.round(Math.sqrt(drawWidth * drawWidth + drawHeight * drawHeight));\n          drawOffsetX = (drawSize - drawWidth) / 2;\n          drawOffsetY = (drawSize - drawHeight) / 2;\n          drawWidth = drawHeight = drawSize;\n        }\n        // resize and clear\n        this.context.canvas.width = drawWidth;\n        this.context.canvas.height = drawHeight;\n        replayContext = this.context;\n      } else {\n        replayContext = context;\n      }\n\n      const alpha = replayContext.globalAlpha;\n      if (!transparentLayer) {\n        // for performance reasons, context.save / context.restore is not used\n        // to save and restore the transformation matrix and the opacity.\n        // see http://jsperf.com/context-save-restore-versus-variable\n        replayContext.globalAlpha = layerState.opacity;\n      }\n\n      if (replayContext != context) {\n        replayContext.translate(drawOffsetX, drawOffsetY);\n      }\n\n      const viewHints = frameState.viewHints;\n      const snapToPixel = !(viewHints[ViewHint.ANIMATING] || viewHints[ViewHint.INTERACTING]);\n      const width = frameState.size[0] * pixelRatio;\n      const height = frameState.size[1] * pixelRatio;\n      rotateAtOffset(replayContext, -rotation,\n        width / 2, height / 2);\n      replayGroup.replay(replayContext, transform, rotation, skippedFeatureUids, snapToPixel);\n      if (vectorSource.getWrapX() && projection.canWrapX() &&\n          !containsExtent(projectionExtent, extent)) {\n        let startX = extent[0];\n        const worldWidth = getWidth(projectionExtent);\n        let world = 0;\n        let offsetX;\n        while (startX < projectionExtent[0]) {\n          --world;\n          offsetX = worldWidth * world;\n          transform = this.getTransform(frameState, offsetX);\n          replayGroup.replay(replayContext, transform, rotation, skippedFeatureUids, snapToPixel);\n          startX += worldWidth;\n        }\n        world = 0;\n        startX = extent[2];\n        while (startX > projectionExtent[2]) {\n          ++world;\n          offsetX = worldWidth * world;\n          transform = this.getTransform(frameState, offsetX);\n          replayGroup.replay(replayContext, transform, rotation, skippedFeatureUids, snapToPixel);\n          startX -= worldWidth;\n        }\n      }\n      rotateAtOffset(replayContext, rotation,\n        width / 2, height / 2);\n\n      if (hasRenderListeners) {\n        this.dispatchRenderEvent(replayContext, frameState, transform);\n      }\n      if (replayContext != context) {\n        if (transparentLayer) {\n          const mainContextAlpha = context.globalAlpha;\n          context.globalAlpha = layerState.opacity;\n          context.drawImage(replayContext.canvas, -drawOffsetX, -drawOffsetY);\n          context.globalAlpha = mainContextAlpha;\n        } else {\n          context.drawImage(replayContext.canvas, -drawOffsetX, -drawOffsetY);\n        }\n        replayContext.translate(-drawOffsetX, -drawOffsetY);\n      }\n\n      if (!transparentLayer) {\n        replayContext.globalAlpha = alpha;\n      }\n    }\n\n    if (clipped) {\n      context.restore();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  composeFrame(frameState, layerState, context) {\n    const transform = this.getTransform(frameState, 0);\n    this.preCompose(context, frameState, transform);\n    this.compose(context, frameState, layerState);\n    this.postCompose(context, frameState, layerState, transform);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback, thisArg) {\n    if (!this.replayGroup_) {\n      return undefined;\n    } else {\n      const resolution = frameState.viewState.resolution;\n      const rotation = frameState.viewState.rotation;\n      const layer = /** @type {import(\"../../layer/Vector.js\").default} */ (this.getLayer());\n      /** @type {!Object<string, boolean>} */\n      const features = {};\n      const result = this.replayGroup_.forEachFeatureAtCoordinate(coordinate, resolution, rotation, hitTolerance, {},\n        /**\n         * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n         * @return {?} Callback result.\n         */\n        function(feature) {\n          const key = getUid(feature);\n          if (!(key in features)) {\n            features[key] = true;\n            return callback.call(thisArg, feature, layer);\n          }\n        }, null);\n      return result;\n    }\n  }\n\n  /**\n   * @param {import(\"../../events/Event.js\").default} event Event.\n   */\n  handleFontsChanged_(event) {\n    const layer = this.getLayer();\n    if (layer.getVisible() && this.replayGroup_) {\n      layer.changed();\n    }\n  }\n\n  /**\n   * Handle changes in image style state.\n   * @param {import(\"../../events/Event.js\").default} event Image style change event.\n   * @private\n   */\n  handleStyleImageChange_(event) {\n    this.renderIfReadyAndVisible();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  prepareFrame(frameState, layerState) {\n    const vectorLayer = /** @type {import(\"../../layer/Vector.js\").default} */ (this.getLayer());\n    const vectorSource = /** @type {import(\"../../source/Vector.js\").default} */ (vectorLayer.getSource());\n\n    const animating = frameState.viewHints[ViewHint.ANIMATING];\n    const interacting = frameState.viewHints[ViewHint.INTERACTING];\n    const updateWhileAnimating = vectorLayer.getUpdateWhileAnimating();\n    const updateWhileInteracting = vectorLayer.getUpdateWhileInteracting();\n\n    if (!this.dirty_ && (!updateWhileAnimating && animating) ||\n        (!updateWhileInteracting && interacting)) {\n      return true;\n    }\n\n    const frameStateExtent = frameState.extent;\n    const viewState = frameState.viewState;\n    const projection = viewState.projection;\n    const resolution = viewState.resolution;\n    const pixelRatio = frameState.pixelRatio;\n    const vectorLayerRevision = vectorLayer.getRevision();\n    const vectorLayerRenderBuffer = vectorLayer.getRenderBuffer();\n    let vectorLayerRenderOrder = vectorLayer.getRenderOrder();\n\n    if (vectorLayerRenderOrder === undefined) {\n      vectorLayerRenderOrder = defaultRenderOrder;\n    }\n\n    const extent = buffer(frameStateExtent,\n      vectorLayerRenderBuffer * resolution);\n    const projectionExtent = viewState.projection.getExtent();\n\n    if (vectorSource.getWrapX() && viewState.projection.canWrapX() &&\n        !containsExtent(projectionExtent, frameState.extent)) {\n      // For the replay group, we need an extent that intersects the real world\n      // (-180 to +180). To support geometries in a coordinate range from -540\n      // to +540, we add at least 1 world width on each side of the projection\n      // extent. If the viewport is wider than the world, we need to add half of\n      // the viewport width to make sure we cover the whole viewport.\n      const worldWidth = getWidth(projectionExtent);\n      const gutter = Math.max(getWidth(extent) / 2, worldWidth);\n      extent[0] = projectionExtent[0] - gutter;\n      extent[2] = projectionExtent[2] + gutter;\n    }\n\n    if (!this.dirty_ &&\n        this.renderedResolution_ == resolution &&\n        this.renderedRevision_ == vectorLayerRevision &&\n        this.renderedRenderOrder_ == vectorLayerRenderOrder &&\n        containsExtent(this.renderedExtent_, extent)) {\n      this.replayGroupChanged = false;\n      return true;\n    }\n\n    this.replayGroup_ = null;\n\n    this.dirty_ = false;\n\n    const replayGroup = new CanvasReplayGroup(\n      getRenderTolerance(resolution, pixelRatio), extent, resolution,\n      pixelRatio, vectorSource.getOverlaps(), this.declutterTree_, vectorLayer.getRenderBuffer());\n    vectorSource.loadFeatures(extent, resolution, projection);\n    /**\n     * @param {import(\"../../Feature.js\").default} feature Feature.\n     * @this {CanvasVectorLayerRenderer}\n     */\n    const render = function(feature) {\n      let styles;\n      const styleFunction = feature.getStyleFunction() || vectorLayer.getStyleFunction();\n      if (styleFunction) {\n        styles = styleFunction(feature, resolution);\n      }\n      if (styles) {\n        const dirty = this.renderFeature(\n          feature, resolution, pixelRatio, styles, replayGroup);\n        this.dirty_ = this.dirty_ || dirty;\n      }\n    }.bind(this);\n    if (vectorLayerRenderOrder) {\n      /** @type {Array<import(\"../../Feature.js\").default>} */\n      const features = [];\n      vectorSource.forEachFeatureInExtent(extent,\n        /**\n         * @param {import(\"../../Feature.js\").default} feature Feature.\n         */\n        function(feature) {\n          features.push(feature);\n        });\n      features.sort(vectorLayerRenderOrder);\n      for (let i = 0, ii = features.length; i < ii; ++i) {\n        render(features[i]);\n      }\n    } else {\n      vectorSource.forEachFeatureInExtent(extent, render);\n    }\n    replayGroup.finish();\n\n    this.renderedResolution_ = resolution;\n    this.renderedRevision_ = vectorLayerRevision;\n    this.renderedRenderOrder_ = vectorLayerRenderOrder;\n    this.renderedExtent_ = extent;\n    this.replayGroup_ = replayGroup;\n\n    this.replayGroupChanged = true;\n    return true;\n  }\n\n  /**\n   * @param {import(\"../../Feature.js\").default} feature Feature.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../../style/Style.js\").default|Array<import(\"../../style/Style.js\").default>} styles The style or array of styles.\n   * @param {import(\"../../render/canvas/ReplayGroup.js\").default} replayGroup Replay group.\n   * @return {boolean} `true` if an image is loading.\n   */\n  renderFeature(feature, resolution, pixelRatio, styles, replayGroup) {\n    if (!styles) {\n      return false;\n    }\n    let loading = false;\n    if (Array.isArray(styles)) {\n      for (let i = 0, ii = styles.length; i < ii; ++i) {\n        loading = renderFeature(\n          replayGroup, feature, styles[i],\n          getSquaredRenderTolerance(resolution, pixelRatio),\n          this.handleStyleImageChange_, this) || loading;\n      }\n    } else {\n      loading = renderFeature(\n        replayGroup, feature, styles,\n        getSquaredRenderTolerance(resolution, pixelRatio),\n        this.handleStyleImageChange_, this);\n    }\n    return loading;\n  }\n}\n\n\n/**\n * Determine if this renderer handles the provided layer.\n * @param {import(\"../../layer/Layer.js\").default} layer The candidate layer.\n * @return {boolean} The renderer can render the layer.\n */\nCanvasVectorLayerRenderer['handles'] = function(layer) {\n  return layer.getType() === LayerType.VECTOR;\n};\n\n\n/**\n * Create a layer renderer.\n * @param {import(\"../Map.js\").default} mapRenderer The map renderer.\n * @param {import(\"../../layer/Layer.js\").default} layer The layer to be rendererd.\n * @return {CanvasVectorLayerRenderer} The layer renderer.\n */\nCanvasVectorLayerRenderer['create'] = function(mapRenderer, layer) {\n  return new CanvasVectorLayerRenderer(/** @type {import(\"../../layer/Vector.js\").default} */ (layer));\n};\n\n\nexport default CanvasVectorLayerRenderer;\n","/**\n * @module ol/layer/VectorTileRenderType\n */\n\n/**\n * @enum {string}\n * Render mode for vector tiles:\n *  * `'image'`: Vector tiles are rendered as images. Great performance, but\n *    point symbols and texts are always rotated with the view and pixels are\n *    scaled during zoom animations.\n *  * `'hybrid'`: Polygon and line elements are rendered as images, so pixels\n *    are scaled during zoom animations. Point symbols and texts are accurately\n *    rendered as vectors and can stay upright on rotated views.\n *  * `'vector'`: Vector tiles are rendered as vectors. Most accurate rendering\n *    even during animations, but slower performance than the other options.\n * @api\n */\nexport default {\n  IMAGE: 'image',\n  HYBRID: 'hybrid',\n  VECTOR: 'vector'\n};\n","/**\n * @module ol/renderer/canvas/VectorTileLayer\n */\nimport {getUid} from '../../util.js';\nimport LayerType from '../../LayerType.js';\nimport TileState from '../../TileState.js';\nimport ViewHint from '../../ViewHint.js';\nimport {createCanvasContext2D} from '../../dom.js';\nimport {listen, unlisten} from '../../events.js';\nimport EventType from '../../events/EventType.js';\nimport rbush from 'rbush';\nimport {buffer, containsCoordinate, equals, getIntersection, getTopLeft, intersects} from '../../extent.js';\nimport VectorTileRenderType from '../../layer/VectorTileRenderType.js';\nimport {equivalent as equivalentProjection} from '../../proj.js';\nimport Units from '../../proj/Units.js';\nimport ReplayType from '../../render/ReplayType.js';\nimport {labelCache, rotateAtOffset} from '../../render/canvas.js';\nimport CanvasReplayGroup, {replayDeclutter} from '../../render/canvas/ReplayGroup.js';\nimport {ORDER} from '../../render/replay.js';\nimport CanvasTileLayerRenderer from './TileLayer.js';\nimport {getSquaredTolerance as getSquaredRenderTolerance, renderFeature} from '../vector.js';\nimport {\n  create as createTransform,\n  compose as composeTransform,\n  reset as resetTransform,\n  scale as scaleTransform,\n  translate as translateTransform\n} from '../../transform.js';\n\n\n/**\n * @type {!Object<string, Array<import(\"../../render/ReplayType.js\").default>>}\n */\nconst IMAGE_REPLAYS = {\n  'image': [ReplayType.POLYGON, ReplayType.CIRCLE,\n    ReplayType.LINE_STRING, ReplayType.IMAGE, ReplayType.TEXT],\n  'hybrid': [ReplayType.POLYGON, ReplayType.LINE_STRING]\n};\n\n\n/**\n * @type {!Object<string, Array<import(\"../../render/ReplayType.js\").default>>}\n */\nconst VECTOR_REPLAYS = {\n  'image': [ReplayType.DEFAULT],\n  'hybrid': [ReplayType.IMAGE, ReplayType.TEXT, ReplayType.DEFAULT],\n  'vector': ORDER\n};\n\n\n/**\n * @classdesc\n * Canvas renderer for vector tile layers.\n * @api\n */\nclass CanvasVectorTileLayerRenderer extends CanvasTileLayerRenderer {\n\n  /**\n   * @param {import(\"../../layer/VectorTile.js\").default} layer VectorTile layer.\n   */\n  constructor(layer) {\n\n    super(layer, true);\n\n    /**\n     * Declutter tree.\n     * @private\n     */\n    this.declutterTree_ = layer.getDeclutter() ? rbush(9, undefined) : null;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.dirty_ = false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.renderedLayerRevision_;\n\n    /**\n     * @private\n     * @type {import(\"../../transform.js\").Transform}\n     */\n    this.tmpTransform_ = createTransform();\n\n    const renderMode = layer.getRenderMode();\n\n    // Use lower resolution for pure vector rendering. Closest resolution otherwise.\n    this.zDirection = renderMode === VectorTileRenderType.VECTOR ? 1 : 0;\n\n    if (renderMode !== VectorTileRenderType.VECTOR) {\n      this.context = createCanvasContext2D();\n    }\n\n\n    listen(labelCache, EventType.CLEAR, this.handleFontsChanged_, this);\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    unlisten(labelCache, EventType.CLEAR, this.handleFontsChanged_, this);\n    super.disposeInternal();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getTile(z, x, y, pixelRatio, projection) {\n    const tile = super.getTile(z, x, y, pixelRatio, projection);\n    if (tile.getState() === TileState.LOADED) {\n      this.createReplayGroup_(/** @type {import(\"../../VectorImageTile.js\").default} */ (tile), pixelRatio, projection);\n      if (this.context) {\n        this.renderTileImage_(/** @type {import(\"../../VectorImageTile.js\").default} */ (tile), pixelRatio, projection);\n      }\n    }\n    return tile;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getTileImage(tile) {\n    const tileLayer = /** @type {import(\"../../layer/Tile.js\").default} */ (this.getLayer());\n    return /** @type {import(\"../../VectorImageTile.js\").default} */ (tile).getImage(tileLayer);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  prepareFrame(frameState, layerState) {\n    const layer = /** @type {import(\"../../layer/Vector.js\").default} */ (this.getLayer());\n    const layerRevision = layer.getRevision();\n    if (this.renderedLayerRevision_ != layerRevision) {\n      this.renderedTiles.length = 0;\n    }\n    this.renderedLayerRevision_ = layerRevision;\n    return super.prepareFrame(frameState, layerState);\n  }\n\n  /**\n   * @param {import(\"../../VectorImageTile.js\").default} tile Tile.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../../proj/Projection.js\").default} projection Projection.\n   * @private\n   */\n  createReplayGroup_(tile, pixelRatio, projection) {\n    const layer = /** @type {import(\"../../layer/Vector.js\").default} */ (this.getLayer());\n    const revision = layer.getRevision();\n    const renderOrder = /** @type {import(\"../../render.js\").OrderFunction} */ (layer.getRenderOrder()) || null;\n\n    const replayState = tile.getReplayState(layer);\n    if (!replayState.dirty && replayState.renderedRevision == revision &&\n        replayState.renderedRenderOrder == renderOrder) {\n      return;\n    }\n\n    const source = /** @type {import(\"../../source/VectorTile.js\").default} */ (layer.getSource());\n    const sourceTileGrid = source.getTileGrid();\n    const tileGrid = source.getTileGridForProjection(projection);\n    const resolution = tileGrid.getResolution(tile.tileCoord[0]);\n    const tileExtent = tile.extent;\n\n    for (let t = 0, tt = tile.tileKeys.length; t < tt; ++t) {\n      const sourceTile = tile.getTile(tile.tileKeys[t]);\n      if (sourceTile.getState() != TileState.LOADED) {\n        continue;\n      }\n\n      const sourceTileCoord = sourceTile.tileCoord;\n      const sourceTileExtent = sourceTileGrid.getTileCoordExtent(sourceTileCoord);\n      const sharedExtent = getIntersection(tileExtent, sourceTileExtent);\n      const bufferedExtent = equals(sourceTileExtent, sharedExtent) ? null :\n        buffer(sharedExtent, layer.getRenderBuffer() * resolution, this.tmpExtent);\n      const tileProjection = sourceTile.getProjection();\n      let reproject = false;\n      if (!equivalentProjection(projection, tileProjection)) {\n        reproject = true;\n        sourceTile.setProjection(projection);\n      }\n      replayState.dirty = false;\n      const replayGroup = new CanvasReplayGroup(0, sharedExtent, resolution,\n        pixelRatio, source.getOverlaps(), this.declutterTree_, layer.getRenderBuffer());\n      const squaredTolerance = getSquaredRenderTolerance(resolution, pixelRatio);\n\n      /**\n       * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n       * @this {CanvasVectorTileLayerRenderer}\n       */\n      const render = function(feature) {\n        let styles;\n        const styleFunction = feature.getStyleFunction() || layer.getStyleFunction();\n        if (styleFunction) {\n          styles = styleFunction(feature, resolution);\n        }\n        if (styles) {\n          const dirty = this.renderFeature(feature, squaredTolerance, styles, replayGroup);\n          this.dirty_ = this.dirty_ || dirty;\n          replayState.dirty = replayState.dirty || dirty;\n        }\n      };\n\n      const features = sourceTile.getFeatures();\n      if (renderOrder && renderOrder !== replayState.renderedRenderOrder) {\n        features.sort(renderOrder);\n      }\n      for (let i = 0, ii = features.length; i < ii; ++i) {\n        const feature = features[i];\n        if (reproject) {\n          if (tileProjection.getUnits() == Units.TILE_PIXELS) {\n            // projected tile extent\n            tileProjection.setWorldExtent(sourceTileExtent);\n            // tile extent in tile pixel space\n            tileProjection.setExtent(sourceTile.getExtent());\n          }\n          feature.getGeometry().transform(tileProjection, projection);\n        }\n        if (!bufferedExtent || intersects(bufferedExtent, feature.getGeometry().getExtent())) {\n          render.call(this, feature);\n        }\n      }\n      replayGroup.finish();\n      sourceTile.setReplayGroup(layer, tile.tileCoord.toString(), replayGroup);\n    }\n    replayState.renderedRevision = revision;\n    replayState.renderedRenderOrder = renderOrder;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  forEachFeatureAtCoordinate(coordinate, frameState, hitTolerance, callback, thisArg) {\n    const resolution = frameState.viewState.resolution;\n    const rotation = frameState.viewState.rotation;\n    hitTolerance = hitTolerance == undefined ? 0 : hitTolerance;\n    const layer = this.getLayer();\n    /** @type {!Object<string, boolean>} */\n    const features = {};\n\n    const renderedTiles = /** @type {Array<import(\"../../VectorImageTile.js\").default>} */ (this.renderedTiles);\n\n    let bufferedExtent, found;\n    let i, ii;\n    for (i = 0, ii = renderedTiles.length; i < ii; ++i) {\n      const tile = renderedTiles[i];\n      bufferedExtent = buffer(tile.extent, hitTolerance * resolution, bufferedExtent);\n      if (!containsCoordinate(bufferedExtent, coordinate)) {\n        continue;\n      }\n      for (let t = 0, tt = tile.tileKeys.length; t < tt; ++t) {\n        const sourceTile = tile.getTile(tile.tileKeys[t]);\n        if (sourceTile.getState() != TileState.LOADED) {\n          continue;\n        }\n        const replayGroup = /** @type {CanvasReplayGroup} */ (sourceTile.getReplayGroup(layer,\n          tile.tileCoord.toString()));\n        found = found || replayGroup.forEachFeatureAtCoordinate(coordinate, resolution, rotation, hitTolerance, {},\n          /**\n           * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n           * @return {?} Callback result.\n           */\n          function(feature) {\n            const key = getUid(feature);\n            if (!(key in features)) {\n              features[key] = true;\n              return callback.call(thisArg, feature, layer);\n            }\n          }, null);\n      }\n    }\n    return found;\n  }\n\n  /**\n   * @param {import(\"../../VectorTile.js\").default} tile Tile.\n   * @param {import(\"../../PluggableMap.js\").FrameState} frameState Frame state.\n   * @return {import(\"../../transform.js\").Transform} transform Transform.\n   * @private\n   */\n  getReplayTransform_(tile, frameState) {\n    const layer = this.getLayer();\n    const source = /** @type {import(\"../../source/VectorTile.js\").default} */ (layer.getSource());\n    const tileGrid = source.getTileGrid();\n    const tileCoord = tile.tileCoord;\n    const tileResolution = tileGrid.getResolution(tileCoord[0]);\n    const viewState = frameState.viewState;\n    const pixelRatio = frameState.pixelRatio;\n    const renderResolution = viewState.resolution / pixelRatio;\n    const tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent);\n    const center = viewState.center;\n    const origin = getTopLeft(tileExtent);\n    const size = frameState.size;\n    const offsetX = Math.round(pixelRatio * size[0] / 2);\n    const offsetY = Math.round(pixelRatio * size[1] / 2);\n    return composeTransform(this.tmpTransform_,\n      offsetX, offsetY,\n      tileResolution / renderResolution, tileResolution / renderResolution,\n      viewState.rotation,\n      (origin[0] - center[0]) / tileResolution,\n      (center[1] - origin[1]) / tileResolution);\n  }\n\n  /**\n   * @param {import(\"../../events/Event.js\").default} event Event.\n   */\n  handleFontsChanged_(event) {\n    const layer = this.getLayer();\n    if (layer.getVisible() && this.renderedLayerRevision_ !== undefined) {\n      layer.changed();\n    }\n  }\n\n  /**\n   * Handle changes in image style state.\n   * @param {import(\"../../events/Event.js\").default} event Image style change event.\n   * @private\n   */\n  handleStyleImageChange_(event) {\n    this.renderIfReadyAndVisible();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  postCompose(context, frameState, layerState) {\n    const layer = /** @type {import(\"../../layer/Vector.js\").default} */ (this.getLayer());\n    const renderMode = layer.getRenderMode();\n    if (renderMode != VectorTileRenderType.IMAGE) {\n      const declutterReplays = layer.getDeclutter() ? {} : null;\n      const source = /** @type {import(\"../../source/VectorTile.js\").default} */ (layer.getSource());\n      const replayTypes = VECTOR_REPLAYS[renderMode];\n      const pixelRatio = frameState.pixelRatio;\n      const rotation = frameState.viewState.rotation;\n      const size = frameState.size;\n      let offsetX, offsetY;\n      if (rotation) {\n        offsetX = Math.round(pixelRatio * size[0] / 2);\n        offsetY = Math.round(pixelRatio * size[1] / 2);\n        rotateAtOffset(context, -rotation, offsetX, offsetY);\n      }\n      if (declutterReplays) {\n        this.declutterTree_.clear();\n      }\n      const viewHints = frameState.viewHints;\n      const snapToPixel = !(viewHints[ViewHint.ANIMATING] || viewHints[ViewHint.INTERACTING]);\n      const tiles = this.renderedTiles;\n      const tileGrid = source.getTileGridForProjection(frameState.viewState.projection);\n      const clips = [];\n      const zs = [];\n      for (let i = tiles.length - 1; i >= 0; --i) {\n        const tile = /** @type {import(\"../../VectorImageTile.js\").default} */ (tiles[i]);\n        if (tile.getState() == TileState.ABORT) {\n          continue;\n        }\n        const tileCoord = tile.tileCoord;\n        const worldOffset = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent)[0] - tile.extent[0];\n        let transform = undefined;\n        for (let t = 0, tt = tile.tileKeys.length; t < tt; ++t) {\n          const sourceTile = tile.getTile(tile.tileKeys[t]);\n          if (sourceTile.getState() != TileState.LOADED) {\n            continue;\n          }\n          const replayGroup = /** @type {CanvasReplayGroup} */ (sourceTile.getReplayGroup(layer, tileCoord.toString()));\n          if (!replayGroup || !replayGroup.hasReplays(replayTypes)) {\n            // sourceTile was not yet loaded when this.createReplayGroup_() was\n            // called, or it has no replays of the types we want to render\n            continue;\n          }\n          if (!transform) {\n            transform = this.getTransform(frameState, worldOffset);\n          }\n          const currentZ = sourceTile.tileCoord[0];\n          const currentClip = replayGroup.getClipCoords(transform);\n          context.save();\n          context.globalAlpha = layerState.opacity;\n          // Create a clip mask for regions in this low resolution tile that are\n          // already filled by a higher resolution tile\n          for (let j = 0, jj = clips.length; j < jj; ++j) {\n            const clip = clips[j];\n            if (currentZ < zs[j]) {\n              context.beginPath();\n              // counter-clockwise (outer ring) for current tile\n              context.moveTo(currentClip[0], currentClip[1]);\n              context.lineTo(currentClip[2], currentClip[3]);\n              context.lineTo(currentClip[4], currentClip[5]);\n              context.lineTo(currentClip[6], currentClip[7]);\n              // clockwise (inner ring) for higher resolution tile\n              context.moveTo(clip[6], clip[7]);\n              context.lineTo(clip[4], clip[5]);\n              context.lineTo(clip[2], clip[3]);\n              context.lineTo(clip[0], clip[1]);\n              context.clip();\n            }\n          }\n          replayGroup.replay(context, transform, rotation, {}, snapToPixel, replayTypes, declutterReplays);\n          context.restore();\n          clips.push(currentClip);\n          zs.push(currentZ);\n        }\n      }\n      if (declutterReplays) {\n        replayDeclutter(declutterReplays, context, rotation, snapToPixel);\n      }\n      if (rotation) {\n        rotateAtOffset(context, rotation,\n          /** @type {number} */ (offsetX), /** @type {number} */ (offsetY));\n      }\n    }\n    super.postCompose(context, frameState, layerState);\n  }\n\n  /**\n   * @param {import(\"../../Feature.js\").FeatureLike} feature Feature.\n   * @param {number} squaredTolerance Squared tolerance.\n   * @param {import(\"../../style/Style.js\").default|Array<import(\"../../style/Style.js\").default>} styles The style or array of styles.\n   * @param {import(\"../../render/canvas/ReplayGroup.js\").default} replayGroup Replay group.\n   * @return {boolean} `true` if an image is loading.\n   */\n  renderFeature(feature, squaredTolerance, styles, replayGroup) {\n    if (!styles) {\n      return false;\n    }\n    let loading = false;\n    if (Array.isArray(styles)) {\n      for (let i = 0, ii = styles.length; i < ii; ++i) {\n        loading = renderFeature(\n          replayGroup, feature, styles[i], squaredTolerance,\n          this.handleStyleImageChange_, this) || loading;\n      }\n    } else {\n      loading = renderFeature(\n        replayGroup, feature, styles, squaredTolerance,\n        this.handleStyleImageChange_, this);\n    }\n    return loading;\n  }\n\n  /**\n   * @param {import(\"../../VectorImageTile.js\").default} tile Tile.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../../proj/Projection.js\").default} projection Projection.\n   * @private\n   */\n  renderTileImage_(tile, pixelRatio, projection) {\n    const layer = /** @type {import(\"../../layer/Vector.js\").default} */ (this.getLayer());\n    const replayState = tile.getReplayState(layer);\n    const revision = layer.getRevision();\n    const replays = IMAGE_REPLAYS[layer.getRenderMode()];\n    if (replays && replayState.renderedTileRevision !== revision) {\n      replayState.renderedTileRevision = revision;\n      const tileCoord = tile.wrappedTileCoord;\n      const z = tileCoord[0];\n      const source = /** @type {import(\"../../source/VectorTile.js\").default} */ (layer.getSource());\n      const tileGrid = source.getTileGridForProjection(projection);\n      const resolution = tileGrid.getResolution(z);\n      const context = tile.getContext(layer);\n      const size = source.getTilePixelSize(z, pixelRatio, projection);\n      context.canvas.width = size[0];\n      context.canvas.height = size[1];\n      const tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent);\n      for (let i = 0, ii = tile.tileKeys.length; i < ii; ++i) {\n        const sourceTile = tile.getTile(tile.tileKeys[i]);\n        if (sourceTile.getState() != TileState.LOADED) {\n          continue;\n        }\n        const pixelScale = pixelRatio / resolution;\n        const transform = resetTransform(this.tmpTransform_);\n        scaleTransform(transform, pixelScale, -pixelScale);\n        translateTransform(transform, -tileExtent[0], -tileExtent[3]);\n        const replayGroup = /** @type {CanvasReplayGroup} */ (sourceTile.getReplayGroup(layer,\n          tile.tileCoord.toString()));\n        replayGroup.replay(context, transform, 0, {}, true, replays);\n      }\n    }\n  }\n}\n\n\n/**\n * Determine if this renderer handles the provided layer.\n * @param {import(\"../../layer/Layer.js\").default} layer The candidate layer.\n * @return {boolean} The renderer can render the layer.\n */\nCanvasVectorTileLayerRenderer['handles'] = function(layer) {\n  return layer.getType() === LayerType.VECTOR_TILE;\n};\n\n\n/**\n * Create a layer renderer.\n * @param {import(\"../Map.js\").default} mapRenderer The map renderer.\n * @param {import(\"../../layer/Layer.js\").default} layer The layer to be rendererd.\n * @return {CanvasVectorTileLayerRenderer} The layer renderer.\n */\nCanvasVectorTileLayerRenderer['create'] = function(mapRenderer, layer) {\n  return new CanvasVectorTileLayerRenderer(/** @type {import(\"../../layer/VectorTile.js\").default} */ (layer));\n};\n\n\nexport default CanvasVectorTileLayerRenderer;\n","/**\n * @module ol/Map\n */\nimport PluggableMap from './PluggableMap.js';\nimport {defaults as defaultControls} from './control/util.js';\nimport {defaults as defaultInteractions} from './interaction.js';\nimport {assign} from './obj.js';\nimport CanvasImageLayerRenderer from './renderer/canvas/ImageLayer.js';\nimport CanvasMapRenderer from './renderer/canvas/Map.js';\nimport CanvasTileLayerRenderer from './renderer/canvas/TileLayer.js';\nimport CanvasVectorLayerRenderer from './renderer/canvas/VectorLayer.js';\nimport CanvasVectorTileLayerRenderer from './renderer/canvas/VectorTileLayer.js';\n\n/**\n * @classdesc\n * The map is the core component of OpenLayers. For a map to render, a view,\n * one or more layers, and a target container are needed:\n *\n *     import Map from 'ol/Map';\n *     import View from 'ol/View';\n *     import TileLayer from 'ol/layer/Tile';\n *     import OSM from 'ol/source/OSM';\n *\n *     var map = new Map({\n *       view: new View({\n *         center: [0, 0],\n *         zoom: 1\n *       }),\n *       layers: [\n *         new TileLayer({\n *           source: new OSM()\n *         })\n *       ],\n *       target: 'map'\n *     });\n *\n * The above snippet creates a map using a {@link module:ol/layer/Tile} to\n * display {@link module:ol/source/OSM~OSM} OSM data and render it to a DOM\n * element with the id `map`.\n *\n * The constructor places a viewport container (with CSS class name\n * `ol-viewport`) in the target element (see `getViewport()`), and then two\n * further elements within the viewport: one with CSS class name\n * `ol-overlaycontainer-stopevent` for controls and some overlays, and one with\n * CSS class name `ol-overlaycontainer` for other overlays (see the `stopEvent`\n * option of {@link module:ol/Overlay~Overlay} for the difference). The map\n * itself is placed in a further element within the viewport.\n *\n * Layers are stored as a {@link module:ol/Collection~Collection} in\n * layerGroups. A top-level group is provided by the library. This is what is\n * accessed by `getLayerGroup` and `setLayerGroup`. Layers entered in the\n * options are added to this group, and `addLayer` and `removeLayer` change the\n * layer collection in the group. `getLayers` is a convenience function for\n * `getLayerGroup().getLayers()`. Note that {@link module:ol/layer/Group~Group}\n * is a subclass of {@link module:ol/layer/Base}, so layers entered in the\n * options or added with `addLayer` can be groups, which can contain further\n * groups, and so on.\n *\n * @fires import(\"./MapBrowserEvent.js\").MapBrowserEvent\n * @fires import(\"./MapEvent.js\").MapEvent\n * @fires module:ol/render/Event~RenderEvent#postcompose\n * @fires module:ol/render/Event~RenderEvent#precompose\n * @api\n */\nclass Map extends PluggableMap {\n\n  /**\n   * @param {import(\"./PluggableMap.js\").MapOptions} options Map options.\n   */\n  constructor(options) {\n    options = assign({}, options);\n    if (!options.controls) {\n      options.controls = defaultControls();\n    }\n    if (!options.interactions) {\n      options.interactions = defaultInteractions();\n    }\n\n    super(options);\n  }\n\n  createRenderer() {\n    const renderer = new CanvasMapRenderer(this);\n    renderer.registerLayerRenderers([\n      CanvasImageLayerRenderer,\n      CanvasTileLayerRenderer,\n      CanvasVectorLayerRenderer,\n      CanvasVectorTileLayerRenderer\n    ]);\n    return renderer;\n  }\n}\n\n\nexport default Map;\n","/**\n * @module olcs.AutoRenderLoop\n */\n\nclass AutoRenderLoop {\n  /**\n   * @constructor\n   * @param {olcs.OLCesium} ol3d\n   */\n  constructor(ol3d) {\n    this.ol3d = ol3d;\n    this.scene_ = ol3d.getCesiumScene();\n    this.canvas_ = this.scene_.canvas;\n    this._boundNotifyRepaintRequired = this.notifyRepaintRequired.bind(this);\n\n    this.repaintEventNames_ = [\n      'mousemove', 'mousedown', 'mouseup',\n      'touchstart', 'touchend', 'touchmove',\n      'pointerdown', 'pointerup', 'pointermove',\n      'wheel'\n    ];\n\n    this.enable();\n  }\n\n  /**\n   * Enable.\n   */\n  enable() {\n    this.scene_.requestRenderMode = true;\n    this.scene_.maximumRenderTimeChange = 1000;\n    for (const repaintKey of this.repaintEventNames_) {\n      this.canvas_.addEventListener(repaintKey, this._boundNotifyRepaintRequired, false);\n    }\n\n    window.addEventListener('resize', this._boundNotifyRepaintRequired, false);\n\n    // Listen for changes on the layer group\n    this.ol3d.getOlMap().getLayerGroup().on('change', this._boundNotifyRepaintRequired);\n  }\n\n  /**\n   * Disable.\n   */\n  disable() {\n    for (const repaintKey of this.repaintEventNames_) {\n      this.canvas_.removeEventListener(repaintKey, this._boundNotifyRepaintRequired, false);\n    }\n\n    window.removeEventListener('resize', this._boundNotifyRepaintRequired, false);\n\n    this.ol3d.getOlMap().getLayerGroup().un('change', this._boundNotifyRepaintRequired);\n    this.scene_.requestRenderMode = false;\n  }\n\n  /**\n   * Restart render loop.\n   * Force a restart of the render loop.\n   * @api\n   */\n  restartRenderLoop() {\n    this.notifyRepaintRequired();\n  }\n\n  notifyRepaintRequired() {\n    this.scene_.requestRender();\n  }\n}\n\n\nexport default AutoRenderLoop;\n","/**\n * @module olcs.Camera\n */\n\nimport {unByKey as olObservableUnByKey} from 'ol/Observable.js';\nimport {toRadians, toDegrees} from './math.js';\nimport {getTransform} from 'ol/proj.js';\nimport olcsCore from './core.js';\n\nclass Camera {\n  /**\n   * This object takes care of additional 3d-specific properties of the view and\n   * ensures proper synchronization with the underlying raw Cesium.Camera object.\n   * @param {!Cesium.Scene} scene\n   * @param {!ol.Map} map\n   * @api\n   */\n  constructor(scene, map) {\n    /**\n     * @type {!Cesium.Scene}\n     * @private\n     */\n    this.scene_ = scene;\n\n    /**\n     * @type {!Cesium.Camera}\n     * @private\n     */\n    this.cam_ = scene.camera;\n\n    /**\n     * @type {!ol.Map}\n     * @private\n     */\n    this.map_ = map;\n\n    /**\n     * @type {?ol.View}\n     * @private\n     */\n    this.view_ = null;\n\n    /**\n     * @type {?ol.EventsKey}\n     * @private\n     */\n    this.viewListenKey_ = null;\n\n    /**\n     * @type {!ol.TransformFunction}\n     * @private\n     */\n    this.toLonLat_ = Camera.identityProjection;\n\n    /**\n     * @type {!ol.TransformFunction}\n     * @private\n     */\n    this.fromLonLat_ = Camera.identityProjection;\n\n    /**\n     * 0 -- topdown, PI/2 -- the horizon\n     * @type {number}\n     * @private\n     */\n    this.tilt_ = 0;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.distance_ = 0;\n\n    /**\n     * @type {?Cesium.Matrix4}\n     * @private\n     */\n    this.lastCameraViewMatrix_ = null;\n\n    /**\n     * This is used to discard change events on view caused by updateView method.\n     * @type {boolean}\n     * @private\n     */\n    this.viewUpdateInProgress_ = false;\n\n    this.map_.on('change:view', (e) => {\n      this.setView_(this.map_.getView());\n    });\n    this.setView_(this.map_.getView());\n  }\n\n  /**\n   * @param {Array.<number>} input Input coordinate array.\n   * @param {Array.<number>=} opt_output Output array of coordinate values.\n   * @param {number=} opt_dimension Dimension.\n   * @return {Array.<number>} Input coordinate array (same array as input).\n   */\n  static identityProjection(input, opt_output, opt_dimension) {\n    const dim = opt_dimension || input.length;\n    if (opt_output) {\n      for (let i = 0; i < dim; ++i) {\n        opt_output[i] = input[i];\n      }\n    }\n    return input;\n  }\n\n  /**\n   * @param {?ol.View} view New view to use.\n   * @private\n   */\n  setView_(view) {\n    if (this.view_) {\n      olObservableUnByKey(this.viewListenKey_);\n      this.viewListenKey_ = null;\n    }\n\n    this.view_ = view;\n    if (view) {\n      const toLonLat = getTransform(view.getProjection(), 'EPSG:4326');\n      const fromLonLat = getTransform('EPSG:4326', view.getProjection());\n      console.assert(toLonLat && fromLonLat);\n\n      this.toLonLat_ = toLonLat;\n      this.fromLonLat_ = fromLonLat;\n\n      this.viewListenKey_ = view.on('propertychange', e => this.handleViewEvent_(e));\n\n      this.readFromView();\n    } else {\n      this.toLonLat_ = Camera.identityProjection;\n      this.fromLonLat_ = Camera.identityProjection;\n    }\n  }\n\n  /**\n   * @param {?} e\n   * @private\n   */\n  handleViewEvent_(e) {\n    if (!this.viewUpdateInProgress_) {\n      this.readFromView();\n    }\n  }\n\n  /**\n   * @param {number} heading In radians.\n   * @api\n   */\n  setHeading(heading) {\n    if (!this.view_) {\n      return;\n    }\n\n    this.view_.setRotation(heading);\n  }\n\n  /**\n   * @return {number|undefined} Heading in radians.\n   * @api\n   */\n  getHeading() {\n    if (!this.view_) {\n      return undefined;\n    }\n    const rotation = this.view_.getRotation();\n    return rotation || 0;\n  }\n\n  /**\n   * @param {number} tilt In radians.\n   * @api\n   */\n  setTilt(tilt) {\n    this.tilt_ = tilt;\n    this.updateCamera_();\n  }\n\n  /**\n   * @return {number} Tilt in radians.\n   * @api\n   */\n  getTilt() {\n    return this.tilt_;\n  }\n\n  /**\n   * @param {number} distance In meters.\n   * @api\n   */\n  setDistance(distance) {\n    this.distance_ = distance;\n    this.updateCamera_();\n    this.updateView();\n  }\n\n  /**\n   * @return {number} Distance in meters.\n   * @api\n   */\n  getDistance() {\n    return this.distance_;\n  }\n\n  /**\n   * Shortcut for ol.View.setCenter().\n   * @param {!ol.Coordinate} center Same projection as the ol.View.\n   * @api\n   */\n  setCenter(center) {\n    if (!this.view_) {\n      return;\n    }\n    this.view_.setCenter(center);\n  }\n\n  /**\n   * Shortcut for ol.View.getCenter().\n   * @return {ol.Coordinate|undefined} Same projection as the ol.View.\n   * @api\n   */\n  getCenter() {\n    if (!this.view_) {\n      return undefined;\n    }\n    return this.view_.getCenter();\n  }\n\n  /**\n   * Sets the position of the camera.\n   * @param {!ol.Coordinate} position Same projection as the ol.View.\n   * @api\n   */\n  setPosition(position) {\n    if (!this.toLonLat_) {\n      return;\n    }\n    const ll = this.toLonLat_(position);\n    console.assert(ll);\n\n    const carto = new Cesium.Cartographic(\n        toRadians(ll[0]),\n        toRadians(ll[1]),\n        this.getAltitude());\n\n    this.cam_.setView({\n      destination: Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto)\n    });\n    this.updateView();\n  }\n\n  /**\n   * Calculates position under the camera.\n   * @return {!ol.Coordinate|undefined} Same projection as the ol.View.\n   * @api\n   */\n  getPosition() {\n    if (!this.fromLonLat_) {\n      return undefined;\n    }\n    const carto = Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.cam_.position);\n\n    const pos = this.fromLonLat_([\n      toDegrees(carto.longitude),\n      toDegrees(carto.latitude)\n    ]);\n    console.assert(pos);\n    return pos;\n  }\n\n  /**\n   * @param {number} altitude In meters.\n   * @api\n   */\n  setAltitude(altitude) {\n    const carto = Cesium.Ellipsoid.WGS84.cartesianToCartographic(\n        this.cam_.position);\n    carto.height = altitude;\n    this.cam_.position = Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto);\n\n    this.updateView();\n  }\n\n  /**\n   * @return {number} Altitude in meters.\n   * @api\n   */\n  getAltitude() {\n    const carto = Cesium.Ellipsoid.WGS84.cartesianToCartographic(\n        this.cam_.position);\n\n    return carto.height;\n  }\n\n  /**\n   * Updates the state of the underlying Cesium.Camera\n   * according to the current values of the properties.\n   * @private\n   */\n  updateCamera_() {\n    if (!this.view_ || !this.toLonLat_) {\n      return;\n    }\n    const center = this.view_.getCenter();\n    if (!center) {\n      return;\n    }\n    const ll = this.toLonLat_(center);\n    console.assert(ll);\n\n    const carto = new Cesium.Cartographic(toRadians(ll[0]),\n        toRadians(ll[1]));\n    if (this.scene_.globe) {\n      const height = this.scene_.globe.getHeight(carto);\n      carto.height = height || 0;\n    }\n\n    const destination = Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto);\n\n    /** @type {Cesium.optionsOrientation} */\n    const orientation = {\n      pitch: this.tilt_ - Cesium.Math.PI_OVER_TWO,\n      heading: -this.view_.getRotation(),\n      roll: undefined\n    };\n    this.cam_.setView({\n      destination,\n      orientation\n    });\n\n    this.cam_.moveBackward(this.distance_);\n\n    this.checkCameraChange(true);\n  }\n\n  /**\n   * Calculates the values of the properties from the current ol.View state.\n   * @api\n   */\n  readFromView() {\n    if (!this.view_ || !this.toLonLat_) {\n      return;\n    }\n    const center = this.view_.getCenter();\n    if (center === undefined || center === null) {\n      return;\n    }\n    const ll = this.toLonLat_(center);\n    console.assert(ll);\n\n    const resolution = this.view_.getResolution();\n    this.distance_ = this.calcDistanceForResolution(\n        resolution || 0, toRadians(ll[1]));\n\n    this.updateCamera_();\n  }\n\n  /**\n   * Calculates the values of the properties from the current Cesium.Camera state.\n   * Modifies the center, resolution and rotation properties of the view.\n   * @api\n   */\n  updateView() {\n    if (!this.view_ || !this.fromLonLat_) {\n      return;\n    }\n    this.viewUpdateInProgress_ = true;\n\n    // target & distance\n    const ellipsoid = Cesium.Ellipsoid.WGS84;\n    const scene = this.scene_;\n    const target = olcsCore.pickCenterPoint(scene);\n\n    let bestTarget = target;\n    if (!bestTarget) {\n      //TODO: how to handle this properly ?\n      const globe = scene.globe;\n      const carto = this.cam_.positionCartographic.clone();\n      const height = globe.getHeight(carto);\n      carto.height = height || 0;\n      bestTarget = Cesium.Ellipsoid.WGS84.cartographicToCartesian(carto);\n    }\n    this.distance_ = Cesium.Cartesian3.distance(bestTarget, this.cam_.position);\n    const bestTargetCartographic = ellipsoid.cartesianToCartographic(bestTarget);\n    this.view_.setCenter(this.fromLonLat_([\n      toDegrees(bestTargetCartographic.longitude),\n      toDegrees(bestTargetCartographic.latitude)]));\n\n    // resolution\n    this.view_.setResolution(\n        this.calcResolutionForDistance(this.distance_,\n            bestTargetCartographic ? bestTargetCartographic.latitude : 0));\n\n\n    /*\n     * Since we are positioning the target, the values of heading and tilt\n     * need to be calculated _at the target_.\n     */\n    if (target) {\n      const pos = this.cam_.position;\n\n      // normal to the ellipsoid at the target\n      const targetNormal = new Cesium.Cartesian3();\n      ellipsoid.geocentricSurfaceNormal(target, targetNormal);\n\n      // vector from the target to the camera\n      const targetToCamera = new Cesium.Cartesian3();\n      Cesium.Cartesian3.subtract(pos, target, targetToCamera);\n      Cesium.Cartesian3.normalize(targetToCamera, targetToCamera);\n\n\n      // HEADING\n      const up = this.cam_.up;\n      const right = this.cam_.right;\n      const normal = new Cesium.Cartesian3(-target.y, target.x, 0); // what is it?\n      const heading = Cesium.Cartesian3.angleBetween(right, normal);\n      const cross = Cesium.Cartesian3.cross(target, up, new Cesium.Cartesian3());\n      const orientation = cross.z;\n\n      this.view_.setRotation((orientation < 0 ? heading : -heading));\n\n      // TILT\n      const tiltAngle = Math.acos(\n          Cesium.Cartesian3.dot(targetNormal, targetToCamera));\n      this.tilt_ = isNaN(tiltAngle) ? 0 : tiltAngle;\n    } else {\n      // fallback when there is no target\n      this.view_.setRotation(this.cam_.heading);\n      this.tilt_ = -this.cam_.pitch + Math.PI / 2;\n    }\n\n    this.viewUpdateInProgress_ = false;\n  }\n\n  /**\n   * Check if the underlying camera state has changed and ensure synchronization.\n   * @param {boolean=} opt_dontSync Do not synchronize the view.\n   */\n  checkCameraChange(opt_dontSync) {\n    const old = this.lastCameraViewMatrix_;\n    const current = this.cam_.viewMatrix;\n\n    if (!old || !Cesium.Matrix4.equalsEpsilon(old, current, 1e-5)) {\n      this.lastCameraViewMatrix_ = current.clone();\n      if (opt_dontSync !== true) {\n        this.updateView();\n      }\n    }\n  }\n\n  /**\n   * calculate the distance between camera and centerpoint based on the resolution and latitude value\n   * @param {number} resolution Number of map units per pixel.\n   * @param {number} latitude Latitude in radians.\n   * @return {number} The calculated distance.\n   * @api\n   */\n  calcDistanceForResolution(resolution, latitude) {\n    const canvas = this.scene_.canvas;\n    const fovy = this.cam_.frustum.fovy; // vertical field of view\n    console.assert(!isNaN(fovy));\n    const metersPerUnit = this.view_.getProjection().getMetersPerUnit();\n\n    // number of \"map units\" visible in 2D (vertically)\n    const visibleMapUnits = resolution * canvas.clientHeight;\n\n    // The metersPerUnit does not take latitude into account, but it should\n    // be lower with increasing latitude -- we have to compensate.\n    // In 3D it is not possible to maintain the resolution at more than one point,\n    // so it only makes sense to use the latitude of the \"target\" point.\n    const relativeCircumference = Math.cos(Math.abs(latitude));\n\n    // how many meters should be visible in 3D\n    const visibleMeters = visibleMapUnits * metersPerUnit * relativeCircumference;\n\n    // distance required to view the calculated length in meters\n    //\n    //  fovy/2\n    //    |\\\n    //  x | \\\n    //    |--\\\n    // visibleMeters/2\n    const requiredDistance = (visibleMeters / 2) / Math.tan(fovy / 2);\n\n    // NOTE: This calculation is not absolutely precise, because metersPerUnit\n    // is a great simplification. It does not take ellipsoid/terrain into account.\n\n    return requiredDistance;\n  }\n\n  /**\n   * calculate the resolution based on a distance(camera to position) and latitude value\n   * @param {number} distance\n   * @param {number} latitude\n   * @return {number} The calculated resolution.\n   * @api\n   */\n  calcResolutionForDistance(distance, latitude) {\n    // See the reverse calculation (calcDistanceForResolution) for details\n    const canvas = this.scene_.canvas;\n    const fovy = this.cam_.frustum.fovy;\n    const metersPerUnit = this.view_.getProjection().getMetersPerUnit();\n\n    const visibleMeters = 2 * distance * Math.tan(fovy / 2);\n    const relativeCircumference = Math.cos(Math.abs(latitude));\n    const visibleMapUnits = visibleMeters / metersPerUnit / relativeCircumference;\n    const resolution = visibleMapUnits / canvas.clientHeight;\n\n    return resolution;\n  }\n}\n\n\nexport default Camera;\n","/**\n * @module olcs.AbstractSynchronizer\n */\nimport {unByKey as olObservableUnByKey} from 'ol/Observable.js';\nimport olLayerGroup from 'ol/layer/Group.js';\nimport {olcsListen, getUid} from './util.js';\n\n\nclass AbstractSynchronizer {\n  /**\n   * @param {!ol.Map} map\n   * @param {!Cesium.Scene} scene\n   * @template T\n   * @abstract\n   * @api\n   */\n  constructor(map, scene) {\n    /**\n     * @type {!ol.Map}\n     * @protected\n     */\n    this.map = map;\n\n    /**\n     * @type {ol.View}\n     * @protected\n     */\n    this.view = map.getView();\n\n    /**\n     * @type {!Cesium.Scene}\n     * @protected\n     */\n    this.scene = scene;\n\n    /**\n     * @type {ol.Collection.<ol.layer.Base>}\n     * @protected\n     */\n    this.olLayers = map.getLayerGroup().getLayers();\n\n    /**\n     * @type {ol.layer.Group}\n     */\n    this.mapLayerGroup = map.getLayerGroup();\n\n    /**\n     * Map of OpenLayers layer ids (from getUid) to the Cesium ImageryLayers.\n     * Null value means, that we are unable to create equivalent layers.\n     * @type {Object.<string, ?Array.<T>>}\n     * @protected\n     */\n    this.layerMap = {};\n\n    /**\n     * Map of listen keys for OpenLayers layer layers ids (from getUid).\n     * @type {!Object.<string, Array<ol.EventsKey>>}\n     * @protected\n     */\n    this.olLayerListenKeys = {};\n\n    /**\n     * Map of listen keys for OpenLayers layer groups ids (from getUid).\n     * @type {!Object.<string, !Array.<ol.EventsKey>>}\n     * @private\n     */\n    this.olGroupListenKeys_ = {};\n  }\n\n  /**\n   * Destroy all and perform complete synchronization of the layers.\n   * @api\n   */\n  synchronize() {\n    this.destroyAll();\n    this.addLayers_(this.mapLayerGroup);\n  }\n\n  /**\n   * Order counterparts using the same algorithm as the Openlayers renderer:\n   * z-index then original sequence order.\n   * @protected\n   */\n  orderLayers() {\n    // Ordering logics is handled in subclasses.\n  }\n\n  /**\n   * Add a layer hierarchy.\n   * @param {ol.layer.Base} root\n   * @private\n   */\n  addLayers_(root) {\n    /** @type {Array<olcsx.LayerWithParents>} */\n    const fifo = [{\n      layer: root,\n      parents: []\n    }];\n    while (fifo.length > 0) {\n      const olLayerWithParents = fifo.splice(0, 1)[0];\n      const olLayer = olLayerWithParents.layer;\n      const olLayerId = getUid(olLayer).toString();\n      this.olLayerListenKeys[olLayerId] = [];\n      console.assert(!this.layerMap[olLayerId]);\n\n      let cesiumObjects = null;\n      if (olLayer instanceof olLayerGroup) {\n        this.listenForGroupChanges_(olLayer);\n        if (olLayer !== this.mapLayerGroup) {\n          cesiumObjects = this.createSingleLayerCounterparts(olLayerWithParents);\n        }\n        if (!cesiumObjects) {\n          olLayer.getLayers().forEach((l) => {\n            if (l) {\n              const newOlLayerWithParents = {\n                layer: l,\n                parents: olLayer === this.mapLayerGroup ?\n                  [] :\n                  [olLayerWithParents.layer].concat(olLayerWithParents.parents)\n              };\n              fifo.push(newOlLayerWithParents);\n            }\n          });\n        }\n      } else {\n        cesiumObjects = this.createSingleLayerCounterparts(olLayerWithParents);\n        if (!cesiumObjects) {\n          // keep an eye on the layers that once failed to be added (might work when the layer is updated)\n          // for example when a source is set after the layer is added to the map\n          const layerId = olLayerId;\n          const layerWithParents = olLayerWithParents;\n          const onLayerChange = (e) => {\n            const cesiumObjs = this.createSingleLayerCounterparts(layerWithParents);\n            if (cesiumObjs) {\n              // unsubscribe event listener\n              layerWithParents.layer.un('change', onLayerChange);\n              this.addCesiumObjects_(cesiumObjs, layerId, layerWithParents.layer);\n              this.orderLayers();\n            }\n          };\n          this.olLayerListenKeys[olLayerId].push(olcsListen(layerWithParents.layer, 'change', onLayerChange));\n        }\n      }\n      // add Cesium layers\n      if (cesiumObjects) {\n        this.addCesiumObjects_(cesiumObjects, olLayerId, olLayer);\n      }\n    }\n\n    this.orderLayers();\n  }\n\n  /**\n   * Add Cesium objects.\n   * @param {Array.<T>} cesiumObjects\n   * @param {string} layerId\n   * @param {ol.layer.Base} layer\n   * @private\n   */\n  addCesiumObjects_(cesiumObjects, layerId, layer) {\n    this.layerMap[layerId] = cesiumObjects;\n    this.olLayerListenKeys[layerId].push(olcsListen(layer, 'change:zIndex', () => this.orderLayers()));\n    cesiumObjects.forEach((cesiumObject) => {\n      this.addCesiumObject(cesiumObject);\n    });\n  }\n\n  /**\n   * Remove and destroy a single layer.\n   * @param {ol.layer.Layer} layer\n   * @return {boolean} counterpart destroyed\n   * @private\n   */\n  removeAndDestroySingleLayer_(layer) {\n    const uid = getUid(layer).toString();\n    const counterparts = this.layerMap[uid];\n    if (!!counterparts) {\n      counterparts.forEach((counterpart) => {\n        this.removeSingleCesiumObject(counterpart, false);\n        this.destroyCesiumObject(counterpart);\n      });\n      this.olLayerListenKeys[uid].forEach(olObservableUnByKey);\n      delete this.olLayerListenKeys[uid];\n    }\n    delete this.layerMap[uid];\n    return !!counterparts;\n  }\n\n  /**\n   * Unlisten a single layer group.\n   * @param {ol.layer.Group} group\n   * @private\n   */\n  unlistenSingleGroup_(group) {\n    if (group === this.mapLayerGroup) {\n      return;\n    }\n    const uid = getUid(group).toString();\n    const keys = this.olGroupListenKeys_[uid];\n    keys.forEach((key) => {\n      olObservableUnByKey(key);\n    });\n    delete this.olGroupListenKeys_[uid];\n    delete this.layerMap[uid];\n  }\n\n  /**\n   * Remove layer hierarchy.\n   * @param {ol.layer.Base} root\n   * @private\n   */\n  removeLayer_(root) {\n    if (!!root) {\n      const fifo = [root];\n      while (fifo.length > 0) {\n        const olLayer = fifo.splice(0, 1)[0];\n        const done = this.removeAndDestroySingleLayer_(olLayer);\n        if (olLayer instanceof olLayerGroup) {\n          this.unlistenSingleGroup_(olLayer);\n          if (!done) {\n            // No counterpart for the group itself so removing\n            // each of the child layers.\n            olLayer.getLayers().forEach((l) => {\n              fifo.push(l);\n            });\n          }\n        }\n      }\n    }\n  }\n\n  /**\n   * Register listeners for single layer group change.\n   * @param {ol.layer.Group} group\n   * @private\n   */\n  listenForGroupChanges_(group) {\n    const uuid = getUid(group).toString();\n\n    console.assert(this.olGroupListenKeys_[uuid] === undefined);\n\n    const listenKeyArray = [];\n    this.olGroupListenKeys_[uuid] = listenKeyArray;\n\n    // only the keys that need to be relistened when collection changes\n    let contentKeys = [];\n    const listenAddRemove = (function() {\n      const collection = group.getLayers();\n      if (collection) {\n        contentKeys = [\n          collection.on('add', (event) => {\n            this.addLayers_(event.element);\n          }),\n          collection.on('remove', (event) => {\n            this.removeLayer_(event.element);\n          })\n        ];\n        listenKeyArray.push(...contentKeys);\n      }\n    }).bind(this);\n\n    listenAddRemove();\n\n    listenKeyArray.push(group.on('change:layers', (e) => {\n      contentKeys.forEach((el) => {\n        const i = listenKeyArray.indexOf(el);\n        if (i >= 0) {\n          listenKeyArray.splice(i, 1);\n        }\n        olObservableUnByKey(el);\n      });\n      listenAddRemove();\n    }));\n  }\n\n  /**\n   * Destroys all the created Cesium objects.\n   * @protected\n   */\n  destroyAll() {\n    this.removeAllCesiumObjects(true); // destroy\n    let objKey;\n    for (objKey in this.olGroupListenKeys_) {\n      const keys = this.olGroupListenKeys_[objKey];\n      keys.forEach(olObservableUnByKey);\n    }\n    for (objKey in this.olLayerListenKeys) {\n      this.olLayerListenKeys[objKey].forEach(olObservableUnByKey);\n    }\n    this.olGroupListenKeys_ = {};\n    this.olLayerListenKeys = {};\n    this.layerMap = {};\n  }\n\n  /**\n   * Adds a single Cesium object to the collection.\n   * @param {!T} object\n   * @abstract\n   * @protected\n   */\n  addCesiumObject(object) {}\n\n  /**\n   * @param {!T} object\n   * @abstract\n   * @protected\n   */\n  destroyCesiumObject(object) {}\n\n  /**\n   * Remove single Cesium object from the collection.\n   * @param {!T} object\n   * @param {boolean} destroy\n   * @abstract\n   * @protected\n   */\n  removeSingleCesiumObject(object, destroy) {}\n\n  /**\n   * Remove all Cesium objects from the collection.\n   * @param {boolean} destroy\n   * @abstract\n   * @protected\n   */\n  removeAllCesiumObjects(destroy) {}\n\n  /**\n   * @param {olcsx.LayerWithParents} olLayerWithParents\n   * @return {?Array.<T>}\n   * @abstract\n   * @protected\n   */\n  createSingleLayerCounterparts(olLayerWithParents) {}\n}\n\n\nexport default AbstractSynchronizer;\n","/**\n * @module olcs.RasterSynchronizer\n */\nimport olLayerGroup from 'ol/layer/Group.js';\nimport {getUid, stableSort} from './util.js';\nimport olcsAbstractSynchronizer from './AbstractSynchronizer.js';\nimport olcsCore from './core.js';\n\nclass RasterSynchronizer extends olcsAbstractSynchronizer {\n  /**\n   * This object takes care of one-directional synchronization of\n   * Openlayers raster layers to the given Cesium globe.\n   * @param {!ol.Map} map\n   * @param {!Cesium.Scene} scene\n   * @constructor\n   * @extends {olcsAbstractSynchronizer.<Cesium.ImageryLayer>}\n   * @api\n   */\n  constructor(map, scene) {\n    super(map, scene);\n\n    /**\n     * @type {!Cesium.ImageryLayerCollection}\n     * @private\n     */\n    this.cesiumLayers_ = scene.imageryLayers;\n\n    /**\n     * @type {!Cesium.ImageryLayerCollection}\n     * @private\n     */\n    this.ourLayers_ = new Cesium.ImageryLayerCollection();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  addCesiumObject(object) {\n    this.cesiumLayers_.add(object);\n    this.ourLayers_.add(object);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  destroyCesiumObject(object) {\n    object.destroy();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  removeSingleCesiumObject(object, destroy) {\n    this.cesiumLayers_.remove(object, destroy);\n    this.ourLayers_.remove(object, false);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  removeAllCesiumObjects(destroy) {\n    for (let i = 0; i < this.ourLayers_.length; ++i) {\n      this.cesiumLayers_.remove(this.ourLayers_.get(i), destroy);\n    }\n    this.ourLayers_.removeAll(false);\n  }\n\n  /**\n   * Creates an array of Cesium.ImageryLayer.\n   * May be overriden by child classes to implement custom behavior.\n   * The default implementation handles tiled imageries in EPSG:4326 or\n   * EPSG:3859.\n   * @param {!ol.layer.Base} olLayer\n   * @param {!ol.proj.Projection} viewProj Projection of the view.\n   * @return {?Array.<!Cesium.ImageryLayer>} array or null if not possible\n   * (or supported)\n   * @protected\n   */\n  convertLayerToCesiumImageries(olLayer, viewProj) {\n    const result = olcsCore.tileLayerToImageryLayer(this.map, olLayer, viewProj);\n    return result ? [result] : null;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  createSingleLayerCounterparts(olLayerWithParents) {\n    const olLayer = olLayerWithParents.layer;\n    const uid = getUid(olLayer).toString();\n    const viewProj = this.view.getProjection();\n    console.assert(viewProj);\n    const cesiumObjects = this.convertLayerToCesiumImageries(olLayer, viewProj);\n    if (cesiumObjects) {\n      const listenKeyArray = [];\n      [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach((olLayerItem) => {\n        listenKeyArray.push(olLayerItem.on(['change:opacity', 'change:visible'], () => {\n          // the compiler does not seem to be able to infer this\n          console.assert(cesiumObjects);\n          for (let i = 0; i < cesiumObjects.length; ++i) {\n            olcsCore.updateCesiumLayerProperties(olLayerWithParents, cesiumObjects[i]);\n          }\n        }));\n      });\n\n      for (let i = 0; i < cesiumObjects.length; ++i) {\n        olcsCore.updateCesiumLayerProperties(olLayerWithParents, cesiumObjects[i]);\n      }\n\n      // there is no way to modify Cesium layer extent,\n      // we have to recreate when OpenLayers layer extent changes:\n      listenKeyArray.push(olLayer.on('change:extent', (e) => {\n        for (let i = 0; i < cesiumObjects.length; ++i) {\n          this.cesiumLayers_.remove(cesiumObjects[i], true); // destroy\n          this.ourLayers_.remove(cesiumObjects[i], false);\n        }\n        delete this.layerMap[getUid(olLayer)]; // invalidate the map entry\n        this.synchronize();\n      }));\n\n      listenKeyArray.push(olLayer.on('change', (e) => {\n        // when the source changes, re-add the layer to force update\n        for (let i = 0; i < cesiumObjects.length; ++i) {\n          const position = this.cesiumLayers_.indexOf(cesiumObjects[i]);\n          if (position >= 0) {\n            this.cesiumLayers_.remove(cesiumObjects[i], false);\n            this.cesiumLayers_.add(cesiumObjects[i], position);\n          }\n        }\n      }));\n\n      this.olLayerListenKeys[uid].push(...listenKeyArray);\n    }\n\n    return Array.isArray(cesiumObjects) ? cesiumObjects : null;\n  }\n\n  /**\n   * Order counterparts using the same algorithm as the Openlayers renderer:\n   * z-index then original sequence order.\n   * @override\n   * @protected\n   */\n  orderLayers() {\n    const layers = [];\n    const zIndices = {};\n    const queue = [this.mapLayerGroup];\n\n    while (queue.length > 0) {\n      const olLayer = queue.splice(0, 1)[0];\n      layers.push(olLayer);\n      zIndices[getUid(olLayer)] = olLayer.getZIndex();\n\n      if (olLayer instanceof olLayerGroup) {\n        const sublayers = olLayer.getLayers();\n        if (sublayers) {\n          // Prepend queue with sublayers in order\n          queue.unshift(...sublayers.getArray());\n        }\n      }\n    }\n\n    stableSort(layers, (layer1, layer2) =>\n      zIndices[getUid(layer1)] - zIndices[getUid(layer2)]\n    );\n\n    layers.forEach((olLayer) => {\n      const olLayerId = getUid(olLayer).toString();\n      const cesiumObjects = this.layerMap[olLayerId];\n      if (cesiumObjects) {\n        cesiumObjects.forEach((cesiumObject) => { this.raiseToTop(cesiumObject); });\n      }\n    });\n  }\n\n  /**\n   * @param {Cesium.ImageryLayer} counterpart\n   */\n  raiseToTop(counterpart) {\n    this.cesiumLayers_.raiseToTop(counterpart);\n  }\n}\n\n\nexport default RasterSynchronizer;\n","/**\n * @module ol/source/Cluster\n */\n\nimport {getUid} from '../util.js';\nimport {assert} from '../asserts.js';\nimport Feature from '../Feature.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport {scale as scaleCoordinate, add as addCoordinate} from '../coordinate.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {buffer, createEmpty, createOrUpdateFromCoordinate} from '../extent.js';\nimport Point from '../geom/Point.js';\nimport VectorSource from './Vector.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {number} [distance=20] Minimum distance in pixels between clusters.\n * @property {function(Feature):Point} [geometryFunction]\n * Function that takes an {@link module:ol/Feature} as argument and returns an\n * {@link module:ol/geom/Point} as cluster calculation point for the feature. When a\n * feature should not be considered for clustering, the function should return\n * `null`. The default, which works when the underyling source contains point\n * features only, is\n * ```js\n * function(feature) {\n *   return feature.getGeometry();\n * }\n * ```\n * See {@link module:ol/geom/Polygon~Polygon#getInteriorPoint} for a way to get a cluster\n * calculation point for polygons.\n * @property {VectorSource} source Source.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n */\n\n\n/**\n * @classdesc\n * Layer source to cluster vector data. Works out of the box with point\n * geometries. For other geometry types, or if not all geometries should be\n * considered for clustering, a custom `geometryFunction` can be defined.\n * @api\n */\nclass Cluster extends VectorSource {\n  /**\n   * @param {Options} options Cluster options.\n   */\n  constructor(options) {\n    super({\n      attributions: options.attributions,\n      wrapX: options.wrapX\n    });\n\n    /**\n     * @type {number|undefined}\n     * @protected\n     */\n    this.resolution = undefined;\n\n    /**\n     * @type {number}\n     * @protected\n     */\n    this.distance = options.distance !== undefined ? options.distance : 20;\n\n    /**\n     * @type {Array<Feature>}\n     * @protected\n     */\n    this.features = [];\n\n    /**\n     * @param {Feature} feature Feature.\n     * @return {Point} Cluster calculation point.\n     * @protected\n     */\n    this.geometryFunction = options.geometryFunction || function(feature) {\n      const geometry = /** @type {Point} */ (feature.getGeometry());\n      assert(geometry.getType() == GeometryType.POINT,\n        10); // The default `geometryFunction` can only handle `Point` geometries\n      return geometry;\n    };\n\n    /**\n     * @type {VectorSource}\n     * @protected\n     */\n    this.source = options.source;\n\n    listen(this.source, EventType.CHANGE, this.refresh, this);\n  }\n\n  /**\n   * Get the distance in pixels between clusters.\n   * @return {number} Distance.\n   * @api\n   */\n  getDistance() {\n    return this.distance;\n  }\n\n  /**\n   * Get a reference to the wrapped source.\n   * @return {VectorSource} Source.\n   * @api\n   */\n  getSource() {\n    return this.source;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  loadFeatures(extent, resolution, projection) {\n    this.source.loadFeatures(extent, resolution, projection);\n    if (resolution !== this.resolution) {\n      this.clear();\n      this.resolution = resolution;\n      this.cluster();\n      this.addFeatures(this.features);\n    }\n  }\n\n  /**\n   * Set the distance in pixels between clusters.\n   * @param {number} distance The distance in pixels.\n   * @api\n   */\n  setDistance(distance) {\n    this.distance = distance;\n    this.refresh();\n  }\n\n  /**\n   * handle the source changing\n   * @override\n   */\n  refresh() {\n    this.clear();\n    this.cluster();\n    this.addFeatures(this.features);\n    super.refresh();\n  }\n\n  /**\n   * @protected\n   */\n  cluster() {\n    if (this.resolution === undefined) {\n      return;\n    }\n    this.features.length = 0;\n    const extent = createEmpty();\n    const mapDistance = this.distance * this.resolution;\n    const features = this.source.getFeatures();\n\n    /**\n     * @type {!Object<string, boolean>}\n     */\n    const clustered = {};\n\n    for (let i = 0, ii = features.length; i < ii; i++) {\n      const feature = features[i];\n      if (!(getUid(feature) in clustered)) {\n        const geometry = this.geometryFunction(feature);\n        if (geometry) {\n          const coordinates = geometry.getCoordinates();\n          createOrUpdateFromCoordinate(coordinates, extent);\n          buffer(extent, mapDistance, extent);\n\n          let neighbors = this.source.getFeaturesInExtent(extent);\n          neighbors = neighbors.filter(function(neighbor) {\n            const uid = getUid(neighbor);\n            if (!(uid in clustered)) {\n              clustered[uid] = true;\n              return true;\n            } else {\n              return false;\n            }\n          });\n          this.features.push(this.createCluster(neighbors));\n        }\n      }\n    }\n  }\n\n  /**\n   * @param {Array<Feature>} features Features\n   * @return {Feature} The cluster feature.\n   * @protected\n   */\n  createCluster(features) {\n    const centroid = [0, 0];\n    for (let i = features.length - 1; i >= 0; --i) {\n      const geometry = this.geometryFunction(features[i]);\n      if (geometry) {\n        addCoordinate(centroid, geometry.getCoordinates());\n      } else {\n        features.splice(i, 1);\n      }\n    }\n    scaleCoordinate(centroid, 1 / features.length);\n\n    const cluster = new Feature(new Point(centroid));\n    cluster.set('features', features);\n    return cluster;\n  }\n}\n\n\nexport default Cluster;\n","/**\n * @module olcs.core.VectorLayerCounterpart\n */\nimport {unByKey as olObservableUnByKey} from 'ol/Observable.js';\n\nclass VectorLayerCounterpart {\n  /**\n  * Result of the conversion of an OpenLayers layer to Cesium.\n  * @param {!(ol.proj.Projection|string)} layerProjection\n  * @param {!Cesium.Scene} scene\n  */\n  constructor(layerProjection, scene) {\n    const billboards = new Cesium.BillboardCollection({scene});\n    const primitives = new Cesium.PrimitiveCollection();\n\n    /**\n    * @type {!Array.<ol.EventsKey>}\n    */\n    this.olListenKeys = [];\n\n    this.rootCollection_ = new Cesium.PrimitiveCollection();\n    /**\n    * @type {!olcsx.core.OlFeatureToCesiumContext}\n    */\n    this.context = {\n      projection: layerProjection,\n      billboards,\n      featureToCesiumMap: {},\n      primitives\n    };\n\n    this.rootCollection_.add(billboards);\n    this.rootCollection_.add(primitives);\n  }\n\n  /**\n  * Unlisten.\n  */\n  destroy() {\n    this.olListenKeys.forEach(olObservableUnByKey);\n    this.olListenKeys.length = 0;\n  }\n\n  /**\n  * @return {!Cesium.Primitive}\n  */\n  getRootPrimitive() {\n    return this.rootCollection_;\n  }\n}\n\n\nexport default VectorLayerCounterpart;\n","/**\n * @module olcs.FeatureConverter\n */\nimport olGeomGeometry from 'ol/geom/Geometry.js';\nimport olStyleIcon from 'ol/style/Icon.js';\nimport olSourceVector from 'ol/source/Vector.js';\nimport olSourceCluster from 'ol/source/Cluster.js';\nimport {circular as olCreateCircularPolygon} from 'ol/geom/Polygon.js';\nimport {boundingExtent, getCenter} from 'ol/extent.js';\nimport olGeomSimpleGeometry from 'ol/geom/SimpleGeometry.js';\nimport olcsCore from './core.js';\nimport olcsCoreVectorLayerCounterpart from './core/VectorLayerCounterpart.js';\nimport olcsUtil, {getUid, isGroundPolylinePrimitiveSupported} from './util.js';\n\nclass FeatureConverter {\n  /**\n   * Concrete base class for converting from OpenLayers3 vectors to Cesium\n   * primitives.\n   * Extending this class is possible provided that the extending class and\n   * the library are compiled together by the closure compiler.\n   * @param {!Cesium.Scene} scene Cesium scene.\n   * @constructor\n   * @api\n   */\n  constructor(scene) {\n\n    /**\n     * @protected\n     */\n    this.scene = scene;\n\n    /**\n     * Bind once to have a unique function for using as a listener\n     * @type {function(ol.source.Vector.Event)}\n     * @private\n     */\n    this.boundOnRemoveOrClearFeatureListener_ = this.onRemoveOrClearFeature_.bind(this);\n\n    /**\n     * @type {Cesium.Cartesian3}\n     * @private\n     */\n    this.defaultBillboardEyeOffset_ = new Cesium.Cartesian3(0, 0, 10);\n  }\n\n  /**\n   * @param {ol.source.Vector.Event} evt\n   * @private\n   */\n  onRemoveOrClearFeature_(evt) {\n    const source = evt.target;\n    console.assert(source instanceof olSourceVector);\n\n    const cancellers = olcsUtil.obj(source)['olcs_cancellers'];\n    if (cancellers) {\n      const feature = evt.feature;\n      if (feature) {\n        // remove\n        const id = getUid(feature);\n        const canceller = cancellers[id];\n        if (canceller) {\n          canceller();\n          delete cancellers[id];\n        }\n      } else {\n        // clear\n        for (const key in cancellers) {\n          if (cancellers.hasOwnProperty(key)) {\n            cancellers[key]();\n          }\n        }\n        olcsUtil.obj(source)['olcs_cancellers'] = {};\n      }\n    }\n  }\n\n  /**\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature.\n   * @param {!Cesium.Primitive|Cesium.Label|Cesium.Billboard} primitive\n   * @protected\n   */\n  setReferenceForPicking(layer, feature, primitive) {\n    primitive.olLayer = layer;\n    primitive.olFeature = feature;\n  }\n\n  /**\n   * Basics primitive creation using a color attribute.\n   * Note that Cesium has 'interior' and outline geometries.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature.\n   * @param {!ol.geom.Geometry} olGeometry OpenLayers geometry.\n   * @param {!Cesium.Geometry} geometry\n   * @param {!Cesium.Color} color\n   * @param {number=} opt_lineWidth\n   * @return {Cesium.Primitive}\n   * @protected\n   */\n  createColoredPrimitive(layer, feature, olGeometry, geometry, color, opt_lineWidth) {\n    const createInstance = function(geometry, color) {\n      const instance = new Cesium.GeometryInstance({\n        // always update Cesium externs before adding a property\n        geometry\n      });\n      if (color && !(color instanceof Cesium.ImageMaterialProperty)) {\n        instance.attributes = {\n          color: Cesium.ColorGeometryInstanceAttribute.fromColor(color)\n        };\n      }\n      return instance;\n    };\n\n    const options = {\n      // always update Cesium externs before adding a property\n      flat: true, // work with all geometries\n      renderState: {\n        depthTest: {\n          enabled: true\n        }\n      }\n    };\n\n    if (opt_lineWidth !== undefined) {\n      if (!options.renderState) {\n        options.renderState = {};\n      }\n      options.renderState.lineWidth = opt_lineWidth;\n    }\n\n    const instances = createInstance(geometry, color);\n\n    const heightReference = this.getHeightReference(layer, feature, olGeometry);\n\n    let primitive;\n\n    if (heightReference === Cesium.HeightReference.CLAMP_TO_GROUND) {\n      const ctor = instances.geometry.constructor;\n      if (ctor && !ctor['createShadowVolume']) {\n        return null;\n      }\n      primitive = new Cesium.GroundPrimitive({\n        geometryInstances: instances\n      });\n    } else {\n      primitive = new Cesium.Primitive({\n        geometryInstances: instances\n      });\n    }\n\n    if (color instanceof Cesium.ImageMaterialProperty) {\n      const dataUri = color.image.getValue().toDataURL();\n\n      primitive.appearance = new Cesium.MaterialAppearance({\n        flat: true,\n        renderState: {\n          depthTest: {\n            enabled: true\n          }\n        },\n        material: new Cesium.Material({\n          fabric: {\n            type: 'Image',\n            uniforms: {\n              image: dataUri\n            }\n          }\n        })\n      });\n    } else {\n      primitive.appearance = new Cesium.PerInstanceColorAppearance(options);\n    }\n\n    this.setReferenceForPicking(layer, feature, primitive);\n    return primitive;\n  }\n\n  /**\n   * Return the fill or stroke color from a plain ol style.\n   * @param {!ol.style.Style|ol.style.Text} style\n   * @param {boolean} outline\n   * @return {!Cesium.Color}\n   * @protected\n   */\n  extractColorFromOlStyle(style, outline) {\n    const fillColor = style.getFill() ? style.getFill().getColor() : null;\n    const strokeColor = style.getStroke() ? style.getStroke().getColor() : null;\n\n    let olColor = 'black';\n    if (strokeColor && outline) {\n      olColor = strokeColor;\n    } else if (fillColor) {\n      olColor = fillColor;\n    }\n\n    return olcsCore.convertColorToCesium(olColor);\n  }\n\n  /**\n   * Return the width of stroke from a plain ol style.\n   * @param {!ol.style.Style|ol.style.Text} style\n   * @return {number}\n   * @protected\n   */\n  extractLineWidthFromOlStyle(style) {\n    // Handling of line width WebGL limitations is handled by Cesium.\n    const width = style.getStroke() ? style.getStroke().getWidth() : undefined;\n    return width !== undefined ? width : 1;\n  }\n\n  /**\n   * Create a primitive collection out of two Cesium geometries.\n   * Only the OpenLayers style colors will be used.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature.\n   * @param {!ol.geom.Geometry} olGeometry OpenLayers geometry.\n   * @param {!Cesium.Geometry} fillGeometry\n   * @param {!Cesium.Geometry} outlineGeometry\n   * @param {!ol.style.Style} olStyle\n   * @return {!Cesium.PrimitiveCollection}\n   * @protected\n   */\n  wrapFillAndOutlineGeometries(layer, feature, olGeometry, fillGeometry, outlineGeometry, olStyle) {\n    const fillColor = this.extractColorFromOlStyle(olStyle, false);\n    const outlineColor = this.extractColorFromOlStyle(olStyle, true);\n\n    const primitives = new Cesium.PrimitiveCollection();\n    if (olStyle.getFill()) {\n      const p1 = this.createColoredPrimitive(layer, feature, olGeometry,\n          fillGeometry, fillColor);\n      console.assert(!!p1);\n      primitives.add(p1);\n    }\n\n    if (olStyle.getStroke() && outlineGeometry) {\n      const width = this.extractLineWidthFromOlStyle(olStyle);\n      const p2 = this.createColoredPrimitive(layer, feature, olGeometry,\n          outlineGeometry, outlineColor, width);\n      if (p2) {\n        // Some outline geometries are not supported by Cesium in clamp to ground\n        // mode. These primitives are skipped.\n        primitives.add(p2);\n      }\n    }\n\n    return primitives;\n  }\n\n  // Geometry converters\n  /**\n   * Create a Cesium primitive if style has a text component.\n   * Eventually return a PrimitiveCollection including current primitive.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Geometry} geometry\n   * @param {!ol.style.Style} style\n   * @param {!Cesium.Primitive} primitive current primitive\n   * @return {!Cesium.PrimitiveCollection}\n   * @protected\n   */\n  addTextStyle(layer, feature, geometry, style, primitive) {\n    let primitives;\n    if (!(primitive instanceof Cesium.PrimitiveCollection)) {\n      primitives = new Cesium.PrimitiveCollection();\n      primitives.add(primitive);\n    } else {\n      primitives = primitive;\n    }\n\n    if (!style.getText()) {\n      return primitives;\n    }\n\n    const text = /** @type {!ol.style.Text} */ (style.getText());\n    const label = this.olGeometry4326TextPartToCesium(layer, feature, geometry,\n        text);\n    if (label) {\n      primitives.add(label);\n    }\n    return primitives;\n  }\n\n  /**\n   * Add a billboard to a Cesium.BillboardCollection.\n   * Overriding this wrapper allows manipulating the billboard options.\n   * @param {!Cesium.BillboardCollection} billboards\n   * @param {!Cesium.optionsBillboardCollectionAdd} bbOptions\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature.\n   * @param {!ol.geom.Geometry} geometry\n   * @param {!ol.style.Style} style\n   * @return {!Cesium.Billboard} newly created billboard\n   * @api\n   */\n  csAddBillboard(billboards, bbOptions, layer, feature, geometry, style) {\n    if (!bbOptions.eyeOffset) {\n      bbOptions.eyeOffset = this.defaultBillboardEyeOffset_;\n    }\n    const bb = billboards.add(bbOptions);\n    this.setReferenceForPicking(layer, feature, bb);\n    return bb;\n  }\n\n  /**\n   * Convert an OpenLayers circle geometry to Cesium.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Circle} olGeometry OpenLayers circle geometry.\n   * @param {!ol.ProjectionLike} projection\n   * @param {!ol.style.Style} olStyle\n   * @return {!Cesium.PrimitiveCollection} primitives\n   * @api\n   */\n  olCircleGeometryToCesium(layer, feature, olGeometry, projection, olStyle) {\n\n    olGeometry = olcsCore.olGeometryCloneTo4326(olGeometry, projection);\n    console.assert(olGeometry.getType() == 'Circle');\n\n    // ol.Coordinate\n    let center = olGeometry.getCenter();\n    const height = center.length == 3 ? center[2] : 0.0;\n    let point = center.slice();\n    point[0] += olGeometry.getRadius();\n\n    // Cesium\n    center = olcsCore.ol4326CoordinateToCesiumCartesian(center);\n    point = olcsCore.ol4326CoordinateToCesiumCartesian(point);\n\n    // Accurate computation of straight distance\n    const radius = Cesium.Cartesian3.distance(center, point);\n\n    const fillGeometry = new Cesium.CircleGeometry({\n      // always update Cesium externs before adding a property\n      center,\n      radius,\n      height\n    });\n\n    let outlinePrimitive, outlineGeometry;\n    if (this.getHeightReference(layer, feature, olGeometry) === Cesium.HeightReference.CLAMP_TO_GROUND) {\n      const width = this.extractLineWidthFromOlStyle(olStyle);\n      if (width) {\n        const circlePolygon = olCreateCircularPolygon(olGeometry.getCenter(), radius);\n        const positions = olcsCore.ol4326CoordinateArrayToCsCartesians(circlePolygon.getLinearRing(0).getCoordinates());\n        if (!isGroundPolylinePrimitiveSupported(this.scene)) {\n          const color = this.extractColorFromOlStyle(olStyle, true);\n          outlinePrimitive = this.createStackedGroundCorridors(layer, feature, width, color, positions);\n        } else {\n          outlinePrimitive = new Cesium.GroundPolylinePrimitive({\n            geometryInstances: new Cesium.GeometryInstance({\n              geometry: new Cesium.GroundPolylineGeometry({positions, width}),\n            }),\n            appearance: new Cesium.PolylineMaterialAppearance({\n              material: this.olStyleToCesium(feature, olStyle, true),\n            }),\n            classificationType: Cesium.ClassificationType.TERRAIN,\n          });\n          outlinePrimitive.readyPromise.then(() => {\n            this.setReferenceForPicking(layer, feature, outlinePrimitive._primitive);\n          });\n        }\n      }\n    } else {\n      outlineGeometry = new Cesium.CircleOutlineGeometry({\n        // always update Cesium externs before adding a property\n        center,\n        radius,\n        extrudedHeight: height,\n        height\n      });\n    }\n\n    const primitives = this.wrapFillAndOutlineGeometries(\n        layer, feature, olGeometry, fillGeometry, outlineGeometry, olStyle);\n\n    if (outlinePrimitive) {\n      primitives.add(outlinePrimitive);\n    }\n    return this.addTextStyle(layer, feature, olGeometry, olStyle, primitives);\n  }\n\n  /**\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!number} width The width of the line.\n   * @param {!Cesium.Color} color The color of the line.\n   * @param {!Array<Cesium.Cartesian3>|Array<Array<Cesium.Cartesian3>>} positions The vertices of the line(s).\n   * @return {!Cesium.GroundPrimitive} primitive\n   */\n  createStackedGroundCorridors(layer, feature, width, color, positions) {\n    // Convert positions to an Array if it isn't\n    if (!Array.isArray(positions[0])) {\n      positions = [positions];\n    }\n    width = Math.max(3, width); // A <3px width is too small for ground primitives\n    const geometryInstances = [];\n    let previousDistance = 0;\n    // A stack of ground lines with increasing width (in meters) are created.\n    // Only one of these lines is displayed at any time giving a feeling of continuity.\n    // The values for the distance and width factor are more or less arbitrary.\n    // Applications can override this logics by subclassing the FeatureConverter class.\n    for (const distance of [1000, 4000, 16000, 64000, 254000, 1000000, 10000000]) {\n      width *= 2.14;\n      const geometryOptions = {\n        // always update Cesium externs before adding a property\n        width,\n        vertexFormat: Cesium.VertexFormat.POSITION_ONLY\n      };\n      for (const linePositions of positions) {\n        geometryOptions.positions = linePositions;\n        geometryInstances.push(new Cesium.GeometryInstance({\n          geometry: new Cesium.CorridorGeometry(geometryOptions),\n          attributes: {\n            color: Cesium.ColorGeometryInstanceAttribute.fromColor(color),\n            distanceDisplayCondition: new Cesium.DistanceDisplayConditionGeometryInstanceAttribute(previousDistance, distance - 1)\n          }\n        }));\n      }\n      previousDistance = distance;\n    }\n    return new Cesium.GroundPrimitive({\n      // always update Cesium externs before adding a property\n      geometryInstances\n    });\n  }\n\n  /**\n   * Convert an OpenLayers line string geometry to Cesium.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.LineString} olGeometry OpenLayers line string geometry.\n   * @param {!ol.ProjectionLike} projection\n   * @param {!ol.style.Style} olStyle\n   * @return {!Cesium.PrimitiveCollection} primitives\n   * @api\n   */\n  olLineStringGeometryToCesium(layer, feature, olGeometry, projection, olStyle) {\n\n    olGeometry = olcsCore.olGeometryCloneTo4326(olGeometry, projection);\n    console.assert(olGeometry.getType() == 'LineString');\n\n    const positions = olcsCore.ol4326CoordinateArrayToCsCartesians(olGeometry.getCoordinates());\n    const width = this.extractLineWidthFromOlStyle(olStyle);\n\n    let outlinePrimitive;\n    const heightReference = this.getHeightReference(layer, feature, olGeometry);\n\n    if (heightReference === Cesium.HeightReference.CLAMP_TO_GROUND && !isGroundPolylinePrimitiveSupported(this.scene)) {\n      const color = this.extractColorFromOlStyle(olStyle, true);\n      outlinePrimitive = this.createStackedGroundCorridors(layer, feature, width, color, positions);\n    } else {\n      const appearance = new Cesium.PolylineMaterialAppearance({\n        // always update Cesium externs before adding a property\n        material: this.olStyleToCesium(feature, olStyle, true)\n      });\n      const geometryOptions = {\n        // always update Cesium externs before adding a property\n        positions,\n        width,\n      };\n      const primitiveOptions = {\n        // always update Cesium externs before adding a property\n        appearance\n      };\n      if (heightReference === Cesium.HeightReference.CLAMP_TO_GROUND) {\n        const geometry = new Cesium.GroundPolylineGeometry(geometryOptions);\n        primitiveOptions.geometryInstances = new Cesium.GeometryInstance({\n          geometry\n        }),\n        outlinePrimitive = new Cesium.GroundPolylinePrimitive(primitiveOptions);\n        outlinePrimitive.readyPromise.then(() => {\n          this.setReferenceForPicking(layer, feature, outlinePrimitive._primitive);\n        });\n      } else {\n        geometryOptions.vertexFormat = appearance.vertexFormat;\n        const geometry = new Cesium.PolylineGeometry(geometryOptions);\n        primitiveOptions.geometryInstances = new Cesium.GeometryInstance({\n          geometry\n        }),\n        outlinePrimitive = new Cesium.Primitive(primitiveOptions);\n      }\n    }\n\n    this.setReferenceForPicking(layer, feature, outlinePrimitive);\n\n    return this.addTextStyle(layer, feature, olGeometry, olStyle, outlinePrimitive);\n  }\n\n  /**\n   * Convert an OpenLayers polygon geometry to Cesium.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Polygon} olGeometry OpenLayers polygon geometry.\n   * @param {!ol.ProjectionLike} projection\n   * @param {!ol.style.Style} olStyle\n   * @return {!Cesium.PrimitiveCollection} primitives\n   * @api\n   */\n  olPolygonGeometryToCesium(layer, feature, olGeometry, projection, olStyle) {\n\n    olGeometry = olcsCore.olGeometryCloneTo4326(olGeometry, projection);\n    console.assert(olGeometry.getType() == 'Polygon');\n\n    const heightReference = this.getHeightReference(layer, feature, olGeometry);\n\n    let fillGeometry, outlineGeometry, outlinePrimitive;\n    if ((olGeometry.getCoordinates()[0].length == 5) &&\n        (feature.getGeometry().get('olcs.polygon_kind') === 'rectangle')) {\n      // Create a rectangle according to the longitude and latitude curves\n      const coordinates = olGeometry.getCoordinates()[0];\n      // Extract the West, South, East, North coordinates\n      const extent = boundingExtent(coordinates);\n      const rectangle = Cesium.Rectangle.fromDegrees(extent[0], extent[1],\n          extent[2], extent[3]);\n\n      // Extract the average height of the vertices\n      let maxHeight = 0.0;\n      if (coordinates[0].length == 3) {\n        for (let c = 0; c < coordinates.length; c++) {\n          maxHeight = Math.max(maxHeight, coordinates[c][2]);\n        }\n      }\n\n      // Render the cartographic rectangle\n      fillGeometry = new Cesium.RectangleGeometry({\n        ellipsoid: Cesium.Ellipsoid.WGS84,\n        rectangle,\n        height: maxHeight\n      });\n\n      outlineGeometry = new Cesium.RectangleOutlineGeometry({\n        ellipsoid: Cesium.Ellipsoid.WGS84,\n        rectangle,\n        height: maxHeight\n      });\n    } else {\n      const rings = olGeometry.getLinearRings();\n      // always update Cesium externs before adding a property\n      const hierarchy = {};\n      const polygonHierarchy = hierarchy;\n      console.assert(rings.length > 0);\n\n      for (let i = 0; i < rings.length; ++i) {\n        const olPos = rings[i].getCoordinates();\n        const positions = olcsCore.ol4326CoordinateArrayToCsCartesians(olPos);\n        console.assert(positions && positions.length > 0);\n        if (i == 0) {\n          hierarchy.positions = positions;\n        } else {\n          if (!hierarchy.holes) {\n            hierarchy.holes = [];\n          }\n          hierarchy.holes.push({\n            positions\n          });\n        }\n      }\n\n      fillGeometry = new Cesium.PolygonGeometry({\n        // always update Cesium externs before adding a property\n        polygonHierarchy,\n        perPositionHeight: true\n      });\n\n      // Since Cesium doesn't yet support Polygon outlines on terrain yet (coming soon...?)\n      // we don't create an outline geometry if clamped, but instead do the polyline method\n      // for each ring. Most of this code should be removeable when Cesium adds\n      // support for Polygon outlines on terrain.\n      if (heightReference === Cesium.HeightReference.CLAMP_TO_GROUND) {\n        const width = this.extractLineWidthFromOlStyle(olStyle);\n        if (width > 0) {\n          const positions = [hierarchy.positions];\n          if (hierarchy.holes) {\n            for (let i = 0; i < hierarchy.holes.length; ++i) {\n              positions.push(hierarchy.holes[i].positions);\n            }\n          }\n          if (!isGroundPolylinePrimitiveSupported(this.scene)) {\n            const color = this.extractColorFromOlStyle(olStyle, true);\n            outlinePrimitive = this.createStackedGroundCorridors(layer, feature, width, color, positions);\n          } else {\n            const appearance = new Cesium.PolylineMaterialAppearance({\n              // always update Cesium externs before adding a property\n              material: this.olStyleToCesium(feature, olStyle, true)\n            });\n            const geometryInstances = [];\n            for (const linePositions of positions) {\n              const polylineGeometry = new Cesium.GroundPolylineGeometry({positions: linePositions, width});\n              geometryInstances.push(new Cesium.GeometryInstance({\n                geometry: polylineGeometry\n              }));\n            }\n            const primitiveOptions = {\n              // always update Cesium externs before adding a property\n              appearance,\n              geometryInstances\n            };\n            outlinePrimitive = new Cesium.GroundPolylinePrimitive(primitiveOptions);\n            outlinePrimitive.readyPromise.then(() => {\n              this.setReferenceForPicking(layer, feature, outlinePrimitive._primitive);\n            });\n          }\n        }\n      } else {\n        // Actually do the normal polygon thing. This should end the removable\n        // section of code described above.\n        outlineGeometry = new Cesium.PolygonOutlineGeometry({\n          // always update Cesium externs before adding a property\n          polygonHierarchy: hierarchy,\n          perPositionHeight: true\n        });\n      }\n    }\n\n    const primitives = this.wrapFillAndOutlineGeometries(\n        layer, feature, olGeometry, fillGeometry, outlineGeometry, olStyle);\n\n    if (outlinePrimitive) {\n      primitives.add(outlinePrimitive);\n    }\n\n    return this.addTextStyle(layer, feature, olGeometry, olStyle, primitives);\n  }\n\n  /**\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Geometry} geometry\n   * @return {!Cesium.HeightReference}\n   * @api\n   */\n  getHeightReference(layer, feature, geometry) {\n\n    // Read from the geometry\n    let altitudeMode = geometry.get('altitudeMode');\n\n    // Or from the feature\n    if (altitudeMode === undefined) {\n      altitudeMode = feature.get('altitudeMode');\n    }\n\n    // Or from the layer\n    if (altitudeMode === undefined) {\n      altitudeMode = layer.get('altitudeMode');\n    }\n\n    let heightReference = Cesium.HeightReference.NONE;\n    if (altitudeMode === 'clampToGround') {\n      heightReference = Cesium.HeightReference.CLAMP_TO_GROUND;\n    } else if (altitudeMode === 'relativeToGround') {\n      heightReference = Cesium.HeightReference.RELATIVE_TO_GROUND;\n    }\n\n    return heightReference;\n  }\n\n  /**\n   * Convert a point geometry to a Cesium BillboardCollection.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Point} olGeometry OpenLayers point geometry.\n   * @param {!ol.ProjectionLike} projection\n   * @param {!ol.style.Style} style\n   * @param {!ol.style.Image} imageStyle\n   * @param {!Cesium.BillboardCollection} billboards\n   * @param {function(!Cesium.Billboard)=} opt_newBillboardCallback Called when the new billboard is added.\n   * @api\n   */\n  createBillboardFromImage(\n      layer,\n      feature,\n      olGeometry,\n      projection,\n      style,\n      imageStyle,\n      billboards,\n      opt_newBillboardCallback\n  ) {\n\n    if (imageStyle instanceof olStyleIcon) {\n      // make sure the image is scheduled for load\n      imageStyle.load();\n    }\n\n    const image = imageStyle.getImage(1); // get normal density\n    const isImageLoaded = function(image) {\n      return image.src != '' &&\n          image.naturalHeight != 0 &&\n          image.naturalWidth != 0 &&\n          image.complete;\n    };\n    const reallyCreateBillboard = (function() {\n      if (!image) {\n        return;\n      }\n      if (!(image instanceof HTMLCanvasElement ||\n          image instanceof Image ||\n          image instanceof HTMLImageElement)) {\n        return;\n      }\n      const center = olGeometry.getCoordinates();\n      const position = olcsCore.ol4326CoordinateToCesiumCartesian(center);\n      let color;\n      const opacity = imageStyle.getOpacity();\n      if (opacity !== undefined) {\n        color = new Cesium.Color(1.0, 1.0, 1.0, opacity);\n      }\n\n      const heightReference = this.getHeightReference(layer, feature, olGeometry);\n\n      const bbOptions = /** @type {Cesium.optionsBillboardCollectionAdd} */ ({\n        // always update Cesium externs before adding a property\n        image,\n        color,\n        scale: imageStyle.getScale(),\n        heightReference,\n        position\n      });\n\n      if (imageStyle instanceof olStyleIcon) {\n        const anchor = imageStyle.getAnchor();\n        if (anchor) {\n          bbOptions.pixelOffset = new Cesium.Cartesian2(image.width / 2 - anchor[0], image.height / 2 - anchor[1]);\n        }\n      }\n\n      const bb = this.csAddBillboard(billboards, bbOptions, layer, feature, olGeometry, style);\n      if (opt_newBillboardCallback) {\n        opt_newBillboardCallback(bb);\n      }\n    }).bind(this);\n\n    if (image instanceof Image && !isImageLoaded(image)) {\n      // Cesium requires the image to be loaded\n      let cancelled = false;\n      const source = layer.getSource();\n      const canceller = function() {\n        cancelled = true;\n      };\n      source.on(['removefeature', 'clear'],\n          this.boundOnRemoveOrClearFeatureListener_);\n      let cancellers = olcsUtil.obj(source)['olcs_cancellers'];\n      if (!cancellers) {\n        cancellers = olcsUtil.obj(source)['olcs_cancellers'] = {};\n      }\n\n      const fuid = getUid(feature);\n      if (cancellers[fuid]) {\n        // When the feature change quickly, a canceller may still be present so\n        // we cancel it here to prevent creation of a billboard.\n        cancellers[fuid]();\n      }\n      cancellers[fuid] = canceller;\n\n      const listener = function() {\n        image.removeEventListener('load', listener);\n        if (!billboards.isDestroyed() && !cancelled) {\n          // Create billboard if the feature is still displayed on the map.\n          reallyCreateBillboard();\n        }\n      };\n\n      image.addEventListener('load', listener);\n    } else {\n      reallyCreateBillboard();\n    }\n  }\n\n  /**\n   * Convert a point geometry to a Cesium BillboardCollection.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Point} olGeometry OpenLayers point geometry.\n   * @param {!ol.ProjectionLike} projection\n   * @param {!ol.style.Style} style\n   * @param {!Cesium.BillboardCollection} billboards\n   * @param {function(!Cesium.Billboard)=} opt_newBillboardCallback Called when\n   * the new billboard is added.\n   * @return {Cesium.Primitive} primitives\n   * @api\n   */\n  olPointGeometryToCesium(\n      layer,\n      feature,\n      olGeometry,\n      projection,\n      style,\n      billboards,\n      opt_newBillboardCallback\n  ) {\n    console.assert(olGeometry.getType() == 'Point');\n    olGeometry = olcsCore.olGeometryCloneTo4326(olGeometry, projection);\n\n    let modelPrimitive = null;\n    const imageStyle = style.getImage();\n    if (imageStyle) {\n      const olcsModelFunction = /** @type {function():olcsx.ModelStyle} */ (olGeometry.get('olcs_model') || feature.get('olcs_model'));\n      if (olcsModelFunction) {\n        const olcsModel = olcsModelFunction();\n        const options = /** @type {Cesium.ModelFromGltfOptions} */ (Object.assign({}, {scene: this.scene}, olcsModel.cesiumOptions));\n        const model = Cesium.Model.fromGltf(options);\n        modelPrimitive = new Cesium.PrimitiveCollection();\n        modelPrimitive.add(model);\n        if (olcsModel.debugModelMatrix) {\n          modelPrimitive.add(new Cesium.DebugModelMatrixPrimitive({\n            modelMatrix: olcsModel.debugModelMatrix\n          }));\n        }\n      } else {\n        this.createBillboardFromImage(layer, feature, olGeometry, projection, style, imageStyle, billboards, opt_newBillboardCallback);\n      }\n    }\n\n    if (style.getText()) {\n      return this.addTextStyle(layer, feature, olGeometry, style, modelPrimitive || new Cesium.Primitive());\n    } else {\n      return modelPrimitive;\n    }\n  }\n\n  /**\n   * Convert an OpenLayers multi-something geometry to Cesium.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Geometry} geometry OpenLayers geometry.\n   * @param {!ol.ProjectionLike} projection\n   * @param {!ol.style.Style} olStyle\n   * @param {!Cesium.BillboardCollection} billboards\n   * @param {function(!Cesium.Billboard)=} opt_newBillboardCallback Called when\n   * the new billboard is added.\n   * @return {Cesium.Primitive} primitives\n   * @api\n   */\n  olMultiGeometryToCesium(\n      layer,\n      feature,\n      geometry,\n      projection,\n      olStyle,\n      billboards,\n      opt_newBillboardCallback\n  ) {\n    // Do not reproject to 4326 now because it will be done later.\n\n    // FIXME: would be better to combine all child geometries in one primitive\n    // instead we create n primitives for simplicity.\n    const accumulate = function(geometries, functor) {\n      const primitives = new Cesium.PrimitiveCollection();\n      geometries.forEach((geometry) => {\n        primitives.add(functor(layer, feature, geometry, projection, olStyle));\n      });\n      return primitives;\n    };\n\n    let subgeos;\n    switch (geometry.getType()) {\n      case 'MultiPoint':\n        geometry = /** @type {!ol.geom.MultiPoint} */ (geometry);\n        subgeos = geometry.getPoints();\n        if (olStyle.getText()) {\n          const primitives = new Cesium.PrimitiveCollection();\n          subgeos.forEach((geometry) => {\n            console.assert(geometry);\n            const result = this.olPointGeometryToCesium(layer, feature, geometry,\n                projection, olStyle, billboards, opt_newBillboardCallback);\n            if (result) {\n              primitives.add(result);\n            }\n          });\n          return primitives;\n        } else {\n          subgeos.forEach((geometry) => {\n            console.assert(geometry);\n            this.olPointGeometryToCesium(layer, feature, geometry, projection,\n                olStyle, billboards, opt_newBillboardCallback);\n          });\n          return null;\n        }\n      case 'MultiLineString':\n        geometry = /** @type {!ol.geom.MultiLineString} */ (geometry);\n        subgeos = geometry.getLineStrings();\n        return accumulate(subgeos, this.olLineStringGeometryToCesium.bind(this));\n      case 'MultiPolygon':\n        geometry = /** @type {!ol.geom.MultiPolygon} */ (geometry);\n        subgeos = geometry.getPolygons();\n        return accumulate(subgeos, this.olPolygonGeometryToCesium.bind(this));\n      default:\n        console.assert(false, `Unhandled multi geometry type${geometry.getType()}`);\n    }\n  }\n\n  /**\n   * Convert an OpenLayers text style to Cesium.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature..\n   * @param {!ol.geom.Geometry} geometry\n   * @param {!ol.style.Text} style\n   * @return {Cesium.LabelCollection} Cesium primitive\n   * @api\n   */\n  olGeometry4326TextPartToCesium(layer, feature, geometry, style) {\n    const text = style.getText();\n    if (!text) {\n      return null;\n    }\n\n    const labels = new Cesium.LabelCollection({scene: this.scene});\n    // TODO: export and use the text draw position from OpenLayers .\n    // See src/ol/render/vector.js\n    const extentCenter = getCenter(geometry.getExtent());\n    if (geometry instanceof olGeomSimpleGeometry) {\n      const first = geometry.getFirstCoordinate();\n      extentCenter[2] = first.length == 3 ? first[2] : 0.0;\n    }\n    const options = /** @type {Cesium.optionsLabelCollection} */ ({});\n\n    options.position = olcsCore.ol4326CoordinateToCesiumCartesian(extentCenter);\n\n    options.text = text;\n\n    options.heightReference = this.getHeightReference(layer, feature, geometry);\n\n    const offsetX = style.getOffsetX();\n    const offsetY = style.getOffsetY();\n    if (offsetX != 0 && offsetY != 0) {\n      const offset = new Cesium.Cartesian2(offsetX, offsetY);\n      options.pixelOffset = offset;\n    }\n\n    options.font = style.getFont() || '10px sans-serif'; // OpenLayers default\n\n    let labelStyle = undefined;\n    if (style.getFill()) {\n      options.fillColor = this.extractColorFromOlStyle(style, false);\n      labelStyle = Cesium.LabelStyle.FILL;\n    }\n    if (style.getStroke()) {\n      options.outlineWidth = this.extractLineWidthFromOlStyle(style);\n      options.outlineColor = this.extractColorFromOlStyle(style, true);\n      labelStyle = Cesium.LabelStyle.OUTLINE;\n    }\n    if (style.getFill() && style.getStroke()) {\n      labelStyle = Cesium.LabelStyle.FILL_AND_OUTLINE;\n    }\n    options.style = labelStyle;\n\n    let horizontalOrigin;\n    switch (style.getTextAlign()) {\n      case 'left':\n        horizontalOrigin = Cesium.HorizontalOrigin.LEFT;\n        break;\n      case 'right':\n        horizontalOrigin = Cesium.HorizontalOrigin.RIGHT;\n        break;\n      case 'center':\n      default:\n        horizontalOrigin = Cesium.HorizontalOrigin.CENTER;\n    }\n    options.horizontalOrigin = horizontalOrigin;\n\n    if (style.getTextBaseline()) {\n      let verticalOrigin;\n      switch (style.getTextBaseline()) {\n        case 'top':\n          verticalOrigin = Cesium.VerticalOrigin.TOP;\n          break;\n        case 'middle':\n          verticalOrigin = Cesium.VerticalOrigin.CENTER;\n          break;\n        case 'bottom':\n          verticalOrigin = Cesium.VerticalOrigin.BOTTOM;\n          break;\n        case 'alphabetic':\n          verticalOrigin = Cesium.VerticalOrigin.TOP;\n          break;\n        case 'hanging':\n          verticalOrigin = Cesium.VerticalOrigin.BOTTOM;\n          break;\n        default:\n          console.assert(false, `unhandled baseline ${style.getTextBaseline()}`);\n      }\n      options.verticalOrigin = verticalOrigin;\n    }\n\n\n    const l = labels.add(options);\n    this.setReferenceForPicking(layer, feature, l);\n    return labels;\n  }\n\n  /**\n   * Convert an OpenLayers style to a Cesium Material.\n   * @param {ol.Feature} feature OpenLayers feature..\n   * @param {!ol.style.Style} style\n   * @param {boolean} outline\n   * @return {Cesium.Material}\n   * @api\n   */\n  olStyleToCesium(feature, style, outline) {\n    const fill = style.getFill();\n    const stroke = style.getStroke();\n    if ((outline && !stroke) || (!outline && !fill)) {\n      return null; // FIXME use a default style? Developer error?\n    }\n\n    let color = outline ? stroke.getColor() : fill.getColor();\n    color = olcsCore.convertColorToCesium(color);\n\n    if (outline && stroke.getLineDash()) {\n      return Cesium.Material.fromType('Stripe', {\n        // always update Cesium externs before adding a property\n        horizontal: false,\n        repeat: 500, // TODO how to calculate this?\n        evenColor: color,\n        oddColor: new Cesium.Color(0, 0, 0, 0) // transparent\n      });\n    } else {\n      return Cesium.Material.fromType('Color', {\n        // always update Cesium externs before adding a property\n        color\n      });\n    }\n\n  }\n\n  /**\n   * Compute OpenLayers plain style.\n   * Evaluates style function, blend arrays, get default style.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature\n   * @param {ol.StyleFunction|undefined} fallbackStyleFunction\n   * @param {number} resolution\n   * @return {Array.<!ol.style.Style>} null if no style is available\n   * @api\n   */\n  computePlainStyle(layer, feature, fallbackStyleFunction, resolution) {\n    /**\n     * @type {ol.FeatureStyleFunction|undefined}\n     */\n    const featureStyleFunction = feature.getStyleFunction();\n\n    /**\n     * @type {ol.style.Style|Array.<ol.style.Style>}\n     */\n    let style = null;\n\n    if (featureStyleFunction) {\n      style = featureStyleFunction(feature, resolution);\n    }\n\n    if (!style && fallbackStyleFunction) {\n      style = fallbackStyleFunction(feature, resolution);\n    }\n\n    if (!style) {\n      // The feature must not be displayed\n      return null;\n    }\n\n    // FIXME combine materials as in cesium-materials-pack?\n    // then this function must return a custom material\n    // More simply, could blend the colors like described in\n    // http://en.wikipedia.org/wiki/Alpha_compositing\n    return Array.isArray(style) ? style : [style];\n  }\n\n  /**\n   * @protected\n   * @param {!ol.Feature} feature\n   * @param {!ol.style.Style} style\n   * @param {!ol.geom.Geometry=} opt_geom Geometry to be converted.\n   * @return {ol.geom.Geometry|undefined}\n   */\n  getGeometryFromFeature(feature, style, opt_geom) {\n    if (opt_geom) {\n      return opt_geom;\n    }\n\n    const geom3d = /** @type {!ol.geom.Geometry} */(feature.get('olcs.3d_geometry'));\n    if (geom3d && geom3d instanceof olGeomGeometry) {\n      return geom3d;\n    }\n\n    if (style) {\n      const geomFuncRes = style.getGeometryFunction()(feature);\n      if (geomFuncRes instanceof olGeomGeometry) {\n        return geomFuncRes;\n      }\n    }\n\n    return feature.getGeometry();\n  }\n\n  /**\n   * Convert one OpenLayers feature up to a collection of Cesium primitives.\n   * @param {ol.layer.Vector|ol.layer.Image} layer\n   * @param {!ol.Feature} feature OpenLayers feature.\n   * @param {!ol.style.Style} style\n   * @param {!olcsx.core.OlFeatureToCesiumContext} context\n   * @param {!ol.geom.Geometry=} opt_geom Geometry to be converted.\n   * @return {Cesium.Primitive} primitives\n   * @api\n   */\n  olFeatureToCesium(layer, feature, style, context, opt_geom) {\n    let geom = this.getGeometryFromFeature(feature, style, opt_geom);\n\n    if (!geom) {\n      // OpenLayers features may not have a geometry\n      // See http://geojson.org/geojson-spec.html#feature-objects\n      return null;\n    }\n\n    const proj = context.projection;\n    const newBillboardAddedCallback = function(bb) {\n      const featureBb = context.featureToCesiumMap[getUid(feature)];\n      if (featureBb instanceof Array) {\n        featureBb.push(bb);\n      }\n      else {\n        context.featureToCesiumMap[getUid(feature)] = [bb];\n      }\n    };\n\n    switch (geom.getType()) {\n      case 'GeometryCollection':\n        const primitives = new Cesium.PrimitiveCollection();\n        const collection = /** @type {!ol.geom.GeometryCollection} */ (geom);\n        // TODO: use getGeometriesArray() instead\n        collection.getGeometries().forEach((geom) => {\n          if (geom) {\n            const prims = this.olFeatureToCesium(layer, feature, style, context,\n                geom);\n            if (prims) {\n              primitives.add(prims);\n            }\n          }\n        });\n        return primitives;\n      case 'Point':\n        geom = /** @type {!ol.geom.Point} */ (geom);\n        const bbs = context.billboards;\n        const result = this.olPointGeometryToCesium(layer, feature, geom, proj,\n            style, bbs, newBillboardAddedCallback);\n        if (!result) {\n          // no wrapping primitive\n          return null;\n        } else {\n          return result;\n        }\n      case 'Circle':\n        geom = /** @type {!ol.geom.Circle} */ (geom);\n        return this.olCircleGeometryToCesium(layer, feature, geom, proj,\n            style);\n      case 'LineString':\n        geom = /** @type {!ol.geom.LineString} */ (geom);\n        return this.olLineStringGeometryToCesium(layer, feature, geom, proj,\n            style);\n      case 'Polygon':\n        geom = /** @type {!ol.geom.Polygon} */ (geom);\n        return this.olPolygonGeometryToCesium(layer, feature, geom, proj,\n            style);\n      case 'MultiPoint':\n      case 'MultiLineString':\n      case 'MultiPolygon':\n        const result2 = this.olMultiGeometryToCesium(layer, feature, geom, proj,\n            style, context.billboards, newBillboardAddedCallback);\n        if (!result2) {\n          // no wrapping primitive\n          return null;\n        } else {\n          return result2;\n        }\n      case 'LinearRing':\n        throw new Error('LinearRing should only be part of polygon.');\n      default:\n        throw new Error(`Ol geom type not handled : ${geom.getType()}`);\n    }\n  }\n\n  /**\n   * Convert an OpenLayers vector layer to Cesium primitive collection.\n   * For each feature, the associated primitive will be stored in\n   * `featurePrimitiveMap`.\n   * @param {!(ol.layer.Vector|ol.layer.Image)} olLayer\n   * @param {!ol.View} olView\n   * @param {!Object.<number, !Cesium.Primitive>} featurePrimitiveMap\n   * @return {!olcs.core.VectorLayerCounterpart}\n   * @api\n   */\n  olVectorLayerToCesium(olLayer, olView, featurePrimitiveMap) {\n    const proj = olView.getProjection();\n    const resolution = olView.getResolution();\n\n    if (resolution === undefined || !proj) {\n      console.assert(false, 'View not ready');\n      // an assertion is not enough for closure to assume resolution and proj\n      // are defined\n      throw new Error('View not ready');\n    }\n\n    let source = olLayer.getSource();\n    if (source instanceof olSourceCluster) {\n      source = source.getSource();\n    }\n\n    console.assert(source instanceof olSourceVector);\n    const features = source.getFeatures();\n    const counterpart = new olcsCoreVectorLayerCounterpart(proj, this.scene);\n    const context = counterpart.context;\n    for (let i = 0; i < features.length; ++i) {\n      const feature = features[i];\n      if (!feature) {\n        continue;\n      }\n      /**\n       * @type {ol.StyleFunction|undefined}\n       */\n      const layerStyle = olLayer.getStyleFunction();\n      const styles = this.computePlainStyle(olLayer, feature, layerStyle,\n          resolution);\n      if (!styles || !styles.length) {\n        // only 'render' features with a style\n        continue;\n      }\n\n      /**\n       * @type {Cesium.Primitive|null}\n       */\n      let primitives = null;\n      for (let i = 0; i < styles.length; i++) {\n        const prims = this.olFeatureToCesium(olLayer, feature, styles[i], context);\n        if (prims) {\n          if (!primitives) {\n            primitives = prims;\n          } else if (prims) {\n            let i = 0, prim;\n            while ((prim = prims.get(i))) {\n              primitives.add(prim);\n              i++;\n            }\n          }\n        }\n      }\n      if (!primitives) {\n        continue;\n      }\n      featurePrimitiveMap[getUid(feature)] = primitives;\n      counterpart.getRootPrimitive().add(primitives);\n    }\n\n    return counterpart;\n  }\n\n  /**\n   * Convert an OpenLayers feature to Cesium primitive collection.\n   * @param {!(ol.layer.Vector|ol.layer.Image)} layer\n   * @param {!ol.View} view\n   * @param {!ol.Feature} feature\n   * @param {!olcsx.core.OlFeatureToCesiumContext} context\n   * @return {Cesium.Primitive}\n   * @api\n   */\n  convert(layer, view, feature, context) {\n    const proj = view.getProjection();\n    const resolution = view.getResolution();\n\n    if (resolution == undefined || !proj) {\n      return null;\n    }\n\n    /**\n     * @type {ol.StyleFunction|undefined}\n     */\n    const layerStyle = layer.getStyleFunction();\n\n    const styles = this.computePlainStyle(layer, feature, layerStyle, resolution);\n\n    if (!styles.length) {\n      // only 'render' features with a style\n      return null;\n    }\n\n    context.projection = proj;\n\n    /**\n     * @type {Cesium.Primitive|null}\n     */\n    let primitives = null;\n    for (let i = 0; i < styles.length; i++) {\n      const prims = this.olFeatureToCesium(layer, feature, styles[i], context);\n      if (!primitives) {\n        primitives = prims;\n      } else if (prims) {\n        let i = 0, prim;\n        while ((prim = prims.get(i))) {\n          primitives.add(prim);\n          i++;\n        }\n      }\n    }\n    return primitives;\n  }\n}\n\n\nexport default FeatureConverter;\n","/**\n * @module olcs.VectorSynchronizer\n */\nimport olSourceVector from 'ol/source/Vector.js';\nimport olLayerLayer from 'ol/layer/Layer.js';\nimport olSourceCluster from 'ol/source/Cluster.js';\nimport olLayerImage from 'ol/layer/Image.js';\nimport {olcsListen, getUid} from './util.js';\nimport olLayerVector from 'ol/layer/Vector.js';\nimport olcsAbstractSynchronizer from './AbstractSynchronizer.js';\nimport olcsFeatureConverter from './FeatureConverter.js';\n\nclass VectorSynchronizer extends olcsAbstractSynchronizer {\n  /**\n   * Unidirectionally synchronize OpenLayers vector layers to Cesium.\n   * @param {!ol.Map} map\n   * @param {!Cesium.Scene} scene\n   * @param {olcs.FeatureConverter=} opt_converter\n   * @extends {olcs.AbstractSynchronizer.<olcs.core.VectorLayerCounterpart>}\n   * @api\n   */\n  constructor(map, scene, opt_converter) {\n    super(map, scene);\n\n    /**\n     * @protected\n     */\n    this.converter = opt_converter || new olcsFeatureConverter(scene);\n\n    /**\n     * @private\n     */\n    this.csAllPrimitives_ = new Cesium.PrimitiveCollection();\n    scene.primitives.add(this.csAllPrimitives_);\n    this.csAllPrimitives_.destroyPrimitives = false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  addCesiumObject(counterpart) {\n    console.assert(counterpart);\n    counterpart.getRootPrimitive()['counterpart'] = counterpart;\n    this.csAllPrimitives_.add(counterpart.getRootPrimitive());\n  }\n\n  /**\n   * @inheritDoc\n   */\n  destroyCesiumObject(object) {\n    object.getRootPrimitive().destroy();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  removeSingleCesiumObject(object, destroy) {\n    object.destroy();\n    this.csAllPrimitives_.destroyPrimitives = destroy;\n    this.csAllPrimitives_.remove(object.getRootPrimitive());\n    this.csAllPrimitives_.destroyPrimitives = false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  removeAllCesiumObjects(destroy) {\n    this.csAllPrimitives_.destroyPrimitives = destroy;\n    if (destroy) {\n      for (let i = 0; i < this.csAllPrimitives_.length; ++i) {\n        this.csAllPrimitives_.get(i)['counterpart'].destroy();\n      }\n    }\n    this.csAllPrimitives_.removeAll();\n    this.csAllPrimitives_.destroyPrimitives = false;\n  }\n\n  /**\n   * Synchronizes the layer visibility properties\n   * to the given Cesium Primitive.\n   * @param {olcsx.LayerWithParents} olLayerWithParents\n   * @param {!Cesium.Primitive} csPrimitive\n   */\n  updateLayerVisibility(olLayerWithParents, csPrimitive) {\n    let visible = true;\n    [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach((olLayer) => {\n      const layerVisible = olLayer.getVisible();\n      if (layerVisible !== undefined) {\n        visible &= layerVisible;\n      } else {\n        visible = false;\n      }\n    });\n    csPrimitive.show = visible;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  createSingleLayerCounterparts(olLayerWithParents) {\n    const olLayer = olLayerWithParents.layer;\n    if (!(olLayer instanceof olLayerVector)) {\n      return null;\n    }\n    console.assert(olLayer instanceof olLayerLayer);\n\n    let source = olLayer.getSource();\n    if (source instanceof olSourceCluster) {\n      source = source.getSource();\n    }\n\n    if (!source) {\n      return null;\n    }\n\n    console.assert(source instanceof olSourceVector);\n    console.assert(this.view);\n\n    const view = this.view;\n    const featurePrimitiveMap = {};\n    const counterpart = this.converter.olVectorLayerToCesium(olLayer, view,\n        featurePrimitiveMap);\n    const csPrimitives = counterpart.getRootPrimitive();\n    const olListenKeys = counterpart.olListenKeys;\n\n    [olLayerWithParents.layer].concat(olLayerWithParents.parents).forEach((olLayerItem) => {\n      olListenKeys.push(olcsListen(olLayerItem, 'change:visible', () => {\n        this.updateLayerVisibility(olLayerWithParents, csPrimitives);\n      }));\n    });\n    this.updateLayerVisibility(olLayerWithParents, csPrimitives);\n\n    const onAddFeature = (function(feature) {\n      console.assert(\n          (olLayer instanceof olLayerVector) ||\n          (olLayer instanceof olLayerImage)\n      );\n      const context = counterpart.context;\n      const prim = this.converter.convert(olLayer, view, feature, context);\n      if (prim) {\n        featurePrimitiveMap[getUid(feature)] = prim;\n        csPrimitives.add(prim);\n      }\n    }).bind(this);\n\n    const onRemoveFeature = (function(feature) {\n      const id = getUid(feature);\n      const context = counterpart.context;\n      const bbs = context.featureToCesiumMap[id];\n      if (bbs) {\n        delete context.featureToCesiumMap[id];\n        bbs.forEach((bb) => {\n          if (bb instanceof Cesium.Billboard) {\n            context.billboards.remove(bb);\n          }\n        });\n      }\n      const csPrimitive = featurePrimitiveMap[id];\n      delete featurePrimitiveMap[id];\n      if (csPrimitive) {\n        csPrimitives.remove(csPrimitive);\n      }\n    }).bind(this);\n\n    olListenKeys.push(olcsListen(source, 'addfeature', (e) => {\n      console.assert(e.feature);\n      onAddFeature(e.feature);\n    }, this));\n\n    olListenKeys.push(olcsListen(source, 'removefeature', (e) => {\n      console.assert(e.feature);\n      onRemoveFeature(e.feature);\n    }, this));\n\n    olListenKeys.push(olcsListen(source, 'changefeature', (e) => {\n      const feature = e.feature;\n      console.assert(feature);\n      onRemoveFeature(feature);\n      onAddFeature(feature);\n    }, this));\n\n    return counterpart ? [counterpart] : null;\n  }\n}\n\nexport default VectorSynchronizer;\n","/**\n * @module olcs.SynchronizedOverlay\n */\nimport olOverlay from 'ol/Overlay.js';\nimport {transform} from 'ol/proj.js';\nimport {removeNode, removeChildren} from './util.js';\nimport {unByKey as olObservableUnByKey} from 'ol/Observable.js';\n\nclass SynchronizedOverlay extends olOverlay {\n  /**\n   * @param {olcsx.SynchronizedOverlayOptions} options SynchronizedOverlay Options.\n   * @api\n   */\n  constructor(options) {\n    const parent = options.parent;\n    super(parent.getOptions());\n\n    /**\n     * @private\n     * @type {?Function}\n     */\n    this.scenePostRenderListenerRemover_ = null;\n\n    /**\n     * @private\n     * @type {!Cesium.Scene}\n     */\n    this.scene_ = options.scene;\n\n    /**\n     * @private\n     * @type {!olcs.OverlaySynchronizer}\n     */\n    this.synchronizer_ = options.synchronizer;\n\n    /**\n     * @private\n     * @type {!ol.Overlay}\n     */\n    this.parent_ = parent;\n\n    /**\n     * @private\n     * @type {ol.Coordinate|undefined}\n     */\n    this.positionWGS84_ = undefined;\n\n    /**\n     * @private\n     * @type {MutationObserver}\n     */\n    this.observer_ = new MutationObserver(this.handleElementChanged.bind(this));\n\n    /**\n     * @private\n     * @type {Array.<MutationObserver>}\n     */\n    this.attributeObserver_ = [];\n\n    /**\n     * @private\n     * @type {Array<ol.EventsKey>}\n     */\n    this.listenerKeys_ = [];\n    // synchronize our Overlay with the parent Overlay\n    const setPropertyFromEvent = event => this.setPropertyFromEvent_(event);\n    this.listenerKeys_.push(this.parent_.on('change:position', setPropertyFromEvent));\n    this.listenerKeys_.push(this.parent_.on('change:element', setPropertyFromEvent));\n    this.listenerKeys_.push(this.parent_.on('change:offset', setPropertyFromEvent));\n    this.listenerKeys_.push(this.parent_.on('change:position', setPropertyFromEvent));\n    this.listenerKeys_.push(this.parent_.on('change:positioning', setPropertyFromEvent));\n\n    this.setProperties(this.parent_.getProperties());\n\n    this.handleMapChanged();\n    this.handleElementChanged();\n  }\n\n  /**\n   * @param {Node} target\n   * @private\n   */\n  observeTarget_(target) {\n    if (!this.observer_) {\n      // not ready, skip the event (this occurs on construction)\n      return;\n    }\n    this.observer_.disconnect();\n    this.observer_.observe(target, {\n      attributes: false,\n      childList: true,\n      characterData: true,\n      subtree: true\n    });\n    this.attributeObserver_.forEach((observer) => {\n      observer.disconnect();\n    });\n    this.attributeObserver_.length = 0;\n    for (let i = 0; i < target.childNodes.length; i++) {\n      const node = target.childNodes[i];\n      if (node.nodeType === 1) {\n        const observer = new MutationObserver(this.handleElementChanged.bind(this));\n        observer.observe(node, {\n          attributes: true,\n          subtree: true\n        });\n        this.attributeObserver_.push(observer);\n      }\n    }\n  }\n\n  /**\n   *\n   * @param {ol.Object.Event} event\n   * @private\n   */\n  setPropertyFromEvent_(event) {\n    if (event.target && event.key) {\n      this.set(event.key, event.target.get(event.key));\n    }\n  }\n\n  /**\n   * Get the scene associated with this overlay.\n   * @see ol.Overlay.prototype.getMap\n   * @return {!Cesium.Scene} The scene that the overlay is part of.\n   * @api\n   */\n  getScene() {\n    return this.scene_;\n  }\n\n  /**\n   * @override\n   */\n  handleMapChanged() {\n    if (this.scenePostRenderListenerRemover_) {\n      this.scenePostRenderListenerRemover_();\n      removeNode(this.element);\n    }\n    this.scenePostRenderListenerRemover_ = null;\n    const scene = this.getScene();\n    if (scene) {\n      this.scenePostRenderListenerRemover_ = scene.postRender.addEventListener(this.updatePixelPosition.bind(this));\n      this.updatePixelPosition();\n      const container = this.stopEvent ?\n        this.synchronizer_.getOverlayContainerStopEvent() : this.synchronizer_.getOverlayContainer();\n      if (this.insertFirst) {\n        container.insertBefore(this.element, container.childNodes[0] || null);\n      } else {\n        container.appendChild(this.element);\n      }\n    }\n  }\n\n  /**\n   * @override\n   */\n  handlePositionChanged() {\n    // transform position to WGS84\n    const position = this.getPosition();\n    if (position) {\n      const sourceProjection = this.parent_.getMap().getView().getProjection();\n      this.positionWGS84_ = transform(position, sourceProjection, 'EPSG:4326');\n    } else {\n      this.positionWGS84_ = undefined;\n    }\n    this.updatePixelPosition();\n  }\n\n  /**\n   * @override\n   */\n  handleElementChanged() {\n    function cloneNode(node, parent) {\n      const clone = node.cloneNode();\n      if (parent) {\n        parent.appendChild(clone);\n      }\n      if (node.nodeType != Node.TEXT_NODE) {\n        clone.addEventListener('click', (event) => {\n          node.dispatchEvent(new MouseEvent('click', event));\n          event.stopPropagation();\n        });\n      }\n      const nodes = node.childNodes;\n      for (let i = 0; i < nodes.length; i++) {\n        if (!nodes[i]) {\n          continue;\n        }\n        cloneNode(nodes[i], clone);\n      }\n      return clone;\n    }\n    removeChildren(this.element);\n    const element = this.getElement();\n    if (element) {\n      if (element.parentNode && element.parentNode.childNodes) {\n        for (const node of element.parentNode.childNodes) {\n          const clonedNode = cloneNode(node, null);\n          this.element.appendChild(clonedNode);\n        }\n      }\n    }\n    if (element.parentNode) {\n      // set new Observer\n      this.observeTarget_(element.parentNode);\n    }\n  }\n\n  /**\n   * @override\n   */\n  updatePixelPosition() {\n    const position = this.positionWGS84_;\n    if (!this.scene_ || !position) {\n      this.setVisible(false);\n      return;\n    }\n    let height = 0;\n    if (position.length === 2) {\n      const globeHeight = this.scene_.globe.getHeight(Cesium.Cartographic.fromDegrees(position[0], position[1]));\n      if (globeHeight && this.scene_.globe.tilesLoaded) {\n        position[2] = globeHeight;\n      }\n      if (globeHeight) {\n        height = globeHeight;\n      }\n    } else {\n      height = position[2];\n    }\n    const cartesian = Cesium.Cartesian3.fromDegrees(position[0], position[1], height);\n    const camera = this.scene_.camera;\n    const ellipsoidBoundingSphere = new Cesium.BoundingSphere(new Cesium.Cartesian3(), 6356752);\n    const occluder = new Cesium.Occluder(ellipsoidBoundingSphere, camera.position);\n    // check if overlay position is behind the horizon\n    if (!occluder.isPointVisible(cartesian)) {\n      this.setVisible(false);\n      return;\n    }\n    const cullingVolume = camera.frustum.computeCullingVolume(camera.position, camera.direction, camera.up);\n    // check if overlay position is visible from the camera\n    if (cullingVolume.computeVisibility(new Cesium.BoundingSphere(cartesian)) !== 1) {\n      this.setVisible(false);\n      return;\n    }\n    this.setVisible(true);\n\n    const pixelCartesian = this.scene_.cartesianToCanvasCoordinates(cartesian);\n    const pixel = [pixelCartesian.x, pixelCartesian.y];\n    const mapSize = [this.scene_.canvas.width, this.scene_.canvas.height];\n    this.updateRenderedPosition(pixel, mapSize);\n  }\n\n  /**\n   * Destroys the overlay, removing all its listeners and elements\n   * @api\n   */\n  destroy() {\n    if (this.scenePostRenderListenerRemover_) {\n      this.scenePostRenderListenerRemover_();\n    }\n    if (this.observer_) {\n      this.observer_.disconnect();\n    }\n    olObservableUnByKey(this.listenerKeys_);\n    this.listenerKeys_.splice(0);\n    if (this.element.removeNode) {\n      this.element.removeNode(true);\n    } else {\n      this.element.remove();\n    }\n    this.element = null;\n  }\n}\n\nexport default SynchronizedOverlay;\n","/**\n * @module olcs.OverlaySynchronizer\n */\nimport olcsSynchronizedOverlay from './SynchronizedOverlay.js';\nimport {getUid} from './util.js';\n\nclass OverlaySynchronizer {\n  /**\n  * @param {!ol.Map} map\n  * @param {!Cesium.Scene} scene\n  * @constructor\n  * @template T\n  * @api\n  */\n  constructor(map, scene) {\n    /**\n    * @type {!ol.Map}\n    * @protected\n    */\n    this.map = map;\n\n    /**\n    * @type {ol.Collection.<ol.Overlay>}\n    * @private\n    */\n    this.overlays_ = this.map.getOverlays();\n\n    /**\n    * @type {!Cesium.Scene}\n    * @protected\n    */\n    this.scene = scene;\n\n    /**\n    * @private\n    * @type {!Element}\n    */\n    this.overlayContainerStopEvent_ = document.createElement('DIV');\n    this.overlayContainerStopEvent_.className = 'ol-overlaycontainer-stopevent';\n    const overlayEvents = ['click', 'dblclick', 'mousedown', 'touchstart', 'MSPointerDown', 'pointerdown', 'mousewheel', 'wheel'];\n    overlayEvents.forEach((event) => {\n      this.overlayContainerStopEvent_.addEventListener(event, evt => evt.stopPropagation());\n    });\n    this.scene.canvas.parentElement.appendChild(this.overlayContainerStopEvent_);\n\n    /**\n    * @private\n    * @type {!Element}\n    */\n    this.overlayContainer_ = document.createElement('DIV');\n    this.overlayContainer_.className = 'ol-overlaycontainer';\n    this.scene.canvas.parentElement.appendChild(this.overlayContainer_);\n\n\n    /**\n    * @type {!Object<?,olcs.SynchronizedOverlay>}\n    * @private\n    */\n    this.overlayMap_ = {};\n  }\n\n  /**\n  * Get the element that serves as a container for overlays that don't allow\n  * event propagation. Elements added to this container won't let mousedown and\n  * touchstart events through to the map, so clicks and gestures on an overlay\n  * don't trigger any {@link ol.MapBrowserEvent}.\n  * @return {!Element} The map's overlay container that stops events.\n  */\n  getOverlayContainerStopEvent() {\n    return this.overlayContainerStopEvent_;\n  }\n\n  /**\n  * Get the element that serves as a container for overlays.\n  * @return {!Element} The map's overlay container.\n  */\n  getOverlayContainer() {\n    return this.overlayContainer_;\n  }\n\n  /**\n  * Destroy all and perform complete synchronization of the overlays.\n  * @api\n  */\n  synchronize() {\n    this.destroyAll();\n    this.addOverlays();\n    this.overlays_.on('add', this.addOverlayFromEvent_.bind(this));\n    this.overlays_.on('remove', this.removeOverlayFromEvent_.bind(this));\n  }\n\n  /**\n  * @param {ol.Collection.Event} event\n  * @private\n  */\n  addOverlayFromEvent_(event) {\n    const overlay = /** @type {ol.Overlay} */ (event.element);\n    this.addOverlay(overlay);\n  }\n\n  /**\n  * @api\n  */\n  addOverlays() {\n    this.overlays_.forEach((overlay) => { this.addOverlay(overlay); });\n  }\n\n  /**\n  * @param {ol.Overlay} overlay\n  * @api\n  */\n  addOverlay(overlay) {\n    if (!overlay) {\n      return;\n    }\n    const cesiumOverlay = new olcsSynchronizedOverlay({\n      scene: this.scene,\n      synchronizer: this,\n      parent: overlay\n    });\n\n    const overlayId = getUid(overlay).toString();\n    this.overlayMap_[overlayId] = cesiumOverlay;\n  }\n\n  /**\n  * @param {ol.Collection.Event} event\n  * @private\n  */\n  removeOverlayFromEvent_(event) {\n    const removedOverlay = /** @type {ol.Overlay} */ (event.element);\n    this.removeOverlay(removedOverlay);\n  }\n\n  /**\n  * Removes an overlay from the scene\n  * @param {ol.Overlay} overlay\n  * @api\n  */\n  removeOverlay(overlay) {\n    const overlayId = getUid(overlay).toString();\n    const csOverlay = this.overlayMap_[overlayId];\n    if (csOverlay) {\n      csOverlay.destroy();\n      delete this.overlayMap_[overlayId];\n    }\n  }\n\n  /**\n  * Destroys all the created Cesium objects.\n  * @protected\n  */\n  destroyAll() {\n    Object.keys(this.overlayMap_).forEach((key) => {\n      const overlay = this.overlayMap_[key];\n      overlay.destroy();\n      delete this.overlayMap_[key];\n    });\n  }\n}\n\n\nexport default OverlaySynchronizer;\n","/**\n * @module olcs.OLCesium\n */\nimport olGeomPoint from 'ol/geom/Point.js';\nimport {getTransform} from 'ol/proj.js';\nimport olcsUtil from './util.js';\nimport olcsCore from './core.js';\nimport olcsAutoRenderLoop from './AutoRenderLoop.js';\nimport olcsCamera from './Camera.js';\nimport olcsRasterSynchronizer from './RasterSynchronizer.js';\nimport olcsVectorSynchronizer from './VectorSynchronizer.js';\nimport olcsOverlaySynchronizer from './OverlaySynchronizer.js';\n\nclass OLCesium {\n  /**\n   * @param {!olcsx.OLCesiumOptions} options Options.\n   * @constructor\n   * @api\n   */\n  constructor(options) {\n\n    /**\n     * @type {olcs.AutoRenderLoop}\n     * @private\n     */\n    this.autoRenderLoop_ = null;\n\n    /**\n     * @type {!ol.Map}\n     * @private\n     */\n    this.map_ = options.map;\n\n    /**\n     * @type {!function(): Cesium.JulianDate}\n     * @private\n     */\n    this.time_ = options.time || function() {\n      return Cesium.JulianDate.now();\n    };\n\n    /**\n     * No change of the view projection.\n     * @private\n     */\n    this.to4326Transform_ = getTransform(this.map_.getView().getProjection(), 'EPSG:4326');\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.resolutionScale_ = 1.0;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.canvasClientWidth_ = 0.0;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.canvasClientHeight_ = 0.0;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.resolutionScaleChanged_ = true; // force resize\n\n    const fillArea = 'position:absolute;top:0;left:0;width:100%;height:100%;';\n\n    /**\n     * @type {!Element}\n     * @private\n     */\n    this.container_ = document.createElement('DIV');\n    const containerAttribute = document.createAttribute('style');\n    containerAttribute.value = `${fillArea}visibility:hidden;`;\n    this.container_.setAttributeNode(containerAttribute);\n\n    let targetElement = options.target || null;\n    if (targetElement) {\n      if (typeof targetElement === 'string') {\n        targetElement = document.getElementById(targetElement);\n      }\n      targetElement.appendChild(this.container_);\n    } else {\n      const oc = this.map_.getViewport().querySelector('.ol-overlaycontainer');\n      if (oc && oc.parentNode) {\n        oc.parentNode.insertBefore(this.container_, oc);\n      }\n    }\n\n    /**\n     * Whether the Cesium container is placed over the ol map.\n     * @type {boolean}\n     * @private\n     */\n    this.isOverMap_ = !targetElement;\n\n\n    if (this.isOverMap_ && options.stopOpenLayersEventsPropagation) {\n      const overlayEvents = ['click', 'dblclick', 'mousedown', 'touchstart', 'MSPointerDown', 'pointerdown', 'mousewheel', 'wheel'];\n      for (let i = 0, ii = overlayEvents.length; i < ii; ++i) {\n        this.container_.addEventListener(overlayEvents[i], evt => evt.stopPropagation());\n      }\n    }\n\n\n    /**\n     * @type {!HTMLCanvasElement}\n     * @private\n     */\n    this.canvas_ = /** @type {!HTMLCanvasElement} */ (document.createElement('CANVAS'));\n    const canvasAttribute = document.createAttribute('style');\n    canvasAttribute.value = fillArea;\n    this.canvas_.setAttributeNode(canvasAttribute);\n\n    if (olcsUtil.supportsImageRenderingPixelated()) {\n      // non standard CSS4\n      this.canvas_.style['imageRendering'] = olcsUtil.imageRenderingValue();\n    }\n\n    this.canvas_.oncontextmenu = function() { return false; };\n    this.canvas_.onselectstart = function() { return false; };\n\n    this.container_.appendChild(this.canvas_);\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.enabled_ = false;\n\n    /**\n     * @type {!Array.<ol.interaction.Interaction>}\n     * @private\n     */\n    this.pausedInteractions_ = [];\n\n    /**\n     * @type {?ol.layer.Group}\n     * @private\n     */\n    this.hiddenRootGroup_ = null;\n\n    const sceneOptions = options.sceneOptions !== undefined ? options.sceneOptions :\n      /** @type {Cesium.SceneOptions} */ ({});\n    sceneOptions.canvas = this.canvas_;\n    sceneOptions.scene3DOnly = true;\n\n    /**\n     * @type {!Cesium.Scene}\n     * @private\n     */\n    this.scene_ = new Cesium.Scene(sceneOptions);\n\n    const sscc = this.scene_.screenSpaceCameraController;\n\n    sscc.tiltEventTypes.push({\n      'eventType': Cesium.CameraEventType.LEFT_DRAG,\n      'modifier': Cesium.KeyboardEventModifier.SHIFT\n    });\n\n    sscc.tiltEventTypes.push({\n      'eventType': Cesium.CameraEventType.LEFT_DRAG,\n      'modifier': Cesium.KeyboardEventModifier.ALT\n    });\n\n    sscc.enableLook = false;\n\n    this.scene_.camera.constrainedAxis = Cesium.Cartesian3.UNIT_Z;\n\n    /**\n     * @type {!olcs.Camera}\n     * @private\n     */\n    this.camera_ = new olcsCamera(this.scene_, this.map_);\n\n    /**\n     * @type {!Cesium.Globe}\n     * @private\n     */\n    this.globe_ = new Cesium.Globe(Cesium.Ellipsoid.WGS84);\n    this.globe_.baseColor = Cesium.Color.WHITE;\n    this.scene_.globe = this.globe_;\n    this.scene_.skyAtmosphere = new Cesium.SkyAtmosphere();\n\n    // The first layer of Cesium is special; using a 1x1 transparent image to workaround it.\n    // See https://github.com/AnalyticalGraphicsInc/cesium/issues/1323 for details.\n    const firstImageryProvider = new Cesium.SingleTileImageryProvider({\n      url: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=',\n      rectangle: Cesium.Rectangle.fromDegrees(0, 0, 1, 1) // the Rectangle dimensions are arbitrary\n    });\n    this.globe_.imageryLayers.addImageryProvider(firstImageryProvider, 0);\n\n    this.dataSourceCollection_ = new Cesium.DataSourceCollection();\n    this.dataSourceDisplay_ = new Cesium.DataSourceDisplay({\n      scene: this.scene_,\n      dataSourceCollection: this.dataSourceCollection_\n    });\n\n    const synchronizers = options.createSynchronizers ?\n      options.createSynchronizers(this.map_, this.scene_, this.dataSourceCollection_) : [\n        new olcsRasterSynchronizer(this.map_, this.scene_),\n        new olcsVectorSynchronizer(this.map_, this.scene_),\n        new olcsOverlaySynchronizer(this.map_, this.scene_)\n      ];\n\n    // Assures correct canvas size after initialisation\n    this.handleResize_();\n\n    for (let i = synchronizers.length - 1; i >= 0; --i) {\n      synchronizers[i].synchronize();\n    }\n\n    /**\n     * Time of the last rendered frame, as returned by `performance.now()`.\n     * @type {number}\n     * @private\n     */\n    this.lastFrameTime_ = 0;\n\n    /**\n     * The identifier returned by `requestAnimationFrame`.\n     * @type {number|undefined}\n     * @private\n     */\n    this.renderId_ = undefined;\n\n    /**\n     * Target frame rate for the render loop.\n     * @type {number}\n     * @private\n     */\n    this.targetFrameRate_ = Number.POSITIVE_INFINITY;\n\n    /**\n     * If the Cesium render loop is being blocked.\n     * @type {boolean}\n     * @private\n     */\n    this.blockCesiumRendering_ = false;\n\n    /**\n     * If the warmup routine is active.\n     * @type {boolean}\n     * @private\n     */\n    this.warmingUp_ = false;\n\n    /**\n     * @type {ol.Feature}\n     * @private\n     */\n    this.trackedFeature_ = null;\n\n    /**\n     * @type {Cesium.Entity}\n     * @private\n     */\n    this.trackedEntity_ = null;\n\n    /**\n     * @type {Cesium.EntityView}\n     * @private\n     */\n    this.entityView_ = null;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.needTrackedEntityUpdate_ = false;\n\n    /**\n     * @type {!Cesium.BoundingSphere}\n     */\n    this.boundingSphereScratch_ = new Cesium.BoundingSphere();\n\n    const eventHelper = new Cesium.EventHelper();\n    eventHelper.add(this.scene_.postRender, OLCesium.prototype.updateTrackedEntity_, this);\n\n    // Cesium has a mechanism to prevent the camera to go under the terrain.\n    // Unfortunately, it is only active when all the terrain has been loaded, which:\n    // - does not prevent the camera to sink under terrain anymore;\n    // - introduce a jumping effect once all terrain has been loaded and the position of the camera is finally fixed.\n    // The property below enables a workaround found in the Camptocamp Cesium fork.\n    // See also https://github.com/AnalyticalGraphicsInc/cesium/issues/5999.\n    Cesium.Camera.enableSuspendTerrainAdjustment = false;\n  }\n\n  /**\n   * Render the Cesium scene.\n   * @private\n   */\n  render_() {\n    // if a call to `requestAnimationFrame` is pending, cancel it\n    if (this.renderId_ !== undefined) {\n      cancelAnimationFrame(this.renderId_);\n      this.renderId_ = undefined;\n    }\n\n    // only render if Cesium is enabled/warming and rendering hasn't been blocked\n    if ((this.enabled_ || this.warmingUp_) && !this.blockCesiumRendering_) {\n      this.renderId_ = requestAnimationFrame(this.onAnimationFrame_.bind(this));\n    }\n  }\n\n  /**\n   * Callback for `requestAnimationFrame`.\n   * @param {number} frameTime The frame time, from `performance.now()`.\n   * @private\n   */\n  onAnimationFrame_(frameTime) {\n    this.renderId_ = undefined;\n\n    // check if a frame was rendered within the target frame rate\n    const interval = 1000.0 / this.targetFrameRate_;\n    const delta = frameTime - this.lastFrameTime_;\n    if (delta < interval) {\n      // too soon, don't render yet\n      this.render_();\n      return;\n    }\n\n    // time to render a frame, save the time\n    this.lastFrameTime_ = frameTime;\n\n    const julianDate = this.time_();\n    this.scene_.initializeFrame();\n    this.handleResize_();\n    this.dataSourceDisplay_.update(julianDate);\n\n    // Update tracked entity\n    if (this.entityView_) {\n      const trackedEntity = this.trackedEntity_;\n      const trackedState = this.dataSourceDisplay_.getBoundingSphere(trackedEntity, false, this.boundingSphereScratch_);\n      if (trackedState === Cesium.BoundingSphereState.DONE) {\n        this.boundingSphereScratch_.radius = 1; // a radius of 1 is enough for tracking points\n        this.entityView_.update(julianDate, this.boundingSphereScratch_);\n      }\n    }\n\n    this.scene_.render(julianDate);\n    this.camera_.checkCameraChange();\n\n    // request the next render call after this one completes to ensure the browser doesn't get backed up\n    this.render_();\n  }\n\n  /**\n   * @private\n   */\n  updateTrackedEntity_() {\n    if (!this.needTrackedEntityUpdate_) {\n      return;\n    }\n\n    const trackedEntity = this.trackedEntity_;\n    const scene = this.scene_;\n\n    const state = this.dataSourceDisplay_.getBoundingSphere(trackedEntity, false, this.boundingSphereScratch_);\n    if (state === Cesium.BoundingSphereState.PENDING) {\n      return;\n    }\n\n    scene.screenSpaceCameraController.enableTilt = false;\n\n    const bs = state !== Cesium.BoundingSphereState.FAILED ? this.boundingSphereScratch_ : undefined;\n    if (bs) {\n      bs.radius = 1;\n    }\n    this.entityView_ = new Cesium.EntityView(trackedEntity, scene, scene.mapProjection.ellipsoid);\n    this.entityView_.update(this.time_(), bs);\n    this.needTrackedEntityUpdate_ = false;\n  }\n\n  /**\n   * @private\n   */\n  handleResize_() {\n    let width = this.canvas_.clientWidth;\n    let height = this.canvas_.clientHeight;\n\n    if (width === 0 | height === 0) {\n      // The canvas DOM element is not ready yet.\n      return;\n    }\n\n    if (width === this.canvasClientWidth_ &&\n        height === this.canvasClientHeight_ &&\n        !this.resolutionScaleChanged_) {\n      return;\n    }\n\n    let resolutionScale = this.resolutionScale_;\n    if (!olcsUtil.supportsImageRenderingPixelated()) {\n      resolutionScale *= window.devicePixelRatio || 1.0;\n    }\n    this.resolutionScaleChanged_ = false;\n\n    this.canvasClientWidth_ = width;\n    this.canvasClientHeight_ = height;\n\n    width *= resolutionScale;\n    height *= resolutionScale;\n\n    this.canvas_.width = width;\n    this.canvas_.height = height;\n    this.scene_.camera.frustum.aspectRatio = width / height;\n  }\n\n  /**\n   * @return {!olcs.Camera}\n   * @api\n   */\n  getCamera() {\n    return this.camera_;\n  }\n\n  /**\n   * @return {!ol.Map}\n   * @api\n   */\n  getOlMap() {\n    return this.map_;\n  }\n\n  /**\n   * @return {!ol.View}\n   * @api\n   */\n  getOlView() {\n    const view = this.map_.getView();\n    console.assert(view);\n    return view;\n  }\n\n  /**\n   * @return {!Cesium.Scene}\n   * @api\n   */\n  getCesiumScene() {\n    return this.scene_;\n  }\n\n  /**\n   * @return {!Cesium.DataSourceCollection}\n   * @api\n   */\n  getDataSources() {\n    return this.dataSourceCollection_;\n  }\n\n  /**\n   * @return {!Cesium.DataSourceDisplay}\n   * @api\n   */\n  getDataSourceDisplay() {\n    return this.dataSourceDisplay_;\n  }\n\n  /**\n   * @return {boolean}\n   * @api\n   */\n  getEnabled() {\n    return this.enabled_;\n  }\n\n  /**\n   * Enables/disables the Cesium.\n   * This modifies the visibility style of the container element.\n   * @param {boolean} enable\n   * @api\n   */\n  setEnabled(enable) {\n    if (this.enabled_ === enable) {\n      return;\n    }\n    this.enabled_ = enable;\n\n    // some Cesium operations are operating with canvas.clientWidth,\n    // so we can't remove it from DOM or even make display:none;\n    this.container_.style.visibility = this.enabled_ ? 'visible' : 'hidden';\n    let interactions;\n    if (this.enabled_) {\n      this.throwOnUnitializedMap_();\n      if (this.isOverMap_) {\n        interactions = this.map_.getInteractions();\n        interactions.forEach((el, i, arr) => {\n          this.pausedInteractions_.push(el);\n        });\n        interactions.clear();\n\n        this.map_.addInteraction = interaction => this.pausedInteractions_.push(interaction);\n        this.map_.removeInteraction = interaction =>\n          this.pausedInteractions_ = this.pausedInteractions_.filter(i => i !== interaction);\n\n        const rootGroup = this.map_.getLayerGroup();\n        if (rootGroup.getVisible()) {\n          this.hiddenRootGroup_ = rootGroup;\n          this.hiddenRootGroup_.setVisible(false);\n        }\n\n        this.map_.getOverlayContainer().classList.add('olcs-hideoverlay');\n        this.map_.getOverlayContainerStopEvent().classList.add('olcs-hideoverlay');\n      }\n\n      this.camera_.readFromView();\n      this.render_();\n    } else {\n      if (this.isOverMap_) {\n        interactions = this.map_.getInteractions();\n        this.pausedInteractions_.forEach((interaction) => {\n          interactions.push(interaction);\n        });\n        this.pausedInteractions_.length = 0;\n\n        this.map_.addInteraction = interaction => this.map_.getInteractions().push(interaction);\n        this.map_.removeInteraction = interaction => this.map_.getInteractions().remove(interaction);\n\n        this.map_.getOverlayContainer().classList.remove('olcs-hideoverlay');\n        this.map_.getOverlayContainerStopEvent().classList.remove('olcs-hideoverlay');\n        if (this.hiddenRootGroup_) {\n          this.hiddenRootGroup_.setVisible(true);\n          this.hiddenRootGroup_ = null;\n        }\n      }\n\n      this.camera_.updateView();\n    }\n  }\n\n  /**\n   * Preload Cesium so that it is ready when transitioning from 2D to 3D.\n   * @param {number} height Target height of the camera\n   * @param {number} timeout Milliseconds after which the warming will stop\n   * @api\n  */\n  warmUp(height, timeout) {\n    if (this.enabled_) {\n      // already enabled\n      return;\n    }\n    this.throwOnUnitializedMap_();\n    this.camera_.readFromView();\n    const ellipsoid = this.globe_.ellipsoid;\n    const csCamera = this.scene_.camera;\n    const position = ellipsoid.cartesianToCartographic(csCamera.position);\n    if (position.height < height) {\n      position.height = height;\n      csCamera.position = ellipsoid.cartographicToCartesian(position);\n    }\n\n    this.warmingUp_ = true;\n    this.render_();\n\n    setTimeout(() => {\n      this.warmingUp_ = false;\n    }, timeout);\n  }\n\n  /**\n   * Block Cesium rendering to save resources.\n   * @param {boolean} block True to block.\n   * @api\n  */\n  setBlockCesiumRendering(block) {\n    if (this.blockCesiumRendering_ !== block) {\n      this.blockCesiumRendering_ = block;\n\n      // reset the render loop\n      this.render_();\n    }\n  }\n\n  /**\n   * Render the globe only when necessary in order to save resources.\n   * Experimental.\n   * @api\n   */\n  enableAutoRenderLoop() {\n    if (!this.autoRenderLoop_) {\n      this.autoRenderLoop_ = new olcsAutoRenderLoop(this);\n    }\n  }\n\n  /**\n   * Get the autorender loop.\n   * @return {?olcs.AutoRenderLoop}\n   * @api\n  */\n  getAutoRenderLoop() {\n    return this.autoRenderLoop_;\n  }\n\n  /**\n   * The 3D Cesium globe is rendered in a canvas with two different dimensions:\n   * clientWidth and clientHeight which are the dimension on the screen and\n   * width and height which are the dimensions of the drawing buffer.\n   *\n   * By using a resolution scale lower than 1.0, it is possible to render the\n   * globe in a buffer smaller than the canvas client dimensions and improve\n   * performance, at the cost of quality.\n   *\n   * Pixel ratio should also be taken into account; by default, a device with\n   * pixel ratio of 2.0 will have a buffer surface 4 times bigger than the client\n   * surface.\n   *\n   * @param {number} value\n   * @this {olcs.OLCesium}\n   * @api\n   */\n  setResolutionScale(value) {\n    value = Math.max(0, value);\n    if (value !== this.resolutionScale_) {\n      this.resolutionScale_ = Math.max(0, value);\n      this.resolutionScaleChanged_ = true;\n      if (this.autoRenderLoop_) {\n        this.autoRenderLoop_.restartRenderLoop();\n      }\n    }\n  }\n\n  /**\n   * Set the target frame rate for the renderer. Set to `Number.POSITIVE_INFINITY`\n   * to render as quickly as possible.\n   * @param {number} value The frame rate, in frames per second.\n   * @api\n   */\n  setTargetFrameRate(value) {\n    if (this.targetFrameRate_ !== value) {\n      this.targetFrameRate_ = value;\n\n      // reset the render loop\n      this.render_();\n    }\n  }\n\n  /**\n   * Check if OpenLayers map is not properly initialized.\n   * @private\n   */\n  throwOnUnitializedMap_() {\n    const map = this.map_;\n    const view = map.getView();\n    const center = view.getCenter();\n    if (!view.isDef() || isNaN(center[0]) || isNaN(center[1])) {\n      throw new Error(`The OpenLayers map is not properly initialized: ${center} / ${view.getResolution()}`);\n    }\n  }\n}\n\n\nObject.defineProperties(OLCesium.prototype, {\n  'trackedFeature': {\n    'get': /** @this {olcs.OLCesium} */ function() {\n      return this.trackedFeature_;\n    },\n    'set': /** @this {olcs.OLCesium} */ function(feature) {\n      if (this.trackedFeature_ !== feature) {\n\n        const scene = this.scene_;\n\n        //Stop tracking\n        if (!feature || !feature.getGeometry()) {\n          this.needTrackedEntityUpdate_ = false;\n          scene.screenSpaceCameraController.enableTilt = true;\n\n          if (this.trackedEntity_) {\n            this.dataSourceDisplay_.defaultDataSource.entities.remove(this.trackedEntity_);\n          }\n          this.trackedEntity_ = null;\n          this.trackedFeature_ = null;\n          this.entityView_ = null;\n          scene.camera.lookAtTransform(Cesium.Matrix4.IDENTITY);\n          return;\n        }\n\n        this.trackedFeature_ = feature;\n\n        //We can't start tracking immediately, so we set a flag and start tracking\n        //when the bounding sphere is ready (most likely next frame).\n        this.needTrackedEntityUpdate_ = true;\n\n        const to4326Transform = this.to4326Transform_;\n        const toCesiumPosition = function() {\n          const geometry = feature.getGeometry();\n          console.assert(geometry instanceof olGeomPoint);\n          const coo = geometry.getCoordinates();\n          const coo4326 = to4326Transform(coo, undefined, coo.length);\n          return olcsCore.ol4326CoordinateToCesiumCartesian(coo4326);\n        };\n\n        // Create an invisible point entity for tracking.\n        // It is independant from the primitive/geometry created by the vector synchronizer.\n        const options = {\n          'position': new Cesium.CallbackProperty((time, result) => toCesiumPosition(), false),\n          'point': {\n            'pixelSize': 1,\n            'color': Cesium.Color.TRANSPARENT\n          }\n        };\n\n        this.trackedEntity_ = this.dataSourceDisplay_.defaultDataSource.entities.add(options);\n      }\n    }\n  }\n});\n\n\nexport default OLCesium;\n","/**\n * @module ol/functions\n */\n\n/**\n * Always returns true.\n * @returns {boolean} true.\n */\nexport function TRUE() {\n  return true;\n}\n\n/**\n * Always returns false.\n * @returns {boolean} false.\n */\nexport function FALSE() {\n  return false;\n}\n\n/**\n * A reusable function, used e.g. as a default for callbacks.\n *\n * @return {void} Nothing.\n */\nexport function VOID() {}\n","/**\n * @module ol/Object\n */\nimport {getUid} from './util.js';\nimport ObjectEventType from './ObjectEventType.js';\nimport Observable from './Observable.js';\nimport Event from './events/Event.js';\nimport {assign} from './obj.js';\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Object~BaseObject} instances are instances of this type.\n */\nexport class ObjectEvent extends Event {\n\n  /**\n   * @param {string} type The event type.\n   * @param {string} key The property name.\n   * @param {*} oldValue The old value for `key`.\n   */\n  constructor(type, key, oldValue) {\n    super(type);\n\n    /**\n     * The name of the property whose value is changing.\n     * @type {string}\n     * @api\n     */\n    this.key = key;\n\n    /**\n     * The old value. To get the new value use `e.target.get(e.key)` where\n     * `e` is the event object.\n     * @type {*}\n     * @api\n     */\n    this.oldValue = oldValue;\n\n  }\n\n}\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Most non-trivial classes inherit from this.\n *\n * This extends {@link module:ol/Observable} with observable\n * properties, where each property is observable as well as the object as a\n * whole.\n *\n * Classes that inherit from this have pre-defined properties, to which you can\n * add your owns. The pre-defined properties are listed in this documentation as\n * 'Observable Properties', and have their own accessors; for example,\n * {@link module:ol/Map~Map} has a `target` property, accessed with\n * `getTarget()` and changed with `setTarget()`. Not all properties are however\n * settable. There are also general-purpose accessors `get()` and `set()`. For\n * example, `get('target')` is equivalent to `getTarget()`.\n *\n * The `set` accessors trigger a change event, and you can monitor this by\n * registering a listener. For example, {@link module:ol/View~View} has a\n * `center` property, so `view.on('change:center', function(evt) {...});` would\n * call the function whenever the value of the center property changes. Within\n * the function, `evt.target` would be the view, so `evt.target.getCenter()`\n * would return the new center.\n *\n * You can add your own observable properties with\n * `object.set('prop', 'value')`, and retrieve that with `object.get('prop')`.\n * You can listen for changes on that property value with\n * `object.on('change:prop', listener)`. You can get a list of all\n * properties with {@link module:ol/Object~BaseObject#getProperties}.\n *\n * Note that the observable properties are separate from standard JS properties.\n * You can, for example, give your map object a title with\n * `map.title='New title'` and with `map.set('title', 'Another title')`. The\n * first will be a `hasOwnProperty`; the second will appear in\n * `getProperties()`. Only the second is observable.\n *\n * Properties can be deleted by using the unset method. E.g.\n * object.unset('foo').\n *\n * @fires ObjectEvent\n * @api\n */\nclass BaseObject extends Observable {\n\n  /**\n   * @param {Object<string, *>=} opt_values An object with key-value pairs.\n   */\n  constructor(opt_values) {\n    super();\n\n    // Call {@link module:ol/util~getUid} to ensure that the order of objects' ids is\n    // the same as the order in which they were created.  This also helps to\n    // ensure that object properties are always added in the same order, which\n    // helps many JavaScript engines generate faster code.\n    getUid(this);\n\n    /**\n     * @private\n     * @type {!Object<string, *>}\n     */\n    this.values_ = {};\n\n    if (opt_values !== undefined) {\n      this.setProperties(opt_values);\n    }\n  }\n\n  /**\n   * Gets a value.\n   * @param {string} key Key name.\n   * @return {*} Value.\n   * @api\n   */\n  get(key) {\n    let value;\n    if (this.values_.hasOwnProperty(key)) {\n      value = this.values_[key];\n    }\n    return value;\n  }\n\n  /**\n   * Get a list of object property names.\n   * @return {Array<string>} List of property names.\n   * @api\n   */\n  getKeys() {\n    return Object.keys(this.values_);\n  }\n\n  /**\n   * Get an object of all property names and values.\n   * @return {Object<string, *>} Object.\n   * @api\n   */\n  getProperties() {\n    return assign({}, this.values_);\n  }\n\n  /**\n   * @param {string} key Key name.\n   * @param {*} oldValue Old value.\n   */\n  notify(key, oldValue) {\n    let eventType;\n    eventType = getChangeEventType(key);\n    this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n    eventType = ObjectEventType.PROPERTYCHANGE;\n    this.dispatchEvent(new ObjectEvent(eventType, key, oldValue));\n  }\n\n  /**\n   * Sets a value.\n   * @param {string} key Key name.\n   * @param {*} value Value.\n   * @param {boolean=} opt_silent Update without triggering an event.\n   * @api\n   */\n  set(key, value, opt_silent) {\n    if (opt_silent) {\n      this.values_[key] = value;\n    } else {\n      const oldValue = this.values_[key];\n      this.values_[key] = value;\n      if (oldValue !== value) {\n        this.notify(key, oldValue);\n      }\n    }\n  }\n\n  /**\n   * Sets a collection of key-value pairs.  Note that this changes any existing\n   * properties and adds new ones (it does not remove any existing properties).\n   * @param {Object<string, *>} values Values.\n   * @param {boolean=} opt_silent Update without triggering an event.\n   * @api\n   */\n  setProperties(values, opt_silent) {\n    for (const key in values) {\n      this.set(key, values[key], opt_silent);\n    }\n  }\n\n  /**\n   * Unsets a property.\n   * @param {string} key Key name.\n   * @param {boolean=} opt_silent Unset without triggering an event.\n   * @api\n   */\n  unset(key, opt_silent) {\n    if (key in this.values_) {\n      const oldValue = this.values_[key];\n      delete this.values_[key];\n      if (!opt_silent) {\n        this.notify(key, oldValue);\n      }\n    }\n  }\n}\n\n\n/**\n * @type {Object<string, string>}\n */\nconst changeEventTypeCache = {};\n\n\n/**\n * @param {string} key Key name.\n * @return {string} Change name.\n */\nexport function getChangeEventType(key) {\n  return changeEventTypeCache.hasOwnProperty(key) ?\n    changeEventTypeCache[key] :\n    (changeEventTypeCache[key] = 'change:' + key);\n}\n\n\nexport default BaseObject;\n","/**\n * @module ol/style/Fill\n */\nimport {getUid} from '../util.js';\nimport {asString} from '../color.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} [color] A color, gradient or pattern.\n * See {@link module:ol/color~Color} and {@link module:ol/colorlike~ColorLike} for possible formats.\n * Default null; if null, the Canvas/renderer default black will be used.\n */\n\n\n/**\n * @classdesc\n * Set fill style for vector features.\n * @api\n */\nclass Fill {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike}\n     */\n    this.color_ = options.color !== undefined ? options.color : null;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * Clones the style. The color is not cloned if it is an {@link module:ol/colorlike~ColorLike}.\n   * @return {Fill} The cloned style.\n   * @api\n   */\n  clone() {\n    const color = this.getColor();\n    return new Fill({\n      color: Array.isArray(color) ? color.slice() : color || undefined\n    });\n  }\n\n  /**\n   * Get the fill color.\n   * @return {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} Color.\n   * @api\n   */\n  getColor() {\n    return this.color_;\n  }\n\n  /**\n   * Set the color.\n   *\n   * @param {import(\"../color.js\").Color|import(\"../colorlike.js\").ColorLike} color Color.\n   * @api\n   */\n  setColor(color) {\n    this.color_ = color;\n    this.checksum_ = undefined;\n  }\n\n  /**\n   * @return {string} The checksum.\n   */\n  getChecksum() {\n    if (this.checksum_ === undefined) {\n      const color = this.color_;\n      if (color) {\n        if (Array.isArray(color) || typeof color == 'string') {\n          this.checksum_ = 'f' + asString(/** @type {import(\"../color.js\").Color|string} */ (color));\n        } else {\n          this.checksum_ = getUid(this.color_);\n        }\n      } else {\n        this.checksum_ = 'f-';\n      }\n    }\n\n    return this.checksum_;\n  }\n}\n\nexport default Fill;\n","/**\n * @module ol/Feature\n */\nimport {assert} from './asserts.js';\nimport {listen, unlisten, unlistenByKey} from './events.js';\nimport EventType from './events/EventType.js';\nimport BaseObject, {getChangeEventType} from './Object.js';\n\n/**\n * @typedef {typeof Feature|typeof import(\"./render/Feature.js\").default} FeatureClass\n */\n\n/**\n * @typedef {Feature|import(\"./render/Feature.js\").default} FeatureLike\n */\n\n/**\n * @classdesc\n * A vector object for geographic features with a geometry and other\n * attribute properties, similar to the features in vector file formats like\n * GeoJSON.\n *\n * Features can be styled individually with `setStyle`; otherwise they use the\n * style of their vector layer.\n *\n * Note that attribute properties are set as {@link module:ol/Object} properties on\n * the feature object, so they are observable, and have get/set accessors.\n *\n * Typically, a feature has a single geometry property. You can set the\n * geometry using the `setGeometry` method and get it with `getGeometry`.\n * It is possible to store more than one geometry on a feature using attribute\n * properties. By default, the geometry used for rendering is identified by\n * the property name `geometry`. If you want to use another geometry property\n * for rendering, use the `setGeometryName` method to change the attribute\n * property associated with the geometry for the feature.  For example:\n *\n * ```js\n *\n * import Feature from 'ol/Feature';\n * import Polygon from 'ol/geom/Polygon';\n * import Point from 'ol/geom/Point';\n *\n * var feature = new Feature({\n *   geometry: new Polygon(polyCoords),\n *   labelPoint: new Point(labelCoords),\n *   name: 'My Polygon'\n * });\n *\n * // get the polygon geometry\n * var poly = feature.getGeometry();\n *\n * // Render the feature as a point using the coordinates from labelPoint\n * feature.setGeometryName('labelPoint');\n *\n * // get the point geometry\n * var point = feature.getGeometry();\n * ```\n *\n * @api\n */\nclass Feature extends BaseObject {\n  /**\n   * @param {import(\"./geom/Geometry.js\").default|Object<string, *>=} opt_geometryOrProperties\n   *     You may pass a Geometry object directly, or an object literal containing\n   *     properties. If you pass an object literal, you may include a Geometry\n   *     associated with a `geometry` key.\n   */\n  constructor(opt_geometryOrProperties) {\n\n    super();\n\n    /**\n     * @private\n     * @type {number|string|undefined}\n     */\n    this.id_ = undefined;\n\n    /**\n     * @type {string}\n     * @private\n     */\n    this.geometryName_ = 'geometry';\n\n    /**\n     * User provided style.\n     * @private\n     * @type {import(\"./style/Style.js\").StyleLike}\n     */\n    this.style_ = null;\n\n    /**\n     * @private\n     * @type {import(\"./style/Style.js\").StyleFunction|undefined}\n     */\n    this.styleFunction_ = undefined;\n\n    /**\n     * @private\n     * @type {?import(\"./events.js\").EventsKey}\n     */\n    this.geometryChangeKey_ = null;\n\n    listen(\n      this, getChangeEventType(this.geometryName_),\n      this.handleGeometryChanged_, this);\n\n    if (opt_geometryOrProperties) {\n      if (typeof /** @type {?} */ (opt_geometryOrProperties).getSimplifiedGeometry === 'function') {\n        const geometry = /** @type {import(\"./geom/Geometry.js\").default} */ (opt_geometryOrProperties);\n        this.setGeometry(geometry);\n      } else {\n        /** @type {Object<string, *>} */\n        const properties = opt_geometryOrProperties;\n        this.setProperties(properties);\n      }\n    }\n  }\n\n  /**\n   * Clone this feature. If the original feature has a geometry it\n   * is also cloned. The feature id is not set in the clone.\n   * @return {Feature} The clone.\n   * @api\n   */\n  clone() {\n    const clone = new Feature(this.getProperties());\n    clone.setGeometryName(this.getGeometryName());\n    const geometry = this.getGeometry();\n    if (geometry) {\n      clone.setGeometry(geometry.clone());\n    }\n    const style = this.getStyle();\n    if (style) {\n      clone.setStyle(style);\n    }\n    return clone;\n  }\n\n  /**\n   * Get the feature's default geometry.  A feature may have any number of named\n   * geometries.  The \"default\" geometry (the one that is rendered by default) is\n   * set when calling {@link module:ol/Feature~Feature#setGeometry}.\n   * @return {import(\"./geom/Geometry.js\").default|undefined} The default geometry for the feature.\n   * @api\n   * @observable\n   */\n  getGeometry() {\n    return (\n      /** @type {import(\"./geom/Geometry.js\").default|undefined} */ (this.get(this.geometryName_))\n    );\n  }\n\n  /**\n   * Get the feature identifier.  This is a stable identifier for the feature and\n   * is either set when reading data from a remote source or set explicitly by\n   * calling {@link module:ol/Feature~Feature#setId}.\n   * @return {number|string|undefined} Id.\n   * @api\n   */\n  getId() {\n    return this.id_;\n  }\n\n  /**\n   * Get the name of the feature's default geometry.  By default, the default\n   * geometry is named `geometry`.\n   * @return {string} Get the property name associated with the default geometry\n   *     for this feature.\n   * @api\n   */\n  getGeometryName() {\n    return this.geometryName_;\n  }\n\n  /**\n   * Get the feature's style. Will return what was provided to the\n   * {@link module:ol/Feature~Feature#setStyle} method.\n   * @return {import(\"./style/Style.js\").StyleLike} The feature style.\n   * @api\n   */\n  getStyle() {\n    return this.style_;\n  }\n\n  /**\n   * Get the feature's style function.\n   * @return {import(\"./style/Style.js\").StyleFunction|undefined} Return a function\n   * representing the current style of this feature.\n   * @api\n   */\n  getStyleFunction() {\n    return this.styleFunction_;\n  }\n\n  /**\n   * @private\n   */\n  handleGeometryChange_() {\n    this.changed();\n  }\n\n  /**\n   * @private\n   */\n  handleGeometryChanged_() {\n    if (this.geometryChangeKey_) {\n      unlistenByKey(this.geometryChangeKey_);\n      this.geometryChangeKey_ = null;\n    }\n    const geometry = this.getGeometry();\n    if (geometry) {\n      this.geometryChangeKey_ = listen(geometry,\n        EventType.CHANGE, this.handleGeometryChange_, this);\n    }\n    this.changed();\n  }\n\n  /**\n   * Set the default geometry for the feature.  This will update the property\n   * with the name returned by {@link module:ol/Feature~Feature#getGeometryName}.\n   * @param {import(\"./geom/Geometry.js\").default|undefined} geometry The new geometry.\n   * @api\n   * @observable\n   */\n  setGeometry(geometry) {\n    this.set(this.geometryName_, geometry);\n  }\n\n  /**\n   * Set the style for the feature.  This can be a single style object, an array\n   * of styles, or a function that takes a resolution and returns an array of\n   * styles. If it is `null` the feature has no style (a `null` style).\n   * @param {import(\"./style/Style.js\").StyleLike} style Style for this feature.\n   * @api\n   * @fires module:ol/events/Event~Event#event:change\n   */\n  setStyle(style) {\n    this.style_ = style;\n    this.styleFunction_ = !style ? undefined : createStyleFunction(style);\n    this.changed();\n  }\n\n  /**\n   * Set the feature id.  The feature id is considered stable and may be used when\n   * requesting features or comparing identifiers returned from a remote source.\n   * The feature id can be used with the\n   * {@link module:ol/source/Vector~VectorSource#getFeatureById} method.\n   * @param {number|string|undefined} id The feature id.\n   * @api\n   * @fires module:ol/events/Event~Event#event:change\n   */\n  setId(id) {\n    this.id_ = id;\n    this.changed();\n  }\n\n  /**\n   * Set the property name to be used when getting the feature's default geometry.\n   * When calling {@link module:ol/Feature~Feature#getGeometry}, the value of the property with\n   * this name will be returned.\n   * @param {string} name The property name of the default geometry.\n   * @api\n   */\n  setGeometryName(name) {\n    unlisten(\n      this, getChangeEventType(this.geometryName_),\n      this.handleGeometryChanged_, this);\n    this.geometryName_ = name;\n    listen(\n      this, getChangeEventType(this.geometryName_),\n      this.handleGeometryChanged_, this);\n    this.handleGeometryChanged_();\n  }\n}\n\n\n/**\n * Convert the provided object into a feature style function.  Functions passed\n * through unchanged.  Arrays of Style or single style objects wrapped\n * in a new feature style function.\n * @param {!import(\"./style/Style.js\").StyleFunction|!Array<import(\"./style/Style.js\").default>|!import(\"./style/Style.js\").default} obj\n *     A feature style function, a single style, or an array of styles.\n * @return {import(\"./style/Style.js\").StyleFunction} A style function.\n */\nexport function createStyleFunction(obj) {\n  if (typeof obj === 'function') {\n    return obj;\n  } else {\n    /**\n     * @type {Array<import(\"./style/Style.js\").default>}\n     */\n    let styles;\n    if (Array.isArray(obj)) {\n      styles = obj;\n    } else {\n      assert(typeof /** @type {?} */ (obj).getZIndex === 'function',\n        41); // Expected an `import(\"./style/Style.js\").Style` or an array of `import(\"./style/Style.js\").Style`\n      const style = /** @type {import(\"./style/Style.js\").default} */ (obj);\n      styles = [style];\n    }\n    return function() {\n      return styles;\n    };\n  }\n}\nexport default Feature;\n","/**\n * @module ol/MapBrowserEventType\n */\nimport EventType from './events/EventType.js';\n\n/**\n * Constants for event names.\n * @enum {string}\n */\nexport default {\n\n  /**\n   * A true single click with no dragging and no double click. Note that this\n   * event is delayed by 250 ms to ensure that it is not a double click.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#singleclick\n   * @api\n   */\n  SINGLECLICK: 'singleclick',\n\n  /**\n   * A click with no dragging. A double click will fire two of this.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#click\n   * @api\n   */\n  CLICK: EventType.CLICK,\n\n  /**\n   * A true double click, with no dragging.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#dblclick\n   * @api\n   */\n  DBLCLICK: EventType.DBLCLICK,\n\n  /**\n   * Triggered when a pointer is dragged.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointerdrag\n   * @api\n   */\n  POINTERDRAG: 'pointerdrag',\n\n  /**\n   * Triggered when a pointer is moved. Note that on touch devices this is\n   * triggered when the map is panned, so is not the same as mousemove.\n   * @event module:ol/MapBrowserEvent~MapBrowserEvent#pointermove\n   * @api\n   */\n  POINTERMOVE: 'pointermove',\n\n  POINTERDOWN: 'pointerdown',\n  POINTERUP: 'pointerup',\n  POINTEROVER: 'pointerover',\n  POINTEROUT: 'pointerout',\n  POINTERENTER: 'pointerenter',\n  POINTERLEAVE: 'pointerleave',\n  POINTERCANCEL: 'pointercancel'\n};\n","/**\n * @module ol/geom/Point\n */\nimport {createOrUpdateFromCoordinate, containsXY} from '../extent.js';\nimport GeometryType from './GeometryType.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {deflateCoordinate} from './flat/deflate.js';\nimport {squaredDistance as squaredDx} from '../math.js';\n\n/**\n * @classdesc\n * Point geometry.\n *\n * @api\n */\nclass Point extends SimpleGeometry {\n\n  /**\n   * @param {import(\"../coordinate.js\").Coordinate} coordinates Coordinates.\n   * @param {import(\"./GeometryLayout.js\").default=} opt_layout Layout.\n   */\n  constructor(coordinates, opt_layout) {\n    super();\n    this.setCoordinates(coordinates, opt_layout);\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!Point} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    const point = new Point(this.flatCoordinates.slice(), this.layout);\n    return point;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    const flatCoordinates = this.flatCoordinates;\n    const squaredDistance = squaredDx(x, y, flatCoordinates[0], flatCoordinates[1]);\n    if (squaredDistance < minSquaredDistance) {\n      const stride = this.stride;\n      for (let i = 0; i < stride; ++i) {\n        closestPoint[i] = flatCoordinates[i];\n      }\n      closestPoint.length = stride;\n      return squaredDistance;\n    } else {\n      return minSquaredDistance;\n    }\n  }\n\n  /**\n   * Return the coordinate of the point.\n   * @return {import(\"../coordinate.js\").Coordinate} Coordinates.\n   * @override\n   * @api\n   */\n  getCoordinates() {\n    return !this.flatCoordinates ? [] : this.flatCoordinates.slice();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  computeExtent(extent) {\n    return createOrUpdateFromCoordinate(this.flatCoordinates, extent);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.POINT;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    return containsXY(extent, this.flatCoordinates[0], this.flatCoordinates[1]);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  setCoordinates(coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 0);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = deflateCoordinate(\n      this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  }\n}\n\n\nexport default Point;\n","/**\n * @module ol/interaction/Property\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  ACTIVE: 'active'\n};\n","/**\n * @module ol/interaction/Interaction\n */\nimport BaseObject from '../Object.js';\nimport {easeOut, linear} from '../easing.js';\nimport InteractionProperty from './Property.js';\nimport {clamp} from '../math.js';\n\n\n/**\n * Object literal with config options for interactions.\n * @typedef {Object} InteractionOptions\n * @property {function(import(\"../MapBrowserEvent.js\").default):boolean} handleEvent\n * Method called by the map to notify the interaction that a browser event was\n * dispatched to the map. If the function returns a falsy value, propagation of\n * the event to other interactions in the map's interactions chain will be\n * prevented (this includes functions with no explicit return).\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * User actions that change the state of the map. Some are similar to controls,\n * but are not associated with a DOM element.\n * For example, {@link module:ol/interaction/KeyboardZoom~KeyboardZoom} is\n * functionally the same as {@link module:ol/control/Zoom~Zoom}, but triggered\n * by a keyboard event not a button element event.\n * Although interactions do not have a DOM element, some of them do render\n * vectors and so are visible on the screen.\n * @api\n */\nclass Interaction extends BaseObject {\n  /**\n   * @param {InteractionOptions} options Options.\n   */\n  constructor(options) {\n    super();\n\n    if (options.handleEvent) {\n      this.handleEvent = options.handleEvent;\n    }\n\n    /**\n     * @private\n     * @type {import(\"../PluggableMap.js\").default}\n     */\n    this.map_ = null;\n\n    this.setActive(true);\n  }\n\n  /**\n   * Return whether the interaction is currently active.\n   * @return {boolean} `true` if the interaction is active, `false` otherwise.\n   * @observable\n   * @api\n   */\n  getActive() {\n    return /** @type {boolean} */ (this.get(InteractionProperty.ACTIVE));\n  }\n\n  /**\n   * Get the map associated with this interaction.\n   * @return {import(\"../PluggableMap.js\").default} Map.\n   * @api\n   */\n  getMap() {\n    return this.map_;\n  }\n\n  /**\n   * Handles the {@link module:ol/MapBrowserEvent map browser event}.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n   * @return {boolean} `false` to stop event propagation.\n   * @api\n   */\n  handleEvent(mapBrowserEvent) {\n    return true;\n  }\n\n  /**\n   * Activate or deactivate the interaction.\n   * @param {boolean} active Active.\n   * @observable\n   * @api\n   */\n  setActive(active) {\n    this.set(InteractionProperty.ACTIVE, active);\n  }\n\n  /**\n   * Remove the interaction from its current map and attach it to the new map.\n   * Subclasses may set up event handlers to get notified about changes to\n   * the map here.\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   */\n  setMap(map) {\n    this.map_ = map;\n  }\n}\n\n\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {import(\"../coordinate.js\").Coordinate} delta Delta.\n * @param {number=} opt_duration Duration.\n */\nexport function pan(view, delta, opt_duration) {\n  const currentCenter = view.getCenter();\n  if (currentCenter) {\n    const center = view.constrainCenter(\n      [currentCenter[0] + delta[0], currentCenter[1] + delta[1]]);\n    if (opt_duration) {\n      view.animate({\n        duration: opt_duration,\n        easing: linear,\n        center: center\n      });\n    } else {\n      view.setCenter(center);\n    }\n  }\n}\n\n\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {number|undefined} rotation Rotation.\n * @param {import(\"../coordinate.js\").Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n */\nexport function rotate(view, rotation, opt_anchor, opt_duration) {\n  rotation = view.constrainRotation(rotation, 0);\n  rotateWithoutConstraints(view, rotation, opt_anchor, opt_duration);\n}\n\n\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {number|undefined} rotation Rotation.\n * @param {import(\"../coordinate.js\").Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n */\nexport function rotateWithoutConstraints(view, rotation, opt_anchor, opt_duration) {\n  if (rotation !== undefined) {\n    const currentRotation = view.getRotation();\n    const currentCenter = view.getCenter();\n    if (currentRotation !== undefined && currentCenter && opt_duration > 0) {\n      view.animate({\n        rotation: rotation,\n        anchor: opt_anchor,\n        duration: opt_duration,\n        easing: easeOut\n      });\n    } else {\n      view.rotate(rotation, opt_anchor);\n    }\n  }\n}\n\n\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {number|undefined} resolution Resolution to go to.\n * @param {import(\"../coordinate.js\").Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n * @param {number=} opt_direction Zooming direction; > 0 indicates\n *     zooming out, in which case the constraints system will select\n *     the largest nearest resolution; < 0 indicates zooming in, in\n *     which case the constraints system will select the smallest\n *     nearest resolution; == 0 indicates that the zooming direction\n *     is unknown/not relevant, in which case the constraints system\n *     will select the nearest resolution. If not defined 0 is\n *     assumed.\n */\nexport function zoom(view, resolution, opt_anchor, opt_duration, opt_direction) {\n  resolution = view.constrainResolution(resolution, 0, opt_direction);\n  zoomWithoutConstraints(view, resolution, opt_anchor, opt_duration);\n}\n\n\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {number} delta Delta from previous zoom level.\n * @param {import(\"../coordinate.js\").Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n */\nexport function zoomByDelta(view, delta, opt_anchor, opt_duration) {\n  const currentResolution = view.getResolution();\n  let resolution = view.constrainResolution(currentResolution, delta, 0);\n\n  if (resolution !== undefined) {\n    const resolutions = view.getResolutions();\n    resolution = clamp(\n      resolution,\n      view.getMinResolution() || resolutions[resolutions.length - 1],\n      view.getMaxResolution() || resolutions[0]);\n  }\n\n  // If we have a constraint on center, we need to change the anchor so that the\n  // new center is within the extent. We first calculate the new center, apply\n  // the constraint to it, and then calculate back the anchor\n  if (opt_anchor && resolution !== undefined && resolution !== currentResolution) {\n    const currentCenter = view.getCenter();\n    let center = view.calculateCenterZoom(resolution, opt_anchor);\n    center = view.constrainCenter(center);\n\n    opt_anchor = [\n      (resolution * currentCenter[0] - currentResolution * center[0]) /\n          (resolution - currentResolution),\n      (resolution * currentCenter[1] - currentResolution * center[1]) /\n          (resolution - currentResolution)\n    ];\n  }\n\n  zoomWithoutConstraints(view, resolution, opt_anchor, opt_duration);\n}\n\n\n/**\n * @param {import(\"../View.js\").default} view View.\n * @param {number|undefined} resolution Resolution to go to.\n * @param {import(\"../coordinate.js\").Coordinate=} opt_anchor Anchor coordinate.\n * @param {number=} opt_duration Duration.\n */\nexport function zoomWithoutConstraints(view, resolution, opt_anchor, opt_duration) {\n  if (resolution) {\n    const currentResolution = view.getResolution();\n    const currentCenter = view.getCenter();\n    if (currentResolution !== undefined && currentCenter &&\n        resolution !== currentResolution && opt_duration) {\n      view.animate({\n        resolution: resolution,\n        anchor: opt_anchor,\n        duration: opt_duration,\n        easing: easeOut\n      });\n    } else {\n      if (opt_anchor) {\n        const center = view.calculateCenterZoom(resolution, opt_anchor);\n        view.setCenter(center);\n      }\n      view.setResolution(resolution);\n    }\n  }\n}\n\nexport default Interaction;\n","/**\n * @module ol/has\n */\n\nconst ua = typeof navigator !== 'undefined' ?\n  navigator.userAgent.toLowerCase() : '';\n\n/**\n * User agent string says we are dealing with Firefox as browser.\n * @type {boolean}\n */\nexport const FIREFOX = ua.indexOf('firefox') !== -1;\n\n/**\n * User agent string says we are dealing with Safari as browser.\n * @type {boolean}\n */\nexport const SAFARI = ua.indexOf('safari') !== -1 && ua.indexOf('chrom') == -1;\n\n/**\n * User agent string says we are dealing with a WebKit engine.\n * @type {boolean}\n */\nexport const WEBKIT = ua.indexOf('webkit') !== -1 && ua.indexOf('edge') == -1;\n\n/**\n * User agent string says we are dealing with a Mac as platform.\n * @type {boolean}\n */\nexport const MAC = ua.indexOf('macintosh') !== -1;\n\n\n/**\n * The ratio between physical pixels and device-independent pixels\n * (dips) on the device (`window.devicePixelRatio`).\n * @const\n * @type {number}\n * @api\n */\nexport const DEVICE_PIXEL_RATIO = window.devicePixelRatio || 1;\n\n\n/**\n * True if the browser's Canvas implementation implements {get,set}LineDash.\n * @type {boolean}\n */\nexport const CANVAS_LINE_DASH = function() {\n  let has = false;\n  try {\n    has = !!document.createElement('canvas').getContext('2d').setLineDash;\n  } catch (e) {\n    // pass\n  }\n  return has;\n}();\n\n\n/**\n * Is HTML5 geolocation supported in the current browser?\n * @const\n * @type {boolean}\n * @api\n */\nexport const GEOLOCATION = 'geolocation' in navigator;\n\n\n/**\n * True if browser supports touch events.\n * @const\n * @type {boolean}\n * @api\n */\nexport const TOUCH = 'ontouchstart' in window;\n\n\n/**\n * True if browser supports pointer events.\n * @const\n * @type {boolean}\n */\nexport const POINTER = 'PointerEvent' in window;\n\n\n/**\n * True if browser supports ms pointer events (IE 10).\n * @const\n * @type {boolean}\n */\nexport const MSPOINTER = !!(navigator.msPointerEnabled);\n\n\nexport {HAS as WEBGL} from './webgl.js';\n","/**\n * @module ol/events/Event\n */\n\n/**\n * @classdesc\n * Stripped down implementation of the W3C DOM Level 2 Event interface.\n * See https://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-interface.\n *\n * This implementation only provides `type` and `target` properties, and\n * `stopPropagation` and `preventDefault` methods. It is meant as base class\n * for higher level events defined in the library, and works with\n * {@link module:ol/events/Target~Target}.\n */\nclass Event {\n\n  /**\n   * @param {string} type Type.\n   */\n  constructor(type) {\n\n    /**\n     * @type {boolean}\n     */\n    this.propagationStopped;\n\n    /**\n     * The event type.\n     * @type {string}\n     * @api\n     */\n    this.type = type;\n\n    /**\n     * The event target.\n     * @type {Object}\n     * @api\n     */\n    this.target = null;\n  }\n\n  /**\n   * Stop event propagation.\n   * @api\n   */\n  preventDefault() {\n    this.propagationStopped = true;\n  }\n\n  /**\n   * Stop event propagation.\n   * @api\n   */\n  stopPropagation() {\n    this.propagationStopped = true;\n  }\n\n}\n\n\n/**\n * @param {Event|import(\"./Event.js\").default} evt Event\n */\nexport function stopPropagation(evt) {\n  evt.stopPropagation();\n}\n\n\n/**\n * @param {Event|import(\"./Event.js\").default} evt Event\n */\nexport function preventDefault(evt) {\n  evt.preventDefault();\n}\n\nexport default Event;\n","/**\n * @module ol/featureloader\n */\nimport {VOID} from './functions.js';\nimport FormatType from './format/FormatType.js';\n\n/**\n * {@link module:ol/source/Vector} sources use a function of this type to\n * load features.\n *\n * This function takes an {@link module:ol/extent~Extent} representing the area to be loaded,\n * a `{number}` representing the resolution (map units per pixel) and an\n * {@link module:ol/proj/Projection} for the projection  as\n * arguments. `this` within the function is bound to the\n * {@link module:ol/source/Vector} it's called from.\n *\n * The function is responsible for loading the features and adding them to the\n * source.\n * @typedef {function(this:(import(\"./source/Vector\").default|import(\"./VectorTile.js\").default), import(\"./extent.js\").Extent, number,\n *                    import(\"./proj/Projection.js\").default)} FeatureLoader\n * @api\n */\n\n\n/**\n * {@link module:ol/source/Vector} sources use a function of this type to\n * get the url to load features from.\n *\n * This function takes an {@link module:ol/extent~Extent} representing the area\n * to be loaded, a `{number}` representing the resolution (map units per pixel)\n * and an {@link module:ol/proj/Projection} for the projection  as\n * arguments and returns a `{string}` representing the URL.\n * @typedef {function(import(\"./extent.js\").Extent, number, import(\"./proj/Projection.js\").default): string} FeatureUrlFunction\n * @api\n */\n\n\n/**\n * @param {string|FeatureUrlFunction} url Feature URL service.\n * @param {import(\"./format/Feature.js\").default} format Feature format.\n * @param {function(this:import(\"./VectorTile.js\").default, Array<import(\"./Feature.js\").default>, import(\"./proj/Projection.js\").default, import(\"./extent.js\").Extent)|function(this:import(\"./source/Vector\").default, Array<import(\"./Feature.js\").default>)} success\n *     Function called with the loaded features and optionally with the data\n *     projection. Called with the vector tile or source as `this`.\n * @param {function(this:import(\"./VectorTile.js\").default)|function(this:import(\"./source/Vector\").default)} failure\n *     Function called when loading failed. Called with the vector tile or\n *     source as `this`.\n * @return {FeatureLoader} The feature loader.\n */\nexport function loadFeaturesXhr(url, format, success, failure) {\n  return (\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @param {import(\"./proj/Projection.js\").default} projection Projection.\n     * @this {import(\"./source/Vector\").default|import(\"./VectorTile.js\").default}\n     */\n    function(extent, resolution, projection) {\n      const xhr = new XMLHttpRequest();\n      xhr.open('GET',\n        typeof url === 'function' ? url(extent, resolution, projection) : url,\n        true);\n      if (format.getType() == FormatType.ARRAY_BUFFER) {\n        xhr.responseType = 'arraybuffer';\n      }\n      /**\n       * @param {Event} event Event.\n       * @private\n       */\n      xhr.onload = function(event) {\n        // status will be 0 for file:// urls\n        if (!xhr.status || xhr.status >= 200 && xhr.status < 300) {\n          const type = format.getType();\n          /** @type {Document|Node|Object|string|undefined} */\n          let source;\n          if (type == FormatType.JSON || type == FormatType.TEXT) {\n            source = xhr.responseText;\n          } else if (type == FormatType.XML) {\n            source = xhr.responseXML;\n            if (!source) {\n              source = new DOMParser().parseFromString(xhr.responseText, 'application/xml');\n            }\n          } else if (type == FormatType.ARRAY_BUFFER) {\n            source = /** @type {ArrayBuffer} */ (xhr.response);\n          }\n          if (source) {\n            success.call(this, format.readFeatures(source,\n              {featureProjection: projection}),\n            format.readProjection(source), format.getLastExtent());\n          } else {\n            failure.call(this);\n          }\n        } else {\n          failure.call(this);\n        }\n      }.bind(this);\n      /**\n       * @private\n       */\n      xhr.onerror = function() {\n        failure.call(this);\n      }.bind(this);\n      xhr.send();\n    }\n  );\n}\n\n\n/**\n * Create an XHR feature loader for a `url` and `format`. The feature loader\n * loads features (with XHR), parses the features, and adds them to the\n * vector source.\n * @param {string|FeatureUrlFunction} url Feature URL service.\n * @param {import(\"./format/Feature.js\").default} format Feature format.\n * @return {FeatureLoader} The feature loader.\n * @api\n */\nexport function xhr(url, format) {\n  return loadFeaturesXhr(url, format,\n    /**\n     * @param {Array<import(\"./Feature.js\").default>} features The loaded features.\n     * @param {import(\"./proj/Projection.js\").default} dataProjection Data\n     * projection.\n     * @this {import(\"./source/Vector\").default|import(\"./VectorTile.js\").default}\n     */\n    function(features, dataProjection) {\n      const sourceOrTile = /** @type {?} */ (this);\n      if (typeof sourceOrTile.addFeatures === 'function') {\n        /** @type {import(\"./source/Vector\").default} */ (sourceOrTile).addFeatures(features);\n      }\n    }, /* FIXME handle error */ VOID);\n}\n","/**\n * @module ol/loadingstrategy\n */\n\n\n/**\n * Strategy function for loading all features with a single request.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array<import(\"./extent.js\").Extent>} Extents.\n * @api\n */\nexport function all(extent, resolution) {\n  return [[-Infinity, -Infinity, Infinity, Infinity]];\n}\n\n\n/**\n * Strategy function for loading features based on the view's extent and\n * resolution.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number} resolution Resolution.\n * @return {Array<import(\"./extent.js\").Extent>} Extents.\n * @api\n */\nexport function bbox(extent, resolution) {\n  return [extent];\n}\n\n\n/**\n * Creates a strategy function for loading features based on a tile grid.\n * @param {import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {function(import(\"./extent.js\").Extent, number): Array<import(\"./extent.js\").Extent>} Loading strategy.\n * @api\n */\nexport function tile(tileGrid) {\n  return (\n    /**\n     * @param {import(\"./extent.js\").Extent} extent Extent.\n     * @param {number} resolution Resolution.\n     * @return {Array<import(\"./extent.js\").Extent>} Extents.\n     */\n    function(extent, resolution) {\n      const z = tileGrid.getZForResolution(resolution);\n      const tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n      /** @type {Array<import(\"./extent.js\").Extent>} */\n      const extents = [];\n      /** @type {import(\"./tilecoord.js\").TileCoord} */\n      const tileCoord = [z, 0, 0];\n      for (tileCoord[1] = tileRange.minX; tileCoord[1] <= tileRange.maxX; ++tileCoord[1]) {\n        for (tileCoord[2] = tileRange.minY; tileCoord[2] <= tileRange.maxY; ++tileCoord[2]) {\n          extents.push(tileGrid.getTileCoordExtent(tileCoord));\n        }\n      }\n      return extents;\n    }\n  );\n}\n","/**\n * @module ol/source/VectorEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when a feature is added to the source.\n   * @event ol/source/Vector.VectorSourceEvent#addfeature\n   * @api\n   */\n  ADDFEATURE: 'addfeature',\n\n  /**\n   * Triggered when a feature is updated.\n   * @event ol/source/Vector.VectorSourceEvent#changefeature\n   * @api\n   */\n  CHANGEFEATURE: 'changefeature',\n\n  /**\n   * Triggered when the clear method is called on the source.\n   * @event ol/source/Vector.VectorSourceEvent#clear\n   * @api\n   */\n  CLEAR: 'clear',\n\n  /**\n   * Triggered when a feature is removed from the source.\n   * See {@link module:ol/source/Vector#clear source.clear()} for exceptions.\n   * @event ol/source/Vector.VectorSourceEvent#removefeature\n   * @api\n   */\n  REMOVEFEATURE: 'removefeature'\n};\n","/**\n * @module ol/structs/RBush\n */\nimport {getUid} from '../util.js';\nimport rbush from 'rbush';\nimport {createOrUpdate, equals} from '../extent.js';\nimport {isEmpty} from '../obj.js';\n\n/**\n * @typedef {Object} Entry\n * @property {number} minX\n * @property {number} minY\n * @property {number} maxX\n * @property {number} maxY\n * @property {Object} [value]\n */\n\n/**\n * @classdesc\n * Wrapper around the RBush by Vladimir Agafonkin.\n * See https://github.com/mourner/rbush.\n *\n * @template T\n */\nclass RBush {\n  /**\n   * @param {number=} opt_maxEntries Max entries.\n   */\n  constructor(opt_maxEntries) {\n\n    /**\n     * @private\n     */\n    this.rbush_ = rbush(opt_maxEntries, undefined);\n\n    /**\n     * A mapping between the objects added to this rbush wrapper\n     * and the objects that are actually added to the internal rbush.\n     * @private\n     * @type {Object<string, Entry>}\n     */\n    this.items_ = {};\n\n  }\n\n  /**\n   * Insert a value into the RBush.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {T} value Value.\n   */\n  insert(extent, value) {\n    /** @type {Entry} */\n    const item = {\n      minX: extent[0],\n      minY: extent[1],\n      maxX: extent[2],\n      maxY: extent[3],\n      value: value\n    };\n\n    this.rbush_.insert(item);\n    this.items_[getUid(value)] = item;\n  }\n\n\n  /**\n   * Bulk-insert values into the RBush.\n   * @param {Array<import(\"../extent.js\").Extent>} extents Extents.\n   * @param {Array<T>} values Values.\n   */\n  load(extents, values) {\n    const items = new Array(values.length);\n    for (let i = 0, l = values.length; i < l; i++) {\n      const extent = extents[i];\n      const value = values[i];\n\n      /** @type {Entry} */\n      const item = {\n        minX: extent[0],\n        minY: extent[1],\n        maxX: extent[2],\n        maxY: extent[3],\n        value: value\n      };\n      items[i] = item;\n      this.items_[getUid(value)] = item;\n    }\n    this.rbush_.load(items);\n  }\n\n\n  /**\n   * Remove a value from the RBush.\n   * @param {T} value Value.\n   * @return {boolean} Removed.\n   */\n  remove(value) {\n    const uid = getUid(value);\n\n    // get the object in which the value was wrapped when adding to the\n    // internal rbush. then use that object to do the removal.\n    const item = this.items_[uid];\n    delete this.items_[uid];\n    return this.rbush_.remove(item) !== null;\n  }\n\n\n  /**\n   * Update the extent of a value in the RBush.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {T} value Value.\n   */\n  update(extent, value) {\n    const item = this.items_[getUid(value)];\n    const bbox = [item.minX, item.minY, item.maxX, item.maxY];\n    if (!equals(bbox, extent)) {\n      this.remove(value);\n      this.insert(extent, value);\n    }\n  }\n\n\n  /**\n   * Return all values in the RBush.\n   * @return {Array<T>} All.\n   */\n  getAll() {\n    const items = this.rbush_.all();\n    return items.map(function(item) {\n      return item.value;\n    });\n  }\n\n\n  /**\n   * Return all values in the given extent.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {Array<T>} All in extent.\n   */\n  getInExtent(extent) {\n    /** @type {Entry} */\n    const bbox = {\n      minX: extent[0],\n      minY: extent[1],\n      maxX: extent[2],\n      maxY: extent[3]\n    };\n    const items = this.rbush_.search(bbox);\n    return items.map(function(item) {\n      return item.value;\n    });\n  }\n\n\n  /**\n   * Calls a callback function with each value in the tree.\n   * If the callback returns a truthy value, this value is returned without\n   * checking the rest of the tree.\n   * @param {function(this: S, T): *} callback Callback.\n   * @param {S=} opt_this The object to use as `this` in `callback`.\n   * @return {*} Callback return value.\n   * @template S\n   */\n  forEach(callback, opt_this) {\n    return this.forEach_(this.getAll(), callback, opt_this);\n  }\n\n\n  /**\n   * Calls a callback function with each value in the provided extent.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {function(this: S, T): *} callback Callback.\n   * @param {S=} opt_this The object to use as `this` in `callback`.\n   * @return {*} Callback return value.\n   * @template S\n   */\n  forEachInExtent(extent, callback, opt_this) {\n    return this.forEach_(this.getInExtent(extent), callback, opt_this);\n  }\n\n\n  /**\n   * @param {Array<T>} values Values.\n   * @param {function(this: S, T): *} callback Callback.\n   * @param {S=} opt_this The object to use as `this` in `callback`.\n   * @private\n   * @return {*} Callback return value.\n   * @template S\n   */\n  forEach_(values, callback, opt_this) {\n    let result;\n    for (let i = 0, l = values.length; i < l; i++) {\n      result = callback.call(opt_this, values[i]);\n      if (result) {\n        return result;\n      }\n    }\n    return result;\n  }\n\n\n  /**\n   * @return {boolean} Is empty.\n   */\n  isEmpty() {\n    return isEmpty(this.items_);\n  }\n\n\n  /**\n   * Remove all values from the RBush.\n   */\n  clear() {\n    this.rbush_.clear();\n    this.items_ = {};\n  }\n\n\n  /**\n   * @param {import(\"../extent.js\").Extent=} opt_extent Extent.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   */\n  getExtent(opt_extent) {\n    const data = this.rbush_.toJSON();\n    return createOrUpdate(data.minX, data.minY, data.maxX, data.maxY, opt_extent);\n  }\n\n\n  /**\n   * @param {RBush} rbush R-Tree.\n   */\n  concat(rbush) {\n    this.rbush_.load(rbush.rbush_.all());\n    for (const i in rbush.items_) {\n      this.items_[i] = rbush.items_[i];\n    }\n  }\n\n}\n\n\nexport default RBush;\n","/**\n * @module ol/source/Vector\n */\n\nimport {getUid} from '../util.js';\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport {extend} from '../array.js';\nimport {assert} from '../asserts.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport Event from '../events/Event.js';\nimport EventType from '../events/EventType.js';\nimport {containsExtent, equals} from '../extent.js';\nimport {xhr} from '../featureloader.js';\nimport {TRUE, VOID} from '../functions.js';\nimport {all as allStrategy} from '../loadingstrategy.js';\nimport {isEmpty, getValues} from '../obj.js';\nimport Source from './Source.js';\nimport SourceState from './State.js';\nimport VectorEventType from './VectorEventType.js';\nimport RBush from '../structs/RBush.js';\n\n/**\n * A function that takes an {@link module:ol/extent~Extent} and a resolution as arguments, and\n * returns an array of {@link module:ol/extent~Extent} with the extents to load. Usually this\n * is one of the standard {@link module:ol/loadingstrategy} strategies.\n *\n * @typedef {function(import(\"../extent.js\").Extent, number): Array<import(\"../extent.js\").Extent>} LoadingStrategy\n * @api\n */\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Vector} instances are instances of this\n * type.\n */\nexport class VectorSourceEvent extends Event {\n\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../Feature.js\").default=} opt_feature Feature.\n   */\n  constructor(type, opt_feature) {\n\n    super(type);\n\n    /**\n     * The feature being added or removed.\n     * @type {import(\"../Feature.js\").default|undefined}\n     * @api\n     */\n    this.feature = opt_feature;\n\n  }\n\n}\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {Array<import(\"../Feature.js\").default>|Collection<import(\"../Feature.js\").default>} [features]\n * Features. If provided as {@link module:ol/Collection}, the features in the source\n * and the collection will stay in sync.\n * @property {import(\"../format/Feature.js\").default} [format] The feature format used by the XHR\n * feature loader when `url` is set. Required if `url` is set, otherwise ignored.\n * @property {import(\"../featureloader.js\").FeatureLoader} [loader]\n * The loader function used to load features, from a remote source for example.\n * If this is not set and `url` is set, the source will create and use an XHR\n * feature loader.\n *\n * Example:\n *\n * ```js\n * import {Vector} from 'ol/source';\n * import {GeoJSON} from 'ol/format';\n * import {bbox} from 'ol/loadingstrategy';\n *\n * var vectorSource = new Vector({\n *   format: new GeoJSON(),\n *   loader: function(extent, resolution, projection) {\n *      var proj = projection.getCode();\n *      var url = 'https://ahocevar.com/geoserver/wfs?service=WFS&' +\n *          'version=1.1.0&request=GetFeature&typename=osm:water_areas&' +\n *          'outputFormat=application/json&srsname=' + proj + '&' +\n *          'bbox=' + extent.join(',') + ',' + proj;\n *      var xhr = new XMLHttpRequest();\n *      xhr.open('GET', url);\n *      var onError = function() {\n *        vectorSource.removeLoadedExtent(extent);\n *      }\n *      xhr.onerror = onError;\n *      xhr.onload = function() {\n *        if (xhr.status == 200) {\n *          vectorSource.addFeatures(\n *              vectorSource.getFormat().readFeatures(xhr.responseText));\n *        } else {\n *          onError();\n *        }\n *      }\n *      xhr.send();\n *    },\n *    strategy: bbox\n *  });\n * ```\n * @property {boolean} [overlaps=true] This source may have overlapping geometries.\n * Setting this to `false` (e.g. for sources with polygons that represent administrative\n * boundaries or TopoJSON sources) allows the renderer to optimise fill and\n * stroke operations.\n * @property {LoadingStrategy} [strategy] The loading strategy to use.\n * By default an {@link module:ol/loadingstrategy~all}\n * strategy is used, a one-off strategy which loads all features at once.\n * @property {string|import(\"../featureloader.js\").FeatureUrlFunction} [url]\n * Setting this option instructs the source to load features using an XHR loader\n * (see {@link module:ol/featureloader~xhr}). Use a `string` and an\n * {@link module:ol/loadingstrategy~all} for a one-off download of all features from\n * the given URL. Use a {@link module:ol/featureloader~FeatureUrlFunction} to generate the url with\n * other loading strategies.\n * Requires `format` to be set as well.\n * When default XHR feature loader is provided, the features will\n * be transformed from the data projection to the view projection\n * during parsing. If your remote data source does not advertise its projection\n * properly, this transformation will be incorrect. For some formats, the\n * default projection (usually EPSG:4326) can be overridden by setting the\n * dataProjection constructor option on the format.\n * Note that if a source contains non-feature data, such as a GeoJSON geometry\n * or a KML NetworkLink, these will be ignored. Use a custom loader to load these.\n * @property {boolean} [useSpatialIndex=true]\n * By default, an RTree is used as spatial index. When features are removed and\n * added frequently, and the total number of features is low, setting this to\n * `false` may improve performance.\n *\n * Note that\n * {@link module:ol/source/Vector~VectorSource#getFeaturesInExtent},\n * {@link module:ol/source/Vector~VectorSource#getClosestFeatureToCoordinate} and\n * {@link module:ol/source/Vector~VectorSource#getExtent} cannot be used when `useSpatialIndex` is\n * set to `false`, and {@link module:ol/source/Vector~VectorSource#forEachFeatureInExtent} will loop\n * through all features.\n *\n * When set to `false`, the features will be maintained in an\n * {@link module:ol/Collection}, which can be retrieved through\n * {@link module:ol/source/Vector~VectorSource#getFeaturesCollection}.\n * @property {boolean} [wrapX=true] Wrap the world horizontally. For vector editing across the\n * -180 and 180 meridians to work properly, this should be set to `false`. The\n * resulting geometry coordinates will then exceed the world bounds.\n */\n\n\n/**\n * @classdesc\n * Provides a source of features for vector layers. Vector features provided\n * by this source are suitable for editing. See {@link module:ol/source/VectorTile~VectorTile} for\n * vector data that is optimized for rendering.\n *\n * @fires ol/source/Vector.VectorSourceEvent\n * @api\n */\nclass VectorSource extends Source {\n  /**\n   * @param {Options=} opt_options Vector source options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n\n    super({\n      attributions: options.attributions,\n      projection: undefined,\n      state: SourceState.READY,\n      wrapX: options.wrapX !== undefined ? options.wrapX : true\n    });\n\n    /**\n     * @private\n     * @type {import(\"../featureloader.js\").FeatureLoader}\n     */\n    this.loader_ = VOID;\n\n    /**\n     * @private\n     * @type {import(\"../format/Feature.js\").default|undefined}\n     */\n    this.format_ = options.format;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.overlaps_ = options.overlaps == undefined ? true : options.overlaps;\n\n    /**\n     * @private\n     * @type {string|import(\"../featureloader.js\").FeatureUrlFunction|undefined}\n     */\n    this.url_ = options.url;\n\n    if (options.loader !== undefined) {\n      this.loader_ = options.loader;\n    } else if (this.url_ !== undefined) {\n      assert(this.format_, 7); // `format` must be set when `url` is set\n      // create a XHR feature loader for \"url\" and \"format\"\n      this.loader_ = xhr(this.url_, /** @type {import(\"../format/Feature.js\").default} */ (this.format_));\n    }\n\n    /**\n     * @private\n     * @type {LoadingStrategy}\n     */\n    this.strategy_ = options.strategy !== undefined ? options.strategy : allStrategy;\n\n    const useSpatialIndex =\n        options.useSpatialIndex !== undefined ? options.useSpatialIndex : true;\n\n    /**\n     * @private\n     * @type {RBush<import(\"../Feature.js\").default>}\n     */\n    this.featuresRtree_ = useSpatialIndex ? new RBush() : null;\n\n    /**\n     * @private\n     * @type {RBush<{extent: import(\"../extent.js\").Extent}>}\n     */\n    this.loadedExtentsRtree_ = new RBush();\n\n    /**\n     * @private\n     * @type {!Object<string, import(\"../Feature.js\").default>}\n     */\n    this.nullGeometryFeatures_ = {};\n\n    /**\n     * A lookup of features by id (the return from feature.getId()).\n     * @private\n     * @type {!Object<string, import(\"../Feature.js\").default>}\n     */\n    this.idIndex_ = {};\n\n    /**\n     * A lookup of features without id (keyed by getUid(feature)).\n     * @private\n     * @type {!Object<string, import(\"../Feature.js\").default>}\n     */\n    this.undefIdIndex_ = {};\n\n    /**\n     * @private\n     * @type {Object<string, Array<import(\"../events.js\").EventsKey>>}\n     */\n    this.featureChangeKeys_ = {};\n\n    /**\n     * @private\n     * @type {Collection<import(\"../Feature.js\").default>}\n     */\n    this.featuresCollection_ = null;\n\n    let collection, features;\n    if (Array.isArray(options.features)) {\n      features = options.features;\n    } else if (options.features) {\n      collection = options.features;\n      features = collection.getArray();\n    }\n    if (!useSpatialIndex && collection === undefined) {\n      collection = new Collection(features);\n    }\n    if (features !== undefined) {\n      this.addFeaturesInternal(features);\n    }\n    if (collection !== undefined) {\n      this.bindFeaturesCollection_(collection);\n    }\n\n  }\n\n  /**\n   * Add a single feature to the source.  If you want to add a batch of features\n   * at once, call {@link module:ol/source/Vector~VectorSource#addFeatures #addFeatures()}\n   * instead. A feature will not be added to the source if feature with\n   * the same id is already there. The reason for this behavior is to avoid\n   * feature duplication when using bbox or tile loading strategies.\n   * @param {import(\"../Feature.js\").default} feature Feature to add.\n   * @api\n   */\n  addFeature(feature) {\n    this.addFeatureInternal(feature);\n    this.changed();\n  }\n\n\n  /**\n   * Add a feature without firing a `change` event.\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @protected\n   */\n  addFeatureInternal(feature) {\n    const featureKey = getUid(feature);\n\n    if (!this.addToIndex_(featureKey, feature)) {\n      return;\n    }\n\n    this.setupChangeEvents_(featureKey, feature);\n\n    const geometry = feature.getGeometry();\n    if (geometry) {\n      const extent = geometry.getExtent();\n      if (this.featuresRtree_) {\n        this.featuresRtree_.insert(extent, feature);\n      }\n    } else {\n      this.nullGeometryFeatures_[featureKey] = feature;\n    }\n\n    this.dispatchEvent(\n      new VectorSourceEvent(VectorEventType.ADDFEATURE, feature));\n  }\n\n\n  /**\n   * @param {string} featureKey Unique identifier for the feature.\n   * @param {import(\"../Feature.js\").default} feature The feature.\n   * @private\n   */\n  setupChangeEvents_(featureKey, feature) {\n    this.featureChangeKeys_[featureKey] = [\n      listen(feature, EventType.CHANGE,\n        this.handleFeatureChange_, this),\n      listen(feature, ObjectEventType.PROPERTYCHANGE,\n        this.handleFeatureChange_, this)\n    ];\n  }\n\n\n  /**\n   * @param {string} featureKey Unique identifier for the feature.\n   * @param {import(\"../Feature.js\").default} feature The feature.\n   * @return {boolean} The feature is \"valid\", in the sense that it is also a\n   *     candidate for insertion into the Rtree.\n   * @private\n   */\n  addToIndex_(featureKey, feature) {\n    let valid = true;\n    const id = feature.getId();\n    if (id !== undefined) {\n      if (!(id.toString() in this.idIndex_)) {\n        this.idIndex_[id.toString()] = feature;\n      } else {\n        valid = false;\n      }\n    } else {\n      assert(!(featureKey in this.undefIdIndex_),\n        30); // The passed `feature` was already added to the source\n      this.undefIdIndex_[featureKey] = feature;\n    }\n    return valid;\n  }\n\n\n  /**\n   * Add a batch of features to the source.\n   * @param {Array<import(\"../Feature.js\").default>} features Features to add.\n   * @api\n   */\n  addFeatures(features) {\n    this.addFeaturesInternal(features);\n    this.changed();\n  }\n\n\n  /**\n   * Add features without firing a `change` event.\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @protected\n   */\n  addFeaturesInternal(features) {\n    const extents = [];\n    const newFeatures = [];\n    const geometryFeatures = [];\n\n    for (let i = 0, length = features.length; i < length; i++) {\n      const feature = features[i];\n      const featureKey = getUid(feature);\n      if (this.addToIndex_(featureKey, feature)) {\n        newFeatures.push(feature);\n      }\n    }\n\n    for (let i = 0, length = newFeatures.length; i < length; i++) {\n      const feature = newFeatures[i];\n      const featureKey = getUid(feature);\n      this.setupChangeEvents_(featureKey, feature);\n\n      const geometry = feature.getGeometry();\n      if (geometry) {\n        const extent = geometry.getExtent();\n        extents.push(extent);\n        geometryFeatures.push(feature);\n      } else {\n        this.nullGeometryFeatures_[featureKey] = feature;\n      }\n    }\n    if (this.featuresRtree_) {\n      this.featuresRtree_.load(extents, geometryFeatures);\n    }\n\n    for (let i = 0, length = newFeatures.length; i < length; i++) {\n      this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE, newFeatures[i]));\n    }\n  }\n\n\n  /**\n   * @param {!Collection<import(\"../Feature.js\").default>} collection Collection.\n   * @private\n   */\n  bindFeaturesCollection_(collection) {\n    let modifyingCollection = false;\n    listen(this, VectorEventType.ADDFEATURE,\n      /**\n       * @param {VectorSourceEvent} evt The vector source event\n       */\n      function(evt) {\n        if (!modifyingCollection) {\n          modifyingCollection = true;\n          collection.push(evt.feature);\n          modifyingCollection = false;\n        }\n      });\n    listen(this, VectorEventType.REMOVEFEATURE,\n      /**\n       * @param {VectorSourceEvent} evt The vector source event\n       */\n      function(evt) {\n        if (!modifyingCollection) {\n          modifyingCollection = true;\n          collection.remove(evt.feature);\n          modifyingCollection = false;\n        }\n      });\n    listen(collection, CollectionEventType.ADD,\n      /**\n       * @param {import(\"../Collection.js\").CollectionEvent} evt The collection event\n       */\n      function(evt) {\n        if (!modifyingCollection) {\n          modifyingCollection = true;\n          this.addFeature(/** @type {import(\"../Feature.js\").default} */ (evt.element));\n          modifyingCollection = false;\n        }\n      }, this);\n    listen(collection, CollectionEventType.REMOVE,\n      /**\n       * @param {import(\"../Collection.js\").CollectionEvent} evt The collection event\n       */\n      function(evt) {\n        if (!modifyingCollection) {\n          modifyingCollection = true;\n          this.removeFeature(/** @type {import(\"../Feature.js\").default} */ (evt.element));\n          modifyingCollection = false;\n        }\n      }, this);\n    this.featuresCollection_ = collection;\n  }\n\n\n  /**\n   * Remove all features from the source.\n   * @param {boolean=} opt_fast Skip dispatching of {@link module:ol/source/Vector.VectorSourceEvent#removefeature} events.\n   * @api\n   */\n  clear(opt_fast) {\n    if (opt_fast) {\n      for (const featureId in this.featureChangeKeys_) {\n        const keys = this.featureChangeKeys_[featureId];\n        keys.forEach(unlistenByKey);\n      }\n      if (!this.featuresCollection_) {\n        this.featureChangeKeys_ = {};\n        this.idIndex_ = {};\n        this.undefIdIndex_ = {};\n      }\n    } else {\n      if (this.featuresRtree_) {\n        this.featuresRtree_.forEach(this.removeFeatureInternal, this);\n        for (const id in this.nullGeometryFeatures_) {\n          this.removeFeatureInternal(this.nullGeometryFeatures_[id]);\n        }\n      }\n    }\n    if (this.featuresCollection_) {\n      this.featuresCollection_.clear();\n    }\n\n    if (this.featuresRtree_) {\n      this.featuresRtree_.clear();\n    }\n    this.loadedExtentsRtree_.clear();\n    this.nullGeometryFeatures_ = {};\n\n    const clearEvent = new VectorSourceEvent(VectorEventType.CLEAR);\n    this.dispatchEvent(clearEvent);\n    this.changed();\n  }\n\n\n  /**\n   * Iterate through all features on the source, calling the provided callback\n   * with each one.  If the callback returns any \"truthy\" value, iteration will\n   * stop and the function will return the same value.\n   * Note: this function only iterate through the feature that have a defined geometry.\n   *\n   * @param {function(import(\"../Feature.js\").default): T} callback Called with each feature\n   *     on the source.  Return a truthy value to stop iteration.\n   * @return {T|undefined} The return value from the last call to the callback.\n   * @template T\n   * @api\n   */\n  forEachFeature(callback) {\n    if (this.featuresRtree_) {\n      return this.featuresRtree_.forEach(callback);\n    } else if (this.featuresCollection_) {\n      this.featuresCollection_.forEach(callback);\n    }\n  }\n\n\n  /**\n   * Iterate through all features whose geometries contain the provided\n   * coordinate, calling the callback with each feature.  If the callback returns\n   * a \"truthy\" value, iteration will stop and the function will return the same\n   * value.\n   *\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {function(import(\"../Feature.js\").default): T} callback Called with each feature\n   *     whose goemetry contains the provided coordinate.\n   * @return {T|undefined} The return value from the last call to the callback.\n   * @template T\n   */\n  forEachFeatureAtCoordinateDirect(coordinate, callback) {\n    const extent = [coordinate[0], coordinate[1], coordinate[0], coordinate[1]];\n    return this.forEachFeatureInExtent(extent, function(feature) {\n      const geometry = feature.getGeometry();\n      if (geometry.intersectsCoordinate(coordinate)) {\n        return callback(feature);\n      } else {\n        return undefined;\n      }\n    });\n  }\n\n\n  /**\n   * Iterate through all features whose bounding box intersects the provided\n   * extent (note that the feature's geometry may not intersect the extent),\n   * calling the callback with each feature.  If the callback returns a \"truthy\"\n   * value, iteration will stop and the function will return the same value.\n   *\n   * If you are interested in features whose geometry intersects an extent, call\n   * the {@link module:ol/source/Vector~VectorSource#forEachFeatureIntersectingExtent #forEachFeatureIntersectingExtent()} method instead.\n   *\n   * When `useSpatialIndex` is set to false, this method will loop through all\n   * features, equivalent to {@link module:ol/source/Vector~VectorSource#forEachFeature #forEachFeature()}.\n   *\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {function(import(\"../Feature.js\").default): T} callback Called with each feature\n   *     whose bounding box intersects the provided extent.\n   * @return {T|undefined} The return value from the last call to the callback.\n   * @template T\n   * @api\n   */\n  forEachFeatureInExtent(extent, callback) {\n    if (this.featuresRtree_) {\n      return this.featuresRtree_.forEachInExtent(extent, callback);\n    } else if (this.featuresCollection_) {\n      this.featuresCollection_.forEach(callback);\n    }\n  }\n\n\n  /**\n   * Iterate through all features whose geometry intersects the provided extent,\n   * calling the callback with each feature.  If the callback returns a \"truthy\"\n   * value, iteration will stop and the function will return the same value.\n   *\n   * If you only want to test for bounding box intersection, call the\n   * {@link module:ol/source/Vector~VectorSource#forEachFeatureInExtent #forEachFeatureInExtent()} method instead.\n   *\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {function(import(\"../Feature.js\").default): T} callback Called with each feature\n   *     whose geometry intersects the provided extent.\n   * @return {T|undefined} The return value from the last call to the callback.\n   * @template T\n   * @api\n   */\n  forEachFeatureIntersectingExtent(extent, callback) {\n    return this.forEachFeatureInExtent(extent,\n      /**\n       * @param {import(\"../Feature.js\").default} feature Feature.\n       * @return {T|undefined} The return value from the last call to the callback.\n       */\n      function(feature) {\n        const geometry = feature.getGeometry();\n        if (geometry.intersectsExtent(extent)) {\n          const result = callback(feature);\n          if (result) {\n            return result;\n          }\n        }\n      });\n  }\n\n\n  /**\n   * Get the features collection associated with this source. Will be `null`\n   * unless the source was configured with `useSpatialIndex` set to `false`, or\n   * with an {@link module:ol/Collection} as `features`.\n   * @return {Collection<import(\"../Feature.js\").default>} The collection of features.\n   * @api\n   */\n  getFeaturesCollection() {\n    return this.featuresCollection_;\n  }\n\n\n  /**\n   * Get all features on the source in random order.\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   * @api\n   */\n  getFeatures() {\n    let features;\n    if (this.featuresCollection_) {\n      features = this.featuresCollection_.getArray();\n    } else if (this.featuresRtree_) {\n      features = this.featuresRtree_.getAll();\n      if (!isEmpty(this.nullGeometryFeatures_)) {\n        extend(features, getValues(this.nullGeometryFeatures_));\n      }\n    }\n    return (\n      /** @type {Array<import(\"../Feature.js\").default>} */ (features)\n    );\n  }\n\n\n  /**\n   * Get all features whose geometry intersects the provided coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   * @api\n   */\n  getFeaturesAtCoordinate(coordinate) {\n    const features = [];\n    this.forEachFeatureAtCoordinateDirect(coordinate, function(feature) {\n      features.push(feature);\n    });\n    return features;\n  }\n\n\n  /**\n   * Get all features in the provided extent.  Note that this returns an array of\n   * all features intersecting the given extent in random order (so it may include\n   * features whose geometries do not intersect the extent).\n   *\n   * This method is not available when the source is configured with\n   * `useSpatialIndex` set to `false`.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   * @api\n   */\n  getFeaturesInExtent(extent) {\n    return this.featuresRtree_.getInExtent(extent);\n  }\n\n\n  /**\n   * Get the closest feature to the provided coordinate.\n   *\n   * This method is not available when the source is configured with\n   * `useSpatialIndex` set to `false`.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {function(import(\"../Feature.js\").default):boolean=} opt_filter Feature filter function.\n   *     The filter function will receive one argument, the {@link module:ol/Feature feature}\n   *     and it should return a boolean value. By default, no filtering is made.\n   * @return {import(\"../Feature.js\").default} Closest feature.\n   * @api\n   */\n  getClosestFeatureToCoordinate(coordinate, opt_filter) {\n    // Find the closest feature using branch and bound.  We start searching an\n    // infinite extent, and find the distance from the first feature found.  This\n    // becomes the closest feature.  We then compute a smaller extent which any\n    // closer feature must intersect.  We continue searching with this smaller\n    // extent, trying to find a closer feature.  Every time we find a closer\n    // feature, we update the extent being searched so that any even closer\n    // feature must intersect it.  We continue until we run out of features.\n    const x = coordinate[0];\n    const y = coordinate[1];\n    let closestFeature = null;\n    const closestPoint = [NaN, NaN];\n    let minSquaredDistance = Infinity;\n    const extent = [-Infinity, -Infinity, Infinity, Infinity];\n    const filter = opt_filter ? opt_filter : TRUE;\n    this.featuresRtree_.forEachInExtent(extent,\n      /**\n       * @param {import(\"../Feature.js\").default} feature Feature.\n       */\n      function(feature) {\n        if (filter(feature)) {\n          const geometry = feature.getGeometry();\n          const previousMinSquaredDistance = minSquaredDistance;\n          minSquaredDistance = geometry.closestPointXY(\n            x, y, closestPoint, minSquaredDistance);\n          if (minSquaredDistance < previousMinSquaredDistance) {\n            closestFeature = feature;\n            // This is sneaky.  Reduce the extent that it is currently being\n            // searched while the R-Tree traversal using this same extent object\n            // is still in progress.  This is safe because the new extent is\n            // strictly contained by the old extent.\n            const minDistance = Math.sqrt(minSquaredDistance);\n            extent[0] = x - minDistance;\n            extent[1] = y - minDistance;\n            extent[2] = x + minDistance;\n            extent[3] = y + minDistance;\n          }\n        }\n      });\n    return closestFeature;\n  }\n\n\n  /**\n   * Get the extent of the features currently in the source.\n   *\n   * This method is not available when the source is configured with\n   * `useSpatialIndex` set to `false`.\n   * @param {import(\"../extent.js\").Extent=} opt_extent Destination extent. If provided, no new extent\n   *     will be created. Instead, that extent's coordinates will be overwritten.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   * @api\n   */\n  getExtent(opt_extent) {\n    return this.featuresRtree_.getExtent(opt_extent);\n  }\n\n\n  /**\n   * Get a feature by its identifier (the value returned by feature.getId()).\n   * Note that the index treats string and numeric identifiers as the same.  So\n   * `source.getFeatureById(2)` will return a feature with id `'2'` or `2`.\n   *\n   * @param {string|number} id Feature identifier.\n   * @return {import(\"../Feature.js\").default} The feature (or `null` if not found).\n   * @api\n   */\n  getFeatureById(id) {\n    const feature = this.idIndex_[id.toString()];\n    return feature !== undefined ? feature : null;\n  }\n\n\n  /**\n   * Get the format associated with this source.\n   *\n   * @return {import(\"../format/Feature.js\").default|undefined} The feature format.\n   * @api\n   */\n  getFormat() {\n    return this.format_;\n  }\n\n\n  /**\n   * @return {boolean} The source can have overlapping geometries.\n   */\n  getOverlaps() {\n    return this.overlaps_;\n  }\n\n\n  /**\n   * Get the url associated with this source.\n   *\n   * @return {string|import(\"../featureloader.js\").FeatureUrlFunction|undefined} The url.\n   * @api\n   */\n  getUrl() {\n    return this.url_;\n  }\n\n\n  /**\n   * @param {Event} event Event.\n   * @private\n   */\n  handleFeatureChange_(event) {\n    const feature = /** @type {import(\"../Feature.js\").default} */ (event.target);\n    const featureKey = getUid(feature);\n    const geometry = feature.getGeometry();\n    if (!geometry) {\n      if (!(featureKey in this.nullGeometryFeatures_)) {\n        if (this.featuresRtree_) {\n          this.featuresRtree_.remove(feature);\n        }\n        this.nullGeometryFeatures_[featureKey] = feature;\n      }\n    } else {\n      const extent = geometry.getExtent();\n      if (featureKey in this.nullGeometryFeatures_) {\n        delete this.nullGeometryFeatures_[featureKey];\n        if (this.featuresRtree_) {\n          this.featuresRtree_.insert(extent, feature);\n        }\n      } else {\n        if (this.featuresRtree_) {\n          this.featuresRtree_.update(extent, feature);\n        }\n      }\n    }\n    const id = feature.getId();\n    if (id !== undefined) {\n      const sid = id.toString();\n      if (featureKey in this.undefIdIndex_) {\n        delete this.undefIdIndex_[featureKey];\n        this.idIndex_[sid] = feature;\n      } else {\n        if (this.idIndex_[sid] !== feature) {\n          this.removeFromIdIndex_(feature);\n          this.idIndex_[sid] = feature;\n        }\n      }\n    } else {\n      if (!(featureKey in this.undefIdIndex_)) {\n        this.removeFromIdIndex_(feature);\n        this.undefIdIndex_[featureKey] = feature;\n      }\n    }\n    this.changed();\n    this.dispatchEvent(new VectorSourceEvent(\n      VectorEventType.CHANGEFEATURE, feature));\n  }\n\n  /**\n   * Returns true if the feature is contained within the source.\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @return {boolean} Has feature.\n   * @api\n   */\n  hasFeature(feature) {\n    const id = feature.getId();\n    if (id !== undefined) {\n      return id in this.idIndex_;\n    } else {\n      return getUid(feature) in this.undefIdIndex_;\n    }\n  }\n\n  /**\n   * @return {boolean} Is empty.\n   */\n  isEmpty() {\n    return this.featuresRtree_.isEmpty() && isEmpty(this.nullGeometryFeatures_);\n  }\n\n\n  /**\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   */\n  loadFeatures(extent, resolution, projection) {\n    const loadedExtentsRtree = this.loadedExtentsRtree_;\n    const extentsToLoad = this.strategy_(extent, resolution);\n    this.loading = false;\n    for (let i = 0, ii = extentsToLoad.length; i < ii; ++i) {\n      const extentToLoad = extentsToLoad[i];\n      const alreadyLoaded = loadedExtentsRtree.forEachInExtent(extentToLoad,\n        /**\n         * @param {{extent: import(\"../extent.js\").Extent}} object Object.\n         * @return {boolean} Contains.\n         */\n        function(object) {\n          return containsExtent(object.extent, extentToLoad);\n        });\n      if (!alreadyLoaded) {\n        this.loader_.call(this, extentToLoad, resolution, projection);\n        loadedExtentsRtree.insert(extentToLoad, {extent: extentToLoad.slice()});\n        this.loading = this.loader_ !== VOID;\n      }\n    }\n  }\n\n\n  /**\n   * Remove an extent from the list of loaded extents.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @api\n   */\n  removeLoadedExtent(extent) {\n    const loadedExtentsRtree = this.loadedExtentsRtree_;\n    let obj;\n    loadedExtentsRtree.forEachInExtent(extent, function(object) {\n      if (equals(object.extent, extent)) {\n        obj = object;\n        return true;\n      }\n    });\n    if (obj) {\n      loadedExtentsRtree.remove(obj);\n    }\n  }\n\n\n  /**\n   * Remove a single feature from the source.  If you want to remove all features\n   * at once, use the {@link module:ol/source/Vector~VectorSource#clear #clear()} method\n   * instead.\n   * @param {import(\"../Feature.js\").default} feature Feature to remove.\n   * @api\n   */\n  removeFeature(feature) {\n    const featureKey = getUid(feature);\n    if (featureKey in this.nullGeometryFeatures_) {\n      delete this.nullGeometryFeatures_[featureKey];\n    } else {\n      if (this.featuresRtree_) {\n        this.featuresRtree_.remove(feature);\n      }\n    }\n    this.removeFeatureInternal(feature);\n    this.changed();\n  }\n\n\n  /**\n   * Remove feature without firing a `change` event.\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @protected\n   */\n  removeFeatureInternal(feature) {\n    const featureKey = getUid(feature);\n    this.featureChangeKeys_[featureKey].forEach(unlistenByKey);\n    delete this.featureChangeKeys_[featureKey];\n    const id = feature.getId();\n    if (id !== undefined) {\n      delete this.idIndex_[id.toString()];\n    } else {\n      delete this.undefIdIndex_[featureKey];\n    }\n    this.dispatchEvent(new VectorSourceEvent(\n      VectorEventType.REMOVEFEATURE, feature));\n  }\n\n\n  /**\n   * Remove a feature from the id index.  Called internally when the feature id\n   * may have changed.\n   * @param {import(\"../Feature.js\").default} feature The feature.\n   * @return {boolean} Removed the feature from the index.\n   * @private\n   */\n  removeFromIdIndex_(feature) {\n    let removed = false;\n    for (const id in this.idIndex_) {\n      if (this.idIndex_[id] === feature) {\n        delete this.idIndex_[id];\n        removed = true;\n        break;\n      }\n    }\n    return removed;\n  }\n\n\n  /**\n   * Set the new loader of the source. The next loadFeatures call will use the\n   * new loader.\n   * @param {import(\"../featureloader.js\").FeatureLoader} loader The loader to set.\n   * @api\n   */\n  setLoader(loader) {\n    this.loader_ = loader;\n  }\n\n}\n\n\nexport default VectorSource;\n","/**\n * @module ol/format/Feature\n */\nimport {assign} from '../obj.js';\nimport {abstract} from '../util.js';\nimport {get as getProjection, equivalent as equivalentProjection, transformExtent} from '../proj.js';\n\n\n/**\n * @typedef {Object} ReadOptions\n * @property {import(\"../proj.js\").ProjectionLike} [dataProjection] Projection of the data we are reading.\n * If not provided, the projection will be derived from the data (where possible) or\n * the `dataProjection` of the format is assigned (where set). If the projection\n * can not be derived from the data and if no `dataProjection` is set for a format,\n * the features will not be reprojected.\n * @property {import(\"../extent.js\").Extent} [extent] Tile extent of the tile being read. This is only used and\n * required for {@link module:ol/format/MVT}.\n * @property {import(\"../proj.js\").ProjectionLike} [featureProjection] Projection of the feature geometries\n * created by the format reader. If not provided, features will be returned in the\n * `dataProjection`.\n */\n\n\n/**\n * @typedef {Object} WriteOptions\n * @property {import(\"../proj.js\").ProjectionLike} [dataProjection] Projection of the data we are writing.\n * If not provided, the `dataProjection` of the format is assigned (where set).\n * If no `dataProjection` is set for a format, the features will be returned\n * in the `featureProjection`.\n * @property {import(\"../proj.js\").ProjectionLike} [featureProjection] Projection of the feature geometries\n * that will be serialized by the format writer. If not provided, geometries are assumed\n * to be in the `dataProjection` if that is set; in other words, they are not transformed.\n * @property {boolean} [rightHanded] When writing geometries, follow the right-hand\n * rule for linear ring orientation.  This means that polygons will have counter-clockwise\n * exterior rings and clockwise interior rings.  By default, coordinates are serialized\n * as they are provided at construction.  If `true`, the right-hand rule will\n * be applied.  If `false`, the left-hand rule will be applied (clockwise for\n * exterior and counter-clockwise for interior rings).  Note that not all\n * formats support this.  The GeoJSON format does use this property when writing\n * geometries.\n * @property {number} [decimals] Maximum number of decimal places for coordinates.\n * Coordinates are stored internally as floats, but floating-point arithmetic can create\n * coordinates with a large number of decimal places, not generally wanted on output.\n * Set a number here to round coordinates. Can also be used to ensure that\n * coordinates read in can be written back out with the same number of decimals.\n * Default is no rounding.\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for feature formats.\n * {FeatureFormat} subclasses provide the ability to decode and encode\n * {@link module:ol/Feature~Feature} objects from a variety of commonly used geospatial\n * file formats.  See the documentation for each format for more details.\n *\n * @abstract\n * @api\n */\nclass FeatureFormat {\n  constructor() {\n\n    /**\n     * @protected\n     * @type {import(\"../proj/Projection.js\").default}\n     */\n    this.dataProjection = null;\n\n    /**\n     * @protected\n     * @type {import(\"../proj/Projection.js\").default}\n     */\n    this.defaultFeatureProjection = null;\n\n  }\n\n  /**\n   * Adds the data projection to the read options.\n   * @param {Document|Node|Object|string} source Source.\n   * @param {ReadOptions=} opt_options Options.\n   * @return {ReadOptions|undefined} Options.\n   * @protected\n   */\n  getReadOptions(source, opt_options) {\n    let options;\n    if (opt_options) {\n      options = {\n        dataProjection: opt_options.dataProjection ?\n          opt_options.dataProjection : this.readProjection(source),\n        featureProjection: opt_options.featureProjection\n      };\n    }\n    return this.adaptOptions(options);\n  }\n\n  /**\n   * Sets the `dataProjection` on the options, if no `dataProjection`\n   * is set.\n   * @param {WriteOptions|ReadOptions|undefined} options\n   *     Options.\n   * @protected\n   * @return {WriteOptions|ReadOptions|undefined}\n   *     Updated options.\n   */\n  adaptOptions(options) {\n    return assign({\n      dataProjection: this.dataProjection,\n      featureProjection: this.defaultFeatureProjection\n    }, options);\n  }\n\n  /**\n   * Get the extent from the source of the last {@link readFeatures} call.\n   * @return {import(\"../extent.js\").Extent} Tile extent.\n   */\n  getLastExtent() {\n    return null;\n  }\n\n  /**\n   * @abstract\n   * @return {import(\"./FormatType.js\").default} Format.\n   */\n  getType() {\n    return abstract();\n  }\n\n  /**\n   * Read a single feature from a source.\n   *\n   * @abstract\n   * @param {Document|Node|Object|string} source Source.\n   * @param {ReadOptions=} opt_options Read options.\n   * @return {import(\"../Feature.js\").FeatureLike} Feature.\n   */\n  readFeature(source, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Read all features from a source.\n   *\n   * @abstract\n   * @param {Document|Node|ArrayBuffer|Object|string} source Source.\n   * @param {ReadOptions=} opt_options Read options.\n   * @return {Array<import(\"../Feature.js\").FeatureLike>} Features.\n   */\n  readFeatures(source, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Read a single geometry from a source.\n   *\n   * @abstract\n   * @param {Document|Node|Object|string} source Source.\n   * @param {ReadOptions=} opt_options Read options.\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   */\n  readGeometry(source, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Read the projection from a source.\n   *\n   * @abstract\n   * @param {Document|Node|Object|string} source Source.\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   */\n  readProjection(source) {\n    return abstract();\n  }\n\n  /**\n   * Encode a feature in this format.\n   *\n   * @abstract\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {WriteOptions=} opt_options Write options.\n   * @return {string} Result.\n   */\n  writeFeature(feature, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Encode an array of features in this format.\n   *\n   * @abstract\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {WriteOptions=} opt_options Write options.\n   * @return {string} Result.\n   */\n  writeFeatures(features, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Write a single geometry in this format.\n   *\n   * @abstract\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {WriteOptions=} opt_options Write options.\n   * @return {string} Result.\n   */\n  writeGeometry(geometry, opt_options) {\n    return abstract();\n  }\n}\n\nexport default FeatureFormat;\n\n/**\n * @param {import(\"../geom/Geometry.js\").default|import(\"../extent.js\").Extent} geometry Geometry.\n * @param {boolean} write Set to true for writing, false for reading.\n * @param {(WriteOptions|ReadOptions)=} opt_options Options.\n * @return {import(\"../geom/Geometry.js\").default|import(\"../extent.js\").Extent} Transformed geometry.\n */\nexport function transformWithOptions(geometry, write, opt_options) {\n  const featureProjection = opt_options ?\n    getProjection(opt_options.featureProjection) : null;\n  const dataProjection = opt_options ?\n    getProjection(opt_options.dataProjection) : null;\n  /**\n   * @type {import(\"../geom/Geometry.js\").default|import(\"../extent.js\").Extent}\n   */\n  let transformed;\n  if (featureProjection && dataProjection &&\n      !equivalentProjection(featureProjection, dataProjection)) {\n    if (Array.isArray(geometry)) {\n      // FIXME this is necessary because GML treats extents\n      // as geometries\n      transformed = transformExtent(\n        geometry,\n        dataProjection,\n        featureProjection);\n    } else {\n      transformed = (write ? /** @type {import(\"../geom/Geometry\").default} */ (geometry).clone() : geometry).transform(\n        write ? featureProjection : dataProjection,\n        write ? dataProjection : featureProjection);\n    }\n  } else {\n    transformed = geometry;\n  }\n  if (write && opt_options && /** @type {WriteOptions} */ (opt_options).decimals !== undefined &&\n    !Array.isArray(transformed)) {\n    const power = Math.pow(10, /** @type {WriteOptions} */ (opt_options).decimals);\n    // if decimals option on write, round each coordinate appropriately\n    /**\n     * @param {Array<number>} coordinates Coordinates.\n     * @return {Array<number>} Transformed coordinates.\n     */\n    const transform = function(coordinates) {\n      for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n        coordinates[i] = Math.round(coordinates[i] * power) / power;\n      }\n      return coordinates;\n    };\n    if (transformed === geometry) {\n      transformed = /** @type {import(\"../geom/Geometry\").default} */ (geometry).clone();\n    }\n    transformed.applyTransform(transform);\n  }\n  return transformed;\n}\n","/**\n * @module ol/easing\n */\n\n\n/**\n * Start slow and speed up.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function easeIn(t) {\n  return Math.pow(t, 3);\n}\n\n\n/**\n * Start fast and slow down.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function easeOut(t) {\n  return 1 - easeIn(1 - t);\n}\n\n\n/**\n * Start slow, speed up, and then slow down again.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function inAndOut(t) {\n  return 3 * t * t - 2 * t * t * t;\n}\n\n\n/**\n * Maintain a constant speed over time.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function linear(t) {\n  return t;\n}\n\n\n/**\n * Start slow, speed up, and at the very end slow down again.  This has the\n * same general behavior as {@link module:ol/easing~inAndOut}, but the final\n * slowdown is delayed.\n * @param {number} t Input between 0 and 1.\n * @return {number} Output between 0 and 1.\n * @api\n */\nexport function upAndDown(t) {\n  if (t < 0.5) {\n    return inAndOut(2 * t);\n  } else {\n    return 1 - inAndOut(2 * (t - 0.5));\n  }\n}\n","/**\n * @module ol/layer/Property\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  OPACITY: 'opacity',\n  VISIBLE: 'visible',\n  EXTENT: 'extent',\n  Z_INDEX: 'zIndex',\n  MAX_RESOLUTION: 'maxResolution',\n  MIN_RESOLUTION: 'minResolution',\n  SOURCE: 'source'\n};\n","/**\n * @module ol/geom/LinearRing\n */\nimport {closestSquaredDistanceXY} from '../extent.js';\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {linearRing as linearRingArea} from './flat/area.js';\nimport {assignClosestPoint, maxSquaredDelta} from './flat/closest.js';\nimport {deflateCoordinates} from './flat/deflate.js';\nimport {inflateCoordinates} from './flat/inflate.js';\nimport {douglasPeucker} from './flat/simplify.js';\n\n/**\n * @classdesc\n * Linear ring geometry. Only used as part of polygon; cannot be rendered\n * on its own.\n *\n * @api\n */\nclass LinearRing extends SimpleGeometry {\n\n  /**\n   * @param {Array<import(\"../coordinate.js\").Coordinate>|Array<number>} coordinates Coordinates.\n   *     For internal use, flat coordinates in combination with `opt_layout` are also accepted.\n   * @param {GeometryLayout=} opt_layout Layout.\n   */\n  constructor(coordinates, opt_layout) {\n\n    super();\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDelta_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDeltaRevision_ = -1;\n\n    if (opt_layout !== undefined && !Array.isArray(coordinates[0])) {\n      this.setFlatCoordinates(opt_layout, /** @type {Array<number>} */ (coordinates));\n    } else {\n      this.setCoordinates(/** @type {Array<import(\"../coordinate.js\").Coordinate>} */ (coordinates), opt_layout);\n    }\n\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!LinearRing} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    return new LinearRing(this.flatCoordinates.slice(), this.layout);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(maxSquaredDelta(\n        this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, 0));\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n    return assignClosestPoint(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n  }\n\n  /**\n   * Return the area of the linear ring on projected plane.\n   * @return {number} Area (on projected plane).\n   * @api\n   */\n  getArea() {\n    return linearRingArea(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n  }\n\n  /**\n   * Return the coordinates of the linear ring.\n   * @return {Array<import(\"../coordinate.js\").Coordinate>} Coordinates.\n   * @override\n   * @api\n   */\n  getCoordinates() {\n    return inflateCoordinates(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    const simplifiedFlatCoordinates = [];\n    simplifiedFlatCoordinates.length = douglasPeucker(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      squaredTolerance, simplifiedFlatCoordinates, 0);\n    return new LinearRing(simplifiedFlatCoordinates, GeometryLayout.XY);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.LINEAR_RING;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  intersectsExtent(extent) {\n    return false;\n  }\n\n  /**\n   * Set the coordinates of the linear ring.\n   * @param {!Array<import(\"../coordinate.js\").Coordinate>} coordinates Coordinates.\n   * @param {GeometryLayout=} opt_layout Layout.\n   * @override\n   * @api\n   */\n  setCoordinates(coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 1);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = deflateCoordinates(\n      this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  }\n}\n\n\nexport default LinearRing;\n","/**\n * @module ol/geom/Polygon\n */\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY, getCenter} from '../extent.js';\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport LinearRing from './LinearRing.js';\nimport Point from './Point.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {offset as sphereOffset} from '../sphere.js';\nimport {linearRings as linearRingsArea} from './flat/area.js';\nimport {assignClosestArrayPoint, arrayMaxSquaredDelta} from './flat/closest.js';\nimport {linearRingsContainsXY} from './flat/contains.js';\nimport {deflateCoordinatesArray} from './flat/deflate.js';\nimport {inflateCoordinatesArray} from './flat/inflate.js';\nimport {getInteriorPointOfArray} from './flat/interiorpoint.js';\nimport {intersectsLinearRingArray} from './flat/intersectsextent.js';\nimport {linearRingIsOriented, orientLinearRings} from './flat/orient.js';\nimport {quantizeArray} from './flat/simplify.js';\nimport {modulo} from '../math.js';\n\n/**\n * @classdesc\n * Polygon geometry.\n *\n * @api\n */\nclass Polygon extends SimpleGeometry {\n\n  /**\n   * @param {!Array<Array<import(\"../coordinate.js\").Coordinate>>|!Array<number>} coordinates\n   *     Array of linear rings that define the polygon. The first linear ring of the\n   *     array defines the outer-boundary or surface of the polygon. Each subsequent\n   *     linear ring defines a hole in the surface of the polygon. A linear ring is\n   *     an array of vertices' coordinates where the first coordinate and the last are\n   *     equivalent. (For internal use, flat coordinates in combination with\n   *     `opt_layout` and `opt_ends` are also accepted.)\n   * @param {GeometryLayout=} opt_layout Layout.\n   * @param {Array<number>=} opt_ends Ends (for internal use with flat coordinates).\n   */\n  constructor(coordinates, opt_layout, opt_ends) {\n\n    super();\n\n    /**\n     * @type {Array<number>}\n     * @private\n     */\n    this.ends_ = [];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.flatInteriorPointRevision_ = -1;\n\n    /**\n     * @private\n     * @type {import(\"../coordinate.js\").Coordinate}\n     */\n    this.flatInteriorPoint_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDelta_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDeltaRevision_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.orientedRevision_ = -1;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.orientedFlatCoordinates_ = null;\n\n    if (opt_layout !== undefined && opt_ends) {\n      this.setFlatCoordinates(opt_layout, /** @type {Array<number>} */ (coordinates));\n      this.ends_ = opt_ends;\n    } else {\n      this.setCoordinates(/** @type {Array<Array<import(\"../coordinate.js\").Coordinate>>} */ (coordinates), opt_layout);\n    }\n\n  }\n\n  /**\n   * Append the passed linear ring to this polygon.\n   * @param {LinearRing} linearRing Linear ring.\n   * @api\n   */\n  appendLinearRing(linearRing) {\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = linearRing.getFlatCoordinates().slice();\n    } else {\n      extend(this.flatCoordinates, linearRing.getFlatCoordinates());\n    }\n    this.ends_.push(this.flatCoordinates.length);\n    this.changed();\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!Polygon} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    return new Polygon(this.flatCoordinates.slice(), this.layout, this.ends_.slice());\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(arrayMaxSquaredDelta(\n        this.flatCoordinates, 0, this.ends_, this.stride, 0));\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n    return assignClosestArrayPoint(\n      this.flatCoordinates, 0, this.ends_, this.stride,\n      this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  containsXY(x, y) {\n    return linearRingsContainsXY(this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride, x, y);\n  }\n\n  /**\n   * Return the area of the polygon on projected plane.\n   * @return {number} Area (on projected plane).\n   * @api\n   */\n  getArea() {\n    return linearRingsArea(this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride);\n  }\n\n  /**\n   * Get the coordinate array for this geometry.  This array has the structure\n   * of a GeoJSON coordinate array for polygons.\n   *\n   * @param {boolean=} opt_right Orient coordinates according to the right-hand\n   *     rule (counter-clockwise for exterior and clockwise for interior rings).\n   *     If `false`, coordinates will be oriented according to the left-hand rule\n   *     (clockwise for exterior and counter-clockwise for interior rings).\n   *     By default, coordinate orientation will depend on how the geometry was\n   *     constructed.\n   * @return {Array<Array<import(\"../coordinate.js\").Coordinate>>} Coordinates.\n   * @override\n   * @api\n   */\n  getCoordinates(opt_right) {\n    let flatCoordinates;\n    if (opt_right !== undefined) {\n      flatCoordinates = this.getOrientedFlatCoordinates().slice();\n      orientLinearRings(\n        flatCoordinates, 0, this.ends_, this.stride, opt_right);\n    } else {\n      flatCoordinates = this.flatCoordinates;\n    }\n\n    return inflateCoordinatesArray(\n      flatCoordinates, 0, this.ends_, this.stride);\n  }\n\n  /**\n   * @return {Array<number>} Ends.\n   */\n  getEnds() {\n    return this.ends_;\n  }\n\n  /**\n   * @return {Array<number>} Interior point.\n   */\n  getFlatInteriorPoint() {\n    if (this.flatInteriorPointRevision_ != this.getRevision()) {\n      const flatCenter = getCenter(this.getExtent());\n      this.flatInteriorPoint_ = getInteriorPointOfArray(\n        this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride,\n        flatCenter, 0);\n      this.flatInteriorPointRevision_ = this.getRevision();\n    }\n    return this.flatInteriorPoint_;\n  }\n\n  /**\n   * Return an interior point of the polygon.\n   * @return {Point} Interior point as XYM coordinate, where M is the\n   * length of the horizontal intersection that the point belongs to.\n   * @api\n   */\n  getInteriorPoint() {\n    return new Point(this.getFlatInteriorPoint(), GeometryLayout.XYM);\n  }\n\n  /**\n   * Return the number of rings of the polygon,  this includes the exterior\n   * ring and any interior rings.\n   *\n   * @return {number} Number of rings.\n   * @api\n   */\n  getLinearRingCount() {\n    return this.ends_.length;\n  }\n\n  /**\n   * Return the Nth linear ring of the polygon geometry. Return `null` if the\n   * given index is out of range.\n   * The exterior linear ring is available at index `0` and the interior rings\n   * at index `1` and beyond.\n   *\n   * @param {number} index Index.\n   * @return {LinearRing} Linear ring.\n   * @api\n   */\n  getLinearRing(index) {\n    if (index < 0 || this.ends_.length <= index) {\n      return null;\n    }\n    return new LinearRing(this.flatCoordinates.slice(\n      index === 0 ? 0 : this.ends_[index - 1], this.ends_[index]), this.layout);\n  }\n\n  /**\n   * Return the linear rings of the polygon.\n   * @return {Array<LinearRing>} Linear rings.\n   * @api\n   */\n  getLinearRings() {\n    const layout = this.layout;\n    const flatCoordinates = this.flatCoordinates;\n    const ends = this.ends_;\n    const linearRings = [];\n    let offset = 0;\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      const end = ends[i];\n      const linearRing = new LinearRing(flatCoordinates.slice(offset, end), layout);\n      linearRings.push(linearRing);\n      offset = end;\n    }\n    return linearRings;\n  }\n\n  /**\n   * @return {Array<number>} Oriented flat coordinates.\n   */\n  getOrientedFlatCoordinates() {\n    if (this.orientedRevision_ != this.getRevision()) {\n      const flatCoordinates = this.flatCoordinates;\n      if (linearRingIsOriented(\n        flatCoordinates, 0, this.ends_, this.stride)) {\n        this.orientedFlatCoordinates_ = flatCoordinates;\n      } else {\n        this.orientedFlatCoordinates_ = flatCoordinates.slice();\n        this.orientedFlatCoordinates_.length =\n            orientLinearRings(\n              this.orientedFlatCoordinates_, 0, this.ends_, this.stride);\n      }\n      this.orientedRevision_ = this.getRevision();\n    }\n    return this.orientedFlatCoordinates_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    const simplifiedFlatCoordinates = [];\n    const simplifiedEnds = [];\n    simplifiedFlatCoordinates.length = quantizeArray(\n      this.flatCoordinates, 0, this.ends_, this.stride,\n      Math.sqrt(squaredTolerance),\n      simplifiedFlatCoordinates, 0, simplifiedEnds);\n    return new Polygon(simplifiedFlatCoordinates, GeometryLayout.XY, simplifiedEnds);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.POLYGON;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    return intersectsLinearRingArray(\n      this.getOrientedFlatCoordinates(), 0, this.ends_, this.stride, extent);\n  }\n\n  /**\n   * Set the coordinates of the polygon.\n   * @param {!Array<Array<import(\"../coordinate.js\").Coordinate>>} coordinates Coordinates.\n   * @param {GeometryLayout=} opt_layout Layout.\n   * @override\n   * @api\n   */\n  setCoordinates(coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 2);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    const ends = deflateCoordinatesArray(\n      this.flatCoordinates, 0, coordinates, this.stride, this.ends_);\n    this.flatCoordinates.length = ends.length === 0 ? 0 : ends[ends.length - 1];\n    this.changed();\n  }\n}\n\n\nexport default Polygon;\n\n\n/**\n * Create an approximation of a circle on the surface of a sphere.\n * @param {import(\"../coordinate.js\").Coordinate} center Center (`[lon, lat]` in degrees).\n * @param {number} radius The great-circle distance from the center to\n *     the polygon vertices.\n * @param {number=} opt_n Optional number of vertices for the resulting\n *     polygon. Default is `32`.\n * @param {number=} opt_sphereRadius Optional radius for the sphere (defaults to\n *     the Earth's mean radius using the WGS84 ellipsoid).\n * @return {Polygon} The \"circular\" polygon.\n * @api\n */\nexport function circular(center, radius, opt_n, opt_sphereRadius) {\n  const n = opt_n ? opt_n : 32;\n  /** @type {Array<number>} */\n  const flatCoordinates = [];\n  for (let i = 0; i < n; ++i) {\n    extend(flatCoordinates, sphereOffset(center, radius, 2 * Math.PI * i / n, opt_sphereRadius));\n  }\n  flatCoordinates.push(flatCoordinates[0], flatCoordinates[1]);\n  return new Polygon(flatCoordinates, GeometryLayout.XY, [flatCoordinates.length]);\n}\n\n\n/**\n * Create a polygon from an extent. The layout used is `XY`.\n * @param {import(\"../extent.js\").Extent} extent The extent.\n * @return {Polygon} The polygon.\n * @api\n */\nexport function fromExtent(extent) {\n  const minX = extent[0];\n  const minY = extent[1];\n  const maxX = extent[2];\n  const maxY = extent[3];\n  const flatCoordinates =\n      [minX, minY, minX, maxY, maxX, maxY, maxX, minY, minX, minY];\n  return new Polygon(flatCoordinates, GeometryLayout.XY, [flatCoordinates.length]);\n}\n\n\n/**\n * Create a regular polygon from a circle.\n * @param {import(\"./Circle.js\").default} circle Circle geometry.\n * @param {number=} opt_sides Number of sides of the polygon. Default is 32.\n * @param {number=} opt_angle Start angle for the first vertex of the polygon in\n *     radians. Default is 0.\n * @return {Polygon} Polygon geometry.\n * @api\n */\nexport function fromCircle(circle, opt_sides, opt_angle) {\n  const sides = opt_sides ? opt_sides : 32;\n  const stride = circle.getStride();\n  const layout = circle.getLayout();\n  const center = circle.getCenter();\n  const arrayLength = stride * (sides + 1);\n  const flatCoordinates = new Array(arrayLength);\n  for (let i = 0; i < arrayLength; i += stride) {\n    flatCoordinates[i] = 0;\n    flatCoordinates[i + 1] = 0;\n    for (let j = 2; j < stride; j++) {\n      flatCoordinates[i + j] = center[j];\n    }\n  }\n  const ends = [flatCoordinates.length];\n  const polygon = new Polygon(flatCoordinates, layout, ends);\n  makeRegular(polygon, center, circle.getRadius(), opt_angle);\n  return polygon;\n}\n\n\n/**\n * Modify the coordinates of a polygon to make it a regular polygon.\n * @param {Polygon} polygon Polygon geometry.\n * @param {import(\"../coordinate.js\").Coordinate} center Center of the regular polygon.\n * @param {number} radius Radius of the regular polygon.\n * @param {number=} opt_angle Start angle for the first vertex of the polygon in\n *     radians. Default is 0.\n */\nexport function makeRegular(polygon, center, radius, opt_angle) {\n  const flatCoordinates = polygon.getFlatCoordinates();\n  const stride = polygon.getStride();\n  const sides = flatCoordinates.length / stride - 1;\n  const startAngle = opt_angle ? opt_angle : 0;\n  for (let i = 0; i <= sides; ++i) {\n    const offset = i * stride;\n    const angle = startAngle + (modulo(i, sides) * 2 * Math.PI / sides);\n    flatCoordinates[offset] = center[0] + (radius * Math.cos(angle));\n    flatCoordinates[offset + 1] = center[1] + (radius * Math.sin(angle));\n  }\n  polygon.changed();\n}\n","/**\n * @module ol/tilecoord\n */\n\n\n/**\n * An array of three numbers representing the location of a tile in a tile\n * grid. The order is `z`, `x`, and `y`. `z` is the zoom level.\n * @typedef {Array<number>} TileCoord\n * @api\n */\n\n\n/**\n * @param {number} z Z.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {TileCoord=} opt_tileCoord Tile coordinate.\n * @return {TileCoord} Tile coordinate.\n */\nexport function createOrUpdate(z, x, y, opt_tileCoord) {\n  if (opt_tileCoord !== undefined) {\n    opt_tileCoord[0] = z;\n    opt_tileCoord[1] = x;\n    opt_tileCoord[2] = y;\n    return opt_tileCoord;\n  } else {\n    return [z, x, y];\n  }\n}\n\n\n/**\n * @param {number} z Z.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {string} Key.\n */\nexport function getKeyZXY(z, x, y) {\n  return z + '/' + x + '/' + y;\n}\n\n\n/**\n * Get the key for a tile coord.\n * @param {TileCoord} tileCoord The tile coord.\n * @return {string} Key.\n */\nexport function getKey(tileCoord) {\n  return getKeyZXY(tileCoord[0], tileCoord[1], tileCoord[2]);\n}\n\n\n/**\n * Get a tile coord given a key.\n * @param {string} key The tile coord key.\n * @return {TileCoord} The tile coord.\n */\nexport function fromKey(key) {\n  return key.split('/').map(Number);\n}\n\n\n/**\n * @param {TileCoord} tileCoord Tile coord.\n * @return {number} Hash.\n */\nexport function hash(tileCoord) {\n  return (tileCoord[1] << tileCoord[0]) + tileCoord[2];\n}\n\n\n/**\n * @param {TileCoord} tileCoord Tile coord.\n * @return {string} Quad key.\n */\nexport function quadKey(tileCoord) {\n  const z = tileCoord[0];\n  const digits = new Array(z);\n  let mask = 1 << (z - 1);\n  let i, charCode;\n  for (i = 0; i < z; ++i) {\n    // 48 is charCode for 0 - '0'.charCodeAt(0)\n    charCode = 48;\n    if (tileCoord[1] & mask) {\n      charCode += 1;\n    }\n    if (tileCoord[2] & mask) {\n      charCode += 2;\n    }\n    digits[i] = String.fromCharCode(charCode);\n    mask >>= 1;\n  }\n  return digits.join('');\n}\n\n\n/**\n * @param {TileCoord} tileCoord Tile coordinate.\n * @param {!import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {boolean} Tile coordinate is within extent and zoom level range.\n */\nexport function withinExtentAndZ(tileCoord, tileGrid) {\n  const z = tileCoord[0];\n  const x = tileCoord[1];\n  const y = tileCoord[2];\n\n  if (tileGrid.getMinZoom() > z || z > tileGrid.getMaxZoom()) {\n    return false;\n  }\n  const extent = tileGrid.getExtent();\n  let tileRange;\n  if (!extent) {\n    tileRange = tileGrid.getFullTileRange(z);\n  } else {\n    tileRange = tileGrid.getTileRangeForExtentAndZ(extent, z);\n  }\n  if (!tileRange) {\n    return true;\n  } else {\n    return tileRange.containsXY(x, y);\n  }\n}\n","/**\n * @module ol/css\n */\n\n\n/**\n * The CSS class for hidden feature.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_HIDDEN = 'ol-hidden';\n\n\n/**\n * The CSS class that we'll give the DOM elements to have them selectable.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_SELECTABLE = 'ol-selectable';\n\n\n/**\n * The CSS class that we'll give the DOM elements to have them unselectable.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_UNSELECTABLE = 'ol-unselectable';\n\n\n/**\n * The CSS class for unsupported feature.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_UNSUPPORTED = 'ol-unsupported';\n\n\n/**\n * The CSS class for controls.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_CONTROL = 'ol-control';\n\n\n/**\n * The CSS class that we'll give the DOM elements that are collapsed, i.e.\n * to those elements which usually can be expanded.\n *\n * @const\n * @type {string}\n */\nexport const CLASS_COLLAPSED = 'ol-collapsed';\n\n\n/**\n * Get the list of font families from a font spec.  Note that this doesn't work\n * for font families that have commas in them.\n * @param {string} The CSS font property.\n * @return {Object<string>} The font families (or null if the input spec is invalid).\n */\nexport const getFontFamilies = (function() {\n  let style;\n  const cache = {};\n  return function(font) {\n    if (!style) {\n      style = document.createElement('div').style;\n    }\n    if (!(font in cache)) {\n      style.font = font;\n      const family = style.fontFamily;\n      style.font = '';\n      if (!family) {\n        return null;\n      }\n      cache[font] = family.split(/,\\s?/);\n    }\n    return cache[font];\n  };\n})();\n","/**\n * @module ol/style/IconOrigin\n */\n\n/**\n * Icon origin. One of 'bottom-left', 'bottom-right', 'top-left', 'top-right'.\n * @enum {string}\n */\nexport default {\n  BOTTOM_LEFT: 'bottom-left',\n  BOTTOM_RIGHT: 'bottom-right',\n  TOP_LEFT: 'top-left',\n  TOP_RIGHT: 'top-right'\n};\n","/**\n * @module ol/geom/SimpleGeometry\n */\nimport {abstract} from '../util.js';\nimport {createOrUpdateFromFlatCoordinates, getCenter} from '../extent.js';\nimport Geometry from './Geometry.js';\nimport GeometryLayout from './GeometryLayout.js';\nimport {rotate, scale, translate, transform2D} from './flat/transform.js';\nimport {clear} from '../obj.js';\n\n/**\n * @classdesc\n * Abstract base class; only used for creating subclasses; do not instantiate\n * in apps, as cannot be rendered.\n *\n * @abstract\n * @api\n */\nclass SimpleGeometry extends Geometry {\n  constructor() {\n\n    super();\n\n    /**\n     * @protected\n     * @type {GeometryLayout}\n     */\n    this.layout = GeometryLayout.XY;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.stride = 2;\n\n    /**\n     * @protected\n     * @type {Array<number>}\n     */\n    this.flatCoordinates = null;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  computeExtent(extent) {\n    return createOrUpdateFromFlatCoordinates(this.flatCoordinates,\n      0, this.flatCoordinates.length, this.stride, extent);\n  }\n\n  /**\n   * @abstract\n   * @return {Array} Coordinates.\n   */\n  getCoordinates() {\n    return abstract();\n  }\n\n  /**\n   * Return the first coordinate of the geometry.\n   * @return {import(\"../coordinate.js\").Coordinate} First coordinate.\n   * @api\n   */\n  getFirstCoordinate() {\n    return this.flatCoordinates.slice(0, this.stride);\n  }\n\n  /**\n   * @return {Array<number>} Flat coordinates.\n   */\n  getFlatCoordinates() {\n    return this.flatCoordinates;\n  }\n\n  /**\n   * Return the last coordinate of the geometry.\n   * @return {import(\"../coordinate.js\").Coordinate} Last point.\n   * @api\n   */\n  getLastCoordinate() {\n    return this.flatCoordinates.slice(this.flatCoordinates.length - this.stride);\n  }\n\n  /**\n   * Return the {@link module:ol/geom/GeometryLayout layout} of the geometry.\n   * @return {GeometryLayout} Layout.\n   * @api\n   */\n  getLayout() {\n    return this.layout;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSimplifiedGeometry(squaredTolerance) {\n    if (this.simplifiedGeometryRevision != this.getRevision()) {\n      clear(this.simplifiedGeometryCache);\n      this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n      this.simplifiedGeometryRevision = this.getRevision();\n    }\n    // If squaredTolerance is negative or if we know that simplification will not\n    // have any effect then just return this.\n    if (squaredTolerance < 0 ||\n        (this.simplifiedGeometryMaxMinSquaredTolerance !== 0 &&\n         squaredTolerance <= this.simplifiedGeometryMaxMinSquaredTolerance)) {\n      return this;\n    }\n    const key = squaredTolerance.toString();\n    if (this.simplifiedGeometryCache.hasOwnProperty(key)) {\n      return this.simplifiedGeometryCache[key];\n    } else {\n      const simplifiedGeometry =\n          this.getSimplifiedGeometryInternal(squaredTolerance);\n      const simplifiedFlatCoordinates = simplifiedGeometry.getFlatCoordinates();\n      if (simplifiedFlatCoordinates.length < this.flatCoordinates.length) {\n        this.simplifiedGeometryCache[key] = simplifiedGeometry;\n        return simplifiedGeometry;\n      } else {\n        // Simplification did not actually remove any coordinates.  We now know\n        // that any calls to getSimplifiedGeometry with a squaredTolerance less\n        // than or equal to the current squaredTolerance will also not have any\n        // effect.  This allows us to short circuit simplification (saving CPU\n        // cycles) and prevents the cache of simplified geometries from filling\n        // up with useless identical copies of this geometry (saving memory).\n        this.simplifiedGeometryMaxMinSquaredTolerance = squaredTolerance;\n        return this;\n      }\n    }\n  }\n\n  /**\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {SimpleGeometry} Simplified geometry.\n   * @protected\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    return this;\n  }\n\n  /**\n   * @return {number} Stride.\n   */\n  getStride() {\n    return this.stride;\n  }\n\n  /**\n   * @param {GeometryLayout} layout Layout.\n   * @param {Array<number>} flatCoordinates Flat coordinates.\n   */\n  setFlatCoordinates(layout, flatCoordinates) {\n    this.stride = getStrideForLayout(layout);\n    this.layout = layout;\n    this.flatCoordinates = flatCoordinates;\n  }\n\n  /**\n   * @abstract\n   * @param {!Array} coordinates Coordinates.\n   * @param {GeometryLayout=} opt_layout Layout.\n   */\n  setCoordinates(coordinates, opt_layout) {\n    abstract();\n  }\n\n  /**\n   * @param {GeometryLayout|undefined} layout Layout.\n   * @param {Array} coordinates Coordinates.\n   * @param {number} nesting Nesting.\n   * @protected\n   */\n  setLayout(layout, coordinates, nesting) {\n    /** @type {number} */\n    let stride;\n    if (layout) {\n      stride = getStrideForLayout(layout);\n    } else {\n      for (let i = 0; i < nesting; ++i) {\n        if (coordinates.length === 0) {\n          this.layout = GeometryLayout.XY;\n          this.stride = 2;\n          return;\n        } else {\n          coordinates = /** @type {Array} */ (coordinates[0]);\n        }\n      }\n      stride = coordinates.length;\n      layout = getLayoutForStride(stride);\n    }\n    this.layout = layout;\n    this.stride = stride;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  applyTransform(transformFn) {\n    if (this.flatCoordinates) {\n      transformFn(this.flatCoordinates, this.flatCoordinates, this.stride);\n      this.changed();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  rotate(angle, anchor) {\n    const flatCoordinates = this.getFlatCoordinates();\n    if (flatCoordinates) {\n      const stride = this.getStride();\n      rotate(\n        flatCoordinates, 0, flatCoordinates.length,\n        stride, angle, anchor, flatCoordinates);\n      this.changed();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  scale(sx, opt_sy, opt_anchor) {\n    let sy = opt_sy;\n    if (sy === undefined) {\n      sy = sx;\n    }\n    let anchor = opt_anchor;\n    if (!anchor) {\n      anchor = getCenter(this.getExtent());\n    }\n    const flatCoordinates = this.getFlatCoordinates();\n    if (flatCoordinates) {\n      const stride = this.getStride();\n      scale(\n        flatCoordinates, 0, flatCoordinates.length,\n        stride, sx, sy, anchor, flatCoordinates);\n      this.changed();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  translate(deltaX, deltaY) {\n    const flatCoordinates = this.getFlatCoordinates();\n    if (flatCoordinates) {\n      const stride = this.getStride();\n      translate(\n        flatCoordinates, 0, flatCoordinates.length, stride,\n        deltaX, deltaY, flatCoordinates);\n      this.changed();\n    }\n  }\n}\n\n\n/**\n * @param {number} stride Stride.\n * @return {GeometryLayout} layout Layout.\n */\nfunction getLayoutForStride(stride) {\n  let layout;\n  if (stride == 2) {\n    layout = GeometryLayout.XY;\n  } else if (stride == 3) {\n    layout = GeometryLayout.XYZ;\n  } else if (stride == 4) {\n    layout = GeometryLayout.XYZM;\n  }\n  return (\n    /** @type {GeometryLayout} */ (layout)\n  );\n}\n\n\n/**\n * @param {GeometryLayout} layout Layout.\n * @return {number} Stride.\n */\nexport function getStrideForLayout(layout) {\n  let stride;\n  if (layout == GeometryLayout.XY) {\n    stride = 2;\n  } else if (layout == GeometryLayout.XYZ || layout == GeometryLayout.XYM) {\n    stride = 3;\n  } else if (layout == GeometryLayout.XYZM) {\n    stride = 4;\n  }\n  return /** @type {number} */ (stride);\n}\n\n\n/**\n * @param {SimpleGeometry} simpleGeometry Simple geometry.\n * @param {import(\"../transform.js\").Transform} transform Transform.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Transformed flat coordinates.\n */\nexport function transformGeom2D(simpleGeometry, transform, opt_dest) {\n  const flatCoordinates = simpleGeometry.getFlatCoordinates();\n  if (!flatCoordinates) {\n    return null;\n  } else {\n    const stride = simpleGeometry.getStride();\n    return transform2D(\n      flatCoordinates, 0, flatCoordinates.length, stride,\n      transform, opt_dest);\n  }\n}\n\nexport default SimpleGeometry;\n","/**\n * @module ol/source/State\n */\n\n/**\n * @enum {string}\n * State of the source, one of 'undefined', 'loading', 'ready' or 'error'.\n */\nexport default {\n  UNDEFINED: 'undefined',\n  LOADING: 'loading',\n  READY: 'ready',\n  ERROR: 'error'\n};\n","/**\n * @module ol/extent/Relationship\n */\n\n/**\n * Relationship to an extent.\n * @enum {number}\n */\nexport default {\n  UNKNOWN: 0,\n  INTERSECTING: 1,\n  ABOVE: 2,\n  RIGHT: 4,\n  BELOW: 8,\n  LEFT: 16\n};\n","/**\n * @module ol/proj/Units\n */\n\n/**\n * Projection units: `'degrees'`, `'ft'`, `'m'`, `'pixels'`, `'tile-pixels'` or\n * `'us-ft'`.\n * @enum {string}\n */\nconst Units = {\n  DEGREES: 'degrees',\n  FEET: 'ft',\n  METERS: 'm',\n  PIXELS: 'pixels',\n  TILE_PIXELS: 'tile-pixels',\n  USFEET: 'us-ft'\n};\n\n\n/**\n * Meters per unit lookup table.\n * @const\n * @type {Object<Units, number>}\n * @api\n */\nexport const METERS_PER_UNIT = {};\n// use the radius of the Normal sphere\nMETERS_PER_UNIT[Units.DEGREES] = 2 * Math.PI * 6370997 / 360;\nMETERS_PER_UNIT[Units.FEET] = 0.3048;\nMETERS_PER_UNIT[Units.METERS] = 1;\nMETERS_PER_UNIT[Units.USFEET] = 1200 / 3937;\n\nexport default Units;\n","/**\n * @module ol/layer/Vector\n */\nimport LayerType from '../LayerType.js';\nimport Layer from './Layer.js';\nimport VectorRenderType from './VectorRenderType.js';\nimport {assign} from '../obj.js';\nimport {createDefaultStyle, toFunction as toStyleFunction} from '../style/Style.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {import(\"../render.js\").OrderFunction} [renderOrder] Render order. Function to be used when sorting\n * features before rendering. By default features are drawn in the order that they are created. Use\n * `null` to avoid the sort, but get an undefined draw order.\n * @property {number} [renderBuffer=100] The buffer in pixels around the viewport extent used by the\n * renderer when getting features from the vector source for the rendering or hit-detection.\n * Recommended value: the size of the largest symbol, line width or label.\n * @property {import(\"./VectorRenderType.js\").default|string} [renderMode='vector'] Render mode for vector layers:\n *  * `'image'`: Vector layers are rendered as images. Great performance, but point symbols and\n *    texts are always rotated with the view and pixels are scaled during zoom animations.\n *  * `'vector'`: Vector layers are rendered as vectors. Most accurate rendering even during\n *    animations, but slower performance.\n * @property {import(\"../source/Vector.js\").default} [source] Source.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {boolean} [declutter=false] Declutter images and text. Decluttering is applied to all\n * image and text styles, and the priority is defined by the z-index of the style. Lower z-index\n * means higher priority.\n * @property {import(\"../style/Style.js\").StyleLike} [style] Layer style. See\n * {@link module:ol/style} for default style which will be used if this is not defined.\n * @property {boolean} [updateWhileAnimating=false] When set to `true` and `renderMode`\n * is `vector`, feature batches will be recreated during animations. This means that no\n * vectors will be shown clipped, but the setting will have a performance impact for large\n * amounts of vector data. When set to `false`, batches will be recreated when no animation\n * is active.\n * @property {boolean} [updateWhileInteracting=false] When set to `true` and `renderMode`\n * is `vector`, feature batches will be recreated during interactions. See also\n * `updateWhileAnimating`.\n */\n\n\n/**\n * @enum {string}\n * @private\n */\nconst Property = {\n  RENDER_ORDER: 'renderOrder'\n};\n\n\n/**\n * @classdesc\n * Vector data that is rendered client-side.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @api\n */\nclass VectorLayer extends Layer {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    const options = opt_options ?\n      opt_options : /** @type {Options} */ ({});\n\n    const baseOptions = assign({}, options);\n\n    delete baseOptions.style;\n    delete baseOptions.renderBuffer;\n    delete baseOptions.updateWhileAnimating;\n    delete baseOptions.updateWhileInteracting;\n    super(baseOptions);\n\n    /**\n    * @private\n    * @type {boolean}\n    */\n    this.declutter_ = options.declutter !== undefined ? options.declutter : false;\n\n    /**\n    * @type {number}\n    * @private\n    */\n    this.renderBuffer_ = options.renderBuffer !== undefined ?\n      options.renderBuffer : 100;\n\n    /**\n    * User provided style.\n    * @type {import(\"../style/Style.js\").StyleLike}\n    * @private\n    */\n    this.style_ = null;\n\n    /**\n    * Style function for use within the library.\n    * @type {import(\"../style/Style.js\").StyleFunction|undefined}\n    * @private\n    */\n    this.styleFunction_ = undefined;\n\n    this.setStyle(options.style);\n\n    /**\n    * @type {boolean}\n    * @private\n    */\n    this.updateWhileAnimating_ = options.updateWhileAnimating !== undefined ?\n      options.updateWhileAnimating : false;\n\n    /**\n    * @type {boolean}\n    * @private\n    */\n    this.updateWhileInteracting_ = options.updateWhileInteracting !== undefined ?\n      options.updateWhileInteracting : false;\n\n    /**\n    * @private\n    * @type {import(\"./VectorTileRenderType.js\").default|string}\n    */\n    this.renderMode_ = options.renderMode || VectorRenderType.VECTOR;\n\n    /**\n    * The layer type.\n    * @protected\n    * @type {import(\"../LayerType.js\").default}\n    */\n    this.type = LayerType.VECTOR;\n\n  }\n\n  /**\n  * @return {boolean} Declutter.\n  */\n  getDeclutter() {\n    return this.declutter_;\n  }\n\n  /**\n  * @param {boolean} declutter Declutter.\n  */\n  setDeclutter(declutter) {\n    this.declutter_ = declutter;\n  }\n\n  /**\n  * @return {number|undefined} Render buffer.\n  */\n  getRenderBuffer() {\n    return this.renderBuffer_;\n  }\n\n  /**\n  * @return {function(import(\"../Feature.js\").default, import(\"../Feature.js\").default): number|null|undefined} Render\n  *     order.\n  */\n  getRenderOrder() {\n    return (\n    /** @type {import(\"../render.js\").OrderFunction|null|undefined} */ (this.get(Property.RENDER_ORDER))\n    );\n  }\n\n  /**\n  * Get the style for features.  This returns whatever was passed to the `style`\n  * option at construction or to the `setStyle` method.\n  * @return {import(\"../style/Style.js\").StyleLike}\n  *     Layer style.\n  * @api\n  */\n  getStyle() {\n    return this.style_;\n  }\n\n  /**\n  * Get the style function.\n  * @return {import(\"../style/Style.js\").StyleFunction|undefined} Layer style function.\n  * @api\n  */\n  getStyleFunction() {\n    return this.styleFunction_;\n  }\n\n  /**\n  * @return {boolean} Whether the rendered layer should be updated while\n  *     animating.\n  */\n  getUpdateWhileAnimating() {\n    return this.updateWhileAnimating_;\n  }\n\n  /**\n  * @return {boolean} Whether the rendered layer should be updated while\n  *     interacting.\n  */\n  getUpdateWhileInteracting() {\n    return this.updateWhileInteracting_;\n  }\n\n  /**\n  * @param {import(\"../render.js\").OrderFunction|null|undefined} renderOrder\n  *     Render order.\n  */\n  setRenderOrder(renderOrder) {\n    this.set(Property.RENDER_ORDER, renderOrder);\n  }\n\n  /**\n  * Set the style for features.  This can be a single style object, an array\n  * of styles, or a function that takes a feature and resolution and returns\n  * an array of styles. If it is `undefined` the default style is used. If\n  * it is `null` the layer has no style (a `null` style), so only features\n  * that have their own styles will be rendered in the layer. See\n  * {@link module:ol/style} for information on the default style.\n  * @param {import(\"../style/Style.js\").default|Array<import(\"../style/Style.js\").default>|import(\"../style/Style.js\").StyleFunction|null|undefined} style Layer style.\n  * @api\n  */\n  setStyle(style) {\n    this.style_ = style !== undefined ? style : createDefaultStyle;\n    this.styleFunction_ = style === null ?\n      undefined : toStyleFunction(this.style_);\n    this.changed();\n  }\n\n  /**\n  * @return {import(\"./VectorRenderType.js\").default|string} The render mode.\n  */\n  getRenderMode() {\n    return this.renderMode_;\n  }\n}\n\n\n/**\n * Return the associated {@link module:ol/source/Vector vectorsource} of the layer.\n * @function\n * @return {import(\"../source/Vector.js\").default} Source.\n * @api\n */\nVectorLayer.prototype.getSource;\n\n\nexport default VectorLayer;\n","/**\n * @module ol/size\n */\n\n\n/**\n * An array of numbers representing a size: `[width, height]`.\n * @typedef {Array<number>} Size\n * @api\n */\n\n\n/**\n * Returns a buffered size.\n * @param {Size} size Size.\n * @param {number} num The amount by which to buffer.\n * @param {Size=} opt_size Optional reusable size array.\n * @return {Size} The buffered size.\n */\nexport function buffer(size, num, opt_size) {\n  if (opt_size === undefined) {\n    opt_size = [0, 0];\n  }\n  opt_size[0] = size[0] + 2 * num;\n  opt_size[1] = size[1] + 2 * num;\n  return opt_size;\n}\n\n\n/**\n * Determines if a size has a positive area.\n * @param {Size} size The size to test.\n * @return {boolean} The size has a positive area.\n */\nexport function hasArea(size) {\n  return size[0] > 0 && size[1] > 0;\n}\n\n\n/**\n * Returns a size scaled by a ratio. The result will be an array of integers.\n * @param {Size} size Size.\n * @param {number} ratio Ratio.\n * @param {Size=} opt_size Optional reusable size array.\n * @return {Size} The scaled size.\n */\nexport function scale(size, ratio, opt_size) {\n  if (opt_size === undefined) {\n    opt_size = [0, 0];\n  }\n  opt_size[0] = (size[0] * ratio + 0.5) | 0;\n  opt_size[1] = (size[1] * ratio + 0.5) | 0;\n  return opt_size;\n}\n\n\n/**\n * Returns an `Size` array for the passed in number (meaning: square) or\n * `Size` array.\n * (meaning: non-square),\n * @param {number|Size} size Width and height.\n * @param {Size=} opt_size Optional reusable size array.\n * @return {Size} Size.\n * @api\n */\nexport function toSize(size, opt_size) {\n  if (Array.isArray(size)) {\n    return size;\n  } else {\n    if (opt_size === undefined) {\n      opt_size = [size, size];\n    } else {\n      opt_size[0] = opt_size[1] = /** @type {number} */ (size);\n    }\n    return opt_size;\n  }\n}\n","/**\n * @module ol/Observable\n */\nimport {listen, unlistenByKey, unlisten, listenOnce} from './events.js';\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * An event target providing convenient methods for listener registration\n * and unregistration. A generic `change` event is always available through\n * {@link module:ol/Observable~Observable#changed}.\n *\n * @fires import(\"./events/Event.js\").Event\n * @api\n */\nclass Observable extends EventTarget {\n  constructor() {\n\n    super();\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.revision_ = 0;\n\n  }\n\n  /**\n   * Increases the revision counter and dispatches a 'change' event.\n   * @api\n   */\n  changed() {\n    ++this.revision_;\n    this.dispatchEvent(EventType.CHANGE);\n  }\n\n  /**\n   * Get the version number for this object.  Each time the object is modified,\n   * its version number will be incremented.\n   * @return {number} Revision.\n   * @api\n   */\n  getRevision() {\n    return this.revision_;\n  }\n\n  /**\n   * Listen for a certain type of event.\n   * @param {string|Array<string>} type The event type or array of event types.\n   * @param {function(?): ?} listener The listener function.\n   * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n   *     called with an array of event types as the first argument, the return\n   *     will be an array of keys.\n   * @api\n   */\n  on(type, listener) {\n    if (Array.isArray(type)) {\n      const len = type.length;\n      const keys = new Array(len);\n      for (let i = 0; i < len; ++i) {\n        keys[i] = listen(this, type[i], listener);\n      }\n      return keys;\n    } else {\n      return listen(this, /** @type {string} */ (type), listener);\n    }\n  }\n\n  /**\n   * Listen once for a certain type of event.\n   * @param {string|Array<string>} type The event type or array of event types.\n   * @param {function(?): ?} listener The listener function.\n   * @return {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} Unique key for the listener. If\n   *     called with an array of event types as the first argument, the return\n   *     will be an array of keys.\n   * @api\n   */\n  once(type, listener) {\n    if (Array.isArray(type)) {\n      const len = type.length;\n      const keys = new Array(len);\n      for (let i = 0; i < len; ++i) {\n        keys[i] = listenOnce(this, type[i], listener);\n      }\n      return keys;\n    } else {\n      return listenOnce(this, /** @type {string} */ (type), listener);\n    }\n  }\n\n  /**\n   * Unlisten for a certain type of event.\n   * @param {string|Array<string>} type The event type or array of event types.\n   * @param {function(?): ?} listener The listener function.\n   * @api\n   */\n  un(type, listener) {\n    if (Array.isArray(type)) {\n      for (let i = 0, ii = type.length; i < ii; ++i) {\n        unlisten(this, type[i], listener);\n      }\n      return;\n    } else {\n      unlisten(this, /** @type {string} */ (type), listener);\n    }\n  }\n}\n\n\n/**\n * Removes an event listener using the key returned by `on()` or `once()`.\n * @param {import(\"./events.js\").EventsKey|Array<import(\"./events.js\").EventsKey>} key The key returned by `on()`\n *     or `once()` (or an array of keys).\n * @api\n */\nexport function unByKey(key) {\n  if (Array.isArray(key)) {\n    for (let i = 0, ii = key.length; i < ii; ++i) {\n      unlistenByKey(key[i]);\n    }\n  } else {\n    unlistenByKey(/** @type {import(\"./events.js\").EventsKey} */ (key));\n  }\n}\n\n\nexport default Observable;\n","/**\n * @module ol/coordinate\n */\nimport {modulo} from './math.js';\nimport {padNumber} from './string.js';\n\n\n/**\n * An array of numbers representing an xy coordinate. Example: `[16, 48]`.\n * @typedef {Array<number>} Coordinate\n * @api\n */\n\n\n/**\n * A function that takes a {@link module:ol/coordinate~Coordinate} and\n * transforms it into a `{string}`.\n *\n * @typedef {function((Coordinate|undefined)): string} CoordinateFormat\n * @api\n */\n\n\n/**\n * Add `delta` to `coordinate`. `coordinate` is modified in place and returned\n * by the function.\n *\n * Example:\n *\n *     import {add} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     add(coord, [-2, 4]);\n *     // coord is now [5.85, 51.983333]\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {Coordinate} delta Delta.\n * @return {Coordinate} The input coordinate adjusted by\n * the given delta.\n * @api\n */\nexport function add(coordinate, delta) {\n  coordinate[0] += delta[0];\n  coordinate[1] += delta[1];\n  return coordinate;\n}\n\n\n/**\n * Calculates the point closest to the passed coordinate on the passed circle.\n *\n * @param {Coordinate} coordinate The coordinate.\n * @param {import(\"./geom/Circle.js\").default} circle The circle.\n * @return {Coordinate} Closest point on the circumference.\n */\nexport function closestOnCircle(coordinate, circle) {\n  const r = circle.getRadius();\n  const center = circle.getCenter();\n  const x0 = center[0];\n  const y0 = center[1];\n  const x1 = coordinate[0];\n  const y1 = coordinate[1];\n\n  let dx = x1 - x0;\n  const dy = y1 - y0;\n  if (dx === 0 && dy === 0) {\n    dx = 1;\n  }\n  const d = Math.sqrt(dx * dx + dy * dy);\n\n  const x = x0 + r * dx / d;\n  const y = y0 + r * dy / d;\n\n  return [x, y];\n}\n\n\n/**\n * Calculates the point closest to the passed coordinate on the passed segment.\n * This is the foot of the perpendicular of the coordinate to the segment when\n * the foot is on the segment, or the closest segment coordinate when the foot\n * is outside the segment.\n *\n * @param {Coordinate} coordinate The coordinate.\n * @param {Array<Coordinate>} segment The two coordinates\n * of the segment.\n * @return {Coordinate} The foot of the perpendicular of\n * the coordinate to the segment.\n */\nexport function closestOnSegment(coordinate, segment) {\n  const x0 = coordinate[0];\n  const y0 = coordinate[1];\n  const start = segment[0];\n  const end = segment[1];\n  const x1 = start[0];\n  const y1 = start[1];\n  const x2 = end[0];\n  const y2 = end[1];\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  const along = (dx === 0 && dy === 0) ? 0 :\n    ((dx * (x0 - x1)) + (dy * (y0 - y1))) / ((dx * dx + dy * dy) || 0);\n  let x, y;\n  if (along <= 0) {\n    x = x1;\n    y = y1;\n  } else if (along >= 1) {\n    x = x2;\n    y = y2;\n  } else {\n    x = x1 + along * dx;\n    y = y1 + along * dy;\n  }\n  return [x, y];\n}\n\n\n/**\n * Returns a {@link module:ol/coordinate~CoordinateFormat} function that can be\n * used to format\n * a {Coordinate} to a string.\n *\n * Example without specifying the fractional digits:\n *\n *     import {createStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var stringifyFunc = createStringXY();\n *     var out = stringifyFunc(coord);\n *     // out is now '8, 48'\n *\n * Example with explicitly specifying 2 fractional digits:\n *\n *     import {createStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var stringifyFunc = createStringXY(2);\n *     var out = stringifyFunc(coord);\n *     // out is now '7.85, 47.98'\n *\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {CoordinateFormat} Coordinate format.\n * @api\n */\nexport function createStringXY(opt_fractionDigits) {\n  return (\n    /**\n     * @param {Coordinate} coordinate Coordinate.\n     * @return {string} String XY.\n     */\n    function(coordinate) {\n      return toStringXY(coordinate, opt_fractionDigits);\n    }\n  );\n}\n\n\n/**\n * @param {string} hemispheres Hemispheres.\n * @param {number} degrees Degrees.\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} String.\n */\nexport function degreesToStringHDMS(hemispheres, degrees, opt_fractionDigits) {\n  const normalizedDegrees = modulo(degrees + 180, 360) - 180;\n  const x = Math.abs(3600 * normalizedDegrees);\n  const dflPrecision = opt_fractionDigits || 0;\n  const precision = Math.pow(10, dflPrecision);\n\n  let deg = Math.floor(x / 3600);\n  let min = Math.floor((x - deg * 3600) / 60);\n  let sec = x - (deg * 3600) - (min * 60);\n  sec = Math.ceil(sec * precision) / precision;\n\n  if (sec >= 60) {\n    sec = 0;\n    min += 1;\n  }\n\n  if (min >= 60) {\n    min = 0;\n    deg += 1;\n  }\n\n  return deg + '\\u00b0 ' + padNumber(min, 2) + '\\u2032 ' +\n    padNumber(sec, 2, dflPrecision) + '\\u2033' +\n    (normalizedDegrees == 0 ? '' : ' ' + hemispheres.charAt(normalizedDegrees < 0 ? 1 : 0));\n}\n\n\n/**\n * Transforms the given {@link module:ol/coordinate~Coordinate} to a string\n * using the given string template. The strings `{x}` and `{y}` in the template\n * will be replaced with the first and second coordinate values respectively.\n *\n * Example without specifying the fractional digits:\n *\n *     import {format} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var template = 'Coordinate is ({x}|{y}).';\n *     var out = format(coord, template);\n *     // out is now 'Coordinate is (8|48).'\n *\n * Example explicitly specifying the fractional digits:\n *\n *     import {format} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var template = 'Coordinate is ({x}|{y}).';\n *     var out = format(coord, template, 2);\n *     // out is now 'Coordinate is (7.85|47.98).'\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {string} template A template string with `{x}` and `{y}` placeholders\n *     that will be replaced by first and second coordinate values.\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} Formatted coordinate.\n * @api\n */\nexport function format(coordinate, template, opt_fractionDigits) {\n  if (coordinate) {\n    return template\n      .replace('{x}', coordinate[0].toFixed(opt_fractionDigits))\n      .replace('{y}', coordinate[1].toFixed(opt_fractionDigits));\n  } else {\n    return '';\n  }\n}\n\n\n/**\n * @param {Coordinate} coordinate1 First coordinate.\n * @param {Coordinate} coordinate2 Second coordinate.\n * @return {boolean} The two coordinates are equal.\n */\nexport function equals(coordinate1, coordinate2) {\n  let equals = true;\n  for (let i = coordinate1.length - 1; i >= 0; --i) {\n    if (coordinate1[i] != coordinate2[i]) {\n      equals = false;\n      break;\n    }\n  }\n  return equals;\n}\n\n\n/**\n * Rotate `coordinate` by `angle`. `coordinate` is modified in place and\n * returned by the function.\n *\n * Example:\n *\n *     import {rotate} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var rotateRadians = Math.PI / 2; // 90 degrees\n *     rotate(coord, rotateRadians);\n *     // coord is now [-47.983333, 7.85]\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number} angle Angle in radian.\n * @return {Coordinate} Coordinate.\n * @api\n */\nexport function rotate(coordinate, angle) {\n  const cosAngle = Math.cos(angle);\n  const sinAngle = Math.sin(angle);\n  const x = coordinate[0] * cosAngle - coordinate[1] * sinAngle;\n  const y = coordinate[1] * cosAngle + coordinate[0] * sinAngle;\n  coordinate[0] = x;\n  coordinate[1] = y;\n  return coordinate;\n}\n\n\n/**\n * Scale `coordinate` by `scale`. `coordinate` is modified in place and returned\n * by the function.\n *\n * Example:\n *\n *     import {scale as scaleCoordinate} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var scale = 1.2;\n *     scaleCoordinate(coord, scale);\n *     // coord is now [9.42, 57.5799996]\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number} scale Scale factor.\n * @return {Coordinate} Coordinate.\n */\nexport function scale(coordinate, scale) {\n  coordinate[0] *= scale;\n  coordinate[1] *= scale;\n  return coordinate;\n}\n\n\n/**\n * @param {Coordinate} coord1 First coordinate.\n * @param {Coordinate} coord2 Second coordinate.\n * @return {number} Squared distance between coord1 and coord2.\n */\nexport function squaredDistance(coord1, coord2) {\n  const dx = coord1[0] - coord2[0];\n  const dy = coord1[1] - coord2[1];\n  return dx * dx + dy * dy;\n}\n\n\n/**\n * @param {Coordinate} coord1 First coordinate.\n * @param {Coordinate} coord2 Second coordinate.\n * @return {number} Distance between coord1 and coord2.\n */\nexport function distance(coord1, coord2) {\n  return Math.sqrt(squaredDistance(coord1, coord2));\n}\n\n\n/**\n * Calculate the squared distance from a coordinate to a line segment.\n *\n * @param {Coordinate} coordinate Coordinate of the point.\n * @param {Array<Coordinate>} segment Line segment (2\n * coordinates).\n * @return {number} Squared distance from the point to the line segment.\n */\nexport function squaredDistanceToSegment(coordinate, segment) {\n  return squaredDistance(coordinate,\n    closestOnSegment(coordinate, segment));\n}\n\n\n/**\n * Format a geographic coordinate with the hemisphere, degrees, minutes, and\n * seconds.\n *\n * Example without specifying fractional digits:\n *\n *     import {toStringHDMS} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringHDMS(coord);\n *     // out is now '47 58 60 N 7 50 60 E'\n *\n * Example explicitly specifying 1 fractional digit:\n *\n *     import {toStringHDMS} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringHDMS(coord, 1);\n *     // out is now '47 58 60.0 N 7 50 60.0 E'\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} Hemisphere, degrees, minutes and seconds.\n * @api\n */\nexport function toStringHDMS(coordinate, opt_fractionDigits) {\n  if (coordinate) {\n    return degreesToStringHDMS('NS', coordinate[1], opt_fractionDigits) + ' ' +\n        degreesToStringHDMS('EW', coordinate[0], opt_fractionDigits);\n  } else {\n    return '';\n  }\n}\n\n\n/**\n * Format a coordinate as a comma delimited string.\n *\n * Example without specifying fractional digits:\n *\n *     import {toStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringXY(coord);\n *     // out is now '8, 48'\n *\n * Example explicitly specifying 1 fractional digit:\n *\n *     import {toStringXY} from 'ol/coordinate';\n *\n *     var coord = [7.85, 47.983333];\n *     var out = toStringXY(coord, 1);\n *     // out is now '7.8, 48.0'\n *\n * @param {Coordinate} coordinate Coordinate.\n * @param {number=} opt_fractionDigits The number of digits to include\n *    after the decimal point. Default is `0`.\n * @return {string} XY.\n * @api\n */\nexport function toStringXY(coordinate, opt_fractionDigits) {\n  return format(coordinate, '{x}, {y}', opt_fractionDigits);\n}\n","/**\n * @module ol/reproj/common\n */\n\n/**\n * Default maximum allowed threshold  (in pixels) for reprojection\n * triangulation.\n * @type {number}\n */\nexport const ERROR_THRESHOLD = 0.5;\n\n/**\n * Enable automatic reprojection of raster sources. Default is `true`.\n * TODO: decide if we want to expose this as a build flag or remove it\n * @type {boolean}\n */\nexport const ENABLE_RASTER_REPROJECTION = true;\n","/**\n * @module ol/CollectionEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when an item is added to the collection.\n   * @event module:ol/Collection.CollectionEvent#add\n   * @api\n   */\n  ADD: 'add',\n  /**\n   * Triggered when an item is removed from the collection.\n   * @event module:ol/Collection.CollectionEvent#remove\n   * @api\n   */\n  REMOVE: 'remove'\n};\n","/**\n * @module ol/style/IconAnchorUnits\n */\n\n/**\n * Icon anchor units. One of 'fraction', 'pixels'.\n * @enum {string}\n */\nexport default {\n  FRACTION: 'fraction',\n  PIXELS: 'pixels'\n};\n","/**\n * @module ol/geom/flat/deflate\n */\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {number} stride Stride.\n * @return {number} offset Offset.\n */\nexport function deflateCoordinate(flatCoordinates, offset, coordinate, stride) {\n  for (let i = 0, ii = coordinate.length; i < ii; ++i) {\n    flatCoordinates[offset++] = coordinate[i];\n  }\n  return offset;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<import(\"../../coordinate.js\").Coordinate>} coordinates Coordinates.\n * @param {number} stride Stride.\n * @return {number} offset Offset.\n */\nexport function deflateCoordinates(flatCoordinates, offset, coordinates, stride) {\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    const coordinate = coordinates[i];\n    for (let j = 0; j < stride; ++j) {\n      flatCoordinates[offset++] = coordinate[j];\n    }\n  }\n  return offset;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<import(\"../../coordinate.js\").Coordinate>>} coordinatess Coordinatess.\n * @param {number} stride Stride.\n * @param {Array<number>=} opt_ends Ends.\n * @return {Array<number>} Ends.\n */\nexport function deflateCoordinatesArray(flatCoordinates, offset, coordinatess, stride, opt_ends) {\n  const ends = opt_ends ? opt_ends : [];\n  let i = 0;\n  for (let j = 0, jj = coordinatess.length; j < jj; ++j) {\n    const end = deflateCoordinates(\n      flatCoordinates, offset, coordinatess[j], stride);\n    ends[i++] = end;\n    offset = end;\n  }\n  ends.length = i;\n  return ends;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<Array<import(\"../../coordinate.js\").Coordinate>>>} coordinatesss Coordinatesss.\n * @param {number} stride Stride.\n * @param {Array<Array<number>>=} opt_endss Endss.\n * @return {Array<Array<number>>} Endss.\n */\nexport function deflateMultiCoordinatesArray(flatCoordinates, offset, coordinatesss, stride, opt_endss) {\n  const endss = opt_endss ? opt_endss : [];\n  let i = 0;\n  for (let j = 0, jj = coordinatesss.length; j < jj; ++j) {\n    const ends = deflateCoordinatesArray(\n      flatCoordinates, offset, coordinatesss[j], stride, endss[i]);\n    endss[i++] = ends;\n    offset = ends[ends.length - 1];\n  }\n  endss.length = i;\n  return endss;\n}\n","/**\n * @module ol/LayerType\n */\n\n/**\n * A layer type used when creating layer renderers.\n * @enum {string}\n */\nexport default {\n  IMAGE: 'IMAGE',\n  TILE: 'TILE',\n  VECTOR_TILE: 'VECTOR_TILE',\n  VECTOR: 'VECTOR'\n};\n","/**\n * @module ol/geom/flat/inflate\n */\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {Array<import(\"../../coordinate.js\").Coordinate>=} opt_coordinates Coordinates.\n * @return {Array<import(\"../../coordinate.js\").Coordinate>} Coordinates.\n */\nexport function inflateCoordinates(flatCoordinates, offset, end, stride, opt_coordinates) {\n  const coordinates = opt_coordinates !== undefined ? opt_coordinates : [];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    coordinates[i++] = flatCoordinates.slice(j, j + stride);\n  }\n  coordinates.length = i;\n  return coordinates;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {Array<Array<import(\"../../coordinate.js\").Coordinate>>=} opt_coordinatess Coordinatess.\n * @return {Array<Array<import(\"../../coordinate.js\").Coordinate>>} Coordinatess.\n */\nexport function inflateCoordinatesArray(flatCoordinates, offset, ends, stride, opt_coordinatess) {\n  const coordinatess = opt_coordinatess !== undefined ? opt_coordinatess : [];\n  let i = 0;\n  for (let j = 0, jj = ends.length; j < jj; ++j) {\n    const end = ends[j];\n    coordinatess[i++] = inflateCoordinates(\n      flatCoordinates, offset, end, stride, coordinatess[i]);\n    offset = end;\n  }\n  coordinatess.length = i;\n  return coordinatess;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {Array<Array<Array<import(\"../../coordinate.js\").Coordinate>>>=} opt_coordinatesss\n *     Coordinatesss.\n * @return {Array<Array<Array<import(\"../../coordinate.js\").Coordinate>>>} Coordinatesss.\n */\nexport function inflateMultiCoordinatesArray(flatCoordinates, offset, endss, stride, opt_coordinatesss) {\n  const coordinatesss = opt_coordinatesss !== undefined ? opt_coordinatesss : [];\n  let i = 0;\n  for (let j = 0, jj = endss.length; j < jj; ++j) {\n    const ends = endss[j];\n    coordinatesss[i++] = inflateCoordinatesArray(\n      flatCoordinates, offset, ends, stride, coordinatesss[i]);\n    offset = ends[ends.length - 1];\n  }\n  coordinatesss.length = i;\n  return coordinatesss;\n}\n","/**\n * @module ol/color\n */\nimport {assert} from './asserts.js';\nimport {clamp} from './math.js';\n\n\n/**\n * A color represented as a short array [red, green, blue, alpha].\n * red, green, and blue should be integers in the range 0..255 inclusive.\n * alpha should be a float in the range 0..1 inclusive. If no alpha value is\n * given then `1` will be used.\n * @typedef {Array<number>} Color\n * @api\n */\n\n\n/**\n * This RegExp matches # followed by 3, 4, 6, or 8 hex digits.\n * @const\n * @type {RegExp}\n * @private\n */\nconst HEX_COLOR_RE_ = /^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i;\n\n\n/**\n * Regular expression for matching potential named color style strings.\n * @const\n * @type {RegExp}\n * @private\n */\nconst NAMED_COLOR_RE_ = /^([a-z]*)$/i;\n\n\n/**\n * Return the color as an rgba string.\n * @param {Color|string} color Color.\n * @return {string} Rgba string.\n * @api\n */\nexport function asString(color) {\n  if (typeof color === 'string') {\n    return color;\n  } else {\n    return toString(color);\n  }\n}\n\n/**\n * Return named color as an rgba string.\n * @param {string} color Named color.\n * @return {string} Rgb string.\n */\nfunction fromNamed(color) {\n  const el = document.createElement('div');\n  el.style.color = color;\n  if (el.style.color !== '') {\n    document.body.appendChild(el);\n    const rgb = getComputedStyle(el).color;\n    document.body.removeChild(el);\n    return rgb;\n  } else {\n    return '';\n  }\n}\n\n\n/**\n * @param {string} s String.\n * @return {Color} Color.\n */\nexport const fromString = (\n  function() {\n\n    // We maintain a small cache of parsed strings.  To provide cheap LRU-like\n    // semantics, whenever the cache grows too large we simply delete an\n    // arbitrary 25% of the entries.\n\n    /**\n     * @const\n     * @type {number}\n     */\n    const MAX_CACHE_SIZE = 1024;\n\n    /**\n     * @type {Object<string, Color>}\n     */\n    const cache = {};\n\n    /**\n     * @type {number}\n     */\n    let cacheSize = 0;\n\n    return (\n      /**\n       * @param {string} s String.\n       * @return {Color} Color.\n       */\n      function(s) {\n        let color;\n        if (cache.hasOwnProperty(s)) {\n          color = cache[s];\n        } else {\n          if (cacheSize >= MAX_CACHE_SIZE) {\n            let i = 0;\n            for (const key in cache) {\n              if ((i++ & 3) === 0) {\n                delete cache[key];\n                --cacheSize;\n              }\n            }\n          }\n          color = fromStringInternal_(s);\n          cache[s] = color;\n          ++cacheSize;\n        }\n        return color;\n      }\n    );\n\n  })();\n\n/**\n * Return the color as an array. This function maintains a cache of calculated\n * arrays which means the result should not be modified.\n * @param {Color|string} color Color.\n * @return {Color} Color.\n * @api\n */\nexport function asArray(color) {\n  if (Array.isArray(color)) {\n    return color;\n  } else {\n    return fromString(color);\n  }\n}\n\n/**\n * @param {string} s String.\n * @private\n * @return {Color} Color.\n */\nfunction fromStringInternal_(s) {\n  let r, g, b, a, color;\n\n  if (NAMED_COLOR_RE_.exec(s)) {\n    s = fromNamed(s);\n  }\n\n  if (HEX_COLOR_RE_.exec(s)) { // hex\n    const n = s.length - 1; // number of hex digits\n    let d; // number of digits per channel\n    if (n <= 4) {\n      d = 1;\n    } else {\n      d = 2;\n    }\n    const hasAlpha = n === 4 || n === 8;\n    r = parseInt(s.substr(1 + 0 * d, d), 16);\n    g = parseInt(s.substr(1 + 1 * d, d), 16);\n    b = parseInt(s.substr(1 + 2 * d, d), 16);\n    if (hasAlpha) {\n      a = parseInt(s.substr(1 + 3 * d, d), 16);\n    } else {\n      a = 255;\n    }\n    if (d == 1) {\n      r = (r << 4) + r;\n      g = (g << 4) + g;\n      b = (b << 4) + b;\n      if (hasAlpha) {\n        a = (a << 4) + a;\n      }\n    }\n    color = [r, g, b, a / 255];\n  } else if (s.indexOf('rgba(') == 0) { // rgba()\n    color = s.slice(5, -1).split(',').map(Number);\n    normalize(color);\n  } else if (s.indexOf('rgb(') == 0) { // rgb()\n    color = s.slice(4, -1).split(',').map(Number);\n    color.push(1);\n    normalize(color);\n  } else {\n    assert(false, 14); // Invalid color\n  }\n  return color;\n}\n\n\n/**\n * TODO this function is only used in the test, we probably shouldn't export it\n * @param {Color} color Color.\n * @return {Color} Clamped color.\n */\nexport function normalize(color) {\n  color[0] = clamp((color[0] + 0.5) | 0, 0, 255);\n  color[1] = clamp((color[1] + 0.5) | 0, 0, 255);\n  color[2] = clamp((color[2] + 0.5) | 0, 0, 255);\n  color[3] = clamp(color[3], 0, 1);\n  return color;\n}\n\n\n/**\n * @param {Color} color Color.\n * @return {string} String.\n */\nexport function toString(color) {\n  let r = color[0];\n  if (r != (r | 0)) {\n    r = (r + 0.5) | 0;\n  }\n  let g = color[1];\n  if (g != (g | 0)) {\n    g = (g + 0.5) | 0;\n  }\n  let b = color[2];\n  if (b != (b | 0)) {\n    b = (b + 0.5) | 0;\n  }\n  const a = color[3] === undefined ? 1 : color[3];\n  return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n}\n","/**\n * @module ol/Collection\n */\nimport AssertionError from './AssertionError.js';\nimport CollectionEventType from './CollectionEventType.js';\nimport BaseObject from './Object.js';\nimport Event from './events/Event.js';\n\n\n/**\n * @enum {string}\n * @private\n */\nconst Property = {\n  LENGTH: 'length'\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/Collection~Collection} instances are instances of this\n * type.\n */\nexport class CollectionEvent extends Event {\n\n  /**\n   * @param {CollectionEventType} type Type.\n   * @param {*=} opt_element Element.\n   */\n  constructor(type, opt_element) {\n    super(type);\n\n    /**\n     * The element that is added to or removed from the collection.\n     * @type {*}\n     * @api\n     */\n    this.element = opt_element;\n\n  }\n\n}\n\n\n/**\n * @typedef {Object} Options\n * @property {boolean} [unique=false] Disallow the same item from being added to\n * the collection twice.\n */\n\n/**\n * @classdesc\n * An expanded version of standard JS Array, adding convenience methods for\n * manipulation. Add and remove changes to the Collection trigger a Collection\n * event. Note that this does not cover changes to the objects _within_ the\n * Collection; they trigger events on the appropriate object, not on the\n * Collection as a whole.\n *\n * @fires CollectionEvent\n *\n * @template T\n * @api\n */\nclass Collection extends BaseObject {\n\n  /**\n   * @param {Array<T>=} opt_array Array.\n   * @param {Options=} opt_options Collection options.\n   */\n  constructor(opt_array, opt_options) {\n\n    super();\n\n    const options = opt_options || {};\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.unique_ = !!options.unique;\n\n    /**\n     * @private\n     * @type {!Array<T>}\n     */\n    this.array_ = opt_array ? opt_array : [];\n\n    if (this.unique_) {\n      for (let i = 0, ii = this.array_.length; i < ii; ++i) {\n        this.assertUnique_(this.array_[i], i);\n      }\n    }\n\n    this.updateLength_();\n\n  }\n\n  /**\n   * Remove all elements from the collection.\n   * @api\n   */\n  clear() {\n    while (this.getLength() > 0) {\n      this.pop();\n    }\n  }\n\n  /**\n   * Add elements to the collection.  This pushes each item in the provided array\n   * to the end of the collection.\n   * @param {!Array<T>} arr Array.\n   * @return {Collection<T>} This collection.\n   * @api\n   */\n  extend(arr) {\n    for (let i = 0, ii = arr.length; i < ii; ++i) {\n      this.push(arr[i]);\n    }\n    return this;\n  }\n\n  /**\n   * Iterate over each element, calling the provided callback.\n   * @param {function(T, number, Array<T>): *} f The function to call\n   *     for every element. This function takes 3 arguments (the element, the\n   *     index and the array). The return value is ignored.\n   * @api\n   */\n  forEach(f) {\n    const array = this.array_;\n    for (let i = 0, ii = array.length; i < ii; ++i) {\n      f(array[i], i, array);\n    }\n  }\n\n  /**\n   * Get a reference to the underlying Array object. Warning: if the array\n   * is mutated, no events will be dispatched by the collection, and the\n   * collection's \"length\" property won't be in sync with the actual length\n   * of the array.\n   * @return {!Array<T>} Array.\n   * @api\n   */\n  getArray() {\n    return this.array_;\n  }\n\n  /**\n   * Get the element at the provided index.\n   * @param {number} index Index.\n   * @return {T} Element.\n   * @api\n   */\n  item(index) {\n    return this.array_[index];\n  }\n\n  /**\n   * Get the length of this collection.\n   * @return {number} The length of the array.\n   * @observable\n   * @api\n   */\n  getLength() {\n    return this.get(Property.LENGTH);\n  }\n\n  /**\n   * Insert an element at the provided index.\n   * @param {number} index Index.\n   * @param {T} elem Element.\n   * @api\n   */\n  insertAt(index, elem) {\n    if (this.unique_) {\n      this.assertUnique_(elem);\n    }\n    this.array_.splice(index, 0, elem);\n    this.updateLength_();\n    this.dispatchEvent(\n      new CollectionEvent(CollectionEventType.ADD, elem));\n  }\n\n  /**\n   * Remove the last element of the collection and return it.\n   * Return `undefined` if the collection is empty.\n   * @return {T|undefined} Element.\n   * @api\n   */\n  pop() {\n    return this.removeAt(this.getLength() - 1);\n  }\n\n  /**\n   * Insert the provided element at the end of the collection.\n   * @param {T} elem Element.\n   * @return {number} New length of the collection.\n   * @api\n   */\n  push(elem) {\n    if (this.unique_) {\n      this.assertUnique_(elem);\n    }\n    const n = this.getLength();\n    this.insertAt(n, elem);\n    return this.getLength();\n  }\n\n  /**\n   * Remove the first occurrence of an element from the collection.\n   * @param {T} elem Element.\n   * @return {T|undefined} The removed element or undefined if none found.\n   * @api\n   */\n  remove(elem) {\n    const arr = this.array_;\n    for (let i = 0, ii = arr.length; i < ii; ++i) {\n      if (arr[i] === elem) {\n        return this.removeAt(i);\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * Remove the element at the provided index and return it.\n   * Return `undefined` if the collection does not contain this index.\n   * @param {number} index Index.\n   * @return {T|undefined} Value.\n   * @api\n   */\n  removeAt(index) {\n    const prev = this.array_[index];\n    this.array_.splice(index, 1);\n    this.updateLength_();\n    this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE, prev));\n    return prev;\n  }\n\n  /**\n   * Set the element at the provided index.\n   * @param {number} index Index.\n   * @param {T} elem Element.\n   * @api\n   */\n  setAt(index, elem) {\n    const n = this.getLength();\n    if (index < n) {\n      if (this.unique_) {\n        this.assertUnique_(elem, index);\n      }\n      const prev = this.array_[index];\n      this.array_[index] = elem;\n      this.dispatchEvent(\n        new CollectionEvent(CollectionEventType.REMOVE, prev));\n      this.dispatchEvent(\n        new CollectionEvent(CollectionEventType.ADD, elem));\n    } else {\n      for (let j = n; j < index; ++j) {\n        this.insertAt(j, undefined);\n      }\n      this.insertAt(index, elem);\n    }\n  }\n\n  /**\n   * @private\n   */\n  updateLength_() {\n    this.set(Property.LENGTH, this.array_.length);\n  }\n\n  /**\n   * @private\n   * @param {T} elem Element.\n   * @param {number=} opt_except Optional index to ignore.\n   */\n  assertUnique_(elem, opt_except) {\n    for (let i = 0, ii = this.array_.length; i < ii; ++i) {\n      if (this.array_[i] === elem && i !== opt_except) {\n        throw new AssertionError(58);\n      }\n    }\n  }\n}\n\n\nexport default Collection;\n","/**\n * @module ol/layer/Layer\n */\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {getUid} from '../util.js';\nimport {getChangeEventType} from '../Object.js';\nimport BaseLayer from './Base.js';\nimport LayerProperty from './Property.js';\nimport {assign} from '../obj.js';\nimport RenderEventType from '../render/EventType.js';\nimport SourceState from '../source/State.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {import(\"../source/Source.js\").default} [source] Source for this layer.  If not provided to the constructor,\n * the source can be set by calling {@link module:ol/layer/Layer#setSource layer.setSource(source)} after\n * construction.\n * @property {import(\"../PluggableMap.js\").default} [map] Map.\n */\n\n\n/**\n * @typedef {Object} State\n * @property {import(\"./Base.js\").default} layer\n * @property {number} opacity\n * @property {SourceState} sourceState\n * @property {boolean} visible\n * @property {boolean} managed\n * @property {import(\"../extent.js\").Extent} [extent]\n * @property {number} zIndex\n * @property {number} maxResolution\n * @property {number} minResolution\n */\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * A visual representation of raster or vector map data.\n * Layers group together those properties that pertain to how the data is to be\n * displayed, irrespective of the source of that data.\n *\n * Layers are usually added to a map with {@link module:ol/Map#addLayer}. Components\n * like {@link module:ol/interaction/Select~Select} use unmanaged layers\n * internally. These unmanaged layers are associated with the map using\n * {@link module:ol/layer/Layer~Layer#setMap} instead.\n *\n * A generic `change` event is fired when the state of the source changes.\n *\n * @fires import(\"../render/Event.js\").RenderEvent\n */\nclass Layer extends BaseLayer {\n  /**\n   * @param {Options} options Layer options.\n   */\n  constructor(options) {\n\n    const baseOptions = assign({}, options);\n    delete baseOptions.source;\n\n    super(baseOptions);\n\n    /**\n     * @private\n     * @type {?import(\"../events.js\").EventsKey}\n     */\n    this.mapPrecomposeKey_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../events.js\").EventsKey}\n     */\n    this.mapRenderKey_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../events.js\").EventsKey}\n     */\n    this.sourceChangeKey_ = null;\n\n    if (options.map) {\n      this.setMap(options.map);\n    }\n\n    listen(this,\n      getChangeEventType(LayerProperty.SOURCE),\n      this.handleSourcePropertyChange_, this);\n\n    const source = options.source ? options.source : null;\n    this.setSource(source);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getLayersArray(opt_array) {\n    const array = opt_array ? opt_array : [];\n    array.push(this);\n    return array;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getLayerStatesArray(opt_states) {\n    const states = opt_states ? opt_states : [];\n    states.push(this.getLayerState());\n    return states;\n  }\n\n  /**\n   * Get the layer source.\n   * @return {import(\"../source/Source.js\").default} The layer source (or `null` if not yet set).\n   * @observable\n   * @api\n   */\n  getSource() {\n    const source = this.get(LayerProperty.SOURCE);\n    return (\n      /** @type {import(\"../source/Source.js\").default} */ (source) || null\n    );\n  }\n\n  /**\n    * @inheritDoc\n    */\n  getSourceState() {\n    const source = this.getSource();\n    return !source ? SourceState.UNDEFINED : source.getState();\n  }\n\n  /**\n   * @private\n   */\n  handleSourceChange_() {\n    this.changed();\n  }\n\n  /**\n   * @private\n   */\n  handleSourcePropertyChange_() {\n    if (this.sourceChangeKey_) {\n      unlistenByKey(this.sourceChangeKey_);\n      this.sourceChangeKey_ = null;\n    }\n    const source = this.getSource();\n    if (source) {\n      this.sourceChangeKey_ = listen(source,\n        EventType.CHANGE, this.handleSourceChange_, this);\n    }\n    this.changed();\n  }\n\n  /**\n   * Sets the layer to be rendered on top of other layers on a map. The map will\n   * not manage this layer in its layers collection, and the callback in\n   * {@link module:ol/Map#forEachLayerAtPixel} will receive `null` as layer. This\n   * is useful for temporary layers. To remove an unmanaged layer from the map,\n   * use `#setMap(null)`.\n   *\n   * To add the layer to a map and have it managed by the map, use\n   * {@link module:ol/Map#addLayer} instead.\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   * @api\n   */\n  setMap(map) {\n    if (this.mapPrecomposeKey_) {\n      unlistenByKey(this.mapPrecomposeKey_);\n      this.mapPrecomposeKey_ = null;\n    }\n    if (!map) {\n      this.changed();\n    }\n    if (this.mapRenderKey_) {\n      unlistenByKey(this.mapRenderKey_);\n      this.mapRenderKey_ = null;\n    }\n    if (map) {\n      this.mapPrecomposeKey_ = listen(map, RenderEventType.PRECOMPOSE, function(evt) {\n        const renderEvent = /** @type {import(\"../render/Event.js\").default} */ (evt);\n        const layerState = this.getLayerState();\n        layerState.managed = false;\n        if (this.getZIndex() === undefined) {\n          layerState.zIndex = Infinity;\n        }\n        renderEvent.frameState.layerStatesArray.push(layerState);\n        renderEvent.frameState.layerStates[getUid(this)] = layerState;\n      }, this);\n      this.mapRenderKey_ = listen(this, EventType.CHANGE, map.render, map);\n      this.changed();\n    }\n  }\n\n  /**\n   * Set the layer source.\n   * @param {import(\"../source/Source.js\").default} source The layer source.\n   * @observable\n   * @api\n   */\n  setSource(source) {\n    this.set(LayerProperty.SOURCE, source);\n  }\n}\n\n\n/**\n * Return `true` if the layer is visible, and if the passed resolution is\n * between the layer's minResolution and maxResolution. The comparison is\n * inclusive for `minResolution` and exclusive for `maxResolution`.\n * @param {State} layerState Layer state.\n * @param {number} resolution Resolution.\n * @return {boolean} The layer is visible at the given resolution.\n */\nexport function visibleAtResolution(layerState, resolution) {\n  return layerState.visible && resolution >= layerState.minResolution &&\n      resolution < layerState.maxResolution;\n}\n\n\nexport default Layer;\n","/**\n * @module ol/geom/flat/closest\n */\nimport {lerp, squaredDistance as squaredDx} from '../../math.js';\n\n\n/**\n * Returns the point on the 2D line segment flatCoordinates[offset1] to\n * flatCoordinates[offset2] that is closest to the point (x, y).  Extra\n * dimensions are linearly interpolated.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset1 Offset 1.\n * @param {number} offset2 Offset 2.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n */\nfunction assignClosest(flatCoordinates, offset1, offset2, stride, x, y, closestPoint) {\n  const x1 = flatCoordinates[offset1];\n  const y1 = flatCoordinates[offset1 + 1];\n  const dx = flatCoordinates[offset2] - x1;\n  const dy = flatCoordinates[offset2 + 1] - y1;\n  let offset;\n  if (dx === 0 && dy === 0) {\n    offset = offset1;\n  } else {\n    const t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n    if (t > 1) {\n      offset = offset2;\n    } else if (t > 0) {\n      for (let i = 0; i < stride; ++i) {\n        closestPoint[i] = lerp(flatCoordinates[offset1 + i],\n          flatCoordinates[offset2 + i], t);\n      }\n      closestPoint.length = stride;\n      return;\n    } else {\n      offset = offset1;\n    }\n  }\n  for (let i = 0; i < stride; ++i) {\n    closestPoint[i] = flatCoordinates[offset + i];\n  }\n  closestPoint.length = stride;\n}\n\n\n/**\n * Return the squared of the largest distance between any pair of consecutive\n * coordinates.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function maxSquaredDelta(flatCoordinates, offset, end, stride, max) {\n  let x1 = flatCoordinates[offset];\n  let y1 = flatCoordinates[offset + 1];\n  for (offset += stride; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    const squaredDelta = squaredDx(x1, y1, x2, y2);\n    if (squaredDelta > max) {\n      max = squaredDelta;\n    }\n    x1 = x2;\n    y1 = y2;\n  }\n  return max;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function arrayMaxSquaredDelta(flatCoordinates, offset, ends, stride, max) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    max = maxSquaredDelta(\n      flatCoordinates, offset, end, stride, max);\n    offset = end;\n  }\n  return max;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} max Max squared delta.\n * @return {number} Max squared delta.\n */\nexport function multiArrayMaxSquaredDelta(flatCoordinates, offset, endss, stride, max) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    max = arrayMaxSquaredDelta(\n      flatCoordinates, offset, ends, stride, max);\n    offset = ends[ends.length - 1];\n  }\n  return max;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array<number>=} opt_tmpPoint Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestPoint(flatCoordinates, offset, end,\n  stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance,\n  opt_tmpPoint) {\n  if (offset == end) {\n    return minSquaredDistance;\n  }\n  let i, squaredDistance;\n  if (maxDelta === 0) {\n    // All points are identical, so just test the first point.\n    squaredDistance = squaredDx(\n      x, y, flatCoordinates[offset], flatCoordinates[offset + 1]);\n    if (squaredDistance < minSquaredDistance) {\n      for (i = 0; i < stride; ++i) {\n        closestPoint[i] = flatCoordinates[offset + i];\n      }\n      closestPoint.length = stride;\n      return squaredDistance;\n    } else {\n      return minSquaredDistance;\n    }\n  }\n  const tmpPoint = opt_tmpPoint ? opt_tmpPoint : [NaN, NaN];\n  let index = offset + stride;\n  while (index < end) {\n    assignClosest(\n      flatCoordinates, index - stride, index, stride, x, y, tmpPoint);\n    squaredDistance = squaredDx(x, y, tmpPoint[0], tmpPoint[1]);\n    if (squaredDistance < minSquaredDistance) {\n      minSquaredDistance = squaredDistance;\n      for (i = 0; i < stride; ++i) {\n        closestPoint[i] = tmpPoint[i];\n      }\n      closestPoint.length = stride;\n      index += stride;\n    } else {\n      // Skip ahead multiple points, because we know that all the skipped\n      // points cannot be any closer than the closest point we have found so\n      // far.  We know this because we know how close the current point is, how\n      // close the closest point we have found so far is, and the maximum\n      // distance between consecutive points.  For example, if we're currently\n      // at distance 10, the best we've found so far is 3, and that the maximum\n      // distance between consecutive points is 2, then we'll need to skip at\n      // least (10 - 3) / 2 == 3 (rounded down) points to have any chance of\n      // finding a closer point.  We use Math.max(..., 1) to ensure that we\n      // always advance at least one point, to avoid an infinite loop.\n      index += stride * Math.max(\n        ((Math.sqrt(squaredDistance) -\n            Math.sqrt(minSquaredDistance)) / maxDelta) | 0, 1);\n    }\n  }\n  if (isRing) {\n    // Check the closing segment.\n    assignClosest(\n      flatCoordinates, end - stride, offset, stride, x, y, tmpPoint);\n    squaredDistance = squaredDx(x, y, tmpPoint[0], tmpPoint[1]);\n    if (squaredDistance < minSquaredDistance) {\n      minSquaredDistance = squaredDistance;\n      for (i = 0; i < stride; ++i) {\n        closestPoint[i] = tmpPoint[i];\n      }\n      closestPoint.length = stride;\n    }\n  }\n  return minSquaredDistance;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array<number>=} opt_tmpPoint Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestArrayPoint(flatCoordinates, offset, ends,\n  stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance,\n  opt_tmpPoint) {\n  const tmpPoint = opt_tmpPoint ? opt_tmpPoint : [NaN, NaN];\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    minSquaredDistance = assignClosestPoint(\n      flatCoordinates, offset, end, stride,\n      maxDelta, isRing, x, y, closestPoint, minSquaredDistance, tmpPoint);\n    offset = end;\n  }\n  return minSquaredDistance;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} maxDelta Max delta.\n * @param {boolean} isRing Is ring.\n * @param {number} x X.\n * @param {number} y Y.\n * @param {Array<number>} closestPoint Closest point.\n * @param {number} minSquaredDistance Minimum squared distance.\n * @param {Array<number>=} opt_tmpPoint Temporary point object.\n * @return {number} Minimum squared distance.\n */\nexport function assignClosestMultiArrayPoint(flatCoordinates, offset,\n  endss, stride, maxDelta, isRing, x, y, closestPoint, minSquaredDistance,\n  opt_tmpPoint) {\n  const tmpPoint = opt_tmpPoint ? opt_tmpPoint : [NaN, NaN];\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    minSquaredDistance = assignClosestArrayPoint(\n      flatCoordinates, offset, ends, stride,\n      maxDelta, isRing, x, y, closestPoint, minSquaredDistance, tmpPoint);\n    offset = ends[ends.length - 1];\n  }\n  return minSquaredDistance;\n}\n","/**\n * @module ol/geom/flat/transform\n */\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../transform.js\").Transform} transform Transform.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function transform2D(flatCoordinates, offset, end, stride, transform, opt_dest) {\n  const dest = opt_dest ? opt_dest : [];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    const x = flatCoordinates[j];\n    const y = flatCoordinates[j + 1];\n    dest[i++] = transform[0] * x + transform[2] * y + transform[4];\n    dest[i++] = transform[1] * x + transform[3] * y + transform[5];\n  }\n  if (opt_dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} angle Angle.\n * @param {Array<number>} anchor Rotation anchor point.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function rotate(flatCoordinates, offset, end, stride, angle, anchor, opt_dest) {\n  const dest = opt_dest ? opt_dest : [];\n  const cos = Math.cos(angle);\n  const sin = Math.sin(angle);\n  const anchorX = anchor[0];\n  const anchorY = anchor[1];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    const deltaX = flatCoordinates[j] - anchorX;\n    const deltaY = flatCoordinates[j + 1] - anchorY;\n    dest[i++] = anchorX + deltaX * cos - deltaY * sin;\n    dest[i++] = anchorY + deltaX * sin + deltaY * cos;\n    for (let k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (opt_dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n\n\n/**\n * Scale the coordinates.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} sx Scale factor in the x-direction.\n * @param {number} sy Scale factor in the y-direction.\n * @param {Array<number>} anchor Scale anchor point.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function scale(flatCoordinates, offset, end, stride, sx, sy, anchor, opt_dest) {\n  const dest = opt_dest ? opt_dest : [];\n  const anchorX = anchor[0];\n  const anchorY = anchor[1];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    const deltaX = flatCoordinates[j] - anchorX;\n    const deltaY = flatCoordinates[j + 1] - anchorY;\n    dest[i++] = anchorX + sx * deltaX;\n    dest[i++] = anchorY + sy * deltaY;\n    for (let k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (opt_dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} deltaX Delta X.\n * @param {number} deltaY Delta Y.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function translate(flatCoordinates, offset, end, stride, deltaX, deltaY, opt_dest) {\n  const dest = opt_dest ? opt_dest : [];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    dest[i++] = flatCoordinates[j] + deltaX;\n    dest[i++] = flatCoordinates[j + 1] + deltaY;\n    for (let k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (opt_dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n","/**\n * @module ol/events/Target\n */\nimport Disposable from '../Disposable.js';\nimport {unlistenAll} from '../events.js';\nimport {VOID} from '../functions.js';\nimport Event from './Event.js';\n\n\n/**\n * @typedef {EventTarget|Target} EventTargetLike\n */\n\n\n/**\n * @classdesc\n * A simplified implementation of the W3C DOM Level 2 EventTarget interface.\n * See https://www.w3.org/TR/2000/REC-DOM-Level-2-Events-20001113/events.html#Events-EventTarget.\n *\n * There are two important simplifications compared to the specification:\n *\n * 1. The handling of `useCapture` in `addEventListener` and\n *    `removeEventListener`. There is no real capture model.\n * 2. The handling of `stopPropagation` and `preventDefault` on `dispatchEvent`.\n *    There is no event target hierarchy. When a listener calls\n *    `stopPropagation` or `preventDefault` on an event object, it means that no\n *    more listeners after this one will be called. Same as when the listener\n *    returns false.\n */\nclass Target extends Disposable {\n  constructor() {\n\n    super();\n\n    /**\n     * @private\n     * @type {!Object<string, number>}\n     */\n    this.pendingRemovals_ = {};\n\n    /**\n     * @private\n     * @type {!Object<string, number>}\n     */\n    this.dispatching_ = {};\n\n    /**\n     * @private\n     * @type {!Object<string, Array<import(\"../events.js\").ListenerFunction>>}\n     */\n    this.listeners_ = {};\n\n  }\n\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../events.js\").ListenerFunction} listener Listener.\n   */\n  addEventListener(type, listener) {\n    let listeners = this.listeners_[type];\n    if (!listeners) {\n      listeners = this.listeners_[type] = [];\n    }\n    if (listeners.indexOf(listener) === -1) {\n      listeners.push(listener);\n    }\n  }\n\n  /**\n   * Dispatches an event and calls all listeners listening for events\n   * of this type. The event parameter can either be a string or an\n   * Object with a `type` property.\n   *\n   * @param {{type: string,\n   *     target: (EventTargetLike|undefined),\n   *     propagationStopped: (boolean|undefined)}|\n   *     import(\"./Event.js\").default|string} event Event object.\n   * @return {boolean|undefined} `false` if anyone called preventDefault on the\n   *     event object or if any of the listeners returned false.\n   * @api\n   */\n  dispatchEvent(event) {\n    const evt = typeof event === 'string' ? new Event(event) : event;\n    const type = evt.type;\n    evt.target = this;\n    const listeners = this.listeners_[type];\n    let propagate;\n    if (listeners) {\n      if (!(type in this.dispatching_)) {\n        this.dispatching_[type] = 0;\n        this.pendingRemovals_[type] = 0;\n      }\n      ++this.dispatching_[type];\n      for (let i = 0, ii = listeners.length; i < ii; ++i) {\n        if (listeners[i].call(this, evt) === false || evt.propagationStopped) {\n          propagate = false;\n          break;\n        }\n      }\n      --this.dispatching_[type];\n      if (this.dispatching_[type] === 0) {\n        let pendingRemovals = this.pendingRemovals_[type];\n        delete this.pendingRemovals_[type];\n        while (pendingRemovals--) {\n          this.removeEventListener(type, VOID);\n        }\n        delete this.dispatching_[type];\n      }\n      return propagate;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    unlistenAll(this);\n  }\n\n  /**\n   * Get the listeners for a specified event type. Listeners are returned in the\n   * order that they will be called in.\n   *\n   * @param {string} type Type.\n   * @return {Array<import(\"../events.js\").ListenerFunction>} Listeners.\n   */\n  getListeners(type) {\n    return this.listeners_[type];\n  }\n\n  /**\n   * @param {string=} opt_type Type. If not provided,\n   *     `true` will be returned if this event target has any listeners.\n   * @return {boolean} Has listeners.\n   */\n  hasListener(opt_type) {\n    return opt_type ?\n      opt_type in this.listeners_ :\n      Object.keys(this.listeners_).length > 0;\n  }\n\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../events.js\").ListenerFunction} listener Listener.\n   */\n  removeEventListener(type, listener) {\n    const listeners = this.listeners_[type];\n    if (listeners) {\n      const index = listeners.indexOf(listener);\n      if (type in this.pendingRemovals_) {\n        // make listener a no-op, and remove later in #dispatchEvent()\n        listeners[index] = VOID;\n        ++this.pendingRemovals_[type];\n      } else {\n        listeners.splice(index, 1);\n        if (listeners.length === 0) {\n          delete this.listeners_[type];\n        }\n      }\n    }\n  }\n}\n\n\nexport default Target;\n","/**\n * @module ol/geom/LineString\n */\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY} from '../extent.js';\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {assignClosestPoint, maxSquaredDelta} from './flat/closest.js';\nimport {deflateCoordinates} from './flat/deflate.js';\nimport {inflateCoordinates} from './flat/inflate.js';\nimport {interpolatePoint, lineStringCoordinateAtM} from './flat/interpolate.js';\nimport {intersectsLineString} from './flat/intersectsextent.js';\nimport {lineStringLength} from './flat/length.js';\nimport {forEach as forEachSegment} from './flat/segments.js';\nimport {douglasPeucker} from './flat/simplify.js';\n\n/**\n * @classdesc\n * Linestring geometry.\n *\n * @api\n */\nclass LineString extends SimpleGeometry {\n\n  /**\n   * @param {Array<import(\"../coordinate.js\").Coordinate>|Array<number>} coordinates Coordinates.\n   *     For internal use, flat coordinates in combination with `opt_layout` are also accepted.\n   * @param {GeometryLayout=} opt_layout Layout.\n   */\n  constructor(coordinates, opt_layout) {\n\n    super();\n\n    /**\n     * @private\n     * @type {import(\"../coordinate.js\").Coordinate}\n     */\n    this.flatMidpoint_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.flatMidpointRevision_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDelta_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDeltaRevision_ = -1;\n\n    if (opt_layout !== undefined && !Array.isArray(coordinates[0])) {\n      this.setFlatCoordinates(opt_layout, /** @type {Array<number>} */ (coordinates));\n    } else {\n      this.setCoordinates(/** @type {Array<import(\"../coordinate.js\").Coordinate>} */ (coordinates), opt_layout);\n    }\n\n  }\n\n  /**\n   * Append the passed coordinate to the coordinates of the linestring.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @api\n   */\n  appendCoordinate(coordinate) {\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = coordinate.slice();\n    } else {\n      extend(this.flatCoordinates, coordinate);\n    }\n    this.changed();\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!LineString} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    return new LineString(this.flatCoordinates.slice(), this.layout);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(maxSquaredDelta(\n        this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, 0));\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n    return assignClosestPoint(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      this.maxDelta_, false, x, y, closestPoint, minSquaredDistance);\n  }\n\n  /**\n   * Iterate over each segment, calling the provided callback.\n   * If the callback returns a truthy value the function returns that\n   * value immediately. Otherwise the function returns `false`.\n   *\n   * @param {function(this: S, import(\"../coordinate.js\").Coordinate, import(\"../coordinate.js\").Coordinate): T} callback Function\n   *     called for each segment.\n   * @return {T|boolean} Value.\n   * @template T,S\n   * @api\n   */\n  forEachSegment(callback) {\n    return forEachSegment(this.flatCoordinates, 0, this.flatCoordinates.length, this.stride, callback);\n  }\n\n  /**\n   * Returns the coordinate at `m` using linear interpolation, or `null` if no\n   * such coordinate exists.\n   *\n   * `opt_extrapolate` controls extrapolation beyond the range of Ms in the\n   * MultiLineString. If `opt_extrapolate` is `true` then Ms less than the first\n   * M will return the first coordinate and Ms greater than the last M will\n   * return the last coordinate.\n   *\n   * @param {number} m M.\n   * @param {boolean=} opt_extrapolate Extrapolate. Default is `false`.\n   * @return {import(\"../coordinate.js\").Coordinate} Coordinate.\n   * @api\n   */\n  getCoordinateAtM(m, opt_extrapolate) {\n    if (this.layout != GeometryLayout.XYM &&\n        this.layout != GeometryLayout.XYZM) {\n      return null;\n    }\n    const extrapolate = opt_extrapolate !== undefined ? opt_extrapolate : false;\n    return lineStringCoordinateAtM(this.flatCoordinates, 0,\n      this.flatCoordinates.length, this.stride, m, extrapolate);\n  }\n\n  /**\n   * Return the coordinates of the linestring.\n   * @return {Array<import(\"../coordinate.js\").Coordinate>} Coordinates.\n   * @override\n   * @api\n   */\n  getCoordinates() {\n    return inflateCoordinates(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n  }\n\n  /**\n   * Return the coordinate at the provided fraction along the linestring.\n   * The `fraction` is a number between 0 and 1, where 0 is the start of the\n   * linestring and 1 is the end.\n   * @param {number} fraction Fraction.\n   * @param {import(\"../coordinate.js\").Coordinate=} opt_dest Optional coordinate whose values will\n   *     be modified. If not provided, a new coordinate will be returned.\n   * @return {import(\"../coordinate.js\").Coordinate} Coordinate of the interpolated point.\n   * @api\n   */\n  getCoordinateAt(fraction, opt_dest) {\n    return interpolatePoint(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      fraction, opt_dest);\n  }\n\n  /**\n   * Return the length of the linestring on projected plane.\n   * @return {number} Length (on projected plane).\n   * @api\n   */\n  getLength() {\n    return lineStringLength(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n  }\n\n  /**\n   * @return {Array<number>} Flat midpoint.\n   */\n  getFlatMidpoint() {\n    if (this.flatMidpointRevision_ != this.getRevision()) {\n      this.flatMidpoint_ = this.getCoordinateAt(0.5, this.flatMidpoint_);\n      this.flatMidpointRevision_ = this.getRevision();\n    }\n    return this.flatMidpoint_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    const simplifiedFlatCoordinates = [];\n    simplifiedFlatCoordinates.length = douglasPeucker(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      squaredTolerance, simplifiedFlatCoordinates, 0);\n    return new LineString(simplifiedFlatCoordinates, GeometryLayout.XY);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.LINE_STRING;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    return intersectsLineString(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride,\n      extent);\n  }\n\n  /**\n   * Set the coordinates of the linestring.\n   * @param {!Array<import(\"../coordinate.js\").Coordinate>} coordinates Coordinates.\n   * @param {GeometryLayout=} opt_layout Layout.\n   * @override\n   * @api\n   */\n  setCoordinates(coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 1);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = deflateCoordinates(\n      this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  }\n}\n\n\nexport default LineString;\n","/**\n * @module ol/render/EventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * @event module:ol/render/Event~RenderEvent#postcompose\n   * @api\n   */\n  POSTCOMPOSE: 'postcompose',\n  /**\n   * @event module:ol/render/Event~RenderEvent#precompose\n   * @api\n   */\n  PRECOMPOSE: 'precompose',\n  /**\n   * @event module:ol/render/Event~RenderEvent#render\n   * @api\n   */\n  RENDER: 'render',\n  /**\n   * Triggered when rendering is complete, i.e. all sources and tiles have\n   * finished loading for the current viewport, and all tiles are faded in.\n   * @event module:ol/render/Event~RenderEvent#rendercomplete\n   * @api\n   */\n  RENDERCOMPLETE: 'rendercomplete'\n};\n","/**\n * @module ol/style/IconImage\n */\n\nimport {createCanvasContext2D} from '../dom.js';\nimport {listenOnce, unlistenByKey} from '../events.js';\nimport EventTarget from '../events/Target.js';\nimport EventType from '../events/EventType.js';\nimport ImageState from '../ImageState.js';\nimport {shared as iconImageCache} from './IconImageCache.js';\n\nclass IconImage extends EventTarget {\n  /**\n   * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n   * @param {string|undefined} src Src.\n   * @param {import(\"../size.js\").Size} size Size.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {import(\"../ImageState.js\").default} imageState Image state.\n   * @param {import(\"../color.js\").Color} color Color.\n   */\n  constructor(image, src, size, crossOrigin, imageState, color) {\n\n    super();\n\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    this.hitDetectionImage_ = null;\n\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    this.image_ = !image ? new Image() : image;\n\n    if (crossOrigin !== null) {\n      /** @type {HTMLImageElement} */ (this.image_).crossOrigin = crossOrigin;\n    }\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = color ?\n      /** @type {HTMLCanvasElement} */ (document.createElement('canvas')) :\n      null;\n\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color}\n     */\n    this.color_ = color;\n\n    /**\n     * @private\n     * @type {Array<import(\"../events.js\").EventsKey>}\n     */\n    this.imageListenerKeys_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../ImageState.js\").default}\n     */\n    this.imageState_ = imageState;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.size_ = size;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.src_ = src;\n\n    /**\n     * @private\n     * @type {boolean|undefined}\n     */\n    this.tainted_;\n\n  }\n\n  /**\n   * @private\n   * @return {boolean} The image canvas is tainted.\n   */\n  isTainted_() {\n    if (this.tainted_ === undefined && this.imageState_ === ImageState.LOADED) {\n      this.tainted_ = false;\n      const context = createCanvasContext2D(1, 1);\n      try {\n        context.drawImage(this.image_, 0, 0);\n        context.getImageData(0, 0, 1, 1);\n      } catch (e) {\n        this.tainted_ = true;\n      }\n    }\n    return this.tainted_ === true;\n  }\n\n  /**\n   * @private\n   */\n  dispatchChangeEvent_() {\n    this.dispatchEvent(EventType.CHANGE);\n  }\n\n  /**\n   * @private\n   */\n  handleImageError_() {\n    this.imageState_ = ImageState.ERROR;\n    this.unlistenImage_();\n    this.dispatchChangeEvent_();\n  }\n\n  /**\n   * @private\n   */\n  handleImageLoad_() {\n    this.imageState_ = ImageState.LOADED;\n    if (this.size_) {\n      this.image_.width = this.size_[0];\n      this.image_.height = this.size_[1];\n    }\n    this.size_ = [this.image_.width, this.image_.height];\n    this.unlistenImage_();\n    this.replaceColor_();\n    this.dispatchChangeEvent_();\n  }\n\n  /**\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n   */\n  getImage(pixelRatio) {\n    return this.canvas_ ? this.canvas_ : this.image_;\n  }\n\n  /**\n   * @return {import(\"../ImageState.js\").default} Image state.\n   */\n  getImageState() {\n    return this.imageState_;\n  }\n\n  /**\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLImageElement|HTMLCanvasElement} Image element.\n   */\n  getHitDetectionImage(pixelRatio) {\n    if (!this.hitDetectionImage_) {\n      if (this.isTainted_()) {\n        const width = this.size_[0];\n        const height = this.size_[1];\n        const context = createCanvasContext2D(width, height);\n        context.fillRect(0, 0, width, height);\n        this.hitDetectionImage_ = context.canvas;\n      } else {\n        this.hitDetectionImage_ = this.image_;\n      }\n    }\n    return this.hitDetectionImage_;\n  }\n\n  /**\n   * @return {import(\"../size.js\").Size} Image size.\n   */\n  getSize() {\n    return this.size_;\n  }\n\n  /**\n   * @return {string|undefined} Image src.\n   */\n  getSrc() {\n    return this.src_;\n  }\n\n  /**\n   * Load not yet loaded URI.\n   */\n  load() {\n    if (this.imageState_ == ImageState.IDLE) {\n      this.imageState_ = ImageState.LOADING;\n      this.imageListenerKeys_ = [\n        listenOnce(this.image_, EventType.ERROR,\n          this.handleImageError_, this),\n        listenOnce(this.image_, EventType.LOAD,\n          this.handleImageLoad_, this)\n      ];\n      try {\n        /** @type {HTMLImageElement} */ (this.image_).src = this.src_;\n      } catch (e) {\n        this.handleImageError_();\n      }\n    }\n  }\n\n  /**\n   * @private\n   */\n  replaceColor_() {\n    if (!this.color_ || this.isTainted_()) {\n      return;\n    }\n\n    this.canvas_.width = this.image_.width;\n    this.canvas_.height = this.image_.height;\n\n    const ctx = this.canvas_.getContext('2d');\n    ctx.drawImage(this.image_, 0, 0);\n\n    const imgData = ctx.getImageData(0, 0, this.image_.width, this.image_.height);\n    const data = imgData.data;\n    const r = this.color_[0] / 255.0;\n    const g = this.color_[1] / 255.0;\n    const b = this.color_[2] / 255.0;\n\n    for (let i = 0, ii = data.length; i < ii; i += 4) {\n      data[i] *= r;\n      data[i + 1] *= g;\n      data[i + 2] *= b;\n    }\n    ctx.putImageData(imgData, 0, 0);\n  }\n\n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n  unlistenImage_() {\n    this.imageListenerKeys_.forEach(unlistenByKey);\n    this.imageListenerKeys_ = null;\n  }\n}\n\n\n/**\n * @param {HTMLImageElement|HTMLCanvasElement} image Image.\n * @param {string} src Src.\n * @param {import(\"../size.js\").Size} size Size.\n * @param {?string} crossOrigin Cross origin.\n * @param {import(\"../ImageState.js\").default} imageState Image state.\n * @param {import(\"../color.js\").Color} color Color.\n * @return {IconImage} Icon image.\n */\nexport function get(image, src, size, crossOrigin, imageState, color) {\n  let iconImage = iconImageCache.get(src, crossOrigin, color);\n  if (!iconImage) {\n    iconImage = new IconImage(image, src, size, crossOrigin, imageState, color);\n    iconImageCache.set(src, crossOrigin, color, iconImage);\n  }\n  return iconImage;\n}\n\n\nexport default IconImage;\n","/**\n * @module ol/style/Icon\n */\nimport {getUid} from '../util.js';\nimport ImageState from '../ImageState.js';\nimport {assert} from '../asserts.js';\nimport {asArray} from '../color.js';\nimport {listen, unlisten} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport IconAnchorUnits from './IconAnchorUnits.js';\nimport {get as getIconImage} from './IconImage.js';\nimport IconOrigin from './IconOrigin.js';\nimport ImageStyle from './Image.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {Array<number>} [anchor=[0.5, 0.5]] Anchor. Default value is the icon center.\n * @property {import(\"./IconOrigin.js\").default} [anchorOrigin] Origin of the anchor: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`. Default is `top-left`.\n * @property {import(\"./IconAnchorUnits.js\").default} [anchorXUnits] Units in which the anchor x value is\n * specified. A value of `'fraction'` indicates the x value is a fraction of the icon. A value of `'pixels'` indicates\n * the x value in pixels. Default is `'fraction'`.\n * @property {import(\"./IconAnchorUnits.js\").default} [anchorYUnits] Units in which the anchor y value is\n * specified. A value of `'fraction'` indicates the y value is a fraction of the icon. A value of `'pixels'` indicates\n * the y value in pixels. Default is `'fraction'`.\n * @property {import(\"../color.js\").Color|string} [color] Color to tint the icon. If not specified,\n * the icon will be left as is.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images. Note that you must provide a\n * `crossOrigin` value if you are using the WebGL renderer or if you want to access pixel data with the Canvas renderer.\n * See https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {HTMLImageElement|HTMLCanvasElement} [img] Image object for the icon. If the `src` option is not provided then the\n * provided image must already be loaded. And in that case, it is required\n * to provide the size of the image, with the `imgSize` option.\n * @property {Array<number>} [offset=[0, 0]] Offset, which, together with the size and the offset origin, define the\n * sub-rectangle to use from the original icon image.\n * @property {import(\"./IconOrigin.js\").default} [offsetOrigin] Origin of the offset: `bottom-left`, `bottom-right`,\n * `top-left` or `top-right`. Default is `top-left`.\n * @property {number} [opacity=1] Opacity of the icon.\n * @property {number} [scale=1] Scale.\n * @property {boolean} [rotateWithView=false] Whether to rotate the icon with the view.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {import(\"../size.js\").Size} [size] Icon size in pixel. Can be used together with `offset` to define the\n * sub-rectangle to use from the origin (sprite) icon image.\n * @property {import(\"../size.js\").Size} [imgSize] Image size in pixels. Only required if `img` is set and `src` is not, and\n * for SVG images in Internet Explorer 11. The provided `imgSize` needs to match the actual size of the image.\n * @property {string} [src] Image source URI.\n */\n\n\n/**\n * @classdesc\n * Set icon style for vector features.\n * @api\n */\nclass Icon extends ImageStyle {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    const options = opt_options || {};\n\n    /**\n     * @type {number}\n     */\n    const opacity = options.opacity !== undefined ? options.opacity : 1;\n\n    /**\n     * @type {number}\n     */\n    const rotation = options.rotation !== undefined ? options.rotation : 0;\n\n    /**\n     * @type {number}\n     */\n    const scale = options.scale !== undefined ? options.scale : 1;\n\n    /**\n     * @type {boolean}\n     */\n    const rotateWithView = options.rotateWithView !== undefined ?\n      options.rotateWithView : false;\n\n    super({\n      opacity: opacity,\n      rotation: rotation,\n      scale: scale,\n      rotateWithView: rotateWithView\n    });\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.anchor_ = options.anchor !== undefined ? options.anchor : [0.5, 0.5];\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.normalizedAnchor_ = null;\n\n    /**\n     * @private\n     * @type {import(\"./IconOrigin.js\").default}\n     */\n    this.anchorOrigin_ = options.anchorOrigin !== undefined ?\n      options.anchorOrigin : IconOrigin.TOP_LEFT;\n\n    /**\n     * @private\n     * @type {import(\"./IconAnchorUnits.js\").default}\n     */\n    this.anchorXUnits_ = options.anchorXUnits !== undefined ?\n      options.anchorXUnits : IconAnchorUnits.FRACTION;\n\n    /**\n     * @private\n     * @type {import(\"./IconAnchorUnits.js\").default}\n     */\n    this.anchorYUnits_ = options.anchorYUnits !== undefined ?\n      options.anchorYUnits : IconAnchorUnits.FRACTION;\n\n    /**\n     * @private\n     * @type {?string}\n     */\n    this.crossOrigin_ =\n        options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n    /**\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    const image = options.img !== undefined ? options.img : null;\n\n    /**\n     * @type {import(\"../size.js\").Size}\n     */\n    const imgSize = options.imgSize !== undefined ? options.imgSize : null;\n\n    /**\n     * @type {string|undefined}\n     */\n    let src = options.src;\n\n    assert(!(src !== undefined && image),\n      4); // `image` and `src` cannot be provided at the same time\n    assert(!image || (image && imgSize),\n      5); // `imgSize` must be set when `image` is provided\n\n    if ((src === undefined || src.length === 0) && image) {\n      src = /** @type {HTMLImageElement} */ (image).src || getUid(image);\n    }\n    assert(src !== undefined && src.length > 0,\n      6); // A defined and non-empty `src` or `image` must be provided\n\n    /**\n     * @type {import(\"../ImageState.js\").default}\n     */\n    const imageState = options.src !== undefined ?\n      ImageState.IDLE : ImageState.LOADED;\n\n    /**\n     * @private\n     * @type {import(\"../color.js\").Color}\n     */\n    this.color_ = options.color !== undefined ? asArray(options.color) : null;\n\n    /**\n     * @private\n     * @type {import(\"./IconImage.js\").default}\n     */\n    this.iconImage_ = getIconImage(\n      image, /** @type {string} */ (src), imgSize, this.crossOrigin_, imageState, this.color_);\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.offset_ = options.offset !== undefined ? options.offset : [0, 0];\n\n    /**\n     * @private\n     * @type {import(\"./IconOrigin.js\").default}\n     */\n    this.offsetOrigin_ = options.offsetOrigin !== undefined ?\n      options.offsetOrigin : IconOrigin.TOP_LEFT;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.origin_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.size_ = options.size !== undefined ? options.size : null;\n\n  }\n\n  /**\n   * Clones the style. The underlying Image/HTMLCanvasElement is not cloned.\n   * @return {Icon} The cloned style.\n   * @api\n   */\n  clone() {\n    return new Icon({\n      anchor: this.anchor_.slice(),\n      anchorOrigin: this.anchorOrigin_,\n      anchorXUnits: this.anchorXUnits_,\n      anchorYUnits: this.anchorYUnits_,\n      crossOrigin: this.crossOrigin_,\n      color: (this.color_ && this.color_.slice) ? this.color_.slice() : this.color_ || undefined,\n      src: this.getSrc(),\n      offset: this.offset_.slice(),\n      offsetOrigin: this.offsetOrigin_,\n      size: this.size_ !== null ? this.size_.slice() : undefined,\n      opacity: this.getOpacity(),\n      scale: this.getScale(),\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView()\n    });\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getAnchor() {\n    if (this.normalizedAnchor_) {\n      return this.normalizedAnchor_;\n    }\n    let anchor = this.anchor_;\n    const size = this.getSize();\n    if (this.anchorXUnits_ == IconAnchorUnits.FRACTION ||\n        this.anchorYUnits_ == IconAnchorUnits.FRACTION) {\n      if (!size) {\n        return null;\n      }\n      anchor = this.anchor_.slice();\n      if (this.anchorXUnits_ == IconAnchorUnits.FRACTION) {\n        anchor[0] *= size[0];\n      }\n      if (this.anchorYUnits_ == IconAnchorUnits.FRACTION) {\n        anchor[1] *= size[1];\n      }\n    }\n\n    if (this.anchorOrigin_ != IconOrigin.TOP_LEFT) {\n      if (!size) {\n        return null;\n      }\n      if (anchor === this.anchor_) {\n        anchor = this.anchor_.slice();\n      }\n      if (this.anchorOrigin_ == IconOrigin.TOP_RIGHT ||\n          this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n        anchor[0] = -anchor[0] + size[0];\n      }\n      if (this.anchorOrigin_ == IconOrigin.BOTTOM_LEFT ||\n          this.anchorOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n        anchor[1] = -anchor[1] + size[1];\n      }\n    }\n    this.normalizedAnchor_ = anchor;\n    return this.normalizedAnchor_;\n  }\n\n  /**\n   * Set the anchor point. The anchor determines the center point for the\n   * symbolizer.\n   *\n   * @param {Array<number>} anchor Anchor.\n   * @api\n   */\n  setAnchor(anchor) {\n    this.anchor_ = anchor;\n    this.normalizedAnchor_ = null;\n  }\n\n  /**\n   * Get the icon color.\n   * @return {import(\"../color.js\").Color} Color.\n   * @api\n   */\n  getColor() {\n    return this.color_;\n  }\n\n  /**\n   * Get the image icon.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLImageElement|HTMLCanvasElement} Image or Canvas element.\n   * @override\n   * @api\n   */\n  getImage(pixelRatio) {\n    return this.iconImage_.getImage(pixelRatio);\n  }\n\n  /**\n   * @override\n   */\n  getImageSize() {\n    return this.iconImage_.getSize();\n  }\n\n  /**\n   * @override\n   */\n  getHitDetectionImageSize() {\n    return this.getImageSize();\n  }\n\n  /**\n   * @override\n   */\n  getImageState() {\n    return this.iconImage_.getImageState();\n  }\n\n  /**\n   * @override\n   */\n  getHitDetectionImage(pixelRatio) {\n    return this.iconImage_.getHitDetectionImage(pixelRatio);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getOrigin() {\n    if (this.origin_) {\n      return this.origin_;\n    }\n    let offset = this.offset_;\n\n    if (this.offsetOrigin_ != IconOrigin.TOP_LEFT) {\n      const size = this.getSize();\n      const iconImageSize = this.iconImage_.getSize();\n      if (!size || !iconImageSize) {\n        return null;\n      }\n      offset = offset.slice();\n      if (this.offsetOrigin_ == IconOrigin.TOP_RIGHT ||\n          this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n        offset[0] = iconImageSize[0] - size[0] - offset[0];\n      }\n      if (this.offsetOrigin_ == IconOrigin.BOTTOM_LEFT ||\n          this.offsetOrigin_ == IconOrigin.BOTTOM_RIGHT) {\n        offset[1] = iconImageSize[1] - size[1] - offset[1];\n      }\n    }\n    this.origin_ = offset;\n    return this.origin_;\n  }\n\n  /**\n   * Get the image URL.\n   * @return {string|undefined} Image src.\n   * @api\n   */\n  getSrc() {\n    return this.iconImage_.getSrc();\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getSize() {\n    return !this.size_ ? this.iconImage_.getSize() : this.size_;\n  }\n\n  /**\n   * @override\n   */\n  listenImageChange(listener, thisArg) {\n    return listen(this.iconImage_, EventType.CHANGE,\n      listener, thisArg);\n  }\n\n  /**\n   * Load not yet loaded URI.\n   * When rendering a feature with an icon style, the vector renderer will\n   * automatically call this method. However, you might want to call this\n   * method yourself for preloading or other purposes.\n   * @override\n   * @api\n   */\n  load() {\n    this.iconImage_.load();\n  }\n\n  /**\n   * @override\n   */\n  unlistenImageChange(listener, thisArg) {\n    unlisten(this.iconImage_, EventType.CHANGE,\n      listener, thisArg);\n  }\n}\n\n\nexport default Icon;\n","/**\n * @module ol/tilegrid/TileGrid\n */\nimport {DEFAULT_TILE_SIZE} from './common.js';\nimport {assert} from '../asserts.js';\nimport TileRange, {createOrUpdate as createOrUpdateTileRange} from '../TileRange.js';\nimport {isSorted, linearFindNearest} from '../array.js';\nimport {createOrUpdate, getTopLeft} from '../extent.js';\nimport {clamp} from '../math.js';\nimport {toSize} from '../size.js';\nimport {createOrUpdate as createOrUpdateTileCoord} from '../tilecoord.js';\n\n\n/**\n * @private\n * @type {import(\"../tilecoord.js\").TileCoord}\n */\nconst tmpTileCoord = [0, 0, 0];\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../extent.js\").Extent} [extent] Extent for the tile grid. No tiles outside this\n * extent will be requested by {@link module:ol/source/Tile} sources. When no `origin` or\n * `origins` are configured, the `origin` will be set to the top-left corner of the extent.\n * @property {number} [minZoom=0] Minimum zoom.\n * @property {import(\"../coordinate.js\").Coordinate} [origin] The tile grid origin, i.e. where the `x`\n * and `y` axes meet (`[z, 0, 0]`). Tile coordinates increase left to right and upwards. If not\n * specified, `extent` or `origins` must be provided.\n * @property {Array<import(\"../coordinate.js\").Coordinate>} [origins] Tile grid origins, i.e. where\n * the `x` and `y` axes meet (`[z, 0, 0]`), for each zoom level. If given, the array length\n * should match the length of the `resolutions` array, i.e. each resolution can have a different\n * origin. Tile coordinates increase left to right and upwards. If not specified, `extent` or\n * `origin` must be provided.\n * @property {!Array<number>} resolutions Resolutions. The array index of each resolution needs\n * to match the zoom level. This means that even if a `minZoom` is configured, the resolutions\n * array will have a length of `maxZoom + 1`.\n * @property {Array<import(\"../size.js\").Size>} [sizes] Sizes.\n * @property {number|import(\"../size.js\").Size} [tileSize] Tile size.\n * Default is `[256, 256]`.\n * @property {Array<import(\"../size.js\").Size>} [tileSizes] Tile sizes. If given, the array length\n * should match the length of the `resolutions` array, i.e. each resolution can have a different\n * tile size.\n */\n\n\n/**\n * @classdesc\n * Base class for setting the grid pattern for sources accessing tiled-image\n * servers.\n * @api\n */\nclass TileGrid {\n  /**\n   * @param {Options} options Tile grid options.\n   */\n  constructor(options) {\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.minZoom = options.minZoom !== undefined ? options.minZoom : 0;\n\n    /**\n     * @private\n     * @type {!Array<number>}\n     */\n    this.resolutions_ = options.resolutions;\n    assert(isSorted(this.resolutions_, function(a, b) {\n      return b - a;\n    }, true), 17); // `resolutions` must be sorted in descending order\n\n\n    // check if we've got a consistent zoom factor and origin\n    let zoomFactor;\n    if (!options.origins) {\n      for (let i = 0, ii = this.resolutions_.length - 1; i < ii; ++i) {\n        if (!zoomFactor) {\n          zoomFactor = this.resolutions_[i] / this.resolutions_[i + 1];\n        } else {\n          if (this.resolutions_[i] / this.resolutions_[i + 1] !== zoomFactor) {\n            zoomFactor = undefined;\n            break;\n          }\n        }\n      }\n    }\n\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.zoomFactor_ = zoomFactor;\n\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.maxZoom = this.resolutions_.length - 1;\n\n    /**\n     * @private\n     * @type {import(\"../coordinate.js\").Coordinate}\n     */\n    this.origin_ = options.origin !== undefined ? options.origin : null;\n\n    /**\n     * @private\n     * @type {Array<import(\"../coordinate.js\").Coordinate>}\n     */\n    this.origins_ = null;\n    if (options.origins !== undefined) {\n      this.origins_ = options.origins;\n      assert(this.origins_.length == this.resolutions_.length,\n        20); // Number of `origins` and `resolutions` must be equal\n    }\n\n    const extent = options.extent;\n\n    if (extent !== undefined &&\n        !this.origin_ && !this.origins_) {\n      this.origin_ = getTopLeft(extent);\n    }\n\n    assert(\n      (!this.origin_ && this.origins_) || (this.origin_ && !this.origins_),\n      18); // Either `origin` or `origins` must be configured, never both\n\n    /**\n     * @private\n     * @type {Array<number|import(\"../size.js\").Size>}\n     */\n    this.tileSizes_ = null;\n    if (options.tileSizes !== undefined) {\n      this.tileSizes_ = options.tileSizes;\n      assert(this.tileSizes_.length == this.resolutions_.length,\n        19); // Number of `tileSizes` and `resolutions` must be equal\n    }\n\n    /**\n     * @private\n     * @type {number|import(\"../size.js\").Size}\n     */\n    this.tileSize_ = options.tileSize !== undefined ?\n      options.tileSize :\n      !this.tileSizes_ ? DEFAULT_TILE_SIZE : null;\n    assert(\n      (!this.tileSize_ && this.tileSizes_) ||\n        (this.tileSize_ && !this.tileSizes_),\n      22); // Either `tileSize` or `tileSizes` must be configured, never both\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.extent_ = extent !== undefined ? extent : null;\n\n\n    /**\n     * @private\n     * @type {Array<import(\"../TileRange.js\").default>}\n     */\n    this.fullTileRanges_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.tmpSize_ = [0, 0];\n\n    if (options.sizes !== undefined) {\n      this.fullTileRanges_ = options.sizes.map(function(size, z) {\n        const tileRange = new TileRange(\n          Math.min(0, size[0]), Math.max(size[0] - 1, -1),\n          Math.min(0, size[1]), Math.max(size[1] - 1, -1));\n        return tileRange;\n      }, this);\n    } else if (extent) {\n      this.calculateTileRanges_(extent);\n    }\n\n  }\n\n  /**\n   * Call a function with each tile coordinate for a given extent and zoom level.\n   *\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} zoom Integer zoom level.\n   * @param {function(import(\"../tilecoord.js\").TileCoord)} callback Function called with each tile coordinate.\n   * @api\n   */\n  forEachTileCoord(extent, zoom, callback) {\n    const tileRange = this.getTileRangeForExtentAndZ(extent, zoom);\n    for (let i = tileRange.minX, ii = tileRange.maxX; i <= ii; ++i) {\n      for (let j = tileRange.minY, jj = tileRange.maxY; j <= jj; ++j) {\n        callback([zoom, i, j]);\n      }\n    }\n  }\n\n  /**\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {function(this: T, number, import(\"../TileRange.js\").default): boolean} callback Callback.\n   * @param {T=} opt_this The object to use as `this` in `callback`.\n   * @param {import(\"../TileRange.js\").default=} opt_tileRange Temporary import(\"../TileRange.js\").default object.\n   * @param {import(\"../extent.js\").Extent=} opt_extent Temporary import(\"../extent.js\").Extent object.\n   * @return {boolean} Callback succeeded.\n   * @template T\n   */\n  forEachTileCoordParentTileRange(tileCoord, callback, opt_this, opt_tileRange, opt_extent) {\n    let tileRange, x, y;\n    let tileCoordExtent = null;\n    let z = tileCoord[0] - 1;\n    if (this.zoomFactor_ === 2) {\n      x = tileCoord[1];\n      y = tileCoord[2];\n    } else {\n      tileCoordExtent = this.getTileCoordExtent(tileCoord, opt_extent);\n    }\n    while (z >= this.minZoom) {\n      if (this.zoomFactor_ === 2) {\n        x = Math.floor(x / 2);\n        y = Math.floor(y / 2);\n        tileRange = createOrUpdateTileRange(x, x, y, y, opt_tileRange);\n      } else {\n        tileRange = this.getTileRangeForExtentAndZ(tileCoordExtent, z, opt_tileRange);\n      }\n      if (callback.call(opt_this, z, tileRange)) {\n        return true;\n      }\n      --z;\n    }\n    return false;\n  }\n\n  /**\n   * Get the extent for this tile grid, if it was configured.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   */\n  getExtent() {\n    return this.extent_;\n  }\n\n  /**\n   * Get the maximum zoom level for the grid.\n   * @return {number} Max zoom.\n   * @api\n   */\n  getMaxZoom() {\n    return this.maxZoom;\n  }\n\n  /**\n   * Get the minimum zoom level for the grid.\n   * @return {number} Min zoom.\n   * @api\n   */\n  getMinZoom() {\n    return this.minZoom;\n  }\n\n  /**\n   * Get the origin for the grid at the given zoom level.\n   * @param {number} z Integer zoom level.\n   * @return {import(\"../coordinate.js\").Coordinate} Origin.\n   * @api\n   */\n  getOrigin(z) {\n    if (this.origin_) {\n      return this.origin_;\n    } else {\n      return this.origins_[z];\n    }\n  }\n\n  /**\n   * Get the resolution for the given zoom level.\n   * @param {number} z Integer zoom level.\n   * @return {number} Resolution.\n   * @api\n   */\n  getResolution(z) {\n    return this.resolutions_[z];\n  }\n\n  /**\n   * Get the list of resolutions for the tile grid.\n   * @return {Array<number>} Resolutions.\n   * @api\n   */\n  getResolutions() {\n    return this.resolutions_;\n  }\n\n  /**\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {import(\"../TileRange.js\").default=} opt_tileRange Temporary import(\"../TileRange.js\").default object.\n   * @param {import(\"../extent.js\").Extent=} opt_extent Temporary import(\"../extent.js\").Extent object.\n   * @return {import(\"../TileRange.js\").default} Tile range.\n   */\n  getTileCoordChildTileRange(tileCoord, opt_tileRange, opt_extent) {\n    if (tileCoord[0] < this.maxZoom) {\n      if (this.zoomFactor_ === 2) {\n        const minX = tileCoord[1] * 2;\n        const minY = tileCoord[2] * 2;\n        return createOrUpdateTileRange(minX, minX + 1, minY, minY + 1, opt_tileRange);\n      }\n      const tileCoordExtent = this.getTileCoordExtent(tileCoord, opt_extent);\n      return this.getTileRangeForExtentAndZ(\n        tileCoordExtent, tileCoord[0] + 1, opt_tileRange);\n    }\n    return null;\n  }\n\n  /**\n   * Get the extent for a tile range.\n   * @param {number} z Integer zoom level.\n   * @param {import(\"../TileRange.js\").default} tileRange Tile range.\n   * @param {import(\"../extent.js\").Extent=} opt_extent Temporary import(\"../extent.js\").Extent object.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   */\n  getTileRangeExtent(z, tileRange, opt_extent) {\n    const origin = this.getOrigin(z);\n    const resolution = this.getResolution(z);\n    const tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n    const minX = origin[0] + tileRange.minX * tileSize[0] * resolution;\n    const maxX = origin[0] + (tileRange.maxX + 1) * tileSize[0] * resolution;\n    const minY = origin[1] + tileRange.minY * tileSize[1] * resolution;\n    const maxY = origin[1] + (tileRange.maxY + 1) * tileSize[1] * resolution;\n    return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n  }\n\n  /**\n   * Get a tile range for the given extent and integer zoom level.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} z Integer zoom level.\n   * @param {import(\"../TileRange.js\").default=} opt_tileRange Temporary tile range object.\n   * @return {import(\"../TileRange.js\").default} Tile range.\n   */\n  getTileRangeForExtentAndZ(extent, z, opt_tileRange) {\n    const tileCoord = tmpTileCoord;\n    this.getTileCoordForXYAndZ_(extent[0], extent[1], z, false, tileCoord);\n    const minX = tileCoord[1];\n    const minY = tileCoord[2];\n    this.getTileCoordForXYAndZ_(extent[2], extent[3], z, true, tileCoord);\n    return createOrUpdateTileRange(minX, tileCoord[1], minY, tileCoord[2], opt_tileRange);\n  }\n\n  /**\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @return {import(\"../coordinate.js\").Coordinate} Tile center.\n   */\n  getTileCoordCenter(tileCoord) {\n    const origin = this.getOrigin(tileCoord[0]);\n    const resolution = this.getResolution(tileCoord[0]);\n    const tileSize = toSize(this.getTileSize(tileCoord[0]), this.tmpSize_);\n    return [\n      origin[0] + (tileCoord[1] + 0.5) * tileSize[0] * resolution,\n      origin[1] + (tileCoord[2] + 0.5) * tileSize[1] * resolution\n    ];\n  }\n\n  /**\n   * Get the extent of a tile coordinate.\n   *\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {import(\"../extent.js\").Extent=} opt_extent Temporary extent object.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   * @api\n   */\n  getTileCoordExtent(tileCoord, opt_extent) {\n    const origin = this.getOrigin(tileCoord[0]);\n    const resolution = this.getResolution(tileCoord[0]);\n    const tileSize = toSize(this.getTileSize(tileCoord[0]), this.tmpSize_);\n    const minX = origin[0] + tileCoord[1] * tileSize[0] * resolution;\n    const minY = origin[1] + tileCoord[2] * tileSize[1] * resolution;\n    const maxX = minX + tileSize[0] * resolution;\n    const maxY = minY + tileSize[1] * resolution;\n    return createOrUpdate(minX, minY, maxX, maxY, opt_extent);\n  }\n\n  /**\n   * Get the tile coordinate for the given map coordinate and resolution.  This\n   * method considers that coordinates that intersect tile boundaries should be\n   * assigned the higher tile coordinate.\n   *\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {number} resolution Resolution.\n   * @param {import(\"../tilecoord.js\").TileCoord=} opt_tileCoord Destination import(\"../tilecoord.js\").TileCoord object.\n   * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n   * @api\n   */\n  getTileCoordForCoordAndResolution(coordinate, resolution, opt_tileCoord) {\n    return this.getTileCoordForXYAndResolution_(\n      coordinate[0], coordinate[1], resolution, false, opt_tileCoord);\n  }\n\n  /**\n   * Note that this method should not be called for resolutions that correspond\n   * to an integer zoom level.  Instead call the `getTileCoordForXYAndZ_` method.\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {number} resolution Resolution (for a non-integer zoom level).\n   * @param {boolean} reverseIntersectionPolicy Instead of letting edge\n   *     intersections go to the higher tile coordinate, let edge intersections\n   *     go to the lower tile coordinate.\n   * @param {import(\"../tilecoord.js\").TileCoord=} opt_tileCoord Temporary import(\"../tilecoord.js\").TileCoord object.\n   * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n   * @private\n   */\n  getTileCoordForXYAndResolution_(x, y, resolution, reverseIntersectionPolicy, opt_tileCoord) {\n    const z = this.getZForResolution(resolution);\n    const scale = resolution / this.getResolution(z);\n    const origin = this.getOrigin(z);\n    const tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n\n    const adjustX = reverseIntersectionPolicy ? 0.5 : 0;\n    const adjustY = reverseIntersectionPolicy ? 0 : 0.5;\n    const xFromOrigin = Math.floor((x - origin[0]) / resolution + adjustX);\n    const yFromOrigin = Math.floor((y - origin[1]) / resolution + adjustY);\n    let tileCoordX = scale * xFromOrigin / tileSize[0];\n    let tileCoordY = scale * yFromOrigin / tileSize[1];\n\n    if (reverseIntersectionPolicy) {\n      tileCoordX = Math.ceil(tileCoordX) - 1;\n      tileCoordY = Math.ceil(tileCoordY) - 1;\n    } else {\n      tileCoordX = Math.floor(tileCoordX);\n      tileCoordY = Math.floor(tileCoordY);\n    }\n\n    return createOrUpdateTileCoord(z, tileCoordX, tileCoordY, opt_tileCoord);\n  }\n\n  /**\n   * Although there is repetition between this method and `getTileCoordForXYAndResolution_`,\n   * they should have separate implementations.  This method is for integer zoom\n   * levels.  The other method should only be called for resolutions corresponding\n   * to non-integer zoom levels.\n   * @param {number} x Map x coordinate.\n   * @param {number} y Map y coordinate.\n   * @param {number} z Integer zoom level.\n   * @param {boolean} reverseIntersectionPolicy Instead of letting edge\n   *     intersections go to the higher tile coordinate, let edge intersections\n   *     go to the lower tile coordinate.\n   * @param {import(\"../tilecoord.js\").TileCoord=} opt_tileCoord Temporary import(\"../tilecoord.js\").TileCoord object.\n   * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n   * @private\n   */\n  getTileCoordForXYAndZ_(x, y, z, reverseIntersectionPolicy, opt_tileCoord) {\n    const origin = this.getOrigin(z);\n    const resolution = this.getResolution(z);\n    const tileSize = toSize(this.getTileSize(z), this.tmpSize_);\n\n    const adjustX = reverseIntersectionPolicy ? 0.5 : 0;\n    const adjustY = reverseIntersectionPolicy ? 0 : 0.5;\n    const xFromOrigin = Math.floor((x - origin[0]) / resolution + adjustX);\n    const yFromOrigin = Math.floor((y - origin[1]) / resolution + adjustY);\n    let tileCoordX = xFromOrigin / tileSize[0];\n    let tileCoordY = yFromOrigin / tileSize[1];\n\n    if (reverseIntersectionPolicy) {\n      tileCoordX = Math.ceil(tileCoordX) - 1;\n      tileCoordY = Math.ceil(tileCoordY) - 1;\n    } else {\n      tileCoordX = Math.floor(tileCoordX);\n      tileCoordY = Math.floor(tileCoordY);\n    }\n\n    return createOrUpdateTileCoord(z, tileCoordX, tileCoordY, opt_tileCoord);\n  }\n\n  /**\n   * Get a tile coordinate given a map coordinate and zoom level.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {number} z Zoom level.\n   * @param {import(\"../tilecoord.js\").TileCoord=} opt_tileCoord Destination import(\"../tilecoord.js\").TileCoord object.\n   * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate.\n   * @api\n   */\n  getTileCoordForCoordAndZ(coordinate, z, opt_tileCoord) {\n    return this.getTileCoordForXYAndZ_(\n      coordinate[0], coordinate[1], z, false, opt_tileCoord);\n  }\n\n  /**\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @return {number} Tile resolution.\n   */\n  getTileCoordResolution(tileCoord) {\n    return this.resolutions_[tileCoord[0]];\n  }\n\n  /**\n   * Get the tile size for a zoom level. The type of the return value matches the\n   * `tileSize` or `tileSizes` that the tile grid was configured with. To always\n   * get an `import(\"../size.js\").Size`, run the result through `import(\"../size.js\").Size.toSize()`.\n   * @param {number} z Z.\n   * @return {number|import(\"../size.js\").Size} Tile size.\n   * @api\n   */\n  getTileSize(z) {\n    if (this.tileSize_) {\n      return this.tileSize_;\n    } else {\n      return this.tileSizes_[z];\n    }\n  }\n\n  /**\n   * @param {number} z Zoom level.\n   * @return {import(\"../TileRange.js\").default} Extent tile range for the specified zoom level.\n   */\n  getFullTileRange(z) {\n    if (!this.fullTileRanges_) {\n      return null;\n    } else {\n      return this.fullTileRanges_[z];\n    }\n  }\n\n  /**\n   * @param {number} resolution Resolution.\n   * @param {number=} opt_direction If 0, the nearest resolution will be used.\n   *     If 1, the nearest lower resolution will be used. If -1, the nearest\n   *     higher resolution will be used. Default is 0.\n   * @return {number} Z.\n   * @api\n   */\n  getZForResolution(resolution, opt_direction) {\n    const z = linearFindNearest(this.resolutions_, resolution, opt_direction || 0);\n    return clamp(z, this.minZoom, this.maxZoom);\n  }\n\n  /**\n   * @param {!import(\"../extent.js\").Extent} extent Extent for this tile grid.\n   * @private\n   */\n  calculateTileRanges_(extent) {\n    const length = this.resolutions_.length;\n    const fullTileRanges = new Array(length);\n    for (let z = this.minZoom; z < length; ++z) {\n      fullTileRanges[z] = this.getTileRangeForExtentAndZ(extent, z);\n    }\n    this.fullTileRanges_ = fullTileRanges;\n  }\n}\n\n\nexport default TileGrid;\n","/**\n * @module ol/tilegrid\n */\nimport {DEFAULT_MAX_ZOOM, DEFAULT_TILE_SIZE} from './tilegrid/common.js';\nimport {toSize} from './size.js';\nimport {containsCoordinate, createOrUpdate, getCorner, getHeight, getWidth} from './extent.js';\nimport Corner from './extent/Corner.js';\nimport {get as getProjection, METERS_PER_UNIT} from './proj.js';\nimport Units from './proj/Units.js';\nimport TileGrid from './tilegrid/TileGrid.js';\n\n\n/**\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @return {!TileGrid} Default tile grid for the\n * passed projection.\n */\nexport function getForProjection(projection) {\n  let tileGrid = projection.getDefaultTileGrid();\n  if (!tileGrid) {\n    tileGrid = createForProjection(projection);\n    projection.setDefaultTileGrid(tileGrid);\n  }\n  return tileGrid;\n}\n\n\n/**\n * @param {TileGrid} tileGrid Tile grid.\n * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @return {import(\"./tilecoord.js\").TileCoord} Tile coordinate.\n */\nexport function wrapX(tileGrid, tileCoord, projection) {\n  const z = tileCoord[0];\n  const center = tileGrid.getTileCoordCenter(tileCoord);\n  const projectionExtent = extentFromProjection(projection);\n  if (!containsCoordinate(projectionExtent, center)) {\n    const worldWidth = getWidth(projectionExtent);\n    const worldsAway = Math.ceil((projectionExtent[0] - center[0]) / worldWidth);\n    center[0] += worldWidth * worldsAway;\n    return tileGrid.getTileCoordForCoordAndZ(center, z);\n  } else {\n    return tileCoord;\n  }\n}\n\n\n/**\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number=} opt_maxZoom Maximum zoom level (default is\n *     DEFAULT_MAX_ZOOM).\n * @param {number|import(\"./size.js\").Size=} opt_tileSize Tile size (default uses\n *     DEFAULT_TILE_SIZE).\n * @param {Corner=} opt_corner Extent corner (default is `'top-left'`).\n * @return {!TileGrid} TileGrid instance.\n */\nexport function createForExtent(extent, opt_maxZoom, opt_tileSize, opt_corner) {\n  const corner = opt_corner !== undefined ? opt_corner : Corner.TOP_LEFT;\n\n  const resolutions = resolutionsFromExtent(extent, opt_maxZoom, opt_tileSize);\n\n  return new TileGrid({\n    extent: extent,\n    origin: getCorner(extent, corner),\n    resolutions: resolutions,\n    tileSize: opt_tileSize\n  });\n}\n\n\n/**\n * @typedef {Object} XYZOptions\n * @property {import(\"./extent.js\").Extent} [extent] Extent for the tile grid. The origin for an XYZ tile grid is the\n * top-left corner of the extent. The zero level of the grid is defined by the resolution at which one tile fits in the\n * provided extent. If not provided, the extent of the EPSG:3857 projection is used.\n * @property {number} [maxZoom] Maximum zoom. The default is `42`. This determines the number of levels\n * in the grid set. For example, a `maxZoom` of 21 means there are 22 levels in the grid set.\n * @property {number} [minZoom=0] Minimum zoom.\n * @property {number|import(\"./size.js\").Size} [tileSize=[256, 256]] Tile size in pixels.\n */\n\n\n/**\n * Creates a tile grid with a standard XYZ tiling scheme.\n * @param {XYZOptions=} opt_options Tile grid options.\n * @return {!TileGrid} Tile grid instance.\n * @api\n */\nexport function createXYZ(opt_options) {\n  /** @type {XYZOptions} */\n  const xyzOptions = opt_options || {};\n\n  const extent = xyzOptions.extent || getProjection('EPSG:3857').getExtent();\n\n  /** @type {import(\"./tilegrid/TileGrid.js\").Options} */\n  const gridOptions = {\n    extent: extent,\n    minZoom: xyzOptions.minZoom,\n    tileSize: xyzOptions.tileSize,\n    resolutions: resolutionsFromExtent(\n      extent,\n      xyzOptions.maxZoom,\n      xyzOptions.tileSize\n    )\n  };\n  return new TileGrid(gridOptions);\n}\n\n\n/**\n * Create a resolutions array from an extent.  A zoom factor of 2 is assumed.\n * @param {import(\"./extent.js\").Extent} extent Extent.\n * @param {number=} opt_maxZoom Maximum zoom level (default is\n *     DEFAULT_MAX_ZOOM).\n * @param {number|import(\"./size.js\").Size=} opt_tileSize Tile size (default uses\n *     DEFAULT_TILE_SIZE).\n * @return {!Array<number>} Resolutions array.\n */\nfunction resolutionsFromExtent(extent, opt_maxZoom, opt_tileSize) {\n  const maxZoom = opt_maxZoom !== undefined ?\n    opt_maxZoom : DEFAULT_MAX_ZOOM;\n\n  const height = getHeight(extent);\n  const width = getWidth(extent);\n\n  const tileSize = toSize(opt_tileSize !== undefined ?\n    opt_tileSize : DEFAULT_TILE_SIZE);\n  const maxResolution = Math.max(\n    width / tileSize[0], height / tileSize[1]);\n\n  const length = maxZoom + 1;\n  const resolutions = new Array(length);\n  for (let z = 0; z < length; ++z) {\n    resolutions[z] = maxResolution / Math.pow(2, z);\n  }\n  return resolutions;\n}\n\n\n/**\n * @param {import(\"./proj.js\").ProjectionLike} projection Projection.\n * @param {number=} opt_maxZoom Maximum zoom level (default is\n *     DEFAULT_MAX_ZOOM).\n * @param {number|import(\"./size.js\").Size=} opt_tileSize Tile size (default uses\n *     DEFAULT_TILE_SIZE).\n * @param {Corner=} opt_corner Extent corner (default is `'top-left'`).\n * @return {!TileGrid} TileGrid instance.\n */\nexport function createForProjection(projection, opt_maxZoom, opt_tileSize, opt_corner) {\n  const extent = extentFromProjection(projection);\n  return createForExtent(extent, opt_maxZoom, opt_tileSize, opt_corner);\n}\n\n\n/**\n * Generate a tile grid extent from a projection.  If the projection has an\n * extent, it is used.  If not, a global extent is assumed.\n * @param {import(\"./proj.js\").ProjectionLike} projection Projection.\n * @return {import(\"./extent.js\").Extent} Extent.\n */\nexport function extentFromProjection(projection) {\n  projection = getProjection(projection);\n  let extent = projection.getExtent();\n  if (!extent) {\n    const half = 180 * METERS_PER_UNIT[Units.DEGREES] / projection.getMetersPerUnit();\n    extent = createOrUpdate(-half, -half, half, half);\n  }\n  return extent;\n}\n","/**\n * @module ol/colorlike\n */\nimport {toString} from './color.js';\n\n\n/**\n * A type accepted by CanvasRenderingContext2D.fillStyle\n * or CanvasRenderingContext2D.strokeStyle.\n * Represents a color, pattern, or gradient. The origin for patterns and\n * gradients as fill style is an increment of 512 css pixels from map coordinate\n * `[0, 0]`. For seamless repeat patterns, width and height of the pattern image\n * must be a factor of two (2, 4, 8, ..., 512).\n *\n * @typedef {string|CanvasPattern|CanvasGradient} ColorLike\n * @api\n */\n\n\n/**\n * @param {import(\"./color.js\").Color|ColorLike} color Color.\n * @return {ColorLike} The color as an {@link ol/colorlike~ColorLike}.\n * @api\n */\nexport function asColorLike(color) {\n  if (Array.isArray(color)) {\n    return toString(color);\n  } else {\n    return color;\n  }\n}\n","/**\n * @module ol/control/Control\n */\nimport {VOID} from '../functions.js';\nimport MapEventType from '../MapEventType.js';\nimport BaseObject from '../Object.js';\nimport {removeNode} from '../dom.js';\nimport {listen, unlistenByKey} from '../events.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {HTMLElement} [element] The element is the control's\n * container element. This only needs to be specified if you're developing\n * a custom control.\n * @property {function(import(\"../MapEvent.js\").default)} [render] Function called when\n * the control should be re-rendered. This is called in a `requestAnimationFrame`\n * callback.\n * @property {HTMLElement|string} [target] Specify a target if you want\n * the control to be rendered outside of the map's viewport.\n */\n\n\n/**\n * @classdesc\n * A control is a visible widget with a DOM element in a fixed position on the\n * screen. They can involve user input (buttons), or be informational only;\n * the position is determined using CSS. By default these are placed in the\n * container with CSS class name `ol-overlaycontainer-stopevent`, but can use\n * any outside DOM element.\n *\n * This is the base class for controls. You can use it for simple custom\n * controls by creating the element with listeners, creating an instance:\n * ```js\n * var myControl = new Control({element: myElement});\n * ```\n * and then adding this to the map.\n *\n * The main advantage of having this as a control rather than a simple separate\n * DOM element is that preventing propagation is handled for you. Controls\n * will also be objects in a {@link module:ol/Collection~Collection}, so you can use their methods.\n *\n * You can also extend this base for your own control class. See\n * examples/custom-controls for an example of how to do this.\n *\n * @api\n */\nclass Control extends BaseObject {\n\n  /**\n   * @param {Options} options Control options.\n   */\n  constructor(options) {\n\n    super();\n\n    /**\n     * @protected\n     * @type {HTMLElement}\n     */\n    this.element = options.element ? options.element : null;\n\n    /**\n     * @private\n     * @type {HTMLElement}\n     */\n    this.target_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../PluggableMap.js\").default}\n     */\n    this.map_ = null;\n\n    /**\n     * @protected\n     * @type {!Array<import(\"../events.js\").EventsKey>}\n     */\n    this.listenerKeys = [];\n\n    /**\n     * @type {function(import(\"../MapEvent.js\").default)}\n     */\n    this.render = options.render ? options.render : VOID;\n\n    if (options.target) {\n      this.setTarget(options.target);\n    }\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    removeNode(this.element);\n    super.disposeInternal();\n  }\n\n  /**\n   * Get the map associated with this control.\n   * @return {import(\"../PluggableMap.js\").default} Map.\n   * @api\n   */\n  getMap() {\n    return this.map_;\n  }\n\n  /**\n   * Remove the control from its current map and attach it to the new map.\n   * Subclasses may set up event handlers to get notified about changes to\n   * the map here.\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   * @api\n   */\n  setMap(map) {\n    if (this.map_) {\n      removeNode(this.element);\n    }\n    for (let i = 0, ii = this.listenerKeys.length; i < ii; ++i) {\n      unlistenByKey(this.listenerKeys[i]);\n    }\n    this.listenerKeys.length = 0;\n    this.map_ = map;\n    if (this.map_) {\n      const target = this.target_ ?\n        this.target_ : map.getOverlayContainerStopEvent();\n      target.appendChild(this.element);\n      if (this.render !== VOID) {\n        this.listenerKeys.push(listen(map,\n          MapEventType.POSTRENDER, this.render, this));\n      }\n      map.render();\n    }\n  }\n\n  /**\n   * This function is used to set a target element for the control. It has no\n   * effect if it is called after the control has been added to the map (i.e.\n   * after `setMap` is called on the control). If no `target` is set in the\n   * options passed to the control constructor and if `setTarget` is not called\n   * then the control is added to the map's overlay container.\n   * @param {HTMLElement|string} target Target.\n   * @api\n   */\n  setTarget(target) {\n    this.target_ = typeof target === 'string' ?\n      document.getElementById(target) :\n      target;\n  }\n}\n\n\nexport default Control;\n","/**\n * @module ol/control/Attribution\n */\nimport {equals} from '../array.js';\nimport Control from './Control.js';\nimport {CLASS_CONTROL, CLASS_UNSELECTABLE, CLASS_COLLAPSED} from '../css.js';\nimport {removeChildren, replaceNode} from '../dom.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {visibleAtResolution} from '../layer/Layer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-attribution'] CSS class name.\n * @property {HTMLElement|string} [target] Specify a target if you\n * want the control to be rendered outside of the map's\n * viewport.\n * @property {boolean} [collapsible] Specify if attributions can\n * be collapsed. If not specified, sources control this behavior with their\n * `attributionsCollapsible` setting.\n * @property {boolean} [collapsed=true] Specify if attributions should\n * be collapsed at startup.\n * @property {string} [tipLabel='Attributions'] Text label to use for the button tip.\n * @property {string} [label='i'] Text label to use for the\n * collapsed attributions button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string|HTMLElement} [collapseLabel=''] Text label to use\n * for the expanded attributions button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {function(import(\"../MapEvent.js\").default)} [render] Function called when\n * the control should be re-rendered. This is called in a `requestAnimationFrame`\n * callback.\n */\n\n\n/**\n * @classdesc\n * Control to show all the attributions associated with the layer sources\n * in the map. This control is one of the default controls included in maps.\n * By default it will show in the bottom right portion of the map, but this can\n * be changed by using a css selector for `.ol-attribution`.\n *\n * @api\n */\nclass Attribution extends Control {\n\n  /**\n   * @param {Options=} opt_options Attribution options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super({\n      element: document.createElement('div'),\n      render: options.render || render,\n      target: options.target\n    });\n\n    /**\n     * @private\n     * @type {HTMLElement}\n     */\n    this.ulElement_ = document.createElement('ul');\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.collapsed_ = options.collapsed !== undefined ? options.collapsed : true;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.overrideCollapsible_ = options.collapsible !== undefined;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.collapsible_ = options.collapsible !== undefined ?\n      options.collapsible : true;\n\n    if (!this.collapsible_) {\n      this.collapsed_ = false;\n    }\n\n    const className = options.className !== undefined ? options.className : 'ol-attribution';\n\n    const tipLabel = options.tipLabel !== undefined ? options.tipLabel : 'Attributions';\n\n    const collapseLabel = options.collapseLabel !== undefined ? options.collapseLabel : '\\u00BB';\n\n    if (typeof collapseLabel === 'string') {\n      /**\n       * @private\n       * @type {HTMLElement}\n       */\n      this.collapseLabel_ = document.createElement('span');\n      this.collapseLabel_.textContent = collapseLabel;\n    } else {\n      this.collapseLabel_ = collapseLabel;\n    }\n\n    const label = options.label !== undefined ? options.label : 'i';\n\n    if (typeof label === 'string') {\n      /**\n       * @private\n       * @type {HTMLElement}\n       */\n      this.label_ = document.createElement('span');\n      this.label_.textContent = label;\n    } else {\n      this.label_ = label;\n    }\n\n\n    const activeLabel = (this.collapsible_ && !this.collapsed_) ?\n      this.collapseLabel_ : this.label_;\n    const button = document.createElement('button');\n    button.setAttribute('type', 'button');\n    button.title = tipLabel;\n    button.appendChild(activeLabel);\n\n    listen(button, EventType.CLICK, this.handleClick_, this);\n\n    const cssClasses = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL +\n        (this.collapsed_ && this.collapsible_ ? ' ' + CLASS_COLLAPSED : '') +\n        (this.collapsible_ ? '' : ' ol-uncollapsible');\n    const element = this.element;\n    element.className = cssClasses;\n    element.appendChild(this.ulElement_);\n    element.appendChild(button);\n\n    /**\n     * A list of currently rendered resolutions.\n     * @type {Array<string>}\n     * @private\n     */\n    this.renderedAttributions_ = [];\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.renderedVisible_ = true;\n\n  }\n\n  /**\n   * Collect a list of visible attributions and set the collapsible state.\n   * @param {import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   * @return {Array<string>} Attributions.\n   * @private\n   */\n  collectSourceAttributions_(frameState) {\n    /**\n     * Used to determine if an attribution already exists.\n     * @type {!Object<string, boolean>}\n     */\n    const lookup = {};\n\n    /**\n     * A list of visible attributions.\n     * @type {Array<string>}\n     */\n    const visibleAttributions = [];\n\n    const layerStatesArray = frameState.layerStatesArray;\n    const resolution = frameState.viewState.resolution;\n    for (let i = 0, ii = layerStatesArray.length; i < ii; ++i) {\n      const layerState = layerStatesArray[i];\n      if (!visibleAtResolution(layerState, resolution)) {\n        continue;\n      }\n\n      const source = /** @type {import(\"../layer/Layer.js\").default} */ (layerState.layer).getSource();\n      if (!source) {\n        continue;\n      }\n\n      const attributionGetter = source.getAttributions();\n      if (!attributionGetter) {\n        continue;\n      }\n\n      const attributions = attributionGetter(frameState);\n      if (!attributions) {\n        continue;\n      }\n\n      if (!this.overrideCollapsible_ && source.getAttributionsCollapsible() === false) {\n        this.setCollapsible(false);\n      }\n\n      if (Array.isArray(attributions)) {\n        for (let j = 0, jj = attributions.length; j < jj; ++j) {\n          if (!(attributions[j] in lookup)) {\n            visibleAttributions.push(attributions[j]);\n            lookup[attributions[j]] = true;\n          }\n        }\n      } else {\n        if (!(attributions in lookup)) {\n          visibleAttributions.push(attributions);\n          lookup[attributions] = true;\n        }\n      }\n    }\n    return visibleAttributions;\n  }\n\n  /**\n   * @private\n   * @param {?import(\"../PluggableMap.js\").FrameState} frameState Frame state.\n   */\n  updateElement_(frameState) {\n    if (!frameState) {\n      if (this.renderedVisible_) {\n        this.element.style.display = 'none';\n        this.renderedVisible_ = false;\n      }\n      return;\n    }\n\n    const attributions = this.collectSourceAttributions_(frameState);\n\n    const visible = attributions.length > 0;\n    if (this.renderedVisible_ != visible) {\n      this.element.style.display = visible ? '' : 'none';\n      this.renderedVisible_ = visible;\n    }\n\n    if (equals(attributions, this.renderedAttributions_)) {\n      return;\n    }\n\n    removeChildren(this.ulElement_);\n\n    // append the attributions\n    for (let i = 0, ii = attributions.length; i < ii; ++i) {\n      const element = document.createElement('li');\n      element.innerHTML = attributions[i];\n      this.ulElement_.appendChild(element);\n    }\n\n    this.renderedAttributions_ = attributions;\n  }\n\n  /**\n   * @param {MouseEvent} event The event to handle\n   * @private\n   */\n  handleClick_(event) {\n    event.preventDefault();\n    this.handleToggle_();\n  }\n\n  /**\n   * @private\n   */\n  handleToggle_() {\n    this.element.classList.toggle(CLASS_COLLAPSED);\n    if (this.collapsed_) {\n      replaceNode(this.collapseLabel_, this.label_);\n    } else {\n      replaceNode(this.label_, this.collapseLabel_);\n    }\n    this.collapsed_ = !this.collapsed_;\n  }\n\n  /**\n   * Return `true` if the attribution is collapsible, `false` otherwise.\n   * @return {boolean} True if the widget is collapsible.\n   * @api\n   */\n  getCollapsible() {\n    return this.collapsible_;\n  }\n\n  /**\n   * Set whether the attribution should be collapsible.\n   * @param {boolean} collapsible True if the widget is collapsible.\n   * @api\n   */\n  setCollapsible(collapsible) {\n    if (this.collapsible_ === collapsible) {\n      return;\n    }\n    this.collapsible_ = collapsible;\n    this.element.classList.toggle('ol-uncollapsible');\n    if (!collapsible && this.collapsed_) {\n      this.handleToggle_();\n    }\n  }\n\n  /**\n   * Collapse or expand the attribution according to the passed parameter. Will\n   * not do anything if the attribution isn't collapsible or if the current\n   * collapsed state is already the one requested.\n   * @param {boolean} collapsed True if the widget is collapsed.\n   * @api\n   */\n  setCollapsed(collapsed) {\n    if (!this.collapsible_ || this.collapsed_ === collapsed) {\n      return;\n    }\n    this.handleToggle_();\n  }\n\n  /**\n   * Return `true` when the attribution is currently collapsed or `false`\n   * otherwise.\n   * @return {boolean} True if the widget is collapsed.\n   * @api\n   */\n  getCollapsed() {\n    return this.collapsed_;\n  }\n}\n\n\n/**\n * Update the attribution element.\n * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n * @this {Attribution}\n * @api\n */\nexport function render(mapEvent) {\n  this.updateElement_(mapEvent.frameState);\n}\n\n\nexport default Attribution;\n","/**\n * @module ol/control/Rotate\n */\nimport Control from './Control.js';\nimport {CLASS_CONTROL, CLASS_HIDDEN, CLASS_UNSELECTABLE} from '../css.js';\nimport {easeOut} from '../easing.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-rotate'] CSS class name.\n * @property {string|HTMLElement} [label=''] Text label to use for the rotate button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [tipLabel='Reset rotation'] Text label to use for the rotate tip.\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {boolean} [autoHide=true] Hide the control when rotation is 0.\n * @property {function(import(\"../MapEvent.js\").default)} [render] Function called when the control should\n * be re-rendered. This is called in a `requestAnimationFrame` callback.\n * @property {function()} [resetNorth] Function called when the control is clicked.\n * This will override the default `resetNorth`.\n * @property {HTMLElement|string} [target] Specify a target if you want the control to be\n * rendered outside of the map's viewport.\n */\n\n\n/**\n * @classdesc\n * A button control to reset rotation to 0.\n * To style this control use css selector `.ol-rotate`. A `.ol-hidden` css\n * selector is added to the button when the rotation is 0.\n *\n * @api\n */\nclass Rotate extends Control {\n\n  /**\n   * @param {Options=} opt_options Rotate options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super({\n      element: document.createElement('div'),\n      render: options.render || render,\n      target: options.target\n    });\n\n    const className = options.className !== undefined ? options.className : 'ol-rotate';\n\n    const label = options.label !== undefined ? options.label : '\\u21E7';\n\n    /**\n     * @type {HTMLElement}\n     * @private\n     */\n    this.label_ = null;\n\n    if (typeof label === 'string') {\n      this.label_ = document.createElement('span');\n      this.label_.className = 'ol-compass';\n      this.label_.textContent = label;\n    } else {\n      this.label_ = label;\n      this.label_.classList.add('ol-compass');\n    }\n\n    const tipLabel = options.tipLabel ? options.tipLabel : 'Reset rotation';\n\n    const button = document.createElement('button');\n    button.className = className + '-reset';\n    button.setAttribute('type', 'button');\n    button.title = tipLabel;\n    button.appendChild(this.label_);\n\n    listen(button, EventType.CLICK, this.handleClick_, this);\n\n    const cssClasses = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL;\n    const element = this.element;\n    element.className = cssClasses;\n    element.appendChild(button);\n\n    this.callResetNorth_ = options.resetNorth ? options.resetNorth : undefined;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.autoHide_ = options.autoHide !== undefined ? options.autoHide : true;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.rotation_ = undefined;\n\n    if (this.autoHide_) {\n      this.element.classList.add(CLASS_HIDDEN);\n    }\n\n  }\n\n  /**\n   * @param {MouseEvent} event The event to handle\n   * @private\n   */\n  handleClick_(event) {\n    event.preventDefault();\n    if (this.callResetNorth_ !== undefined) {\n      this.callResetNorth_();\n    } else {\n      this.resetNorth_();\n    }\n  }\n\n  /**\n   * @private\n   */\n  resetNorth_() {\n    const map = this.getMap();\n    const view = map.getView();\n    if (!view) {\n      // the map does not have a view, so we can't act\n      // upon it\n      return;\n    }\n    if (view.getRotation() !== undefined) {\n      if (this.duration_ > 0) {\n        view.animate({\n          rotation: 0,\n          duration: this.duration_,\n          easing: easeOut\n        });\n      } else {\n        view.setRotation(0);\n      }\n    }\n  }\n}\n\n\n/**\n * Update the rotate control element.\n * @param {import(\"../MapEvent.js\").default} mapEvent Map event.\n * @this {Rotate}\n * @api\n */\nexport function render(mapEvent) {\n  const frameState = mapEvent.frameState;\n  if (!frameState) {\n    return;\n  }\n  const rotation = frameState.viewState.rotation;\n  if (rotation != this.rotation_) {\n    const transform = 'rotate(' + rotation + 'rad)';\n    if (this.autoHide_) {\n      const contains = this.element.classList.contains(CLASS_HIDDEN);\n      if (!contains && rotation === 0) {\n        this.element.classList.add(CLASS_HIDDEN);\n      } else if (contains && rotation !== 0) {\n        this.element.classList.remove(CLASS_HIDDEN);\n      }\n    }\n    this.label_.style.msTransform = transform;\n    this.label_.style.webkitTransform = transform;\n    this.label_.style.transform = transform;\n  }\n  this.rotation_ = rotation;\n}\n\nexport default Rotate;\n","/**\n * @module ol/control/Zoom\n */\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport Control from './Control.js';\nimport {CLASS_CONTROL, CLASS_UNSELECTABLE} from '../css.js';\nimport {easeOut} from '../easing.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {string} [className='ol-zoom'] CSS class name.\n * @property {string|HTMLElement} [zoomInLabel='+'] Text label to use for the zoom-in\n * button. Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string|HTMLElement} [zoomOutLabel='-'] Text label to use for the zoom-out button.\n * Instead of text, also an element (e.g. a `span` element) can be used.\n * @property {string} [zoomInTipLabel='Zoom in'] Text label to use for the button tip.\n * @property {string} [zoomOutTipLabel='Zoom out'] Text label to use for the button tip.\n * @property {number} [delta=1] The zoom delta applied on each click.\n * @property {HTMLElement|string} [target] Specify a target if you want the control to be\n * rendered outside of the map's viewport.\n */\n\n\n/**\n * @classdesc\n * A control with 2 buttons, one for zoom in and one for zoom out.\n * This control is one of the default controls of a map. To style this control\n * use css selectors `.ol-zoom-in` and `.ol-zoom-out`.\n *\n * @api\n */\nclass Zoom extends Control {\n\n  /**\n   * @param {Options=} opt_options Zoom options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super({\n      element: document.createElement('div'),\n      target: options.target\n    });\n\n    const className = options.className !== undefined ? options.className : 'ol-zoom';\n\n    const delta = options.delta !== undefined ? options.delta : 1;\n\n    const zoomInLabel = options.zoomInLabel !== undefined ? options.zoomInLabel : '+';\n    const zoomOutLabel = options.zoomOutLabel !== undefined ? options.zoomOutLabel : '\\u2212';\n\n    const zoomInTipLabel = options.zoomInTipLabel !== undefined ?\n      options.zoomInTipLabel : 'Zoom in';\n    const zoomOutTipLabel = options.zoomOutTipLabel !== undefined ?\n      options.zoomOutTipLabel : 'Zoom out';\n\n    const inElement = document.createElement('button');\n    inElement.className = className + '-in';\n    inElement.setAttribute('type', 'button');\n    inElement.title = zoomInTipLabel;\n    inElement.appendChild(\n      typeof zoomInLabel === 'string' ? document.createTextNode(zoomInLabel) : zoomInLabel\n    );\n\n    listen(inElement, EventType.CLICK, this.handleClick_.bind(this, delta));\n\n    const outElement = document.createElement('button');\n    outElement.className = className + '-out';\n    outElement.setAttribute('type', 'button');\n    outElement.title = zoomOutTipLabel;\n    outElement.appendChild(\n      typeof zoomOutLabel === 'string' ? document.createTextNode(zoomOutLabel) : zoomOutLabel\n    );\n\n    listen(outElement, EventType.CLICK, this.handleClick_.bind(this, -delta));\n\n    const cssClasses = className + ' ' + CLASS_UNSELECTABLE + ' ' + CLASS_CONTROL;\n    const element = this.element;\n    element.className = cssClasses;\n    element.appendChild(inElement);\n    element.appendChild(outElement);\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n  }\n\n  /**\n   * @param {number} delta Zoom delta.\n   * @param {MouseEvent} event The event to handle\n   * @private\n   */\n  handleClick_(delta, event) {\n    event.preventDefault();\n    this.zoomByDelta_(delta);\n  }\n\n  /**\n   * @param {number} delta Zoom delta.\n   * @private\n   */\n  zoomByDelta_(delta) {\n    const map = this.getMap();\n    const view = map.getView();\n    if (!view) {\n      // the map does not have a view, so we can't act\n      // upon it\n      return;\n    }\n    const currentResolution = view.getResolution();\n    if (currentResolution) {\n      const newResolution = view.constrainResolution(currentResolution, delta);\n      if (this.duration_ > 0) {\n        if (view.getAnimating()) {\n          view.cancelAnimations();\n        }\n        view.animate({\n          resolution: newResolution,\n          duration: this.duration_,\n          easing: easeOut\n        });\n      } else {\n        view.setResolution(newResolution);\n      }\n    }\n  }\n}\n\n\nexport default Zoom;\n","/**\n * @module ol/control/util\n */\nimport Collection from '../Collection.js';\nimport Attribution from './Attribution.js';\nimport Rotate from './Rotate.js';\nimport Zoom from './Zoom.js';\n\n\n/**\n * @typedef {Object} DefaultsOptions\n * @property {boolean} [attribution=true] Include\n * {@link module:ol/control/Attribution~Attribution}.\n * @property {import(\"./Attribution.js\").Options} [attributionOptions]\n * Options for {@link module:ol/control/Attribution~Attribution}.\n * @property {boolean} [rotate=true] Include\n * {@link module:ol/control/Rotate~Rotate}.\n * @property {import(\"./Rotate.js\").Options} [rotateOptions] Options\n * for {@link module:ol/control/Rotate~Rotate}.\n * @property {boolean} [zoom] Include {@link module:ol/control/Zoom~Zoom}.\n * @property {import(\"./Zoom.js\").Options} [zoomOptions] Options for\n * {@link module:ol/control/Zoom~Zoom}.\n * @api\n */\n\n\n/**\n * Set of controls included in maps by default. Unless configured otherwise,\n * this returns a collection containing an instance of each of the following\n * controls:\n * * {@link module:ol/control/Zoom~Zoom}\n * * {@link module:ol/control/Rotate~Rotate}\n * * {@link module:ol/control/Attribution~Attribution}\n *\n * @param {DefaultsOptions=} opt_options\n * Defaults options.\n * @return {Collection<import(\"./Control.js\").default>}\n * Controls.\n * @function module:ol/control.defaults\n * @api\n */\nexport function defaults(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  const controls = new Collection();\n\n  const zoomControl = options.zoom !== undefined ? options.zoom : true;\n  if (zoomControl) {\n    controls.push(new Zoom(options.zoomOptions));\n  }\n\n  const rotateControl = options.rotate !== undefined ? options.rotate : true;\n  if (rotateControl) {\n    controls.push(new Rotate(options.rotateOptions));\n  }\n\n  const attributionControl = options.attribution !== undefined ?\n    options.attribution : true;\n  if (attributionControl) {\n    controls.push(new Attribution(options.attributionOptions));\n  }\n\n  return controls;\n}\n","/**\n * @module ol/string\n */\n\n/**\n * @param {number} number Number to be formatted\n * @param {number} width The desired width\n * @param {number=} opt_precision Precision of the output string (i.e. number of decimal places)\n * @returns {string} Formatted string\n */\nexport function padNumber(number, width, opt_precision) {\n  const numberString = opt_precision !== undefined ? number.toFixed(opt_precision) : '' + number;\n  let decimal = numberString.indexOf('.');\n  decimal = decimal === -1 ? numberString.length : decimal;\n  return decimal > width ? numberString : new Array(1 + width - decimal).join('0') + numberString;\n}\n\n\n/**\n * Adapted from https://github.com/omichelsen/compare-versions/blob/master/index.js\n * @param {string|number} v1 First version\n * @param {string|number} v2 Second version\n * @returns {number} Value\n */\nexport function compareVersions(v1, v2) {\n  const s1 = ('' + v1).split('.');\n  const s2 = ('' + v2).split('.');\n\n  for (let i = 0; i < Math.max(s1.length, s2.length); i++) {\n    const n1 = parseInt(s1[i] || '0', 10);\n    const n2 = parseInt(s2[i] || '0', 10);\n\n    if (n1 > n2) {\n      return 1;\n    }\n    if (n2 > n1) {\n      return -1;\n    }\n  }\n\n  return 0;\n}\n","/**\n * @module ol/geom/flat/simplify\n */\n// Based on simplify-js https://github.com/mourner/simplify-js\n// Copyright (c) 2012, Vladimir Agafonkin\n// All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are met:\n//\n//    1. Redistributions of source code must retain the above copyright notice,\n//       this list of conditions and the following disclaimer.\n//\n//    2. Redistributions in binary form must reproduce the above copyright\n//       notice, this list of conditions and the following disclaimer in the\n//       documentation and/or other materials provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n// AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n// ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n// LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n// SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n// CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n// ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n// POSSIBILITY OF SUCH DAMAGE.\n\nimport {squaredSegmentDistance, squaredDistance} from '../../math.js';\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {boolean} highQuality Highest quality.\n * @param {Array<number>=} opt_simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @return {Array<number>} Simplified line string.\n */\nexport function simplifyLineString(flatCoordinates, offset, end,\n  stride, squaredTolerance, highQuality, opt_simplifiedFlatCoordinates) {\n  const simplifiedFlatCoordinates = opt_simplifiedFlatCoordinates !== undefined ?\n    opt_simplifiedFlatCoordinates : [];\n  if (!highQuality) {\n    end = radialDistance(flatCoordinates, offset, end,\n      stride, squaredTolerance,\n      simplifiedFlatCoordinates, 0);\n    flatCoordinates = simplifiedFlatCoordinates;\n    offset = 0;\n    stride = 2;\n  }\n  simplifiedFlatCoordinates.length = douglasPeucker(\n    flatCoordinates, offset, end, stride, squaredTolerance,\n    simplifiedFlatCoordinates, 0);\n  return simplifiedFlatCoordinates;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function douglasPeucker(flatCoordinates, offset, end,\n  stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset) {\n  const n = (end - offset) / stride;\n  if (n < 3) {\n    for (; offset < end; offset += stride) {\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset];\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset + 1];\n    }\n    return simplifiedOffset;\n  }\n  /** @type {Array<number>} */\n  const markers = new Array(n);\n  markers[0] = 1;\n  markers[n - 1] = 1;\n  /** @type {Array<number>} */\n  const stack = [offset, end - stride];\n  let index = 0;\n  while (stack.length > 0) {\n    const last = stack.pop();\n    const first = stack.pop();\n    let maxSquaredDistance = 0;\n    const x1 = flatCoordinates[first];\n    const y1 = flatCoordinates[first + 1];\n    const x2 = flatCoordinates[last];\n    const y2 = flatCoordinates[last + 1];\n    for (let i = first + stride; i < last; i += stride) {\n      const x = flatCoordinates[i];\n      const y = flatCoordinates[i + 1];\n      const squaredDistance = squaredSegmentDistance(\n        x, y, x1, y1, x2, y2);\n      if (squaredDistance > maxSquaredDistance) {\n        index = i;\n        maxSquaredDistance = squaredDistance;\n      }\n    }\n    if (maxSquaredDistance > squaredTolerance) {\n      markers[(index - offset) / stride] = 1;\n      if (first + stride < index) {\n        stack.push(first, index);\n      }\n      if (index + stride < last) {\n        stack.push(index, last);\n      }\n    }\n  }\n  for (let i = 0; i < n; ++i) {\n    if (markers[i]) {\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset + i * stride];\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset + i * stride + 1];\n    }\n  }\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<number>} simplifiedEnds Simplified ends.\n * @return {number} Simplified offset.\n */\nexport function douglasPeuckerArray(flatCoordinates, offset,\n  ends, stride, squaredTolerance, simplifiedFlatCoordinates,\n  simplifiedOffset, simplifiedEnds) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    simplifiedOffset = douglasPeucker(\n      flatCoordinates, offset, end, stride, squaredTolerance,\n      simplifiedFlatCoordinates, simplifiedOffset);\n    simplifiedEnds.push(simplifiedOffset);\n    offset = end;\n  }\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<Array<number>>} simplifiedEndss Simplified endss.\n * @return {number} Simplified offset.\n */\nexport function douglasPeuckerMultiArray(\n  flatCoordinates, offset, endss, stride, squaredTolerance,\n  simplifiedFlatCoordinates, simplifiedOffset, simplifiedEndss) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    const simplifiedEnds = [];\n    simplifiedOffset = douglasPeuckerArray(\n      flatCoordinates, offset, ends, stride, squaredTolerance,\n      simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds);\n    simplifiedEndss.push(simplifiedEnds);\n    offset = ends[ends.length - 1];\n  }\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function radialDistance(flatCoordinates, offset, end,\n  stride, squaredTolerance, simplifiedFlatCoordinates, simplifiedOffset) {\n  if (end <= offset + stride) {\n    // zero or one point, no simplification possible, so copy and return\n    for (; offset < end; offset += stride) {\n      simplifiedFlatCoordinates[simplifiedOffset++] = flatCoordinates[offset];\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n          flatCoordinates[offset + 1];\n    }\n    return simplifiedOffset;\n  }\n  let x1 = flatCoordinates[offset];\n  let y1 = flatCoordinates[offset + 1];\n  // copy first point\n  simplifiedFlatCoordinates[simplifiedOffset++] = x1;\n  simplifiedFlatCoordinates[simplifiedOffset++] = y1;\n  let x2 = x1;\n  let y2 = y1;\n  for (offset += stride; offset < end; offset += stride) {\n    x2 = flatCoordinates[offset];\n    y2 = flatCoordinates[offset + 1];\n    if (squaredDistance(x1, y1, x2, y2) > squaredTolerance) {\n      // copy point at offset\n      simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n      simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n      x1 = x2;\n      y1 = y2;\n    }\n  }\n  if (x2 != x1 || y2 != y1) {\n    // copy last point\n    simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n    simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n  }\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {number} value Value.\n * @param {number} tolerance Tolerance.\n * @return {number} Rounded value.\n */\nexport function snap(value, tolerance) {\n  return tolerance * Math.round(value / tolerance);\n}\n\n\n/**\n * Simplifies a line string using an algorithm designed by Tim Schaub.\n * Coordinates are snapped to the nearest value in a virtual grid and\n * consecutive duplicate coordinates are discarded.  This effectively preserves\n * topology as the simplification of any subsection of a line string is\n * independent of the rest of the line string.  This means that, for examples,\n * the common edge between two polygons will be simplified to the same line\n * string independently in both polygons.  This implementation uses a single\n * pass over the coordinates and eliminates intermediate collinear points.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function quantize(flatCoordinates, offset, end, stride,\n  tolerance, simplifiedFlatCoordinates, simplifiedOffset) {\n  // do nothing if the line is empty\n  if (offset == end) {\n    return simplifiedOffset;\n  }\n  // snap the first coordinate (P1)\n  let x1 = snap(flatCoordinates[offset], tolerance);\n  let y1 = snap(flatCoordinates[offset + 1], tolerance);\n  offset += stride;\n  // add the first coordinate to the output\n  simplifiedFlatCoordinates[simplifiedOffset++] = x1;\n  simplifiedFlatCoordinates[simplifiedOffset++] = y1;\n  // find the next coordinate that does not snap to the same value as the first\n  // coordinate (P2)\n  let x2, y2;\n  do {\n    x2 = snap(flatCoordinates[offset], tolerance);\n    y2 = snap(flatCoordinates[offset + 1], tolerance);\n    offset += stride;\n    if (offset == end) {\n      // all coordinates snap to the same value, the line collapses to a point\n      // push the last snapped value anyway to ensure that the output contains\n      // at least two points\n      // FIXME should we really return at least two points anyway?\n      simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n      simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n      return simplifiedOffset;\n    }\n  } while (x2 == x1 && y2 == y1);\n  while (offset < end) {\n    // snap the next coordinate (P3)\n    const x3 = snap(flatCoordinates[offset], tolerance);\n    const y3 = snap(flatCoordinates[offset + 1], tolerance);\n    offset += stride;\n    // skip P3 if it is equal to P2\n    if (x3 == x2 && y3 == y2) {\n      continue;\n    }\n    // calculate the delta between P1 and P2\n    const dx1 = x2 - x1;\n    const dy1 = y2 - y1;\n    // calculate the delta between P3 and P1\n    const dx2 = x3 - x1;\n    const dy2 = y3 - y1;\n    // if P1, P2, and P3 are colinear and P3 is further from P1 than P2 is from\n    // P1 in the same direction then P2 is on the straight line between P1 and\n    // P3\n    if ((dx1 * dy2 == dy1 * dx2) &&\n        ((dx1 < 0 && dx2 < dx1) || dx1 == dx2 || (dx1 > 0 && dx2 > dx1)) &&\n        ((dy1 < 0 && dy2 < dy1) || dy1 == dy2 || (dy1 > 0 && dy2 > dy1))) {\n      // discard P2 and set P2 = P3\n      x2 = x3;\n      y2 = y3;\n      continue;\n    }\n    // either P1, P2, and P3 are not colinear, or they are colinear but P3 is\n    // between P3 and P1 or on the opposite half of the line to P2.  add P2,\n    // and continue with P1 = P2 and P2 = P3\n    simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n    simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n    x1 = x2;\n    y1 = y2;\n    x2 = x3;\n    y2 = y3;\n  }\n  // add the last point (P2)\n  simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n  simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<number>} simplifiedEnds Simplified ends.\n * @return {number} Simplified offset.\n */\nexport function quantizeArray(\n  flatCoordinates, offset, ends, stride,\n  tolerance,\n  simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    simplifiedOffset = quantize(\n      flatCoordinates, offset, end, stride,\n      tolerance,\n      simplifiedFlatCoordinates, simplifiedOffset);\n    simplifiedEnds.push(simplifiedOffset);\n    offset = end;\n  }\n  return simplifiedOffset;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<Array<number>>} simplifiedEndss Simplified endss.\n * @return {number} Simplified offset.\n */\nexport function quantizeMultiArray(\n  flatCoordinates, offset, endss, stride,\n  tolerance,\n  simplifiedFlatCoordinates, simplifiedOffset, simplifiedEndss) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    const simplifiedEnds = [];\n    simplifiedOffset = quantizeArray(\n      flatCoordinates, offset, ends, stride,\n      tolerance,\n      simplifiedFlatCoordinates, simplifiedOffset, simplifiedEnds);\n    simplifiedEndss.push(simplifiedEnds);\n    offset = ends[ends.length - 1];\n  }\n  return simplifiedOffset;\n}\n","/**\n * @module ol/format/FormatType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  ARRAY_BUFFER: 'arraybuffer',\n  JSON: 'json',\n  TEXT: 'text',\n  XML: 'xml'\n};\n","/**\n * @module ol/geom/flat/contains\n */\nimport {forEachCorner} from '../../extent.js';\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} Contains extent.\n */\nexport function linearRingContainsExtent(flatCoordinates, offset, end, stride, extent) {\n  const outside = forEachCorner(extent,\n    /**\n     * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @return {boolean} Contains (x, y).\n     */\n    function(coordinate) {\n      return !linearRingContainsXY(flatCoordinates, offset, end, stride, coordinate[0], coordinate[1]);\n    });\n  return !outside;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingContainsXY(flatCoordinates, offset, end, stride, x, y) {\n  // http://geomalgorithms.com/a03-_inclusion.html\n  // Copyright 2000 softSurfer, 2012 Dan Sunday\n  // This code may be freely used and modified for any purpose\n  // providing that this copyright notice is included with it.\n  // SoftSurfer makes no warranty for this code, and cannot be held\n  // liable for any real or imagined damage resulting from its use.\n  // Users of this code must verify correctness for their application.\n  let wn = 0;\n  let x1 = flatCoordinates[end - stride];\n  let y1 = flatCoordinates[end - stride + 1];\n  for (; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    if (y1 <= y) {\n      if (y2 > y && ((x2 - x1) * (y - y1)) - ((x - x1) * (y2 - y1)) > 0) {\n        wn++;\n      }\n    } else if (y2 <= y && ((x2 - x1) * (y - y1)) - ((x - x1) * (y2 - y1)) < 0) {\n      wn--;\n    }\n    x1 = x2;\n    y1 = y2;\n  }\n  return wn !== 0;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y) {\n  if (ends.length === 0) {\n    return false;\n  }\n  if (!linearRingContainsXY(flatCoordinates, offset, ends[0], stride, x, y)) {\n    return false;\n  }\n  for (let i = 1, ii = ends.length; i < ii; ++i) {\n    if (linearRingContainsXY(flatCoordinates, ends[i - 1], ends[i], stride, x, y)) {\n      return false;\n    }\n  }\n  return true;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingssContainsXY(flatCoordinates, offset, endss, stride, x, y) {\n  if (endss.length === 0) {\n    return false;\n  }\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    if (linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y)) {\n      return true;\n    }\n    offset = ends[ends.length - 1];\n  }\n  return false;\n}\n","/**\n * @module ol/style/Text\n */\nimport Fill from './Fill.js';\nimport TextPlacement from './TextPlacement.js';\n\n\n/**\n * The default fill color to use if no fill was set at construction time; a\n * blackish `#333`.\n *\n * @const {string}\n */\nconst DEFAULT_FILL_COLOR = '#333';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [font] Font style as CSS 'font' value, see:\n * https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/font. Default is '10px sans-serif'\n * @property {number} [maxAngle] When `placement` is set to `'line'`, allow a maximum angle between adjacent characters.\n * The expected value is in radians, and the default is 45 (`Math.PI / 4`).\n * @property {number} [offsetX=0] Horizontal text offset in pixels. A positive will shift the text right.\n * @property {number} [offsetY=0] Vertical text offset in pixels. A positive will shift the text down.\n * @property {boolean} [overflow=false] For polygon labels or when `placement` is set to `'line'`, allow text to exceed\n * the width of the polygon at the label position or the length of the path that it follows.\n * @property {import(\"./TextPlacement.js\").default|string} [placement] Text placement.\n * @property {number} [scale] Scale.\n * @property {boolean} [rotateWithView=false] Whether to rotate the text with the view.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {string} [text] Text content.\n * @property {string} [textAlign] Text alignment. Possible values: 'left', 'right', 'center', 'end' or 'start'.\n * Default is 'center' for `placement: 'point'`. For `placement: 'line'`, the default is to let the renderer choose a\n * placement where `maxAngle` is not exceeded.\n * @property {string} [textBaseline='middle'] Text base line. Possible values: 'bottom', 'top', 'middle', 'alphabetic',\n * 'hanging', 'ideographic'.\n * @property {import(\"./Fill.js\").default} [fill] Fill style. If none is provided, we'll use a dark fill-style (#333).\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {import(\"./Fill.js\").default} [backgroundFill] Fill style for the text background when `placement` is\n * `'point'`. Default is no fill.\n * @property {import(\"./Stroke.js\").default} [backgroundStroke] Stroke style for the text background  when `placement`\n * is `'point'`. Default is no stroke.\n * @property {Array<number>} [padding=[0, 0, 0, 0]] Padding in pixels around the text for decluttering and background. The order of\n * values in the array is `[top, right, bottom, left]`.\n */\n\n\n/**\n * @classdesc\n * Set text style for vector features.\n * @api\n */\nclass Text {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n\n    /**\n    * @private\n    * @type {string|undefined}\n    */\n    this.font_ = options.font;\n\n    /**\n    * @private\n    * @type {number|undefined}\n    */\n    this.rotation_ = options.rotation;\n\n    /**\n    * @private\n    * @type {boolean|undefined}\n    */\n    this.rotateWithView_ = options.rotateWithView;\n\n    /**\n    * @private\n    * @type {number|undefined}\n    */\n    this.scale_ = options.scale;\n\n    /**\n    * @private\n    * @type {string|undefined}\n    */\n    this.text_ = options.text;\n\n    /**\n    * @private\n    * @type {string|undefined}\n    */\n    this.textAlign_ = options.textAlign;\n\n    /**\n    * @private\n    * @type {string|undefined}\n    */\n    this.textBaseline_ = options.textBaseline;\n\n    /**\n    * @private\n    * @type {import(\"./Fill.js\").default}\n    */\n    this.fill_ = options.fill !== undefined ? options.fill :\n      new Fill({color: DEFAULT_FILL_COLOR});\n\n    /**\n    * @private\n    * @type {number}\n    */\n    this.maxAngle_ = options.maxAngle !== undefined ? options.maxAngle : Math.PI / 4;\n\n    /**\n    * @private\n    * @type {import(\"./TextPlacement.js\").default|string}\n    */\n    this.placement_ = options.placement !== undefined ? options.placement : TextPlacement.POINT;\n\n    /**\n    * @private\n    * @type {boolean}\n    */\n    this.overflow_ = !!options.overflow;\n\n    /**\n    * @private\n    * @type {import(\"./Stroke.js\").default}\n    */\n    this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n\n    /**\n    * @private\n    * @type {number}\n    */\n    this.offsetX_ = options.offsetX !== undefined ? options.offsetX : 0;\n\n    /**\n    * @private\n    * @type {number}\n    */\n    this.offsetY_ = options.offsetY !== undefined ? options.offsetY : 0;\n\n    /**\n    * @private\n    * @type {import(\"./Fill.js\").default}\n    */\n    this.backgroundFill_ = options.backgroundFill ? options.backgroundFill : null;\n\n    /**\n    * @private\n    * @type {import(\"./Stroke.js\").default}\n    */\n    this.backgroundStroke_ = options.backgroundStroke ? options.backgroundStroke : null;\n\n    /**\n    * @private\n    * @type {Array<number>}\n    */\n    this.padding_ = options.padding === undefined ? null : options.padding;\n  }\n\n  /**\n  * Clones the style.\n  * @return {Text} The cloned style.\n  * @api\n  */\n  clone() {\n    return new Text({\n      font: this.getFont(),\n      placement: this.getPlacement(),\n      maxAngle: this.getMaxAngle(),\n      overflow: this.getOverflow(),\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView(),\n      scale: this.getScale(),\n      text: this.getText(),\n      textAlign: this.getTextAlign(),\n      textBaseline: this.getTextBaseline(),\n      fill: this.getFill() ? this.getFill().clone() : undefined,\n      stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n      offsetX: this.getOffsetX(),\n      offsetY: this.getOffsetY(),\n      backgroundFill: this.getBackgroundFill() ? this.getBackgroundFill().clone() : undefined,\n      backgroundStroke: this.getBackgroundStroke() ? this.getBackgroundStroke().clone() : undefined\n    });\n  }\n\n  /**\n  * Get the `overflow` configuration.\n  * @return {boolean} Let text overflow the length of the path they follow.\n  * @api\n  */\n  getOverflow() {\n    return this.overflow_;\n  }\n\n  /**\n  * Get the font name.\n  * @return {string|undefined} Font.\n  * @api\n  */\n  getFont() {\n    return this.font_;\n  }\n\n  /**\n  * Get the maximum angle between adjacent characters.\n  * @return {number} Angle in radians.\n  * @api\n  */\n  getMaxAngle() {\n    return this.maxAngle_;\n  }\n\n  /**\n  * Get the label placement.\n  * @return {import(\"./TextPlacement.js\").default|string} Text placement.\n  * @api\n  */\n  getPlacement() {\n    return this.placement_;\n  }\n\n  /**\n  * Get the x-offset for the text.\n  * @return {number} Horizontal text offset.\n  * @api\n  */\n  getOffsetX() {\n    return this.offsetX_;\n  }\n\n  /**\n  * Get the y-offset for the text.\n  * @return {number} Vertical text offset.\n  * @api\n  */\n  getOffsetY() {\n    return this.offsetY_;\n  }\n\n  /**\n  * Get the fill style for the text.\n  * @return {import(\"./Fill.js\").default} Fill style.\n  * @api\n  */\n  getFill() {\n    return this.fill_;\n  }\n\n  /**\n  * Determine whether the text rotates with the map.\n  * @return {boolean|undefined} Rotate with map.\n  * @api\n  */\n  getRotateWithView() {\n    return this.rotateWithView_;\n  }\n\n  /**\n  * Get the text rotation.\n  * @return {number|undefined} Rotation.\n  * @api\n  */\n  getRotation() {\n    return this.rotation_;\n  }\n\n  /**\n  * Get the text scale.\n  * @return {number|undefined} Scale.\n  * @api\n  */\n  getScale() {\n    return this.scale_;\n  }\n\n  /**\n  * Get the stroke style for the text.\n  * @return {import(\"./Stroke.js\").default} Stroke style.\n  * @api\n  */\n  getStroke() {\n    return this.stroke_;\n  }\n\n  /**\n  * Get the text to be rendered.\n  * @return {string|undefined} Text.\n  * @api\n  */\n  getText() {\n    return this.text_;\n  }\n\n  /**\n  * Get the text alignment.\n  * @return {string|undefined} Text align.\n  * @api\n  */\n  getTextAlign() {\n    return this.textAlign_;\n  }\n\n  /**\n  * Get the text baseline.\n  * @return {string|undefined} Text baseline.\n  * @api\n  */\n  getTextBaseline() {\n    return this.textBaseline_;\n  }\n\n  /**\n  * Get the background fill style for the text.\n  * @return {import(\"./Fill.js\").default} Fill style.\n  * @api\n  */\n  getBackgroundFill() {\n    return this.backgroundFill_;\n  }\n\n  /**\n  * Get the background stroke style for the text.\n  * @return {import(\"./Stroke.js\").default} Stroke style.\n  * @api\n  */\n  getBackgroundStroke() {\n    return this.backgroundStroke_;\n  }\n\n  /**\n  * Get the padding for the text.\n  * @return {Array<number>} Padding.\n  * @api\n  */\n  getPadding() {\n    return this.padding_;\n  }\n\n  /**\n  * Set the `overflow` property.\n  *\n  * @param {boolean} overflow Let text overflow the path that it follows.\n  * @api\n  */\n  setOverflow(overflow) {\n    this.overflow_ = overflow;\n  }\n\n  /**\n  * Set the font.\n  *\n  * @param {string|undefined} font Font.\n  * @api\n  */\n  setFont(font) {\n    this.font_ = font;\n  }\n\n  /**\n  * Set the maximum angle between adjacent characters.\n  *\n  * @param {number} maxAngle Angle in radians.\n  * @api\n  */\n  setMaxAngle(maxAngle) {\n    this.maxAngle_ = maxAngle;\n  }\n\n  /**\n  * Set the x offset.\n  *\n  * @param {number} offsetX Horizontal text offset.\n  * @api\n  */\n  setOffsetX(offsetX) {\n    this.offsetX_ = offsetX;\n  }\n\n  /**\n  * Set the y offset.\n  *\n  * @param {number} offsetY Vertical text offset.\n  * @api\n  */\n  setOffsetY(offsetY) {\n    this.offsetY_ = offsetY;\n  }\n\n  /**\n  * Set the text placement.\n  *\n  * @param {import(\"./TextPlacement.js\").default|string} placement Placement.\n  * @api\n  */\n  setPlacement(placement) {\n    this.placement_ = placement;\n  }\n\n  /**\n  * Set the fill.\n  *\n  * @param {import(\"./Fill.js\").default} fill Fill style.\n  * @api\n  */\n  setFill(fill) {\n    this.fill_ = fill;\n  }\n\n  /**\n  * Set the rotation.\n  *\n  * @param {number|undefined} rotation Rotation.\n  * @api\n  */\n  setRotation(rotation) {\n    this.rotation_ = rotation;\n  }\n\n  /**\n  * Set the scale.\n  *\n  * @param {number|undefined} scale Scale.\n  * @api\n  */\n  setScale(scale) {\n    this.scale_ = scale;\n  }\n\n  /**\n  * Set the stroke.\n  *\n  * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n  * @api\n  */\n  setStroke(stroke) {\n    this.stroke_ = stroke;\n  }\n\n  /**\n  * Set the text.\n  *\n  * @param {string|undefined} text Text.\n  * @api\n  */\n  setText(text) {\n    this.text_ = text;\n  }\n\n  /**\n  * Set the text alignment.\n  *\n  * @param {string|undefined} textAlign Text align.\n  * @api\n  */\n  setTextAlign(textAlign) {\n    this.textAlign_ = textAlign;\n  }\n\n  /**\n  * Set the text baseline.\n  *\n  * @param {string|undefined} textBaseline Text baseline.\n  * @api\n  */\n  setTextBaseline(textBaseline) {\n    this.textBaseline_ = textBaseline;\n  }\n\n  /**\n  * Set the background fill.\n  *\n  * @param {import(\"./Fill.js\").default} fill Fill style.\n  * @api\n  */\n  setBackgroundFill(fill) {\n    this.backgroundFill_ = fill;\n  }\n\n  /**\n  * Set the background stroke.\n  *\n  * @param {import(\"./Stroke.js\").default} stroke Stroke style.\n  * @api\n  */\n  setBackgroundStroke(stroke) {\n    this.backgroundStroke_ = stroke;\n  }\n\n  /**\n  * Set the padding (`[top, right, bottom, left]`).\n  *\n  * @param {!Array<number>} padding Padding.\n  * @api\n  */\n  setPadding(padding) {\n    this.padding_ = padding;\n  }\n}\n\nexport default Text;\n","/**\n * Converts radians to to degrees.\n *\n * @param {number} angleInRadians Angle in radians.\n * @return {number} Angle in degrees.\n */\nexport function toDegrees(angleInRadians) {\n  return angleInRadians * 180 / Math.PI;\n}\n\n\n/**\n * Converts degrees to radians.\n *\n * @param {number} angleInDegrees Angle in degrees.\n * @return {number} Angle in radians.\n */\nexport function toRadians(angleInDegrees) {\n  return angleInDegrees * Math.PI / 180;\n}\n","/**\n * @module ol/layer/Group\n */\nimport {getUid} from '../util.js';\nimport Collection from '../Collection.js';\nimport CollectionEventType from '../CollectionEventType.js';\nimport {getChangeEventType} from '../Object.js';\nimport ObjectEventType from '../ObjectEventType.js';\nimport {assert} from '../asserts.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {getIntersection} from '../extent.js';\nimport BaseLayer from './Base.js';\nimport {assign, clear} from '../obj.js';\nimport SourceState from '../source/State.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {Array<import(\"./Base.js\").default>|import(\"../Collection.js\").default<import(\"./Base.js\").default>} [layers] Child layers.\n */\n\n\n/**\n * @enum {string}\n * @private\n */\nconst Property = {\n  LAYERS: 'layers'\n};\n\n\n/**\n * @classdesc\n * A {@link module:ol/Collection~Collection} of layers that are handled together.\n *\n * A generic `change` event is triggered when the group/Collection changes.\n *\n * @api\n */\nclass LayerGroup extends BaseLayer {\n  /**\n   * @param {Options=} opt_options Layer options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || {};\n    const baseOptions = /** @type {Options} */ (assign({}, options));\n    delete baseOptions.layers;\n\n    let layers = options.layers;\n\n    super(baseOptions);\n\n    /**\n     * @private\n     * @type {Array<import(\"../events.js\").EventsKey>}\n     */\n    this.layersListenerKeys_ = [];\n\n    /**\n     * @private\n     * @type {Object<string, Array<import(\"../events.js\").EventsKey>>}\n     */\n    this.listenerKeys_ = {};\n\n    listen(this,\n      getChangeEventType(Property.LAYERS),\n      this.handleLayersChanged_, this);\n\n    if (layers) {\n      if (Array.isArray(layers)) {\n        layers = new Collection(layers.slice(), {unique: true});\n      } else {\n        assert(typeof /** @type {?} */ (layers).getArray === 'function',\n          43); // Expected `layers` to be an array or a `Collection`\n      }\n    } else {\n      layers = new Collection(undefined, {unique: true});\n    }\n\n    this.setLayers(layers);\n\n  }\n\n  /**\n   * @private\n   */\n  handleLayerChange_() {\n    this.changed();\n  }\n\n  /**\n   * @private\n   */\n  handleLayersChanged_() {\n    this.layersListenerKeys_.forEach(unlistenByKey);\n    this.layersListenerKeys_.length = 0;\n\n    const layers = this.getLayers();\n    this.layersListenerKeys_.push(\n      listen(layers, CollectionEventType.ADD, this.handleLayersAdd_, this),\n      listen(layers, CollectionEventType.REMOVE, this.handleLayersRemove_, this)\n    );\n\n    for (const id in this.listenerKeys_) {\n      this.listenerKeys_[id].forEach(unlistenByKey);\n    }\n    clear(this.listenerKeys_);\n\n    const layersArray = layers.getArray();\n    for (let i = 0, ii = layersArray.length; i < ii; i++) {\n      const layer = layersArray[i];\n      this.listenerKeys_[getUid(layer)] = [\n        listen(layer, ObjectEventType.PROPERTYCHANGE, this.handleLayerChange_, this),\n        listen(layer, EventType.CHANGE, this.handleLayerChange_, this)\n      ];\n    }\n\n    this.changed();\n  }\n\n  /**\n   * @param {import(\"../Collection.js\").CollectionEvent} collectionEvent CollectionEvent.\n   * @private\n   */\n  handleLayersAdd_(collectionEvent) {\n    const layer = /** @type {import(\"./Base.js\").default} */ (collectionEvent.element);\n    this.listenerKeys_[getUid(layer)] = [\n      listen(layer, ObjectEventType.PROPERTYCHANGE, this.handleLayerChange_, this),\n      listen(layer, EventType.CHANGE, this.handleLayerChange_, this)\n    ];\n    this.changed();\n  }\n\n  /**\n   * @param {import(\"../Collection.js\").CollectionEvent} collectionEvent CollectionEvent.\n   * @private\n   */\n  handleLayersRemove_(collectionEvent) {\n    const layer = /** @type {import(\"./Base.js\").default} */ (collectionEvent.element);\n    const key = getUid(layer);\n    this.listenerKeys_[key].forEach(unlistenByKey);\n    delete this.listenerKeys_[key];\n    this.changed();\n  }\n\n  /**\n   * Returns the {@link module:ol/Collection collection} of {@link module:ol/layer/Layer~Layer layers}\n   * in this group.\n   * @return {!import(\"../Collection.js\").default<import(\"./Base.js\").default>} Collection of\n   *   {@link module:ol/layer/Base layers} that are part of this group.\n   * @observable\n   * @api\n   */\n  getLayers() {\n    return (\n      /** @type {!import(\"../Collection.js\").default<import(\"./Base.js\").default>} */ (this.get(Property.LAYERS))\n    );\n  }\n\n  /**\n   * Set the {@link module:ol/Collection collection} of {@link module:ol/layer/Layer~Layer layers}\n   * in this group.\n   * @param {!import(\"../Collection.js\").default<import(\"./Base.js\").default>} layers Collection of\n   *   {@link module:ol/layer/Base layers} that are part of this group.\n   * @observable\n   * @api\n   */\n  setLayers(layers) {\n    this.set(Property.LAYERS, layers);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getLayersArray(opt_array) {\n    const array = opt_array !== undefined ? opt_array : [];\n    this.getLayers().forEach(function(layer) {\n      layer.getLayersArray(array);\n    });\n    return array;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getLayerStatesArray(opt_states) {\n    const states = opt_states !== undefined ? opt_states : [];\n\n    const pos = states.length;\n\n    this.getLayers().forEach(function(layer) {\n      layer.getLayerStatesArray(states);\n    });\n\n    const ownLayerState = this.getLayerState();\n    for (let i = pos, ii = states.length; i < ii; i++) {\n      const layerState = states[i];\n      layerState.opacity *= ownLayerState.opacity;\n      layerState.visible = layerState.visible && ownLayerState.visible;\n      layerState.maxResolution = Math.min(\n        layerState.maxResolution, ownLayerState.maxResolution);\n      layerState.minResolution = Math.max(\n        layerState.minResolution, ownLayerState.minResolution);\n      if (ownLayerState.extent !== undefined) {\n        if (layerState.extent !== undefined) {\n          layerState.extent = getIntersection(layerState.extent, ownLayerState.extent);\n        } else {\n          layerState.extent = ownLayerState.extent;\n        }\n      }\n    }\n\n    return states;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSourceState() {\n    return SourceState.READY;\n  }\n}\n\n\nexport default LayerGroup;\n","/**\n * @module ol/style/Circle\n */\n\nimport RegularShape from './RegularShape.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {number} radius Circle radius.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {import(\"./AtlasManager.js\").default} [atlasManager] The atlas manager to use for this circle.\n * When using WebGL it is recommended to use an atlas manager to avoid texture switching. If an atlas manager is given,\n * the circle is added to an atlas. By default no atlas manager is used.\n */\n\n\n/**\n * @classdesc\n * Set circle style for vector features.\n * @api\n */\nclass CircleStyle extends RegularShape {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || /** @type {Options} */ ({});\n\n    super({\n      points: Infinity,\n      fill: options.fill,\n      radius: options.radius,\n      stroke: options.stroke,\n      atlasManager: options.atlasManager\n    });\n\n  }\n\n  /**\n  * Clones the style.  If an atlasmanager was provided to the original style it will be used in the cloned style, too.\n  * @return {CircleStyle} The cloned style.\n  * @override\n  * @api\n  */\n  clone() {\n    const style = new CircleStyle({\n      fill: this.getFill() ? this.getFill().clone() : undefined,\n      stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n      radius: this.getRadius(),\n      atlasManager: this.atlasManager_\n    });\n    style.setOpacity(this.getOpacity());\n    style.setScale(this.getScale());\n    return style;\n  }\n\n  /**\n  * Set the circle radius.\n  *\n  * @param {number} radius Circle radius.\n  * @api\n  */\n  setRadius(radius) {\n    this.radius_ = radius;\n    this.render_(this.atlasManager_);\n  }\n}\n\n\nexport default CircleStyle;\n","/**\n * @module ol/style/RegularShape\n */\n\nimport {asString} from '../color.js';\nimport {asColorLike} from '../colorlike.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport {CANVAS_LINE_DASH} from '../has.js';\nimport ImageState from '../ImageState.js';\nimport {defaultStrokeStyle, defaultFillStyle, defaultLineCap, defaultLineWidth, defaultLineJoin, defaultMiterLimit} from '../render/canvas.js';\nimport ImageStyle from './Image.js';\n\n\n/**\n * Specify radius for regular polygons, or radius1 and radius2 for stars.\n * @typedef {Object} Options\n * @property {import(\"./Fill.js\").default} [fill] Fill style.\n * @property {number} points Number of points for stars and regular polygons. In case of a polygon, the number of points\n * is the number of sides.\n * @property {number} [radius] Radius of a regular polygon.\n * @property {number} [radius1] Outer radius of a star.\n * @property {number} [radius2] Inner radius of a star.\n * @property {number} [angle=0] Shape's angle in radians. A value of 0 will have one of the shape's point facing up.\n * @property {import(\"./Stroke.js\").default} [stroke] Stroke style.\n * @property {number} [rotation=0] Rotation in radians (positive rotation clockwise).\n * @property {boolean} [rotateWithView=false] Whether to rotate the shape with the view.\n * @property {import(\"./AtlasManager.js\").default} [atlasManager] The atlas manager to use for this symbol. When\n * using WebGL it is recommended to use an atlas manager to avoid texture switching. If an atlas manager is given, the\n * symbol is added to an atlas. By default no atlas manager is used.\n */\n\n\n/**\n * @typedef {Object} RenderOptions\n * @property {import(\"../colorlike.js\").ColorLike} [strokeStyle]\n * @property {number} strokeWidth\n * @property {number} size\n * @property {string} lineCap\n * @property {Array<number>} lineDash\n * @property {number} lineDashOffset\n * @property {string} lineJoin\n * @property {number} miterLimit\n */\n\n\n/**\n * @classdesc\n * Set regular shape style for vector features. The resulting shape will be\n * a regular polygon when `radius` is provided, or a star when `radius1` and\n * `radius2` are provided.\n * @api\n */\nclass RegularShape extends ImageStyle {\n  /**\n   * @param {Options} options Options.\n   */\n  constructor(options) {\n    /**\n     * @type {boolean}\n     */\n    const rotateWithView = options.rotateWithView !== undefined ?\n      options.rotateWithView : false;\n\n    super({\n      opacity: 1,\n      rotateWithView: rotateWithView,\n      rotation: options.rotation !== undefined ? options.rotation : 0,\n      scale: 1\n    });\n\n    /**\n     * @private\n     * @type {Array<string|number>}\n     */\n    this.checksums_ = null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = null;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.hitDetectionCanvas_ = null;\n\n    /**\n     * @private\n     * @type {import(\"./Fill.js\").default}\n     */\n    this.fill_ = options.fill !== undefined ? options.fill : null;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.origin_ = [0, 0];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.points_ = options.points;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.radius_ = /** @type {number} */ (options.radius !== undefined ?\n      options.radius : options.radius1);\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.radius2_ = options.radius2;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.angle_ = options.angle !== undefined ? options.angle : 0;\n\n    /**\n     * @private\n     * @type {import(\"./Stroke.js\").default}\n     */\n    this.stroke_ = options.stroke !== undefined ? options.stroke : null;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.anchor_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.size_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.imageSize_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.hitDetectionImageSize_ = null;\n\n    /**\n     * @protected\n     * @type {import(\"./AtlasManager.js\").default|undefined}\n     */\n    this.atlasManager_ = options.atlasManager;\n\n    this.render_(this.atlasManager_);\n\n  }\n\n  /**\n   * Clones the style. If an atlasmanager was provided to the original style it will be used in the cloned style, too.\n   * @return {RegularShape} The cloned style.\n   * @api\n   */\n  clone() {\n    const style = new RegularShape({\n      fill: this.getFill() ? this.getFill().clone() : undefined,\n      points: this.getPoints(),\n      radius: this.getRadius(),\n      radius2: this.getRadius2(),\n      angle: this.getAngle(),\n      stroke: this.getStroke() ? this.getStroke().clone() : undefined,\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView(),\n      atlasManager: this.atlasManager_\n    });\n    style.setOpacity(this.getOpacity());\n    style.setScale(this.getScale());\n    return style;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getAnchor() {\n    return this.anchor_;\n  }\n\n  /**\n   * Get the angle used in generating the shape.\n   * @return {number} Shape's rotation in radians.\n   * @api\n   */\n  getAngle() {\n    return this.angle_;\n  }\n\n  /**\n   * Get the fill style for the shape.\n   * @return {import(\"./Fill.js\").default} Fill style.\n   * @api\n   */\n  getFill() {\n    return this.fill_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getHitDetectionImage(pixelRatio) {\n    return this.hitDetectionCanvas_;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getImage(pixelRatio) {\n    return this.canvas_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImageSize() {\n    return this.imageSize_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getHitDetectionImageSize() {\n    return this.hitDetectionImageSize_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImageState() {\n    return ImageState.LOADED;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getOrigin() {\n    return this.origin_;\n  }\n\n  /**\n   * Get the number of points for generating the shape.\n   * @return {number} Number of points for stars and regular polygons.\n   * @api\n   */\n  getPoints() {\n    return this.points_;\n  }\n\n  /**\n   * Get the (primary) radius for the shape.\n   * @return {number} Radius.\n   * @api\n   */\n  getRadius() {\n    return this.radius_;\n  }\n\n  /**\n   * Get the secondary radius for the shape.\n   * @return {number|undefined} Radius2.\n   * @api\n   */\n  getRadius2() {\n    return this.radius2_;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getSize() {\n    return this.size_;\n  }\n\n  /**\n   * Get the stroke style for the shape.\n   * @return {import(\"./Stroke.js\").default} Stroke style.\n   * @api\n   */\n  getStroke() {\n    return this.stroke_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  listenImageChange(listener, thisArg) {\n    return undefined;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  load() {}\n\n  /**\n   * @inheritDoc\n   */\n  unlistenImageChange(listener, thisArg) {}\n\n  /**\n   * @protected\n   * @param {import(\"./AtlasManager.js\").default|undefined} atlasManager An atlas manager.\n   */\n  render_(atlasManager) {\n    let imageSize;\n    let lineCap = '';\n    let lineJoin = '';\n    let miterLimit = 0;\n    let lineDash = null;\n    let lineDashOffset = 0;\n    let strokeStyle;\n    let strokeWidth = 0;\n\n    if (this.stroke_) {\n      strokeStyle = this.stroke_.getColor();\n      if (strokeStyle === null) {\n        strokeStyle = defaultStrokeStyle;\n      }\n      strokeStyle = asColorLike(strokeStyle);\n      strokeWidth = this.stroke_.getWidth();\n      if (strokeWidth === undefined) {\n        strokeWidth = defaultLineWidth;\n      }\n      lineDash = this.stroke_.getLineDash();\n      lineDashOffset = this.stroke_.getLineDashOffset();\n      if (!CANVAS_LINE_DASH) {\n        lineDash = null;\n        lineDashOffset = 0;\n      }\n      lineJoin = this.stroke_.getLineJoin();\n      if (lineJoin === undefined) {\n        lineJoin = defaultLineJoin;\n      }\n      lineCap = this.stroke_.getLineCap();\n      if (lineCap === undefined) {\n        lineCap = defaultLineCap;\n      }\n      miterLimit = this.stroke_.getMiterLimit();\n      if (miterLimit === undefined) {\n        miterLimit = defaultMiterLimit;\n      }\n    }\n\n    let size = 2 * (this.radius_ + strokeWidth) + 1;\n\n    /** @type {RenderOptions} */\n    const renderOptions = {\n      strokeStyle: strokeStyle,\n      strokeWidth: strokeWidth,\n      size: size,\n      lineCap: lineCap,\n      lineDash: lineDash,\n      lineDashOffset: lineDashOffset,\n      lineJoin: lineJoin,\n      miterLimit: miterLimit\n    };\n\n    if (atlasManager === undefined) {\n      // no atlas manager is used, create a new canvas\n      const context = createCanvasContext2D(size, size);\n      this.canvas_ = context.canvas;\n\n      // canvas.width and height are rounded to the closest integer\n      size = this.canvas_.width;\n      imageSize = size;\n\n      this.draw_(renderOptions, context, 0, 0);\n\n      this.createHitDetectionCanvas_(renderOptions);\n    } else {\n      // an atlas manager is used, add the symbol to an atlas\n      size = Math.round(size);\n\n      const hasCustomHitDetectionImage = !this.fill_;\n      let renderHitDetectionCallback;\n      if (hasCustomHitDetectionImage) {\n        // render the hit-detection image into a separate atlas image\n        renderHitDetectionCallback =\n            this.drawHitDetectionCanvas_.bind(this, renderOptions);\n      }\n\n      const id = this.getChecksum();\n      const info = atlasManager.add(\n        id, size, size, this.draw_.bind(this, renderOptions),\n        renderHitDetectionCallback);\n\n      this.canvas_ = info.image;\n      this.origin_ = [info.offsetX, info.offsetY];\n      imageSize = info.image.width;\n\n      if (hasCustomHitDetectionImage) {\n        this.hitDetectionCanvas_ = info.hitImage;\n        this.hitDetectionImageSize_ =\n            [info.hitImage.width, info.hitImage.height];\n      } else {\n        this.hitDetectionCanvas_ = this.canvas_;\n        this.hitDetectionImageSize_ = [imageSize, imageSize];\n      }\n    }\n\n    this.anchor_ = [size / 2, size / 2];\n    this.size_ = [size, size];\n    this.imageSize_ = [imageSize, imageSize];\n  }\n\n  /**\n   * @private\n   * @param {RenderOptions} renderOptions Render options.\n   * @param {CanvasRenderingContext2D} context The rendering context.\n   * @param {number} x The origin for the symbol (x).\n   * @param {number} y The origin for the symbol (y).\n   */\n  draw_(renderOptions, context, x, y) {\n    let i, angle0, radiusC;\n    // reset transform\n    context.setTransform(1, 0, 0, 1, 0, 0);\n\n    // then move to (x, y)\n    context.translate(x, y);\n\n    context.beginPath();\n\n    let points = this.points_;\n    if (points === Infinity) {\n      context.arc(\n        renderOptions.size / 2, renderOptions.size / 2,\n        this.radius_, 0, 2 * Math.PI, true);\n    } else {\n      const radius2 = (this.radius2_ !== undefined) ? this.radius2_\n        : this.radius_;\n      if (radius2 !== this.radius_) {\n        points = 2 * points;\n      }\n      for (i = 0; i <= points; i++) {\n        angle0 = i * 2 * Math.PI / points - Math.PI / 2 + this.angle_;\n        radiusC = i % 2 === 0 ? this.radius_ : radius2;\n        context.lineTo(renderOptions.size / 2 + radiusC * Math.cos(angle0),\n          renderOptions.size / 2 + radiusC * Math.sin(angle0));\n      }\n    }\n\n\n    if (this.fill_) {\n      let color = this.fill_.getColor();\n      if (color === null) {\n        color = defaultFillStyle;\n      }\n      context.fillStyle = asColorLike(color);\n      context.fill();\n    }\n    if (this.stroke_) {\n      context.strokeStyle = renderOptions.strokeStyle;\n      context.lineWidth = renderOptions.strokeWidth;\n      if (renderOptions.lineDash) {\n        context.setLineDash(renderOptions.lineDash);\n        context.lineDashOffset = renderOptions.lineDashOffset;\n      }\n      context.lineCap = /** @type {CanvasLineCap} */ (renderOptions.lineCap);\n      context.lineJoin = /** @type {CanvasLineJoin} */ (renderOptions.lineJoin);\n      context.miterLimit = renderOptions.miterLimit;\n      context.stroke();\n    }\n    context.closePath();\n  }\n\n  /**\n   * @private\n   * @param {RenderOptions} renderOptions Render options.\n   */\n  createHitDetectionCanvas_(renderOptions) {\n    this.hitDetectionImageSize_ = [renderOptions.size, renderOptions.size];\n    if (this.fill_) {\n      this.hitDetectionCanvas_ = this.canvas_;\n      return;\n    }\n\n    // if no fill style is set, create an extra hit-detection image with a\n    // default fill style\n    const context = createCanvasContext2D(renderOptions.size, renderOptions.size);\n    this.hitDetectionCanvas_ = context.canvas;\n\n    this.drawHitDetectionCanvas_(renderOptions, context, 0, 0);\n  }\n\n  /**\n   * @private\n   * @param {RenderOptions} renderOptions Render options.\n   * @param {CanvasRenderingContext2D} context The context.\n   * @param {number} x The origin for the symbol (x).\n   * @param {number} y The origin for the symbol (y).\n   */\n  drawHitDetectionCanvas_(renderOptions, context, x, y) {\n    // reset transform\n    context.setTransform(1, 0, 0, 1, 0, 0);\n\n    // then move to (x, y)\n    context.translate(x, y);\n\n    context.beginPath();\n\n    let points = this.points_;\n    if (points === Infinity) {\n      context.arc(\n        renderOptions.size / 2, renderOptions.size / 2,\n        this.radius_, 0, 2 * Math.PI, true);\n    } else {\n      const radius2 = (this.radius2_ !== undefined) ? this.radius2_\n        : this.radius_;\n      if (radius2 !== this.radius_) {\n        points = 2 * points;\n      }\n      let i, radiusC, angle0;\n      for (i = 0; i <= points; i++) {\n        angle0 = i * 2 * Math.PI / points - Math.PI / 2 + this.angle_;\n        radiusC = i % 2 === 0 ? this.radius_ : radius2;\n        context.lineTo(renderOptions.size / 2 + radiusC * Math.cos(angle0),\n          renderOptions.size / 2 + radiusC * Math.sin(angle0));\n      }\n    }\n\n    context.fillStyle = asString(defaultFillStyle);\n    context.fill();\n    if (this.stroke_) {\n      context.strokeStyle = renderOptions.strokeStyle;\n      context.lineWidth = renderOptions.strokeWidth;\n      if (renderOptions.lineDash) {\n        context.setLineDash(renderOptions.lineDash);\n        context.lineDashOffset = renderOptions.lineDashOffset;\n      }\n      context.stroke();\n    }\n    context.closePath();\n  }\n\n  /**\n   * @return {string} The checksum.\n   */\n  getChecksum() {\n    const strokeChecksum = this.stroke_ ?\n      this.stroke_.getChecksum() : '-';\n    const fillChecksum = this.fill_ ?\n      this.fill_.getChecksum() : '-';\n\n    const recalculate = !this.checksums_ ||\n        (strokeChecksum != this.checksums_[1] ||\n        fillChecksum != this.checksums_[2] ||\n        this.radius_ != this.checksums_[3] ||\n        this.radius2_ != this.checksums_[4] ||\n        this.angle_ != this.checksums_[5] ||\n        this.points_ != this.checksums_[6]);\n\n    if (recalculate) {\n      const checksum = 'r' + strokeChecksum + fillChecksum +\n          (this.radius_ !== undefined ? this.radius_.toString() : '-') +\n          (this.radius2_ !== undefined ? this.radius2_.toString() : '-') +\n          (this.angle_ !== undefined ? this.angle_.toString() : '-') +\n          (this.points_ !== undefined ? this.points_.toString() : '-');\n      this.checksums_ = [checksum, strokeChecksum, fillChecksum,\n        this.radius_, this.radius2_, this.angle_, this.points_];\n    }\n\n    return /** @type {string} */ (this.checksums_[0]);\n  }\n}\n\n\nexport default RegularShape;\n","/**\n * @module ol/proj/transforms\n */\nimport {isEmpty} from '../obj.js';\n\n\n/**\n * @private\n * @type {!Object<string, Object<string, import(\"../proj.js\").TransformFunction>>}\n */\nlet transforms = {};\n\n\n/**\n * Clear the transform cache.\n */\nexport function clear() {\n  transforms = {};\n}\n\n\n/**\n * Registers a conversion function to convert coordinates from the source\n * projection to the destination projection.\n *\n * @param {import(\"./Projection.js\").default} source Source.\n * @param {import(\"./Projection.js\").default} destination Destination.\n * @param {import(\"../proj.js\").TransformFunction} transformFn Transform.\n */\nexport function add(source, destination, transformFn) {\n  const sourceCode = source.getCode();\n  const destinationCode = destination.getCode();\n  if (!(sourceCode in transforms)) {\n    transforms[sourceCode] = {};\n  }\n  transforms[sourceCode][destinationCode] = transformFn;\n}\n\n\n/**\n * Unregisters the conversion function to convert coordinates from the source\n * projection to the destination projection.  This method is used to clean up\n * cached transforms during testing.\n *\n * @param {import(\"./Projection.js\").default} source Source projection.\n * @param {import(\"./Projection.js\").default} destination Destination projection.\n * @return {import(\"../proj.js\").TransformFunction} transformFn The unregistered transform.\n */\nexport function remove(source, destination) {\n  const sourceCode = source.getCode();\n  const destinationCode = destination.getCode();\n  const transform = transforms[sourceCode][destinationCode];\n  delete transforms[sourceCode][destinationCode];\n  if (isEmpty(transforms[sourceCode])) {\n    delete transforms[sourceCode];\n  }\n  return transform;\n}\n\n\n/**\n * Get a transform given a source code and a destination code.\n * @param {string} sourceCode The code for the source projection.\n * @param {string} destinationCode The code for the destination projection.\n * @return {import(\"../proj.js\").TransformFunction|undefined} The transform function (if found).\n */\nexport function get(sourceCode, destinationCode) {\n  let transform;\n  if (sourceCode in transforms && destinationCode in transforms[sourceCode]) {\n    transform = transforms[sourceCode][destinationCode];\n  }\n  return transform;\n}\n","/**\n * @module ol/Tile\n */\nimport TileState from './TileState.js';\nimport {easeIn} from './easing.js';\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\n\n\n/**\n * A function that takes an {@link module:ol/Tile} for the tile and a\n * `{string}` for the url as arguments. The default is\n * ```js\n * source.setTileLoadFunction(function(tile, src) {\n *   tile.getImage().src = src;\n * });\n * ```\n * For more fine grained control, the load function can use fetch or XMLHttpRequest and involve\n * error handling:\n *\n * ```js\n * import TileState from 'ol/TileState';\n *\n * source.setTileLoadFunction(function(tile, src) {\n *   var xhr = new XMLHttpRequest();\n *   xhr.responseType = 'blob';\n *   xhr.addEventListener('loadend', function (evt) {\n *     var data = this.response;\n *     if (data !== undefined) {\n *       tile.getImage().src = URL.createObjectURL(data);\n *     } else {\n *       tile.setState(TileState.ERROR);\n *     }\n *   });\n *   xhr.addEventListener('error', function () {\n *     tile.setState(TileState.ERROR);\n *   });\n *   xhr.open('GET', src);\n *   xhr.send();\n * });\n * ```\n *\n * @typedef {function(Tile, string)} LoadFunction\n * @api\n */\n\n/**\n * {@link module:ol/source/Tile~Tile} sources use a function of this type to get\n * the url that provides a tile for a given tile coordinate.\n *\n * This function takes an {@link module:ol/tilecoord~TileCoord} for the tile\n * coordinate, a `{number}` representing the pixel ratio and a\n * {@link module:ol/proj/Projection} for the projection  as arguments\n * and returns a `{string}` representing the tile URL, or undefined if no tile\n * should be requested for the passed tile coordinate.\n *\n * @typedef {function(import(\"./tilecoord.js\").TileCoord, number,\n *           import(\"./proj/Projection.js\").default): (string|undefined)} UrlFunction\n * @api\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [transition=250] A duration for tile opacity\n * transitions in milliseconds. A duration of 0 disables the opacity transition.\n * @api\n */\n\n\n/**\n * @classdesc\n * Base class for tiles.\n *\n * @abstract\n */\nclass Tile extends EventTarget {\n\n  /**\n   * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {TileState} state State.\n   * @param {Options=} opt_options Tile options.\n   */\n  constructor(tileCoord, state, opt_options) {\n    super();\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n     * @type {import(\"./tilecoord.js\").TileCoord}\n     */\n    this.tileCoord = tileCoord;\n\n    /**\n     * @protected\n     * @type {TileState}\n     */\n    this.state = state;\n\n    /**\n     * An \"interim\" tile for this tile. The interim tile may be used while this\n     * one is loading, for \"smooth\" transitions when changing params/dimensions\n     * on the source.\n     * @type {Tile}\n     */\n    this.interimTile = null;\n\n    /**\n     * A key assigned to the tile. This is used by the tile source to determine\n     * if this tile can effectively be used, or if a new tile should be created\n     * and this one be used as an interim tile for this new tile.\n     * @type {string}\n     */\n    this.key = '';\n\n    /**\n     * The duration for the opacity transition.\n     * @type {number}\n     */\n    this.transition_ = options.transition === undefined ? 250 : options.transition;\n\n    /**\n     * Lookup of start times for rendering transitions.  If the start time is\n     * equal to -1, the transition is complete.\n     * @type {Object<string, number>}\n     */\n    this.transitionStarts_ = {};\n\n  }\n\n  /**\n   * @protected\n   */\n  changed() {\n    this.dispatchEvent(EventType.CHANGE);\n  }\n\n  /**\n   * @return {string} Key.\n   */\n  getKey() {\n    return this.key + '/' + this.tileCoord;\n  }\n\n  /**\n   * Get the interim tile most suitable for rendering using the chain of interim\n   * tiles. This corresponds to the  most recent tile that has been loaded, if no\n   * such tile exists, the original tile is returned.\n   * @return {!Tile} Best tile for rendering.\n   */\n  getInterimTile() {\n    if (!this.interimTile) {\n      //empty chain\n      return this;\n    }\n    let tile = this.interimTile;\n\n    // find the first loaded tile and return it. Since the chain is sorted in\n    // decreasing order of creation time, there is no need to search the remainder\n    // of the list (all those tiles correspond to older requests and will be\n    // cleaned up by refreshInterimChain)\n    do {\n      if (tile.getState() == TileState.LOADED) {\n        return tile;\n      }\n      tile = tile.interimTile;\n    } while (tile);\n\n    // we can not find a better tile\n    return this;\n  }\n\n  /**\n   * Goes through the chain of interim tiles and discards sections of the chain\n   * that are no longer relevant.\n   */\n  refreshInterimChain() {\n    if (!this.interimTile) {\n      return;\n    }\n\n    let tile = this.interimTile;\n    let prev = /** @type {Tile} */ (this);\n\n    do {\n      if (tile.getState() == TileState.LOADED) {\n        //we have a loaded tile, we can discard the rest of the list\n        //we would could abort any LOADING tile request\n        //older than this tile (i.e. any LOADING tile following this entry in the chain)\n        tile.interimTile = null;\n        break;\n      } else if (tile.getState() == TileState.LOADING) {\n        //keep this LOADING tile any loaded tiles later in the chain are\n        //older than this tile, so we're still interested in the request\n        prev = tile;\n      } else if (tile.getState() == TileState.IDLE) {\n        //the head of the list is the most current tile, we don't need\n        //to start any other requests for this chain\n        prev.interimTile = tile.interimTile;\n      } else {\n        prev = tile;\n      }\n      tile = prev.interimTile;\n    } while (tile);\n  }\n\n  /**\n   * Get the tile coordinate for this tile.\n   * @return {import(\"./tilecoord.js\").TileCoord} The tile coordinate.\n   * @api\n   */\n  getTileCoord() {\n    return this.tileCoord;\n  }\n\n  /**\n   * @return {TileState} State.\n   */\n  getState() {\n    return this.state;\n  }\n\n  /**\n   * Sets the state of this tile. If you write your own {@link module:ol/Tile~LoadFunction tileLoadFunction} ,\n   * it is important to set the state correctly to {@link module:ol/TileState~ERROR}\n   * when the tile cannot be loaded. Otherwise the tile cannot be removed from\n   * the tile queue and will block other requests.\n   * @param {TileState} state State.\n   * @api\n   */\n  setState(state) {\n    this.state = state;\n    this.changed();\n  }\n\n  /**\n   * Load the image or retry if loading previously failed.\n   * Loading is taken care of by the tile queue, and calling this method is\n   * only needed for preloading or for reloading in case of an error.\n   * @abstract\n   * @api\n   */\n  load() {}\n\n  /**\n   * Get the alpha value for rendering.\n   * @param {string} id An id for the renderer.\n   * @param {number} time The render frame time.\n   * @return {number} A number between 0 and 1.\n   */\n  getAlpha(id, time) {\n    if (!this.transition_) {\n      return 1;\n    }\n\n    let start = this.transitionStarts_[id];\n    if (!start) {\n      start = time;\n      this.transitionStarts_[id] = start;\n    } else if (start === -1) {\n      return 1;\n    }\n\n    const delta = time - start + (1000 / 60); // avoid rendering at 0\n    if (delta >= this.transition_) {\n      return 1;\n    }\n    return easeIn(delta / this.transition_);\n  }\n\n  /**\n   * Determine if a tile is in an alpha transition.  A tile is considered in\n   * transition if tile.getAlpha() has not yet been called or has been called\n   * and returned 1.\n   * @param {string} id An id for the renderer.\n   * @return {boolean} The tile is in transition.\n   */\n  inTransition(id) {\n    if (!this.transition_) {\n      return false;\n    }\n    return this.transitionStarts_[id] !== -1;\n  }\n\n  /**\n   * Mark a transition as complete.\n   * @param {string} id An id for the renderer.\n   */\n  endTransition(id) {\n    if (this.transition_) {\n      this.transitionStarts_[id] = -1;\n    }\n  }\n}\n\n\nexport default Tile;\n","/**\n * @module ol/ImageTile\n */\nimport Tile from './Tile.js';\nimport TileState from './TileState.js';\nimport {createCanvasContext2D} from './dom.js';\nimport {listenOnce, unlistenByKey} from './events.js';\nimport EventType from './events/EventType.js';\n\n\nclass ImageTile extends Tile {\n\n  /**\n   * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {TileState} state State.\n   * @param {string} src Image source URI.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {import(\"./Tile.js\").LoadFunction} tileLoadFunction Tile load function.\n   * @param {import(\"./Tile.js\").Options=} opt_options Tile options.\n   */\n  constructor(tileCoord, state, src, crossOrigin, tileLoadFunction, opt_options) {\n\n    super(tileCoord, state, opt_options);\n\n    /**\n     * @private\n     * @type {?string}\n     */\n    this.crossOrigin_ = crossOrigin;\n\n    /**\n     * Image URI\n     *\n     * @private\n     * @type {string}\n     */\n    this.src_ = src;\n\n    /**\n     * @private\n     * @type {HTMLImageElement|HTMLCanvasElement}\n     */\n    this.image_ = new Image();\n    if (crossOrigin !== null) {\n      this.image_.crossOrigin = crossOrigin;\n    }\n\n    /**\n     * @private\n     * @type {Array<import(\"./events.js\").EventsKey>}\n     */\n    this.imageListenerKeys_ = null;\n\n    /**\n     * @private\n     * @type {import(\"./Tile.js\").LoadFunction}\n     */\n    this.tileLoadFunction_ = tileLoadFunction;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    if (this.state == TileState.LOADING) {\n      this.unlistenImage_();\n      this.image_ = getBlankImage();\n    }\n    if (this.interimTile) {\n      this.interimTile.dispose();\n    }\n    this.state = TileState.ABORT;\n    this.changed();\n    super.disposeInternal();\n  }\n\n  /**\n   * Get the HTML image element for this tile (may be a Canvas, Image, or Video).\n   * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n   * @api\n   */\n  getImage() {\n    return this.image_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getKey() {\n    return this.src_;\n  }\n\n  /**\n   * Tracks loading or read errors.\n   *\n   * @private\n   */\n  handleImageError_() {\n    this.state = TileState.ERROR;\n    this.unlistenImage_();\n    this.image_ = getBlankImage();\n    this.changed();\n  }\n\n  /**\n   * Tracks successful image load.\n   *\n   * @private\n   */\n  handleImageLoad_() {\n    const image = /** @type {HTMLImageElement} */ (this.image_);\n    if (image.naturalWidth && image.naturalHeight) {\n      this.state = TileState.LOADED;\n    } else {\n      this.state = TileState.EMPTY;\n    }\n    this.unlistenImage_();\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  load() {\n    if (this.state == TileState.ERROR) {\n      this.state = TileState.IDLE;\n      this.image_ = new Image();\n      if (this.crossOrigin_ !== null) {\n        this.image_.crossOrigin = this.crossOrigin_;\n      }\n    }\n    if (this.state == TileState.IDLE) {\n      this.state = TileState.LOADING;\n      this.changed();\n      this.imageListenerKeys_ = [\n        listenOnce(this.image_, EventType.ERROR,\n          this.handleImageError_, this),\n        listenOnce(this.image_, EventType.LOAD,\n          this.handleImageLoad_, this)\n      ];\n      this.tileLoadFunction_(this, this.src_);\n    }\n  }\n\n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n  unlistenImage_() {\n    this.imageListenerKeys_.forEach(unlistenByKey);\n    this.imageListenerKeys_ = null;\n  }\n}\n\n\n/**\n * Get a 1-pixel blank image.\n * @return {HTMLCanvasElement} Blank image.\n */\nfunction getBlankImage() {\n  const ctx = createCanvasContext2D(1, 1);\n  ctx.fillStyle = 'rgba(0,0,0,0)';\n  ctx.fillRect(0, 0, 1, 1);\n  return ctx.canvas;\n}\n\nexport default ImageTile;\n","/**\n * @module ol/TileCache\n */\nimport LRUCache from './structs/LRUCache.js';\nimport {fromKey, getKey} from './tilecoord.js';\n\nclass TileCache extends LRUCache {\n\n  /**\n   * @param {number=} opt_highWaterMark High water mark.\n   */\n  constructor(opt_highWaterMark) {\n\n    super(opt_highWaterMark);\n\n  }\n\n  /**\n   * @param {!Object<string, import(\"./TileRange.js\").default>} usedTiles Used tiles.\n   */\n  expireCache(usedTiles) {\n    while (this.canExpireCache()) {\n      const tile = this.peekLast();\n      const zKey = tile.tileCoord[0].toString();\n      if (zKey in usedTiles && usedTiles[zKey].contains(tile.tileCoord)) {\n        break;\n      } else {\n        this.pop().dispose();\n      }\n    }\n  }\n\n  /**\n   * Prune all tiles from the cache that don't have the same z as the newest tile.\n   */\n  pruneExceptNewestZ() {\n    if (this.getCount() === 0) {\n      return;\n    }\n    const key = this.peekFirstKey();\n    const tileCoord = fromKey(key);\n    const z = tileCoord[0];\n    this.forEach(function(tile) {\n      if (tile.tileCoord[0] !== z) {\n        this.remove(getKey(tile.tileCoord));\n        tile.dispose();\n      }\n    }, this);\n  }\n}\n\n\nexport default TileCache;\n","/**\n * @module ol/reproj/Tile\n */\nimport {ERROR_THRESHOLD} from './common.js';\n\nimport Tile from '../Tile.js';\nimport TileState from '../TileState.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {getArea, getCenter, getIntersection} from '../extent.js';\nimport {clamp} from '../math.js';\nimport {calculateSourceResolution, render as renderReprojected} from '../reproj.js';\nimport Triangulation from './Triangulation.js';\n\n\n/**\n * @typedef {function(number, number, number, number) : import(\"../Tile.js\").default} FunctionType\n */\n\n\n/**\n * @classdesc\n * Class encapsulating single reprojected tile.\n * See {@link module:ol/source/TileImage~TileImage}.\n *\n */\nclass ReprojTile extends Tile {\n  /**\n   * @param {import(\"../proj/Projection.js\").default} sourceProj Source projection.\n   * @param {import(\"../tilegrid/TileGrid.js\").default} sourceTileGrid Source tile grid.\n   * @param {import(\"../proj/Projection.js\").default} targetProj Target projection.\n   * @param {import(\"../tilegrid/TileGrid.js\").default} targetTileGrid Target tile grid.\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Coordinate of the tile.\n   * @param {import(\"../tilecoord.js\").TileCoord} wrappedTileCoord Coordinate of the tile wrapped in X.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {number} gutter Gutter of the source tiles.\n   * @param {FunctionType} getTileFunction\n   *     Function returning source tiles (z, x, y, pixelRatio).\n   * @param {number=} opt_errorThreshold Acceptable reprojection error (in px).\n   * @param {boolean=} opt_renderEdges Render reprojection edges.\n   */\n  constructor(\n    sourceProj,\n    sourceTileGrid,\n    targetProj,\n    targetTileGrid,\n    tileCoord,\n    wrappedTileCoord,\n    pixelRatio,\n    gutter,\n    getTileFunction,\n    opt_errorThreshold,\n    opt_renderEdges\n  ) {\n    super(tileCoord, TileState.IDLE);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.renderEdges_ = opt_renderEdges !== undefined ? opt_renderEdges : false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = pixelRatio;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.gutter_ = gutter;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../tilegrid/TileGrid.js\").default}\n     */\n    this.sourceTileGrid_ = sourceTileGrid;\n\n    /**\n     * @private\n     * @type {import(\"../tilegrid/TileGrid.js\").default}\n     */\n    this.targetTileGrid_ = targetTileGrid;\n\n    /**\n     * @private\n     * @type {import(\"../tilecoord.js\").TileCoord}\n     */\n    this.wrappedTileCoord_ = wrappedTileCoord ? wrappedTileCoord : tileCoord;\n\n    /**\n     * @private\n     * @type {!Array<import(\"../Tile.js\").default>}\n     */\n    this.sourceTiles_ = [];\n\n    /**\n     * @private\n     * @type {Array<import(\"../events.js\").EventsKey>}\n     */\n    this.sourcesListenerKeys_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.sourceZ_ = 0;\n\n    const targetExtent = targetTileGrid.getTileCoordExtent(this.wrappedTileCoord_);\n    const maxTargetExtent = this.targetTileGrid_.getExtent();\n    let maxSourceExtent = this.sourceTileGrid_.getExtent();\n\n    const limitedTargetExtent = maxTargetExtent ?\n      getIntersection(targetExtent, maxTargetExtent) : targetExtent;\n\n    if (getArea(limitedTargetExtent) === 0) {\n      // Tile is completely outside range -> EMPTY\n      // TODO: is it actually correct that the source even creates the tile ?\n      this.state = TileState.EMPTY;\n      return;\n    }\n\n    const sourceProjExtent = sourceProj.getExtent();\n    if (sourceProjExtent) {\n      if (!maxSourceExtent) {\n        maxSourceExtent = sourceProjExtent;\n      } else {\n        maxSourceExtent = getIntersection(maxSourceExtent, sourceProjExtent);\n      }\n    }\n\n    const targetResolution = targetTileGrid.getResolution(\n      this.wrappedTileCoord_[0]);\n\n    const targetCenter = getCenter(limitedTargetExtent);\n    const sourceResolution = calculateSourceResolution(\n      sourceProj, targetProj, targetCenter, targetResolution);\n\n    if (!isFinite(sourceResolution) || sourceResolution <= 0) {\n      // invalid sourceResolution -> EMPTY\n      // probably edges of the projections when no extent is defined\n      this.state = TileState.EMPTY;\n      return;\n    }\n\n    const errorThresholdInPixels = opt_errorThreshold !== undefined ?\n      opt_errorThreshold : ERROR_THRESHOLD;\n\n    /**\n     * @private\n     * @type {!import(\"./Triangulation.js\").default}\n     */\n    this.triangulation_ = new Triangulation(\n      sourceProj, targetProj, limitedTargetExtent, maxSourceExtent,\n      sourceResolution * errorThresholdInPixels);\n\n    if (this.triangulation_.getTriangles().length === 0) {\n      // no valid triangles -> EMPTY\n      this.state = TileState.EMPTY;\n      return;\n    }\n\n    this.sourceZ_ = sourceTileGrid.getZForResolution(sourceResolution);\n    let sourceExtent = this.triangulation_.calculateSourceExtent();\n\n    if (maxSourceExtent) {\n      if (sourceProj.canWrapX()) {\n        sourceExtent[1] = clamp(\n          sourceExtent[1], maxSourceExtent[1], maxSourceExtent[3]);\n        sourceExtent[3] = clamp(\n          sourceExtent[3], maxSourceExtent[1], maxSourceExtent[3]);\n      } else {\n        sourceExtent = getIntersection(sourceExtent, maxSourceExtent);\n      }\n    }\n\n    if (!getArea(sourceExtent)) {\n      this.state = TileState.EMPTY;\n    } else {\n      const sourceRange = sourceTileGrid.getTileRangeForExtentAndZ(\n        sourceExtent, this.sourceZ_);\n\n      for (let srcX = sourceRange.minX; srcX <= sourceRange.maxX; srcX++) {\n        for (let srcY = sourceRange.minY; srcY <= sourceRange.maxY; srcY++) {\n          const tile = getTileFunction(this.sourceZ_, srcX, srcY, pixelRatio);\n          if (tile) {\n            this.sourceTiles_.push(tile);\n          }\n        }\n      }\n\n      if (this.sourceTiles_.length === 0) {\n        this.state = TileState.EMPTY;\n      }\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    if (this.state == TileState.LOADING) {\n      this.unlistenSources_();\n    }\n    super.disposeInternal();\n  }\n\n  /**\n   * Get the HTML Canvas element for this tile.\n   * @return {HTMLCanvasElement} Canvas.\n   */\n  getImage() {\n    return this.canvas_;\n  }\n\n  /**\n   * @private\n   */\n  reproject_() {\n    const sources = [];\n    this.sourceTiles_.forEach(function(tile, i, arr) {\n      if (tile && tile.getState() == TileState.LOADED) {\n        sources.push({\n          extent: this.sourceTileGrid_.getTileCoordExtent(tile.tileCoord),\n          image: tile.getImage()\n        });\n      }\n    }.bind(this));\n    this.sourceTiles_.length = 0;\n\n    if (sources.length === 0) {\n      this.state = TileState.ERROR;\n    } else {\n      const z = this.wrappedTileCoord_[0];\n      const size = this.targetTileGrid_.getTileSize(z);\n      const width = typeof size === 'number' ? size : size[0];\n      const height = typeof size === 'number' ? size : size[1];\n      const targetResolution = this.targetTileGrid_.getResolution(z);\n      const sourceResolution = this.sourceTileGrid_.getResolution(this.sourceZ_);\n\n      const targetExtent = this.targetTileGrid_.getTileCoordExtent(\n        this.wrappedTileCoord_);\n      this.canvas_ = renderReprojected(width, height, this.pixelRatio_,\n        sourceResolution, this.sourceTileGrid_.getExtent(),\n        targetResolution, targetExtent, this.triangulation_, sources,\n        this.gutter_, this.renderEdges_);\n\n      this.state = TileState.LOADED;\n    }\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  load() {\n    if (this.state == TileState.IDLE) {\n      this.state = TileState.LOADING;\n      this.changed();\n\n      let leftToLoad = 0;\n\n      this.sourcesListenerKeys_ = [];\n      this.sourceTiles_.forEach(function(tile, i, arr) {\n        const state = tile.getState();\n        if (state == TileState.IDLE || state == TileState.LOADING) {\n          leftToLoad++;\n\n          const sourceListenKey = listen(tile, EventType.CHANGE,\n            function(e) {\n              const state = tile.getState();\n              if (state == TileState.LOADED ||\n                    state == TileState.ERROR ||\n                    state == TileState.EMPTY) {\n                unlistenByKey(sourceListenKey);\n                leftToLoad--;\n                if (leftToLoad === 0) {\n                  this.unlistenSources_();\n                  this.reproject_();\n                }\n              }\n            }, this);\n          this.sourcesListenerKeys_.push(sourceListenKey);\n        }\n      }.bind(this));\n\n      this.sourceTiles_.forEach(function(tile, i, arr) {\n        const state = tile.getState();\n        if (state == TileState.IDLE) {\n          tile.load();\n        }\n      });\n\n      if (leftToLoad === 0) {\n        setTimeout(this.reproject_.bind(this), 0);\n      }\n    }\n  }\n\n  /**\n   * @private\n   */\n  unlistenSources_() {\n    this.sourcesListenerKeys_.forEach(unlistenByKey);\n    this.sourcesListenerKeys_ = null;\n  }\n}\n\n\nexport default ReprojTile;\n","/**\n * @module ol/source/Tile\n */\nimport {abstract} from '../util.js';\nimport TileCache from '../TileCache.js';\nimport TileState from '../TileState.js';\nimport Event from '../events/Event.js';\nimport {equivalent} from '../proj.js';\nimport {toSize, scale as scaleSize} from '../size.js';\nimport Source from './Source.js';\nimport {getKeyZXY, withinExtentAndZ} from '../tilecoord.js';\nimport {wrapX, getForProjection as getTileGridForProjection} from '../tilegrid.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions]\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {number} [cacheSize]\n * @property {boolean} [opaque]\n * @property {number} [tilePixelRatio]\n * @property {import(\"../proj.js\").ProjectionLike} [projection]\n * @property {import(\"./State.js\").default} [state]\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid]\n * @property {boolean} [wrapX=true]\n * @property {number} [transition]\n * @property {string} [key]\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for sources providing images divided into a tile grid.\n * @abstract\n * @api\n */\nclass TileSource extends Source {\n  /**\n   * @param {Options} options SourceTile source options.\n   */\n  constructor(options) {\n\n    super({\n      attributions: options.attributions,\n      attributionsCollapsible: options.attributionsCollapsible,\n      projection: options.projection,\n      state: options.state,\n      wrapX: options.wrapX\n    });\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.opaque_ = options.opaque !== undefined ? options.opaque : false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.tilePixelRatio_ = options.tilePixelRatio !== undefined ?\n      options.tilePixelRatio : 1;\n\n    /**\n     * @protected\n     * @type {import(\"../tilegrid/TileGrid.js\").default}\n     */\n    this.tileGrid = options.tileGrid !== undefined ? options.tileGrid : null;\n\n    /**\n     * @protected\n     * @type {import(\"../TileCache.js\").default}\n     */\n    this.tileCache = new TileCache(options.cacheSize);\n\n    /**\n     * @protected\n     * @type {import(\"../size.js\").Size}\n     */\n    this.tmpSize = [0, 0];\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.key_ = options.key || '';\n\n    /**\n     * @protected\n     * @type {import(\"../Tile.js\").Options}\n     */\n    this.tileOptions = {transition: options.transition};\n\n  }\n\n  /**\n   * @return {boolean} Can expire cache.\n   */\n  canExpireCache() {\n    return this.tileCache.canExpireCache();\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @param {!Object<string, import(\"../TileRange.js\").default>} usedTiles Used tiles.\n   */\n  expireCache(projection, usedTiles) {\n    const tileCache = this.getTileCacheForProjection(projection);\n    if (tileCache) {\n      tileCache.expireCache(usedTiles);\n    }\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @param {number} z Zoom level.\n   * @param {import(\"../TileRange.js\").default} tileRange Tile range.\n   * @param {function(import(\"../Tile.js\").default):(boolean|void)} callback Called with each\n   *     loaded tile.  If the callback returns `false`, the tile will not be\n   *     considered loaded.\n   * @return {boolean} The tile range is fully covered with loaded tiles.\n   */\n  forEachLoadedTile(projection, z, tileRange, callback) {\n    const tileCache = this.getTileCacheForProjection(projection);\n    if (!tileCache) {\n      return false;\n    }\n\n    let covered = true;\n    let tile, tileCoordKey, loaded;\n    for (let x = tileRange.minX; x <= tileRange.maxX; ++x) {\n      for (let y = tileRange.minY; y <= tileRange.maxY; ++y) {\n        tileCoordKey = getKeyZXY(z, x, y);\n        loaded = false;\n        if (tileCache.containsKey(tileCoordKey)) {\n          tile = /** @type {!import(\"../Tile.js\").default} */ (tileCache.get(tileCoordKey));\n          loaded = tile.getState() === TileState.LOADED;\n          if (loaded) {\n            loaded = (callback(tile) !== false);\n          }\n        }\n        if (!loaded) {\n          covered = false;\n        }\n      }\n    }\n    return covered;\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {number} Gutter.\n   */\n  getGutterForProjection(projection) {\n    return 0;\n  }\n\n  /**\n   * Return the key to be used for all tiles in the source.\n   * @return {string} The key for all tiles.\n   * @protected\n   */\n  getKey() {\n    return this.key_;\n  }\n\n  /**\n   * Set the value to be used as the key for all tiles in the source.\n   * @param {string} key The key for tiles.\n   * @protected\n   */\n  setKey(key) {\n    if (this.key_ !== key) {\n      this.key_ = key;\n      this.changed();\n    }\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {boolean} Opaque.\n   */\n  getOpaque(projection) {\n    return this.opaque_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getResolutions() {\n    return this.tileGrid.getResolutions();\n  }\n\n  /**\n   * @abstract\n   * @param {number} z Tile coordinate z.\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {!import(\"../Tile.js\").default} Tile.\n   */\n  getTile(z, x, y, pixelRatio, projection) {\n    return abstract();\n  }\n\n  /**\n   * Return the tile grid of the tile source.\n   * @return {import(\"../tilegrid/TileGrid.js\").default} Tile grid.\n   * @api\n   */\n  getTileGrid() {\n    return this.tileGrid;\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {!import(\"../tilegrid/TileGrid.js\").default} Tile grid.\n   */\n  getTileGridForProjection(projection) {\n    if (!this.tileGrid) {\n      return getTileGridForProjection(projection);\n    } else {\n      return this.tileGrid;\n    }\n  }\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {import(\"../TileCache.js\").default} Tile cache.\n   * @protected\n   */\n  getTileCacheForProjection(projection) {\n    const thisProj = this.getProjection();\n    if (thisProj && !equivalent(thisProj, projection)) {\n      return null;\n    } else {\n      return this.tileCache;\n    }\n  }\n\n  /**\n   * Get the tile pixel ratio for this source. Subclasses may override this\n   * method, which is meant to return a supported pixel ratio that matches the\n   * provided `pixelRatio` as close as possible.\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {number} Tile pixel ratio.\n   */\n  getTilePixelRatio(pixelRatio) {\n    return this.tilePixelRatio_;\n  }\n\n  /**\n   * @param {number} z Z.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {import(\"../size.js\").Size} Tile size.\n   */\n  getTilePixelSize(z, pixelRatio, projection) {\n    const tileGrid = this.getTileGridForProjection(projection);\n    const tilePixelRatio = this.getTilePixelRatio(pixelRatio);\n    const tileSize = toSize(tileGrid.getTileSize(z), this.tmpSize);\n    if (tilePixelRatio == 1) {\n      return tileSize;\n    } else {\n      return scaleSize(tileSize, tilePixelRatio, this.tmpSize);\n    }\n  }\n\n  /**\n   * Returns a tile coordinate wrapped around the x-axis. When the tile coordinate\n   * is outside the resolution and extent range of the tile grid, `null` will be\n   * returned.\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {import(\"../proj/Projection.js\").default=} opt_projection Projection.\n   * @return {import(\"../tilecoord.js\").TileCoord} Tile coordinate to be passed to the tileUrlFunction or\n   *     null if no tile URL should be created for the passed `tileCoord`.\n   */\n  getTileCoordForTileUrlFunction(tileCoord, opt_projection) {\n    const projection = opt_projection !== undefined ?\n      opt_projection : this.getProjection();\n    const tileGrid = this.getTileGridForProjection(projection);\n    if (this.getWrapX() && projection.isGlobal()) {\n      tileCoord = wrapX(tileGrid, tileCoord, projection);\n    }\n    return withinExtentAndZ(tileCoord, tileGrid) ? tileCoord : null;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  refresh() {\n    this.tileCache.clear();\n    this.changed();\n  }\n\n  /**\n   * Marks a tile coord as being used, without triggering a load.\n   * @abstract\n   * @param {number} z Tile coordinate z.\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   */\n  useTile(z, x, y, projection) {}\n\n}\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Tile~TileSource} instances are instances of this\n * type.\n */\nexport class TileSourceEvent extends Event {\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../Tile.js\").default} tile The tile.\n   */\n  constructor(type, tile) {\n\n    super(type);\n\n    /**\n     * The tile related to the event.\n     * @type {import(\"../Tile.js\").default}\n     * @api\n     */\n    this.tile = tile;\n\n  }\n\n}\n\nexport default TileSource;\n","/**\n * @module ol/source/TileEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n\n  /**\n   * Triggered when a tile starts loading.\n   * @event module:ol/source/Tile.TileSourceEvent#tileloadstart\n   * @api\n   */\n  TILELOADSTART: 'tileloadstart',\n\n  /**\n   * Triggered when a tile finishes loading, either when its data is loaded,\n   * or when loading was aborted because the tile is no longer needed.\n   * @event module:ol/source/Tile.TileSourceEvent#tileloadend\n   * @api\n   */\n  TILELOADEND: 'tileloadend',\n\n  /**\n   * Triggered if tile loading results in an error.\n   * @event module:ol/source/Tile.TileSourceEvent#tileloaderror\n   * @api\n   */\n  TILELOADERROR: 'tileloaderror'\n\n};\n","/**\n * @module ol/source/TileImage\n */\nimport {ENABLE_RASTER_REPROJECTION} from '../reproj/common.js';\nimport {getUid} from '../util.js';\nimport ImageTile from '../ImageTile.js';\nimport TileCache from '../TileCache.js';\nimport TileState from '../TileState.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {equivalent, get as getProjection} from '../proj.js';\nimport ReprojTile from '../reproj/Tile.js';\nimport UrlTile from './UrlTile.js';\nimport {getKey, getKeyZXY} from '../tilecoord.js';\nimport {getForProjection as getTileGridForProjection} from '../tilegrid.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {number} [cacheSize=2048] Cache size.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you are using the WebGL renderer or if you want to\n * access pixel data with the Canvas renderer.  See\n * https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [opaque=true] Whether the layer is opaque.\n * @property {import(\"../proj.js\").ProjectionLike} projection Projection.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {import(\"./State.js\").default} [state] Source state.\n * @property {typeof import(\"../ImageTile.js\").default} [tileClass] Class used to instantiate image tiles.\n * Default is {@link module:ol/ImageTile~ImageTile}.\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid] Tile grid.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {number} [tilePixelRatio=1] The pixel ratio used by the tile service. For example, if the tile\n * service advertizes 256px by 256px tiles but actually sends 512px\n * by 512px images (for retina/hidpi devices) then `tilePixelRatio`\n * should be set to `2`.\n * @property {import(\"../Tile.js\").UrlFunction} [tileUrlFunction] Optional function to get tile URL given a tile coordinate and the projection.\n * @property {string} [url] URL template. Must include `{x}`, `{y}` or `{-y}`, and `{z}` placeholders.\n * A `{?-?}` template pattern, for example `subdomain{a-f}.domain.com`, may be\n * used instead of defining each one separately in the `urls` option.\n * @property {Array<string>} [urls] An array of URL templates.\n * @property {boolean} [wrapX] Whether to wrap the world horizontally. The default, is to\n * request out-of-bounds tiles from the server. When set to `false`, only one\n * world will be rendered. When set to `true`, tiles will be requested for one\n * world only, but they will be wrapped horizontally to render multiple worlds.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n * @property {string} [key] Optional tile key for proper cache fetching\n */\n\n\n/**\n * @classdesc\n * Base class for sources providing images divided into a tile grid.\n *\n * @fires import(\"./Tile.js\").TileSourceEvent\n * @api\n */\nclass TileImage extends UrlTile {\n  /**\n   * @param {!Options} options Image tile options.\n   */\n  constructor(options) {\n\n    super({\n      attributions: options.attributions,\n      cacheSize: options.cacheSize,\n      opaque: options.opaque,\n      projection: options.projection,\n      state: options.state,\n      tileGrid: options.tileGrid,\n      tileLoadFunction: options.tileLoadFunction ?\n        options.tileLoadFunction : defaultTileLoadFunction,\n      tilePixelRatio: options.tilePixelRatio,\n      tileUrlFunction: options.tileUrlFunction,\n      url: options.url,\n      urls: options.urls,\n      wrapX: options.wrapX,\n      transition: options.transition,\n      key: options.key,\n      attributionsCollapsible: options.attributionsCollapsible\n    });\n\n    /**\n     * @protected\n     * @type {?string}\n     */\n    this.crossOrigin =\n        options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n    /**\n     * @protected\n     * @type {typeof ImageTile}\n     */\n    this.tileClass = options.tileClass !== undefined ?\n      options.tileClass : ImageTile;\n\n    /**\n     * @protected\n     * @type {!Object<string, TileCache>}\n     */\n    this.tileCacheForProjection = {};\n\n    /**\n     * @protected\n     * @type {!Object<string, import(\"../tilegrid/TileGrid.js\").default>}\n     */\n    this.tileGridForProjection = {};\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.reprojectionErrorThreshold_ = options.reprojectionErrorThreshold;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.renderReprojectionEdges_ = false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  canExpireCache() {\n    if (!ENABLE_RASTER_REPROJECTION) {\n      return super.canExpireCache();\n    }\n    if (this.tileCache.canExpireCache()) {\n      return true;\n    } else {\n      for (const key in this.tileCacheForProjection) {\n        if (this.tileCacheForProjection[key].canExpireCache()) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  expireCache(projection, usedTiles) {\n    if (!ENABLE_RASTER_REPROJECTION) {\n      super.expireCache(projection, usedTiles);\n      return;\n    }\n    const usedTileCache = this.getTileCacheForProjection(projection);\n\n    this.tileCache.expireCache(this.tileCache == usedTileCache ? usedTiles : {});\n    for (const id in this.tileCacheForProjection) {\n      const tileCache = this.tileCacheForProjection[id];\n      tileCache.expireCache(tileCache == usedTileCache ? usedTiles : {});\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getGutterForProjection(projection) {\n    if (ENABLE_RASTER_REPROJECTION &&\n        this.getProjection() && projection && !equivalent(this.getProjection(), projection)) {\n      return 0;\n    } else {\n      return this.getGutter();\n    }\n  }\n\n  /**\n   * @return {number} Gutter.\n   */\n  getGutter() {\n    return 0;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getOpaque(projection) {\n    if (ENABLE_RASTER_REPROJECTION &&\n        this.getProjection() && projection && !equivalent(this.getProjection(), projection)) {\n      return false;\n    } else {\n      return super.getOpaque(projection);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getTileGridForProjection(projection) {\n    if (!ENABLE_RASTER_REPROJECTION) {\n      return super.getTileGridForProjection(projection);\n    }\n    const thisProj = this.getProjection();\n    if (this.tileGrid && (!thisProj || equivalent(thisProj, projection))) {\n      return this.tileGrid;\n    } else {\n      const projKey = getUid(projection);\n      if (!(projKey in this.tileGridForProjection)) {\n        this.tileGridForProjection[projKey] = getTileGridForProjection(projection);\n      }\n      return (\n        /** @type {!import(\"../tilegrid/TileGrid.js\").default} */ (this.tileGridForProjection[projKey])\n      );\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getTileCacheForProjection(projection) {\n    if (!ENABLE_RASTER_REPROJECTION) {\n      return super.getTileCacheForProjection(projection);\n    }\n    const thisProj = this.getProjection(); if (!thisProj || equivalent(thisProj, projection)) {\n      return this.tileCache;\n    } else {\n      const projKey = getUid(projection);\n      if (!(projKey in this.tileCacheForProjection)) {\n        this.tileCacheForProjection[projKey] = new TileCache(this.tileCache.highWaterMark);\n      }\n      return this.tileCacheForProjection[projKey];\n    }\n  }\n\n  /**\n   * @param {number} z Tile coordinate z.\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @param {string} key The key set on the tile.\n   * @return {!import(\"../Tile.js\").default} Tile.\n   * @private\n   */\n  createTile_(z, x, y, pixelRatio, projection, key) {\n    const tileCoord = [z, x, y];\n    const urlTileCoord = this.getTileCoordForTileUrlFunction(\n      tileCoord, projection);\n    const tileUrl = urlTileCoord ?\n      this.tileUrlFunction(urlTileCoord, pixelRatio, projection) : undefined;\n    const tile = new this.tileClass(\n      tileCoord,\n      tileUrl !== undefined ? TileState.IDLE : TileState.EMPTY,\n      tileUrl !== undefined ? tileUrl : '',\n      this.crossOrigin,\n      this.tileLoadFunction,\n      this.tileOptions);\n    tile.key = key;\n    listen(tile, EventType.CHANGE,\n      this.handleTileChange, this);\n    return tile;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getTile(z, x, y, pixelRatio, projection) {\n    const sourceProjection = /** @type {!import(\"../proj/Projection.js\").default} */ (this.getProjection());\n    if (!ENABLE_RASTER_REPROJECTION ||\n        !sourceProjection || !projection || equivalent(sourceProjection, projection)) {\n      return this.getTileInternal(z, x, y, pixelRatio, sourceProjection || projection);\n    } else {\n      const cache = this.getTileCacheForProjection(projection);\n      const tileCoord = [z, x, y];\n      let tile;\n      const tileCoordKey = getKey(tileCoord);\n      if (cache.containsKey(tileCoordKey)) {\n        tile = /** @type {!import(\"../Tile.js\").default} */ (cache.get(tileCoordKey));\n      }\n      const key = this.getKey();\n      if (tile && tile.key == key) {\n        return tile;\n      } else {\n        const sourceTileGrid = this.getTileGridForProjection(sourceProjection);\n        const targetTileGrid = this.getTileGridForProjection(projection);\n        const wrappedTileCoord =\n            this.getTileCoordForTileUrlFunction(tileCoord, projection);\n        const newTile = new ReprojTile(\n          sourceProjection, sourceTileGrid,\n          projection, targetTileGrid,\n          tileCoord, wrappedTileCoord, this.getTilePixelRatio(pixelRatio),\n          this.getGutter(),\n          function(z, x, y, pixelRatio) {\n            return this.getTileInternal(z, x, y, pixelRatio, sourceProjection);\n          }.bind(this), this.reprojectionErrorThreshold_,\n          this.renderReprojectionEdges_);\n        newTile.key = key;\n\n        if (tile) {\n          newTile.interimTile = tile;\n          newTile.refreshInterimChain();\n          cache.replace(tileCoordKey, newTile);\n        } else {\n          cache.set(tileCoordKey, newTile);\n        }\n        return newTile;\n      }\n    }\n  }\n\n  /**\n   * @param {number} z Tile coordinate z.\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {!import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {!import(\"../Tile.js\").default} Tile.\n   * @protected\n   */\n  getTileInternal(z, x, y, pixelRatio, projection) {\n    let tile = null;\n    const tileCoordKey = getKeyZXY(z, x, y);\n    const key = this.getKey();\n    if (!this.tileCache.containsKey(tileCoordKey)) {\n      tile = this.createTile_(z, x, y, pixelRatio, projection, key);\n      this.tileCache.set(tileCoordKey, tile);\n    } else {\n      tile = this.tileCache.get(tileCoordKey);\n      if (tile.key != key) {\n        // The source's params changed. If the tile has an interim tile and if we\n        // can use it then we use it. Otherwise we create a new tile.  In both\n        // cases we attempt to assign an interim tile to the new tile.\n        const interimTile = tile;\n        tile = this.createTile_(z, x, y, pixelRatio, projection, key);\n\n        //make the new tile the head of the list,\n        if (interimTile.getState() == TileState.IDLE) {\n          //the old tile hasn't begun loading yet, and is now outdated, so we can simply discard it\n          tile.interimTile = interimTile.interimTile;\n        } else {\n          tile.interimTile = interimTile;\n        }\n        tile.refreshInterimChain();\n        this.tileCache.replace(tileCoordKey, tile);\n      }\n    }\n    return tile;\n  }\n\n  /**\n   * Sets whether to render reprojection edges or not (usually for debugging).\n   * @param {boolean} render Render the edges.\n   * @api\n   */\n  setRenderReprojectionEdges(render) {\n    if (!ENABLE_RASTER_REPROJECTION ||\n        this.renderReprojectionEdges_ == render) {\n      return;\n    }\n    this.renderReprojectionEdges_ = render;\n    for (const id in this.tileCacheForProjection) {\n      this.tileCacheForProjection[id].clear();\n    }\n    this.changed();\n  }\n\n  /**\n   * Sets the tile grid to use when reprojecting the tiles to the given\n   * projection instead of the default tile grid for the projection.\n   *\n   * This can be useful when the default tile grid cannot be created\n   * (e.g. projection has no extent defined) or\n   * for optimization reasons (custom tile size, resolutions, ...).\n   *\n   * @param {import(\"../proj.js\").ProjectionLike} projection Projection.\n   * @param {import(\"../tilegrid/TileGrid.js\").default} tilegrid Tile grid to use for the projection.\n   * @api\n   */\n  setTileGridForProjection(projection, tilegrid) {\n    if (ENABLE_RASTER_REPROJECTION) {\n      const proj = getProjection(projection);\n      if (proj) {\n        const projKey = getUid(proj);\n        if (!(projKey in this.tileGridForProjection)) {\n          this.tileGridForProjection[projKey] = tilegrid;\n        }\n      }\n    }\n  }\n}\n\n\n/**\n * @param {ImageTile} imageTile Image tile.\n * @param {string} src Source.\n */\nfunction defaultTileLoadFunction(imageTile, src) {\n  /** @type {HTMLImageElement|HTMLVideoElement} */ (imageTile.getImage()).src = src;\n}\n\nexport default TileImage;\n","/**\n * @module ol/source/UrlTile\n */\nimport {getUid} from '../util.js';\nimport TileState from '../TileState.js';\nimport {expandUrl, createFromTemplates, nullTileUrlFunction} from '../tileurlfunction.js';\nimport TileSource, {TileSourceEvent} from './Tile.js';\nimport TileEventType from './TileEventType.js';\nimport {getKeyZXY} from '../tilecoord.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions]\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {number} [cacheSize]\n * @property {boolean} [opaque]\n * @property {import(\"../proj.js\").ProjectionLike} [projection]\n * @property {import(\"./State.js\").default} [state]\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid]\n * @property {import(\"../Tile.js\").LoadFunction} tileLoadFunction\n * @property {number} [tilePixelRatio]\n * @property {import(\"../Tile.js\").UrlFunction} [tileUrlFunction]\n * @property {string} [url]\n * @property {Array<string>} [urls]\n * @property {boolean} [wrapX=true]\n * @property {number} [transition]\n * @property {string} [key]\n */\n\n\n/**\n * @classdesc\n * Base class for sources providing tiles divided into a tile grid over http.\n *\n * @fires import(\"./Tile.js\").TileSourceEvent\n */\nclass UrlTile extends TileSource {\n  /**\n   * @param {Options} options Image tile options.\n   */\n  constructor(options) {\n\n    super({\n      attributions: options.attributions,\n      cacheSize: options.cacheSize,\n      opaque: options.opaque,\n      projection: options.projection,\n      state: options.state,\n      tileGrid: options.tileGrid,\n      tilePixelRatio: options.tilePixelRatio,\n      wrapX: options.wrapX,\n      transition: options.transition,\n      key: options.key,\n      attributionsCollapsible: options.attributionsCollapsible\n    });\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.generateTileUrlFunction_ = !options.tileUrlFunction;\n\n    /**\n     * @protected\n     * @type {import(\"../Tile.js\").LoadFunction}\n     */\n    this.tileLoadFunction = options.tileLoadFunction;\n\n    /**\n     * @protected\n     * @type {import(\"../Tile.js\").UrlFunction}\n     */\n    this.tileUrlFunction = options.tileUrlFunction ? options.tileUrlFunction.bind(this) : nullTileUrlFunction;\n\n    /**\n     * @protected\n     * @type {!Array<string>|null}\n     */\n    this.urls = null;\n\n    if (options.urls) {\n      this.setUrls(options.urls);\n    } else if (options.url) {\n      this.setUrl(options.url);\n    }\n\n    if (options.tileUrlFunction) {\n      this.setTileUrlFunction(options.tileUrlFunction, this.key_);\n    }\n\n    /**\n     * @private\n     * @type {!Object<string, boolean>}\n     */\n    this.tileLoadingKeys_ = {};\n\n  }\n\n  /**\n   * Return the tile load function of the source.\n   * @return {import(\"../Tile.js\").LoadFunction} TileLoadFunction\n   * @api\n   */\n  getTileLoadFunction() {\n    return this.tileLoadFunction;\n  }\n\n  /**\n   * Return the tile URL function of the source.\n   * @return {import(\"../Tile.js\").UrlFunction} TileUrlFunction\n   * @api\n   */\n  getTileUrlFunction() {\n    return this.tileUrlFunction;\n  }\n\n  /**\n   * Return the URLs used for this source.\n   * When a tileUrlFunction is used instead of url or urls,\n   * null will be returned.\n   * @return {!Array<string>|null} URLs.\n   * @api\n   */\n  getUrls() {\n    return this.urls;\n  }\n\n  /**\n   * Handle tile change events.\n   * @param {import(\"../events/Event.js\").default} event Event.\n   * @protected\n   */\n  handleTileChange(event) {\n    const tile = /** @type {import(\"../Tile.js\").default} */ (event.target);\n    const uid = getUid(tile);\n    const tileState = tile.getState();\n    let type;\n    if (tileState == TileState.LOADING) {\n      this.tileLoadingKeys_[uid] = true;\n      type = TileEventType.TILELOADSTART;\n    } else if (uid in this.tileLoadingKeys_) {\n      delete this.tileLoadingKeys_[uid];\n      type = tileState == TileState.ERROR ? TileEventType.TILELOADERROR :\n        (tileState == TileState.LOADED || tileState == TileState.ABORT) ?\n          TileEventType.TILELOADEND : undefined;\n    }\n    if (type != undefined) {\n      this.dispatchEvent(new TileSourceEvent(type, tile));\n    }\n  }\n\n  /**\n   * Set the tile load function of the source.\n   * @param {import(\"../Tile.js\").LoadFunction} tileLoadFunction Tile load function.\n   * @api\n   */\n  setTileLoadFunction(tileLoadFunction) {\n    this.tileCache.clear();\n    this.tileLoadFunction = tileLoadFunction;\n    this.changed();\n  }\n\n  /**\n   * Set the tile URL function of the source.\n   * @param {import(\"../Tile.js\").UrlFunction} tileUrlFunction Tile URL function.\n   * @param {string=} key Optional new tile key for the source.\n   * @api\n   */\n  setTileUrlFunction(tileUrlFunction, key) {\n    this.tileUrlFunction = tileUrlFunction;\n    this.tileCache.pruneExceptNewestZ();\n    if (typeof key !== 'undefined') {\n      this.setKey(key);\n    } else {\n      this.changed();\n    }\n  }\n\n  /**\n   * Set the URL to use for requests.\n   * @param {string} url URL.\n   * @api\n   */\n  setUrl(url) {\n    const urls = this.urls = expandUrl(url);\n    this.setUrls(urls);\n  }\n\n  /**\n   * Set the URLs to use for requests.\n   * @param {Array<string>} urls URLs.\n   * @api\n   */\n  setUrls(urls) {\n    this.urls = urls;\n    const key = urls.join('\\n');\n    if (this.generateTileUrlFunction_) {\n      this.setTileUrlFunction(createFromTemplates(urls, this.tileGrid), key);\n    } else {\n      this.setKey(key);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  useTile(z, x, y) {\n    const tileCoordKey = getKeyZXY(z, x, y);\n    if (this.tileCache.containsKey(tileCoordKey)) {\n      this.tileCache.get(tileCoordKey);\n    }\n  }\n}\n\n\nexport default UrlTile;\n","/**\n * @module ol/ObjectEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n  /**\n   * Triggered when a property is changed.\n   * @event module:ol/Object.ObjectEvent#propertychange\n   * @api\n   */\n  PROPERTYCHANGE: 'propertychange'\n};\n","/**\n * @module ol/reproj\n */\nimport {createCanvasContext2D} from './dom.js';\nimport {containsCoordinate, createEmpty, extend, getHeight, getTopLeft, getWidth} from './extent.js';\nimport {solveLinearSystem} from './math.js';\nimport {getPointResolution, transform} from './proj.js';\n\n\n/**\n * Calculates ideal resolution to use from the source in order to achieve\n * pixel mapping as close as possible to 1:1 during reprojection.\n * The resolution is calculated regardless of what resolutions\n * are actually available in the dataset (TileGrid, Image, ...).\n *\n * @param {import(\"./proj/Projection.js\").default} sourceProj Source projection.\n * @param {import(\"./proj/Projection.js\").default} targetProj Target projection.\n * @param {import(\"./coordinate.js\").Coordinate} targetCenter Target center.\n * @param {number} targetResolution Target resolution.\n * @return {number} The best resolution to use. Can be +-Infinity, NaN or 0.\n */\nexport function calculateSourceResolution(sourceProj, targetProj,\n  targetCenter, targetResolution) {\n\n  const sourceCenter = transform(targetCenter, targetProj, sourceProj);\n\n  // calculate the ideal resolution of the source data\n  let sourceResolution = getPointResolution(targetProj, targetResolution, targetCenter);\n\n  const targetMetersPerUnit = targetProj.getMetersPerUnit();\n  if (targetMetersPerUnit !== undefined) {\n    sourceResolution *= targetMetersPerUnit;\n  }\n  const sourceMetersPerUnit = sourceProj.getMetersPerUnit();\n  if (sourceMetersPerUnit !== undefined) {\n    sourceResolution /= sourceMetersPerUnit;\n  }\n\n  // Based on the projection properties, the point resolution at the specified\n  // coordinates may be slightly different. We need to reverse-compensate this\n  // in order to achieve optimal results.\n\n  const sourceExtent = sourceProj.getExtent();\n  if (!sourceExtent || containsCoordinate(sourceExtent, sourceCenter)) {\n    const compensationFactor = getPointResolution(sourceProj, sourceResolution, sourceCenter) /\n        sourceResolution;\n    if (isFinite(compensationFactor) && compensationFactor > 0) {\n      sourceResolution /= compensationFactor;\n    }\n  }\n\n  return sourceResolution;\n}\n\n\n/**\n * Enlarge the clipping triangle point by 1 pixel to ensure the edges overlap\n * in order to mask gaps caused by antialiasing.\n *\n * @param {number} centroidX Centroid of the triangle (x coordinate in pixels).\n * @param {number} centroidY Centroid of the triangle (y coordinate in pixels).\n * @param {number} x X coordinate of the point (in pixels).\n * @param {number} y Y coordinate of the point (in pixels).\n * @return {import(\"./coordinate.js\").Coordinate} New point 1 px farther from the centroid.\n */\nfunction enlargeClipPoint(centroidX, centroidY, x, y) {\n  const dX = x - centroidX;\n  const dY = y - centroidY;\n  const distance = Math.sqrt(dX * dX + dY * dY);\n  return [Math.round(x + dX / distance), Math.round(y + dY / distance)];\n}\n\n\n/**\n * Renders the source data into new canvas based on the triangulation.\n *\n * @param {number} width Width of the canvas.\n * @param {number} height Height of the canvas.\n * @param {number} pixelRatio Pixel ratio.\n * @param {number} sourceResolution Source resolution.\n * @param {import(\"./extent.js\").Extent} sourceExtent Extent of the data source.\n * @param {number} targetResolution Target resolution.\n * @param {import(\"./extent.js\").Extent} targetExtent Target extent.\n * @param {import(\"./reproj/Triangulation.js\").default} triangulation\n * Calculated triangulation.\n * @param {Array<{extent: import(\"./extent.js\").Extent,\n *                 image: (HTMLCanvasElement|HTMLImageElement|HTMLVideoElement)}>} sources\n * Array of sources.\n * @param {number} gutter Gutter of the sources.\n * @param {boolean=} opt_renderEdges Render reprojection edges.\n * @return {HTMLCanvasElement} Canvas with reprojected data.\n */\nexport function render(width, height, pixelRatio,\n  sourceResolution, sourceExtent, targetResolution, targetExtent,\n  triangulation, sources, gutter, opt_renderEdges) {\n\n  const context = createCanvasContext2D(Math.round(pixelRatio * width),\n    Math.round(pixelRatio * height));\n\n  if (sources.length === 0) {\n    return context.canvas;\n  }\n\n  context.scale(pixelRatio, pixelRatio);\n\n  const sourceDataExtent = createEmpty();\n  sources.forEach(function(src, i, arr) {\n    extend(sourceDataExtent, src.extent);\n  });\n\n  const canvasWidthInUnits = getWidth(sourceDataExtent);\n  const canvasHeightInUnits = getHeight(sourceDataExtent);\n  const stitchContext = createCanvasContext2D(\n    Math.round(pixelRatio * canvasWidthInUnits / sourceResolution),\n    Math.round(pixelRatio * canvasHeightInUnits / sourceResolution));\n\n  const stitchScale = pixelRatio / sourceResolution;\n\n  sources.forEach(function(src, i, arr) {\n    const xPos = src.extent[0] - sourceDataExtent[0];\n    const yPos = -(src.extent[3] - sourceDataExtent[3]);\n    const srcWidth = getWidth(src.extent);\n    const srcHeight = getHeight(src.extent);\n\n    stitchContext.drawImage(\n      src.image,\n      gutter, gutter,\n      src.image.width - 2 * gutter, src.image.height - 2 * gutter,\n      xPos * stitchScale, yPos * stitchScale,\n      srcWidth * stitchScale, srcHeight * stitchScale);\n  });\n\n  const targetTopLeft = getTopLeft(targetExtent);\n\n  triangulation.getTriangles().forEach(function(triangle, i, arr) {\n    /* Calculate affine transform (src -> dst)\n     * Resulting matrix can be used to transform coordinate\n     * from `sourceProjection` to destination pixels.\n     *\n     * To optimize number of context calls and increase numerical stability,\n     * we also do the following operations:\n     * trans(-topLeftExtentCorner), scale(1 / targetResolution), scale(1, -1)\n     * here before solving the linear system so [ui, vi] are pixel coordinates.\n     *\n     * Src points: xi, yi\n     * Dst points: ui, vi\n     * Affine coefficients: aij\n     *\n     * | x0 y0 1  0  0 0 |   |a00|   |u0|\n     * | x1 y1 1  0  0 0 |   |a01|   |u1|\n     * | x2 y2 1  0  0 0 | x |a02| = |u2|\n     * |  0  0 0 x0 y0 1 |   |a10|   |v0|\n     * |  0  0 0 x1 y1 1 |   |a11|   |v1|\n     * |  0  0 0 x2 y2 1 |   |a12|   |v2|\n     */\n    const source = triangle.source;\n    const target = triangle.target;\n    let x0 = source[0][0], y0 = source[0][1];\n    let x1 = source[1][0], y1 = source[1][1];\n    let x2 = source[2][0], y2 = source[2][1];\n    const u0 = (target[0][0] - targetTopLeft[0]) / targetResolution;\n    const v0 = -(target[0][1] - targetTopLeft[1]) / targetResolution;\n    const u1 = (target[1][0] - targetTopLeft[0]) / targetResolution;\n    const v1 = -(target[1][1] - targetTopLeft[1]) / targetResolution;\n    const u2 = (target[2][0] - targetTopLeft[0]) / targetResolution;\n    const v2 = -(target[2][1] - targetTopLeft[1]) / targetResolution;\n\n    // Shift all the source points to improve numerical stability\n    // of all the subsequent calculations. The [x0, y0] is used here.\n    // This is also used to simplify the linear system.\n    const sourceNumericalShiftX = x0;\n    const sourceNumericalShiftY = y0;\n    x0 = 0;\n    y0 = 0;\n    x1 -= sourceNumericalShiftX;\n    y1 -= sourceNumericalShiftY;\n    x2 -= sourceNumericalShiftX;\n    y2 -= sourceNumericalShiftY;\n\n    const augmentedMatrix = [\n      [x1, y1, 0, 0, u1 - u0],\n      [x2, y2, 0, 0, u2 - u0],\n      [0, 0, x1, y1, v1 - v0],\n      [0, 0, x2, y2, v2 - v0]\n    ];\n    const affineCoefs = solveLinearSystem(augmentedMatrix);\n    if (!affineCoefs) {\n      return;\n    }\n\n    context.save();\n    context.beginPath();\n    const centroidX = (u0 + u1 + u2) / 3;\n    const centroidY = (v0 + v1 + v2) / 3;\n    const p0 = enlargeClipPoint(centroidX, centroidY, u0, v0);\n    const p1 = enlargeClipPoint(centroidX, centroidY, u1, v1);\n    const p2 = enlargeClipPoint(centroidX, centroidY, u2, v2);\n\n    context.moveTo(p1[0], p1[1]);\n    context.lineTo(p0[0], p0[1]);\n    context.lineTo(p2[0], p2[1]);\n    context.clip();\n\n    context.transform(\n      affineCoefs[0], affineCoefs[2], affineCoefs[1], affineCoefs[3], u0, v0);\n\n    context.translate(sourceDataExtent[0] - sourceNumericalShiftX,\n      sourceDataExtent[3] - sourceNumericalShiftY);\n\n    context.scale(sourceResolution / pixelRatio,\n      -sourceResolution / pixelRatio);\n\n    context.drawImage(stitchContext.canvas, 0, 0);\n    context.restore();\n  });\n\n  if (opt_renderEdges) {\n    context.save();\n\n    context.strokeStyle = 'black';\n    context.lineWidth = 1;\n\n    triangulation.getTriangles().forEach(function(triangle, i, arr) {\n      const target = triangle.target;\n      const u0 = (target[0][0] - targetTopLeft[0]) / targetResolution;\n      const v0 = -(target[0][1] - targetTopLeft[1]) / targetResolution;\n      const u1 = (target[1][0] - targetTopLeft[0]) / targetResolution;\n      const v1 = -(target[1][1] - targetTopLeft[1]) / targetResolution;\n      const u2 = (target[2][0] - targetTopLeft[0]) / targetResolution;\n      const v2 = -(target[2][1] - targetTopLeft[1]) / targetResolution;\n\n      context.beginPath();\n      context.moveTo(u1, v1);\n      context.lineTo(u0, v0);\n      context.lineTo(u2, v2);\n      context.closePath();\n      context.stroke();\n    });\n\n    context.restore();\n  }\n  return context.canvas;\n}\n","/**\n * @module ol/rotationconstraint\n */\nimport {toRadians} from './math.js';\n\n\n/**\n * @typedef {function((number|undefined), number): (number|undefined)} Type\n */\n\n\n/**\n * @param {number|undefined} rotation Rotation.\n * @param {number} delta Delta.\n * @return {number|undefined} Rotation.\n */\nexport function disable(rotation, delta) {\n  if (rotation !== undefined) {\n    return 0;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {number|undefined} rotation Rotation.\n * @param {number} delta Delta.\n * @return {number|undefined} Rotation.\n */\nexport function none(rotation, delta) {\n  if (rotation !== undefined) {\n    return rotation + delta;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {number} n N.\n * @return {Type} Rotation constraint.\n */\nexport function createSnapToN(n) {\n  const theta = 2 * Math.PI / n;\n  return (\n    /**\n     * @param {number|undefined} rotation Rotation.\n     * @param {number} delta Delta.\n     * @return {number|undefined} Rotation.\n     */\n    function(rotation, delta) {\n      if (rotation !== undefined) {\n        rotation = Math.floor((rotation + delta) / theta + 0.5) * theta;\n        return rotation;\n      } else {\n        return undefined;\n      }\n    });\n}\n\n\n/**\n * @param {number=} opt_tolerance Tolerance.\n * @return {Type} Rotation constraint.\n */\nexport function createSnapToZero(opt_tolerance) {\n  const tolerance = opt_tolerance || toRadians(5);\n  return (\n    /**\n     * @param {number|undefined} rotation Rotation.\n     * @param {number} delta Delta.\n     * @return {number|undefined} Rotation.\n     */\n    function(rotation, delta) {\n      if (rotation !== undefined) {\n        if (Math.abs(rotation + delta) <= tolerance) {\n          return 0;\n        } else {\n          return rotation + delta;\n        }\n      } else {\n        return undefined;\n      }\n    });\n}\n","/**\n * @module ol/source/WMSServerType\n */\n\n/**\n * Available server types: `'carmentaserver'`, `'geoserver'`, `'mapserver'`,\n *     `'qgis'`. These are servers that have vendor parameters beyond the WMS\n *     specification that OpenLayers can make use of.\n * @enum {string}\n */\nexport default {\n  CARMENTA_SERVER: 'carmentaserver',\n  GEOSERVER: 'geoserver',\n  MAPSERVER: 'mapserver',\n  QGIS: 'qgis'\n};\n","/**\n * @module ol/layer/Image\n */\nimport LayerType from '../LayerType.js';\nimport Layer from './Layer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n * @property {import(\"../PluggableMap.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use {@link module:ol/Map#addLayer}.\n * @property {import(\"../source/Image.js\").default} [source] Source for this layer.\n */\n\n\n/**\n * @classdesc\n * Server-rendered images that are available for arbitrary extents and\n * resolutions.\n * Note that any property set in the options is set as a {@link module:ol/Object~BaseObject}\n * property on the layer object; for example, setting `title: 'My Title'` in the\n * options means that `title` is observable, and has get/set accessors.\n *\n * @fires import(\"../render/Event.js\").RenderEvent\n * @api\n */\nclass ImageLayer extends Layer {\n\n  /**\n   * @param {Options=} opt_options Layer options.\n   */\n  constructor(opt_options) {\n    const options = opt_options ? opt_options : {};\n    super(options);\n\n    /**\n     * The layer type.\n     * @protected\n     * @type {import(\"../LayerType.js\").default}\n     */\n    this.type = LayerType.IMAGE;\n\n  }\n\n}\n\n\n/**\n * Return the associated {@link module:ol/source/Image source} of the image layer.\n * @function\n * @return {import(\"../source/Image.js\").default} Source.\n * @api\n */\nImageLayer.prototype.getSource;\nexport default ImageLayer;\n","/**\n * @module ol/geom/MultiLineString\n */\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY} from '../extent.js';\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport LineString from './LineString.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {assignClosestArrayPoint, arrayMaxSquaredDelta} from './flat/closest.js';\nimport {deflateCoordinatesArray} from './flat/deflate.js';\nimport {inflateCoordinatesArray} from './flat/inflate.js';\nimport {interpolatePoint, lineStringsCoordinateAtM} from './flat/interpolate.js';\nimport {intersectsLineStringArray} from './flat/intersectsextent.js';\nimport {douglasPeuckerArray} from './flat/simplify.js';\n\n/**\n * @classdesc\n * Multi-linestring geometry.\n *\n * @api\n */\nclass MultiLineString extends SimpleGeometry {\n\n  /**\n   * @param {Array<Array<import(\"../coordinate.js\").Coordinate>|LineString>|Array<number>} coordinates\n   *     Coordinates or LineString geometries. (For internal use, flat coordinates in\n   *     combination with `opt_layout` and `opt_ends` are also accepted.)\n   * @param {GeometryLayout=} opt_layout Layout.\n   * @param {Array<number>=} opt_ends Flat coordinate ends for internal use.\n   */\n  constructor(coordinates, opt_layout, opt_ends) {\n\n    super();\n\n    /**\n     * @type {Array<number>}\n     * @private\n     */\n    this.ends_ = [];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDelta_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDeltaRevision_ = -1;\n\n    if (Array.isArray(coordinates[0])) {\n      this.setCoordinates(/** @type {Array<Array<import(\"../coordinate.js\").Coordinate>>} */ (coordinates), opt_layout);\n    } else if (opt_layout !== undefined && opt_ends) {\n      this.setFlatCoordinates(opt_layout, /** @type {Array<number>} */ (coordinates));\n      this.ends_ = opt_ends;\n    } else {\n      let layout = this.getLayout();\n      const lineStrings = /** @type {Array<LineString>} */ (coordinates);\n      const flatCoordinates = [];\n      const ends = [];\n      for (let i = 0, ii = lineStrings.length; i < ii; ++i) {\n        const lineString = lineStrings[i];\n        if (i === 0) {\n          layout = lineString.getLayout();\n        }\n        extend(flatCoordinates, lineString.getFlatCoordinates());\n        ends.push(flatCoordinates.length);\n      }\n      this.setFlatCoordinates(layout, flatCoordinates);\n      this.ends_ = ends;\n    }\n\n  }\n\n  /**\n   * Append the passed linestring to the multilinestring.\n   * @param {LineString} lineString LineString.\n   * @api\n   */\n  appendLineString(lineString) {\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = lineString.getFlatCoordinates().slice();\n    } else {\n      extend(this.flatCoordinates, lineString.getFlatCoordinates().slice());\n    }\n    this.ends_.push(this.flatCoordinates.length);\n    this.changed();\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!MultiLineString} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    return new MultiLineString(this.flatCoordinates.slice(), this.layout, this.ends_.slice());\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(arrayMaxSquaredDelta(\n        this.flatCoordinates, 0, this.ends_, this.stride, 0));\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n    return assignClosestArrayPoint(\n      this.flatCoordinates, 0, this.ends_, this.stride,\n      this.maxDelta_, false, x, y, closestPoint, minSquaredDistance);\n  }\n\n  /**\n   * Returns the coordinate at `m` using linear interpolation, or `null` if no\n   * such coordinate exists.\n   *\n   * `opt_extrapolate` controls extrapolation beyond the range of Ms in the\n   * MultiLineString. If `opt_extrapolate` is `true` then Ms less than the first\n   * M will return the first coordinate and Ms greater than the last M will\n   * return the last coordinate.\n   *\n   * `opt_interpolate` controls interpolation between consecutive LineStrings\n   * within the MultiLineString. If `opt_interpolate` is `true` the coordinates\n   * will be linearly interpolated between the last coordinate of one LineString\n   * and the first coordinate of the next LineString.  If `opt_interpolate` is\n   * `false` then the function will return `null` for Ms falling between\n   * LineStrings.\n   *\n   * @param {number} m M.\n   * @param {boolean=} opt_extrapolate Extrapolate. Default is `false`.\n   * @param {boolean=} opt_interpolate Interpolate. Default is `false`.\n   * @return {import(\"../coordinate.js\").Coordinate} Coordinate.\n   * @api\n   */\n  getCoordinateAtM(m, opt_extrapolate, opt_interpolate) {\n    if ((this.layout != GeometryLayout.XYM &&\n         this.layout != GeometryLayout.XYZM) ||\n        this.flatCoordinates.length === 0) {\n      return null;\n    }\n    const extrapolate = opt_extrapolate !== undefined ? opt_extrapolate : false;\n    const interpolate = opt_interpolate !== undefined ? opt_interpolate : false;\n    return lineStringsCoordinateAtM(this.flatCoordinates, 0,\n      this.ends_, this.stride, m, extrapolate, interpolate);\n  }\n\n  /**\n   * Return the coordinates of the multilinestring.\n   * @return {Array<Array<import(\"../coordinate.js\").Coordinate>>} Coordinates.\n   * @override\n   * @api\n   */\n  getCoordinates() {\n    return inflateCoordinatesArray(\n      this.flatCoordinates, 0, this.ends_, this.stride);\n  }\n\n  /**\n   * @return {Array<number>} Ends.\n   */\n  getEnds() {\n    return this.ends_;\n  }\n\n  /**\n   * Return the linestring at the specified index.\n   * @param {number} index Index.\n   * @return {LineString} LineString.\n   * @api\n   */\n  getLineString(index) {\n    if (index < 0 || this.ends_.length <= index) {\n      return null;\n    }\n    return new LineString(this.flatCoordinates.slice(\n      index === 0 ? 0 : this.ends_[index - 1], this.ends_[index]), this.layout);\n  }\n\n  /**\n   * Return the linestrings of this multilinestring.\n   * @return {Array<LineString>} LineStrings.\n   * @api\n   */\n  getLineStrings() {\n    const flatCoordinates = this.flatCoordinates;\n    const ends = this.ends_;\n    const layout = this.layout;\n    /** @type {Array<LineString>} */\n    const lineStrings = [];\n    let offset = 0;\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      const end = ends[i];\n      const lineString = new LineString(flatCoordinates.slice(offset, end), layout);\n      lineStrings.push(lineString);\n      offset = end;\n    }\n    return lineStrings;\n  }\n\n  /**\n   * @return {Array<number>} Flat midpoints.\n   */\n  getFlatMidpoints() {\n    const midpoints = [];\n    const flatCoordinates = this.flatCoordinates;\n    let offset = 0;\n    const ends = this.ends_;\n    const stride = this.stride;\n    for (let i = 0, ii = ends.length; i < ii; ++i) {\n      const end = ends[i];\n      const midpoint = interpolatePoint(\n        flatCoordinates, offset, end, stride, 0.5);\n      extend(midpoints, midpoint);\n      offset = end;\n    }\n    return midpoints;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    const simplifiedFlatCoordinates = [];\n    const simplifiedEnds = [];\n    simplifiedFlatCoordinates.length = douglasPeuckerArray(\n      this.flatCoordinates, 0, this.ends_, this.stride, squaredTolerance,\n      simplifiedFlatCoordinates, 0, simplifiedEnds);\n    return new MultiLineString(simplifiedFlatCoordinates, GeometryLayout.XY, simplifiedEnds);\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.MULTI_LINE_STRING;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    return intersectsLineStringArray(\n      this.flatCoordinates, 0, this.ends_, this.stride, extent);\n  }\n\n  /**\n   * Set the coordinates of the multilinestring.\n   * @param {!Array<Array<import(\"../coordinate.js\").Coordinate>>} coordinates Coordinates.\n   * @param {GeometryLayout=} opt_layout Layout.\n   * @override\n   * @api\n   */\n  setCoordinates(coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 2);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    const ends = deflateCoordinatesArray(\n      this.flatCoordinates, 0, coordinates, this.stride, this.ends_);\n    this.flatCoordinates.length = ends.length === 0 ? 0 : ends[ends.length - 1];\n    this.changed();\n  }\n}\n\n\nexport default MultiLineString;\n","/**\n * @module ol/proj/Projection\n */\nimport {METERS_PER_UNIT} from './Units.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} code The SRS identifier code, e.g. `EPSG:4326`.\n * @property {import(\"./Units.js\").default|string} [units] Units. Required unless a\n * proj4 projection is defined for `code`.\n * @property {import(\"../extent.js\").Extent} [extent] The validity extent for the SRS.\n * @property {string} [axisOrientation='enu'] The axis orientation as specified in Proj4.\n * @property {boolean} [global=false] Whether the projection is valid for the whole globe.\n * @property {number} [metersPerUnit] The meters per unit for the SRS.\n * If not provided, the `units` are used to get the meters per unit from the {@link module:ol/proj/Units~METERS_PER_UNIT}\n * lookup table.\n * @property {import(\"../extent.js\").Extent} [worldExtent] The world extent for the SRS.\n * @property {function(number, import(\"../coordinate.js\").Coordinate):number} [getPointResolution]\n * Function to determine resolution at a point. The function is called with a\n * `{number}` view resolution and an `{import(\"../coordinate.js\").Coordinate}` as arguments, and returns\n * the `{number}` resolution at the passed coordinate. If this is `undefined`,\n * the default {@link module:ol/proj#getPointResolution} function will be used.\n */\n\n\n/**\n * @classdesc\n * Projection definition class. One of these is created for each projection\n * supported in the application and stored in the {@link module:ol/proj} namespace.\n * You can use these in applications, but this is not required, as API params\n * and options use {@link module:ol/proj~ProjectionLike} which means the simple string\n * code will suffice.\n *\n * You can use {@link module:ol/proj~get} to retrieve the object for a particular\n * projection.\n *\n * The library includes definitions for `EPSG:4326` and `EPSG:3857`, together\n * with the following aliases:\n * * `EPSG:4326`: CRS:84, urn:ogc:def:crs:EPSG:6.6:4326,\n *     urn:ogc:def:crs:OGC:1.3:CRS84, urn:ogc:def:crs:OGC:2:84,\n *     http://www.opengis.net/gml/srs/epsg.xml#4326,\n *     urn:x-ogc:def:crs:EPSG:4326\n * * `EPSG:3857`: EPSG:102100, EPSG:102113, EPSG:900913,\n *     urn:ogc:def:crs:EPSG:6.18:3:3857,\n *     http://www.opengis.net/gml/srs/epsg.xml#3857\n *\n * If you use [proj4js](https://github.com/proj4js/proj4js), aliases can\n * be added using `proj4.defs()`. After all required projection definitions are\n * added, call the {@link module:ol/proj/proj4~register} function.\n *\n * @api\n */\nclass Projection {\n\n  /**\n   * @param {Options} options Projection options.\n   */\n  constructor(options) {\n    /**\n     * @private\n     * @type {string}\n     */\n    this.code_ = options.code;\n\n    /**\n     * Units of projected coordinates. When set to `TILE_PIXELS`, a\n     * `this.extent_` and `this.worldExtent_` must be configured properly for each\n     * tile.\n     * @private\n     * @type {import(\"./Units.js\").default}\n     */\n    this.units_ = /** @type {import(\"./Units.js\").default} */ (options.units);\n\n    /**\n     * Validity extent of the projection in projected coordinates. For projections\n     * with `TILE_PIXELS` units, this is the extent of the tile in\n     * tile pixel space.\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.extent_ = options.extent !== undefined ? options.extent : null;\n\n    /**\n     * Extent of the world in EPSG:4326. For projections with\n     * `TILE_PIXELS` units, this is the extent of the tile in\n     * projected coordinate space.\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.worldExtent_ = options.worldExtent !== undefined ?\n      options.worldExtent : null;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.axisOrientation_ = options.axisOrientation !== undefined ?\n      options.axisOrientation : 'enu';\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.global_ = options.global !== undefined ? options.global : false;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.canWrapX_ = !!(this.global_ && this.extent_);\n\n    /**\n     * @private\n     * @type {function(number, import(\"../coordinate.js\").Coordinate):number|undefined}\n     */\n    this.getPointResolutionFunc_ = options.getPointResolution;\n\n    /**\n     * @private\n     * @type {import(\"../tilegrid/TileGrid.js\").default}\n     */\n    this.defaultTileGrid_ = null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.metersPerUnit_ = options.metersPerUnit;\n  }\n\n  /**\n   * @return {boolean} The projection is suitable for wrapping the x-axis\n   */\n  canWrapX() {\n    return this.canWrapX_;\n  }\n\n  /**\n   * Get the code for this projection, e.g. 'EPSG:4326'.\n   * @return {string} Code.\n   * @api\n   */\n  getCode() {\n    return this.code_;\n  }\n\n  /**\n   * Get the validity extent for this projection.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   * @api\n   */\n  getExtent() {\n    return this.extent_;\n  }\n\n  /**\n   * Get the units of this projection.\n   * @return {import(\"./Units.js\").default} Units.\n   * @api\n   */\n  getUnits() {\n    return this.units_;\n  }\n\n  /**\n   * Get the amount of meters per unit of this projection.  If the projection is\n   * not configured with `metersPerUnit` or a units identifier, the return is\n   * `undefined`.\n   * @return {number|undefined} Meters.\n   * @api\n   */\n  getMetersPerUnit() {\n    return this.metersPerUnit_ || METERS_PER_UNIT[this.units_];\n  }\n\n  /**\n   * Get the world extent for this projection.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   * @api\n   */\n  getWorldExtent() {\n    return this.worldExtent_;\n  }\n\n  /**\n   * Get the axis orientation of this projection.\n   * Example values are:\n   * enu - the default easting, northing, elevation.\n   * neu - northing, easting, up - useful for \"lat/long\" geographic coordinates,\n   *     or south orientated transverse mercator.\n   * wnu - westing, northing, up - some planetary coordinate systems have\n   *     \"west positive\" coordinate systems\n   * @return {string} Axis orientation.\n   * @api\n   */\n  getAxisOrientation() {\n    return this.axisOrientation_;\n  }\n\n  /**\n   * Is this projection a global projection which spans the whole world?\n   * @return {boolean} Whether the projection is global.\n   * @api\n   */\n  isGlobal() {\n    return this.global_;\n  }\n\n  /**\n   * Set if the projection is a global projection which spans the whole world\n   * @param {boolean} global Whether the projection is global.\n   * @api\n   */\n  setGlobal(global) {\n    this.global_ = global;\n    this.canWrapX_ = !!(global && this.extent_);\n  }\n\n  /**\n   * @return {import(\"../tilegrid/TileGrid.js\").default} The default tile grid.\n   */\n  getDefaultTileGrid() {\n    return this.defaultTileGrid_;\n  }\n\n  /**\n   * @param {import(\"../tilegrid/TileGrid.js\").default} tileGrid The default tile grid.\n   */\n  setDefaultTileGrid(tileGrid) {\n    this.defaultTileGrid_ = tileGrid;\n  }\n\n  /**\n   * Set the validity extent for this projection.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @api\n   */\n  setExtent(extent) {\n    this.extent_ = extent;\n    this.canWrapX_ = !!(this.global_ && extent);\n  }\n\n  /**\n   * Set the world extent for this projection.\n   * @param {import(\"../extent.js\").Extent} worldExtent World extent\n   *     [minlon, minlat, maxlon, maxlat].\n   * @api\n   */\n  setWorldExtent(worldExtent) {\n    this.worldExtent_ = worldExtent;\n  }\n\n  /**\n   * Set the getPointResolution function (see {@link module:ol/proj~getPointResolution}\n   * for this projection.\n   * @param {function(number, import(\"../coordinate.js\").Coordinate):number} func Function\n   * @api\n   */\n  setGetPointResolution(func) {\n    this.getPointResolutionFunc_ = func;\n  }\n\n  /**\n   * Get the custom point resolution function for this projection (if set).\n   * @return {function(number, import(\"../coordinate.js\").Coordinate):number|undefined} The custom point\n   * resolution function (if set).\n   */\n  getPointResolutionFunc() {\n    return this.getPointResolutionFunc_;\n  }\n}\n\nexport default Projection;\n","/**\n * @module ol/geom/flat/intersectsextent\n */\nimport {containsExtent, createEmpty, extendFlatCoordinates, intersects, intersectsSegment} from '../../extent.js';\nimport {linearRingContainsXY, linearRingContainsExtent} from './contains.js';\nimport {forEach as forEachSegment} from './segments.js';\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLineString(flatCoordinates, offset, end, stride, extent) {\n  const coordinatesExtent = extendFlatCoordinates(\n    createEmpty(), flatCoordinates, offset, end, stride);\n  if (!intersects(extent, coordinatesExtent)) {\n    return false;\n  }\n  if (containsExtent(extent, coordinatesExtent)) {\n    return true;\n  }\n  if (coordinatesExtent[0] >= extent[0] &&\n      coordinatesExtent[2] <= extent[2]) {\n    return true;\n  }\n  if (coordinatesExtent[1] >= extent[1] &&\n      coordinatesExtent[3] <= extent[3]) {\n    return true;\n  }\n  return forEachSegment(flatCoordinates, offset, end, stride,\n    /**\n     * @param {import(\"../../coordinate.js\").Coordinate} point1 Start point.\n     * @param {import(\"../../coordinate.js\").Coordinate} point2 End point.\n     * @return {boolean} `true` if the segment and the extent intersect,\n     *     `false` otherwise.\n     */\n    function(point1, point2) {\n      return intersectsSegment(extent, point1, point2);\n    });\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLineStringArray(flatCoordinates, offset, ends, stride, extent) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    if (intersectsLineString(\n      flatCoordinates, offset, ends[i], stride, extent)) {\n      return true;\n    }\n    offset = ends[i];\n  }\n  return false;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRing(flatCoordinates, offset, end, stride, extent) {\n  if (intersectsLineString(\n    flatCoordinates, offset, end, stride, extent)) {\n    return true;\n  }\n  if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[0], extent[1])) {\n    return true;\n  }\n  if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[0], extent[3])) {\n    return true;\n  }\n  if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[2], extent[1])) {\n    return true;\n  }\n  if (linearRingContainsXY(flatCoordinates, offset, end, stride, extent[2], extent[3])) {\n    return true;\n  }\n  return false;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRingArray(flatCoordinates, offset, ends, stride, extent) {\n  if (!intersectsLinearRing(\n    flatCoordinates, offset, ends[0], stride, extent)) {\n    return false;\n  }\n  if (ends.length === 1) {\n    return true;\n  }\n  for (let i = 1, ii = ends.length; i < ii; ++i) {\n    if (linearRingContainsExtent(flatCoordinates, ends[i - 1], ends[i], stride, extent)) {\n      if (!intersectsLineString(flatCoordinates, ends[i - 1], ends[i], stride, extent)) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} True if the geometry and the extent intersect.\n */\nexport function intersectsLinearRingMultiArray(flatCoordinates, offset, endss, stride, extent) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    if (intersectsLinearRingArray(\n      flatCoordinates, offset, ends, stride, extent)) {\n      return true;\n    }\n    offset = ends[ends.length - 1];\n  }\n  return false;\n}\n","/**\n * @module ol/geom/MultiPoint\n */\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY, containsXY} from '../extent.js';\nimport GeometryType from './GeometryType.js';\nimport Point from './Point.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {deflateCoordinates} from './flat/deflate.js';\nimport {inflateCoordinates} from './flat/inflate.js';\nimport {squaredDistance as squaredDx} from '../math.js';\n\n/**\n * @classdesc\n * Multi-point geometry.\n *\n * @api\n */\nclass MultiPoint extends SimpleGeometry {\n\n  /**\n   * @param {Array<import(\"../coordinate.js\").Coordinate>|Array<number>} coordinates Coordinates.\n   *     For internal use, flat coordinates in combination with `opt_layout` are also accepted.\n   * @param {import(\"./GeometryLayout.js\").default=} opt_layout Layout.\n   */\n  constructor(coordinates, opt_layout) {\n    super();\n    if (opt_layout && !Array.isArray(coordinates[0])) {\n      this.setFlatCoordinates(opt_layout, /** @type {Array<number>} */ (coordinates));\n    } else {\n      this.setCoordinates(/** @type {Array<import(\"../coordinate.js\").Coordinate>} */ (coordinates), opt_layout);\n    }\n  }\n\n  /**\n   * Append the passed point to this multipoint.\n   * @param {Point} point Point.\n   * @api\n   */\n  appendPoint(point) {\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = point.getFlatCoordinates().slice();\n    } else {\n      extend(this.flatCoordinates, point.getFlatCoordinates());\n    }\n    this.changed();\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!MultiPoint} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    const multiPoint = new MultiPoint(this.flatCoordinates.slice(), this.layout);\n    return multiPoint;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    const flatCoordinates = this.flatCoordinates;\n    const stride = this.stride;\n    for (let i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n      const squaredDistance = squaredDx(\n        x, y, flatCoordinates[i], flatCoordinates[i + 1]);\n      if (squaredDistance < minSquaredDistance) {\n        minSquaredDistance = squaredDistance;\n        for (let j = 0; j < stride; ++j) {\n          closestPoint[j] = flatCoordinates[i + j];\n        }\n        closestPoint.length = stride;\n      }\n    }\n    return minSquaredDistance;\n  }\n\n  /**\n   * Return the coordinates of the multipoint.\n   * @return {Array<import(\"../coordinate.js\").Coordinate>} Coordinates.\n   * @override\n   * @api\n   */\n  getCoordinates() {\n    return inflateCoordinates(\n      this.flatCoordinates, 0, this.flatCoordinates.length, this.stride);\n  }\n\n  /**\n   * Return the point at the specified index.\n   * @param {number} index Index.\n   * @return {Point} Point.\n   * @api\n   */\n  getPoint(index) {\n    const n = !this.flatCoordinates ? 0 : this.flatCoordinates.length / this.stride;\n    if (index < 0 || n <= index) {\n      return null;\n    }\n    return new Point(this.flatCoordinates.slice(\n      index * this.stride, (index + 1) * this.stride), this.layout);\n  }\n\n  /**\n   * Return the points of this multipoint.\n   * @return {Array<Point>} Points.\n   * @api\n   */\n  getPoints() {\n    const flatCoordinates = this.flatCoordinates;\n    const layout = this.layout;\n    const stride = this.stride;\n    /** @type {Array<Point>} */\n    const points = [];\n    for (let i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n      const point = new Point(flatCoordinates.slice(i, i + stride), layout);\n      points.push(point);\n    }\n    return points;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.MULTI_POINT;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    const flatCoordinates = this.flatCoordinates;\n    const stride = this.stride;\n    for (let i = 0, ii = flatCoordinates.length; i < ii; i += stride) {\n      const x = flatCoordinates[i];\n      const y = flatCoordinates[i + 1];\n      if (containsXY(extent, x, y)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Set the coordinates of the multipoint.\n   * @param {!Array<import(\"../coordinate.js\").Coordinate>} coordinates Coordinates.\n   * @param {import(\"./GeometryLayout.js\").default=} opt_layout Layout.\n   * @override\n   * @api\n   */\n  setCoordinates(coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 1);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    this.flatCoordinates.length = deflateCoordinates(\n      this.flatCoordinates, 0, coordinates, this.stride);\n    this.changed();\n  }\n}\n\n\nexport default MultiPoint;\n","/**\n * @module ol/Kinetic\n */\n\n/**\n * @classdesc\n * Implementation of inertial deceleration for map movement.\n *\n * @api\n */\nclass Kinetic {\n\n  /**\n   * @param {number} decay Rate of decay (must be negative).\n   * @param {number} minVelocity Minimum velocity (pixels/millisecond).\n   * @param {number} delay Delay to consider to calculate the kinetic\n   *     initial values (milliseconds).\n   */\n  constructor(decay, minVelocity, delay) {\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.decay_ = decay;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.minVelocity_ = minVelocity;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.delay_ = delay;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.points_ = [];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.angle_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.initialVelocity_ = 0;\n  }\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  begin() {\n    this.points_.length = 0;\n    this.angle_ = 0;\n    this.initialVelocity_ = 0;\n  }\n\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   */\n  update(x, y) {\n    this.points_.push(x, y, Date.now());\n  }\n\n  /**\n   * @return {boolean} Whether we should do kinetic animation.\n   */\n  end() {\n    if (this.points_.length < 6) {\n      // at least 2 points are required (i.e. there must be at least 6 elements\n      // in the array)\n      return false;\n    }\n    const delay = Date.now() - this.delay_;\n    const lastIndex = this.points_.length - 3;\n    if (this.points_[lastIndex + 2] < delay) {\n      // the last tracked point is too old, which means that the user stopped\n      // panning before releasing the map\n      return false;\n    }\n\n    // get the first point which still falls into the delay time\n    let firstIndex = lastIndex - 3;\n    while (firstIndex > 0 && this.points_[firstIndex + 2] > delay) {\n      firstIndex -= 3;\n    }\n\n    const duration = this.points_[lastIndex + 2] - this.points_[firstIndex + 2];\n    // we don't want a duration of 0 (divide by zero)\n    // we also make sure the user panned for a duration of at least one frame\n    // (1/60s) to compute sane displacement values\n    if (duration < 1000 / 60) {\n      return false;\n    }\n\n    const dx = this.points_[lastIndex] - this.points_[firstIndex];\n    const dy = this.points_[lastIndex + 1] - this.points_[firstIndex + 1];\n    this.angle_ = Math.atan2(dy, dx);\n    this.initialVelocity_ = Math.sqrt(dx * dx + dy * dy) / duration;\n    return this.initialVelocity_ > this.minVelocity_;\n  }\n\n  /**\n   * @return {number} Total distance travelled (pixels).\n   */\n  getDistance() {\n    return (this.minVelocity_ - this.initialVelocity_) / this.decay_;\n  }\n\n  /**\n   * @return {number} Angle of the kinetic panning animation (radians).\n   */\n  getAngle() {\n    return this.angle_;\n  }\n}\n\nexport default Kinetic;\n","/**\n * @module ol/interaction/DoubleClickZoom\n */\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport Interaction, {zoomByDelta} from './Interaction.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {number} [delta=1] The zoom delta applied on each double click.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom by double-clicking on the map.\n * @api\n */\nclass DoubleClickZoom extends Interaction {\n\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    super({\n      handleEvent: handleEvent\n    });\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.delta_ = options.delta ? options.delta : 1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n  }\n\n}\n\n\n/**\n * Handles the {@link module:ol/MapBrowserEvent map browser event} (if it was a\n * doubleclick) and eventually zooms the map.\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {DoubleClickZoom}\n */\nfunction handleEvent(mapBrowserEvent) {\n  let stopEvent = false;\n  if (mapBrowserEvent.type == MapBrowserEventType.DBLCLICK) {\n    const browserEvent = /** @type {MouseEvent} */ (mapBrowserEvent.originalEvent);\n    const map = mapBrowserEvent.map;\n    const anchor = mapBrowserEvent.coordinate;\n    const delta = browserEvent.shiftKey ? -this.delta_ : this.delta_;\n    const view = map.getView();\n    zoomByDelta(view, delta, anchor, this.duration_);\n    mapBrowserEvent.preventDefault();\n    stopEvent = true;\n  }\n  return !stopEvent;\n}\n\nexport default DoubleClickZoom;\n","/**\n * @module ol/events/condition\n */\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport {assert} from '../asserts.js';\nimport {TRUE, FALSE} from '../functions.js';\nimport {WEBKIT, MAC} from '../has.js';\n\n\n/**\n * A function that takes an {@link module:ol/MapBrowserEvent} and returns a\n * `{boolean}`. If the condition is met, true should be returned.\n *\n * @typedef {function(this: ?, import(\"../MapBrowserEvent.js\").default): boolean} Condition\n */\n\n\n/**\n * Return `true` if only the alt-key is pressed, `false` otherwise (e.g. when\n * additionally the shift-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the alt key is pressed.\n * @api\n */\nexport const altKeyOnly = function(mapBrowserEvent) {\n  const originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n  return (\n    originalEvent.altKey &&\n      !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n      !originalEvent.shiftKey);\n};\n\n\n/**\n * Return `true` if only the alt-key and shift-key is pressed, `false` otherwise\n * (e.g. when additionally the platform-modifier-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the alt and shift keys are pressed.\n * @api\n */\nexport const altShiftKeysOnly = function(mapBrowserEvent) {\n  const originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n  return (\n    originalEvent.altKey &&\n      !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n      originalEvent.shiftKey);\n};\n\n\n/**\n * Return `true` if the map has the focus. This condition requires a map target\n * element with a `tabindex` attribute, e.g. `<div id=\"map\" tabindex=\"1\">`.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} event Map browser event.\n * @return {boolean} The map has the focus.\n * @api\n */\nexport const focus = function(event) {\n  return event.target.getTargetElement() === document.activeElement;\n};\n\n\n/**\n * Return always true.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True.\n * @api\n */\nexport const always = TRUE;\n\n\n/**\n * Return `true` if the event is a `click` event, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `click` event.\n * @api\n */\nexport const click = function(mapBrowserEvent) {\n  return mapBrowserEvent.type == MapBrowserEventType.CLICK;\n};\n\n\n/**\n * Return `true` if the event has an \"action\"-producing mouse button.\n *\n * By definition, this includes left-click on windows/linux, and left-click\n * without the ctrl key on Macs.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} The result.\n */\nexport const mouseActionButton = function(mapBrowserEvent) {\n  const originalEvent = /** @type {MouseEvent} */ (mapBrowserEvent.originalEvent);\n  return originalEvent.button == 0 &&\n      !(WEBKIT && MAC && originalEvent.ctrlKey);\n};\n\n\n/**\n * Return always false.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} False.\n * @api\n */\nexport const never = FALSE;\n\n\n/**\n * Return `true` if the browser event is a `pointermove` event, `false`\n * otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the browser event is a `pointermove` event.\n * @api\n */\nexport const pointerMove = function(mapBrowserEvent) {\n  return mapBrowserEvent.type == 'pointermove';\n};\n\n\n/**\n * Return `true` if the event is a map `singleclick` event, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `singleclick` event.\n * @api\n */\nexport const singleClick = function(mapBrowserEvent) {\n  return mapBrowserEvent.type == MapBrowserEventType.SINGLECLICK;\n};\n\n\n/**\n * Return `true` if the event is a map `dblclick` event, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event is a map `dblclick` event.\n * @api\n */\nexport const doubleClick = function(mapBrowserEvent) {\n  return mapBrowserEvent.type == MapBrowserEventType.DBLCLICK;\n};\n\n\n/**\n * Return `true` if no modifier key (alt-, shift- or platform-modifier-key) is\n * pressed.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True only if there no modifier keys are pressed.\n * @api\n */\nexport const noModifierKeys = function(mapBrowserEvent) {\n  const originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n  return (\n    !originalEvent.altKey &&\n      !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n      !originalEvent.shiftKey);\n};\n\n\n/**\n * Return `true` if only the platform-modifier-key (the meta-key on Mac,\n * ctrl-key otherwise) is pressed, `false` otherwise (e.g. when additionally\n * the shift-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the platform modifier key is pressed.\n * @api\n */\nexport const platformModifierKeyOnly = function(mapBrowserEvent) {\n  const originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n  return !originalEvent.altKey &&\n    (MAC ? originalEvent.metaKey : originalEvent.ctrlKey) &&\n    !originalEvent.shiftKey;\n};\n\n\n/**\n * Return `true` if only the shift-key is pressed, `false` otherwise (e.g. when\n * additionally the alt-key is pressed).\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if only the shift key is pressed.\n * @api\n */\nexport const shiftKeyOnly = function(mapBrowserEvent) {\n  const originalEvent = /** @type {KeyboardEvent|MouseEvent|TouchEvent} */ (mapBrowserEvent.originalEvent);\n  return (\n    !originalEvent.altKey &&\n      !(originalEvent.metaKey || originalEvent.ctrlKey) &&\n      originalEvent.shiftKey);\n};\n\n\n/**\n * Return `true` if the target element is not editable, i.e. not a `<input>`-,\n * `<select>`- or `<textarea>`-element, `false` otherwise.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True only if the target element is not editable.\n * @api\n */\nexport const targetNotEditable = function(mapBrowserEvent) {\n  const target = mapBrowserEvent.originalEvent.target;\n  const tagName = /** @type {Element} */ (target).tagName;\n  return (\n    tagName !== 'INPUT' &&\n      tagName !== 'SELECT' &&\n      tagName !== 'TEXTAREA');\n};\n\n\n/**\n * Return `true` if the event originates from a mouse device.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a mouse device.\n * @api\n */\nexport const mouseOnly = function(mapBrowserEvent) {\n  const pointerEvent = /** @type {import(\"../MapBrowserPointerEvent\").default} */ (mapBrowserEvent).pointerEvent;\n  assert(pointerEvent !== undefined, 56); // mapBrowserEvent must originate from a pointer event\n  // see http://www.w3.org/TR/pointerevents/#widl-PointerEvent-pointerType\n  return pointerEvent.pointerType == 'mouse';\n};\n\n\n/**\n * Return `true` if the event originates from a primary pointer in\n * contact with the surface or if the left mouse button is pressed.\n * See http://www.w3.org/TR/pointerevents/#button-states.\n *\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} True if the event originates from a primary pointer.\n * @api\n */\nexport const primaryAction = function(mapBrowserEvent) {\n  const pointerEvent = /** @type {import(\"../MapBrowserPointerEvent\").default} */ (mapBrowserEvent).pointerEvent;\n  assert(pointerEvent !== undefined, 56); // mapBrowserEvent must originate from a pointer event\n  return pointerEvent.isPrimary && pointerEvent.button === 0;\n};\n","/**\n * @module ol/interaction/Pointer\n */\nimport MapBrowserEventType from '../MapBrowserEventType.js';\nimport Interaction from './Interaction.js';\nimport {getValues} from '../obj.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {function(import(\"../MapBrowserPointerEvent.js\").default):boolean} [handleDownEvent]\n * Function handling \"down\" events. If the function returns `true` then a drag\n * sequence is started.\n * @property {function(import(\"../MapBrowserPointerEvent.js\").default)} [handleDragEvent]\n * Function handling \"drag\" events. This function is called on \"move\" events\n * during a drag sequence.\n * @property {function(import(\"../MapBrowserEvent.js\").default):boolean} [handleEvent]\n * Method called by the map to notify the interaction that a browser event was\n * dispatched to the map. The function may return `false` to prevent the\n * propagation of the event to other interactions in the map's interactions\n * chain.\n * @property {function(import(\"../MapBrowserPointerEvent.js\").default)} [handleMoveEvent]\n * Function handling \"move\" events. This function is called on \"move\" events,\n * also during a drag sequence (so during a drag sequence both the\n * `handleDragEvent` function and this function are called).\n * @property {function(import(\"../MapBrowserPointerEvent.js\").default):boolean} [handleUpEvent]\n *  Function handling \"up\" events. If the function returns `false` then the\n * current drag sequence is stopped.\n * @property {function(boolean):boolean} [stopDown]\n * Should the down event be propagated to other interactions, or should be\n * stopped?\n */\n\n\n/**\n * @classdesc\n * Base class that calls user-defined functions on `down`, `move` and `up`\n * events. This class also manages \"drag sequences\".\n *\n * When the `handleDownEvent` user function returns `true` a drag sequence is\n * started. During a drag sequence the `handleDragEvent` user function is\n * called on `move` events. The drag sequence ends when the `handleUpEvent`\n * user function is called and returns `false`.\n * @api\n */\nclass PointerInteraction extends Interaction {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super(/** @type {import(\"./Interaction.js\").InteractionOptions} */ (options));\n\n    if (options.handleDownEvent) {\n      this.handleDownEvent = options.handleDownEvent;\n    }\n\n    if (options.handleDragEvent) {\n      this.handleDragEvent = options.handleDragEvent;\n    }\n\n    if (options.handleMoveEvent) {\n      this.handleMoveEvent = options.handleMoveEvent;\n    }\n\n    if (options.handleUpEvent) {\n      this.handleUpEvent = options.handleUpEvent;\n    }\n\n    if (options.stopDown) {\n      this.stopDown = options.stopDown;\n    }\n\n    /**\n     * @type {boolean}\n     * @protected\n     */\n    this.handlingDownUpSequence = false;\n\n    /**\n     * @type {!Object<string, import(\"../pointer/PointerEvent.js\").default>}\n     * @private\n     */\n    this.trackedPointers_ = {};\n\n    /**\n     * @type {Array<import(\"../pointer/PointerEvent.js\").default>}\n     * @protected\n     */\n    this.targetPointers = [];\n\n  }\n\n  /**\n   * Handle pointer down events.\n   * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n   * @return {boolean} If the event was consumed.\n   * @protected\n   */\n  handleDownEvent(mapBrowserEvent) {\n    return false;\n  }\n\n  /**\n   * Handle pointer drag events.\n   * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n   * @protected\n   */\n  handleDragEvent(mapBrowserEvent) {}\n\n  /**\n   * Handles the {@link module:ol/MapBrowserEvent map browser event} and may call into\n   * other functions, if event sequences like e.g. 'drag' or 'down-up' etc. are\n   * detected.\n   * @override\n   * @api\n   */\n  handleEvent(mapBrowserEvent) {\n    if (!(/** @type {import(\"../MapBrowserPointerEvent.js\").default} */ (mapBrowserEvent).pointerEvent)) {\n      return true;\n    }\n\n    let stopEvent = false;\n    this.updateTrackedPointers_(mapBrowserEvent);\n    if (this.handlingDownUpSequence) {\n      if (mapBrowserEvent.type == MapBrowserEventType.POINTERDRAG) {\n        this.handleDragEvent(mapBrowserEvent);\n      } else if (mapBrowserEvent.type == MapBrowserEventType.POINTERUP) {\n        const handledUp = this.handleUpEvent(mapBrowserEvent);\n        this.handlingDownUpSequence = handledUp && this.targetPointers.length > 0;\n      }\n    } else {\n      if (mapBrowserEvent.type == MapBrowserEventType.POINTERDOWN) {\n        const handled = this.handleDownEvent(mapBrowserEvent);\n        if (handled) {\n          mapBrowserEvent.preventDefault();\n        }\n        this.handlingDownUpSequence = handled;\n        stopEvent = this.stopDown(handled);\n      } else if (mapBrowserEvent.type == MapBrowserEventType.POINTERMOVE) {\n        this.handleMoveEvent(mapBrowserEvent);\n      }\n    }\n    return !stopEvent;\n  }\n\n  /**\n   * Handle pointer move events.\n   * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n   * @protected\n   */\n  handleMoveEvent(mapBrowserEvent) {}\n\n  /**\n   * Handle pointer up events.\n   * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n   * @return {boolean} If the event was consumed.\n   * @protected\n   */\n  handleUpEvent(mapBrowserEvent) {\n    return false;\n  }\n\n  /**\n   * This function is used to determine if \"down\" events should be propagated\n   * to other interactions or should be stopped.\n   * @param {boolean} handled Was the event handled by the interaction?\n   * @return {boolean} Should the `down` event be stopped?\n   */\n  stopDown(handled) {\n    return handled;\n  }\n\n  /**\n   * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n   * @private\n   */\n  updateTrackedPointers_(mapBrowserEvent) {\n    if (isPointerDraggingEvent(mapBrowserEvent)) {\n      const event = mapBrowserEvent.pointerEvent;\n\n      const id = event.pointerId.toString();\n      if (mapBrowserEvent.type == MapBrowserEventType.POINTERUP) {\n        delete this.trackedPointers_[id];\n      } else if (mapBrowserEvent.type ==\n          MapBrowserEventType.POINTERDOWN) {\n        this.trackedPointers_[id] = event;\n      } else if (id in this.trackedPointers_) {\n        // update only when there was a pointerdown event for this pointer\n        this.trackedPointers_[id] = event;\n      }\n      this.targetPointers = getValues(this.trackedPointers_);\n    }\n  }\n\n}\n\n\n/**\n * @param {Array<import(\"../pointer/PointerEvent.js\").default>} pointerEvents List of events.\n * @return {import(\"../pixel.js\").Pixel} Centroid pixel.\n */\nexport function centroid(pointerEvents) {\n  const length = pointerEvents.length;\n  let clientX = 0;\n  let clientY = 0;\n  for (let i = 0; i < length; i++) {\n    clientX += pointerEvents[i].clientX;\n    clientY += pointerEvents[i].clientY;\n  }\n  return [clientX / length, clientY / length];\n}\n\n\n/**\n * @param {import(\"../MapBrowserPointerEvent.js\").default} mapBrowserEvent Event.\n * @return {boolean} Whether the event is a pointerdown, pointerdrag\n *     or pointerup event.\n */\nfunction isPointerDraggingEvent(mapBrowserEvent) {\n  const type = mapBrowserEvent.type;\n  return type === MapBrowserEventType.POINTERDOWN ||\n    type === MapBrowserEventType.POINTERDRAG ||\n    type === MapBrowserEventType.POINTERUP;\n}\n\n\nexport default PointerInteraction;\n","/**\n * @module ol/interaction/DragPan\n */\nimport ViewHint from '../ViewHint.js';\nimport {scale as scaleCoordinate, rotate as rotateCoordinate, add as addCoordinate} from '../coordinate.js';\nimport {easeOut} from '../easing.js';\nimport {noModifierKeys} from '../events/condition.js';\nimport {FALSE} from '../functions.js';\nimport PointerInteraction, {centroid as centroidFromPointers} from './Pointer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition~noModifierKeys}.\n * @property {import(\"../Kinetic.js\").default} [kinetic] Kinetic inertia to apply to the pan.\n */\n\n\n/**\n * @classdesc\n * Allows the user to pan the map by dragging the map.\n * @api\n */\nclass DragPan extends PointerInteraction {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    super({\n      stopDown: FALSE\n    });\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n     * @private\n     * @type {import(\"../Kinetic.js\").default|undefined}\n     */\n    this.kinetic_ = options.kinetic;\n\n    /**\n     * @type {import(\"../pixel.js\").Pixel}\n     */\n    this.lastCentroid = null;\n\n    /**\n     * @type {number}\n     */\n    this.lastPointersCount_;\n\n    /**\n     * @type {boolean}\n     */\n    this.panning_ = false;\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition ? options.condition : noModifierKeys;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.noKinetic_ = false;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDragEvent(mapBrowserEvent) {\n    if (!this.panning_) {\n      this.panning_ = true;\n      this.getMap().getView().setHint(ViewHint.INTERACTING, 1);\n    }\n    const targetPointers = this.targetPointers;\n    const centroid = centroidFromPointers(targetPointers);\n    if (targetPointers.length == this.lastPointersCount_) {\n      if (this.kinetic_) {\n        this.kinetic_.update(centroid[0], centroid[1]);\n      }\n      if (this.lastCentroid) {\n        const deltaX = this.lastCentroid[0] - centroid[0];\n        const deltaY = centroid[1] - this.lastCentroid[1];\n        const map = mapBrowserEvent.map;\n        const view = map.getView();\n        let center = [deltaX, deltaY];\n        scaleCoordinate(center, view.getResolution());\n        rotateCoordinate(center, view.getRotation());\n        addCoordinate(center, view.getCenter());\n        center = view.constrainCenter(center);\n        view.setCenter(center);\n      }\n    } else if (this.kinetic_) {\n      // reset so we don't overestimate the kinetic energy after\n      // after one finger down, tiny drag, second finger down\n      this.kinetic_.begin();\n    }\n    this.lastCentroid = centroid;\n    this.lastPointersCount_ = targetPointers.length;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleUpEvent(mapBrowserEvent) {\n    const map = mapBrowserEvent.map;\n    const view = map.getView();\n    if (this.targetPointers.length === 0) {\n      if (!this.noKinetic_ && this.kinetic_ && this.kinetic_.end()) {\n        const distance = this.kinetic_.getDistance();\n        const angle = this.kinetic_.getAngle();\n        const center = /** @type {!import(\"../coordinate.js\").Coordinate} */ (view.getCenter());\n        const centerpx = map.getPixelFromCoordinate(center);\n        const dest = map.getCoordinateFromPixel([\n          centerpx[0] - distance * Math.cos(angle),\n          centerpx[1] - distance * Math.sin(angle)\n        ]);\n        view.animate({\n          center: view.constrainCenter(dest),\n          duration: 500,\n          easing: easeOut\n        });\n      }\n      if (this.panning_) {\n        this.panning_ = false;\n        view.setHint(ViewHint.INTERACTING, -1);\n      }\n      return false;\n    } else {\n      if (this.kinetic_) {\n        // reset so we don't overestimate the kinetic energy after\n        // after one finger up, tiny drag, second finger up\n        this.kinetic_.begin();\n      }\n      this.lastCentroid = null;\n      return true;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDownEvent(mapBrowserEvent) {\n    if (this.targetPointers.length > 0 && this.condition_(mapBrowserEvent)) {\n      const map = mapBrowserEvent.map;\n      const view = map.getView();\n      this.lastCentroid = null;\n      // stop any current animation\n      if (view.getAnimating()) {\n        view.setCenter(mapBrowserEvent.frameState.viewState.center);\n      }\n      if (this.kinetic_) {\n        this.kinetic_.begin();\n      }\n      // No kinetic as soon as more than one pointer on the screen is\n      // detected. This is to prevent nasty pans after pinch.\n      this.noKinetic_ = this.targetPointers.length > 1;\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n\nexport default DragPan;\n","/**\n * @module ol/interaction/DragRotate\n */\nimport {disable} from '../rotationconstraint.js';\nimport ViewHint from '../ViewHint.js';\nimport {altShiftKeysOnly, mouseOnly, mouseActionButton} from '../events/condition.js';\nimport {FALSE} from '../functions.js';\nimport {rotate, rotateWithoutConstraints} from './Interaction.js';\nimport PointerInteraction from './Pointer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that takes an\n * {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition~altShiftKeysOnly}.\n * @property {number} [duration=250] Animation duration in milliseconds.\n */\n\n\n/**\n * @classdesc\n * Allows the user to rotate the map by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when the alt and shift keys are held down.\n *\n * This interaction is only supported for mouse devices.\n * @api\n */\nclass DragRotate extends PointerInteraction {\n\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super({\n      stopDown: FALSE\n    });\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition ? options.condition : altShiftKeysOnly;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.lastAngle_ = undefined;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDragEvent(mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return;\n    }\n\n    const map = mapBrowserEvent.map;\n    const view = map.getView();\n    if (view.getConstraints().rotation === disable) {\n      return;\n    }\n    const size = map.getSize();\n    const offset = mapBrowserEvent.pixel;\n    const theta =\n        Math.atan2(size[1] / 2 - offset[1], offset[0] - size[0] / 2);\n    if (this.lastAngle_ !== undefined) {\n      const delta = theta - this.lastAngle_;\n      const rotation = view.getRotation();\n      rotateWithoutConstraints(view, rotation - delta);\n    }\n    this.lastAngle_ = theta;\n  }\n\n\n  /**\n   * @inheritDoc\n   */\n  handleUpEvent(mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return true;\n    }\n\n    const map = mapBrowserEvent.map;\n    const view = map.getView();\n    view.setHint(ViewHint.INTERACTING, -1);\n    const rotation = view.getRotation();\n    rotate(view, rotation, undefined, this.duration_);\n    return false;\n  }\n\n\n  /**\n   * @inheritDoc\n   */\n  handleDownEvent(mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return false;\n    }\n\n    if (mouseActionButton(mapBrowserEvent) && this.condition_(mapBrowserEvent)) {\n      const map = mapBrowserEvent.map;\n      map.getView().setHint(ViewHint.INTERACTING, 1);\n      this.lastAngle_ = undefined;\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n\nexport default DragRotate;\n","/**\n * @module ol/render/Box\n */\n\nimport Disposable from '../Disposable.js';\nimport Polygon from '../geom/Polygon.js';\n\nclass RenderBox extends Disposable {\n  /**\n   * @param {string} className CSS class name.\n   */\n  constructor(className) {\n    super();\n\n    /**\n     * @type {import(\"../geom/Polygon.js\").default}\n     * @private\n     */\n    this.geometry_ = null;\n\n    /**\n     * @type {HTMLDivElement}\n     * @private\n     */\n    this.element_ = /** @type {HTMLDivElement} */ (document.createElement('div'));\n    this.element_.style.position = 'absolute';\n    this.element_.className = 'ol-box ' + className;\n\n    /**\n     * @private\n     * @type {import(\"../PluggableMap.js\").default}\n     */\n    this.map_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../pixel.js\").Pixel}\n     */\n    this.startPixel_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../pixel.js\").Pixel}\n     */\n    this.endPixel_ = null;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    this.setMap(null);\n  }\n\n  /**\n   * @private\n   */\n  render_() {\n    const startPixel = this.startPixel_;\n    const endPixel = this.endPixel_;\n    const px = 'px';\n    const style = this.element_.style;\n    style.left = Math.min(startPixel[0], endPixel[0]) + px;\n    style.top = Math.min(startPixel[1], endPixel[1]) + px;\n    style.width = Math.abs(endPixel[0] - startPixel[0]) + px;\n    style.height = Math.abs(endPixel[1] - startPixel[1]) + px;\n  }\n\n  /**\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   */\n  setMap(map) {\n    if (this.map_) {\n      this.map_.getOverlayContainer().removeChild(this.element_);\n      const style = this.element_.style;\n      style.left = style.top = style.width = style.height = 'inherit';\n    }\n    this.map_ = map;\n    if (this.map_) {\n      this.map_.getOverlayContainer().appendChild(this.element_);\n    }\n  }\n\n  /**\n   * @param {import(\"../pixel.js\").Pixel} startPixel Start pixel.\n   * @param {import(\"../pixel.js\").Pixel} endPixel End pixel.\n   */\n  setPixels(startPixel, endPixel) {\n    this.startPixel_ = startPixel;\n    this.endPixel_ = endPixel;\n    this.createOrUpdateGeometry();\n    this.render_();\n  }\n\n  /**\n   * Creates or updates the cached geometry.\n   */\n  createOrUpdateGeometry() {\n    const startPixel = this.startPixel_;\n    const endPixel = this.endPixel_;\n    const pixels = [\n      startPixel,\n      [startPixel[0], endPixel[1]],\n      endPixel,\n      [endPixel[0], startPixel[1]]\n    ];\n    const coordinates = pixels.map(this.map_.getCoordinateFromPixel, this.map_);\n    // close the polygon\n    coordinates[4] = coordinates[0].slice();\n    if (!this.geometry_) {\n      this.geometry_ = new Polygon([coordinates]);\n    } else {\n      this.geometry_.setCoordinates([coordinates]);\n    }\n  }\n\n  /**\n   * @return {import(\"../geom/Polygon.js\").default} Geometry.\n   */\n  getGeometry() {\n    return this.geometry_;\n  }\n}\n\n\nexport default RenderBox;\n","/**\n * @module ol/interaction/DragBox\n */\n// FIXME draw drag box\nimport Event from '../events/Event.js';\nimport {always, mouseOnly, mouseActionButton} from '../events/condition.js';\nimport {VOID} from '../functions.js';\nimport PointerInteraction from './Pointer.js';\nimport RenderBox from '../render/Box.js';\n\n\n/**\n * A function that takes a {@link module:ol/MapBrowserEvent} and two\n * {@link module:ol/pixel~Pixel}s and returns a `{boolean}`. If the condition is met,\n * true should be returned.\n * @typedef {function(this: ?, import(\"../MapBrowserEvent.js\").default, import(\"../pixel.js\").Pixel, import(\"../pixel.js\").Pixel):boolean} EndCondition\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-dragbox'] CSS class name for styling the box.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a boolean\n * to indicate whether that event should be handled.\n * Default is {@link ol/events/condition~always}.\n * @property {number} [minArea=64] The minimum area of the box in pixel, this value is used by the default\n * `boxEndCondition` function.\n * @property {EndCondition} [boxEndCondition] A function that takes a {@link module:ol/MapBrowserEvent~MapBrowserEvent} and two\n * {@link module:ol/pixel~Pixel}s to indicate whether a `boxend` event should be fired.\n * Default is `true` if the area of the box is bigger than the `minArea` option.\n * @property {function(this:DragBox, import(\"../MapBrowserEvent.js\").default)} onBoxEnd Code to execute just\n * before `boxend` is fired.\n */\n\n\n/**\n * @enum {string}\n */\nconst DragBoxEventType = {\n  /**\n   * Triggered upon drag box start.\n   * @event DragBoxEvent#boxstart\n   * @api\n   */\n  BOXSTART: 'boxstart',\n\n  /**\n   * Triggered on drag when box is active.\n   * @event DragBoxEvent#boxdrag\n   * @api\n   */\n  BOXDRAG: 'boxdrag',\n\n  /**\n   * Triggered upon drag box end.\n   * @event DragBoxEvent#boxend\n   * @api\n   */\n  BOXEND: 'boxend'\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/DragBox~DragBox} instances are instances of\n * this type.\n */\nclass DragBoxEvent extends Event {\n\n  /**\n   * @param {string} type The event type.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate The event coordinate.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Originating event.\n   */\n  constructor(type, coordinate, mapBrowserEvent) {\n    super(type);\n\n    /**\n     * The coordinate of the drag event.\n     * @const\n     * @type {import(\"../coordinate.js\").Coordinate}\n     * @api\n     */\n    this.coordinate = coordinate;\n\n    /**\n     * @const\n     * @type {import(\"../MapBrowserEvent.js\").default}\n     * @api\n     */\n    this.mapBrowserEvent = mapBrowserEvent;\n\n  }\n\n}\n\n\n/**\n * @classdesc\n * Allows the user to draw a vector box by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when the shift or other key is held down. This is used, for example,\n * for zooming to a specific area of the map\n * (see {@link module:ol/interaction/DragZoom~DragZoom} and\n * {@link module:ol/interaction/DragRotateAndZoom}).\n *\n * This interaction is only supported for mouse devices.\n *\n * @fires DragBoxEvent\n * @api\n */\nclass DragBox extends PointerInteraction {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    super();\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n    * @type {import(\"../render/Box.js\").default}\n    * @private\n    */\n    this.box_ = new RenderBox(options.className || 'ol-dragbox');\n\n    /**\n    * @type {number}\n    * @private\n    */\n    this.minArea_ = options.minArea !== undefined ? options.minArea : 64;\n\n    /**\n     * Function to execute just before `onboxend` is fired\n     * @type {function(this:DragBox, import(\"../MapBrowserEvent.js\").default)}\n     * @private\n     */\n    this.onBoxEnd_ = options.onBoxEnd ? options.onBoxEnd : VOID;\n\n    /**\n    * @type {import(\"../pixel.js\").Pixel}\n    * @private\n    */\n    this.startPixel_ = null;\n\n    /**\n    * @private\n    * @type {import(\"../events/condition.js\").Condition}\n    */\n    this.condition_ = options.condition ? options.condition : always;\n\n    /**\n    * @private\n    * @type {EndCondition}\n    */\n    this.boxEndCondition_ = options.boxEndCondition ?\n      options.boxEndCondition : this.defaultBoxEndCondition;\n  }\n\n  /**\n   * The default condition for determining whether the boxend event\n   * should fire.\n   * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent The originating MapBrowserEvent\n   *     leading to the box end.\n   * @param {import(\"../pixel.js\").Pixel} startPixel The starting pixel of the box.\n   * @param {import(\"../pixel.js\").Pixel} endPixel The end pixel of the box.\n   * @return {boolean} Whether or not the boxend condition should be fired.\n   */\n  defaultBoxEndCondition(mapBrowserEvent, startPixel, endPixel) {\n    const width = endPixel[0] - startPixel[0];\n    const height = endPixel[1] - startPixel[1];\n    return width * width + height * height >= this.minArea_;\n  }\n\n  /**\n  * Returns geometry of last drawn box.\n  * @return {import(\"../geom/Polygon.js\").default} Geometry.\n  * @api\n  */\n  getGeometry() {\n    return this.box_.getGeometry();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDragEvent(mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return;\n    }\n\n    this.box_.setPixels(this.startPixel_, mapBrowserEvent.pixel);\n\n    this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXDRAG,\n      mapBrowserEvent.coordinate, mapBrowserEvent));\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleUpEvent(mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return true;\n    }\n\n    this.box_.setMap(null);\n\n    if (this.boxEndCondition_(mapBrowserEvent, this.startPixel_, mapBrowserEvent.pixel)) {\n      this.onBoxEnd_(mapBrowserEvent);\n      this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXEND,\n        mapBrowserEvent.coordinate, mapBrowserEvent));\n    }\n    return false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDownEvent(mapBrowserEvent) {\n    if (!mouseOnly(mapBrowserEvent)) {\n      return false;\n    }\n\n    if (mouseActionButton(mapBrowserEvent) &&\n        this.condition_(mapBrowserEvent)) {\n      this.startPixel_ = mapBrowserEvent.pixel;\n      this.box_.setMap(mapBrowserEvent.map);\n      this.box_.setPixels(this.startPixel_, this.startPixel_);\n      this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXSTART,\n        mapBrowserEvent.coordinate, mapBrowserEvent));\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n\n\nexport default DragBox;\n","/**\n * @module ol/interaction/DragZoom\n */\nimport {easeOut} from '../easing.js';\nimport {shiftKeyOnly} from '../events/condition.js';\nimport {createOrUpdateFromCoordinates, getBottomLeft, getCenter, getTopRight, scaleFromCenter} from '../extent.js';\nimport DragBox from './DragBox.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {string} [className='ol-dragzoom'] CSS class name for styling the\n * box.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled.\n * Default is {@link module:ol/events/condition~shiftKeyOnly}.\n * @property {number} [duration=200] Animation duration in milliseconds.\n * @property {boolean} [out=false] Use interaction for zooming out.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom the map by clicking and dragging on the map,\n * normally combined with an {@link module:ol/events/condition} that limits\n * it to when a key, shift by default, is held down.\n *\n * To change the style of the box, use CSS and the `.ol-dragzoom` selector, or\n * your custom one configured with `className`.\n * @api\n */\nclass DragZoom extends DragBox {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    const options = opt_options ? opt_options : {};\n\n    const condition = options.condition ? options.condition : shiftKeyOnly;\n\n    super({\n      condition: condition,\n      className: options.className || 'ol-dragzoom',\n      onBoxEnd: onBoxEnd\n    });\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 200;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.out_ = options.out !== undefined ? options.out : false;\n  }\n}\n\n\n/**\n * @this {DragZoom}\n */\nfunction onBoxEnd() {\n  const map = this.getMap();\n  const view = /** @type {!import(\"../View.js\").default} */ (map.getView());\n  const size = /** @type {!import(\"../size.js\").Size} */ (map.getSize());\n  let extent = this.getGeometry().getExtent();\n\n  if (this.out_) {\n    const mapExtent = view.calculateExtent(size);\n    const boxPixelExtent = createOrUpdateFromCoordinates([\n      map.getPixelFromCoordinate(getBottomLeft(extent)),\n      map.getPixelFromCoordinate(getTopRight(extent))]);\n    const factor = view.getResolutionForExtent(boxPixelExtent, size);\n\n    scaleFromCenter(mapExtent, 1 / factor);\n    extent = mapExtent;\n  }\n\n  const resolution = view.constrainResolution(\n    view.getResolutionForExtent(extent, size));\n\n  let center = getCenter(extent);\n  center = view.constrainCenter(center);\n\n  view.animate({\n    resolution: resolution,\n    center: center,\n    duration: this.duration_,\n    easing: easeOut\n  });\n}\n\n\nexport default DragZoom;\n","/**\n * @module ol/events/KeyCode\n */\n\n/**\n * @enum {number}\n * @const\n */\nexport default {\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40\n};\n","/**\n * @module ol/interaction/KeyboardPan\n */\nimport {rotate as rotateCoordinate} from '../coordinate.js';\nimport EventType from '../events/EventType.js';\nimport KeyCode from '../events/KeyCode.js';\nimport {noModifierKeys, targetNotEditable} from '../events/condition.js';\nimport Interaction, {pan} from './Interaction.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition~noModifierKeys} and\n * {@link module:ol/events/condition~targetNotEditable}.\n * @property {number} [duration=100] Animation duration in milliseconds.\n * @property {number} [pixelDelta=128] The amount of pixels to pan on each key\n * press.\n */\n\n\n/**\n * @classdesc\n * Allows the user to pan the map using keyboard arrows.\n * Note that, although this interaction is by default included in maps,\n * the keys can only be used when browser focus is on the element to which\n * the keyboard events are attached. By default, this is the map div,\n * though you can change this with the `keyboardEventTarget` in\n * {@link module:ol/Map~Map}. `document` never loses focus but, for any other\n * element, focus will have to be on, and returned to, this element if the keys\n * are to function.\n * See also {@link module:ol/interaction/KeyboardZoom~KeyboardZoom}.\n * @api\n */\nclass KeyboardPan extends Interaction {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    super({\n      handleEvent: handleEvent\n    });\n\n    const options = opt_options || {};\n\n    /**\n     * @private\n     * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Browser event.\n     * @return {boolean} Combined condition result.\n     */\n    this.defaultCondition_ = function(mapBrowserEvent) {\n      return noModifierKeys(mapBrowserEvent) &&\n        targetNotEditable(mapBrowserEvent);\n    };\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition !== undefined ?\n      options.condition : this.defaultCondition_;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 100;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelDelta_ = options.pixelDelta !== undefined ?\n      options.pixelDelta : 128;\n\n  }\n\n}\n\n\n/**\n * Handles the {@link module:ol/MapBrowserEvent map browser event} if it was a\n * `KeyEvent`, and decides the direction to pan to (if an arrow key was\n * pressed).\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {KeyboardPan}\n */\nfunction handleEvent(mapBrowserEvent) {\n  let stopEvent = false;\n  if (mapBrowserEvent.type == EventType.KEYDOWN) {\n    const keyEvent = /** @type {KeyboardEvent} */ (mapBrowserEvent.originalEvent);\n    const keyCode = keyEvent.keyCode;\n    if (this.condition_(mapBrowserEvent) &&\n        (keyCode == KeyCode.DOWN ||\n        keyCode == KeyCode.LEFT ||\n        keyCode == KeyCode.RIGHT ||\n        keyCode == KeyCode.UP)) {\n      const map = mapBrowserEvent.map;\n      const view = map.getView();\n      const mapUnitsDelta = view.getResolution() * this.pixelDelta_;\n      let deltaX = 0, deltaY = 0;\n      if (keyCode == KeyCode.DOWN) {\n        deltaY = -mapUnitsDelta;\n      } else if (keyCode == KeyCode.LEFT) {\n        deltaX = -mapUnitsDelta;\n      } else if (keyCode == KeyCode.RIGHT) {\n        deltaX = mapUnitsDelta;\n      } else {\n        deltaY = mapUnitsDelta;\n      }\n      const delta = [deltaX, deltaY];\n      rotateCoordinate(delta, view.getRotation());\n      pan(view, delta, this.duration_);\n      mapBrowserEvent.preventDefault();\n      stopEvent = true;\n    }\n  }\n  return !stopEvent;\n}\n\nexport default KeyboardPan;\n","/**\n * @module ol/interaction/KeyboardZoom\n */\nimport EventType from '../events/EventType.js';\nimport {targetNotEditable} from '../events/condition.js';\nimport Interaction, {zoomByDelta} from './Interaction.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=100] Animation duration in milliseconds.\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition~targetNotEditable}.\n * @property {number} [delta=1] The zoom level delta on each key press.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom the map using keyboard + and -.\n * Note that, although this interaction is by default included in maps,\n * the keys can only be used when browser focus is on the element to which\n * the keyboard events are attached. By default, this is the map div,\n * though you can change this with the `keyboardEventTarget` in\n * {@link module:ol/Map~Map}. `document` never loses focus but, for any other\n * element, focus will have to be on, and returned to, this element if the keys\n * are to function.\n * See also {@link module:ol/interaction/KeyboardPan~KeyboardPan}.\n * @api\n */\nclass KeyboardZoom extends Interaction {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    super({\n      handleEvent: handleEvent\n    });\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition ? options.condition : targetNotEditable;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.delta_ = options.delta ? options.delta : 1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 100;\n\n  }\n\n}\n\n\n/**\n * Handles the {@link module:ol/MapBrowserEvent map browser event} if it was a\n * `KeyEvent`, and decides whether to zoom in or out (depending on whether the\n * key pressed was '+' or '-').\n * @param {import(\"../MapBrowserEvent.js\").default} mapBrowserEvent Map browser event.\n * @return {boolean} `false` to stop event propagation.\n * @this {KeyboardZoom}\n */\nfunction handleEvent(mapBrowserEvent) {\n  let stopEvent = false;\n  if (mapBrowserEvent.type == EventType.KEYDOWN ||\n      mapBrowserEvent.type == EventType.KEYPRESS) {\n    const keyEvent = /** @type {KeyboardEvent} */ (mapBrowserEvent.originalEvent);\n    const charCode = keyEvent.charCode;\n    if (this.condition_(mapBrowserEvent) &&\n        (charCode == '+'.charCodeAt(0) || charCode == '-'.charCodeAt(0))) {\n      const map = mapBrowserEvent.map;\n      const delta = (charCode == '+'.charCodeAt(0)) ? this.delta_ : -this.delta_;\n      const view = map.getView();\n      zoomByDelta(view, delta, undefined, this.duration_);\n      mapBrowserEvent.preventDefault();\n      stopEvent = true;\n    }\n  }\n  return !stopEvent;\n}\n\nexport default KeyboardZoom;\n","/**\n * @module ol/interaction/MouseWheelZoom\n */\nimport ViewHint from '../ViewHint.js';\nimport {always} from '../events/condition.js';\nimport {easeOut} from '../easing.js';\nimport EventType from '../events/EventType.js';\nimport {DEVICE_PIXEL_RATIO, FIREFOX, SAFARI} from '../has.js';\nimport Interaction, {zoomByDelta} from './Interaction.js';\nimport {clamp} from '../math.js';\n\n\n/**\n * Maximum mouse wheel delta.\n * @type {number}\n */\nconst MAX_DELTA = 1;\n\n\n/**\n * @enum {string}\n */\nexport const Mode = {\n  TRACKPAD: 'trackpad',\n  WHEEL: 'wheel'\n};\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../events/condition.js\").Condition} [condition] A function that\n * takes an {@link module:ol/MapBrowserEvent~MapBrowserEvent} and returns a\n * boolean to indicate whether that event should be handled. Default is\n * {@link module:ol/events/condition~always}.\n * @property {number} [duration=250] Animation duration in milliseconds.\n * @property {number} [timeout=80] Mouse wheel timeout duration in milliseconds.\n * @property {boolean} [constrainResolution=false] When using a trackpad or\n * magic mouse, zoom to the closest integer zoom level after the scroll gesture\n * ends.\n * @property {boolean} [useAnchor=true] Enable zooming using the mouse's\n * location as the anchor. When set to `false`, zooming in and out will zoom to\n * the center of the screen instead of zooming on the mouse's location.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom the map by scrolling the mouse wheel.\n * @api\n */\nclass MouseWheelZoom extends Interaction {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super(/** @type {import(\"./Interaction.js\").InteractionOptions} */ (options));\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.delta_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.timeout_ = options.timeout !== undefined ? options.timeout : 80;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.useAnchor_ = options.useAnchor !== undefined ? options.useAnchor : true;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.constrainResolution_ = options.constrainResolution || false;\n\n    /**\n     * @private\n     * @type {import(\"../events/condition.js\").Condition}\n     */\n    this.condition_ = options.condition ? options.condition : always;\n\n    /**\n     * @private\n     * @type {?import(\"../coordinate.js\").Coordinate}\n     */\n    this.lastAnchor_ = null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.startTime_ = undefined;\n\n    /**\n     * @private\n     * @type {?}\n     */\n    this.timeoutId_;\n\n    /**\n     * @private\n     * @type {Mode|undefined}\n     */\n    this.mode_ = undefined;\n\n    /**\n     * Trackpad events separated by this delay will be considered separate\n     * interactions.\n     * @type {number}\n     */\n    this.trackpadEventGap_ = 400;\n\n    /**\n     * @type {?}\n     */\n    this.trackpadTimeoutId_;\n\n    /**\n     * The number of delta values per zoom level\n     * @private\n     * @type {number}\n     */\n    this.trackpadDeltaPerZoom_ = 300;\n\n    /**\n     * The zoom factor by which scroll zooming is allowed to exceed the limits.\n     * @private\n     * @type {number}\n     */\n    this.trackpadZoomBuffer_ = 1.5;\n\n  }\n\n  /**\n   * @private\n   */\n  decrementInteractingHint_() {\n    this.trackpadTimeoutId_ = undefined;\n    const view = this.getMap().getView();\n    view.setHint(ViewHint.INTERACTING, -1);\n  }\n\n  /**\n   * Handles the {@link module:ol/MapBrowserEvent map browser event} (if it was a mousewheel-event) and eventually\n   * zooms the map.\n   * @override\n   */\n  handleEvent(mapBrowserEvent) {\n    if (!this.condition_(mapBrowserEvent)) {\n      return true;\n    }\n    const type = mapBrowserEvent.type;\n    if (type !== EventType.WHEEL && type !== EventType.MOUSEWHEEL) {\n      return true;\n    }\n\n    mapBrowserEvent.preventDefault();\n\n    const map = mapBrowserEvent.map;\n    const wheelEvent = /** @type {WheelEvent} */ (mapBrowserEvent.originalEvent);\n\n    if (this.useAnchor_) {\n      this.lastAnchor_ = mapBrowserEvent.coordinate;\n    }\n\n    // Delta normalisation inspired by\n    // https://github.com/mapbox/mapbox-gl-js/blob/001c7b9/js/ui/handler/scroll_zoom.js\n    let delta;\n    if (mapBrowserEvent.type == EventType.WHEEL) {\n      delta = wheelEvent.deltaY;\n      if (FIREFOX &&\n          wheelEvent.deltaMode === WheelEvent.DOM_DELTA_PIXEL) {\n        delta /= DEVICE_PIXEL_RATIO;\n      }\n      if (wheelEvent.deltaMode === WheelEvent.DOM_DELTA_LINE) {\n        delta *= 40;\n      }\n    } else if (mapBrowserEvent.type == EventType.MOUSEWHEEL) {\n      delta = -wheelEvent.wheelDeltaY;\n      if (SAFARI) {\n        delta /= 3;\n      }\n    }\n\n    if (delta === 0) {\n      return false;\n    }\n\n    const now = Date.now();\n\n    if (this.startTime_ === undefined) {\n      this.startTime_ = now;\n    }\n\n    if (!this.mode_ || now - this.startTime_ > this.trackpadEventGap_) {\n      this.mode_ = Math.abs(delta) < 4 ?\n        Mode.TRACKPAD :\n        Mode.WHEEL;\n    }\n\n    if (this.mode_ === Mode.TRACKPAD) {\n      const view = map.getView();\n      if (this.trackpadTimeoutId_) {\n        clearTimeout(this.trackpadTimeoutId_);\n      } else {\n        view.setHint(ViewHint.INTERACTING, 1);\n      }\n      this.trackpadTimeoutId_ = setTimeout(this.decrementInteractingHint_.bind(this), this.trackpadEventGap_);\n      let resolution = view.getResolution() * Math.pow(2, delta / this.trackpadDeltaPerZoom_);\n      const minResolution = view.getMinResolution();\n      const maxResolution = view.getMaxResolution();\n      let rebound = 0;\n      if (resolution < minResolution) {\n        resolution = Math.max(resolution, minResolution / this.trackpadZoomBuffer_);\n        rebound = 1;\n      } else if (resolution > maxResolution) {\n        resolution = Math.min(resolution, maxResolution * this.trackpadZoomBuffer_);\n        rebound = -1;\n      }\n      if (this.lastAnchor_) {\n        const center = view.calculateCenterZoom(resolution, this.lastAnchor_);\n        view.setCenter(view.constrainCenter(center));\n      }\n      view.setResolution(resolution);\n\n      if (rebound === 0 && this.constrainResolution_) {\n        view.animate({\n          resolution: view.constrainResolution(resolution, delta > 0 ? -1 : 1),\n          easing: easeOut,\n          anchor: this.lastAnchor_,\n          duration: this.duration_\n        });\n      }\n\n      if (rebound > 0) {\n        view.animate({\n          resolution: minResolution,\n          easing: easeOut,\n          anchor: this.lastAnchor_,\n          duration: 500\n        });\n      } else if (rebound < 0) {\n        view.animate({\n          resolution: maxResolution,\n          easing: easeOut,\n          anchor: this.lastAnchor_,\n          duration: 500\n        });\n      }\n      this.startTime_ = now;\n      return false;\n    }\n\n    this.delta_ += delta;\n\n    const timeLeft = Math.max(this.timeout_ - (now - this.startTime_), 0);\n\n    clearTimeout(this.timeoutId_);\n    this.timeoutId_ = setTimeout(this.handleWheelZoom_.bind(this, map), timeLeft);\n\n    return false;\n  }\n\n  /**\n   * @private\n   * @param {import(\"../PluggableMap.js\").default} map Map.\n   */\n  handleWheelZoom_(map) {\n    const view = map.getView();\n    if (view.getAnimating()) {\n      view.cancelAnimations();\n    }\n    const maxDelta = MAX_DELTA;\n    const delta = clamp(this.delta_, -maxDelta, maxDelta);\n    zoomByDelta(view, -delta, this.lastAnchor_, this.duration_);\n    this.mode_ = undefined;\n    this.delta_ = 0;\n    this.lastAnchor_ = null;\n    this.startTime_ = undefined;\n    this.timeoutId_ = undefined;\n  }\n\n  /**\n   * Enable or disable using the mouse's location as an anchor when zooming\n   * @param {boolean} useAnchor true to zoom to the mouse's location, false\n   * to zoom to the center of the map\n   * @api\n   */\n  setMouseAnchor(useAnchor) {\n    this.useAnchor_ = useAnchor;\n    if (!useAnchor) {\n      this.lastAnchor_ = null;\n    }\n  }\n}\n\nexport default MouseWheelZoom;\n","/**\n * @module ol/interaction/PinchRotate\n */\nimport ViewHint from '../ViewHint.js';\nimport {FALSE} from '../functions.js';\nimport {rotate, rotateWithoutConstraints} from './Interaction.js';\nimport PointerInteraction, {centroid as centroidFromPointers} from './Pointer.js';\nimport {disable} from '../rotationconstraint.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=250] The duration of the animation in\n * milliseconds.\n * @property {number} [threshold=0.3] Minimal angle in radians to start a rotation.\n */\n\n\n/**\n * @classdesc\n * Allows the user to rotate the map by twisting with two fingers\n * on a touch screen.\n * @api\n */\nclass PinchRotate extends PointerInteraction {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    const pointerOptions = /** @type {import(\"./Pointer.js\").Options} */ (options);\n\n    if (!pointerOptions.stopDown) {\n      pointerOptions.stopDown = FALSE;\n    }\n\n    super(pointerOptions);\n\n    /**\n     * @private\n     * @type {import(\"../coordinate.js\").Coordinate}\n     */\n    this.anchor_ = null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.lastAngle_ = undefined;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.rotating_ = false;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.rotationDelta_ = 0.0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.threshold_ = options.threshold !== undefined ? options.threshold : 0.3;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 250;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDragEvent(mapBrowserEvent) {\n    let rotationDelta = 0.0;\n\n    const touch0 = this.targetPointers[0];\n    const touch1 = this.targetPointers[1];\n\n    // angle between touches\n    const angle = Math.atan2(\n      touch1.clientY - touch0.clientY,\n      touch1.clientX - touch0.clientX);\n\n    if (this.lastAngle_ !== undefined) {\n      const delta = angle - this.lastAngle_;\n      this.rotationDelta_ += delta;\n      if (!this.rotating_ &&\n          Math.abs(this.rotationDelta_) > this.threshold_) {\n        this.rotating_ = true;\n      }\n      rotationDelta = delta;\n    }\n    this.lastAngle_ = angle;\n\n    const map = mapBrowserEvent.map;\n    const view = map.getView();\n    if (view.getConstraints().rotation === disable) {\n      return;\n    }\n\n    // rotate anchor point.\n    // FIXME: should be the intersection point between the lines:\n    //     touch0,touch1 and previousTouch0,previousTouch1\n    const viewportPosition = map.getViewport().getBoundingClientRect();\n    const centroid = centroidFromPointers(this.targetPointers);\n    centroid[0] -= viewportPosition.left;\n    centroid[1] -= viewportPosition.top;\n    this.anchor_ = map.getCoordinateFromPixel(centroid);\n\n    // rotate\n    if (this.rotating_) {\n      const rotation = view.getRotation();\n      map.render();\n      rotateWithoutConstraints(view, rotation + rotationDelta, this.anchor_);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleUpEvent(mapBrowserEvent) {\n    if (this.targetPointers.length < 2) {\n      const map = mapBrowserEvent.map;\n      const view = map.getView();\n      view.setHint(ViewHint.INTERACTING, -1);\n      if (this.rotating_) {\n        const rotation = view.getRotation();\n        rotate(view, rotation, this.anchor_, this.duration_);\n      }\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDownEvent(mapBrowserEvent) {\n    if (this.targetPointers.length >= 2) {\n      const map = mapBrowserEvent.map;\n      this.anchor_ = null;\n      this.lastAngle_ = undefined;\n      this.rotating_ = false;\n      this.rotationDelta_ = 0.0;\n      if (!this.handlingDownUpSequence) {\n        map.getView().setHint(ViewHint.INTERACTING, 1);\n      }\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n\nexport default PinchRotate;\n","/**\n * @module ol/interaction/PinchZoom\n */\nimport ViewHint from '../ViewHint.js';\nimport {FALSE} from '../functions.js';\nimport {zoom, zoomWithoutConstraints} from './Interaction.js';\nimport PointerInteraction, {centroid as centroidFromPointers} from './Pointer.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [duration=400] Animation duration in milliseconds.\n * @property {boolean} [constrainResolution=false] Zoom to the closest integer\n * zoom level after the pinch gesture ends.\n */\n\n\n/**\n * @classdesc\n * Allows the user to zoom the map by pinching with two fingers\n * on a touch screen.\n * @api\n */\nclass PinchZoom extends PointerInteraction {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    const pointerOptions = /** @type {import(\"./Pointer.js\").Options} */ (options);\n\n    if (!pointerOptions.stopDown) {\n      pointerOptions.stopDown = FALSE;\n    }\n\n    super(pointerOptions);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.constrainResolution_ = options.constrainResolution || false;\n\n    /**\n     * @private\n     * @type {import(\"../coordinate.js\").Coordinate}\n     */\n    this.anchor_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.duration_ = options.duration !== undefined ? options.duration : 400;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.lastDistance_ = undefined;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.lastScaleDelta_ = 1;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDragEvent(mapBrowserEvent) {\n    let scaleDelta = 1.0;\n\n    const touch0 = this.targetPointers[0];\n    const touch1 = this.targetPointers[1];\n    const dx = touch0.clientX - touch1.clientX;\n    const dy = touch0.clientY - touch1.clientY;\n\n    // distance between touches\n    const distance = Math.sqrt(dx * dx + dy * dy);\n\n    if (this.lastDistance_ !== undefined) {\n      scaleDelta = this.lastDistance_ / distance;\n    }\n    this.lastDistance_ = distance;\n\n\n    const map = mapBrowserEvent.map;\n    const view = map.getView();\n    const resolution = view.getResolution();\n    const maxResolution = view.getMaxResolution();\n    const minResolution = view.getMinResolution();\n    let newResolution = resolution * scaleDelta;\n    if (newResolution > maxResolution) {\n      scaleDelta = maxResolution / resolution;\n      newResolution = maxResolution;\n    } else if (newResolution < minResolution) {\n      scaleDelta = minResolution / resolution;\n      newResolution = minResolution;\n    }\n\n    if (scaleDelta != 1.0) {\n      this.lastScaleDelta_ = scaleDelta;\n    }\n\n    // scale anchor point.\n    const viewportPosition = map.getViewport().getBoundingClientRect();\n    const centroid = centroidFromPointers(this.targetPointers);\n    centroid[0] -= viewportPosition.left;\n    centroid[1] -= viewportPosition.top;\n    this.anchor_ = map.getCoordinateFromPixel(centroid);\n\n    // scale, bypass the resolution constraint\n    map.render();\n    zoomWithoutConstraints(view, newResolution, this.anchor_);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleUpEvent(mapBrowserEvent) {\n    if (this.targetPointers.length < 2) {\n      const map = mapBrowserEvent.map;\n      const view = map.getView();\n      view.setHint(ViewHint.INTERACTING, -1);\n      const resolution = view.getResolution();\n      if (this.constrainResolution_ ||\n          resolution < view.getMinResolution() ||\n          resolution > view.getMaxResolution()) {\n        // Zoom to final resolution, with an animation, and provide a\n        // direction not to zoom out/in if user was pinching in/out.\n        // Direction is > 0 if pinching out, and < 0 if pinching in.\n        const direction = this.lastScaleDelta_ - 1;\n        zoom(view, resolution, this.anchor_, this.duration_, direction);\n      }\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleDownEvent(mapBrowserEvent) {\n    if (this.targetPointers.length >= 2) {\n      const map = mapBrowserEvent.map;\n      this.anchor_ = null;\n      this.lastDistance_ = undefined;\n      this.lastScaleDelta_ = 1;\n      if (!this.handlingDownUpSequence) {\n        map.getView().setHint(ViewHint.INTERACTING, 1);\n      }\n      return true;\n    } else {\n      return false;\n    }\n  }\n}\n\nexport default PinchZoom;\n","/**\n * @module ol/interaction\n */\nimport Collection from './Collection.js';\nimport Kinetic from './Kinetic.js';\nimport DoubleClickZoom from './interaction/DoubleClickZoom.js';\nimport DragPan from './interaction/DragPan.js';\nimport DragRotate from './interaction/DragRotate.js';\nimport DragZoom from './interaction/DragZoom.js';\nimport KeyboardPan from './interaction/KeyboardPan.js';\nimport KeyboardZoom from './interaction/KeyboardZoom.js';\nimport MouseWheelZoom from './interaction/MouseWheelZoom.js';\nimport PinchRotate from './interaction/PinchRotate.js';\nimport PinchZoom from './interaction/PinchZoom.js';\nimport {focus} from './events/condition.js';\n\nexport {default as DoubleClickZoom} from './interaction/DoubleClickZoom.js';\nexport {default as DragAndDrop} from './interaction/DragAndDrop.js';\nexport {default as DragBox} from './interaction/DragBox.js';\nexport {default as DragPan} from './interaction/DragPan.js';\nexport {default as DragRotate} from './interaction/DragRotate.js';\nexport {default as DragRotateAndZoom} from './interaction/DragRotateAndZoom.js';\nexport {default as DragZoom} from './interaction/DragZoom.js';\nexport {default as Draw} from './interaction/Draw.js';\nexport {default as Extent} from './interaction/Extent.js';\nexport {default as Interaction} from './interaction/Interaction.js';\nexport {default as KeyboardPan} from './interaction/KeyboardPan.js';\nexport {default as KeyboardZoom} from './interaction/KeyboardZoom.js';\nexport {default as Modify} from './interaction/Modify.js';\nexport {default as MouseWheelZoom} from './interaction/MouseWheelZoom.js';\nexport {default as PinchRotate} from './interaction/PinchRotate.js';\nexport {default as PinchZoom} from './interaction/PinchZoom.js';\nexport {default as Pointer} from './interaction/Pointer.js';\nexport {default as Select} from './interaction/Select.js';\nexport {default as Snap} from './interaction/Snap.js';\nexport {default as Translate} from './interaction/Translate.js';\n\n\n/**\n * @typedef {Object} DefaultsOptions\n * @property {boolean} [altShiftDragRotate=true] Whether Alt-Shift-drag rotate is\n * desired.\n * @property {boolean} [onFocusOnly=false] Interact only when the map has the\n * focus. This affects the `MouseWheelZoom` and `DragPan` interactions and is\n * useful when page scroll is desired for maps that do not have the browser's\n * focus.\n * @property {boolean} [constrainResolution=false] Zoom to the closest integer\n * zoom level after the wheel/trackpad or pinch gesture ends.\n * @property {boolean} [doubleClickZoom=true] Whether double click zoom is\n * desired.\n * @property {boolean} [keyboard=true] Whether keyboard interaction is desired.\n * @property {boolean} [mouseWheelZoom=true] Whether mousewheel zoom is desired.\n * @property {boolean} [shiftDragZoom=true] Whether Shift-drag zoom is desired.\n * @property {boolean} [dragPan=true] Whether drag pan is desired.\n * @property {boolean} [pinchRotate=true] Whether pinch rotate is desired.\n * @property {boolean} [pinchZoom=true] Whether pinch zoom is desired.\n * @property {number} [zoomDelta] Zoom level delta when using keyboard or\n * mousewheel zoom.\n * @property {number} [zoomDuration] Duration of the zoom animation in\n * milliseconds.\n */\n\n\n/**\n * Set of interactions included in maps by default. Specific interactions can be\n * excluded by setting the appropriate option to false in the constructor\n * options, but the order of the interactions is fixed.  If you want to specify\n * a different order for interactions, you will need to create your own\n * {@link module:ol/interaction/Interaction} instances and insert\n * them into a {@link module:ol/Collection} in the order you want\n * before creating your {@link module:ol/Map~Map} instance. The default set of\n * interactions, in sequence, is:\n * * {@link module:ol/interaction/DragRotate~DragRotate}\n * * {@link module:ol/interaction/DoubleClickZoom~DoubleClickZoom}\n * * {@link module:ol/interaction/DragPan~DragPan}\n * * {@link module:ol/interaction/PinchRotate~PinchRotate}\n * * {@link module:ol/interaction/PinchZoom~PinchZoom}\n * * {@link module:ol/interaction/KeyboardPan~KeyboardPan}\n * * {@link module:ol/interaction/KeyboardZoom~KeyboardZoom}\n * * {@link module:ol/interaction/MouseWheelZoom~MouseWheelZoom}\n * * {@link module:ol/interaction/DragZoom~DragZoom}\n *\n * @param {DefaultsOptions=} opt_options Defaults options.\n * @return {import(\"./Collection.js\").default<import(\"./interaction/Interaction.js\").default>}\n * A collection of interactions to be used with the {@link module:ol/Map~Map}\n * constructor's `interactions` option.\n * @api\n */\nexport function defaults(opt_options) {\n\n  const options = opt_options ? opt_options : {};\n\n  const interactions = new Collection();\n\n  const kinetic = new Kinetic(-0.005, 0.05, 100);\n\n  const altShiftDragRotate = options.altShiftDragRotate !== undefined ?\n    options.altShiftDragRotate : true;\n  if (altShiftDragRotate) {\n    interactions.push(new DragRotate());\n  }\n\n  const doubleClickZoom = options.doubleClickZoom !== undefined ?\n    options.doubleClickZoom : true;\n  if (doubleClickZoom) {\n    interactions.push(new DoubleClickZoom({\n      delta: options.zoomDelta,\n      duration: options.zoomDuration\n    }));\n  }\n\n  const dragPan = options.dragPan !== undefined ? options.dragPan : true;\n  if (dragPan) {\n    interactions.push(new DragPan({\n      condition: options.onFocusOnly ? focus : undefined,\n      kinetic: kinetic\n    }));\n  }\n\n  const pinchRotate = options.pinchRotate !== undefined ? options.pinchRotate :\n    true;\n  if (pinchRotate) {\n    interactions.push(new PinchRotate());\n  }\n\n  const pinchZoom = options.pinchZoom !== undefined ? options.pinchZoom : true;\n  if (pinchZoom) {\n    interactions.push(new PinchZoom({\n      constrainResolution: options.constrainResolution,\n      duration: options.zoomDuration\n    }));\n  }\n\n  const keyboard = options.keyboard !== undefined ? options.keyboard : true;\n  if (keyboard) {\n    interactions.push(new KeyboardPan());\n    interactions.push(new KeyboardZoom({\n      delta: options.zoomDelta,\n      duration: options.zoomDuration\n    }));\n  }\n\n  const mouseWheelZoom = options.mouseWheelZoom !== undefined ?\n    options.mouseWheelZoom : true;\n  if (mouseWheelZoom) {\n    interactions.push(new MouseWheelZoom({\n      condition: options.onFocusOnly ? focus : undefined,\n      constrainResolution: options.constrainResolution,\n      duration: options.zoomDuration\n    }));\n  }\n\n  const shiftDragZoom = options.shiftDragZoom !== undefined ?\n    options.shiftDragZoom : true;\n  if (shiftDragZoom) {\n    interactions.push(new DragZoom({\n      duration: options.zoomDuration\n    }));\n  }\n\n  return interactions;\n\n}\n","/**\n * @module ol/geom/MultiPolygon\n */\nimport {extend} from '../array.js';\nimport {closestSquaredDistanceXY} from '../extent.js';\nimport GeometryLayout from './GeometryLayout.js';\nimport GeometryType from './GeometryType.js';\nimport MultiPoint from './MultiPoint.js';\nimport Polygon from './Polygon.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {linearRingss as linearRingssArea} from './flat/area.js';\nimport {linearRingss as linearRingssCenter} from './flat/center.js';\nimport {assignClosestMultiArrayPoint, multiArrayMaxSquaredDelta} from './flat/closest.js';\nimport {linearRingssContainsXY} from './flat/contains.js';\nimport {deflateMultiCoordinatesArray} from './flat/deflate.js';\nimport {inflateMultiCoordinatesArray} from './flat/inflate.js';\nimport {getInteriorPointsOfMultiArray} from './flat/interiorpoint.js';\nimport {intersectsLinearRingMultiArray} from './flat/intersectsextent.js';\nimport {linearRingsAreOriented, orientLinearRingsArray} from './flat/orient.js';\nimport {quantizeMultiArray} from './flat/simplify.js';\n\n/**\n * @classdesc\n * Multi-polygon geometry.\n *\n * @api\n */\nclass MultiPolygon extends SimpleGeometry {\n\n  /**\n   * @param {Array<Array<Array<import(\"../coordinate.js\").Coordinate>>|Polygon>|Array<number>} coordinates Coordinates.\n   *     For internal use, flat coordinates in combination with `opt_layout` and `opt_endss` are also accepted.\n   * @param {GeometryLayout=} opt_layout Layout.\n   * @param {Array<Array<number>>=} opt_endss Array of ends for internal use with flat coordinates.\n   */\n  constructor(coordinates, opt_layout, opt_endss) {\n\n    super();\n\n    /**\n     * @type {Array<Array<number>>}\n     * @private\n     */\n    this.endss_ = [];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.flatInteriorPointsRevision_ = -1;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.flatInteriorPoints_ = null;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDelta_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxDeltaRevision_ = -1;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.orientedRevision_ = -1;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.orientedFlatCoordinates_ = null;\n\n    if (!opt_endss && !Array.isArray(coordinates[0])) {\n      let layout = this.getLayout();\n      const polygons = /** @type {Array<Polygon>} */ (coordinates);\n      const flatCoordinates = [];\n      const endss = [];\n      for (let i = 0, ii = polygons.length; i < ii; ++i) {\n        const polygon = polygons[i];\n        if (i === 0) {\n          layout = polygon.getLayout();\n        }\n        const offset = flatCoordinates.length;\n        const ends = polygon.getEnds();\n        for (let j = 0, jj = ends.length; j < jj; ++j) {\n          ends[j] += offset;\n        }\n        extend(flatCoordinates, polygon.getFlatCoordinates());\n        endss.push(ends);\n      }\n      opt_layout = layout;\n      coordinates = flatCoordinates;\n      opt_endss = endss;\n    }\n    if (opt_layout !== undefined && opt_endss) {\n      this.setFlatCoordinates(opt_layout, /** @type {Array<number>} */ (coordinates));\n      this.endss_ = opt_endss;\n    } else {\n      this.setCoordinates(/** @type {Array<Array<Array<import(\"../coordinate.js\").Coordinate>>>} */ (coordinates),\n        opt_layout);\n    }\n\n  }\n\n  /**\n   * Append the passed polygon to this multipolygon.\n   * @param {Polygon} polygon Polygon.\n   * @api\n   */\n  appendPolygon(polygon) {\n    /** @type {Array<number>} */\n    let ends;\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = polygon.getFlatCoordinates().slice();\n      ends = polygon.getEnds().slice();\n      this.endss_.push();\n    } else {\n      const offset = this.flatCoordinates.length;\n      extend(this.flatCoordinates, polygon.getFlatCoordinates());\n      ends = polygon.getEnds().slice();\n      for (let i = 0, ii = ends.length; i < ii; ++i) {\n        ends[i] += offset;\n      }\n    }\n    this.endss_.push(ends);\n    this.changed();\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!MultiPolygon} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    const len = this.endss_.length;\n    const newEndss = new Array(len);\n    for (let i = 0; i < len; ++i) {\n      newEndss[i] = this.endss_[i].slice();\n    }\n\n    return new MultiPolygon(\n      this.flatCoordinates.slice(), this.layout, newEndss);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    if (this.maxDeltaRevision_ != this.getRevision()) {\n      this.maxDelta_ = Math.sqrt(multiArrayMaxSquaredDelta(\n        this.flatCoordinates, 0, this.endss_, this.stride, 0));\n      this.maxDeltaRevision_ = this.getRevision();\n    }\n    return assignClosestMultiArrayPoint(\n      this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride,\n      this.maxDelta_, true, x, y, closestPoint, minSquaredDistance);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  containsXY(x, y) {\n    return linearRingssContainsXY(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, x, y);\n  }\n\n  /**\n   * Return the area of the multipolygon on projected plane.\n   * @return {number} Area (on projected plane).\n   * @api\n   */\n  getArea() {\n    return linearRingssArea(this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride);\n  }\n\n  /**\n   * Get the coordinate array for this geometry.  This array has the structure\n   * of a GeoJSON coordinate array for multi-polygons.\n   *\n   * @param {boolean=} opt_right Orient coordinates according to the right-hand\n   *     rule (counter-clockwise for exterior and clockwise for interior rings).\n   *     If `false`, coordinates will be oriented according to the left-hand rule\n   *     (clockwise for exterior and counter-clockwise for interior rings).\n   *     By default, coordinate orientation will depend on how the geometry was\n   *     constructed.\n   * @return {Array<Array<Array<import(\"../coordinate.js\").Coordinate>>>} Coordinates.\n   * @override\n   * @api\n   */\n  getCoordinates(opt_right) {\n    let flatCoordinates;\n    if (opt_right !== undefined) {\n      flatCoordinates = this.getOrientedFlatCoordinates().slice();\n      orientLinearRingsArray(\n        flatCoordinates, 0, this.endss_, this.stride, opt_right);\n    } else {\n      flatCoordinates = this.flatCoordinates;\n    }\n\n    return inflateMultiCoordinatesArray(\n      flatCoordinates, 0, this.endss_, this.stride);\n  }\n\n  /**\n   * @return {Array<Array<number>>} Endss.\n   */\n  getEndss() {\n    return this.endss_;\n  }\n\n  /**\n   * @return {Array<number>} Flat interior points.\n   */\n  getFlatInteriorPoints() {\n    if (this.flatInteriorPointsRevision_ != this.getRevision()) {\n      const flatCenters = linearRingssCenter(\n        this.flatCoordinates, 0, this.endss_, this.stride);\n      this.flatInteriorPoints_ = getInteriorPointsOfMultiArray(\n        this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride,\n        flatCenters);\n      this.flatInteriorPointsRevision_ = this.getRevision();\n    }\n    return this.flatInteriorPoints_;\n  }\n\n  /**\n   * Return the interior points as {@link module:ol/geom/MultiPoint multipoint}.\n   * @return {MultiPoint} Interior points as XYM coordinates, where M is\n   * the length of the horizontal intersection that the point belongs to.\n   * @api\n   */\n  getInteriorPoints() {\n    return new MultiPoint(this.getFlatInteriorPoints().slice(), GeometryLayout.XYM);\n  }\n\n  /**\n   * @return {Array<number>} Oriented flat coordinates.\n   */\n  getOrientedFlatCoordinates() {\n    if (this.orientedRevision_ != this.getRevision()) {\n      const flatCoordinates = this.flatCoordinates;\n      if (linearRingsAreOriented(\n        flatCoordinates, 0, this.endss_, this.stride)) {\n        this.orientedFlatCoordinates_ = flatCoordinates;\n      } else {\n        this.orientedFlatCoordinates_ = flatCoordinates.slice();\n        this.orientedFlatCoordinates_.length =\n            orientLinearRingsArray(\n              this.orientedFlatCoordinates_, 0, this.endss_, this.stride);\n      }\n      this.orientedRevision_ = this.getRevision();\n    }\n    return this.orientedFlatCoordinates_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSimplifiedGeometryInternal(squaredTolerance) {\n    const simplifiedFlatCoordinates = [];\n    const simplifiedEndss = [];\n    simplifiedFlatCoordinates.length = quantizeMultiArray(\n      this.flatCoordinates, 0, this.endss_, this.stride,\n      Math.sqrt(squaredTolerance),\n      simplifiedFlatCoordinates, 0, simplifiedEndss);\n    return new MultiPolygon(simplifiedFlatCoordinates, GeometryLayout.XY, simplifiedEndss);\n  }\n\n  /**\n   * Return the polygon at the specified index.\n   * @param {number} index Index.\n   * @return {Polygon} Polygon.\n   * @api\n   */\n  getPolygon(index) {\n    if (index < 0 || this.endss_.length <= index) {\n      return null;\n    }\n    let offset;\n    if (index === 0) {\n      offset = 0;\n    } else {\n      const prevEnds = this.endss_[index - 1];\n      offset = prevEnds[prevEnds.length - 1];\n    }\n    const ends = this.endss_[index].slice();\n    const end = ends[ends.length - 1];\n    if (offset !== 0) {\n      for (let i = 0, ii = ends.length; i < ii; ++i) {\n        ends[i] -= offset;\n      }\n    }\n    return new Polygon(this.flatCoordinates.slice(offset, end), this.layout, ends);\n  }\n\n  /**\n   * Return the polygons of this multipolygon.\n   * @return {Array<Polygon>} Polygons.\n   * @api\n   */\n  getPolygons() {\n    const layout = this.layout;\n    const flatCoordinates = this.flatCoordinates;\n    const endss = this.endss_;\n    const polygons = [];\n    let offset = 0;\n    for (let i = 0, ii = endss.length; i < ii; ++i) {\n      const ends = endss[i].slice();\n      const end = ends[ends.length - 1];\n      if (offset !== 0) {\n        for (let j = 0, jj = ends.length; j < jj; ++j) {\n          ends[j] -= offset;\n        }\n      }\n      const polygon = new Polygon(flatCoordinates.slice(offset, end), layout, ends);\n      polygons.push(polygon);\n      offset = end;\n    }\n    return polygons;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.MULTI_POLYGON;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    return intersectsLinearRingMultiArray(\n      this.getOrientedFlatCoordinates(), 0, this.endss_, this.stride, extent);\n  }\n\n  /**\n   * Set the coordinates of the multipolygon.\n   * @param {!Array<Array<Array<import(\"../coordinate.js\").Coordinate>>>} coordinates Coordinates.\n   * @param {GeometryLayout=} opt_layout Layout.\n   * @override\n   * @api\n   */\n  setCoordinates(coordinates, opt_layout) {\n    this.setLayout(opt_layout, coordinates, 3);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    const endss = deflateMultiCoordinatesArray(\n      this.flatCoordinates, 0, coordinates, this.stride, this.endss_);\n    if (endss.length === 0) {\n      this.flatCoordinates.length = 0;\n    } else {\n      const lastEnds = endss[endss.length - 1];\n      this.flatCoordinates.length = lastEnds.length === 0 ?\n        0 : lastEnds[lastEnds.length - 1];\n    }\n    this.changed();\n  }\n}\n\n\nexport default MultiPolygon;\n","/**\n * @module ol/geom/flat/center\n */\nimport {createEmpty, createOrUpdateFromFlatCoordinates} from '../../extent.js';\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @return {Array<number>} Flat centers.\n */\nexport function linearRingss(flatCoordinates, offset, endss, stride) {\n  const flatCenters = [];\n  let extent = createEmpty();\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    extent = createOrUpdateFromFlatCoordinates(flatCoordinates, offset, ends[0], stride);\n    flatCenters.push((extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2);\n    offset = ends[ends.length - 1];\n  }\n  return flatCenters;\n}\n","/**\n * @module ol/tileurlfunction\n */\nimport {assert} from './asserts.js';\nimport {modulo} from './math.js';\nimport {hash as tileCoordHash} from './tilecoord.js';\n\n\n/**\n * @param {string} template Template.\n * @param {import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {import(\"./Tile.js\").UrlFunction} Tile URL function.\n */\nexport function createFromTemplate(template, tileGrid) {\n  const zRegEx = /\\{z\\}/g;\n  const xRegEx = /\\{x\\}/g;\n  const yRegEx = /\\{y\\}/g;\n  const dashYRegEx = /\\{-y\\}/g;\n  return (\n    /**\n     * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile Coordinate.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"./proj/Projection.js\").default} projection Projection.\n     * @return {string|undefined} Tile URL.\n     */\n    function(tileCoord, pixelRatio, projection) {\n      if (!tileCoord) {\n        return undefined;\n      } else {\n        return template.replace(zRegEx, tileCoord[0].toString())\n          .replace(xRegEx, tileCoord[1].toString())\n          .replace(yRegEx, function() {\n            const y = -tileCoord[2] - 1;\n            return y.toString();\n          })\n          .replace(dashYRegEx, function() {\n            const z = tileCoord[0];\n            const range = tileGrid.getFullTileRange(z);\n            assert(range, 55); // The {-y} placeholder requires a tile grid with extent\n            const y = range.getHeight() + tileCoord[2];\n            return y.toString();\n          });\n      }\n    }\n  );\n}\n\n\n/**\n * @param {Array<string>} templates Templates.\n * @param {import(\"./tilegrid/TileGrid.js\").default} tileGrid Tile grid.\n * @return {import(\"./Tile.js\").UrlFunction} Tile URL function.\n */\nexport function createFromTemplates(templates, tileGrid) {\n  const len = templates.length;\n  const tileUrlFunctions = new Array(len);\n  for (let i = 0; i < len; ++i) {\n    tileUrlFunctions[i] = createFromTemplate(templates[i], tileGrid);\n  }\n  return createFromTileUrlFunctions(tileUrlFunctions);\n}\n\n\n/**\n * @param {Array<import(\"./Tile.js\").UrlFunction>} tileUrlFunctions Tile URL Functions.\n * @return {import(\"./Tile.js\").UrlFunction} Tile URL function.\n */\nexport function createFromTileUrlFunctions(tileUrlFunctions) {\n  if (tileUrlFunctions.length === 1) {\n    return tileUrlFunctions[0];\n  }\n  return (\n    /**\n     * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile Coordinate.\n     * @param {number} pixelRatio Pixel ratio.\n     * @param {import(\"./proj/Projection.js\").default} projection Projection.\n     * @return {string|undefined} Tile URL.\n     */\n    function(tileCoord, pixelRatio, projection) {\n      if (!tileCoord) {\n        return undefined;\n      } else {\n        const h = tileCoordHash(tileCoord);\n        const index = modulo(h, tileUrlFunctions.length);\n        return tileUrlFunctions[index](tileCoord, pixelRatio, projection);\n      }\n    }\n  );\n}\n\n\n/**\n * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n * @param {number} pixelRatio Pixel ratio.\n * @param {import(\"./proj/Projection.js\").default} projection Projection.\n * @return {string|undefined} Tile URL.\n */\nexport function nullTileUrlFunction(tileCoord, pixelRatio, projection) {\n  return undefined;\n}\n\n\n/**\n * @param {string} url URL.\n * @return {Array<string>} Array of urls.\n */\nexport function expandUrl(url) {\n  const urls = [];\n  let match = /\\{([a-z])-([a-z])\\}/.exec(url);\n  if (match) {\n    // char range\n    const startCharCode = match[1].charCodeAt(0);\n    const stopCharCode = match[2].charCodeAt(0);\n    let charCode;\n    for (charCode = startCharCode; charCode <= stopCharCode; ++charCode) {\n      urls.push(url.replace(match[0], String.fromCharCode(charCode)));\n    }\n    return urls;\n  }\n  match = match = /\\{(\\d+)-(\\d+)\\}/.exec(url);\n  if (match) {\n    // number range\n    const stop = parseInt(match[2], 10);\n    for (let i = parseInt(match[1], 10); i <= stop; i++) {\n      urls.push(url.replace(match[0], i.toString()));\n    }\n    return urls;\n  }\n  urls.push(url);\n  return urls;\n}\n","/**\n * @module ol/MapEventType\n */\n\n/**\n * @enum {string}\n */\nexport default {\n\n  /**\n   * Triggered after a map frame is rendered.\n   * @event module:ol/MapEvent~MapEvent#postrender\n   * @api\n   */\n  POSTRENDER: 'postrender',\n\n  /**\n   * Triggered when the map starts moving.\n   * @event module:ol/MapEvent~MapEvent#movestart\n   * @api\n   */\n  MOVESTART: 'movestart',\n\n  /**\n   * Triggered after the map is moved.\n   * @event module:ol/MapEvent~MapEvent#moveend\n   * @api\n   */\n  MOVEEND: 'moveend'\n\n};\n","/**\n * @module ol/reproj/Image\n */\nimport {ERROR_THRESHOLD} from './common.js';\n\nimport ImageBase from '../ImageBase.js';\nimport ImageState from '../ImageState.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {getCenter, getIntersection, getHeight, getWidth} from '../extent.js';\nimport {calculateSourceResolution, render as renderReprojected} from '../reproj.js';\nimport Triangulation from './Triangulation.js';\n\n\n/**\n * @typedef {function(import(\"../extent.js\").Extent, number, number) : import(\"../ImageBase.js\").default} FunctionType\n */\n\n\n/**\n * @classdesc\n * Class encapsulating single reprojected image.\n * See {@link module:ol/source/Image~ImageSource}.\n */\nclass ReprojImage extends ImageBase {\n  /**\n   * @param {import(\"../proj/Projection.js\").default} sourceProj Source projection (of the data).\n   * @param {import(\"../proj/Projection.js\").default} targetProj Target projection.\n   * @param {import(\"../extent.js\").Extent} targetExtent Target extent.\n   * @param {number} targetResolution Target resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {FunctionType} getImageFunction\n   *     Function returning source images (extent, resolution, pixelRatio).\n   */\n  constructor(sourceProj, targetProj, targetExtent, targetResolution, pixelRatio, getImageFunction) {\n    const maxSourceExtent = sourceProj.getExtent();\n    const maxTargetExtent = targetProj.getExtent();\n\n    const limitedTargetExtent = maxTargetExtent ?\n      getIntersection(targetExtent, maxTargetExtent) : targetExtent;\n\n    const targetCenter = getCenter(limitedTargetExtent);\n    const sourceResolution = calculateSourceResolution(\n      sourceProj, targetProj, targetCenter, targetResolution);\n\n    const errorThresholdInPixels = ERROR_THRESHOLD;\n\n    const triangulation = new Triangulation(\n      sourceProj, targetProj, limitedTargetExtent, maxSourceExtent,\n      sourceResolution * errorThresholdInPixels);\n\n    const sourceExtent = triangulation.calculateSourceExtent();\n    const sourceImage = getImageFunction(sourceExtent, sourceResolution, pixelRatio);\n    let state = ImageState.LOADED;\n    if (sourceImage) {\n      state = ImageState.IDLE;\n    }\n    const sourcePixelRatio = sourceImage ? sourceImage.getPixelRatio() : 1;\n\n    super(targetExtent, targetResolution, sourcePixelRatio, state);\n\n    /**\n     * @private\n     * @type {import(\"../proj/Projection.js\").default}\n     */\n    this.targetProj_ = targetProj;\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.maxSourceExtent_ = maxSourceExtent;\n\n    /**\n     * @private\n     * @type {!import(\"./Triangulation.js\").default}\n     */\n    this.triangulation_ = triangulation;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.targetResolution_ = targetResolution;\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.targetExtent_ = targetExtent;\n\n    /**\n     * @private\n     * @type {import(\"../ImageBase.js\").default}\n     */\n    this.sourceImage_ = sourceImage;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.sourcePixelRatio_ = sourcePixelRatio;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement}\n     */\n    this.canvas_ = null;\n\n    /**\n     * @private\n     * @type {?import(\"../events.js\").EventsKey}\n     */\n    this.sourceListenerKey_ = null;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    if (this.state == ImageState.LOADING) {\n      this.unlistenSource_();\n    }\n    super.disposeInternal();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImage() {\n    return this.canvas_;\n  }\n\n  /**\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   */\n  getProjection() {\n    return this.targetProj_;\n  }\n\n  /**\n   * @private\n   */\n  reproject_() {\n    const sourceState = this.sourceImage_.getState();\n    if (sourceState == ImageState.LOADED) {\n      const width = getWidth(this.targetExtent_) / this.targetResolution_;\n      const height = getHeight(this.targetExtent_) / this.targetResolution_;\n\n      this.canvas_ = renderReprojected(width, height, this.sourcePixelRatio_,\n        this.sourceImage_.getResolution(), this.maxSourceExtent_,\n        this.targetResolution_, this.targetExtent_, this.triangulation_, [{\n          extent: this.sourceImage_.getExtent(),\n          image: this.sourceImage_.getImage()\n        }], 0);\n    }\n    this.state = sourceState;\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  load() {\n    if (this.state == ImageState.IDLE) {\n      this.state = ImageState.LOADING;\n      this.changed();\n\n      const sourceState = this.sourceImage_.getState();\n      if (sourceState == ImageState.LOADED || sourceState == ImageState.ERROR) {\n        this.reproject_();\n      } else {\n        this.sourceListenerKey_ = listen(this.sourceImage_,\n          EventType.CHANGE, function(e) {\n            const sourceState = this.sourceImage_.getState();\n            if (sourceState == ImageState.LOADED || sourceState == ImageState.ERROR) {\n              this.unlistenSource_();\n              this.reproject_();\n            }\n          }, this);\n        this.sourceImage_.load();\n      }\n    }\n  }\n\n  /**\n   * @private\n   */\n  unlistenSource_() {\n    unlistenByKey(/** @type {!import(\"../events.js\").EventsKey} */ (this.sourceListenerKey_));\n    this.sourceListenerKey_ = null;\n  }\n}\n\n\nexport default ReprojImage;\n","/**\n * @module ol/source/Image\n */\nimport {abstract} from '../util.js';\nimport {ENABLE_RASTER_REPROJECTION} from '../reproj/common.js';\nimport ImageState from '../ImageState.js';\nimport {linearFindNearest} from '../array.js';\nimport Event from '../events/Event.js';\nimport {equals} from '../extent.js';\nimport {equivalent} from '../proj.js';\nimport ReprojImage from '../reproj/Image.js';\nimport Source from './Source.js';\n\n\n/**\n * @enum {string}\n */\nconst ImageSourceEventType = {\n\n  /**\n   * Triggered when an image starts loading.\n   * @event ol/source/Image~ImageSourceEvent#imageloadstart\n   * @api\n   */\n  IMAGELOADSTART: 'imageloadstart',\n\n  /**\n   * Triggered when an image finishes loading.\n   * @event ol/source/Image~ImageSourceEvent#imageloadend\n   * @api\n   */\n  IMAGELOADEND: 'imageloadend',\n\n  /**\n   * Triggered if image loading results in an error.\n   * @event ol/source/Image~ImageSourceEvent#imageloaderror\n   * @api\n   */\n  IMAGELOADERROR: 'imageloaderror'\n\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/source/Image~ImageSource} instances are instances of this\n * type.\n */\nclass ImageSourceEvent extends Event {\n  /**\n   * @param {string} type Type.\n   * @param {import(\"../Image.js\").default} image The image.\n   */\n  constructor(type, image) {\n\n    super(type);\n\n    /**\n     * The image related to the event.\n     * @type {import(\"../Image.js\").default}\n     * @api\n     */\n    this.image = image;\n\n  }\n\n}\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions]\n * @property {import(\"../proj.js\").ProjectionLike} projection\n * @property {Array<number>} [resolutions]\n * @property {import(\"./State.js\").default} [state]\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for sources providing a single image.\n * @abstract\n * @api\n */\nclass ImageSource extends Source {\n  /**\n   * @param {Options} options Single image source options.\n   */\n  constructor(options) {\n    super({\n      attributions: options.attributions,\n      projection: options.projection,\n      state: options.state\n    });\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.resolutions_ = options.resolutions !== undefined ?\n      options.resolutions : null;\n\n\n    /**\n     * @private\n     * @type {import(\"../reproj/Image.js\").default}\n     */\n    this.reprojectedImage_ = null;\n\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.reprojectedRevision_ = 0;\n  }\n\n  /**\n   * @return {Array<number>} Resolutions.\n   * @override\n   */\n  getResolutions() {\n    return this.resolutions_;\n  }\n\n  /**\n   * @protected\n   * @param {number} resolution Resolution.\n   * @return {number} Resolution.\n   */\n  findNearestResolution(resolution) {\n    if (this.resolutions_) {\n      const idx = linearFindNearest(this.resolutions_, resolution, 0);\n      resolution = this.resolutions_[idx];\n    }\n    return resolution;\n  }\n\n  /**\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {import(\"../ImageBase.js\").default} Single image.\n   */\n  getImage(extent, resolution, pixelRatio, projection) {\n    const sourceProjection = this.getProjection();\n    if (!ENABLE_RASTER_REPROJECTION ||\n        !sourceProjection ||\n        !projection ||\n        equivalent(sourceProjection, projection)) {\n      if (sourceProjection) {\n        projection = sourceProjection;\n      }\n      return this.getImageInternal(extent, resolution, pixelRatio, projection);\n    } else {\n      if (this.reprojectedImage_) {\n        if (this.reprojectedRevision_ == this.getRevision() &&\n            equivalent(\n              this.reprojectedImage_.getProjection(), projection) &&\n            this.reprojectedImage_.getResolution() == resolution &&\n            equals(this.reprojectedImage_.getExtent(), extent)) {\n          return this.reprojectedImage_;\n        }\n        this.reprojectedImage_.dispose();\n        this.reprojectedImage_ = null;\n      }\n\n      this.reprojectedImage_ = new ReprojImage(\n        sourceProjection, projection, extent, resolution, pixelRatio,\n        function(extent, resolution, pixelRatio) {\n          return this.getImageInternal(extent, resolution,\n            pixelRatio, sourceProjection);\n        }.bind(this));\n      this.reprojectedRevision_ = this.getRevision();\n\n      return this.reprojectedImage_;\n    }\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {number} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @return {import(\"../ImageBase.js\").default} Single image.\n   * @protected\n   */\n  getImageInternal(extent, resolution, pixelRatio, projection) {\n    return abstract();\n  }\n\n  /**\n   * Handle image change events.\n   * @param {import(\"../events/Event.js\").default} event Event.\n   * @protected\n   */\n  handleImageChange(event) {\n    const image = /** @type {import(\"../Image.js\").default} */ (event.target);\n    switch (image.getState()) {\n      case ImageState.LOADING:\n        this.loading = true;\n        this.dispatchEvent(\n          new ImageSourceEvent(ImageSourceEventType.IMAGELOADSTART,\n            image));\n        break;\n      case ImageState.LOADED:\n        this.loading = false;\n        this.dispatchEvent(\n          new ImageSourceEvent(ImageSourceEventType.IMAGELOADEND,\n            image));\n        break;\n      case ImageState.ERROR:\n        this.loading = false;\n        this.dispatchEvent(\n          new ImageSourceEvent(ImageSourceEventType.IMAGELOADERROR,\n            image));\n        break;\n      default:\n        // pass\n    }\n  }\n}\n\n\n/**\n * Default image load function for image sources that use import(\"../Image.js\").Image image\n * instances.\n * @param {import(\"../Image.js\").default} image Image.\n * @param {string} src Source.\n */\nexport function defaultImageLoadFunction(image, src) {\n  /** @type {HTMLImageElement|HTMLVideoElement} */ (image.getImage()).src = src;\n}\n\n\nexport default ImageSource;\n","/**\n * @module ol/source/common\n */\n\n/**\n * Default WMS version.\n * @type {string}\n */\nexport const DEFAULT_WMS_VERSION = '1.3.0';\n","/**\n * @module ol/geom/flat/reverse\n */\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n */\nexport function coordinates(flatCoordinates, offset, end, stride) {\n  while (offset < end - stride) {\n    for (let i = 0; i < stride; ++i) {\n      const tmp = flatCoordinates[offset + i];\n      flatCoordinates[offset + i] = flatCoordinates[end - stride + i];\n      flatCoordinates[end - stride + i] = tmp;\n    }\n    offset += stride;\n    end -= stride;\n  }\n}\n","/**\n * @module ol/geom/flat/orient\n */\nimport {coordinates as reverseCoordinates} from './reverse.js';\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {boolean} Is clockwise.\n */\nexport function linearRingIsClockwise(flatCoordinates, offset, end, stride) {\n  // http://tinyurl.com/clockwise-method\n  // https://github.com/OSGeo/gdal/blob/trunk/gdal/ogr/ogrlinearring.cpp\n  let edge = 0;\n  let x1 = flatCoordinates[end - stride];\n  let y1 = flatCoordinates[end - stride + 1];\n  for (; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    edge += (x2 - x1) * (y2 + y1);\n    x1 = x2;\n    y1 = y2;\n  }\n  return edge > 0;\n}\n\n\n/**\n * Determines if linear rings are oriented.  By default, left-hand orientation\n * is tested (first ring must be clockwise, remaining rings counter-clockwise).\n * To test for right-hand orientation, use the `opt_right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean=} opt_right Test for right-hand orientation\n *     (counter-clockwise exterior ring and clockwise interior rings).\n * @return {boolean} Rings are correctly oriented.\n */\nexport function linearRingIsOriented(flatCoordinates, offset, ends, stride, opt_right) {\n  const right = opt_right !== undefined ? opt_right : false;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    const isClockwise = linearRingIsClockwise(\n      flatCoordinates, offset, end, stride);\n    if (i === 0) {\n      if ((right && isClockwise) || (!right && !isClockwise)) {\n        return false;\n      }\n    } else {\n      if ((right && !isClockwise) || (!right && isClockwise)) {\n        return false;\n      }\n    }\n    offset = end;\n  }\n  return true;\n}\n\n\n/**\n * Determines if linear rings are oriented.  By default, left-hand orientation\n * is tested (first ring must be clockwise, remaining rings counter-clockwise).\n * To test for right-hand orientation, use the `opt_right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Array of array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean=} opt_right Test for right-hand orientation\n *     (counter-clockwise exterior ring and clockwise interior rings).\n * @return {boolean} Rings are correctly oriented.\n */\nexport function linearRingsAreOriented(flatCoordinates, offset, endss, stride, opt_right) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    if (!linearRingIsOriented(\n      flatCoordinates, offset, endss[i], stride, opt_right)) {\n      return false;\n    }\n  }\n  return true;\n}\n\n\n/**\n * Orient coordinates in a flat array of linear rings.  By default, rings\n * are oriented following the left-hand rule (clockwise for exterior and\n * counter-clockwise for interior rings).  To orient according to the\n * right-hand rule, use the `opt_right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {boolean=} opt_right Follow the right-hand rule for orientation.\n * @return {number} End.\n */\nexport function orientLinearRings(flatCoordinates, offset, ends, stride, opt_right) {\n  const right = opt_right !== undefined ? opt_right : false;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    const isClockwise = linearRingIsClockwise(\n      flatCoordinates, offset, end, stride);\n    const reverse = i === 0 ?\n      (right && isClockwise) || (!right && !isClockwise) :\n      (right && !isClockwise) || (!right && isClockwise);\n    if (reverse) {\n      reverseCoordinates(flatCoordinates, offset, end, stride);\n    }\n    offset = end;\n  }\n  return offset;\n}\n\n\n/**\n * Orient coordinates in a flat array of linear rings.  By default, rings\n * are oriented following the left-hand rule (clockwise for exterior and\n * counter-clockwise for interior rings).  To orient according to the\n * right-hand rule, use the `opt_right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Array of array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean=} opt_right Follow the right-hand rule for orientation.\n * @return {number} End.\n */\nexport function orientLinearRingsArray(flatCoordinates, offset, endss, stride, opt_right) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    offset = orientLinearRings(\n      flatCoordinates, offset, endss[i], stride, opt_right);\n  }\n  return offset;\n}\n","/**\n * @module ol/tilegrid/common\n */\n\n/**\n * Default maximum zoom for default tile grids.\n * @type {number}\n */\nexport const DEFAULT_MAX_ZOOM = 42;\n\n/**\n * Default tile size.\n * @type {number}\n */\nexport const DEFAULT_TILE_SIZE = 256;\n","/**\n * @module ol/geom/Geometry\n */\nimport {abstract} from '../util.js';\nimport BaseObject from '../Object.js';\nimport {createEmpty, getHeight, returnOrUpdate} from '../extent.js';\nimport {transform2D} from './flat/transform.js';\nimport {get as getProjection, getTransform} from '../proj.js';\nimport Units from '../proj/Units.js';\nimport {create as createTransform, compose as composeTransform} from '../transform.js';\n\n\n/**\n * @type {import(\"../transform.js\").Transform}\n */\nconst tmpTransform = createTransform();\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for vector geometries.\n *\n * To get notified of changes to the geometry, register a listener for the\n * generic `change` event on your geometry instance.\n *\n * @abstract\n * @api\n */\nclass Geometry extends BaseObject {\n  constructor() {\n\n    super();\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.extent_ = createEmpty();\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.extentRevision_ = -1;\n\n    /**\n     * @protected\n     * @type {Object<string, Geometry>}\n     */\n    this.simplifiedGeometryCache = {};\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.simplifiedGeometryRevision = 0;\n\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @abstract\n   * @return {!Geometry} Clone.\n   */\n  clone() {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @param {import(\"../coordinate.js\").Coordinate} closestPoint Closest point.\n   * @param {number} minSquaredDistance Minimum squared distance.\n   * @return {number} Minimum squared distance.\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    return abstract();\n  }\n\n  /**\n   * @param {number} x X.\n   * @param {number} y Y.\n   * @return {boolean} Contains (x, y).\n   */\n  containsXY(x, y) {\n    return false;\n  }\n\n  /**\n   * Return the closest point of the geometry to the passed point as\n   * {@link module:ol/coordinate~Coordinate coordinate}.\n   * @param {import(\"../coordinate.js\").Coordinate} point Point.\n   * @param {import(\"../coordinate.js\").Coordinate=} opt_closestPoint Closest point.\n   * @return {import(\"../coordinate.js\").Coordinate} Closest point.\n   * @api\n   */\n  getClosestPoint(point, opt_closestPoint) {\n    const closestPoint = opt_closestPoint ? opt_closestPoint : [NaN, NaN];\n    this.closestPointXY(point[0], point[1], closestPoint, Infinity);\n    return closestPoint;\n  }\n\n  /**\n   * Returns true if this geometry includes the specified coordinate. If the\n   * coordinate is on the boundary of the geometry, returns false.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @return {boolean} Contains coordinate.\n   * @api\n   */\n  intersectsCoordinate(coordinate) {\n    return this.containsXY(coordinate[0], coordinate[1]);\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @protected\n   * @return {import(\"../extent.js\").Extent} extent Extent.\n   */\n  computeExtent(extent) {\n    return abstract();\n  }\n\n  /**\n   * Get the extent of the geometry.\n   * @param {import(\"../extent.js\").Extent=} opt_extent Extent.\n   * @return {import(\"../extent.js\").Extent} extent Extent.\n   * @api\n   */\n  getExtent(opt_extent) {\n    if (this.extentRevision_ != this.getRevision()) {\n      this.extent_ = this.computeExtent(this.extent_);\n      this.extentRevision_ = this.getRevision();\n    }\n    return returnOrUpdate(this.extent_, opt_extent);\n  }\n\n  /**\n   * Rotate the geometry around a given coordinate. This modifies the geometry\n   * coordinates in place.\n   * @abstract\n   * @param {number} angle Rotation angle in radians.\n   * @param {import(\"../coordinate.js\").Coordinate} anchor The rotation center.\n   * @api\n   */\n  rotate(angle, anchor) {\n    abstract();\n  }\n\n  /**\n   * Scale the geometry (with an optional origin).  This modifies the geometry\n   * coordinates in place.\n   * @abstract\n   * @param {number} sx The scaling factor in the x-direction.\n   * @param {number=} opt_sy The scaling factor in the y-direction (defaults to\n   *     sx).\n   * @param {import(\"../coordinate.js\").Coordinate=} opt_anchor The scale origin (defaults to the center\n   *     of the geometry extent).\n   * @api\n   */\n  scale(sx, opt_sy, opt_anchor) {\n    abstract();\n  }\n\n  /**\n   * Create a simplified version of this geometry.  For linestrings, this uses\n   * the the {@link\n   * https://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm\n   * Douglas Peucker} algorithm.  For polygons, a quantization-based\n   * simplification is used to preserve topology.\n   * @param {number} tolerance The tolerance distance for simplification.\n   * @return {Geometry} A new, simplified version of the original geometry.\n   * @api\n   */\n  simplify(tolerance) {\n    return this.getSimplifiedGeometry(tolerance * tolerance);\n  }\n\n  /**\n   * Create a simplified version of this geometry using the Douglas Peucker\n   * algorithm.\n   * See https://en.wikipedia.org/wiki/Ramer-Douglas-Peucker_algorithm.\n   * @abstract\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {Geometry} Simplified geometry.\n   */\n  getSimplifiedGeometry(squaredTolerance) {\n    return abstract();\n  }\n\n  /**\n   * Get the type of this geometry.\n   * @abstract\n   * @return {import(\"./GeometryType.js\").default} Geometry type.\n   */\n  getType() {\n    return abstract();\n  }\n\n  /**\n   * Apply a transform function to each coordinate of the geometry.\n   * The geometry is modified in place.\n   * If you do not want the geometry modified in place, first `clone()` it and\n   * then use this function on the clone.\n   * @abstract\n   * @param {import(\"../proj.js\").TransformFunction} transformFn Transform.\n   */\n  applyTransform(transformFn) {\n    abstract();\n  }\n\n  /**\n   * Test if the geometry and the passed extent intersect.\n   * @abstract\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @return {boolean} `true` if the geometry and the extent intersect.\n   */\n  intersectsExtent(extent) {\n    return abstract();\n  }\n\n  /**\n   * Translate the geometry.  This modifies the geometry coordinates in place.  If\n   * instead you want a new geometry, first `clone()` this geometry.\n   * @abstract\n   * @param {number} deltaX Delta X.\n   * @param {number} deltaY Delta Y.\n   * @api\n   */\n  translate(deltaX, deltaY) {\n    abstract();\n  }\n\n  /**\n   * Transform each coordinate of the geometry from one coordinate reference\n   * system to another. The geometry is modified in place.\n   * For example, a line will be transformed to a line and a circle to a circle.\n   * If you do not want the geometry modified in place, first `clone()` it and\n   * then use this function on the clone.\n   *\n   * @param {import(\"../proj.js\").ProjectionLike} source The current projection.  Can be a\n   *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n   * @param {import(\"../proj.js\").ProjectionLike} destination The desired projection.  Can be a\n   *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n   * @return {Geometry} This geometry.  Note that original geometry is\n   *     modified in place.\n   * @api\n   */\n  transform(source, destination) {\n    /** @type {import(\"../proj/Projection.js\").default} */\n    const sourceProj = getProjection(source);\n    const transformFn = sourceProj.getUnits() == Units.TILE_PIXELS ?\n      function(inCoordinates, outCoordinates, stride) {\n        const pixelExtent = sourceProj.getExtent();\n        const projectedExtent = sourceProj.getWorldExtent();\n        const scale = getHeight(projectedExtent) / getHeight(pixelExtent);\n        composeTransform(tmpTransform,\n          projectedExtent[0], projectedExtent[3],\n          scale, -scale, 0,\n          0, 0);\n        transform2D(inCoordinates, 0, inCoordinates.length, stride,\n          tmpTransform, outCoordinates);\n        return getTransform(sourceProj, destination)(inCoordinates, outCoordinates, stride);\n      } :\n      getTransform(sourceProj, destination);\n    this.applyTransform(transformFn);\n    return this;\n  }\n\n}\n\n\nexport default Geometry;\n","/**\n * @module ol/format/GeoJSON\n */\n\nimport {assert} from '../asserts.js';\nimport Feature from '../Feature.js';\nimport {transformWithOptions} from './Feature.js';\nimport JSONFeature from './JSONFeature.js';\nimport GeometryCollection from '../geom/GeometryCollection.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport {assign, isEmpty} from '../obj.js';\nimport {get as getProjection} from '../proj.js';\nimport GeometryType from '../geom/GeometryType.js';\n\n/**\n * @typedef {import(\"geojson\").GeoJSON} GeoJSONObject\n * @typedef {import(\"geojson\").Feature} GeoJSONFeature\n * @typedef {import(\"geojson\").FeatureCollection} GeoJSONFeatureCollection\n * @typedef {import(\"geojson\").Geometry} GeoJSONGeometry\n * @typedef {import(\"geojson\").Point} GeoJSONPoint\n * @typedef {import(\"geojson\").LineString} GeoJSONLineString\n * @typedef {import(\"geojson\").Polygon} GeoJSONPolygon\n * @typedef {import(\"geojson\").MultiPoint} GeoJSONMultiPoint\n * @typedef {import(\"geojson\").MultiLineString} GeoJSONMultiLineString\n * @typedef {import(\"geojson\").MultiPolygon} GeoJSONMultiPolygon\n * @typedef {import(\"geojson\").GeometryCollection} GeoJSONGeometryCollection\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../proj.js\").ProjectionLike} [dataProjection='EPSG:4326'] Default data projection.\n * @property {import(\"../proj.js\").ProjectionLike} [featureProjection] Projection for features read or\n * written by the format.  Options passed to read or write methods will take precedence.\n * @property {string} [geometryName] Geometry name to use when creating features.\n * @property {boolean} [extractGeometryName=false] Certain GeoJSON providers include\n * the geometry_name field in the feature GeoJSON. If set to `true` the GeoJSON reader\n * will look for that field to set the geometry name. If both this field is set to `true`\n * and a `geometryName` is provided, the `geometryName` will take precedence.\n */\n\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the GeoJSON format.\n *\n  * @api\n */\nclass GeoJSON extends JSONFeature {\n\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super();\n\n    /**\n     * @inheritDoc\n     */\n    this.dataProjection = getProjection(\n      options.dataProjection ?\n        options.dataProjection : 'EPSG:4326');\n\n    if (options.featureProjection) {\n      this.defaultFeatureProjection = getProjection(options.featureProjection);\n    }\n\n    /**\n     * Name of the geometry attribute for features.\n     * @type {string|undefined}\n     * @private\n     */\n    this.geometryName_ = options.geometryName;\n\n    /**\n     * Look for the geometry name in the feature GeoJSON\n     * @type {boolean|undefined}\n     * @private\n     */\n    this.extractGeometryName_ = options.extractGeometryName;\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeatureFromObject(object, opt_options) {\n    /**\n     * @type {GeoJSONFeature}\n     */\n    let geoJSONFeature = null;\n    if (object['type'] === 'Feature') {\n      geoJSONFeature = /** @type {GeoJSONFeature} */ (object);\n    } else {\n      geoJSONFeature = {\n        'type': 'Feature',\n        'geometry': /** @type {GeoJSONGeometry} */ (object),\n        'properties': null\n      };\n    }\n\n    const geometry = readGeometry(geoJSONFeature['geometry'], opt_options);\n    const feature = new Feature();\n    if (this.geometryName_) {\n      feature.setGeometryName(this.geometryName_);\n    } else if (this.extractGeometryName_ && 'geometry_name' in geoJSONFeature !== undefined) {\n      feature.setGeometryName(geoJSONFeature['geometry_name']);\n    }\n    feature.setGeometry(geometry);\n\n    if ('id' in geoJSONFeature) {\n      feature.setId(geoJSONFeature['id']);\n    }\n\n    if (geoJSONFeature['properties']) {\n      feature.setProperties(geoJSONFeature['properties']);\n    }\n    return feature;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeaturesFromObject(object, opt_options) {\n    const geoJSONObject = /** @type {GeoJSONObject} */ (object);\n    /** @type {Array<import(\"../Feature.js\").default>} */\n    let features = null;\n    if (geoJSONObject['type'] === 'FeatureCollection') {\n      const geoJSONFeatureCollection = /** @type {GeoJSONFeatureCollection} */ (object);\n      features = [];\n      const geoJSONFeatures = geoJSONFeatureCollection['features'];\n      for (let i = 0, ii = geoJSONFeatures.length; i < ii; ++i) {\n        features.push(this.readFeatureFromObject(geoJSONFeatures[i], opt_options));\n      }\n    } else {\n      features = [this.readFeatureFromObject(object, opt_options)];\n    }\n    return features;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readGeometryFromObject(object, opt_options) {\n    return readGeometry(/** @type {GeoJSONGeometry} */ (object), opt_options);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readProjectionFromObject(object) {\n    const crs = object['crs'];\n    let projection;\n    if (crs) {\n      if (crs['type'] == 'name') {\n        projection = getProjection(crs['properties']['name']);\n      } else {\n        assert(false, 36); // Unknown SRS type\n      }\n    } else {\n      projection = this.dataProjection;\n    }\n    return (\n      /** @type {import(\"../proj/Projection.js\").default} */ (projection)\n    );\n  }\n\n  /**\n   * Encode a feature as a GeoJSON Feature object.\n   *\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {GeoJSONFeature} Object.\n   * @override\n   * @api\n   */\n  writeFeatureObject(feature, opt_options) {\n    opt_options = this.adaptOptions(opt_options);\n\n    /** @type {GeoJSONFeature} */\n    const object = {\n      'type': 'Feature',\n      geometry: null,\n      properties: null\n    };\n\n    const id = feature.getId();\n    if (id !== undefined) {\n      object.id = id;\n    }\n\n    const geometry = feature.getGeometry();\n    if (geometry) {\n      object.geometry = writeGeometry(geometry, opt_options);\n    }\n\n    const properties = feature.getProperties();\n    delete properties[feature.getGeometryName()];\n    if (!isEmpty(properties)) {\n      object.properties = properties;\n    }\n    return object;\n  }\n\n  /**\n   * Encode an array of features as a GeoJSON object.\n   *\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {GeoJSONFeatureCollection} GeoJSON Object.\n   * @override\n   * @api\n   */\n  writeFeaturesObject(features, opt_options) {\n    opt_options = this.adaptOptions(opt_options);\n    const objects = [];\n    for (let i = 0, ii = features.length; i < ii; ++i) {\n      objects.push(this.writeFeatureObject(features[i], opt_options));\n    }\n    return {\n      type: 'FeatureCollection',\n      features: objects\n    };\n  }\n\n  /**\n   * Encode a geometry as a GeoJSON object.\n   *\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {GeoJSONGeometry|GeoJSONGeometryCollection} Object.\n   * @override\n   * @api\n   */\n  writeGeometryObject(geometry, opt_options) {\n    return writeGeometry(geometry, this.adaptOptions(opt_options));\n  }\n}\n\n\n/**\n * @param {GeoJSONGeometry|GeoJSONGeometryCollection} object Object.\n * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n * @return {import(\"../geom/Geometry.js\").default} Geometry.\n */\nfunction readGeometry(object, opt_options) {\n  if (!object) {\n    return null;\n  }\n\n  /**\n   * @type {import(\"../geom/Geometry.js\").default}\n   */\n  let geometry;\n  switch (object['type']) {\n    case GeometryType.POINT: {\n      geometry = readPointGeometry(/** @type {GeoJSONPoint} */ (object));\n      break;\n    }\n    case GeometryType.LINE_STRING: {\n      geometry = readLineStringGeometry(/** @type {GeoJSONLineString} */ (object));\n      break;\n    }\n    case GeometryType.POLYGON: {\n      geometry = readPolygonGeometry(/** @type {GeoJSONPolygon} */ (object));\n      break;\n    }\n    case GeometryType.MULTI_POINT: {\n      geometry = readMultiPointGeometry(/** @type {GeoJSONMultiPoint} */ (object));\n      break;\n    }\n    case GeometryType.MULTI_LINE_STRING: {\n      geometry = readMultiLineStringGeometry(/** @type {GeoJSONMultiLineString} */ (object));\n      break;\n    }\n    case GeometryType.MULTI_POLYGON: {\n      geometry = readMultiPolygonGeometry(/** @type {GeoJSONMultiPolygon} */ (object));\n      break;\n    }\n    case GeometryType.GEOMETRY_COLLECTION: {\n      geometry = readGeometryCollectionGeometry(/** @type {GeoJSONGeometryCollection} */ (object));\n      break;\n    }\n    default: {\n      throw new Error('Unsupported GeoJSON type: ' + object.type);\n    }\n  }\n  return /** @type {import(\"../geom/Geometry.js\").default} */ (transformWithOptions(geometry, false, opt_options));\n}\n\n\n/**\n * @param {GeoJSONGeometryCollection} object Object.\n * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n * @return {GeometryCollection} Geometry collection.\n */\nfunction readGeometryCollectionGeometry(object, opt_options) {\n  const geometries = object['geometries'].map(\n    /**\n     * @param {GeoJSONGeometry} geometry Geometry.\n     * @return {import(\"../geom/Geometry.js\").default} geometry Geometry.\n     */\n    function(geometry) {\n      return readGeometry(geometry, opt_options);\n    });\n  return new GeometryCollection(geometries);\n}\n\n\n/**\n * @param {GeoJSONPoint} object Object.\n * @return {Point} Point.\n */\nfunction readPointGeometry(object) {\n  return new Point(object['coordinates']);\n}\n\n\n/**\n * @param {GeoJSONLineString} object Object.\n * @return {LineString} LineString.\n */\nfunction readLineStringGeometry(object) {\n  return new LineString(object['coordinates']);\n}\n\n\n/**\n * @param {GeoJSONMultiLineString} object Object.\n * @return {MultiLineString} MultiLineString.\n */\nfunction readMultiLineStringGeometry(object) {\n  return new MultiLineString(object['coordinates']);\n}\n\n\n/**\n * @param {GeoJSONMultiPoint} object Object.\n * @return {MultiPoint} MultiPoint.\n */\nfunction readMultiPointGeometry(object) {\n  return new MultiPoint(object['coordinates']);\n}\n\n\n/**\n * @param {GeoJSONMultiPolygon} object Object.\n * @return {MultiPolygon} MultiPolygon.\n */\nfunction readMultiPolygonGeometry(object) {\n  return new MultiPolygon(object['coordinates']);\n}\n\n\n/**\n * @param {GeoJSONPolygon} object Object.\n * @return {Polygon} Polygon.\n */\nfunction readPolygonGeometry(object) {\n  return new Polygon(object['coordinates']);\n}\n\n\n/**\n * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeGeometry(geometry, opt_options) {\n  geometry = /** @type {import(\"../geom/Geometry.js\").default} */ (transformWithOptions(geometry, true, opt_options));\n  const type = geometry.getType();\n\n  /** @type {GeoJSONGeometry} */\n  let geoJSON;\n  switch (type) {\n    case GeometryType.POINT: {\n      geoJSON = writePointGeometry(/** @type {Point} */ (geometry), opt_options);\n      break;\n    }\n    case GeometryType.LINE_STRING: {\n      geoJSON = writeLineStringGeometry(/** @type {LineString} */ (geometry), opt_options);\n      break;\n    }\n    case GeometryType.POLYGON: {\n      geoJSON = writePolygonGeometry(/** @type {Polygon} */ (geometry), opt_options);\n      break;\n    }\n    case GeometryType.MULTI_POINT: {\n      geoJSON = writeMultiPointGeometry(/** @type {MultiPoint} */ (geometry), opt_options);\n      break;\n    }\n    case GeometryType.MULTI_LINE_STRING: {\n      geoJSON = writeMultiLineStringGeometry(/** @type {MultiLineString} */ (geometry), opt_options);\n      break;\n    }\n    case GeometryType.MULTI_POLYGON: {\n      geoJSON = writeMultiPolygonGeometry(/** @type {MultiPolygon} */ (geometry), opt_options);\n      break;\n    }\n    case GeometryType.GEOMETRY_COLLECTION: {\n      geoJSON = writeGeometryCollectionGeometry(/** @type {GeometryCollection} */ (geometry), opt_options);\n      break;\n    }\n    case GeometryType.CIRCLE: {\n      geoJSON = {\n        type: 'GeometryCollection',\n        geometries: []\n      };\n      break;\n    }\n    default: {\n      throw new Error('Unsupported geometry type: ' + type);\n    }\n  }\n  return geoJSON;\n}\n\n\n/**\n * @param {GeometryCollection} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometryCollection} GeoJSON geometry collection.\n */\nfunction writeGeometryCollectionGeometry(geometry, opt_options) {\n  const geometries = geometry.getGeometriesArray().map(function(geometry) {\n    const options = assign({}, opt_options);\n    delete options.featureProjection;\n    return writeGeometry(geometry, options);\n  });\n  return {\n    type: 'GeometryCollection',\n    geometries: geometries\n  };\n}\n\n\n/**\n * @param {LineString} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeLineStringGeometry(geometry, opt_options) {\n  return {\n    type: 'LineString',\n    coordinates: geometry.getCoordinates()\n  };\n}\n\n\n/**\n * @param {MultiLineString} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeMultiLineStringGeometry(geometry, opt_options) {\n  return {\n    type: 'MultiLineString',\n    coordinates: geometry.getCoordinates()\n  };\n}\n\n\n/**\n * @param {MultiPoint} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeMultiPointGeometry(geometry, opt_options) {\n  return {\n    type: 'MultiPoint',\n    coordinates: geometry.getCoordinates()\n  };\n}\n\n\n/**\n * @param {MultiPolygon} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writeMultiPolygonGeometry(geometry, opt_options) {\n  let right;\n  if (opt_options) {\n    right = opt_options.rightHanded;\n  }\n  return {\n    type: 'MultiPolygon',\n    coordinates: geometry.getCoordinates(right)\n  };\n}\n\n\n/**\n * @param {Point} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writePointGeometry(geometry, opt_options) {\n  return {\n    type: 'Point',\n    coordinates: geometry.getCoordinates()\n  };\n}\n\n\n/**\n * @param {Polygon} geometry Geometry.\n * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n * @return {GeoJSONGeometry} GeoJSON geometry.\n */\nfunction writePolygonGeometry(geometry, opt_options) {\n  let right;\n  if (opt_options) {\n    right = opt_options.rightHanded;\n  }\n  return {\n    type: 'Polygon',\n    coordinates: geometry.getCoordinates(right)\n  };\n}\n\n\nexport default GeoJSON;\n","/**\n * @module ol/extent/Corner\n */\n\n/**\n * Extent corner.\n * @enum {string}\n */\nexport default {\n  BOTTOM_LEFT: 'bottom-left',\n  BOTTOM_RIGHT: 'bottom-right',\n  TOP_LEFT: 'top-left',\n  TOP_RIGHT: 'top-right'\n};\n","/**\n * @module ol/TileRange\n */\n\n/**\n * A representation of a contiguous block of tiles.  A tile range is specified\n * by its min/max tile coordinates and is inclusive of coordinates.\n */\nclass TileRange {\n\n  /**\n   * @param {number} minX Minimum X.\n   * @param {number} maxX Maximum X.\n   * @param {number} minY Minimum Y.\n   * @param {number} maxY Maximum Y.\n   */\n  constructor(minX, maxX, minY, maxY) {\n\n    /**\n     * @type {number}\n     */\n    this.minX = minX;\n\n    /**\n     * @type {number}\n     */\n    this.maxX = maxX;\n\n    /**\n     * @type {number}\n     */\n    this.minY = minY;\n\n    /**\n     * @type {number}\n     */\n    this.maxY = maxY;\n\n  }\n\n  /**\n   * @param {import(\"./tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @return {boolean} Contains tile coordinate.\n   */\n  contains(tileCoord) {\n    return this.containsXY(tileCoord[1], tileCoord[2]);\n  }\n\n  /**\n   * @param {TileRange} tileRange Tile range.\n   * @return {boolean} Contains.\n   */\n  containsTileRange(tileRange) {\n    return this.minX <= tileRange.minX && tileRange.maxX <= this.maxX &&\n       this.minY <= tileRange.minY && tileRange.maxY <= this.maxY;\n  }\n\n  /**\n   * @param {number} x Tile coordinate x.\n   * @param {number} y Tile coordinate y.\n   * @return {boolean} Contains coordinate.\n   */\n  containsXY(x, y) {\n    return this.minX <= x && x <= this.maxX && this.minY <= y && y <= this.maxY;\n  }\n\n  /**\n   * @param {TileRange} tileRange Tile range.\n   * @return {boolean} Equals.\n   */\n  equals(tileRange) {\n    return this.minX == tileRange.minX && this.minY == tileRange.minY &&\n       this.maxX == tileRange.maxX && this.maxY == tileRange.maxY;\n  }\n\n  /**\n   * @param {TileRange} tileRange Tile range.\n   */\n  extend(tileRange) {\n    if (tileRange.minX < this.minX) {\n      this.minX = tileRange.minX;\n    }\n    if (tileRange.maxX > this.maxX) {\n      this.maxX = tileRange.maxX;\n    }\n    if (tileRange.minY < this.minY) {\n      this.minY = tileRange.minY;\n    }\n    if (tileRange.maxY > this.maxY) {\n      this.maxY = tileRange.maxY;\n    }\n  }\n\n  /**\n   * @return {number} Height.\n   */\n  getHeight() {\n    return this.maxY - this.minY + 1;\n  }\n\n  /**\n   * @return {import(\"./size.js\").Size} Size.\n   */\n  getSize() {\n    return [this.getWidth(), this.getHeight()];\n  }\n\n  /**\n   * @return {number} Width.\n   */\n  getWidth() {\n    return this.maxX - this.minX + 1;\n  }\n\n  /**\n   * @param {TileRange} tileRange Tile range.\n   * @return {boolean} Intersects.\n   */\n  intersects(tileRange) {\n    return this.minX <= tileRange.maxX &&\n       this.maxX >= tileRange.minX &&\n       this.minY <= tileRange.maxY &&\n       this.maxY >= tileRange.minY;\n  }\n}\n\n\n/**\n * @param {number} minX Minimum X.\n * @param {number} maxX Maximum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxY Maximum Y.\n * @param {TileRange=} tileRange TileRange.\n * @return {TileRange} Tile range.\n */\nexport function createOrUpdate(minX, maxX, minY, maxY, tileRange) {\n  if (tileRange !== undefined) {\n    tileRange.minX = minX;\n    tileRange.maxX = maxX;\n    tileRange.minY = minY;\n    tileRange.maxY = maxY;\n    return tileRange;\n  } else {\n    return new TileRange(minX, maxX, minY, maxY);\n  }\n}\n\n\nexport default TileRange;\n","/**\n * @module ol/Disposable\n */\n\n/**\n * @classdesc\n * Objects that need to clean up after themselves.\n */\nclass Disposable {\n\n  constructor() {\n    /**\n     * The object has already been disposed.\n     * @type {boolean}\n     * @private\n     */\n    this.disposed_ = false;\n  }\n\n  /**\n   * Clean up.\n   */\n  dispose() {\n    if (!this.disposed_) {\n      this.disposed_ = true;\n      this.disposeInternal();\n    }\n  }\n\n  /**\n   * Extension point for disposable objects.\n   * @protected\n   */\n  disposeInternal() {}\n}\n\nexport default Disposable;\n","/**\n * @module ol/source/ImageWMS\n */\n\nimport {DEFAULT_WMS_VERSION} from './common.js';\n\nimport ImageWrapper from '../Image.js';\nimport {assert} from '../asserts.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {containsExtent, getCenter, getForViewAndSize, getHeight, getWidth} from '../extent.js';\nimport {assign} from '../obj.js';\nimport {get as getProjection, transform} from '../proj.js';\nimport {calculateSourceResolution} from '../reproj.js';\nimport ImageSource, {defaultImageLoadFunction} from './Image.js';\nimport WMSServerType from './WMSServerType.js';\nimport {compareVersions} from '../string.js';\nimport {appendParams} from '../uri.js';\n\n\n/**\n * @const\n * @type {import(\"../size.js\").Size}\n */\nconst GETFEATUREINFO_IMAGE_SIZE = [101, 101];\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you are using the WebGL renderer or if you want to\n * access pixel data with the Canvas renderer.  See\n * https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [hidpi=true] Use the `ol/Map#pixelRatio` value when requesting\n * the image from the remote server.\n * @property {import(\"./WMSServerType.js\").default|string} [serverType] The type of\n * the remote WMS server: `mapserver`, `geoserver` or `qgis`. Only needed if `hidpi` is `true`.\n * @property {import(\"../Image.js\").LoadFunction} [imageLoadFunction] Optional function to load an image given a URL.\n * @property {Object<string,*>} params WMS request parameters.\n * At least a `LAYERS` param is required. `STYLES` is\n * `''` by default. `VERSION` is `1.3.0` by default. `WIDTH`, `HEIGHT`, `BBOX`\n * and `CRS` (`SRS` for WMS version < 1.3.0) will be set dynamically.\n * @property {import(\"../proj.js\").ProjectionLike} projection Projection.\n * @property {number} [ratio=1.5] Ratio. `1` means image requests are the size of the map viewport, `2` means\n * twice the width and height of the map viewport, and so on. Must be `1` or\n * higher.\n * @property {Array<number>} [resolutions] Resolutions.\n * If specified, requests will be made for these resolutions only.\n * @property {string} url WMS service URL.\n */\n\n\n/**\n * @classdesc\n * Source for WMS servers providing single, untiled images.\n *\n * @fires ol/source/Image~ImageSourceEvent\n * @api\n */\nclass ImageWMS extends ImageSource {\n  /**\n   * @param {Options=} [opt_options] ImageWMS options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || /** @type {Options} */ ({});\n\n    super({\n      attributions: options.attributions,\n      projection: options.projection,\n      resolutions: options.resolutions\n    });\n\n    /**\n     * @private\n     * @type {?string}\n     */\n    this.crossOrigin_ =\n        options.crossOrigin !== undefined ? options.crossOrigin : null;\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.url_ = options.url;\n\n    /**\n     * @private\n     * @type {import(\"../Image.js\").LoadFunction}\n     */\n    this.imageLoadFunction_ = options.imageLoadFunction !== undefined ?\n      options.imageLoadFunction : defaultImageLoadFunction;\n\n    /**\n     * @private\n     * @type {!Object}\n     */\n    this.params_ = options.params || {};\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.v13_ = true;\n    this.updateV13_();\n\n    /**\n     * @private\n     * @type {import(\"./WMSServerType.js\").default|undefined}\n     */\n    this.serverType_ = /** @type {import(\"./WMSServerType.js\").default|undefined} */ (options.serverType);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.hidpi_ = options.hidpi !== undefined ? options.hidpi : true;\n\n    /**\n     * @private\n     * @type {import(\"../Image.js\").default}\n     */\n    this.image_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.imageSize_ = [0, 0];\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.renderedRevision_ = 0;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.ratio_ = options.ratio !== undefined ? options.ratio : 1.5;\n\n  }\n\n  /**\n   * Return the GetFeatureInfo URL for the passed coordinate, resolution, and\n   * projection. Return `undefined` if the GetFeatureInfo URL cannot be\n   * constructed.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {number} resolution Resolution.\n   * @param {import(\"../proj.js\").ProjectionLike} projection Projection.\n   * @param {!Object} params GetFeatureInfo params. `INFO_FORMAT` at least should\n   *     be provided. If `QUERY_LAYERS` is not provided then the layers specified\n   *     in the `LAYERS` parameter will be used. `VERSION` should not be\n   *     specified here.\n   * @return {string|undefined} GetFeatureInfo URL.\n   * @api\n   */\n  getGetFeatureInfoUrl(coordinate, resolution, projection, params) {\n    if (this.url_ === undefined) {\n      return undefined;\n    }\n    const projectionObj = getProjection(projection);\n    const sourceProjectionObj = this.getProjection();\n\n    if (sourceProjectionObj && sourceProjectionObj !== projectionObj) {\n      resolution = calculateSourceResolution(sourceProjectionObj, projectionObj, coordinate, resolution);\n      coordinate = transform(coordinate, projectionObj, sourceProjectionObj);\n    }\n\n    const extent = getForViewAndSize(coordinate, resolution, 0,\n      GETFEATUREINFO_IMAGE_SIZE);\n\n    const baseParams = {\n      'SERVICE': 'WMS',\n      'VERSION': DEFAULT_WMS_VERSION,\n      'REQUEST': 'GetFeatureInfo',\n      'FORMAT': 'image/png',\n      'TRANSPARENT': true,\n      'QUERY_LAYERS': this.params_['LAYERS']\n    };\n    assign(baseParams, this.params_, params);\n\n    const x = Math.floor((coordinate[0] - extent[0]) / resolution);\n    const y = Math.floor((extent[3] - coordinate[1]) / resolution);\n    baseParams[this.v13_ ? 'I' : 'X'] = x;\n    baseParams[this.v13_ ? 'J' : 'Y'] = y;\n\n    return this.getRequestUrl_(\n      extent, GETFEATUREINFO_IMAGE_SIZE,\n      1, sourceProjectionObj || projectionObj, baseParams);\n  }\n\n  /**\n   * Get the user-provided params, i.e. those passed to the constructor through\n   * the \"params\" option, and possibly updated using the updateParams method.\n   * @return {Object} Params.\n   * @api\n   */\n  getParams() {\n    return this.params_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImageInternal(extent, resolution, pixelRatio, projection) {\n\n    if (this.url_ === undefined) {\n      return null;\n    }\n\n    resolution = this.findNearestResolution(resolution);\n\n    if (pixelRatio != 1 && (!this.hidpi_ || this.serverType_ === undefined)) {\n      pixelRatio = 1;\n    }\n\n    const imageResolution = resolution / pixelRatio;\n\n    const center = getCenter(extent);\n    const viewWidth = Math.ceil(getWidth(extent) / imageResolution);\n    const viewHeight = Math.ceil(getHeight(extent) / imageResolution);\n    const viewExtent = getForViewAndSize(center, imageResolution, 0,\n      [viewWidth, viewHeight]);\n    const requestWidth = Math.ceil(this.ratio_ * getWidth(extent) / imageResolution);\n    const requestHeight = Math.ceil(this.ratio_ * getHeight(extent) / imageResolution);\n    const requestExtent = getForViewAndSize(center, imageResolution, 0,\n      [requestWidth, requestHeight]);\n\n    const image = this.image_;\n    if (image &&\n        this.renderedRevision_ == this.getRevision() &&\n        image.getResolution() == resolution &&\n        image.getPixelRatio() == pixelRatio &&\n        containsExtent(image.getExtent(), viewExtent)) {\n      return image;\n    }\n\n    const params = {\n      'SERVICE': 'WMS',\n      'VERSION': DEFAULT_WMS_VERSION,\n      'REQUEST': 'GetMap',\n      'FORMAT': 'image/png',\n      'TRANSPARENT': true\n    };\n    assign(params, this.params_);\n\n    this.imageSize_[0] = Math.round(getWidth(requestExtent) / imageResolution);\n    this.imageSize_[1] = Math.round(getHeight(requestExtent) / imageResolution);\n\n    const url = this.getRequestUrl_(requestExtent, this.imageSize_, pixelRatio,\n      projection, params);\n\n    this.image_ = new ImageWrapper(requestExtent, resolution, pixelRatio,\n      url, this.crossOrigin_, this.imageLoadFunction_);\n\n    this.renderedRevision_ = this.getRevision();\n\n    listen(this.image_, EventType.CHANGE,\n      this.handleImageChange, this);\n\n    return this.image_;\n\n  }\n\n  /**\n   * Return the image load function of the source.\n   * @return {import(\"../Image.js\").LoadFunction} The image load function.\n   * @api\n   */\n  getImageLoadFunction() {\n    return this.imageLoadFunction_;\n  }\n\n  /**\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @param {import(\"../size.js\").Size} size Size.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @param {Object} params Params.\n   * @return {string} Request URL.\n   * @private\n   */\n  getRequestUrl_(extent, size, pixelRatio, projection, params) {\n\n    assert(this.url_ !== undefined, 9); // `url` must be configured or set using `#setUrl()`\n\n    params[this.v13_ ? 'CRS' : 'SRS'] = projection.getCode();\n\n    if (!('STYLES' in this.params_)) {\n      params['STYLES'] = '';\n    }\n\n    if (pixelRatio != 1) {\n      switch (this.serverType_) {\n        case WMSServerType.GEOSERVER:\n          const dpi = (90 * pixelRatio + 0.5) | 0;\n          if ('FORMAT_OPTIONS' in params) {\n            params['FORMAT_OPTIONS'] += ';dpi:' + dpi;\n          } else {\n            params['FORMAT_OPTIONS'] = 'dpi:' + dpi;\n          }\n          break;\n        case WMSServerType.MAPSERVER:\n          params['MAP_RESOLUTION'] = 90 * pixelRatio;\n          break;\n        case WMSServerType.CARMENTA_SERVER:\n        case WMSServerType.QGIS:\n          params['DPI'] = 90 * pixelRatio;\n          break;\n        default:\n          assert(false, 8); // Unknown `serverType` configured\n          break;\n      }\n    }\n\n    params['WIDTH'] = size[0];\n    params['HEIGHT'] = size[1];\n\n    const axisOrientation = projection.getAxisOrientation();\n    let bbox;\n    if (this.v13_ && axisOrientation.substr(0, 2) == 'ne') {\n      bbox = [extent[1], extent[0], extent[3], extent[2]];\n    } else {\n      bbox = extent;\n    }\n    params['BBOX'] = bbox.join(',');\n\n    return appendParams(/** @type {string} */ (this.url_), params);\n  }\n\n  /**\n   * Return the URL used for this WMS source.\n   * @return {string|undefined} URL.\n   * @api\n   */\n  getUrl() {\n    return this.url_;\n  }\n\n  /**\n   * Set the image load function of the source.\n   * @param {import(\"../Image.js\").LoadFunction} imageLoadFunction Image load function.\n   * @api\n   */\n  setImageLoadFunction(imageLoadFunction) {\n    this.image_ = null;\n    this.imageLoadFunction_ = imageLoadFunction;\n    this.changed();\n  }\n\n  /**\n   * Set the URL to use for requests.\n   * @param {string|undefined} url URL.\n   * @api\n   */\n  setUrl(url) {\n    if (url != this.url_) {\n      this.url_ = url;\n      this.image_ = null;\n      this.changed();\n    }\n  }\n\n  /**\n   * Update the user-provided params.\n   * @param {Object} params Params.\n   * @api\n   */\n  updateParams(params) {\n    assign(this.params_, params);\n    this.updateV13_();\n    this.image_ = null;\n    this.changed();\n  }\n\n  /**\n   * @private\n   */\n  updateV13_() {\n    const version = this.params_['VERSION'] || DEFAULT_WMS_VERSION;\n    this.v13_ = compareVersions(version, '1.3') >= 0;\n  }\n}\n\n\nexport default ImageWMS;\n","/**\n * @module ol/ImageBase\n */\nimport {abstract} from './util.js';\nimport EventTarget from './events/Target.js';\nimport EventType from './events/EventType.js';\n\n/**\n * @abstract\n */\nclass ImageBase extends EventTarget {\n\n  /**\n   * @param {import(\"./extent.js\").Extent} extent Extent.\n   * @param {number|undefined} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"./ImageState.js\").default} state State.\n   */\n  constructor(extent, resolution, pixelRatio, state) {\n\n    super();\n\n    /**\n     * @protected\n     * @type {import(\"./extent.js\").Extent}\n     */\n    this.extent = extent;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.pixelRatio_ = pixelRatio;\n\n    /**\n     * @protected\n     * @type {number|undefined}\n     */\n    this.resolution = resolution;\n\n    /**\n     * @protected\n     * @type {import(\"./ImageState.js\").default}\n     */\n    this.state = state;\n\n  }\n\n  /**\n   * @protected\n   */\n  changed() {\n    this.dispatchEvent(EventType.CHANGE);\n  }\n\n  /**\n   * @return {import(\"./extent.js\").Extent} Extent.\n   */\n  getExtent() {\n    return this.extent;\n  }\n\n  /**\n   * @abstract\n   * @return {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} Image.\n   */\n  getImage() {\n    return abstract();\n  }\n\n  /**\n   * @return {number} PixelRatio.\n   */\n  getPixelRatio() {\n    return this.pixelRatio_;\n  }\n\n  /**\n   * @return {number} Resolution.\n   */\n  getResolution() {\n    return /** @type {number} */ (this.resolution);\n  }\n\n  /**\n   * @return {import(\"./ImageState.js\").default} State.\n   */\n  getState() {\n    return this.state;\n  }\n\n  /**\n   * Load not yet loaded URI.\n   * @abstract\n   */\n  load() {\n    abstract();\n  }\n}\n\n\nexport default ImageBase;\n","/**\n * @module ol/source/Source\n */\nimport {abstract} from '../util.js';\nimport BaseObject from '../Object.js';\nimport {get as getProjection} from '../proj.js';\nimport SourceState from './State.js';\n\n\n/**\n * A function that returns a string or an array of strings representing source\n * attributions.\n *\n * @typedef {function(import(\"../PluggableMap.js\").FrameState): (string|Array<string>)} Attribution\n */\n\n\n/**\n * A type that can be used to provide attribution information for data sources.\n *\n * It represents either\n * * a simple string (e.g. `' Acme Inc.'`)\n * * an array of simple strings (e.g. `[' Acme Inc.', ' Bacme Inc.']`)\n * * a function that returns a string or array of strings (`{@link module:ol/source/Source~Attribution}`)\n *\n * @typedef {string|Array<string>|Attribution} AttributionLike\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {AttributionLike} [attributions]\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {import(\"../proj.js\").ProjectionLike} projection\n * @property {SourceState} [state='ready']\n * @property {boolean} [wrapX=false]\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for {@link module:ol/layer/Layer~Layer} sources.\n *\n * A generic `change` event is triggered when the state of the source changes.\n * @abstract\n * @api\n */\nclass Source extends BaseObject {\n  /**\n   * @param {Options} options Source options.\n   */\n  constructor(options) {\n\n    super();\n\n    /**\n     * @private\n     * @type {import(\"../proj/Projection.js\").default}\n     */\n    this.projection_ = getProjection(options.projection);\n\n    /**\n     * @private\n     * @type {?Attribution}\n     */\n    this.attributions_ = adaptAttributions(options.attributions);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.attributionsCollapsible_ = options.attributionsCollapsible !== undefined ?\n      options.attributionsCollapsible : true;\n\n    /**\n     * This source is currently loading data. Sources that defer loading to the\n     * map's tile queue never set this to `true`.\n     * @type {boolean}\n     */\n    this.loading = false;\n\n    /**\n     * @private\n     * @type {SourceState}\n     */\n    this.state_ = options.state !== undefined ?\n      options.state : SourceState.READY;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.wrapX_ = options.wrapX !== undefined ? options.wrapX : false;\n\n  }\n\n  /**\n   * Get the attribution function for the source.\n   * @return {?Attribution} Attribution function.\n   */\n  getAttributions() {\n    return this.attributions_;\n  }\n\n  /**\n   * @return {boolean} Aattributions are collapsible.\n   */\n  getAttributionsCollapsible() {\n    return this.attributionsCollapsible_;\n  }\n\n  /**\n   * Get the projection of the source.\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   * @api\n   */\n  getProjection() {\n    return this.projection_;\n  }\n\n  /**\n   * @abstract\n   * @return {Array<number>|undefined} Resolutions.\n   */\n  getResolutions() {\n    return abstract();\n  }\n\n  /**\n   * Get the state of the source, see {@link module:ol/source/State~State} for possible states.\n   * @return {SourceState} State.\n   * @api\n   */\n  getState() {\n    return this.state_;\n  }\n\n  /**\n   * @return {boolean|undefined} Wrap X.\n   */\n  getWrapX() {\n    return this.wrapX_;\n  }\n\n  /**\n   * Refreshes the source and finally dispatches a 'change' event.\n   * @api\n   */\n  refresh() {\n    this.changed();\n  }\n\n  /**\n   * Set the attributions of the source.\n   * @param {AttributionLike|undefined} attributions Attributions.\n   *     Can be passed as `string`, `Array<string>`, `{@link module:ol/source/Source~Attribution}`,\n   *     or `undefined`.\n   * @api\n   */\n  setAttributions(attributions) {\n    this.attributions_ = adaptAttributions(attributions);\n    this.changed();\n  }\n\n  /**\n   * Set the state of the source.\n   * @param {SourceState} state State.\n   * @protected\n   */\n  setState(state) {\n    this.state_ = state;\n    this.changed();\n  }\n}\n\n\n/**\n * Turns the attributions option into an attributions function.\n * @param {AttributionLike|undefined} attributionLike The attribution option.\n * @return {?Attribution} An attribution function (or null).\n */\nfunction adaptAttributions(attributionLike) {\n  if (!attributionLike) {\n    return null;\n  }\n  if (Array.isArray(attributionLike)) {\n    return function(frameState) {\n      return attributionLike;\n    };\n  }\n\n  if (typeof attributionLike === 'function') {\n    return attributionLike;\n  }\n\n  return function(frameState) {\n    return [attributionLike];\n  };\n}\n\n\nexport default Source;\n","'use strict';\n\nmodule.exports = rbush;\nmodule.exports.default = rbush;\n\nvar quickselect = require('quickselect');\n\nfunction rbush(maxEntries, format) {\n    if (!(this instanceof rbush)) return new rbush(maxEntries, format);\n\n    // max entries in a node is 9 by default; min node fill is 40% for best performance\n    this._maxEntries = Math.max(4, maxEntries || 9);\n    this._minEntries = Math.max(2, Math.ceil(this._maxEntries * 0.4));\n\n    if (format) {\n        this._initFormat(format);\n    }\n\n    this.clear();\n}\n\nrbush.prototype = {\n\n    all: function () {\n        return this._all(this.data, []);\n    },\n\n    search: function (bbox) {\n\n        var node = this.data,\n            result = [],\n            toBBox = this.toBBox;\n\n        if (!intersects(bbox, node)) return result;\n\n        var nodesToSearch = [],\n            i, len, child, childBBox;\n\n        while (node) {\n            for (i = 0, len = node.children.length; i < len; i++) {\n\n                child = node.children[i];\n                childBBox = node.leaf ? toBBox(child) : child;\n\n                if (intersects(bbox, childBBox)) {\n                    if (node.leaf) result.push(child);\n                    else if (contains(bbox, childBBox)) this._all(child, result);\n                    else nodesToSearch.push(child);\n                }\n            }\n            node = nodesToSearch.pop();\n        }\n\n        return result;\n    },\n\n    collides: function (bbox) {\n\n        var node = this.data,\n            toBBox = this.toBBox;\n\n        if (!intersects(bbox, node)) return false;\n\n        var nodesToSearch = [],\n            i, len, child, childBBox;\n\n        while (node) {\n            for (i = 0, len = node.children.length; i < len; i++) {\n\n                child = node.children[i];\n                childBBox = node.leaf ? toBBox(child) : child;\n\n                if (intersects(bbox, childBBox)) {\n                    if (node.leaf || contains(bbox, childBBox)) return true;\n                    nodesToSearch.push(child);\n                }\n            }\n            node = nodesToSearch.pop();\n        }\n\n        return false;\n    },\n\n    load: function (data) {\n        if (!(data && data.length)) return this;\n\n        if (data.length < this._minEntries) {\n            for (var i = 0, len = data.length; i < len; i++) {\n                this.insert(data[i]);\n            }\n            return this;\n        }\n\n        // recursively build the tree with the given data from scratch using OMT algorithm\n        var node = this._build(data.slice(), 0, data.length - 1, 0);\n\n        if (!this.data.children.length) {\n            // save as is if tree is empty\n            this.data = node;\n\n        } else if (this.data.height === node.height) {\n            // split root if trees have the same height\n            this._splitRoot(this.data, node);\n\n        } else {\n            if (this.data.height < node.height) {\n                // swap trees if inserted one is bigger\n                var tmpNode = this.data;\n                this.data = node;\n                node = tmpNode;\n            }\n\n            // insert the small tree into the large tree at appropriate level\n            this._insert(node, this.data.height - node.height - 1, true);\n        }\n\n        return this;\n    },\n\n    insert: function (item) {\n        if (item) this._insert(item, this.data.height - 1);\n        return this;\n    },\n\n    clear: function () {\n        this.data = createNode([]);\n        return this;\n    },\n\n    remove: function (item, equalsFn) {\n        if (!item) return this;\n\n        var node = this.data,\n            bbox = this.toBBox(item),\n            path = [],\n            indexes = [],\n            i, parent, index, goingUp;\n\n        // depth-first iterative tree traversal\n        while (node || path.length) {\n\n            if (!node) { // go up\n                node = path.pop();\n                parent = path[path.length - 1];\n                i = indexes.pop();\n                goingUp = true;\n            }\n\n            if (node.leaf) { // check current node\n                index = findItem(item, node.children, equalsFn);\n\n                if (index !== -1) {\n                    // item found, remove the item and condense tree upwards\n                    node.children.splice(index, 1);\n                    path.push(node);\n                    this._condense(path);\n                    return this;\n                }\n            }\n\n            if (!goingUp && !node.leaf && contains(node, bbox)) { // go down\n                path.push(node);\n                indexes.push(i);\n                i = 0;\n                parent = node;\n                node = node.children[0];\n\n            } else if (parent) { // go right\n                i++;\n                node = parent.children[i];\n                goingUp = false;\n\n            } else node = null; // nothing found\n        }\n\n        return this;\n    },\n\n    toBBox: function (item) { return item; },\n\n    compareMinX: compareNodeMinX,\n    compareMinY: compareNodeMinY,\n\n    toJSON: function () { return this.data; },\n\n    fromJSON: function (data) {\n        this.data = data;\n        return this;\n    },\n\n    _all: function (node, result) {\n        var nodesToSearch = [];\n        while (node) {\n            if (node.leaf) result.push.apply(result, node.children);\n            else nodesToSearch.push.apply(nodesToSearch, node.children);\n\n            node = nodesToSearch.pop();\n        }\n        return result;\n    },\n\n    _build: function (items, left, right, height) {\n\n        var N = right - left + 1,\n            M = this._maxEntries,\n            node;\n\n        if (N <= M) {\n            // reached leaf level; return leaf\n            node = createNode(items.slice(left, right + 1));\n            calcBBox(node, this.toBBox);\n            return node;\n        }\n\n        if (!height) {\n            // target height of the bulk-loaded tree\n            height = Math.ceil(Math.log(N) / Math.log(M));\n\n            // target number of root entries to maximize storage utilization\n            M = Math.ceil(N / Math.pow(M, height - 1));\n        }\n\n        node = createNode([]);\n        node.leaf = false;\n        node.height = height;\n\n        // split the items into M mostly square tiles\n\n        var N2 = Math.ceil(N / M),\n            N1 = N2 * Math.ceil(Math.sqrt(M)),\n            i, j, right2, right3;\n\n        multiSelect(items, left, right, N1, this.compareMinX);\n\n        for (i = left; i <= right; i += N1) {\n\n            right2 = Math.min(i + N1 - 1, right);\n\n            multiSelect(items, i, right2, N2, this.compareMinY);\n\n            for (j = i; j <= right2; j += N2) {\n\n                right3 = Math.min(j + N2 - 1, right2);\n\n                // pack each entry recursively\n                node.children.push(this._build(items, j, right3, height - 1));\n            }\n        }\n\n        calcBBox(node, this.toBBox);\n\n        return node;\n    },\n\n    _chooseSubtree: function (bbox, node, level, path) {\n\n        var i, len, child, targetNode, area, enlargement, minArea, minEnlargement;\n\n        while (true) {\n            path.push(node);\n\n            if (node.leaf || path.length - 1 === level) break;\n\n            minArea = minEnlargement = Infinity;\n\n            for (i = 0, len = node.children.length; i < len; i++) {\n                child = node.children[i];\n                area = bboxArea(child);\n                enlargement = enlargedArea(bbox, child) - area;\n\n                // choose entry with the least area enlargement\n                if (enlargement < minEnlargement) {\n                    minEnlargement = enlargement;\n                    minArea = area < minArea ? area : minArea;\n                    targetNode = child;\n\n                } else if (enlargement === minEnlargement) {\n                    // otherwise choose one with the smallest area\n                    if (area < minArea) {\n                        minArea = area;\n                        targetNode = child;\n                    }\n                }\n            }\n\n            node = targetNode || node.children[0];\n        }\n\n        return node;\n    },\n\n    _insert: function (item, level, isNode) {\n\n        var toBBox = this.toBBox,\n            bbox = isNode ? item : toBBox(item),\n            insertPath = [];\n\n        // find the best node for accommodating the item, saving all nodes along the path too\n        var node = this._chooseSubtree(bbox, this.data, level, insertPath);\n\n        // put the item into the node\n        node.children.push(item);\n        extend(node, bbox);\n\n        // split on node overflow; propagate upwards if necessary\n        while (level >= 0) {\n            if (insertPath[level].children.length > this._maxEntries) {\n                this._split(insertPath, level);\n                level--;\n            } else break;\n        }\n\n        // adjust bboxes along the insertion path\n        this._adjustParentBBoxes(bbox, insertPath, level);\n    },\n\n    // split overflowed node into two\n    _split: function (insertPath, level) {\n\n        var node = insertPath[level],\n            M = node.children.length,\n            m = this._minEntries;\n\n        this._chooseSplitAxis(node, m, M);\n\n        var splitIndex = this._chooseSplitIndex(node, m, M);\n\n        var newNode = createNode(node.children.splice(splitIndex, node.children.length - splitIndex));\n        newNode.height = node.height;\n        newNode.leaf = node.leaf;\n\n        calcBBox(node, this.toBBox);\n        calcBBox(newNode, this.toBBox);\n\n        if (level) insertPath[level - 1].children.push(newNode);\n        else this._splitRoot(node, newNode);\n    },\n\n    _splitRoot: function (node, newNode) {\n        // split root node\n        this.data = createNode([node, newNode]);\n        this.data.height = node.height + 1;\n        this.data.leaf = false;\n        calcBBox(this.data, this.toBBox);\n    },\n\n    _chooseSplitIndex: function (node, m, M) {\n\n        var i, bbox1, bbox2, overlap, area, minOverlap, minArea, index;\n\n        minOverlap = minArea = Infinity;\n\n        for (i = m; i <= M - m; i++) {\n            bbox1 = distBBox(node, 0, i, this.toBBox);\n            bbox2 = distBBox(node, i, M, this.toBBox);\n\n            overlap = intersectionArea(bbox1, bbox2);\n            area = bboxArea(bbox1) + bboxArea(bbox2);\n\n            // choose distribution with minimum overlap\n            if (overlap < minOverlap) {\n                minOverlap = overlap;\n                index = i;\n\n                minArea = area < minArea ? area : minArea;\n\n            } else if (overlap === minOverlap) {\n                // otherwise choose distribution with minimum area\n                if (area < minArea) {\n                    minArea = area;\n                    index = i;\n                }\n            }\n        }\n\n        return index;\n    },\n\n    // sorts node children by the best axis for split\n    _chooseSplitAxis: function (node, m, M) {\n\n        var compareMinX = node.leaf ? this.compareMinX : compareNodeMinX,\n            compareMinY = node.leaf ? this.compareMinY : compareNodeMinY,\n            xMargin = this._allDistMargin(node, m, M, compareMinX),\n            yMargin = this._allDistMargin(node, m, M, compareMinY);\n\n        // if total distributions margin value is minimal for x, sort by minX,\n        // otherwise it's already sorted by minY\n        if (xMargin < yMargin) node.children.sort(compareMinX);\n    },\n\n    // total margin of all possible split distributions where each node is at least m full\n    _allDistMargin: function (node, m, M, compare) {\n\n        node.children.sort(compare);\n\n        var toBBox = this.toBBox,\n            leftBBox = distBBox(node, 0, m, toBBox),\n            rightBBox = distBBox(node, M - m, M, toBBox),\n            margin = bboxMargin(leftBBox) + bboxMargin(rightBBox),\n            i, child;\n\n        for (i = m; i < M - m; i++) {\n            child = node.children[i];\n            extend(leftBBox, node.leaf ? toBBox(child) : child);\n            margin += bboxMargin(leftBBox);\n        }\n\n        for (i = M - m - 1; i >= m; i--) {\n            child = node.children[i];\n            extend(rightBBox, node.leaf ? toBBox(child) : child);\n            margin += bboxMargin(rightBBox);\n        }\n\n        return margin;\n    },\n\n    _adjustParentBBoxes: function (bbox, path, level) {\n        // adjust bboxes along the given tree path\n        for (var i = level; i >= 0; i--) {\n            extend(path[i], bbox);\n        }\n    },\n\n    _condense: function (path) {\n        // go through the path, removing empty nodes and updating bboxes\n        for (var i = path.length - 1, siblings; i >= 0; i--) {\n            if (path[i].children.length === 0) {\n                if (i > 0) {\n                    siblings = path[i - 1].children;\n                    siblings.splice(siblings.indexOf(path[i]), 1);\n\n                } else this.clear();\n\n            } else calcBBox(path[i], this.toBBox);\n        }\n    },\n\n    _initFormat: function (format) {\n        // data format (minX, minY, maxX, maxY accessors)\n\n        // uses eval-type function compilation instead of just accepting a toBBox function\n        // because the algorithms are very sensitive to sorting functions performance,\n        // so they should be dead simple and without inner calls\n\n        var compareArr = ['return a', ' - b', ';'];\n\n        this.compareMinX = new Function('a', 'b', compareArr.join(format[0]));\n        this.compareMinY = new Function('a', 'b', compareArr.join(format[1]));\n\n        this.toBBox = new Function('a',\n            'return {minX: a' + format[0] +\n            ', minY: a' + format[1] +\n            ', maxX: a' + format[2] +\n            ', maxY: a' + format[3] + '};');\n    }\n};\n\nfunction findItem(item, items, equalsFn) {\n    if (!equalsFn) return items.indexOf(item);\n\n    for (var i = 0; i < items.length; i++) {\n        if (equalsFn(item, items[i])) return i;\n    }\n    return -1;\n}\n\n// calculate node's bbox from bboxes of its children\nfunction calcBBox(node, toBBox) {\n    distBBox(node, 0, node.children.length, toBBox, node);\n}\n\n// min bounding rectangle of node children from k to p-1\nfunction distBBox(node, k, p, toBBox, destNode) {\n    if (!destNode) destNode = createNode(null);\n    destNode.minX = Infinity;\n    destNode.minY = Infinity;\n    destNode.maxX = -Infinity;\n    destNode.maxY = -Infinity;\n\n    for (var i = k, child; i < p; i++) {\n        child = node.children[i];\n        extend(destNode, node.leaf ? toBBox(child) : child);\n    }\n\n    return destNode;\n}\n\nfunction extend(a, b) {\n    a.minX = Math.min(a.minX, b.minX);\n    a.minY = Math.min(a.minY, b.minY);\n    a.maxX = Math.max(a.maxX, b.maxX);\n    a.maxY = Math.max(a.maxY, b.maxY);\n    return a;\n}\n\nfunction compareNodeMinX(a, b) { return a.minX - b.minX; }\nfunction compareNodeMinY(a, b) { return a.minY - b.minY; }\n\nfunction bboxArea(a)   { return (a.maxX - a.minX) * (a.maxY - a.minY); }\nfunction bboxMargin(a) { return (a.maxX - a.minX) + (a.maxY - a.minY); }\n\nfunction enlargedArea(a, b) {\n    return (Math.max(b.maxX, a.maxX) - Math.min(b.minX, a.minX)) *\n           (Math.max(b.maxY, a.maxY) - Math.min(b.minY, a.minY));\n}\n\nfunction intersectionArea(a, b) {\n    var minX = Math.max(a.minX, b.minX),\n        minY = Math.max(a.minY, b.minY),\n        maxX = Math.min(a.maxX, b.maxX),\n        maxY = Math.min(a.maxY, b.maxY);\n\n    return Math.max(0, maxX - minX) *\n           Math.max(0, maxY - minY);\n}\n\nfunction contains(a, b) {\n    return a.minX <= b.minX &&\n           a.minY <= b.minY &&\n           b.maxX <= a.maxX &&\n           b.maxY <= a.maxY;\n}\n\nfunction intersects(a, b) {\n    return b.minX <= a.maxX &&\n           b.minY <= a.maxY &&\n           b.maxX >= a.minX &&\n           b.maxY >= a.minY;\n}\n\nfunction createNode(children) {\n    return {\n        children: children,\n        height: 1,\n        leaf: true,\n        minX: Infinity,\n        minY: Infinity,\n        maxX: -Infinity,\n        maxY: -Infinity\n    };\n}\n\n// sort an array so that items come in groups of n unsorted items, with groups sorted between each other;\n// combines selection algorithm with binary divide & conquer approach\n\nfunction multiSelect(arr, left, right, n, compare) {\n    var stack = [left, right],\n        mid;\n\n    while (stack.length) {\n        right = stack.pop();\n        left = stack.pop();\n\n        if (right - left <= n) continue;\n\n        mid = left + Math.ceil((right - left) / n / 2) * n;\n        quickselect(arr, mid, left, right, compare);\n\n        stack.push(left, mid, mid, right);\n    }\n}\n","/**\n * @module ol/geom/flat/area\n */\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRing(flatCoordinates, offset, end, stride) {\n  let twiceArea = 0;\n  let x1 = flatCoordinates[end - stride];\n  let y1 = flatCoordinates[end - stride + 1];\n  for (; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    twiceArea += y1 * x2 - x1 * y2;\n    x1 = x2;\n    y1 = y2;\n  }\n  return twiceArea / 2;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRings(flatCoordinates, offset, ends, stride) {\n  let area = 0;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    area += linearRing(flatCoordinates, offset, end, stride);\n    offset = end;\n  }\n  return area;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @return {number} Area.\n */\nexport function linearRingss(flatCoordinates, offset, endss, stride) {\n  let area = 0;\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    area += linearRings(flatCoordinates, offset, ends, stride);\n    offset = ends[ends.length - 1];\n  }\n  return area;\n}\n","/**\n * @module ol/geom/GeometryCollection\n */\nimport {listen, unlisten} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {createOrUpdateEmpty, closestSquaredDistanceXY, extend, getCenter} from '../extent.js';\nimport Geometry from './Geometry.js';\nimport GeometryType from './GeometryType.js';\nimport {clear} from '../obj.js';\n\n/**\n * @classdesc\n * An array of {@link module:ol/geom/Geometry} objects.\n *\n * @api\n */\nclass GeometryCollection extends Geometry {\n\n  /**\n   * @param {Array<Geometry>=} opt_geometries Geometries.\n   */\n  constructor(opt_geometries) {\n\n    super();\n\n    /**\n     * @private\n     * @type {Array<Geometry>}\n     */\n    this.geometries_ = opt_geometries ? opt_geometries : null;\n\n    this.listenGeometriesChange_();\n  }\n\n  /**\n   * @private\n   */\n  unlistenGeometriesChange_() {\n    if (!this.geometries_) {\n      return;\n    }\n    for (let i = 0, ii = this.geometries_.length; i < ii; ++i) {\n      unlisten(\n        this.geometries_[i], EventType.CHANGE,\n        this.changed, this);\n    }\n  }\n\n  /**\n   * @private\n   */\n  listenGeometriesChange_() {\n    if (!this.geometries_) {\n      return;\n    }\n    for (let i = 0, ii = this.geometries_.length; i < ii; ++i) {\n      listen(\n        this.geometries_[i], EventType.CHANGE,\n        this.changed, this);\n    }\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!GeometryCollection} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    const geometryCollection = new GeometryCollection(null);\n    geometryCollection.setGeometries(this.geometries_);\n    return geometryCollection;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    if (minSquaredDistance < closestSquaredDistanceXY(this.getExtent(), x, y)) {\n      return minSquaredDistance;\n    }\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      minSquaredDistance = geometries[i].closestPointXY(\n        x, y, closestPoint, minSquaredDistance);\n    }\n    return minSquaredDistance;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  containsXY(x, y) {\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      if (geometries[i].containsXY(x, y)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  computeExtent(extent) {\n    createOrUpdateEmpty(extent);\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      extend(extent, geometries[i].getExtent());\n    }\n    return extent;\n  }\n\n  /**\n   * Return the geometries that make up this geometry collection.\n   * @return {Array<Geometry>} Geometries.\n   * @api\n   */\n  getGeometries() {\n    return cloneGeometries(this.geometries_);\n  }\n\n  /**\n   * @return {Array<Geometry>} Geometries.\n   */\n  getGeometriesArray() {\n    return this.geometries_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getSimplifiedGeometry(squaredTolerance) {\n    if (this.simplifiedGeometryRevision != this.getRevision()) {\n      clear(this.simplifiedGeometryCache);\n      this.simplifiedGeometryMaxMinSquaredTolerance = 0;\n      this.simplifiedGeometryRevision = this.getRevision();\n    }\n    if (squaredTolerance < 0 ||\n        (this.simplifiedGeometryMaxMinSquaredTolerance !== 0 &&\n         squaredTolerance < this.simplifiedGeometryMaxMinSquaredTolerance)) {\n      return this;\n    }\n    const key = squaredTolerance.toString();\n    if (this.simplifiedGeometryCache.hasOwnProperty(key)) {\n      return this.simplifiedGeometryCache[key];\n    } else {\n      const simplifiedGeometries = [];\n      const geometries = this.geometries_;\n      let simplified = false;\n      for (let i = 0, ii = geometries.length; i < ii; ++i) {\n        const geometry = geometries[i];\n        const simplifiedGeometry = geometry.getSimplifiedGeometry(squaredTolerance);\n        simplifiedGeometries.push(simplifiedGeometry);\n        if (simplifiedGeometry !== geometry) {\n          simplified = true;\n        }\n      }\n      if (simplified) {\n        const simplifiedGeometryCollection = new GeometryCollection(null);\n        simplifiedGeometryCollection.setGeometriesArray(simplifiedGeometries);\n        this.simplifiedGeometryCache[key] = simplifiedGeometryCollection;\n        return simplifiedGeometryCollection;\n      } else {\n        this.simplifiedGeometryMaxMinSquaredTolerance = squaredTolerance;\n        return this;\n      }\n    }\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.GEOMETRY_COLLECTION;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      if (geometries[i].intersectsExtent(extent)) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * @return {boolean} Is empty.\n   */\n  isEmpty() {\n    return this.geometries_.length === 0;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  rotate(angle, anchor) {\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      geometries[i].rotate(angle, anchor);\n    }\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  scale(sx, opt_sy, opt_anchor) {\n    let anchor = opt_anchor;\n    if (!anchor) {\n      anchor = getCenter(this.getExtent());\n    }\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      geometries[i].scale(sx, opt_sy, anchor);\n    }\n    this.changed();\n  }\n\n  /**\n   * Set the geometries that make up this geometry collection.\n   * @param {Array<Geometry>} geometries Geometries.\n   * @api\n   */\n  setGeometries(geometries) {\n    this.setGeometriesArray(cloneGeometries(geometries));\n  }\n\n  /**\n   * @param {Array<Geometry>} geometries Geometries.\n   */\n  setGeometriesArray(geometries) {\n    this.unlistenGeometriesChange_();\n    this.geometries_ = geometries;\n    this.listenGeometriesChange_();\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  applyTransform(transformFn) {\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      geometries[i].applyTransform(transformFn);\n    }\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  translate(deltaX, deltaY) {\n    const geometries = this.geometries_;\n    for (let i = 0, ii = geometries.length; i < ii; ++i) {\n      geometries[i].translate(deltaX, deltaY);\n    }\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  disposeInternal() {\n    this.unlistenGeometriesChange_();\n    super.disposeInternal();\n  }\n}\n\n\n/**\n * @param {Array<Geometry>} geometries Geometries.\n * @return {Array<Geometry>} Cloned geometries.\n */\nfunction cloneGeometries(geometries) {\n  const clonedGeometries = [];\n  for (let i = 0, ii = geometries.length; i < ii; ++i) {\n    clonedGeometries.push(geometries[i].clone());\n  }\n  return clonedGeometries;\n}\n\n\nexport default GeometryCollection;\n","/**\n * @module ol/geom/flat/interpolate\n */\nimport {binarySearch} from '../../array.js';\nimport {lerp} from '../../math.js';\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} fraction Fraction.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Destination.\n */\nexport function interpolatePoint(flatCoordinates, offset, end, stride, fraction, opt_dest) {\n  let pointX = NaN;\n  let pointY = NaN;\n  const n = (end - offset) / stride;\n  if (n === 1) {\n    pointX = flatCoordinates[offset];\n    pointY = flatCoordinates[offset + 1];\n  } else if (n == 2) {\n    pointX = (1 - fraction) * flatCoordinates[offset] +\n        fraction * flatCoordinates[offset + stride];\n    pointY = (1 - fraction) * flatCoordinates[offset + 1] +\n        fraction * flatCoordinates[offset + stride + 1];\n  } else if (n !== 0) {\n    let x1 = flatCoordinates[offset];\n    let y1 = flatCoordinates[offset + 1];\n    let length = 0;\n    const cumulativeLengths = [0];\n    for (let i = offset + stride; i < end; i += stride) {\n      const x2 = flatCoordinates[i];\n      const y2 = flatCoordinates[i + 1];\n      length += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n      cumulativeLengths.push(length);\n      x1 = x2;\n      y1 = y2;\n    }\n    const target = fraction * length;\n    const index = binarySearch(cumulativeLengths, target);\n    if (index < 0) {\n      const t = (target - cumulativeLengths[-index - 2]) /\n          (cumulativeLengths[-index - 1] - cumulativeLengths[-index - 2]);\n      const o = offset + (-index - 2) * stride;\n      pointX = lerp(\n        flatCoordinates[o], flatCoordinates[o + stride], t);\n      pointY = lerp(\n        flatCoordinates[o + 1], flatCoordinates[o + stride + 1], t);\n    } else {\n      pointX = flatCoordinates[offset + index * stride];\n      pointY = flatCoordinates[offset + index * stride + 1];\n    }\n  }\n  if (opt_dest) {\n    opt_dest[0] = pointX;\n    opt_dest[1] = pointY;\n    return opt_dest;\n  } else {\n    return [pointX, pointY];\n  }\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} m M.\n * @param {boolean} extrapolate Extrapolate.\n * @return {import(\"../../coordinate.js\").Coordinate} Coordinate.\n */\nexport function lineStringCoordinateAtM(flatCoordinates, offset, end, stride, m, extrapolate) {\n  if (end == offset) {\n    return null;\n  }\n  let coordinate;\n  if (m < flatCoordinates[offset + stride - 1]) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(offset, offset + stride);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  } else if (flatCoordinates[end - 1] < m) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(end - stride, end);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  }\n  // FIXME use O(1) search\n  if (m == flatCoordinates[offset + stride - 1]) {\n    return flatCoordinates.slice(offset, offset + stride);\n  }\n  let lo = offset / stride;\n  let hi = end / stride;\n  while (lo < hi) {\n    const mid = (lo + hi) >> 1;\n    if (m < flatCoordinates[(mid + 1) * stride - 1]) {\n      hi = mid;\n    } else {\n      lo = mid + 1;\n    }\n  }\n  const m0 = flatCoordinates[lo * stride - 1];\n  if (m == m0) {\n    return flatCoordinates.slice((lo - 1) * stride, (lo - 1) * stride + stride);\n  }\n  const m1 = flatCoordinates[(lo + 1) * stride - 1];\n  const t = (m - m0) / (m1 - m0);\n  coordinate = [];\n  for (let i = 0; i < stride - 1; ++i) {\n    coordinate.push(lerp(flatCoordinates[(lo - 1) * stride + i],\n      flatCoordinates[lo * stride + i], t));\n  }\n  coordinate.push(m);\n  return coordinate;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} m M.\n * @param {boolean} extrapolate Extrapolate.\n * @param {boolean} interpolate Interpolate.\n * @return {import(\"../../coordinate.js\").Coordinate} Coordinate.\n */\nexport function lineStringsCoordinateAtM(\n  flatCoordinates, offset, ends, stride, m, extrapolate, interpolate) {\n  if (interpolate) {\n    return lineStringCoordinateAtM(\n      flatCoordinates, offset, ends[ends.length - 1], stride, m, extrapolate);\n  }\n  let coordinate;\n  if (m < flatCoordinates[stride - 1]) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(0, stride);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  }\n  if (flatCoordinates[flatCoordinates.length - 1] < m) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(flatCoordinates.length - stride);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    } else {\n      return null;\n    }\n  }\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    if (offset == end) {\n      continue;\n    }\n    if (m < flatCoordinates[offset + stride - 1]) {\n      return null;\n    } else if (m <= flatCoordinates[end - 1]) {\n      return lineStringCoordinateAtM(\n        flatCoordinates, offset, end, stride, m, false);\n    }\n    offset = end;\n  }\n  return null;\n}\n","/**\n * @module ol/source/TileJSON\n */\n// FIXME check order of async callbacks\n\n/**\n * See http://mapbox.com/developers/api/.\n */\n\n\nimport {createFromTemplates} from '../tileurlfunction.js';\nimport {assert} from '../asserts.js';\nimport {applyTransform, intersects} from '../extent.js';\nimport {jsonp as requestJSONP} from '../net.js';\nimport {get as getProjection, getTransformFromProjections} from '../proj.js';\nimport SourceState from './State.js';\nimport TileImage from './TileImage.js';\nimport {createXYZ, extentFromProjection} from '../tilegrid.js';\n\n\n/**\n * @typedef {Object} Config\n * @property {string} [name] The name.\n * @property {string} [description] The description.\n * @property {string} [version] The version.\n * @property {string} [attribution] The attribution.\n * @property {string} [template] The template.\n * @property {string} [legend] The legend.\n * @property {string} [scheme] The scheme.\n * @property {Array<string>} tiles The tile URL templates.\n * @property {Array<string>} [grids] Optional grids.\n * @property {number} [minzoom] Minimum zoom level.\n * @property {number} [maxzoom] Maximum zoom level.\n * @property {Array<number>} [bounds] Optional bounds.\n * @property {Array<number>} [center] Optional center.\n */\n\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {number} [cacheSize=2048] Cache size.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you are using the WebGL renderer or if you want to\n * access pixel data with the Canvas renderer.  See\n * https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [jsonp=false] Use JSONP with callback to load the TileJSON.\n * Useful when the server does not support CORS..\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {Config} [tileJSON] TileJSON configuration for this source.\n * If not provided, `url` must be configured.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {string} [url] URL to the TileJSON file. If not provided, `tileJSON` must be configured.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n */\n\n\n/**\n * @classdesc\n * Layer source for tile data in TileJSON format.\n * @api\n */\nclass TileJSON extends TileImage {\n  /**\n   * @param {Options} options TileJSON options.\n   */\n  constructor(options) {\n    super({\n      attributions: options.attributions,\n      cacheSize: options.cacheSize,\n      crossOrigin: options.crossOrigin,\n      projection: getProjection('EPSG:3857'),\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      state: SourceState.LOADING,\n      tileLoadFunction: options.tileLoadFunction,\n      wrapX: options.wrapX !== undefined ? options.wrapX : true,\n      transition: options.transition\n    });\n\n    /**\n     * @type {Config}\n     * @private\n     */\n    this.tileJSON_ = null;\n\n\n    if (options.url) {\n      if (options.jsonp) {\n        requestJSONP(options.url, this.handleTileJSONResponse.bind(this),\n          this.handleTileJSONError.bind(this));\n      } else {\n        const client = new XMLHttpRequest();\n        client.addEventListener('load', this.onXHRLoad_.bind(this));\n        client.addEventListener('error', this.onXHRError_.bind(this));\n        client.open('GET', options.url);\n        client.send();\n      }\n    } else if (options.tileJSON) {\n      this.handleTileJSONResponse(options.tileJSON);\n    } else {\n      assert(false, 51); // Either `url` or `tileJSON` options must be provided\n    }\n\n  }\n\n  /**\n   * @private\n   * @param {Event} event The load event.\n   */\n  onXHRLoad_(event) {\n    const client = /** @type {XMLHttpRequest} */ (event.target);\n    // status will be 0 for file:// urls\n    if (!client.status || client.status >= 200 && client.status < 300) {\n      let response;\n      try {\n        response = /** @type {TileJSON} */(JSON.parse(client.responseText));\n      } catch (err) {\n        this.handleTileJSONError();\n        return;\n      }\n      this.handleTileJSONResponse(response);\n    } else {\n      this.handleTileJSONError();\n    }\n  }\n\n  /**\n   * @private\n   * @param {Event} event The error event.\n   */\n  onXHRError_(event) {\n    this.handleTileJSONError();\n  }\n\n  /**\n   * @return {Config} The tilejson object.\n   * @api\n   */\n  getTileJSON() {\n    return this.tileJSON_;\n  }\n\n  /**\n   * @protected\n   * @param {Config} tileJSON Tile JSON.\n   */\n  handleTileJSONResponse(tileJSON) {\n\n    const epsg4326Projection = getProjection('EPSG:4326');\n\n    const sourceProjection = this.getProjection();\n    let extent;\n    if (tileJSON['bounds'] !== undefined) {\n      const transform = getTransformFromProjections(\n        epsg4326Projection, sourceProjection);\n      extent = applyTransform(tileJSON['bounds'], transform);\n    }\n\n    const minZoom = tileJSON['minzoom'] || 0;\n    const maxZoom = tileJSON['maxzoom'] || 22;\n    const tileGrid = createXYZ({\n      extent: extentFromProjection(sourceProjection),\n      maxZoom: maxZoom,\n      minZoom: minZoom\n    });\n    this.tileGrid = tileGrid;\n\n    this.tileUrlFunction = createFromTemplates(tileJSON['tiles'], tileGrid);\n\n    if (tileJSON['attribution'] !== undefined && !this.getAttributions()) {\n      const attributionExtent = extent !== undefined ?\n        extent : epsg4326Projection.getExtent();\n\n      this.setAttributions(function(frameState) {\n        if (intersects(attributionExtent, frameState.extent)) {\n          return [tileJSON['attribution']];\n        }\n        return null;\n      });\n\n    }\n    this.tileJSON_ = tileJSON;\n    this.setState(SourceState.READY);\n\n  }\n\n  /**\n   * @protected\n   */\n  handleTileJSONError() {\n    this.setState(SourceState.ERROR);\n  }\n}\n\n\nexport default TileJSON;\n","/**\n * @module ol/OverlayPositioning\n */\n\n/**\n * Overlay position: `'bottom-left'`, `'bottom-center'`,  `'bottom-right'`,\n * `'center-left'`, `'center-center'`, `'center-right'`, `'top-left'`,\n * `'top-center'`, `'top-right'`\n * @enum {string}\n */\nexport default {\n  BOTTOM_LEFT: 'bottom-left',\n  BOTTOM_CENTER: 'bottom-center',\n  BOTTOM_RIGHT: 'bottom-right',\n  CENTER_LEFT: 'center-left',\n  CENTER_CENTER: 'center-center',\n  CENTER_RIGHT: 'center-right',\n  TOP_LEFT: 'top-left',\n  TOP_CENTER: 'top-center',\n  TOP_RIGHT: 'top-right'\n};\n","/**\n * @module ol/Overlay\n */\nimport MapEventType from './MapEventType.js';\nimport BaseObject, {getChangeEventType} from './Object.js';\nimport OverlayPositioning from './OverlayPositioning.js';\nimport {CLASS_SELECTABLE} from './css.js';\nimport {removeNode, removeChildren, outerWidth, outerHeight} from './dom.js';\nimport {listen, unlistenByKey} from './events.js';\nimport {containsExtent} from './extent.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number|string} [id] Set the overlay id. The overlay id can be used\n * with the {@link module:ol/Map~Map#getOverlayById} method.\n * @property {HTMLElement} [element] The overlay element.\n * @property {Array<number>} [offset=[0, 0]] Offsets in pixels used when positioning\n * the overlay. The first element in the\n * array is the horizontal offset. A positive value shifts the overlay right.\n * The second element in the array is the vertical offset. A positive value\n * shifts the overlay down.\n * @property {import(\"./coordinate.js\").Coordinate} [position] The overlay position\n * in map projection.\n * @property {OverlayPositioning} [positioning='top-left'] Defines how\n * the overlay is actually positioned with respect to its `position` property.\n * Possible values are `'bottom-left'`, `'bottom-center'`, `'bottom-right'`,\n * `'center-left'`, `'center-center'`, `'center-right'`, `'top-left'`,\n * `'top-center'`, and `'top-right'`.\n * @property {boolean} [stopEvent=true] Whether event propagation to the map\n * viewport should be stopped. If `true` the overlay is placed in the same\n * container as that of the controls (CSS class name\n * `ol-overlaycontainer-stopevent`); if `false` it is placed in the container\n * with CSS class name specified by the `className` property.\n * @property {boolean} [insertFirst=true] Whether the overlay is inserted first\n * in the overlay container, or appended. If the overlay is placed in the same\n * container as that of the controls (see the `stopEvent` option) you will\n * probably set `insertFirst` to `true` so the overlay is displayed below the\n * controls.\n * @property {boolean} [autoPan=false] If set to `true` the map is panned when\n * calling `setPosition`, so that the overlay is entirely visible in the current\n * viewport.\n * @property {PanOptions} [autoPanAnimation] The\n * animation options used to pan the overlay into view. This animation is only\n * used when `autoPan` is enabled. A `duration` and `easing` may be provided to\n * customize the animation.\n * @property {number} [autoPanMargin=20] The margin (in pixels) between the\n * overlay and the borders of the map when autopanning.\n * @property {string} [className='ol-overlay-container ol-selectable'] CSS class\n * name.\n */\n\n\n/**\n * @typedef {Object} PanOptions\n * @property {number} [duration=1000] The duration of the animation in\n * milliseconds.\n * @property {function(number):number} [easing] The easing function to use. Can\n * be one from {@link module:ol/easing} or a custom function.\n * Default is {@link module:ol/easing~inAndOut}.\n */\n\n\n/**\n * @enum {string}\n * @protected\n */\nconst Property = {\n  ELEMENT: 'element',\n  MAP: 'map',\n  OFFSET: 'offset',\n  POSITION: 'position',\n  POSITIONING: 'positioning'\n};\n\n\n/**\n * @classdesc\n * An element to be displayed over the map and attached to a single map\n * location.  Like {@link module:ol/control/Control~Control}, Overlays are\n * visible widgets. Unlike Controls, they are not in a fixed position on the\n * screen, but are tied to a geographical coordinate, so panning the map will\n * move an Overlay but not a Control.\n *\n * Example:\n *\n *     import Overlay from 'ol/Overlay';\n *\n *     var popup = new Overlay({\n *       element: document.getElementById('popup')\n *     });\n *     popup.setPosition(coordinate);\n *     map.addOverlay(popup);\n *\n * @api\n */\nclass Overlay extends BaseObject {\n\n  /**\n   * @param {Options} options Overlay options.\n   */\n  constructor(options) {\n\n    super();\n\n    /**\n     * @protected\n     * @type {Options}\n     */\n    this.options = options;\n\n    /**\n     * @protected\n     * @type {number|string|undefined}\n     */\n    this.id = options.id;\n\n    /**\n     * @protected\n     * @type {boolean}\n     */\n    this.insertFirst = options.insertFirst !== undefined ?\n      options.insertFirst : true;\n\n    /**\n     * @protected\n     * @type {boolean}\n     */\n    this.stopEvent = options.stopEvent !== undefined ? options.stopEvent : true;\n\n    /**\n     * @protected\n     * @type {HTMLElement}\n     */\n    this.element = document.createElement('div');\n    this.element.className = options.className !== undefined ?\n      options.className : 'ol-overlay-container ' + CLASS_SELECTABLE;\n    this.element.style.position = 'absolute';\n\n    /**\n     * @protected\n     * @type {boolean}\n     */\n    this.autoPan = options.autoPan !== undefined ? options.autoPan : false;\n\n    /**\n     * @protected\n     * @type {PanOptions}\n     */\n    this.autoPanAnimation = options.autoPanAnimation || /** @type {PanOptions} */ ({});\n\n    /**\n     * @protected\n     * @type {number}\n     */\n    this.autoPanMargin = options.autoPanMargin !== undefined ?\n      options.autoPanMargin : 20;\n\n    /**\n     * @protected\n     * @type {{bottom_: string,\n     *         left_: string,\n     *         right_: string,\n     *         top_: string,\n     *         visible: boolean}}\n     */\n    this.rendered = {\n      bottom_: '',\n      left_: '',\n      right_: '',\n      top_: '',\n      visible: true\n    };\n\n    /**\n     * @protected\n     * @type {?import(\"./events.js\").EventsKey}\n     */\n    this.mapPostrenderListenerKey = null;\n\n    listen(\n      this, getChangeEventType(Property.ELEMENT),\n      this.handleElementChanged, this);\n\n    listen(\n      this, getChangeEventType(Property.MAP),\n      this.handleMapChanged, this);\n\n    listen(\n      this, getChangeEventType(Property.OFFSET),\n      this.handleOffsetChanged, this);\n\n    listen(\n      this, getChangeEventType(Property.POSITION),\n      this.handlePositionChanged, this);\n\n    listen(\n      this, getChangeEventType(Property.POSITIONING),\n      this.handlePositioningChanged, this);\n\n    if (options.element !== undefined) {\n      this.setElement(options.element);\n    }\n\n    this.setOffset(options.offset !== undefined ? options.offset : [0, 0]);\n\n    this.setPositioning(options.positioning !== undefined ?\n      /** @type {OverlayPositioning} */ (options.positioning) :\n      OverlayPositioning.TOP_LEFT);\n\n    if (options.position !== undefined) {\n      this.setPosition(options.position);\n    }\n\n  }\n\n  /**\n   * Get the DOM element of this overlay.\n   * @return {HTMLElement|undefined} The Element containing the overlay.\n   * @observable\n   * @api\n   */\n  getElement() {\n    return /** @type {HTMLElement|undefined} */ (this.get(Property.ELEMENT));\n  }\n\n  /**\n   * Get the overlay identifier which is set on constructor.\n   * @return {number|string|undefined} Id.\n   * @api\n   */\n  getId() {\n    return this.id;\n  }\n\n  /**\n   * Get the map associated with this overlay.\n   * @return {import(\"./PluggableMap.js\").default|undefined} The map that the\n   * overlay is part of.\n   * @observable\n   * @api\n   */\n  getMap() {\n    return (\n      /** @type {import(\"./PluggableMap.js\").default|undefined} */ (this.get(Property.MAP))\n    );\n  }\n\n  /**\n   * Get the offset of this overlay.\n   * @return {Array<number>} The offset.\n   * @observable\n   * @api\n   */\n  getOffset() {\n    return /** @type {Array<number>} */ (this.get(Property.OFFSET));\n  }\n\n  /**\n   * Get the current position of this overlay.\n   * @return {import(\"./coordinate.js\").Coordinate|undefined} The spatial point that the overlay is\n   *     anchored at.\n   * @observable\n   * @api\n   */\n  getPosition() {\n    return (\n      /** @type {import(\"./coordinate.js\").Coordinate|undefined} */ (this.get(Property.POSITION))\n    );\n  }\n\n  /**\n   * Get the current positioning of this overlay.\n   * @return {OverlayPositioning} How the overlay is positioned\n   *     relative to its point on the map.\n   * @observable\n   * @api\n   */\n  getPositioning() {\n    return (\n      /** @type {OverlayPositioning} */ (this.get(Property.POSITIONING))\n    );\n  }\n\n  /**\n   * @protected\n   */\n  handleElementChanged() {\n    removeChildren(this.element);\n    const element = this.getElement();\n    if (element) {\n      this.element.appendChild(element);\n    }\n  }\n\n  /**\n   * @protected\n   */\n  handleMapChanged() {\n    if (this.mapPostrenderListenerKey) {\n      removeNode(this.element);\n      unlistenByKey(this.mapPostrenderListenerKey);\n      this.mapPostrenderListenerKey = null;\n    }\n    const map = this.getMap();\n    if (map) {\n      this.mapPostrenderListenerKey = listen(map,\n        MapEventType.POSTRENDER, this.render, this);\n      this.updatePixelPosition();\n      const container = this.stopEvent ?\n        map.getOverlayContainerStopEvent() : map.getOverlayContainer();\n      if (this.insertFirst) {\n        container.insertBefore(this.element, container.childNodes[0] || null);\n      } else {\n        container.appendChild(this.element);\n      }\n    }\n  }\n\n  /**\n   * @protected\n   */\n  render() {\n    this.updatePixelPosition();\n  }\n\n  /**\n   * @protected\n   */\n  handleOffsetChanged() {\n    this.updatePixelPosition();\n  }\n\n  /**\n   * @protected\n   */\n  handlePositionChanged() {\n    this.updatePixelPosition();\n    if (this.get(Property.POSITION) && this.autoPan) {\n      this.panIntoView();\n    }\n  }\n\n  /**\n   * @protected\n   */\n  handlePositioningChanged() {\n    this.updatePixelPosition();\n  }\n\n  /**\n   * Set the DOM element to be associated with this overlay.\n   * @param {HTMLElement|undefined} element The Element containing the overlay.\n   * @observable\n   * @api\n   */\n  setElement(element) {\n    this.set(Property.ELEMENT, element);\n  }\n\n  /**\n   * Set the map to be associated with this overlay.\n   * @param {import(\"./PluggableMap.js\").default|undefined} map The map that the\n   * overlay is part of.\n   * @observable\n   * @api\n   */\n  setMap(map) {\n    this.set(Property.MAP, map);\n  }\n\n  /**\n   * Set the offset for this overlay.\n   * @param {Array<number>} offset Offset.\n   * @observable\n   * @api\n   */\n  setOffset(offset) {\n    this.set(Property.OFFSET, offset);\n  }\n\n  /**\n   * Set the position for this overlay. If the position is `undefined` the\n   * overlay is hidden.\n   * @param {import(\"./coordinate.js\").Coordinate|undefined} position The spatial point that the overlay\n   *     is anchored at.\n   * @observable\n   * @api\n   */\n  setPosition(position) {\n    this.set(Property.POSITION, position);\n  }\n\n  /**\n   * Pan the map so that the overlay is entirely visible in the current viewport\n   * (if necessary).\n   * @protected\n   */\n  panIntoView() {\n    const map = this.getMap();\n\n    if (!map || !map.getTargetElement()) {\n      return;\n    }\n\n    const mapRect = this.getRect(map.getTargetElement(), map.getSize());\n    const element = this.getElement();\n    const overlayRect = this.getRect(element, [outerWidth(element), outerHeight(element)]);\n\n    const margin = this.autoPanMargin;\n    if (!containsExtent(mapRect, overlayRect)) {\n      // the overlay is not completely inside the viewport, so pan the map\n      const offsetLeft = overlayRect[0] - mapRect[0];\n      const offsetRight = mapRect[2] - overlayRect[2];\n      const offsetTop = overlayRect[1] - mapRect[1];\n      const offsetBottom = mapRect[3] - overlayRect[3];\n\n      const delta = [0, 0];\n      if (offsetLeft < 0) {\n        // move map to the left\n        delta[0] = offsetLeft - margin;\n      } else if (offsetRight < 0) {\n        // move map to the right\n        delta[0] = Math.abs(offsetRight) + margin;\n      }\n      if (offsetTop < 0) {\n        // move map up\n        delta[1] = offsetTop - margin;\n      } else if (offsetBottom < 0) {\n        // move map down\n        delta[1] = Math.abs(offsetBottom) + margin;\n      }\n\n      if (delta[0] !== 0 || delta[1] !== 0) {\n        const center = /** @type {import(\"./coordinate.js\").Coordinate} */ (map.getView().getCenter());\n        const centerPx = map.getPixelFromCoordinate(center);\n        const newCenterPx = [\n          centerPx[0] + delta[0],\n          centerPx[1] + delta[1]\n        ];\n\n        map.getView().animate({\n          center: map.getCoordinateFromPixel(newCenterPx),\n          duration: this.autoPanAnimation.duration,\n          easing: this.autoPanAnimation.easing\n        });\n      }\n    }\n  }\n\n  /**\n   * Get the extent of an element relative to the document\n   * @param {HTMLElement|undefined} element The element.\n   * @param {import(\"./size.js\").Size|undefined} size The size of the element.\n   * @return {import(\"./extent.js\").Extent} The extent.\n   * @protected\n   */\n  getRect(element, size) {\n    const box = element.getBoundingClientRect();\n    const offsetX = box.left + window.pageXOffset;\n    const offsetY = box.top + window.pageYOffset;\n    return [\n      offsetX,\n      offsetY,\n      offsetX + size[0],\n      offsetY + size[1]\n    ];\n  }\n\n  /**\n   * Set the positioning for this overlay.\n   * @param {OverlayPositioning} positioning how the overlay is\n   *     positioned relative to its point on the map.\n   * @observable\n   * @api\n   */\n  setPositioning(positioning) {\n    this.set(Property.POSITIONING, positioning);\n  }\n\n  /**\n   * Modify the visibility of the element.\n   * @param {boolean} visible Element visibility.\n   * @protected\n   */\n  setVisible(visible) {\n    if (this.rendered.visible !== visible) {\n      this.element.style.display = visible ? '' : 'none';\n      this.rendered.visible = visible;\n    }\n  }\n\n  /**\n   * Update pixel position.\n   * @protected\n   */\n  updatePixelPosition() {\n    const map = this.getMap();\n    const position = this.getPosition();\n    if (!map || !map.isRendered() || !position) {\n      this.setVisible(false);\n      return;\n    }\n\n    const pixel = map.getPixelFromCoordinate(position);\n    const mapSize = map.getSize();\n    this.updateRenderedPosition(pixel, mapSize);\n  }\n\n  /**\n   * @param {import(\"./pixel.js\").Pixel} pixel The pixel location.\n   * @param {import(\"./size.js\").Size|undefined} mapSize The map size.\n   * @protected\n   */\n  updateRenderedPosition(pixel, mapSize) {\n    const style = this.element.style;\n    const offset = this.getOffset();\n\n    const positioning = this.getPositioning();\n\n    this.setVisible(true);\n\n    let offsetX = offset[0];\n    let offsetY = offset[1];\n    if (positioning == OverlayPositioning.BOTTOM_RIGHT ||\n        positioning == OverlayPositioning.CENTER_RIGHT ||\n        positioning == OverlayPositioning.TOP_RIGHT) {\n      if (this.rendered.left_ !== '') {\n        this.rendered.left_ = style.left = '';\n      }\n      const right = Math.round(mapSize[0] - pixel[0] - offsetX) + 'px';\n      if (this.rendered.right_ != right) {\n        this.rendered.right_ = style.right = right;\n      }\n    } else {\n      if (this.rendered.right_ !== '') {\n        this.rendered.right_ = style.right = '';\n      }\n      if (positioning == OverlayPositioning.BOTTOM_CENTER ||\n          positioning == OverlayPositioning.CENTER_CENTER ||\n          positioning == OverlayPositioning.TOP_CENTER) {\n        offsetX -= this.element.offsetWidth / 2;\n      }\n      const left = Math.round(pixel[0] + offsetX) + 'px';\n      if (this.rendered.left_ != left) {\n        this.rendered.left_ = style.left = left;\n      }\n    }\n    if (positioning == OverlayPositioning.BOTTOM_LEFT ||\n        positioning == OverlayPositioning.BOTTOM_CENTER ||\n        positioning == OverlayPositioning.BOTTOM_RIGHT) {\n      if (this.rendered.top_ !== '') {\n        this.rendered.top_ = style.top = '';\n      }\n      const bottom = Math.round(mapSize[1] - pixel[1] - offsetY) + 'px';\n      if (this.rendered.bottom_ != bottom) {\n        this.rendered.bottom_ = style.bottom = bottom;\n      }\n    } else {\n      if (this.rendered.bottom_ !== '') {\n        this.rendered.bottom_ = style.bottom = '';\n      }\n      if (positioning == OverlayPositioning.CENTER_LEFT ||\n          positioning == OverlayPositioning.CENTER_CENTER ||\n          positioning == OverlayPositioning.CENTER_RIGHT) {\n        offsetY -= this.element.offsetHeight / 2;\n      }\n      const top = Math.round(pixel[1] + offsetY) + 'px';\n      if (this.rendered.top_ != top) {\n        this.rendered.top_ = style.top = top;\n      }\n    }\n  }\n\n  /**\n   * returns the options this Overlay has been created with\n   * @return {Options} overlay options\n   */\n  getOptions() {\n    return this.options;\n  }\n}\n\n\nexport default Overlay;\n","/**\n * @license\n * Latitude/longitude spherical geodesy formulae taken from\n * http://www.movable-type.co.uk/scripts/latlong.html\n * Licensed under CC-BY-3.0.\n */\n\n/**\n * @module ol/sphere\n */\nimport {toRadians, toDegrees} from './math.js';\nimport GeometryType from './geom/GeometryType.js';\n\n\n/**\n * Object literal with options for the {@link getLength} or {@link getArea}\n * functions.\n * @typedef {Object} SphereMetricOptions\n * @property {import(\"./proj.js\").ProjectionLike} [projection='EPSG:3857']\n * Projection of the  geometry.  By default, the geometry is assumed to be in\n * Web Mercator.\n * @property {number} [radius=6371008.8] Sphere radius.  By default, the radius of the\n * earth is used (Clarke 1866 Authalic Sphere).\n */\n\n\n/**\n * The mean Earth radius (1/3 * (2a + b)) for the WGS84 ellipsoid.\n * https://en.wikipedia.org/wiki/Earth_radius#Mean_radius\n * @type {number}\n */\nexport const DEFAULT_RADIUS = 6371008.8;\n\n\n/**\n * Get the great circle distance (in meters) between two geographic coordinates.\n * @param {Array} c1 Starting coordinate.\n * @param {Array} c2 Ending coordinate.\n * @param {number=} opt_radius The sphere radius to use.  Defaults to the Earth's\n *     mean radius using the WGS84 ellipsoid.\n * @return {number} The great circle distance between the points (in meters).\n * @api\n */\nexport function getDistance(c1, c2, opt_radius) {\n  const radius = opt_radius || DEFAULT_RADIUS;\n  const lat1 = toRadians(c1[1]);\n  const lat2 = toRadians(c2[1]);\n  const deltaLatBy2 = (lat2 - lat1) / 2;\n  const deltaLonBy2 = toRadians(c2[0] - c1[0]) / 2;\n  const a = Math.sin(deltaLatBy2) * Math.sin(deltaLatBy2) +\n      Math.sin(deltaLonBy2) * Math.sin(deltaLonBy2) *\n      Math.cos(lat1) * Math.cos(lat2);\n  return 2 * radius * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n}\n\n\n/**\n * Get the cumulative great circle length of linestring coordinates (geographic).\n * @param {Array} coordinates Linestring coordinates.\n * @param {number} radius The sphere radius to use.\n * @return {number} The length (in meters).\n */\nfunction getLengthInternal(coordinates, radius) {\n  let length = 0;\n  for (let i = 0, ii = coordinates.length; i < ii - 1; ++i) {\n    length += getDistance(coordinates[i], coordinates[i + 1], radius);\n  }\n  return length;\n}\n\n\n/**\n * Get the spherical length of a geometry.  This length is the sum of the\n * great circle distances between coordinates.  For polygons, the length is\n * the sum of all rings.  For points, the length is zero.  For multi-part\n * geometries, the length is the sum of the length of each part.\n * @param {import(\"./geom/Geometry.js\").default} geometry A geometry.\n * @param {SphereMetricOptions=} opt_options Options for the\n * length calculation.  By default, geometries are assumed to be in 'EPSG:3857'.\n * You can change this by providing a `projection` option.\n * @return {number} The spherical length (in meters).\n * @api\n */\nexport function getLength(geometry, opt_options) {\n  const options = opt_options || {};\n  const radius = options.radius || DEFAULT_RADIUS;\n  const projection = options.projection || 'EPSG:3857';\n  const type = geometry.getType();\n  if (type !== GeometryType.GEOMETRY_COLLECTION) {\n    geometry = geometry.clone().transform(projection, 'EPSG:4326');\n  }\n  let length = 0;\n  let coordinates, coords, i, ii, j, jj;\n  switch (type) {\n    case GeometryType.POINT:\n    case GeometryType.MULTI_POINT: {\n      break;\n    }\n    case GeometryType.LINE_STRING:\n    case GeometryType.LINEAR_RING: {\n      coordinates = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (geometry).getCoordinates();\n      length = getLengthInternal(coordinates, radius);\n      break;\n    }\n    case GeometryType.MULTI_LINE_STRING:\n    case GeometryType.POLYGON: {\n      coordinates = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (geometry).getCoordinates();\n      for (i = 0, ii = coordinates.length; i < ii; ++i) {\n        length += getLengthInternal(coordinates[i], radius);\n      }\n      break;\n    }\n    case GeometryType.MULTI_POLYGON: {\n      coordinates = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (geometry).getCoordinates();\n      for (i = 0, ii = coordinates.length; i < ii; ++i) {\n        coords = coordinates[i];\n        for (j = 0, jj = coords.length; j < jj; ++j) {\n          length += getLengthInternal(coords[j], radius);\n        }\n      }\n      break;\n    }\n    case GeometryType.GEOMETRY_COLLECTION: {\n      const geometries = /** @type {import(\"./geom/GeometryCollection.js\").default} */ (geometry).getGeometries();\n      for (i = 0, ii = geometries.length; i < ii; ++i) {\n        length += getLength(geometries[i], opt_options);\n      }\n      break;\n    }\n    default: {\n      throw new Error('Unsupported geometry type: ' + type);\n    }\n  }\n  return length;\n}\n\n\n/**\n * Returns the spherical area for a list of coordinates.\n *\n * [Reference](https://trs-new.jpl.nasa.gov/handle/2014/40409)\n * Robert. G. Chamberlain and William H. Duquette, \"Some Algorithms for\n * Polygons on a Sphere\", JPL Publication 07-03, Jet Propulsion\n * Laboratory, Pasadena, CA, June 2007\n *\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates List of coordinates of a linear\n * ring. If the ring is oriented clockwise, the area will be positive,\n * otherwise it will be negative.\n * @param {number} radius The sphere radius.\n * @return {number} Area (in square meters).\n */\nfunction getAreaInternal(coordinates, radius) {\n  let area = 0;\n  const len = coordinates.length;\n  let x1 = coordinates[len - 1][0];\n  let y1 = coordinates[len - 1][1];\n  for (let i = 0; i < len; i++) {\n    const x2 = coordinates[i][0];\n    const y2 = coordinates[i][1];\n    area += toRadians(x2 - x1) *\n        (2 + Math.sin(toRadians(y1)) +\n        Math.sin(toRadians(y2)));\n    x1 = x2;\n    y1 = y2;\n  }\n  return area * radius * radius / 2.0;\n}\n\n\n/**\n * Get the spherical area of a geometry.  This is the area (in meters) assuming\n * that polygon edges are segments of great circles on a sphere.\n * @param {import(\"./geom/Geometry.js\").default} geometry A geometry.\n * @param {SphereMetricOptions=} opt_options Options for the area\n *     calculation.  By default, geometries are assumed to be in 'EPSG:3857'.\n *     You can change this by providing a `projection` option.\n * @return {number} The spherical area (in square meters).\n * @api\n */\nexport function getArea(geometry, opt_options) {\n  const options = opt_options || {};\n  const radius = options.radius || DEFAULT_RADIUS;\n  const projection = options.projection || 'EPSG:3857';\n  const type = geometry.getType();\n  if (type !== GeometryType.GEOMETRY_COLLECTION) {\n    geometry = geometry.clone().transform(projection, 'EPSG:4326');\n  }\n  let area = 0;\n  let coordinates, coords, i, ii, j, jj;\n  switch (type) {\n    case GeometryType.POINT:\n    case GeometryType.MULTI_POINT:\n    case GeometryType.LINE_STRING:\n    case GeometryType.MULTI_LINE_STRING:\n    case GeometryType.LINEAR_RING: {\n      break;\n    }\n    case GeometryType.POLYGON: {\n      coordinates = /** @type {import(\"./geom/Polygon.js\").default} */ (geometry).getCoordinates();\n      area = Math.abs(getAreaInternal(coordinates[0], radius));\n      for (i = 1, ii = coordinates.length; i < ii; ++i) {\n        area -= Math.abs(getAreaInternal(coordinates[i], radius));\n      }\n      break;\n    }\n    case GeometryType.MULTI_POLYGON: {\n      coordinates = /** @type {import(\"./geom/SimpleGeometry.js\").default} */ (geometry).getCoordinates();\n      for (i = 0, ii = coordinates.length; i < ii; ++i) {\n        coords = coordinates[i];\n        area += Math.abs(getAreaInternal(coords[0], radius));\n        for (j = 1, jj = coords.length; j < jj; ++j) {\n          area -= Math.abs(getAreaInternal(coords[j], radius));\n        }\n      }\n      break;\n    }\n    case GeometryType.GEOMETRY_COLLECTION: {\n      const geometries = /** @type {import(\"./geom/GeometryCollection.js\").default} */ (geometry).getGeometries();\n      for (i = 0, ii = geometries.length; i < ii; ++i) {\n        area += getArea(geometries[i], opt_options);\n      }\n      break;\n    }\n    default: {\n      throw new Error('Unsupported geometry type: ' + type);\n    }\n  }\n  return area;\n}\n\n\n/**\n * Returns the coordinate at the given distance and bearing from `c1`.\n *\n * @param {import(\"./coordinate.js\").Coordinate} c1 The origin point (`[lon, lat]` in degrees).\n * @param {number} distance The great-circle distance between the origin\n *     point and the target point.\n * @param {number} bearing The bearing (in radians).\n * @param {number=} opt_radius The sphere radius to use.  Defaults to the Earth's\n *     mean radius using the WGS84 ellipsoid.\n * @return {import(\"./coordinate.js\").Coordinate} The target point.\n */\nexport function offset(c1, distance, bearing, opt_radius) {\n  const radius = opt_radius || DEFAULT_RADIUS;\n  const lat1 = toRadians(c1[1]);\n  const lon1 = toRadians(c1[0]);\n  const dByR = distance / radius;\n  const lat = Math.asin(\n    Math.sin(lat1) * Math.cos(dByR) +\n      Math.cos(lat1) * Math.sin(dByR) * Math.cos(bearing));\n  const lon = lon1 + Math.atan2(\n    Math.sin(bearing) * Math.sin(dByR) * Math.cos(lat1),\n    Math.cos(dByR) - Math.sin(lat1) * Math.sin(lat));\n  return [toDegrees(lon), toDegrees(lat)];\n}\n","/**\n * @module ol/style/IconImageCache\n */\nimport {asString} from '../color.js';\n\n/**\n * @classdesc\n * Singleton class. Available through {@link module:ol/style/IconImageCache~shared}.\n */\nclass IconImageCache {\n  constructor() {\n\n    /**\n    * @type {!Object<string, import(\"./IconImage.js\").default>}\n    * @private\n    */\n    this.cache_ = {};\n\n    /**\n    * @type {number}\n    * @private\n    */\n    this.cacheSize_ = 0;\n\n    /**\n    * @type {number}\n    * @private\n    */\n    this.maxCacheSize_ = 32;\n  }\n\n  /**\n  * FIXME empty description for jsdoc\n  */\n  clear() {\n    this.cache_ = {};\n    this.cacheSize_ = 0;\n  }\n\n  /**\n  * FIXME empty description for jsdoc\n  */\n  expire() {\n    if (this.cacheSize_ > this.maxCacheSize_) {\n      let i = 0;\n      for (const key in this.cache_) {\n        const iconImage = this.cache_[key];\n        if ((i++ & 3) === 0 && !iconImage.hasListener()) {\n          delete this.cache_[key];\n          --this.cacheSize_;\n        }\n      }\n    }\n  }\n\n  /**\n  * @param {string} src Src.\n  * @param {?string} crossOrigin Cross origin.\n  * @param {import(\"../color.js\").Color} color Color.\n  * @return {import(\"./IconImage.js\").default} Icon image.\n  */\n  get(src, crossOrigin, color) {\n    const key = getKey(src, crossOrigin, color);\n    return key in this.cache_ ? this.cache_[key] : null;\n  }\n\n  /**\n  * @param {string} src Src.\n  * @param {?string} crossOrigin Cross origin.\n  * @param {import(\"../color.js\").Color} color Color.\n  * @param {import(\"./IconImage.js\").default} iconImage Icon image.\n  */\n  set(src, crossOrigin, color, iconImage) {\n    const key = getKey(src, crossOrigin, color);\n    this.cache_[key] = iconImage;\n    ++this.cacheSize_;\n  }\n\n  /**\n  * Set the cache size of the icon cache. Default is `32`. Change this value when\n  * your map uses more than 32 different icon images and you are not caching icon\n  * styles on the application level.\n  * @param {number} maxCacheSize Cache max size.\n  * @api\n  */\n  setSize(maxCacheSize) {\n    this.maxCacheSize_ = maxCacheSize;\n    this.expire();\n  }\n}\n\n\n/**\n * @param {string} src Src.\n * @param {?string} crossOrigin Cross origin.\n * @param {import(\"../color.js\").Color} color Color.\n * @return {string} Cache key.\n */\nfunction getKey(src, crossOrigin, color) {\n  const colorString = color ? asString(color) : 'null';\n  return crossOrigin + ':' + src + ':' + colorString;\n}\n\n\nexport default IconImageCache;\n\n\n/**\n * The {@link module:ol/style/IconImageCache~IconImageCache} for\n * {@link module:ol/style/Icon~Icon} images.\n * @api\n */\nexport const shared = new IconImageCache();\n","/**\n * @module ol/geom/Circle\n */\nimport {createOrUpdate, forEachCorner, intersects} from '../extent.js';\nimport GeometryType from './GeometryType.js';\nimport SimpleGeometry from './SimpleGeometry.js';\nimport {deflateCoordinate} from './flat/deflate.js';\n\n/**\n * @classdesc\n * Circle geometry.\n *\n * @api\n */\nclass Circle extends SimpleGeometry {\n\n  /**\n   * @param {!import(\"../coordinate.js\").Coordinate} center Center.\n   *     For internal use, flat coordinates in combination with `opt_layout` and no\n   *     `opt_radius` are also accepted.\n   * @param {number=} opt_radius Radius.\n   * @param {import(\"./GeometryLayout.js\").default=} opt_layout Layout.\n   */\n  constructor(center, opt_radius, opt_layout) {\n    super();\n    if (opt_layout !== undefined && opt_radius === undefined) {\n      this.setFlatCoordinates(opt_layout, center);\n    } else {\n      const radius = opt_radius ? opt_radius : 0;\n      this.setCenterAndRadius(center, radius, opt_layout);\n    }\n  }\n\n  /**\n   * Make a complete copy of the geometry.\n   * @return {!Circle} Clone.\n   * @override\n   * @api\n   */\n  clone() {\n    return new Circle(this.flatCoordinates.slice(), undefined, this.layout);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  closestPointXY(x, y, closestPoint, minSquaredDistance) {\n    const flatCoordinates = this.flatCoordinates;\n    const dx = x - flatCoordinates[0];\n    const dy = y - flatCoordinates[1];\n    const squaredDistance = dx * dx + dy * dy;\n    if (squaredDistance < minSquaredDistance) {\n      if (squaredDistance === 0) {\n        for (let i = 0; i < this.stride; ++i) {\n          closestPoint[i] = flatCoordinates[i];\n        }\n      } else {\n        const delta = this.getRadius() / Math.sqrt(squaredDistance);\n        closestPoint[0] = flatCoordinates[0] + delta * dx;\n        closestPoint[1] = flatCoordinates[1] + delta * dy;\n        for (let i = 2; i < this.stride; ++i) {\n          closestPoint[i] = flatCoordinates[i];\n        }\n      }\n      closestPoint.length = this.stride;\n      return squaredDistance;\n    } else {\n      return minSquaredDistance;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  containsXY(x, y) {\n    const flatCoordinates = this.flatCoordinates;\n    const dx = x - flatCoordinates[0];\n    const dy = y - flatCoordinates[1];\n    return dx * dx + dy * dy <= this.getRadiusSquared_();\n  }\n\n  /**\n   * Return the center of the circle as {@link module:ol/coordinate~Coordinate coordinate}.\n   * @return {import(\"../coordinate.js\").Coordinate} Center.\n   * @api\n   */\n  getCenter() {\n    return this.flatCoordinates.slice(0, this.stride);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  computeExtent(extent) {\n    const flatCoordinates = this.flatCoordinates;\n    const radius = flatCoordinates[this.stride] - flatCoordinates[0];\n    return createOrUpdate(\n      flatCoordinates[0] - radius, flatCoordinates[1] - radius,\n      flatCoordinates[0] + radius, flatCoordinates[1] + radius,\n      extent);\n  }\n\n  /**\n   * Return the radius of the circle.\n   * @return {number} Radius.\n   * @api\n   */\n  getRadius() {\n    return Math.sqrt(this.getRadiusSquared_());\n  }\n\n  /**\n   * @private\n   * @return {number} Radius squared.\n   */\n  getRadiusSquared_() {\n    const dx = this.flatCoordinates[this.stride] - this.flatCoordinates[0];\n    const dy = this.flatCoordinates[this.stride + 1] - this.flatCoordinates[1];\n    return dx * dx + dy * dy;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getType() {\n    return GeometryType.CIRCLE;\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  intersectsExtent(extent) {\n    const circleExtent = this.getExtent();\n    if (intersects(extent, circleExtent)) {\n      const center = this.getCenter();\n\n      if (extent[0] <= center[0] && extent[2] >= center[0]) {\n        return true;\n      }\n      if (extent[1] <= center[1] && extent[3] >= center[1]) {\n        return true;\n      }\n\n      return forEachCorner(extent, this.intersectsCoordinate, this);\n    }\n    return false;\n\n  }\n\n  /**\n   * Set the center of the circle as {@link module:ol/coordinate~Coordinate coordinate}.\n   * @param {import(\"../coordinate.js\").Coordinate} center Center.\n   * @api\n   */\n  setCenter(center) {\n    const stride = this.stride;\n    const radius = this.flatCoordinates[stride] - this.flatCoordinates[0];\n    const flatCoordinates = center.slice();\n    flatCoordinates[stride] = flatCoordinates[0] + radius;\n    for (let i = 1; i < stride; ++i) {\n      flatCoordinates[stride + i] = center[i];\n    }\n    this.setFlatCoordinates(this.layout, flatCoordinates);\n    this.changed();\n  }\n\n  /**\n   * Set the center (as {@link module:ol/coordinate~Coordinate coordinate}) and the radius (as\n   * number) of the circle.\n   * @param {!import(\"../coordinate.js\").Coordinate} center Center.\n   * @param {number} radius Radius.\n   * @param {import(\"./GeometryLayout.js\").default=} opt_layout Layout.\n   * @api\n   */\n  setCenterAndRadius(center, radius, opt_layout) {\n    this.setLayout(opt_layout, center, 0);\n    if (!this.flatCoordinates) {\n      this.flatCoordinates = [];\n    }\n    /** @type {Array<number>} */\n    const flatCoordinates = this.flatCoordinates;\n    let offset = deflateCoordinate(\n      flatCoordinates, 0, center, this.stride);\n    flatCoordinates[offset++] = flatCoordinates[0] + radius;\n    for (let i = 1, ii = this.stride; i < ii; ++i) {\n      flatCoordinates[offset++] = flatCoordinates[i];\n    }\n    flatCoordinates.length = offset;\n    this.changed();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getCoordinates() {\n    return null;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setCoordinates(coordinates, opt_layout) {}\n\n  /**\n   * Set the radius of the circle. The radius is in the units of the projection.\n   * @param {number} radius Radius.\n   * @api\n   */\n  setRadius(radius) {\n    this.flatCoordinates[this.stride] = this.flatCoordinates[0] + radius;\n    this.changed();\n  }\n}\n\n\n/**\n * Transform each coordinate of the circle from one coordinate reference system\n * to another. The geometry is modified in place.\n * If you do not want the geometry modified in place, first clone() it and\n * then use this function on the clone.\n *\n * Internally a circle is currently represented by two points: the center of\n * the circle `[cx, cy]`, and the point to the right of the circle\n * `[cx + r, cy]`. This `transform` function just transforms these two points.\n * So the resulting geometry is also a circle, and that circle does not\n * correspond to the shape that would be obtained by transforming every point\n * of the original circle.\n *\n * @param {import(\"../proj.js\").ProjectionLike} source The current projection.  Can be a\n *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n * @param {import(\"../proj.js\").ProjectionLike} destination The desired projection.  Can be a\n *     string identifier or a {@link module:ol/proj/Projection~Projection} object.\n * @return {Circle} This geometry.  Note that original geometry is\n *     modified in place.\n * @function\n * @api\n */\nCircle.prototype.transform;\nexport default Circle;\n","/**\n * @module ol/interaction/DragAndDrop\n */\n// FIXME should handle all geo-referenced data, not just vector data\n\nimport {TRUE} from '../functions.js';\nimport {listen, unlistenByKey} from '../events.js';\nimport Event from '../events/Event.js';\nimport EventType from '../events/EventType.js';\nimport Interaction from './Interaction.js';\nimport {get as getProjection} from '../proj.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {Array<typeof import(\"../format/Feature.js\").default>} [formatConstructors] Format constructors.\n * @property {import(\"../source/Vector.js\").default} [source] Optional vector source where features will be added.  If a source is provided\n * all existing features will be removed and new features will be added when\n * they are dropped on the target.  If you want to add features to a vector\n * source without removing the existing features (append only), instead of\n * providing the source option listen for the \"addfeatures\" event.\n * @property {import(\"../proj.js\").ProjectionLike} [projection] Target projection. By default, the map's view's projection is used.\n * @property {HTMLElement} [target] The element that is used as the drop target, default is the viewport element.\n */\n\n\n/**\n * @enum {string}\n */\nconst DragAndDropEventType = {\n  /**\n   * Triggered when features are added\n   * @event DragAndDropEvent#addfeatures\n   * @api\n   */\n  ADD_FEATURES: 'addfeatures'\n};\n\n\n/**\n * @classdesc\n * Events emitted by {@link module:ol/interaction/DragAndDrop~DragAndDrop} instances are instances\n * of this type.\n */\nclass DragAndDropEvent extends Event {\n\n  /**\n   * @param {DragAndDropEventType} type Type.\n   * @param {File} file File.\n   * @param {Array<import(\"../Feature.js\").default>=} opt_features Features.\n   * @param {import(\"../proj/Projection.js\").default=} opt_projection Projection.\n   */\n  constructor(type, file, opt_features, opt_projection) {\n\n    super(type);\n\n    /**\n     * The features parsed from dropped data.\n     * @type {Array<import(\"../Feature.js\").FeatureLike>|undefined}\n     * @api\n     */\n    this.features = opt_features;\n\n    /**\n     * The dropped file.\n     * @type {File}\n     * @api\n     */\n    this.file = file;\n\n    /**\n     * The feature projection.\n     * @type {import(\"../proj/Projection.js\").default|undefined}\n     * @api\n     */\n    this.projection = opt_projection;\n\n  }\n\n}\n\n\n/**\n * @classdesc\n * Handles input of vector data by drag and drop.\n * @api\n *\n * @fires DragAndDropEvent\n */\nclass DragAndDrop extends Interaction {\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options ? opt_options : {};\n\n    super({\n      handleEvent: TRUE\n    });\n\n    /**\n     * @private\n     * @type {Array<typeof import(\"../format/Feature.js\").default>}\n     */\n    this.formatConstructors_ = options.formatConstructors ?\n      options.formatConstructors : [];\n\n    /**\n     * @private\n     * @type {import(\"../proj/Projection.js\").default}\n     */\n    this.projection_ = options.projection ?\n      getProjection(options.projection) : null;\n\n    /**\n     * @private\n     * @type {Array<import(\"../events.js\").EventsKey>}\n     */\n    this.dropListenKeys_ = null;\n\n    /**\n     * @private\n     * @type {import(\"../source/Vector.js\").default}\n     */\n    this.source_ = options.source || null;\n\n    /**\n     * @private\n     * @type {HTMLElement}\n     */\n    this.target = options.target ? options.target : null;\n\n  }\n\n  /**\n   * @param {File} file File.\n   * @param {Event} event Load event.\n   * @private\n   */\n  handleResult_(file, event) {\n    const result = event.target.result;\n    const map = this.getMap();\n    let projection = this.projection_;\n    if (!projection) {\n      const view = map.getView();\n      projection = view.getProjection();\n    }\n\n    const formatConstructors = this.formatConstructors_;\n    let features = [];\n    for (let i = 0, ii = formatConstructors.length; i < ii; ++i) {\n      const format = new formatConstructors[i]();\n      features = this.tryReadFeatures_(format, result, {\n        featureProjection: projection\n      });\n      if (features && features.length > 0) {\n        break;\n      }\n    }\n    if (this.source_) {\n      this.source_.clear();\n      this.source_.addFeatures(features);\n    }\n    this.dispatchEvent(\n      new DragAndDropEvent(\n        DragAndDropEventType.ADD_FEATURES, file,\n        features, projection));\n  }\n\n  /**\n   * @private\n   */\n  registerListeners_() {\n    const map = this.getMap();\n    if (map) {\n      const dropArea = this.target ? this.target : map.getViewport();\n      this.dropListenKeys_ = [\n        listen(dropArea, EventType.DROP, handleDrop, this),\n        listen(dropArea, EventType.DRAGENTER, handleStop, this),\n        listen(dropArea, EventType.DRAGOVER, handleStop, this),\n        listen(dropArea, EventType.DROP, handleStop, this)\n      ];\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setActive(active) {\n    super.setActive(active);\n    if (active) {\n      this.registerListeners_();\n    } else {\n      this.unregisterListeners_();\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  setMap(map) {\n    this.unregisterListeners_();\n    super.setMap(map);\n    if (this.getActive()) {\n      this.registerListeners_();\n    }\n  }\n\n  /**\n   * @param {import(\"../format/Feature.js\").default} format Format.\n   * @param {string} text Text.\n   * @param {import(\"../format/Feature.js\").ReadOptions} options Read options.\n   * @private\n   * @return {Array<import(\"../Feature.js\").FeatureLike>} Features.\n   */\n  tryReadFeatures_(format, text, options) {\n    try {\n      return format.readFeatures(text, options);\n    } catch (e) {\n      return null;\n    }\n  }\n\n  /**\n   * @private\n   */\n  unregisterListeners_() {\n    if (this.dropListenKeys_) {\n      this.dropListenKeys_.forEach(unlistenByKey);\n      this.dropListenKeys_ = null;\n    }\n  }\n}\n\n\n/**\n * @param {DragEvent} event Event.\n * @this {DragAndDrop}\n */\nfunction handleDrop(event) {\n  const files = event.dataTransfer.files;\n  for (let i = 0, ii = files.length; i < ii; ++i) {\n    const file = files.item(i);\n    const reader = new FileReader();\n    reader.addEventListener(EventType.LOAD, this.handleResult_.bind(this, file));\n    reader.readAsText(file);\n  }\n}\n\n\n/**\n * @param {DragEvent} event Event.\n */\nfunction handleStop(event) {\n  event.stopPropagation();\n  event.preventDefault();\n  event.dataTransfer.dropEffect = 'copy';\n}\n\n\nexport default DragAndDrop;\n","/**\n * @module ol/AssertionError\n */\nimport {VERSION} from './util.js';\n\n/**\n * Error object thrown when an assertion failed. This is an ECMA-262 Error,\n * extended with a `code` property.\n * See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error.\n */\nclass AssertionError extends Error {\n\n  /**\n   * @param {number} code Error code.\n   */\n  constructor(code) {\n    const path = VERSION === 'latest' ? VERSION : 'v' + VERSION.split('-')[0];\n    const message = 'Assertion failed. See https://openlayers.org/en/' + path +\n    '/doc/errors/#' + code + ' for details.';\n\n    super(message);\n\n    /**\n     * Error code. The meaning of the code can be found on\n     * https://openlayers.org/en/latest/doc/errors/ (replace `latest` with\n     * the version found in the OpenLayers script's header comment if a version\n     * other than the latest is used).\n     * @type {number}\n     * @api\n     */\n    this.code = code;\n\n    /**\n     * @type {string}\n     */\n    this.name = 'AssertionError';\n\n    // Re-assign message, see https://github.com/Rich-Harris/buble/issues/40\n    this.message = message;\n  }\n\n}\n\nexport default AssertionError;\n","/**\n * @module ol/layer/Base\n */\nimport {abstract} from '../util.js';\nimport BaseObject from '../Object.js';\nimport LayerProperty from './Property.js';\nimport {clamp} from '../math.js';\nimport {assign} from '../obj.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"../extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible.\n */\n\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Note that with {@link module:ol/layer/Base} and all its subclasses, any property set in\n * the options is set as a {@link module:ol/Object} property on the layer object, so\n * is observable, and has get/set accessors.\n *\n * @api\n */\nclass BaseLayer extends BaseObject {\n  /**\n   * @param {Options} options Layer options.\n   */\n  constructor(options) {\n\n    super();\n\n    /**\n     * @type {Object<string, *>}\n     */\n    const properties = assign({}, options);\n    properties[LayerProperty.OPACITY] =\n       options.opacity !== undefined ? options.opacity : 1;\n    properties[LayerProperty.VISIBLE] =\n       options.visible !== undefined ? options.visible : true;\n    properties[LayerProperty.Z_INDEX] = options.zIndex;\n    properties[LayerProperty.MAX_RESOLUTION] =\n       options.maxResolution !== undefined ? options.maxResolution : Infinity;\n    properties[LayerProperty.MIN_RESOLUTION] =\n       options.minResolution !== undefined ? options.minResolution : 0;\n\n    this.setProperties(properties);\n\n    /**\n     * @type {import(\"./Layer.js\").State}\n     * @private\n     */\n    this.state_ = null;\n\n    /**\n     * The layer type.\n     * @type {import(\"../LayerType.js\").default}\n     * @protected;\n     */\n    this.type;\n\n  }\n\n  /**\n   * Get the layer type (used when creating a layer renderer).\n   * @return {import(\"../LayerType.js\").default} The layer type.\n   */\n  getType() {\n    return this.type;\n  }\n\n  /**\n   * @return {import(\"./Layer.js\").State} Layer state.\n   */\n  getLayerState() {\n    /** @type {import(\"./Layer.js\").State} */\n    const state = this.state_ || /** @type {?} */ ({\n      layer: this,\n      managed: true\n    });\n    state.opacity = clamp(this.getOpacity(), 0, 1);\n    state.sourceState = this.getSourceState();\n    state.visible = this.getVisible();\n    state.extent = this.getExtent();\n    state.zIndex = this.getZIndex() || 0;\n    state.maxResolution = this.getMaxResolution();\n    state.minResolution = Math.max(this.getMinResolution(), 0);\n    this.state_ = state;\n\n    return state;\n  }\n\n  /**\n   * @abstract\n   * @param {Array<import(\"./Layer.js\").default>=} opt_array Array of layers (to be\n   *     modified in place).\n   * @return {Array<import(\"./Layer.js\").default>} Array of layers.\n   */\n  getLayersArray(opt_array) {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @param {Array<import(\"./Layer.js\").State>=} opt_states Optional list of layer\n   *     states (to be modified in place).\n   * @return {Array<import(\"./Layer.js\").State>} List of layer states.\n   */\n  getLayerStatesArray(opt_states) {\n    return abstract();\n  }\n\n  /**\n   * Return the {@link module:ol/extent~Extent extent} of the layer or `undefined` if it\n   * will be visible regardless of extent.\n   * @return {import(\"../extent.js\").Extent|undefined} The layer extent.\n   * @observable\n   * @api\n   */\n  getExtent() {\n    return (\n      /** @type {import(\"../extent.js\").Extent|undefined} */ (this.get(LayerProperty.EXTENT))\n    );\n  }\n\n  /**\n   * Return the maximum resolution of the layer.\n   * @return {number} The maximum resolution of the layer.\n   * @observable\n   * @api\n   */\n  getMaxResolution() {\n    return /** @type {number} */ (this.get(LayerProperty.MAX_RESOLUTION));\n  }\n\n  /**\n   * Return the minimum resolution of the layer.\n   * @return {number} The minimum resolution of the layer.\n   * @observable\n   * @api\n   */\n  getMinResolution() {\n    return /** @type {number} */ (this.get(LayerProperty.MIN_RESOLUTION));\n  }\n\n  /**\n   * Return the opacity of the layer (between 0 and 1).\n   * @return {number} The opacity of the layer.\n   * @observable\n   * @api\n   */\n  getOpacity() {\n    return /** @type {number} */ (this.get(LayerProperty.OPACITY));\n  }\n\n  /**\n   * @abstract\n   * @return {import(\"../source/State.js\").default} Source state.\n   */\n  getSourceState() {\n    return abstract();\n  }\n\n  /**\n   * Return the visibility of the layer (`true` or `false`).\n   * @return {boolean} The visibility of the layer.\n   * @observable\n   * @api\n   */\n  getVisible() {\n    return /** @type {boolean} */ (this.get(LayerProperty.VISIBLE));\n  }\n\n  /**\n   * Return the Z-index of the layer, which is used to order layers before\n   * rendering. The default Z-index is 0.\n   * @return {number} The Z-index of the layer.\n   * @observable\n   * @api\n   */\n  getZIndex() {\n    return /** @type {number} */ (this.get(LayerProperty.Z_INDEX));\n  }\n\n  /**\n   * Set the extent at which the layer is visible.  If `undefined`, the layer\n   * will be visible at all extents.\n   * @param {import(\"../extent.js\").Extent|undefined} extent The extent of the layer.\n   * @observable\n   * @api\n   */\n  setExtent(extent) {\n    this.set(LayerProperty.EXTENT, extent);\n  }\n\n  /**\n   * Set the maximum resolution at which the layer is visible.\n   * @param {number} maxResolution The maximum resolution of the layer.\n   * @observable\n   * @api\n   */\n  setMaxResolution(maxResolution) {\n    this.set(LayerProperty.MAX_RESOLUTION, maxResolution);\n  }\n\n  /**\n   * Set the minimum resolution at which the layer is visible.\n   * @param {number} minResolution The minimum resolution of the layer.\n   * @observable\n   * @api\n   */\n  setMinResolution(minResolution) {\n    this.set(LayerProperty.MIN_RESOLUTION, minResolution);\n  }\n\n  /**\n   * Set the opacity of the layer, allowed values range from 0 to 1.\n   * @param {number} opacity The opacity of the layer.\n   * @observable\n   * @api\n   */\n  setOpacity(opacity) {\n    this.set(LayerProperty.OPACITY, opacity);\n  }\n\n  /**\n   * Set the visibility of the layer (`true` or `false`).\n   * @param {boolean} visible The visibility of the layer.\n   * @observable\n   * @api\n   */\n  setVisible(visible) {\n    this.set(LayerProperty.VISIBLE, visible);\n  }\n\n  /**\n   * Set Z-index of the layer, which is used to order layers before rendering.\n   * The default Z-index is 0.\n   * @param {number} zindex The z-index of the layer.\n   * @observable\n   * @api\n   */\n  setZIndex(zindex) {\n    this.set(LayerProperty.Z_INDEX, zindex);\n  }\n}\n\n\nexport default BaseLayer;\n","/**\n * @module ol/reproj/Triangulation\n */\nimport {boundingExtent, createEmpty, extendCoordinate, getBottomLeft, getBottomRight,\n  getTopLeft, getTopRight, getWidth, intersects} from '../extent.js';\nimport {modulo} from '../math.js';\nimport {getTransform} from '../proj.js';\n\n\n/**\n * Single triangle; consists of 3 source points and 3 target points.\n * @typedef {Object} Triangle\n * @property {Array<import(\"../coordinate.js\").Coordinate>} source\n * @property {Array<import(\"../coordinate.js\").Coordinate>} target\n */\n\n\n/**\n * Maximum number of subdivision steps during raster reprojection triangulation.\n * Prevents high memory usage and large number of proj4 calls (for certain\n * transformations and areas). At most `2*(2^this)` triangles are created for\n * each triangulated extent (tile/image).\n * @type {number}\n */\nconst MAX_SUBDIVISION = 10;\n\n\n/**\n * Maximum allowed size of triangle relative to world width. When transforming\n * corners of world extent between certain projections, the resulting\n * triangulation seems to have zero error and no subdivision is performed. If\n * the triangle width is more than this (relative to world width; 0-1),\n * subdivison is forced (up to `MAX_SUBDIVISION`). Default is `0.25`.\n * @type {number}\n */\nconst MAX_TRIANGLE_WIDTH = 0.25;\n\n\n/**\n * @classdesc\n * Class containing triangulation of the given target extent.\n * Used for determining source data and the reprojection itself.\n */\nclass Triangulation {\n\n  /**\n   * @param {import(\"../proj/Projection.js\").default} sourceProj Source projection.\n   * @param {import(\"../proj/Projection.js\").default} targetProj Target projection.\n   * @param {import(\"../extent.js\").Extent} targetExtent Target extent to triangulate.\n   * @param {import(\"../extent.js\").Extent} maxSourceExtent Maximal source extent that can be used.\n   * @param {number} errorThreshold Acceptable error (in source units).\n   */\n  constructor(sourceProj, targetProj, targetExtent, maxSourceExtent, errorThreshold) {\n\n    /**\n     * @type {import(\"../proj/Projection.js\").default}\n     * @private\n     */\n    this.sourceProj_ = sourceProj;\n\n    /**\n     * @type {import(\"../proj/Projection.js\").default}\n     * @private\n     */\n    this.targetProj_ = targetProj;\n\n    /** @type {!Object<string, import(\"../coordinate.js\").Coordinate>} */\n    let transformInvCache = {};\n    const transformInv = getTransform(this.targetProj_, this.sourceProj_);\n\n    /**\n     * @param {import(\"../coordinate.js\").Coordinate} c A coordinate.\n     * @return {import(\"../coordinate.js\").Coordinate} Transformed coordinate.\n     * @private\n     */\n    this.transformInv_ = function(c) {\n      const key = c[0] + '/' + c[1];\n      if (!transformInvCache[key]) {\n        transformInvCache[key] = transformInv(c);\n      }\n      return transformInvCache[key];\n    };\n\n    /**\n     * @type {import(\"../extent.js\").Extent}\n     * @private\n     */\n    this.maxSourceExtent_ = maxSourceExtent;\n\n    /**\n     * @type {number}\n     * @private\n     */\n    this.errorThresholdSquared_ = errorThreshold * errorThreshold;\n\n    /**\n     * @type {Array<Triangle>}\n     * @private\n     */\n    this.triangles_ = [];\n\n    /**\n     * Indicates that the triangulation crosses edge of the source projection.\n     * @type {boolean}\n     * @private\n     */\n    this.wrapsXInSource_ = false;\n\n    /**\n     * @type {boolean}\n     * @private\n     */\n    this.canWrapXInSource_ = this.sourceProj_.canWrapX() &&\n        !!maxSourceExtent &&\n        !!this.sourceProj_.getExtent() &&\n        (getWidth(maxSourceExtent) == getWidth(this.sourceProj_.getExtent()));\n\n    /**\n     * @type {?number}\n     * @private\n     */\n    this.sourceWorldWidth_ = this.sourceProj_.getExtent() ?\n      getWidth(this.sourceProj_.getExtent()) : null;\n\n    /**\n     * @type {?number}\n     * @private\n     */\n    this.targetWorldWidth_ = this.targetProj_.getExtent() ?\n      getWidth(this.targetProj_.getExtent()) : null;\n\n    const destinationTopLeft = getTopLeft(targetExtent);\n    const destinationTopRight = getTopRight(targetExtent);\n    const destinationBottomRight = getBottomRight(targetExtent);\n    const destinationBottomLeft = getBottomLeft(targetExtent);\n    const sourceTopLeft = this.transformInv_(destinationTopLeft);\n    const sourceTopRight = this.transformInv_(destinationTopRight);\n    const sourceBottomRight = this.transformInv_(destinationBottomRight);\n    const sourceBottomLeft = this.transformInv_(destinationBottomLeft);\n\n    this.addQuad_(\n      destinationTopLeft, destinationTopRight,\n      destinationBottomRight, destinationBottomLeft,\n      sourceTopLeft, sourceTopRight, sourceBottomRight, sourceBottomLeft,\n      MAX_SUBDIVISION);\n\n    if (this.wrapsXInSource_) {\n      let leftBound = Infinity;\n      this.triangles_.forEach(function(triangle, i, arr) {\n        leftBound = Math.min(leftBound,\n          triangle.source[0][0], triangle.source[1][0], triangle.source[2][0]);\n      });\n\n      // Shift triangles to be as close to `leftBound` as possible\n      // (if the distance is more than `worldWidth / 2` it can be closer.\n      this.triangles_.forEach(function(triangle) {\n        if (Math.max(triangle.source[0][0], triangle.source[1][0],\n          triangle.source[2][0]) - leftBound > this.sourceWorldWidth_ / 2) {\n          const newTriangle = [[triangle.source[0][0], triangle.source[0][1]],\n            [triangle.source[1][0], triangle.source[1][1]],\n            [triangle.source[2][0], triangle.source[2][1]]];\n          if ((newTriangle[0][0] - leftBound) > this.sourceWorldWidth_ / 2) {\n            newTriangle[0][0] -= this.sourceWorldWidth_;\n          }\n          if ((newTriangle[1][0] - leftBound) > this.sourceWorldWidth_ / 2) {\n            newTriangle[1][0] -= this.sourceWorldWidth_;\n          }\n          if ((newTriangle[2][0] - leftBound) > this.sourceWorldWidth_ / 2) {\n            newTriangle[2][0] -= this.sourceWorldWidth_;\n          }\n\n          // Rarely (if the extent contains both the dateline and prime meridian)\n          // the shift can in turn break some triangles.\n          // Detect this here and don't shift in such cases.\n          const minX = Math.min(\n            newTriangle[0][0], newTriangle[1][0], newTriangle[2][0]);\n          const maxX = Math.max(\n            newTriangle[0][0], newTriangle[1][0], newTriangle[2][0]);\n          if ((maxX - minX) < this.sourceWorldWidth_ / 2) {\n            triangle.source = newTriangle;\n          }\n        }\n      }.bind(this));\n    }\n\n    transformInvCache = {};\n  }\n\n  /**\n   * Adds triangle to the triangulation.\n   * @param {import(\"../coordinate.js\").Coordinate} a The target a coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} b The target b coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} c The target c coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} aSrc The source a coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} bSrc The source b coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} cSrc The source c coordinate.\n   * @private\n   */\n  addTriangle_(a, b, c, aSrc, bSrc, cSrc) {\n    this.triangles_.push({\n      source: [aSrc, bSrc, cSrc],\n      target: [a, b, c]\n    });\n  }\n\n  /**\n   * Adds quad (points in clock-wise order) to the triangulation\n   * (and reprojects the vertices) if valid.\n   * Performs quad subdivision if needed to increase precision.\n   *\n   * @param {import(\"../coordinate.js\").Coordinate} a The target a coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} b The target b coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} c The target c coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} d The target d coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} aSrc The source a coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} bSrc The source b coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} cSrc The source c coordinate.\n   * @param {import(\"../coordinate.js\").Coordinate} dSrc The source d coordinate.\n   * @param {number} maxSubdivision Maximal allowed subdivision of the quad.\n   * @private\n   */\n  addQuad_(a, b, c, d, aSrc, bSrc, cSrc, dSrc, maxSubdivision) {\n\n    const sourceQuadExtent = boundingExtent([aSrc, bSrc, cSrc, dSrc]);\n    const sourceCoverageX = this.sourceWorldWidth_ ?\n      getWidth(sourceQuadExtent) / this.sourceWorldWidth_ : null;\n    const sourceWorldWidth = /** @type {number} */ (this.sourceWorldWidth_);\n\n    // when the quad is wrapped in the source projection\n    // it covers most of the projection extent, but not fully\n    const wrapsX = this.sourceProj_.canWrapX() &&\n                 sourceCoverageX > 0.5 && sourceCoverageX < 1;\n\n    let needsSubdivision = false;\n\n    if (maxSubdivision > 0) {\n      if (this.targetProj_.isGlobal() && this.targetWorldWidth_) {\n        const targetQuadExtent = boundingExtent([a, b, c, d]);\n        const targetCoverageX = getWidth(targetQuadExtent) / this.targetWorldWidth_;\n        needsSubdivision = targetCoverageX > MAX_TRIANGLE_WIDTH ||\n          needsSubdivision;\n      }\n      if (!wrapsX && this.sourceProj_.isGlobal() && sourceCoverageX) {\n        needsSubdivision = sourceCoverageX > MAX_TRIANGLE_WIDTH ||\n            needsSubdivision;\n      }\n    }\n\n    if (!needsSubdivision && this.maxSourceExtent_) {\n      if (!intersects(sourceQuadExtent, this.maxSourceExtent_)) {\n        // whole quad outside source projection extent -> ignore\n        return;\n      }\n    }\n\n    if (!needsSubdivision) {\n      if (!isFinite(aSrc[0]) || !isFinite(aSrc[1]) ||\n          !isFinite(bSrc[0]) || !isFinite(bSrc[1]) ||\n          !isFinite(cSrc[0]) || !isFinite(cSrc[1]) ||\n          !isFinite(dSrc[0]) || !isFinite(dSrc[1])) {\n        if (maxSubdivision > 0) {\n          needsSubdivision = true;\n        } else {\n          return;\n        }\n      }\n    }\n\n    if (maxSubdivision > 0) {\n      if (!needsSubdivision) {\n        const center = [(a[0] + c[0]) / 2, (a[1] + c[1]) / 2];\n        const centerSrc = this.transformInv_(center);\n\n        let dx;\n        if (wrapsX) {\n          const centerSrcEstimX =\n              (modulo(aSrc[0], sourceWorldWidth) +\n               modulo(cSrc[0], sourceWorldWidth)) / 2;\n          dx = centerSrcEstimX -\n              modulo(centerSrc[0], sourceWorldWidth);\n        } else {\n          dx = (aSrc[0] + cSrc[0]) / 2 - centerSrc[0];\n        }\n        const dy = (aSrc[1] + cSrc[1]) / 2 - centerSrc[1];\n        const centerSrcErrorSquared = dx * dx + dy * dy;\n        needsSubdivision = centerSrcErrorSquared > this.errorThresholdSquared_;\n      }\n      if (needsSubdivision) {\n        if (Math.abs(a[0] - c[0]) <= Math.abs(a[1] - c[1])) {\n          // split horizontally (top & bottom)\n          const bc = [(b[0] + c[0]) / 2, (b[1] + c[1]) / 2];\n          const bcSrc = this.transformInv_(bc);\n          const da = [(d[0] + a[0]) / 2, (d[1] + a[1]) / 2];\n          const daSrc = this.transformInv_(da);\n\n          this.addQuad_(\n            a, b, bc, da, aSrc, bSrc, bcSrc, daSrc, maxSubdivision - 1);\n          this.addQuad_(\n            da, bc, c, d, daSrc, bcSrc, cSrc, dSrc, maxSubdivision - 1);\n        } else {\n          // split vertically (left & right)\n          const ab = [(a[0] + b[0]) / 2, (a[1] + b[1]) / 2];\n          const abSrc = this.transformInv_(ab);\n          const cd = [(c[0] + d[0]) / 2, (c[1] + d[1]) / 2];\n          const cdSrc = this.transformInv_(cd);\n\n          this.addQuad_(\n            a, ab, cd, d, aSrc, abSrc, cdSrc, dSrc, maxSubdivision - 1);\n          this.addQuad_(\n            ab, b, c, cd, abSrc, bSrc, cSrc, cdSrc, maxSubdivision - 1);\n        }\n        return;\n      }\n    }\n\n    if (wrapsX) {\n      if (!this.canWrapXInSource_) {\n        return;\n      }\n      this.wrapsXInSource_ = true;\n    }\n\n    this.addTriangle_(a, c, d, aSrc, cSrc, dSrc);\n    this.addTriangle_(a, b, c, aSrc, bSrc, cSrc);\n  }\n\n  /**\n   * Calculates extent of the 'source' coordinates from all the triangles.\n   *\n   * @return {import(\"../extent.js\").Extent} Calculated extent.\n   */\n  calculateSourceExtent() {\n    const extent = createEmpty();\n\n    this.triangles_.forEach(function(triangle, i, arr) {\n      const src = triangle.source;\n      extendCoordinate(extent, src[0]);\n      extendCoordinate(extent, src[1]);\n      extendCoordinate(extent, src[2]);\n    });\n\n    return extent;\n  }\n\n  /**\n   * @return {Array<Triangle>} Array of the calculated triangles.\n   */\n  getTriangles() {\n    return this.triangles_;\n  }\n}\n\nexport default Triangulation;\n","/**\n * @module ol/Image\n */\nimport ImageBase from './ImageBase.js';\nimport ImageState from './ImageState.js';\nimport {listenOnce, unlistenByKey} from './events.js';\nimport EventType from './events/EventType.js';\nimport {getHeight} from './extent.js';\n\n\n/**\n * A function that takes an {@link module:ol/Image~Image} for the image and a\n * `{string}` for the src as arguments. It is supposed to make it so the\n * underlying image {@link module:ol/Image~Image#getImage} is assigned the\n * content specified by the src. If not specified, the default is\n *\n *     function(image, src) {\n *       image.getImage().src = src;\n *     }\n *\n * Providing a custom `imageLoadFunction` can be useful to load images with\n * post requests or - in general - through XHR requests, where the src of the\n * image element would be set to a data URI when the content is loaded.\n *\n * @typedef {function(ImageWrapper, string)} LoadFunction\n * @api\n */\n\n\nclass ImageWrapper extends ImageBase {\n\n  /**\n   * @param {import(\"./extent.js\").Extent} extent Extent.\n   * @param {number|undefined} resolution Resolution.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {string} src Image source URI.\n   * @param {?string} crossOrigin Cross origin.\n   * @param {LoadFunction} imageLoadFunction Image load function.\n   */\n  constructor(extent, resolution, pixelRatio, src, crossOrigin, imageLoadFunction) {\n\n    super(extent, resolution, pixelRatio, ImageState.IDLE);\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.src_ = src;\n\n    /**\n     * @private\n     * @type {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement}\n     */\n    this.image_ = new Image();\n    if (crossOrigin !== null) {\n      this.image_.crossOrigin = crossOrigin;\n    }\n\n    /**\n     * @private\n     * @type {Array<import(\"./events.js\").EventsKey>}\n     */\n    this.imageListenerKeys_ = null;\n\n    /**\n     * @protected\n     * @type {ImageState}\n     */\n    this.state = ImageState.IDLE;\n\n    /**\n     * @private\n     * @type {LoadFunction}\n     */\n    this.imageLoadFunction_ = imageLoadFunction;\n\n  }\n\n  /**\n   * @inheritDoc\n   * @api\n   */\n  getImage() {\n    return this.image_;\n  }\n\n  /**\n   * Tracks loading or read errors.\n   *\n   * @private\n   */\n  handleImageError_() {\n    this.state = ImageState.ERROR;\n    this.unlistenImage_();\n    this.changed();\n  }\n\n  /**\n   * Tracks successful image load.\n   *\n   * @private\n   */\n  handleImageLoad_() {\n    if (this.resolution === undefined) {\n      this.resolution = getHeight(this.extent) / this.image_.height;\n    }\n    this.state = ImageState.LOADED;\n    this.unlistenImage_();\n    this.changed();\n  }\n\n  /**\n   * Load the image or retry if loading previously failed.\n   * Loading is taken care of by the tile queue, and calling this method is\n   * only needed for preloading or for reloading in case of an error.\n   * @override\n   * @api\n   */\n  load() {\n    if (this.state == ImageState.IDLE || this.state == ImageState.ERROR) {\n      this.state = ImageState.LOADING;\n      this.changed();\n      this.imageListenerKeys_ = [\n        listenOnce(this.image_, EventType.ERROR,\n          this.handleImageError_, this),\n        listenOnce(this.image_, EventType.LOAD,\n          this.handleImageLoad_, this)\n      ];\n      this.imageLoadFunction_(this, this.src_);\n    }\n  }\n\n  /**\n   * @param {HTMLCanvasElement|HTMLImageElement|HTMLVideoElement} image Image.\n   */\n  setImage(image) {\n    this.image_ = image;\n  }\n\n  /**\n   * Discards event handlers which listen for load completion or errors.\n   *\n   * @private\n   */\n  unlistenImage_() {\n    this.imageListenerKeys_.forEach(unlistenByKey);\n    this.imageListenerKeys_ = null;\n  }\n}\n\n\nexport default ImageWrapper;\n","/**\n * @module ol/uri\n */\n\n\n/**\n * Appends query parameters to a URI.\n *\n * @param {string} uri The original URI, which may already have query data.\n * @param {!Object} params An object where keys are URI-encoded parameter keys,\n *     and the values are arbitrary types or arrays.\n * @return {string} The new URI.\n */\nexport function appendParams(uri, params) {\n  const keyParams = [];\n  // Skip any null or undefined parameter values\n  Object.keys(params).forEach(function(k) {\n    if (params[k] !== null && params[k] !== undefined) {\n      keyParams.push(k + '=' + encodeURIComponent(params[k]));\n    }\n  });\n  const qs = keyParams.join('&');\n  // remove any trailing ? or &\n  uri = uri.replace(/[?&]$/, '');\n  // append ? or & depending on whether uri has existing parameters\n  uri = uri.indexOf('?') === -1 ? uri + '?' : uri + '&';\n  return uri + qs;\n}\n","/**\n * @module ol/source/TileWMS\n */\n\nimport {DEFAULT_WMS_VERSION} from './common.js';\n\nimport {assert} from '../asserts.js';\nimport {buffer, createEmpty} from '../extent.js';\nimport {assign} from '../obj.js';\nimport {modulo} from '../math.js';\nimport {get as getProjection, transform, transformExtent} from '../proj.js';\nimport {calculateSourceResolution} from '../reproj.js';\nimport {toSize, buffer as bufferSize, scale as scaleSize} from '../size.js';\nimport TileImage from './TileImage.js';\nimport WMSServerType from './WMSServerType.js';\nimport {hash as tileCoordHash} from '../tilecoord.js';\nimport {compareVersions} from '../string.js';\nimport {appendParams} from '../uri.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {number} [cacheSize=2048] Cache size.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you are using the WebGL renderer or if you want to\n * access pixel data with the Canvas renderer.  See\n * https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {Object<string,*>} params WMS request parameters.\n * At least a `LAYERS` param is required. `STYLES` is\n * `''` by default. `VERSION` is `1.3.0` by default. `WIDTH`, `HEIGHT`, `BBOX`\n * and `CRS` (`SRS` for WMS version < 1.3.0) will be set dynamically.\n * @property {number} [gutter=0]\n * The size in pixels of the gutter around image tiles to ignore. By setting\n * this property to a non-zero value, images will be requested that are wider\n * and taller than the tile size by a value of `2 x gutter`.\n * Using a non-zero value allows artifacts of rendering at tile edges to be\n * ignored. If you control the WMS service it is recommended to address\n * \"artifacts at tile edges\" issues by properly configuring the WMS service. For\n * example, MapServer has a `tile_map_edge_buffer` configuration parameter for\n * this. See http://mapserver.org/output/tile_mode.html.\n * @property {boolean} [hidpi=true] Use the `ol/Map#pixelRatio` value when requesting\n * the image from the remote server.\n * @property {import(\"../proj.js\").ProjectionLike} projection Projection.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {typeof import(\"../ImageTile.js\").default} [tileClass] Class used to instantiate image tiles.\n * Default is {@link module:ol/ImageTile~ImageTile}.\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid] Tile grid. Base this on the resolutions,\n * tilesize and extent supported by the server.\n * If this is not defined, a default grid will be used: if there is a projection\n * extent, the grid will be based on that; if not, a grid based on a global\n * extent with origin at 0,0 will be used..\n * @property {import(\"./WMSServerType.js\").default|string} [serverType]\n * The type of the remote WMS server. Currently only used when `hidpi` is\n * `true`.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {string} [url] WMS service URL.\n * @property {Array<string>} [urls] WMS service urls.\n * Use this instead of `url` when the WMS supports multiple urls for GetMap requests.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * When set to `false`, only one world\n * will be rendered. When `true`, tiles will be requested for one world only,\n * but they will be wrapped horizontally to render multiple worlds.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n */\n\n\n/**\n * @classdesc\n * Layer source for tile data from WMS servers.\n * @api\n */\nclass TileWMS extends TileImage {\n  /**\n   * @param {Options=} [opt_options] Tile WMS options.\n   */\n  constructor(opt_options) {\n\n    const options = opt_options || /** @type {Options} */ ({});\n\n    const params = options.params || {};\n\n    const transparent = 'TRANSPARENT' in params ? params['TRANSPARENT'] : true;\n\n    super({\n      attributions: options.attributions,\n      cacheSize: options.cacheSize,\n      crossOrigin: options.crossOrigin,\n      opaque: !transparent,\n      projection: options.projection,\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      tileClass: options.tileClass,\n      tileGrid: options.tileGrid,\n      tileLoadFunction: options.tileLoadFunction,\n      tileUrlFunction: tileUrlFunction,\n      url: options.url,\n      urls: options.urls,\n      wrapX: options.wrapX !== undefined ? options.wrapX : true,\n      transition: options.transition\n    });\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.gutter_ = options.gutter !== undefined ? options.gutter : 0;\n\n    /**\n     * @private\n     * @type {!Object}\n     */\n    this.params_ = params;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.v13_ = true;\n\n    /**\n     * @private\n     * @type {import(\"./WMSServerType.js\").default|undefined}\n     */\n    this.serverType_ = /** @type {import(\"./WMSServerType.js\").default|undefined} */ (options.serverType);\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.hidpi_ = options.hidpi !== undefined ? options.hidpi : true;\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.tmpExtent_ = createEmpty();\n\n    this.updateV13_();\n    this.setKey(this.getKeyForParams_());\n\n  }\n\n  /**\n   * Return the GetFeatureInfo URL for the passed coordinate, resolution, and\n   * projection. Return `undefined` if the GetFeatureInfo URL cannot be\n   * constructed.\n   * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n   * @param {number} resolution Resolution.\n   * @param {import(\"../proj.js\").ProjectionLike} projection Projection.\n   * @param {!Object} params GetFeatureInfo params. `INFO_FORMAT` at least should\n   *     be provided. If `QUERY_LAYERS` is not provided then the layers specified\n   *     in the `LAYERS` parameter will be used. `VERSION` should not be\n   *     specified here.\n   * @return {string|undefined} GetFeatureInfo URL.\n   * @api\n   */\n  getGetFeatureInfoUrl(coordinate, resolution, projection, params) {\n    const projectionObj = getProjection(projection);\n    const sourceProjectionObj = this.getProjection();\n\n    let tileGrid = this.getTileGrid();\n    if (!tileGrid) {\n      tileGrid = this.getTileGridForProjection(projectionObj);\n    }\n\n    const tileCoord = tileGrid.getTileCoordForCoordAndResolution(coordinate, resolution);\n\n    if (tileGrid.getResolutions().length <= tileCoord[0]) {\n      return undefined;\n    }\n\n    let tileResolution = tileGrid.getResolution(tileCoord[0]);\n    let tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent_);\n    let tileSize = toSize(tileGrid.getTileSize(tileCoord[0]), this.tmpSize);\n\n\n    const gutter = this.gutter_;\n    if (gutter !== 0) {\n      tileSize = bufferSize(tileSize, gutter, this.tmpSize);\n      tileExtent = buffer(tileExtent, tileResolution * gutter, tileExtent);\n    }\n\n    if (sourceProjectionObj && sourceProjectionObj !== projectionObj) {\n      tileResolution = calculateSourceResolution(sourceProjectionObj, projectionObj, coordinate, tileResolution);\n      tileExtent = transformExtent(tileExtent, projectionObj, sourceProjectionObj);\n      coordinate = transform(coordinate, projectionObj, sourceProjectionObj);\n    }\n\n    const baseParams = {\n      'SERVICE': 'WMS',\n      'VERSION': DEFAULT_WMS_VERSION,\n      'REQUEST': 'GetFeatureInfo',\n      'FORMAT': 'image/png',\n      'TRANSPARENT': true,\n      'QUERY_LAYERS': this.params_['LAYERS']\n    };\n    assign(baseParams, this.params_, params);\n\n    const x = Math.floor((coordinate[0] - tileExtent[0]) / tileResolution);\n    const y = Math.floor((tileExtent[3] - coordinate[1]) / tileResolution);\n\n    baseParams[this.v13_ ? 'I' : 'X'] = x;\n    baseParams[this.v13_ ? 'J' : 'Y'] = y;\n\n    return this.getRequestUrl_(tileCoord, tileSize, tileExtent,\n      1, sourceProjectionObj || projectionObj, baseParams);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getGutter() {\n    return this.gutter_;\n  }\n\n  /**\n   * Get the user-provided params, i.e. those passed to the constructor through\n   * the \"params\" option, and possibly updated using the updateParams method.\n   * @return {Object} Params.\n   * @api\n   */\n  getParams() {\n    return this.params_;\n  }\n\n  /**\n   * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n   * @param {import(\"../size.js\").Size} tileSize Tile size.\n   * @param {import(\"../extent.js\").Extent} tileExtent Tile extent.\n   * @param {number} pixelRatio Pixel ratio.\n   * @param {import(\"../proj/Projection.js\").default} projection Projection.\n   * @param {Object} params Params.\n   * @return {string|undefined} Request URL.\n   * @private\n   */\n  getRequestUrl_(tileCoord, tileSize, tileExtent, pixelRatio, projection, params) {\n\n    const urls = this.urls;\n    if (!urls) {\n      return undefined;\n    }\n\n    params['WIDTH'] = tileSize[0];\n    params['HEIGHT'] = tileSize[1];\n\n    params[this.v13_ ? 'CRS' : 'SRS'] = projection.getCode();\n\n    if (!('STYLES' in this.params_)) {\n      params['STYLES'] = '';\n    }\n\n    if (pixelRatio != 1) {\n      switch (this.serverType_) {\n        case WMSServerType.GEOSERVER:\n          const dpi = (90 * pixelRatio + 0.5) | 0;\n          if ('FORMAT_OPTIONS' in params) {\n            params['FORMAT_OPTIONS'] += ';dpi:' + dpi;\n          } else {\n            params['FORMAT_OPTIONS'] = 'dpi:' + dpi;\n          }\n          break;\n        case WMSServerType.MAPSERVER:\n          params['MAP_RESOLUTION'] = 90 * pixelRatio;\n          break;\n        case WMSServerType.CARMENTA_SERVER:\n        case WMSServerType.QGIS:\n          params['DPI'] = 90 * pixelRatio;\n          break;\n        default:\n          assert(false, 52); // Unknown `serverType` configured\n          break;\n      }\n    }\n\n    const axisOrientation = projection.getAxisOrientation();\n    const bbox = tileExtent;\n    if (this.v13_ && axisOrientation.substr(0, 2) == 'ne') {\n      let tmp;\n      tmp = tileExtent[0];\n      bbox[0] = tileExtent[1];\n      bbox[1] = tmp;\n      tmp = tileExtent[2];\n      bbox[2] = tileExtent[3];\n      bbox[3] = tmp;\n    }\n    params['BBOX'] = bbox.join(',');\n\n    let url;\n    if (urls.length == 1) {\n      url = urls[0];\n    } else {\n      const index = modulo(tileCoordHash(tileCoord), urls.length);\n      url = urls[index];\n    }\n    return appendParams(url, params);\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getTilePixelRatio(pixelRatio) {\n    return (!this.hidpi_ || this.serverType_ === undefined) ? 1 :\n    /** @type {number} */ (pixelRatio);\n  }\n\n  /**\n   * @private\n   * @return {string} The key for the current params.\n   */\n  getKeyForParams_() {\n    let i = 0;\n    const res = [];\n    for (const key in this.params_) {\n      res[i++] = key + '-' + this.params_[key];\n    }\n    return res.join('/');\n  }\n\n  /**\n   * Update the user-provided params.\n   * @param {Object} params Params.\n   * @api\n   */\n  updateParams(params) {\n    assign(this.params_, params);\n    this.updateV13_();\n    this.setKey(this.getKeyForParams_());\n  }\n\n  /**\n   * @private\n   */\n  updateV13_() {\n    const version = this.params_['VERSION'] || DEFAULT_WMS_VERSION;\n    this.v13_ = compareVersions(version, '1.3') >= 0;\n  }\n}\n\n/**\n * @param {import(\"../tilecoord.js\").TileCoord} tileCoord The tile coordinate\n * @param {number} pixelRatio The pixel ratio\n * @param {import(\"../proj/Projection.js\").default} projection The projection\n * @return {string|undefined} The tile URL\n * @this {TileWMS}\n */\nfunction tileUrlFunction(tileCoord, pixelRatio, projection) {\n\n  let tileGrid = this.getTileGrid();\n  if (!tileGrid) {\n    tileGrid = this.getTileGridForProjection(projection);\n  }\n\n  if (tileGrid.getResolutions().length <= tileCoord[0]) {\n    return undefined;\n  }\n\n  if (pixelRatio != 1 && (!this.hidpi_ || this.serverType_ === undefined)) {\n    pixelRatio = 1;\n  }\n\n  const tileResolution = tileGrid.getResolution(tileCoord[0]);\n  let tileExtent = tileGrid.getTileCoordExtent(tileCoord, this.tmpExtent_);\n  let tileSize = toSize(\n    tileGrid.getTileSize(tileCoord[0]), this.tmpSize);\n\n  const gutter = this.gutter_;\n  if (gutter !== 0) {\n    tileSize = bufferSize(tileSize, gutter, this.tmpSize);\n    tileExtent = buffer(tileExtent, tileResolution * gutter, tileExtent);\n  }\n\n  if (pixelRatio != 1) {\n    tileSize = scaleSize(tileSize, pixelRatio, this.tmpSize);\n  }\n\n  const baseParams = {\n    'SERVICE': 'WMS',\n    'VERSION': DEFAULT_WMS_VERSION,\n    'REQUEST': 'GetMap',\n    'FORMAT': 'image/png',\n    'TRANSPARENT': true\n  };\n  assign(baseParams, this.params_);\n\n  return this.getRequestUrl_(tileCoord, tileSize, tileExtent,\n    pixelRatio, projection, baseParams);\n}\n\n\nexport default TileWMS;\n","/**\n * @module ol/structs/LRUCache\n */\n\nimport {assert} from '../asserts.js';\nimport EventTarget from '../events/Target.js';\nimport EventType from '../events/EventType.js';\n\n\n/**\n * @typedef {Object} Entry\n * @property {string} key_\n * @property {Object} newer\n * @property {Object} older\n * @property {*} value_\n */\n\n\n/**\n * @classdesc\n * Implements a Least-Recently-Used cache where the keys do not conflict with\n * Object's properties (e.g. 'hasOwnProperty' is not allowed as a key). Expiring\n * items from the cache is the responsibility of the user.\n *\n * @fires import(\"../events/Event.js\").Event\n * @template T\n */\nclass LRUCache extends EventTarget {\n\n  /**\n   * @param {number=} opt_highWaterMark High water mark.\n   */\n  constructor(opt_highWaterMark) {\n\n    super();\n\n    /**\n     * @type {number}\n     */\n    this.highWaterMark = opt_highWaterMark !== undefined ? opt_highWaterMark : 2048;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.count_ = 0;\n\n    /**\n     * @private\n     * @type {!Object<string, Entry>}\n     */\n    this.entries_ = {};\n\n    /**\n     * @private\n     * @type {?Entry}\n     */\n    this.oldest_ = null;\n\n    /**\n     * @private\n     * @type {?Entry}\n     */\n    this.newest_ = null;\n\n  }\n\n\n  /**\n   * @return {boolean} Can expire cache.\n   */\n  canExpireCache() {\n    return this.getCount() > this.highWaterMark;\n  }\n\n\n  /**\n   * FIXME empty description for jsdoc\n   */\n  clear() {\n    this.count_ = 0;\n    this.entries_ = {};\n    this.oldest_ = null;\n    this.newest_ = null;\n    this.dispatchEvent(EventType.CLEAR);\n  }\n\n\n  /**\n   * @param {string} key Key.\n   * @return {boolean} Contains key.\n   */\n  containsKey(key) {\n    return this.entries_.hasOwnProperty(key);\n  }\n\n\n  /**\n   * @param {function(this: S, T, string, LRUCache): ?} f The function\n   *     to call for every entry from the oldest to the newer. This function takes\n   *     3 arguments (the entry value, the entry key and the LRUCache object).\n   *     The return value is ignored.\n   * @param {S=} opt_this The object to use as `this` in `f`.\n   * @template S\n   */\n  forEach(f, opt_this) {\n    let entry = this.oldest_;\n    while (entry) {\n      f.call(opt_this, entry.value_, entry.key_, this);\n      entry = entry.newer;\n    }\n  }\n\n\n  /**\n   * @param {string} key Key.\n   * @return {T} Value.\n   */\n  get(key) {\n    const entry = this.entries_[key];\n    assert(entry !== undefined,\n      15); // Tried to get a value for a key that does not exist in the cache\n    if (entry === this.newest_) {\n      return entry.value_;\n    } else if (entry === this.oldest_) {\n      this.oldest_ = /** @type {Entry} */ (this.oldest_.newer);\n      this.oldest_.older = null;\n    } else {\n      entry.newer.older = entry.older;\n      entry.older.newer = entry.newer;\n    }\n    entry.newer = null;\n    entry.older = this.newest_;\n    this.newest_.newer = entry;\n    this.newest_ = entry;\n    return entry.value_;\n  }\n\n\n  /**\n   * Remove an entry from the cache.\n   * @param {string} key The entry key.\n   * @return {T} The removed entry.\n   */\n  remove(key) {\n    const entry = this.entries_[key];\n    assert(entry !== undefined, 15); // Tried to get a value for a key that does not exist in the cache\n    if (entry === this.newest_) {\n      this.newest_ = /** @type {Entry} */ (entry.older);\n      if (this.newest_) {\n        this.newest_.newer = null;\n      }\n    } else if (entry === this.oldest_) {\n      this.oldest_ = /** @type {Entry} */ (entry.newer);\n      if (this.oldest_) {\n        this.oldest_.older = null;\n      }\n    } else {\n      entry.newer.older = entry.older;\n      entry.older.newer = entry.newer;\n    }\n    delete this.entries_[key];\n    --this.count_;\n    return entry.value_;\n  }\n\n\n  /**\n   * @return {number} Count.\n   */\n  getCount() {\n    return this.count_;\n  }\n\n\n  /**\n   * @return {Array<string>} Keys.\n   */\n  getKeys() {\n    const keys = new Array(this.count_);\n    let i = 0;\n    let entry;\n    for (entry = this.newest_; entry; entry = entry.older) {\n      keys[i++] = entry.key_;\n    }\n    return keys;\n  }\n\n\n  /**\n   * @return {Array<T>} Values.\n   */\n  getValues() {\n    const values = new Array(this.count_);\n    let i = 0;\n    let entry;\n    for (entry = this.newest_; entry; entry = entry.older) {\n      values[i++] = entry.value_;\n    }\n    return values;\n  }\n\n\n  /**\n   * @return {T} Last value.\n   */\n  peekLast() {\n    return this.oldest_.value_;\n  }\n\n\n  /**\n   * @return {string} Last key.\n   */\n  peekLastKey() {\n    return this.oldest_.key_;\n  }\n\n\n  /**\n   * Get the key of the newest item in the cache.  Throws if the cache is empty.\n   * @return {string} The newest key.\n   */\n  peekFirstKey() {\n    return this.newest_.key_;\n  }\n\n\n  /**\n   * @return {T} value Value.\n   */\n  pop() {\n    const entry = this.oldest_;\n    delete this.entries_[entry.key_];\n    if (entry.newer) {\n      entry.newer.older = null;\n    }\n    this.oldest_ = /** @type {Entry} */ (entry.newer);\n    if (!this.oldest_) {\n      this.newest_ = null;\n    }\n    --this.count_;\n    return entry.value_;\n  }\n\n\n  /**\n   * @param {string} key Key.\n   * @param {T} value Value.\n   */\n  replace(key, value) {\n    this.get(key); // update `newest_`\n    this.entries_[key].value_ = value;\n  }\n\n\n  /**\n   * @param {string} key Key.\n   * @param {T} value Value.\n   */\n  set(key, value) {\n    assert(!(key in this.entries_),\n      16); // Tried to set a value for a key that is used already\n    const entry = /** @type {Entry} */ ({\n      key_: key,\n      newer: null,\n      older: this.newest_,\n      value_: value\n    });\n    if (!this.newest_) {\n      this.oldest_ = entry;\n    } else {\n      this.newest_.newer = entry;\n    }\n    this.newest_ = entry;\n    this.entries_[key] = entry;\n    ++this.count_;\n  }\n\n\n  /**\n   * Set a maximum number of entries for the cache.\n   * @param {number} size Cache size.\n   * @api\n   */\n  setSize(size) {\n    this.highWaterMark = size;\n  }\n\n\n  /**\n   * Prune the cache.\n   */\n  prune() {\n    while (this.canExpireCache()) {\n      this.pop();\n    }\n  }\n\n}\n\nexport default LRUCache;\n","/**\n * @module ol/source/ImageStatic\n */\n\nimport ImageWrapper from '../Image.js';\nimport ImageState from '../ImageState.js';\nimport {createCanvasContext2D} from '../dom.js';\nimport {listen} from '../events.js';\nimport EventType from '../events/EventType.js';\nimport {intersects, getHeight, getWidth} from '../extent.js';\nimport {get as getProjection} from '../proj.js';\nimport ImageSource, {defaultImageLoadFunction} from './Image.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you are using the WebGL renderer or if you want to\n * access pixel data with the Canvas renderer.  See\n * https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {import(\"../extent.js\").Extent} [imageExtent] Extent of the image in map coordinates.\n * This is the [left, bottom, right, top] map coordinates of your image.\n * @property {import(\"../Image.js\").LoadFunction} [imageLoadFunction] Optional function to load an image given a URL.\n * @property {import(\"../proj.js\").ProjectionLike} projection Projection.\n * @property {import(\"../size.js\").Size} [imageSize] Size of the image in pixels. Usually the image size is auto-detected, so this\n * only needs to be set if auto-detection fails for some reason.\n * @property {string} url Image URL.\n */\n\n\n/**\n * @classdesc\n * A layer source for displaying a single, static image.\n * @api\n */\nclass Static extends ImageSource {\n  /**\n   * @param {Options} options ImageStatic options.\n   */\n  constructor(options) {\n    const crossOrigin = options.crossOrigin !== undefined ?\n      options.crossOrigin : null;\n\n    const /** @type {import(\"../Image.js\").LoadFunction} */ imageLoadFunction =\n        options.imageLoadFunction !== undefined ?\n          options.imageLoadFunction : defaultImageLoadFunction;\n\n    super({\n      attributions: options.attributions,\n      projection: getProjection(options.projection)\n    });\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.url_ = options.url;\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.imageExtent_ = options.imageExtent;\n\n    /**\n     * @private\n     * @type {import(\"../Image.js\").default}\n     */\n    this.image_ = new ImageWrapper(this.imageExtent_, undefined, 1, this.url_, crossOrigin, imageLoadFunction);\n\n    /**\n     * @private\n     * @type {import(\"../size.js\").Size}\n     */\n    this.imageSize_ = options.imageSize ? options.imageSize : null;\n\n    listen(this.image_, EventType.CHANGE,\n      this.handleImageChange, this);\n\n  }\n\n  /**\n   * Returns the image extent\n   * @return {import(\"../extent.js\").Extent} image extent.\n   * @api\n   */\n  getImageExtent() {\n    return this.imageExtent_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getImageInternal(extent, resolution, pixelRatio, projection) {\n    if (intersects(extent, this.image_.getExtent())) {\n      return this.image_;\n    }\n    return null;\n  }\n\n  /**\n   * Return the URL used for this image source.\n   * @return {string} URL.\n   * @api\n   */\n  getUrl() {\n    return this.url_;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  handleImageChange(evt) {\n    if (this.image_.getState() == ImageState.LOADED) {\n      const imageExtent = this.image_.getExtent();\n      const image = this.image_.getImage();\n      let imageWidth, imageHeight;\n      if (this.imageSize_) {\n        imageWidth = this.imageSize_[0];\n        imageHeight = this.imageSize_[1];\n      } else {\n        imageWidth = image.width;\n        imageHeight = image.height;\n      }\n      const resolution = getHeight(imageExtent) / imageHeight;\n      const targetWidth = Math.ceil(getWidth(imageExtent) / resolution);\n      if (targetWidth != imageWidth) {\n        const context = createCanvasContext2D(targetWidth, imageHeight);\n        const canvas = context.canvas;\n        context.drawImage(image, 0, 0, imageWidth, imageHeight,\n          0, 0, canvas.width, canvas.height);\n        this.image_.setImage(canvas);\n      }\n    }\n    super.handleImageChange(evt);\n  }\n}\n\n\nexport default Static;\n","/**\n * @module ol/geom/flat/interiorpoint\n */\nimport {numberSafeCompareFunction} from '../../array.js';\nimport {linearRingsContainsXY} from './contains.js';\n\n\n/**\n * Calculates a point that is likely to lie in the interior of the linear rings.\n * Inspired by JTS's com.vividsolutions.jts.geom.Geometry#getInteriorPoint.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {Array<number>} flatCenters Flat centers.\n * @param {number} flatCentersOffset Flat center offset.\n * @param {Array<number>=} opt_dest Destination.\n * @return {Array<number>} Destination point as XYM coordinate, where M is the\n * length of the horizontal intersection that the point belongs to.\n */\nexport function getInteriorPointOfArray(flatCoordinates, offset,\n  ends, stride, flatCenters, flatCentersOffset, opt_dest) {\n  let i, ii, x, x1, x2, y1, y2;\n  const y = flatCenters[flatCentersOffset + 1];\n  /** @type {Array<number>} */\n  const intersections = [];\n  // Calculate intersections with the horizontal line\n  for (let r = 0, rr = ends.length; r < rr; ++r) {\n    const end = ends[r];\n    x1 = flatCoordinates[end - stride];\n    y1 = flatCoordinates[end - stride + 1];\n    for (i = offset; i < end; i += stride) {\n      x2 = flatCoordinates[i];\n      y2 = flatCoordinates[i + 1];\n      if ((y <= y1 && y2 <= y) || (y1 <= y && y <= y2)) {\n        x = (y - y1) / (y2 - y1) * (x2 - x1) + x1;\n        intersections.push(x);\n      }\n      x1 = x2;\n      y1 = y2;\n    }\n  }\n  // Find the longest segment of the horizontal line that has its center point\n  // inside the linear ring.\n  let pointX = NaN;\n  let maxSegmentLength = -Infinity;\n  intersections.sort(numberSafeCompareFunction);\n  x1 = intersections[0];\n  for (i = 1, ii = intersections.length; i < ii; ++i) {\n    x2 = intersections[i];\n    const segmentLength = Math.abs(x2 - x1);\n    if (segmentLength > maxSegmentLength) {\n      x = (x1 + x2) / 2;\n      if (linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y)) {\n        pointX = x;\n        maxSegmentLength = segmentLength;\n      }\n    }\n    x1 = x2;\n  }\n  if (isNaN(pointX)) {\n    // There is no horizontal line that has its center point inside the linear\n    // ring.  Use the center of the the linear ring's extent.\n    pointX = flatCenters[flatCentersOffset];\n  }\n  if (opt_dest) {\n    opt_dest.push(pointX, y, maxSegmentLength);\n    return opt_dest;\n  } else {\n    return [pointX, y, maxSegmentLength];\n  }\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {Array<number>} flatCenters Flat centers.\n * @return {Array<number>} Interior points as XYM coordinates, where M is the\n * length of the horizontal intersection that the point belongs to.\n */\nexport function getInteriorPointsOfMultiArray(flatCoordinates, offset, endss, stride, flatCenters) {\n  let interiorPoints = [];\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    interiorPoints = getInteriorPointOfArray(flatCoordinates,\n      offset, ends, stride, flatCenters, 2 * i, interiorPoints);\n    offset = ends[ends.length - 1];\n  }\n  return interiorPoints;\n}\n","/**\n * @module ol/geom/flat/segments\n */\n\n\n/**\n * This function calls `callback` for each segment of the flat coordinates\n * array. If the callback returns a truthy value the function returns that\n * value immediately. Otherwise the function returns `false`.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {function(this: S, import(\"../../coordinate.js\").Coordinate, import(\"../../coordinate.js\").Coordinate): T} callback Function\n *     called for each segment.\n * @param {S=} opt_this The object to be used as the value of 'this'\n *     within callback.\n * @return {T|boolean} Value.\n * @template T,S\n */\nexport function forEach(flatCoordinates, offset, end, stride, callback, opt_this) {\n  const point1 = [flatCoordinates[offset], flatCoordinates[offset + 1]];\n  const point2 = [];\n  let ret;\n  for (; (offset + stride) < end; offset += stride) {\n    point2[0] = flatCoordinates[offset + stride];\n    point2[1] = flatCoordinates[offset + stride + 1];\n    ret = callback.call(opt_this, point1, point2);\n    if (ret) {\n      return ret;\n    }\n    point1[0] = point2[0];\n    point1[1] = point2[1];\n  }\n  return false;\n}\n","/**\n * @module ol/style/Image\n */\nimport {abstract} from '../util.js';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} opacity\n * @property {boolean} rotateWithView\n * @property {number} rotation\n * @property {number} scale\n */\n\n\n/**\n * @classdesc\n * A base class used for creating subclasses and not instantiated in\n * apps. Base class for {@link module:ol/style/Icon~Icon}, {@link module:ol/style/Circle~CircleStyle} and\n * {@link module:ol/style/RegularShape~RegularShape}.\n * @abstract\n * @api\n */\nclass ImageStyle {\n  /**\n   * @param {Options} options Options.\n   */\n  constructor(options) {\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.opacity_ = options.opacity;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.rotateWithView_ = options.rotateWithView;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.rotation_ = options.rotation;\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.scale_ = options.scale;\n\n  }\n\n  /**\n   * Clones the style.\n   * @return {ImageStyle} The cloned style.\n   * @api\n   */\n  clone() {\n    return new ImageStyle({\n      opacity: this.getOpacity(),\n      scale: this.getScale(),\n      rotation: this.getRotation(),\n      rotateWithView: this.getRotateWithView()\n    });\n  }\n\n  /**\n   * Get the symbolizer opacity.\n   * @return {number} Opacity.\n   * @api\n   */\n  getOpacity() {\n    return this.opacity_;\n  }\n\n  /**\n   * Determine whether the symbolizer rotates with the map.\n   * @return {boolean} Rotate with map.\n   * @api\n   */\n  getRotateWithView() {\n    return this.rotateWithView_;\n  }\n\n  /**\n   * Get the symoblizer rotation.\n   * @return {number} Rotation.\n   * @api\n   */\n  getRotation() {\n    return this.rotation_;\n  }\n\n  /**\n   * Get the symbolizer scale.\n   * @return {number} Scale.\n   * @api\n   */\n  getScale() {\n    return this.scale_;\n  }\n\n  /**\n   * This method is deprecated and always returns false.\n   * @return {boolean} false.\n   * @deprecated\n   * @api\n   */\n  getSnapToPixel() {\n    return false;\n  }\n\n  /**\n   * Get the anchor point in pixels. The anchor determines the center point for the\n   * symbolizer.\n   * @abstract\n   * @return {Array<number>} Anchor.\n   */\n  getAnchor() {\n    return abstract();\n  }\n\n  /**\n   * Get the image element for the symbolizer.\n   * @abstract\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Image element.\n   */\n  getImage(pixelRatio) {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @param {number} pixelRatio Pixel ratio.\n   * @return {HTMLCanvasElement|HTMLVideoElement|HTMLImageElement} Image element.\n   */\n  getHitDetectionImage(pixelRatio) {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @return {import(\"../ImageState.js\").default} Image state.\n   */\n  getImageState() {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @return {import(\"../size.js\").Size} Image size.\n   */\n  getImageSize() {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @return {import(\"../size.js\").Size} Size of the hit-detection image.\n   */\n  getHitDetectionImageSize() {\n    return abstract();\n  }\n\n  /**\n   * Get the origin of the symbolizer.\n   * @abstract\n   * @return {Array<number>} Origin.\n   */\n  getOrigin() {\n    return abstract();\n  }\n\n  /**\n   * Get the size of the symbolizer (in pixels).\n   * @abstract\n   * @return {import(\"../size.js\").Size} Size.\n   */\n  getSize() {\n    return abstract();\n  }\n\n  /**\n   * Set the opacity.\n   *\n   * @param {number} opacity Opacity.\n   * @api\n   */\n  setOpacity(opacity) {\n    this.opacity_ = opacity;\n  }\n\n  /**\n   * Set whether to rotate the style with the view.\n   *\n   * @param {boolean} rotateWithView Rotate with map.\n   * @api\n   */\n  setRotateWithView(rotateWithView) {\n    this.rotateWithView_ = rotateWithView;\n  }\n\n  /**\n   * Set the rotation.\n   *\n   * @param {number} rotation Rotation.\n   * @api\n   */\n  setRotation(rotation) {\n    this.rotation_ = rotation;\n  }\n  /**\n   * Set the scale.\n   *\n   * @param {number} scale Scale.\n   * @api\n   */\n  setScale(scale) {\n    this.scale_ = scale;\n  }\n\n  /**\n   * This method is deprecated and does nothing.\n   * @param {boolean} snapToPixel Snap to pixel?\n   * @deprecated\n   * @api\n   */\n  setSnapToPixel(snapToPixel) {}\n\n  /**\n   * @abstract\n   * @param {function(this: T, import(\"../events/Event.js\").default)} listener Listener function.\n   * @param {T} thisArg Value to use as `this` when executing `listener`.\n   * @return {import(\"../events.js\").EventsKey|undefined} Listener key.\n   * @template T\n   */\n  listenImageChange(listener, thisArg) {\n    return abstract();\n  }\n\n  /**\n   * Load not yet loaded URI.\n   * @abstract\n   */\n  load() {\n    abstract();\n  }\n\n  /**\n   * @abstract\n   * @param {function(this: T, import(\"../events/Event.js\").default)} listener Listener function.\n   * @param {T} thisArg Value to use as `this` when executing `listener`.\n   * @template T\n   */\n  unlistenImageChange(listener, thisArg) {\n    abstract();\n  }\n}\n\nexport default ImageStyle;\n","/**\n * @module ol/layer/VectorRenderType\n */\n\n/**\n * @enum {string}\n * Render mode for vector layers:\n *  * `'image'`: Vector layers are rendered as images. Great performance, but\n *    point symbols and texts are always rotated with the view and pixels are\n *    scaled during zoom animations.\n *  * `'vector'`: Vector layers are rendered as vectors. Most accurate rendering\n *    even during animations, but slower performance.\n * @api\n */\nexport default {\n  IMAGE: 'image',\n  VECTOR: 'vector'\n};\n","/**\n * @module ol/geom/flat/length\n */\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Length.\n */\nexport function lineStringLength(flatCoordinates, offset, end, stride) {\n  let x1 = flatCoordinates[offset];\n  let y1 = flatCoordinates[offset + 1];\n  let length = 0;\n  for (let i = offset + stride; i < end; i += stride) {\n    const x2 = flatCoordinates[i];\n    const y2 = flatCoordinates[i + 1];\n    length += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n    x1 = x2;\n    y1 = y2;\n  }\n  return length;\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {number} Perimeter.\n */\nexport function linearRingLength(flatCoordinates, offset, end, stride) {\n  let perimeter = lineStringLength(flatCoordinates, offset, end, stride);\n  const dx = flatCoordinates[end - stride] - flatCoordinates[offset];\n  const dy = flatCoordinates[end - stride + 1] - flatCoordinates[offset + 1];\n  perimeter += Math.sqrt(dx * dx + dy * dy);\n  return perimeter;\n}\n","/**\n * @module ol/style/TextPlacement\n */\n\n/**\n * Text placement. One of `'point'`, `'line'`. Default is `'point'`. Note that\n * `'line'` requires the underlying geometry to be a {@link module:ol/geom/LineString~LineString},\n * {@link module:ol/geom/Polygon~Polygon}, {@link module:ol/geom/MultiLineString~MultiLineString} or\n * {@link module:ol/geom/MultiPolygon~MultiPolygon}.\n * @enum {string}\n */\nexport default {\n  POINT: 'point',\n  LINE: 'line'\n};\n","/**\n * @module ol/net\n */\nimport {getUid} from './util.js';\n\n\n/**\n * Simple JSONP helper. Supports error callbacks and a custom callback param.\n * The error callback will be called when no JSONP is executed after 10 seconds.\n *\n * @param {string} url Request url. A 'callback' query parameter will be\n *     appended.\n * @param {Function} callback Callback on success.\n * @param {function()=} opt_errback Callback on error.\n * @param {string=} opt_callbackParam Custom query parameter for the JSONP\n *     callback. Default is 'callback'.\n */\nexport function jsonp(url, callback, opt_errback, opt_callbackParam) {\n  const script = document.createElement('script');\n  const key = 'olc_' + getUid(callback);\n  function cleanup() {\n    delete window[key];\n    script.parentNode.removeChild(script);\n  }\n  script.async = true;\n  script.src = url + (url.indexOf('?') == -1 ? '?' : '&') +\n      (opt_callbackParam || 'callback') + '=' + key;\n  const timer = setTimeout(function() {\n    cleanup();\n    if (opt_errback) {\n      opt_errback();\n    }\n  }, 10000);\n  window[key] = function(data) {\n    clearTimeout(timer);\n    cleanup();\n    callback(data);\n  };\n  document.getElementsByTagName('head')[0].appendChild(script);\n}\n","/**\n * @module ol/source/XYZ\n */\n\nimport TileImage from './TileImage.js';\nimport {createXYZ, extentFromProjection} from '../tilegrid.js';\n\n/**\n * @typedef {Object} Options\n * @property {import(\"./Source.js\").AttributionLike} [attributions] Attributions.\n * @property {boolean} [attributionsCollapsible=true] Attributions are collapsible.\n * @property {number} [cacheSize=2048] Cache size.\n * @property {null|string} [crossOrigin] The `crossOrigin` attribute for loaded images.  Note that\n * you must provide a `crossOrigin` value if you are using the WebGL renderer or if you want to\n * access pixel data with the Canvas renderer.  See\n * https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image for more detail.\n * @property {boolean} [opaque=true] Whether the layer is opaque.\n * @property {import(\"../proj.js\").ProjectionLike} [projection='EPSG:3857'] Projection.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {number} [maxZoom=18] Optional max zoom level.\n * @property {number} [minZoom=0] Optional min zoom level.\n * @property {import(\"../tilegrid/TileGrid.js\").default} [tileGrid] Tile grid.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {number} [tilePixelRatio=1] The pixel ratio used by the tile service.\n * For example, if the tile service advertizes 256px by 256px tiles but actually sends 512px\n * by 512px images (for retina/hidpi devices) then `tilePixelRatio`\n * should be set to `2`.\n * @property {number|import(\"../size.js\").Size} [tileSize=[256, 256]] The tile size used by the tile service.\n * @property {import(\"../Tile.js\").UrlFunction} [tileUrlFunction] Optional function to get\n * tile URL given a tile coordinate and the projection.\n * Required if url or urls are not provided.\n * @property {string} [url] URL template. Must include `{x}`, `{y}` or `{-y}`,\n * and `{z}` placeholders. A `{?-?}` template pattern, for example `subdomain{a-f}.domain.com`,\n * may be used instead of defining each one separately in the `urls` option.\n * @property {Array<string>} [urls] An array of URL templates.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n */\n\n\n/**\n * @classdesc\n * Layer source for tile data with URLs in a set XYZ format that are\n * defined in a URL template. By default, this follows the widely-used\n * Google grid where `x` 0 and `y` 0 are in the top left. Grids like\n * TMS where `x` 0 and `y` 0 are in the bottom left can be used by\n * using the `{-y}` placeholder in the URL template, so long as the\n * source does not have a custom tile grid. In this case,\n * {@link module:ol/source/TileImage} can be used with a `tileUrlFunction`\n * such as:\n *\n *  tileUrlFunction: function(coordinate) {\n *    return 'http://mapserver.com/' + coordinate[0] + '/' +\n *        coordinate[1] + '/' + coordinate[2] + '.png';\n *    }\n *\n * @api\n */\nclass XYZ extends TileImage {\n  /**\n   * @param {Options=} opt_options XYZ options.\n   */\n  constructor(opt_options) {\n    const options = opt_options || {};\n    const projection = options.projection !== undefined ?\n      options.projection : 'EPSG:3857';\n\n    const tileGrid = options.tileGrid !== undefined ? options.tileGrid :\n      createXYZ({\n        extent: extentFromProjection(projection),\n        maxZoom: options.maxZoom,\n        minZoom: options.minZoom,\n        tileSize: options.tileSize\n      });\n\n    super({\n      attributions: options.attributions,\n      cacheSize: options.cacheSize,\n      crossOrigin: options.crossOrigin,\n      opaque: options.opaque,\n      projection: projection,\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      tileGrid: tileGrid,\n      tileLoadFunction: options.tileLoadFunction,\n      tilePixelRatio: options.tilePixelRatio,\n      tileUrlFunction: options.tileUrlFunction,\n      url: options.url,\n      urls: options.urls,\n      wrapX: options.wrapX !== undefined ? options.wrapX : true,\n      transition: options.transition,\n      attributionsCollapsible: options.attributionsCollapsible\n    });\n\n  }\n\n}\n\nexport default XYZ;\n","/**\n * @module ol/format/JSONFeature\n */\nimport {abstract} from '../util.js';\nimport FeatureFormat from './Feature.js';\nimport FormatType from './FormatType.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for JSON feature formats.\n *\n * @abstract\n */\nclass JSONFeature extends FeatureFormat {\n  constructor() {\n    super();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getType() {\n    return FormatType.JSON;\n  }\n\n  /**\n   * Read a feature.  Only works for a single feature. Use `readFeatures` to\n   * read a feature collection.\n   *\n   * @param {ArrayBuffer|Document|Node|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @return {import(\"../Feature.js\").default} Feature.\n   * @api\n   */\n  readFeature(source, opt_options) {\n    return this.readFeatureFromObject(\n      getObject(source), this.getReadOptions(source, opt_options));\n  }\n\n  /**\n   * Read all features.  Works with both a single feature and a feature\n   * collection.\n   *\n   * @param {ArrayBuffer|Document|Node|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   * @api\n   */\n  readFeatures(source, opt_options) {\n    return this.readFeaturesFromObject(\n      getObject(source), this.getReadOptions(source, opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {Object} object Object.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @protected\n   * @return {import(\"../Feature.js\").default} Feature.\n   */\n  readFeatureFromObject(object, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * @abstract\n   * @param {Object} object Object.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @protected\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   */\n  readFeaturesFromObject(object, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Read a geometry.\n   *\n   * @param {ArrayBuffer|Document|Node|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   * @api\n   */\n  readGeometry(source, opt_options) {\n    return this.readGeometryFromObject(\n      getObject(source), this.getReadOptions(source, opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {Object} object Object.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @protected\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   */\n  readGeometryFromObject(object, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Read the projection.\n   *\n   * @param {ArrayBuffer|Document|Node|Object|string} source Source.\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   * @api\n   */\n  readProjection(source) {\n    return this.readProjectionFromObject(getObject(source));\n  }\n\n  /**\n   * @abstract\n   * @param {Object} object Object.\n   * @protected\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   */\n  readProjectionFromObject(object) {\n    return abstract();\n  }\n\n  /**\n   * Encode a feature as string.\n   *\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {string} Encoded feature.\n   * @api\n   */\n  writeFeature(feature, opt_options) {\n    return JSON.stringify(this.writeFeatureObject(feature, opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {Object} Object.\n   */\n  writeFeatureObject(feature, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Encode an array of features as string.\n   *\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {string} Encoded features.\n   * @api\n   */\n  writeFeatures(features, opt_options) {\n    return JSON.stringify(this.writeFeaturesObject(features, opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {Object} Object.\n   */\n  writeFeaturesObject(features, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Encode a geometry as string.\n   *\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {string} Encoded geometry.\n   * @api\n   */\n  writeGeometry(geometry, opt_options) {\n    return JSON.stringify(this.writeGeometryObject(geometry, opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {Object} Object.\n   */\n  writeGeometryObject(geometry, opt_options) {\n    return abstract();\n  }\n}\n\n\n/**\n * @param {Document|Node|Object|string} source Source.\n * @return {Object} Object.\n */\nfunction getObject(source) {\n  if (typeof source === 'string') {\n    const object = JSON.parse(source);\n    return object ? /** @type {Object} */ (object) : null;\n  } else if (source !== null) {\n    return source;\n  } else {\n    return null;\n  }\n}\n\n\nexport default JSONFeature;\n","/**\n * @module ol/format/XMLFeature\n */\nimport {abstract} from '../util.js';\nimport {extend} from '../array.js';\nimport FeatureFormat from '../format/Feature.js';\nimport FormatType from '../format/FormatType.js';\nimport {isDocument, parse} from '../xml.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for XML feature formats.\n *\n * @abstract\n */\nclass XMLFeature extends FeatureFormat {\n  constructor() {\n    super();\n\n    /**\n     * @type {XMLSerializer}\n     * @private\n     */\n    this.xmlSerializer_ = new XMLSerializer();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getType() {\n    return FormatType.XML;\n  }\n\n  /**\n   * Read a single feature.\n   *\n   * @param {Document|Node|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @return {import(\"../Feature.js\").default} Feature.\n   * @api\n   */\n  readFeature(source, opt_options) {\n    if (!source) {\n      return null;\n    } else if (typeof source === 'string') {\n      const doc = parse(source);\n      return this.readFeatureFromDocument(doc, opt_options);\n    } else if (isDocument(source)) {\n      return this.readFeatureFromDocument(/** @type {Document} */ (source), opt_options);\n    } else {\n      return this.readFeatureFromNode(/** @type {Node} */ (source), opt_options);\n    }\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Options.\n   * @return {import(\"../Feature.js\").default} Feature.\n   */\n  readFeatureFromDocument(doc, opt_options) {\n    const features = this.readFeaturesFromDocument(doc, opt_options);\n    if (features.length > 0) {\n      return features[0];\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Options.\n   * @return {import(\"../Feature.js\").default} Feature.\n   */\n  readFeatureFromNode(node, opt_options) {\n    return null; // not implemented\n  }\n\n  /**\n   * Read all features from a feature collection.\n   *\n   * @param {Document|Node|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Options.\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   * @api\n   */\n  readFeatures(source, opt_options) {\n    if (!source) {\n      return [];\n    } else if (typeof source === 'string') {\n      const doc = parse(source);\n      return this.readFeaturesFromDocument(doc, opt_options);\n    } else if (isDocument(source)) {\n      return this.readFeaturesFromDocument(\n        /** @type {Document} */ (source), opt_options);\n    } else {\n      return this.readFeaturesFromNode(/** @type {Node} */ (source), opt_options);\n    }\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Options.\n   * @protected\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   */\n  readFeaturesFromDocument(doc, opt_options) {\n    /** @type {Array<import(\"../Feature.js\").default>} */\n    const features = [];\n    for (let n = /** @type {Node} */ (doc.firstChild); n; n = n.nextSibling) {\n      if (n.nodeType == Node.ELEMENT_NODE) {\n        extend(features, this.readFeaturesFromNode(n, opt_options));\n      }\n    }\n    return features;\n  }\n\n  /**\n   * @abstract\n   * @param {Node} node Node.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Options.\n   * @protected\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   */\n  readFeaturesFromNode(node, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readGeometry(source, opt_options) {\n    if (!source) {\n      return null;\n    } else if (typeof source === 'string') {\n      const doc = parse(source);\n      return this.readGeometryFromDocument(doc, opt_options);\n    } else if (isDocument(source)) {\n      return this.readGeometryFromDocument(\n        /** @type {Document} */ (source), opt_options);\n    } else {\n      return this.readGeometryFromNode(/** @type {Node} */ (source), opt_options);\n    }\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Options.\n   * @protected\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   */\n  readGeometryFromDocument(doc, opt_options) {\n    return null; // not implemented\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Options.\n   * @protected\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   */\n  readGeometryFromNode(node, opt_options) {\n    return null; // not implemented\n  }\n\n  /**\n   * Read the projection from the source.\n   *\n   * @param {Document|Node|Object|string} source Source.\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   * @api\n   */\n  readProjection(source) {\n    if (!source) {\n      return null;\n    } else if (typeof source === 'string') {\n      const doc = parse(source);\n      return this.readProjectionFromDocument(doc);\n    } else if (isDocument(source)) {\n      return this.readProjectionFromDocument(/** @type {Document} */ (source));\n    } else {\n      return this.readProjectionFromNode(/** @type {Node} */ (source));\n    }\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @protected\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   */\n  readProjectionFromDocument(doc) {\n    return this.dataProjection;\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @protected\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   */\n  readProjectionFromNode(node) {\n    return this.dataProjection;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  writeFeature(feature, opt_options) {\n    const node = this.writeFeatureNode(feature, opt_options);\n    return this.xmlSerializer_.serializeToString(node);\n  }\n\n  /**\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Options.\n   * @protected\n   * @return {Node} Node.\n   */\n  writeFeatureNode(feature, opt_options) {\n    return null; // not implemented\n  }\n\n  /**\n   * Encode an array of features as string.\n   *\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {string} Result.\n   * @api\n   */\n  writeFeatures(features, opt_options) {\n    const node = this.writeFeaturesNode(features, opt_options);\n    return this.xmlSerializer_.serializeToString(node);\n  }\n\n  /**\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Options.\n   * @return {Node} Node.\n   */\n  writeFeaturesNode(features, opt_options) {\n    return null; // not implemented\n  }\n\n  /**\n   * @inheritDoc\n   */\n  writeGeometry(geometry, opt_options) {\n    const node = this.writeGeometryNode(geometry, opt_options);\n    return this.xmlSerializer_.serializeToString(node);\n  }\n\n  /**\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Options.\n   * @return {Node} Node.\n   */\n  writeGeometryNode(geometry, opt_options) {\n    return null; // not implemented\n  }\n}\n\n\nexport default XMLFeature;\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.proj4 = factory());\n}(this, (function () { 'use strict';\n\n\tvar globals = function(defs) {\n\t  defs('EPSG:4326', \"+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees\");\n\t  defs('EPSG:4269', \"+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees\");\n\t  defs('EPSG:3857', \"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs\");\n\n\t  defs.WGS84 = defs['EPSG:4326'];\n\t  defs['EPSG:3785'] = defs['EPSG:3857']; // maintain backward compat, official code is 3857\n\t  defs.GOOGLE = defs['EPSG:3857'];\n\t  defs['EPSG:900913'] = defs['EPSG:3857'];\n\t  defs['EPSG:102113'] = defs['EPSG:3857'];\n\t};\n\n\tvar PJD_3PARAM = 1;\n\tvar PJD_7PARAM = 2;\n\tvar PJD_WGS84 = 4; // WGS84 or equivalent\n\tvar PJD_NODATUM = 5; // WGS84 or equivalent\n\tvar SEC_TO_RAD = 4.84813681109535993589914102357e-6;\n\tvar HALF_PI = Math.PI/2;\n\t// ellipoid pj_set_ell.c\n\tvar SIXTH = 0.1666666666666666667;\n\t/* 1/6 */\n\tvar RA4 = 0.04722222222222222222;\n\t/* 17/360 */\n\tvar RA6 = 0.02215608465608465608;\n\tvar EPSLN = 1.0e-10;\n\t// you'd think you could use Number.EPSILON above but that makes\n\t// Mollweide get into an infinate loop.\n\n\tvar D2R = 0.01745329251994329577;\n\tvar R2D = 57.29577951308232088;\n\tvar FORTPI = Math.PI/4;\n\tvar TWO_PI = Math.PI * 2;\n\t// SPI is slightly greater than Math.PI, so values that exceed the -180..180\n\t// degree range by a tiny amount don't get wrapped. This prevents points that\n\t// have drifted from their original location along the 180th meridian (due to\n\t// floating point error) from changing their sign.\n\tvar SPI = 3.14159265359;\n\n\tvar exports$1 = {};\n\texports$1.greenwich = 0.0; //\"0dE\",\n\texports$1.lisbon = -9.131906111111; //\"9d07'54.862\\\"W\",\n\texports$1.paris = 2.337229166667; //\"2d20'14.025\\\"E\",\n\texports$1.bogota = -74.080916666667; //\"74d04'51.3\\\"W\",\n\texports$1.madrid = -3.687938888889; //\"3d41'16.58\\\"W\",\n\texports$1.rome = 12.452333333333; //\"12d27'8.4\\\"E\",\n\texports$1.bern = 7.439583333333; //\"7d26'22.5\\\"E\",\n\texports$1.jakarta = 106.807719444444; //\"106d48'27.79\\\"E\",\n\texports$1.ferro = -17.666666666667; //\"17d40'W\",\n\texports$1.brussels = 4.367975; //\"4d22'4.71\\\"E\",\n\texports$1.stockholm = 18.058277777778; //\"18d3'29.8\\\"E\",\n\texports$1.athens = 23.7163375; //\"23d42'58.815\\\"E\",\n\texports$1.oslo = 10.722916666667; //\"10d43'22.5\\\"E\"\n\n\tvar units = {\n\t  ft: {to_meter: 0.3048},\n\t  'us-ft': {to_meter: 1200 / 3937}\n\t};\n\n\tvar ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\n\tfunction match(obj, key) {\n\t  if (obj[key]) {\n\t    return obj[key];\n\t  }\n\t  var keys = Object.keys(obj);\n\t  var lkey = key.toLowerCase().replace(ignoredChar, '');\n\t  var i = -1;\n\t  var testkey, processedKey;\n\t  while (++i < keys.length) {\n\t    testkey = keys[i];\n\t    processedKey = testkey.toLowerCase().replace(ignoredChar, '');\n\t    if (processedKey === lkey) {\n\t      return obj[testkey];\n\t    }\n\t  }\n\t}\n\n\tvar parseProj = function(defData) {\n\t  var self = {};\n\t  var paramObj = defData.split('+').map(function(v) {\n\t    return v.trim();\n\t  }).filter(function(a) {\n\t    return a;\n\t  }).reduce(function(p, a) {\n\t    var split = a.split('=');\n\t    split.push(true);\n\t    p[split[0].toLowerCase()] = split[1];\n\t    return p;\n\t  }, {});\n\t  var paramName, paramVal, paramOutname;\n\t  var params = {\n\t    proj: 'projName',\n\t    datum: 'datumCode',\n\t    rf: function(v) {\n\t      self.rf = parseFloat(v);\n\t    },\n\t    lat_0: function(v) {\n\t      self.lat0 = v * D2R;\n\t    },\n\t    lat_1: function(v) {\n\t      self.lat1 = v * D2R;\n\t    },\n\t    lat_2: function(v) {\n\t      self.lat2 = v * D2R;\n\t    },\n\t    lat_ts: function(v) {\n\t      self.lat_ts = v * D2R;\n\t    },\n\t    lon_0: function(v) {\n\t      self.long0 = v * D2R;\n\t    },\n\t    lon_1: function(v) {\n\t      self.long1 = v * D2R;\n\t    },\n\t    lon_2: function(v) {\n\t      self.long2 = v * D2R;\n\t    },\n\t    alpha: function(v) {\n\t      self.alpha = parseFloat(v) * D2R;\n\t    },\n\t    lonc: function(v) {\n\t      self.longc = v * D2R;\n\t    },\n\t    x_0: function(v) {\n\t      self.x0 = parseFloat(v);\n\t    },\n\t    y_0: function(v) {\n\t      self.y0 = parseFloat(v);\n\t    },\n\t    k_0: function(v) {\n\t      self.k0 = parseFloat(v);\n\t    },\n\t    k: function(v) {\n\t      self.k0 = parseFloat(v);\n\t    },\n\t    a: function(v) {\n\t      self.a = parseFloat(v);\n\t    },\n\t    b: function(v) {\n\t      self.b = parseFloat(v);\n\t    },\n\t    r_a: function() {\n\t      self.R_A = true;\n\t    },\n\t    zone: function(v) {\n\t      self.zone = parseInt(v, 10);\n\t    },\n\t    south: function() {\n\t      self.utmSouth = true;\n\t    },\n\t    towgs84: function(v) {\n\t      self.datum_params = v.split(\",\").map(function(a) {\n\t        return parseFloat(a);\n\t      });\n\t    },\n\t    to_meter: function(v) {\n\t      self.to_meter = parseFloat(v);\n\t    },\n\t    units: function(v) {\n\t      self.units = v;\n\t      var unit = match(units, v);\n\t      if (unit) {\n\t        self.to_meter = unit.to_meter;\n\t      }\n\t    },\n\t    from_greenwich: function(v) {\n\t      self.from_greenwich = v * D2R;\n\t    },\n\t    pm: function(v) {\n\t      var pm = match(exports$1, v);\n\t      self.from_greenwich = (pm ? pm : parseFloat(v)) * D2R;\n\t    },\n\t    nadgrids: function(v) {\n\t      if (v === '@null') {\n\t        self.datumCode = 'none';\n\t      }\n\t      else {\n\t        self.nadgrids = v;\n\t      }\n\t    },\n\t    axis: function(v) {\n\t      var legalAxis = \"ewnsud\";\n\t      if (v.length === 3 && legalAxis.indexOf(v.substr(0, 1)) !== -1 && legalAxis.indexOf(v.substr(1, 1)) !== -1 && legalAxis.indexOf(v.substr(2, 1)) !== -1) {\n\t        self.axis = v;\n\t      }\n\t    }\n\t  };\n\t  for (paramName in paramObj) {\n\t    paramVal = paramObj[paramName];\n\t    if (paramName in params) {\n\t      paramOutname = params[paramName];\n\t      if (typeof paramOutname === 'function') {\n\t        paramOutname(paramVal);\n\t      }\n\t      else {\n\t        self[paramOutname] = paramVal;\n\t      }\n\t    }\n\t    else {\n\t      self[paramName] = paramVal;\n\t    }\n\t  }\n\t  if(typeof self.datumCode === 'string' && self.datumCode !== \"WGS84\"){\n\t    self.datumCode = self.datumCode.toLowerCase();\n\t  }\n\t  return self;\n\t};\n\n\tvar NEUTRAL = 1;\n\tvar KEYWORD = 2;\n\tvar NUMBER = 3;\n\tvar QUOTED = 4;\n\tvar AFTERQUOTE = 5;\n\tvar ENDED = -1;\n\tvar whitespace = /\\s/;\n\tvar latin = /[A-Za-z]/;\n\tvar keyword = /[A-Za-z84]/;\n\tvar endThings = /[,\\]]/;\n\tvar digets = /[\\d\\.E\\-\\+]/;\n\t// const ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\n\tfunction Parser(text) {\n\t  if (typeof text !== 'string') {\n\t    throw new Error('not a string');\n\t  }\n\t  this.text = text.trim();\n\t  this.level = 0;\n\t  this.place = 0;\n\t  this.root = null;\n\t  this.stack = [];\n\t  this.currentObject = null;\n\t  this.state = NEUTRAL;\n\t}\n\tParser.prototype.readCharicter = function() {\n\t  var char = this.text[this.place++];\n\t  if (this.state !== QUOTED) {\n\t    while (whitespace.test(char)) {\n\t      if (this.place >= this.text.length) {\n\t        return;\n\t      }\n\t      char = this.text[this.place++];\n\t    }\n\t  }\n\t  switch (this.state) {\n\t    case NEUTRAL:\n\t      return this.neutral(char);\n\t    case KEYWORD:\n\t      return this.keyword(char)\n\t    case QUOTED:\n\t      return this.quoted(char);\n\t    case AFTERQUOTE:\n\t      return this.afterquote(char);\n\t    case NUMBER:\n\t      return this.number(char);\n\t    case ENDED:\n\t      return;\n\t  }\n\t};\n\tParser.prototype.afterquote = function(char) {\n\t  if (char === '\"') {\n\t    this.word += '\"';\n\t    this.state = QUOTED;\n\t    return;\n\t  }\n\t  if (endThings.test(char)) {\n\t    this.word = this.word.trim();\n\t    this.afterItem(char);\n\t    return;\n\t  }\n\t  throw new Error('havn\\'t handled \"' +char + '\" in afterquote yet, index ' + this.place);\n\t};\n\tParser.prototype.afterItem = function(char) {\n\t  if (char === ',') {\n\t    if (this.word !== null) {\n\t      this.currentObject.push(this.word);\n\t    }\n\t    this.word = null;\n\t    this.state = NEUTRAL;\n\t    return;\n\t  }\n\t  if (char === ']') {\n\t    this.level--;\n\t    if (this.word !== null) {\n\t      this.currentObject.push(this.word);\n\t      this.word = null;\n\t    }\n\t    this.state = NEUTRAL;\n\t    this.currentObject = this.stack.pop();\n\t    if (!this.currentObject) {\n\t      this.state = ENDED;\n\t    }\n\n\t    return;\n\t  }\n\t};\n\tParser.prototype.number = function(char) {\n\t  if (digets.test(char)) {\n\t    this.word += char;\n\t    return;\n\t  }\n\t  if (endThings.test(char)) {\n\t    this.word = parseFloat(this.word);\n\t    this.afterItem(char);\n\t    return;\n\t  }\n\t  throw new Error('havn\\'t handled \"' +char + '\" in number yet, index ' + this.place);\n\t};\n\tParser.prototype.quoted = function(char) {\n\t  if (char === '\"') {\n\t    this.state = AFTERQUOTE;\n\t    return;\n\t  }\n\t  this.word += char;\n\t  return;\n\t};\n\tParser.prototype.keyword = function(char) {\n\t  if (keyword.test(char)) {\n\t    this.word += char;\n\t    return;\n\t  }\n\t  if (char === '[') {\n\t    var newObjects = [];\n\t    newObjects.push(this.word);\n\t    this.level++;\n\t    if (this.root === null) {\n\t      this.root = newObjects;\n\t    } else {\n\t      this.currentObject.push(newObjects);\n\t    }\n\t    this.stack.push(this.currentObject);\n\t    this.currentObject = newObjects;\n\t    this.state = NEUTRAL;\n\t    return;\n\t  }\n\t  if (endThings.test(char)) {\n\t    this.afterItem(char);\n\t    return;\n\t  }\n\t  throw new Error('havn\\'t handled \"' +char + '\" in keyword yet, index ' + this.place);\n\t};\n\tParser.prototype.neutral = function(char) {\n\t  if (latin.test(char)) {\n\t    this.word = char;\n\t    this.state = KEYWORD;\n\t    return;\n\t  }\n\t  if (char === '\"') {\n\t    this.word = '';\n\t    this.state = QUOTED;\n\t    return;\n\t  }\n\t  if (digets.test(char)) {\n\t    this.word = char;\n\t    this.state = NUMBER;\n\t    return;\n\t  }\n\t  if (endThings.test(char)) {\n\t    this.afterItem(char);\n\t    return;\n\t  }\n\t  throw new Error('havn\\'t handled \"' +char + '\" in neutral yet, index ' + this.place);\n\t};\n\tParser.prototype.output = function() {\n\t  while (this.place < this.text.length) {\n\t    this.readCharicter();\n\t  }\n\t  if (this.state === ENDED) {\n\t    return this.root;\n\t  }\n\t  throw new Error('unable to parse string \"' +this.text + '\". State is ' + this.state);\n\t};\n\n\tfunction parseString(txt) {\n\t  var parser = new Parser(txt);\n\t  return parser.output();\n\t}\n\n\tfunction mapit(obj, key, value) {\n\t  if (Array.isArray(key)) {\n\t    value.unshift(key);\n\t    key = null;\n\t  }\n\t  var thing = key ? {} : obj;\n\n\t  var out = value.reduce(function(newObj, item) {\n\t    sExpr(item, newObj);\n\t    return newObj\n\t  }, thing);\n\t  if (key) {\n\t    obj[key] = out;\n\t  }\n\t}\n\n\tfunction sExpr(v, obj) {\n\t  if (!Array.isArray(v)) {\n\t    obj[v] = true;\n\t    return;\n\t  }\n\t  var key = v.shift();\n\t  if (key === 'PARAMETER') {\n\t    key = v.shift();\n\t  }\n\t  if (v.length === 1) {\n\t    if (Array.isArray(v[0])) {\n\t      obj[key] = {};\n\t      sExpr(v[0], obj[key]);\n\t      return;\n\t    }\n\t    obj[key] = v[0];\n\t    return;\n\t  }\n\t  if (!v.length) {\n\t    obj[key] = true;\n\t    return;\n\t  }\n\t  if (key === 'TOWGS84') {\n\t    obj[key] = v;\n\t    return;\n\t  }\n\t  if (!Array.isArray(key)) {\n\t    obj[key] = {};\n\t  }\n\n\t  var i;\n\t  switch (key) {\n\t    case 'UNIT':\n\t    case 'PRIMEM':\n\t    case 'VERT_DATUM':\n\t      obj[key] = {\n\t        name: v[0].toLowerCase(),\n\t        convert: v[1]\n\t      };\n\t      if (v.length === 3) {\n\t        sExpr(v[2], obj[key]);\n\t      }\n\t      return;\n\t    case 'SPHEROID':\n\t    case 'ELLIPSOID':\n\t      obj[key] = {\n\t        name: v[0],\n\t        a: v[1],\n\t        rf: v[2]\n\t      };\n\t      if (v.length === 4) {\n\t        sExpr(v[3], obj[key]);\n\t      }\n\t      return;\n\t    case 'PROJECTEDCRS':\n\t    case 'PROJCRS':\n\t    case 'GEOGCS':\n\t    case 'GEOCCS':\n\t    case 'PROJCS':\n\t    case 'LOCAL_CS':\n\t    case 'GEODCRS':\n\t    case 'GEODETICCRS':\n\t    case 'GEODETICDATUM':\n\t    case 'EDATUM':\n\t    case 'ENGINEERINGDATUM':\n\t    case 'VERT_CS':\n\t    case 'VERTCRS':\n\t    case 'VERTICALCRS':\n\t    case 'COMPD_CS':\n\t    case 'COMPOUNDCRS':\n\t    case 'ENGINEERINGCRS':\n\t    case 'ENGCRS':\n\t    case 'FITTED_CS':\n\t    case 'LOCAL_DATUM':\n\t    case 'DATUM':\n\t      v[0] = ['name', v[0]];\n\t      mapit(obj, key, v);\n\t      return;\n\t    default:\n\t      i = -1;\n\t      while (++i < v.length) {\n\t        if (!Array.isArray(v[i])) {\n\t          return sExpr(v, obj[key]);\n\t        }\n\t      }\n\t      return mapit(obj, key, v);\n\t  }\n\t}\n\n\tvar D2R$1 = 0.01745329251994329577;\n\tfunction rename(obj, params) {\n\t  var outName = params[0];\n\t  var inName = params[1];\n\t  if (!(outName in obj) && (inName in obj)) {\n\t    obj[outName] = obj[inName];\n\t    if (params.length === 3) {\n\t      obj[outName] = params[2](obj[outName]);\n\t    }\n\t  }\n\t}\n\n\tfunction d2r(input) {\n\t  return input * D2R$1;\n\t}\n\n\tfunction cleanWKT(wkt) {\n\t  if (wkt.type === 'GEOGCS') {\n\t    wkt.projName = 'longlat';\n\t  } else if (wkt.type === 'LOCAL_CS') {\n\t    wkt.projName = 'identity';\n\t    wkt.local = true;\n\t  } else {\n\t    if (typeof wkt.PROJECTION === 'object') {\n\t      wkt.projName = Object.keys(wkt.PROJECTION)[0];\n\t    } else {\n\t      wkt.projName = wkt.PROJECTION;\n\t    }\n\t  }\n\t  if (wkt.UNIT) {\n\t    wkt.units = wkt.UNIT.name.toLowerCase();\n\t    if (wkt.units === 'metre') {\n\t      wkt.units = 'meter';\n\t    }\n\t    if (wkt.UNIT.convert) {\n\t      if (wkt.type === 'GEOGCS') {\n\t        if (wkt.DATUM && wkt.DATUM.SPHEROID) {\n\t          wkt.to_meter = wkt.UNIT.convert*wkt.DATUM.SPHEROID.a;\n\t        }\n\t      } else {\n\t        wkt.to_meter = wkt.UNIT.convert, 10;\n\t      }\n\t    }\n\t  }\n\t  var geogcs = wkt.GEOGCS;\n\t  if (wkt.type === 'GEOGCS') {\n\t    geogcs = wkt;\n\t  }\n\t  if (geogcs) {\n\t    //if(wkt.GEOGCS.PRIMEM&&wkt.GEOGCS.PRIMEM.convert){\n\t    //  wkt.from_greenwich=wkt.GEOGCS.PRIMEM.convert*D2R;\n\t    //}\n\t    if (geogcs.DATUM) {\n\t      wkt.datumCode = geogcs.DATUM.name.toLowerCase();\n\t    } else {\n\t      wkt.datumCode = geogcs.name.toLowerCase();\n\t    }\n\t    if (wkt.datumCode.slice(0, 2) === 'd_') {\n\t      wkt.datumCode = wkt.datumCode.slice(2);\n\t    }\n\t    if (wkt.datumCode === 'new_zealand_geodetic_datum_1949' || wkt.datumCode === 'new_zealand_1949') {\n\t      wkt.datumCode = 'nzgd49';\n\t    }\n\t    if (wkt.datumCode === 'wgs_1984') {\n\t      if (wkt.PROJECTION === 'Mercator_Auxiliary_Sphere') {\n\t        wkt.sphere = true;\n\t      }\n\t      wkt.datumCode = 'wgs84';\n\t    }\n\t    if (wkt.datumCode.slice(-6) === '_ferro') {\n\t      wkt.datumCode = wkt.datumCode.slice(0, - 6);\n\t    }\n\t    if (wkt.datumCode.slice(-8) === '_jakarta') {\n\t      wkt.datumCode = wkt.datumCode.slice(0, - 8);\n\t    }\n\t    if (~wkt.datumCode.indexOf('belge')) {\n\t      wkt.datumCode = 'rnb72';\n\t    }\n\t    if (geogcs.DATUM && geogcs.DATUM.SPHEROID) {\n\t      wkt.ellps = geogcs.DATUM.SPHEROID.name.replace('_19', '').replace(/[Cc]larke\\_18/, 'clrk');\n\t      if (wkt.ellps.toLowerCase().slice(0, 13) === 'international') {\n\t        wkt.ellps = 'intl';\n\t      }\n\n\t      wkt.a = geogcs.DATUM.SPHEROID.a;\n\t      wkt.rf = parseFloat(geogcs.DATUM.SPHEROID.rf, 10);\n\t    }\n\n\t    if (geogcs.DATUM && geogcs.DATUM.TOWGS84) {\n\t      wkt.datum_params = geogcs.DATUM.TOWGS84;\n\t    }\n\t    if (~wkt.datumCode.indexOf('osgb_1936')) {\n\t      wkt.datumCode = 'osgb36';\n\t    }\n\t    if (~wkt.datumCode.indexOf('osni_1952')) {\n\t      wkt.datumCode = 'osni52';\n\t    }\n\t    if (~wkt.datumCode.indexOf('tm65')\n\t      || ~wkt.datumCode.indexOf('geodetic_datum_of_1965')) {\n\t      wkt.datumCode = 'ire65';\n\t    }\n\t    if (wkt.datumCode === 'ch1903+') {\n\t      wkt.datumCode = 'ch1903';\n\t    }\n\t    if (~wkt.datumCode.indexOf('israel')) {\n\t      wkt.datumCode = 'isr93';\n\t    }\n\t  }\n\t  if (wkt.b && !isFinite(wkt.b)) {\n\t    wkt.b = wkt.a;\n\t  }\n\n\t  function toMeter(input) {\n\t    var ratio = wkt.to_meter || 1;\n\t    return input * ratio;\n\t  }\n\t  var renamer = function(a) {\n\t    return rename(wkt, a);\n\t  };\n\t  var list = [\n\t    ['standard_parallel_1', 'Standard_Parallel_1'],\n\t    ['standard_parallel_2', 'Standard_Parallel_2'],\n\t    ['false_easting', 'False_Easting'],\n\t    ['false_northing', 'False_Northing'],\n\t    ['central_meridian', 'Central_Meridian'],\n\t    ['latitude_of_origin', 'Latitude_Of_Origin'],\n\t    ['latitude_of_origin', 'Central_Parallel'],\n\t    ['scale_factor', 'Scale_Factor'],\n\t    ['k0', 'scale_factor'],\n\t    ['latitude_of_center', 'Latitude_Of_Center'],\n\t    ['latitude_of_center', 'Latitude_of_center'],\n\t    ['lat0', 'latitude_of_center', d2r],\n\t    ['longitude_of_center', 'Longitude_Of_Center'],\n\t    ['longitude_of_center', 'Longitude_of_center'],\n\t    ['longc', 'longitude_of_center', d2r],\n\t    ['x0', 'false_easting', toMeter],\n\t    ['y0', 'false_northing', toMeter],\n\t    ['long0', 'central_meridian', d2r],\n\t    ['lat0', 'latitude_of_origin', d2r],\n\t    ['lat0', 'standard_parallel_1', d2r],\n\t    ['lat1', 'standard_parallel_1', d2r],\n\t    ['lat2', 'standard_parallel_2', d2r],\n\t    ['azimuth', 'Azimuth'],\n\t    ['alpha', 'azimuth', d2r],\n\t    ['srsCode', 'name']\n\t  ];\n\t  list.forEach(renamer);\n\t  if (!wkt.long0 && wkt.longc && (wkt.projName === 'Albers_Conic_Equal_Area' || wkt.projName === 'Lambert_Azimuthal_Equal_Area')) {\n\t    wkt.long0 = wkt.longc;\n\t  }\n\t  if (!wkt.lat_ts && wkt.lat1 && (wkt.projName === 'Stereographic_South_Pole' || wkt.projName === 'Polar Stereographic (variant B)')) {\n\t    wkt.lat0 = d2r(wkt.lat1 > 0 ? 90 : -90);\n\t    wkt.lat_ts = wkt.lat1;\n\t  }\n\t}\n\tvar wkt = function(wkt) {\n\t  var lisp = parseString(wkt);\n\t  var type = lisp.shift();\n\t  var name = lisp.shift();\n\t  lisp.unshift(['name', name]);\n\t  lisp.unshift(['type', type]);\n\t  var obj = {};\n\t  sExpr(lisp, obj);\n\t  cleanWKT(obj);\n\t  return obj;\n\t};\n\n\tfunction defs(name) {\n\t  /*global console*/\n\t  var that = this;\n\t  if (arguments.length === 2) {\n\t    var def = arguments[1];\n\t    if (typeof def === 'string') {\n\t      if (def.charAt(0) === '+') {\n\t        defs[name] = parseProj(arguments[1]);\n\t      }\n\t      else {\n\t        defs[name] = wkt(arguments[1]);\n\t      }\n\t    } else {\n\t      defs[name] = def;\n\t    }\n\t  }\n\t  else if (arguments.length === 1) {\n\t    if (Array.isArray(name)) {\n\t      return name.map(function(v) {\n\t        if (Array.isArray(v)) {\n\t          defs.apply(that, v);\n\t        }\n\t        else {\n\t          defs(v);\n\t        }\n\t      });\n\t    }\n\t    else if (typeof name === 'string') {\n\t      if (name in defs) {\n\t        return defs[name];\n\t      }\n\t    }\n\t    else if ('EPSG' in name) {\n\t      defs['EPSG:' + name.EPSG] = name;\n\t    }\n\t    else if ('ESRI' in name) {\n\t      defs['ESRI:' + name.ESRI] = name;\n\t    }\n\t    else if ('IAU2000' in name) {\n\t      defs['IAU2000:' + name.IAU2000] = name;\n\t    }\n\t    else {\n\t      console.log(name);\n\t    }\n\t    return;\n\t  }\n\n\n\t}\n\tglobals(defs);\n\n\tfunction testObj(code){\n\t  return typeof code === 'string';\n\t}\n\tfunction testDef(code){\n\t  return code in defs;\n\t}\n\t var codeWords = ['PROJECTEDCRS', 'PROJCRS', 'GEOGCS','GEOCCS','PROJCS','LOCAL_CS', 'GEODCRS', 'GEODETICCRS', 'GEODETICDATUM', 'ENGCRS', 'ENGINEERINGCRS'];\n\tfunction testWKT(code){\n\t  return codeWords.some(function (word) {\n\t    return code.indexOf(word) > -1;\n\t  });\n\t}\n\tvar codes = ['3857', '900913', '3785', '102113'];\n\tfunction checkMercator(item) {\n\t  var auth = match(item, 'authority');\n\t  if (!auth) {\n\t    return;\n\t  }\n\t  var code = match(auth, 'epsg');\n\t  return code && codes.indexOf(code) > -1;\n\t}\n\tfunction checkProjStr(item) {\n\t  var ext = match(item, 'extension');\n\t  if (!ext) {\n\t    return;\n\t  }\n\t  return match(ext, 'proj4');\n\t}\n\tfunction testProj(code){\n\t  return code[0] === '+';\n\t}\n\tfunction parse(code){\n\t  if (testObj(code)) {\n\t    //check to see if this is a WKT string\n\t    if (testDef(code)) {\n\t      return defs[code];\n\t    }\n\t    if (testWKT(code)) {\n\t      var out = wkt(code);\n\t      // test of spetial case, due to this being a very common and often malformed\n\t      if (checkMercator(out)) {\n\t        return defs['EPSG:3857'];\n\t      }\n\t      var maybeProjStr = checkProjStr(out);\n\t      if (maybeProjStr) {\n\t        return parseProj(maybeProjStr);\n\t      }\n\t      return out;\n\t    }\n\t    if (testProj(code)) {\n\t      return parseProj(code);\n\t    }\n\t  }else{\n\t    return code;\n\t  }\n\t}\n\n\tvar extend = function(destination, source) {\n\t  destination = destination || {};\n\t  var value, property;\n\t  if (!source) {\n\t    return destination;\n\t  }\n\t  for (property in source) {\n\t    value = source[property];\n\t    if (value !== undefined) {\n\t      destination[property] = value;\n\t    }\n\t  }\n\t  return destination;\n\t};\n\n\tvar msfnz = function(eccent, sinphi, cosphi) {\n\t  var con = eccent * sinphi;\n\t  return cosphi / (Math.sqrt(1 - con * con));\n\t};\n\n\tvar sign = function(x) {\n\t  return x<0 ? -1 : 1;\n\t};\n\n\tvar adjust_lon = function(x) {\n\t  return (Math.abs(x) <= SPI) ? x : (x - (sign(x) * TWO_PI));\n\t};\n\n\tvar tsfnz = function(eccent, phi, sinphi) {\n\t  var con = eccent * sinphi;\n\t  var com = 0.5 * eccent;\n\t  con = Math.pow(((1 - con) / (1 + con)), com);\n\t  return (Math.tan(0.5 * (HALF_PI - phi)) / con);\n\t};\n\n\tvar phi2z = function(eccent, ts) {\n\t  var eccnth = 0.5 * eccent;\n\t  var con, dphi;\n\t  var phi = HALF_PI - 2 * Math.atan(ts);\n\t  for (var i = 0; i <= 15; i++) {\n\t    con = eccent * Math.sin(phi);\n\t    dphi = HALF_PI - 2 * Math.atan(ts * (Math.pow(((1 - con) / (1 + con)), eccnth))) - phi;\n\t    phi += dphi;\n\t    if (Math.abs(dphi) <= 0.0000000001) {\n\t      return phi;\n\t    }\n\t  }\n\t  //console.log(\"phi2z has NoConvergence\");\n\t  return -9999;\n\t};\n\n\tfunction init() {\n\t  var con = this.b / this.a;\n\t  this.es = 1 - con * con;\n\t  if(!('x0' in this)){\n\t    this.x0 = 0;\n\t  }\n\t  if(!('y0' in this)){\n\t    this.y0 = 0;\n\t  }\n\t  this.e = Math.sqrt(this.es);\n\t  if (this.lat_ts) {\n\t    if (this.sphere) {\n\t      this.k0 = Math.cos(this.lat_ts);\n\t    }\n\t    else {\n\t      this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));\n\t    }\n\t  }\n\t  else {\n\t    if (!this.k0) {\n\t      if (this.k) {\n\t        this.k0 = this.k;\n\t      }\n\t      else {\n\t        this.k0 = 1;\n\t      }\n\t    }\n\t  }\n\t}\n\n\t/* Mercator forward equations--mapping lat,long to x,y\n\t  --------------------------------------------------*/\n\n\tfunction forward(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  // convert to radians\n\t  if (lat * R2D > 90 && lat * R2D < -90 && lon * R2D > 180 && lon * R2D < -180) {\n\t    return null;\n\t  }\n\n\t  var x, y;\n\t  if (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN) {\n\t    return null;\n\t  }\n\t  else {\n\t    if (this.sphere) {\n\t      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);\n\t      y = this.y0 + this.a * this.k0 * Math.log(Math.tan(FORTPI + 0.5 * lat));\n\t    }\n\t    else {\n\t      var sinphi = Math.sin(lat);\n\t      var ts = tsfnz(this.e, lat, sinphi);\n\t      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);\n\t      y = this.y0 - this.a * this.k0 * Math.log(ts);\n\t    }\n\t    p.x = x;\n\t    p.y = y;\n\t    return p;\n\t  }\n\t}\n\n\t/* Mercator inverse equations--mapping x,y to lat/long\n\t  --------------------------------------------------*/\n\tfunction inverse(p) {\n\n\t  var x = p.x - this.x0;\n\t  var y = p.y - this.y0;\n\t  var lon, lat;\n\n\t  if (this.sphere) {\n\t    lat = HALF_PI - 2 * Math.atan(Math.exp(-y / (this.a * this.k0)));\n\t  }\n\t  else {\n\t    var ts = Math.exp(-y / (this.a * this.k0));\n\t    lat = phi2z(this.e, ts);\n\t    if (lat === -9999) {\n\t      return null;\n\t    }\n\t  }\n\t  lon = adjust_lon(this.long0 + x / (this.a * this.k0));\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$1 = [\"Mercator\", \"Popular Visualisation Pseudo Mercator\", \"Mercator_1SP\", \"Mercator_Auxiliary_Sphere\", \"merc\"];\n\tvar merc = {\n\t  init: init,\n\t  forward: forward,\n\t  inverse: inverse,\n\t  names: names$1\n\t};\n\n\tfunction init$1() {\n\t  //no-op for longlat\n\t}\n\n\tfunction identity(pt) {\n\t  return pt;\n\t}\n\tvar names$2 = [\"longlat\", \"identity\"];\n\tvar longlat = {\n\t  init: init$1,\n\t  forward: identity,\n\t  inverse: identity,\n\t  names: names$2\n\t};\n\n\tvar projs = [merc, longlat];\n\tvar names = {};\n\tvar projStore = [];\n\n\tfunction add(proj, i) {\n\t  var len = projStore.length;\n\t  if (!proj.names) {\n\t    console.log(i);\n\t    return true;\n\t  }\n\t  projStore[len] = proj;\n\t  proj.names.forEach(function(n) {\n\t    names[n.toLowerCase()] = len;\n\t  });\n\t  return this;\n\t}\n\n\tfunction get(name) {\n\t  if (!name) {\n\t    return false;\n\t  }\n\t  var n = name.toLowerCase();\n\t  if (typeof names[n] !== 'undefined' && projStore[names[n]]) {\n\t    return projStore[names[n]];\n\t  }\n\t}\n\n\tfunction start() {\n\t  projs.forEach(add);\n\t}\n\tvar projections = {\n\t  start: start,\n\t  add: add,\n\t  get: get\n\t};\n\n\tvar exports$2 = {};\n\texports$2.MERIT = {\n\t  a: 6378137.0,\n\t  rf: 298.257,\n\t  ellipseName: \"MERIT 1983\"\n\t};\n\n\texports$2.SGS85 = {\n\t  a: 6378136.0,\n\t  rf: 298.257,\n\t  ellipseName: \"Soviet Geodetic System 85\"\n\t};\n\n\texports$2.GRS80 = {\n\t  a: 6378137.0,\n\t  rf: 298.257222101,\n\t  ellipseName: \"GRS 1980(IUGG, 1980)\"\n\t};\n\n\texports$2.IAU76 = {\n\t  a: 6378140.0,\n\t  rf: 298.257,\n\t  ellipseName: \"IAU 1976\"\n\t};\n\n\texports$2.airy = {\n\t  a: 6377563.396,\n\t  b: 6356256.910,\n\t  ellipseName: \"Airy 1830\"\n\t};\n\n\texports$2.APL4 = {\n\t  a: 6378137,\n\t  rf: 298.25,\n\t  ellipseName: \"Appl. Physics. 1965\"\n\t};\n\n\texports$2.NWL9D = {\n\t  a: 6378145.0,\n\t  rf: 298.25,\n\t  ellipseName: \"Naval Weapons Lab., 1965\"\n\t};\n\n\texports$2.mod_airy = {\n\t  a: 6377340.189,\n\t  b: 6356034.446,\n\t  ellipseName: \"Modified Airy\"\n\t};\n\n\texports$2.andrae = {\n\t  a: 6377104.43,\n\t  rf: 300.0,\n\t  ellipseName: \"Andrae 1876 (Den., Iclnd.)\"\n\t};\n\n\texports$2.aust_SA = {\n\t  a: 6378160.0,\n\t  rf: 298.25,\n\t  ellipseName: \"Australian Natl & S. Amer. 1969\"\n\t};\n\n\texports$2.GRS67 = {\n\t  a: 6378160.0,\n\t  rf: 298.2471674270,\n\t  ellipseName: \"GRS 67(IUGG 1967)\"\n\t};\n\n\texports$2.bessel = {\n\t  a: 6377397.155,\n\t  rf: 299.1528128,\n\t  ellipseName: \"Bessel 1841\"\n\t};\n\n\texports$2.bess_nam = {\n\t  a: 6377483.865,\n\t  rf: 299.1528128,\n\t  ellipseName: \"Bessel 1841 (Namibia)\"\n\t};\n\n\texports$2.clrk66 = {\n\t  a: 6378206.4,\n\t  b: 6356583.8,\n\t  ellipseName: \"Clarke 1866\"\n\t};\n\n\texports$2.clrk80 = {\n\t  a: 6378249.145,\n\t  rf: 293.4663,\n\t  ellipseName: \"Clarke 1880 mod.\"\n\t};\n\n\texports$2.clrk58 = {\n\t  a: 6378293.645208759,\n\t  rf: 294.2606763692654,\n\t  ellipseName: \"Clarke 1858\"\n\t};\n\n\texports$2.CPM = {\n\t  a: 6375738.7,\n\t  rf: 334.29,\n\t  ellipseName: \"Comm. des Poids et Mesures 1799\"\n\t};\n\n\texports$2.delmbr = {\n\t  a: 6376428.0,\n\t  rf: 311.5,\n\t  ellipseName: \"Delambre 1810 (Belgium)\"\n\t};\n\n\texports$2.engelis = {\n\t  a: 6378136.05,\n\t  rf: 298.2566,\n\t  ellipseName: \"Engelis 1985\"\n\t};\n\n\texports$2.evrst30 = {\n\t  a: 6377276.345,\n\t  rf: 300.8017,\n\t  ellipseName: \"Everest 1830\"\n\t};\n\n\texports$2.evrst48 = {\n\t  a: 6377304.063,\n\t  rf: 300.8017,\n\t  ellipseName: \"Everest 1948\"\n\t};\n\n\texports$2.evrst56 = {\n\t  a: 6377301.243,\n\t  rf: 300.8017,\n\t  ellipseName: \"Everest 1956\"\n\t};\n\n\texports$2.evrst69 = {\n\t  a: 6377295.664,\n\t  rf: 300.8017,\n\t  ellipseName: \"Everest 1969\"\n\t};\n\n\texports$2.evrstSS = {\n\t  a: 6377298.556,\n\t  rf: 300.8017,\n\t  ellipseName: \"Everest (Sabah & Sarawak)\"\n\t};\n\n\texports$2.fschr60 = {\n\t  a: 6378166.0,\n\t  rf: 298.3,\n\t  ellipseName: \"Fischer (Mercury Datum) 1960\"\n\t};\n\n\texports$2.fschr60m = {\n\t  a: 6378155.0,\n\t  rf: 298.3,\n\t  ellipseName: \"Fischer 1960\"\n\t};\n\n\texports$2.fschr68 = {\n\t  a: 6378150.0,\n\t  rf: 298.3,\n\t  ellipseName: \"Fischer 1968\"\n\t};\n\n\texports$2.helmert = {\n\t  a: 6378200.0,\n\t  rf: 298.3,\n\t  ellipseName: \"Helmert 1906\"\n\t};\n\n\texports$2.hough = {\n\t  a: 6378270.0,\n\t  rf: 297.0,\n\t  ellipseName: \"Hough\"\n\t};\n\n\texports$2.intl = {\n\t  a: 6378388.0,\n\t  rf: 297.0,\n\t  ellipseName: \"International 1909 (Hayford)\"\n\t};\n\n\texports$2.kaula = {\n\t  a: 6378163.0,\n\t  rf: 298.24,\n\t  ellipseName: \"Kaula 1961\"\n\t};\n\n\texports$2.lerch = {\n\t  a: 6378139.0,\n\t  rf: 298.257,\n\t  ellipseName: \"Lerch 1979\"\n\t};\n\n\texports$2.mprts = {\n\t  a: 6397300.0,\n\t  rf: 191.0,\n\t  ellipseName: \"Maupertius 1738\"\n\t};\n\n\texports$2.new_intl = {\n\t  a: 6378157.5,\n\t  b: 6356772.2,\n\t  ellipseName: \"New International 1967\"\n\t};\n\n\texports$2.plessis = {\n\t  a: 6376523.0,\n\t  rf: 6355863.0,\n\t  ellipseName: \"Plessis 1817 (France)\"\n\t};\n\n\texports$2.krass = {\n\t  a: 6378245.0,\n\t  rf: 298.3,\n\t  ellipseName: \"Krassovsky, 1942\"\n\t};\n\n\texports$2.SEasia = {\n\t  a: 6378155.0,\n\t  b: 6356773.3205,\n\t  ellipseName: \"Southeast Asia\"\n\t};\n\n\texports$2.walbeck = {\n\t  a: 6376896.0,\n\t  b: 6355834.8467,\n\t  ellipseName: \"Walbeck\"\n\t};\n\n\texports$2.WGS60 = {\n\t  a: 6378165.0,\n\t  rf: 298.3,\n\t  ellipseName: \"WGS 60\"\n\t};\n\n\texports$2.WGS66 = {\n\t  a: 6378145.0,\n\t  rf: 298.25,\n\t  ellipseName: \"WGS 66\"\n\t};\n\n\texports$2.WGS7 = {\n\t  a: 6378135.0,\n\t  rf: 298.26,\n\t  ellipseName: \"WGS 72\"\n\t};\n\n\tvar WGS84 = exports$2.WGS84 = {\n\t  a: 6378137.0,\n\t  rf: 298.257223563,\n\t  ellipseName: \"WGS 84\"\n\t};\n\n\texports$2.sphere = {\n\t  a: 6370997.0,\n\t  b: 6370997.0,\n\t  ellipseName: \"Normal Sphere (r=6370997)\"\n\t};\n\n\tfunction eccentricity(a, b, rf, R_A) {\n\t  var a2 = a * a; // used in geocentric\n\t  var b2 = b * b; // used in geocentric\n\t  var es = (a2 - b2) / a2; // e ^ 2\n\t  var e = 0;\n\t  if (R_A) {\n\t    a *= 1 - es * (SIXTH + es * (RA4 + es * RA6));\n\t    a2 = a * a;\n\t    es = 0;\n\t  } else {\n\t    e = Math.sqrt(es); // eccentricity\n\t  }\n\t  var ep2 = (a2 - b2) / b2; // used in geocentric\n\t  return {\n\t    es: es,\n\t    e: e,\n\t    ep2: ep2\n\t  };\n\t}\n\tfunction sphere(a, b, rf, ellps, sphere) {\n\t  if (!a) { // do we have an ellipsoid?\n\t    var ellipse = match(exports$2, ellps);\n\t    if (!ellipse) {\n\t      ellipse = WGS84;\n\t    }\n\t    a = ellipse.a;\n\t    b = ellipse.b;\n\t    rf = ellipse.rf;\n\t  }\n\n\t  if (rf && !b) {\n\t    b = (1.0 - 1.0 / rf) * a;\n\t  }\n\t  if (rf === 0 || Math.abs(a - b) < EPSLN) {\n\t    sphere = true;\n\t    b = a;\n\t  }\n\t  return {\n\t    a: a,\n\t    b: b,\n\t    rf: rf,\n\t    sphere: sphere\n\t  };\n\t}\n\n\tvar exports$3 = {};\n\texports$3.wgs84 = {\n\t  towgs84: \"0,0,0\",\n\t  ellipse: \"WGS84\",\n\t  datumName: \"WGS84\"\n\t};\n\n\texports$3.ch1903 = {\n\t  towgs84: \"674.374,15.056,405.346\",\n\t  ellipse: \"bessel\",\n\t  datumName: \"swiss\"\n\t};\n\n\texports$3.ggrs87 = {\n\t  towgs84: \"-199.87,74.79,246.62\",\n\t  ellipse: \"GRS80\",\n\t  datumName: \"Greek_Geodetic_Reference_System_1987\"\n\t};\n\n\texports$3.nad83 = {\n\t  towgs84: \"0,0,0\",\n\t  ellipse: \"GRS80\",\n\t  datumName: \"North_American_Datum_1983\"\n\t};\n\n\texports$3.nad27 = {\n\t  nadgrids: \"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat\",\n\t  ellipse: \"clrk66\",\n\t  datumName: \"North_American_Datum_1927\"\n\t};\n\n\texports$3.potsdam = {\n\t  towgs84: \"606.0,23.0,413.0\",\n\t  ellipse: \"bessel\",\n\t  datumName: \"Potsdam Rauenberg 1950 DHDN\"\n\t};\n\n\texports$3.carthage = {\n\t  towgs84: \"-263.0,6.0,431.0\",\n\t  ellipse: \"clark80\",\n\t  datumName: \"Carthage 1934 Tunisia\"\n\t};\n\n\texports$3.hermannskogel = {\n\t  towgs84: \"653.0,-212.0,449.0\",\n\t  ellipse: \"bessel\",\n\t  datumName: \"Hermannskogel\"\n\t};\n\n\texports$3.osni52 = {\n\t  towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\n\t  ellipse: \"airy\",\n\t  datumName: \"Irish National\"\n\t};\n\n\texports$3.ire65 = {\n\t  towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\n\t  ellipse: \"mod_airy\",\n\t  datumName: \"Ireland 1965\"\n\t};\n\n\texports$3.rassadiran = {\n\t  towgs84: \"-133.63,-157.5,-158.62\",\n\t  ellipse: \"intl\",\n\t  datumName: \"Rassadiran\"\n\t};\n\n\texports$3.nzgd49 = {\n\t  towgs84: \"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993\",\n\t  ellipse: \"intl\",\n\t  datumName: \"New Zealand Geodetic Datum 1949\"\n\t};\n\n\texports$3.osgb36 = {\n\t  towgs84: \"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894\",\n\t  ellipse: \"airy\",\n\t  datumName: \"Airy 1830\"\n\t};\n\n\texports$3.s_jtsk = {\n\t  towgs84: \"589,76,480\",\n\t  ellipse: 'bessel',\n\t  datumName: 'S-JTSK (Ferro)'\n\t};\n\n\texports$3.beduaram = {\n\t  towgs84: '-106,-87,188',\n\t  ellipse: 'clrk80',\n\t  datumName: 'Beduaram'\n\t};\n\n\texports$3.gunung_segara = {\n\t  towgs84: '-403,684,41',\n\t  ellipse: 'bessel',\n\t  datumName: 'Gunung Segara Jakarta'\n\t};\n\n\texports$3.rnb72 = {\n\t  towgs84: \"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1\",\n\t  ellipse: \"intl\",\n\t  datumName: \"Reseau National Belge 1972\"\n\t};\n\n\tfunction datum(datumCode, datum_params, a, b, es, ep2) {\n\t  var out = {};\n\n\t  if (datumCode === undefined || datumCode === 'none') {\n\t    out.datum_type = PJD_NODATUM;\n\t  } else {\n\t    out.datum_type = PJD_WGS84;\n\t  }\n\n\t  if (datum_params) {\n\t    out.datum_params = datum_params.map(parseFloat);\n\t    if (out.datum_params[0] !== 0 || out.datum_params[1] !== 0 || out.datum_params[2] !== 0) {\n\t      out.datum_type = PJD_3PARAM;\n\t    }\n\t    if (out.datum_params.length > 3) {\n\t      if (out.datum_params[3] !== 0 || out.datum_params[4] !== 0 || out.datum_params[5] !== 0 || out.datum_params[6] !== 0) {\n\t        out.datum_type = PJD_7PARAM;\n\t        out.datum_params[3] *= SEC_TO_RAD;\n\t        out.datum_params[4] *= SEC_TO_RAD;\n\t        out.datum_params[5] *= SEC_TO_RAD;\n\t        out.datum_params[6] = (out.datum_params[6] / 1000000.0) + 1.0;\n\t      }\n\t    }\n\t  }\n\n\t  out.a = a; //datum object also uses these values\n\t  out.b = b;\n\t  out.es = es;\n\t  out.ep2 = ep2;\n\t  return out;\n\t}\n\n\tfunction Projection(srsCode,callback) {\n\t  if (!(this instanceof Projection)) {\n\t    return new Projection(srsCode);\n\t  }\n\t  callback = callback || function(error){\n\t    if(error){\n\t      throw error;\n\t    }\n\t  };\n\t  var json = parse(srsCode);\n\t  if(typeof json !== 'object'){\n\t    callback(srsCode);\n\t    return;\n\t  }\n\t  var ourProj = Projection.projections.get(json.projName);\n\t  if(!ourProj){\n\t    callback(srsCode);\n\t    return;\n\t  }\n\t  if (json.datumCode && json.datumCode !== 'none') {\n\t    var datumDef = match(exports$3, json.datumCode);\n\t    if (datumDef) {\n\t      json.datum_params = datumDef.towgs84 ? datumDef.towgs84.split(',') : null;\n\t      json.ellps = datumDef.ellipse;\n\t      json.datumName = datumDef.datumName ? datumDef.datumName : json.datumCode;\n\t    }\n\t  }\n\t  json.k0 = json.k0 || 1.0;\n\t  json.axis = json.axis || 'enu';\n\t  json.ellps = json.ellps || 'wgs84';\n\t  var sphere_ = sphere(json.a, json.b, json.rf, json.ellps, json.sphere);\n\t  var ecc = eccentricity(sphere_.a, sphere_.b, sphere_.rf, json.R_A);\n\t  var datumObj = json.datum || datum(json.datumCode, json.datum_params, sphere_.a, sphere_.b, ecc.es, ecc.ep2);\n\n\t  extend(this, json); // transfer everything over from the projection because we don't know what we'll need\n\t  extend(this, ourProj); // transfer all the methods from the projection\n\n\t  // copy the 4 things over we calulated in deriveConstants.sphere\n\t  this.a = sphere_.a;\n\t  this.b = sphere_.b;\n\t  this.rf = sphere_.rf;\n\t  this.sphere = sphere_.sphere;\n\n\t  // copy the 3 things we calculated in deriveConstants.eccentricity\n\t  this.es = ecc.es;\n\t  this.e = ecc.e;\n\t  this.ep2 = ecc.ep2;\n\n\t  // add in the datum object\n\t  this.datum = datumObj;\n\n\t  // init the projection\n\t  this.init();\n\n\t  // legecy callback from back in the day when it went to spatialreference.org\n\t  callback(null, this);\n\n\t}\n\tProjection.projections = projections;\n\tProjection.projections.start();\n\n\t'use strict';\n\tfunction compareDatums(source, dest) {\n\t  if (source.datum_type !== dest.datum_type) {\n\t    return false; // false, datums are not equal\n\t  } else if (source.a !== dest.a || Math.abs(source.es - dest.es) > 0.000000000050) {\n\t    // the tolerance for es is to ensure that GRS80 and WGS84\n\t    // are considered identical\n\t    return false;\n\t  } else if (source.datum_type === PJD_3PARAM) {\n\t    return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2]);\n\t  } else if (source.datum_type === PJD_7PARAM) {\n\t    return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2] && source.datum_params[3] === dest.datum_params[3] && source.datum_params[4] === dest.datum_params[4] && source.datum_params[5] === dest.datum_params[5] && source.datum_params[6] === dest.datum_params[6]);\n\t  } else {\n\t    return true; // datums are equal\n\t  }\n\t} // cs_compare_datums()\n\n\t/*\n\t * The function Convert_Geodetic_To_Geocentric converts geodetic coordinates\n\t * (latitude, longitude, and height) to geocentric coordinates (X, Y, Z),\n\t * according to the current ellipsoid parameters.\n\t *\n\t *    Latitude  : Geodetic latitude in radians                     (input)\n\t *    Longitude : Geodetic longitude in radians                    (input)\n\t *    Height    : Geodetic height, in meters                       (input)\n\t *    X         : Calculated Geocentric X coordinate, in meters    (output)\n\t *    Y         : Calculated Geocentric Y coordinate, in meters    (output)\n\t *    Z         : Calculated Geocentric Z coordinate, in meters    (output)\n\t *\n\t */\n\tfunction geodeticToGeocentric(p, es, a) {\n\t  var Longitude = p.x;\n\t  var Latitude = p.y;\n\t  var Height = p.z ? p.z : 0; //Z value not always supplied\n\n\t  var Rn; /*  Earth radius at location  */\n\t  var Sin_Lat; /*  Math.sin(Latitude)  */\n\t  var Sin2_Lat; /*  Square of Math.sin(Latitude)  */\n\t  var Cos_Lat; /*  Math.cos(Latitude)  */\n\n\t  /*\n\t   ** Don't blow up if Latitude is just a little out of the value\n\t   ** range as it may just be a rounding issue.  Also removed longitude\n\t   ** test, it should be wrapped by Math.cos() and Math.sin().  NFW for PROJ.4, Sep/2001.\n\t   */\n\t  if (Latitude < -HALF_PI && Latitude > -1.001 * HALF_PI) {\n\t    Latitude = -HALF_PI;\n\t  } else if (Latitude > HALF_PI && Latitude < 1.001 * HALF_PI) {\n\t    Latitude = HALF_PI;\n\t  } else if (Latitude < -HALF_PI) {\n\t    /* Latitude out of range */\n\t    //..reportError('geocent:lat out of range:' + Latitude);\n\t    return { x: -Infinity, y: -Infinity, z: p.z };\n\t  } else if (Latitude > HALF_PI) {\n\t    /* Latitude out of range */\n\t    return { x: Infinity, y: Infinity, z: p.z };\n\t  }\n\n\t  if (Longitude > Math.PI) {\n\t    Longitude -= (2 * Math.PI);\n\t  }\n\t  Sin_Lat = Math.sin(Latitude);\n\t  Cos_Lat = Math.cos(Latitude);\n\t  Sin2_Lat = Sin_Lat * Sin_Lat;\n\t  Rn = a / (Math.sqrt(1.0e0 - es * Sin2_Lat));\n\t  return {\n\t    x: (Rn + Height) * Cos_Lat * Math.cos(Longitude),\n\t    y: (Rn + Height) * Cos_Lat * Math.sin(Longitude),\n\t    z: ((Rn * (1 - es)) + Height) * Sin_Lat\n\t  };\n\t} // cs_geodetic_to_geocentric()\n\n\tfunction geocentricToGeodetic(p, es, a, b) {\n\t  /* local defintions and variables */\n\t  /* end-criterium of loop, accuracy of sin(Latitude) */\n\t  var genau = 1e-12;\n\t  var genau2 = (genau * genau);\n\t  var maxiter = 30;\n\n\t  var P; /* distance between semi-minor axis and location */\n\t  var RR; /* distance between center and location */\n\t  var CT; /* sin of geocentric latitude */\n\t  var ST; /* cos of geocentric latitude */\n\t  var RX;\n\t  var RK;\n\t  var RN; /* Earth radius at location */\n\t  var CPHI0; /* cos of start or old geodetic latitude in iterations */\n\t  var SPHI0; /* sin of start or old geodetic latitude in iterations */\n\t  var CPHI; /* cos of searched geodetic latitude */\n\t  var SPHI; /* sin of searched geodetic latitude */\n\t  var SDPHI; /* end-criterium: addition-theorem of sin(Latitude(iter)-Latitude(iter-1)) */\n\t  var iter; /* # of continous iteration, max. 30 is always enough (s.a.) */\n\n\t  var X = p.x;\n\t  var Y = p.y;\n\t  var Z = p.z ? p.z : 0.0; //Z value not always supplied\n\t  var Longitude;\n\t  var Latitude;\n\t  var Height;\n\n\t  P = Math.sqrt(X * X + Y * Y);\n\t  RR = Math.sqrt(X * X + Y * Y + Z * Z);\n\n\t  /*      special cases for latitude and longitude */\n\t  if (P / a < genau) {\n\n\t    /*  special case, if P=0. (X=0., Y=0.) */\n\t    Longitude = 0.0;\n\n\t    /*  if (X,Y,Z)=(0.,0.,0.) then Height becomes semi-minor axis\n\t     *  of ellipsoid (=center of mass), Latitude becomes PI/2 */\n\t    if (RR / a < genau) {\n\t      Latitude = HALF_PI;\n\t      Height = -b;\n\t      return {\n\t        x: p.x,\n\t        y: p.y,\n\t        z: p.z\n\t      };\n\t    }\n\t  } else {\n\t    /*  ellipsoidal (geodetic) longitude\n\t     *  interval: -PI < Longitude <= +PI */\n\t    Longitude = Math.atan2(Y, X);\n\t  }\n\n\t  /* --------------------------------------------------------------\n\t   * Following iterative algorithm was developped by\n\t   * \"Institut for Erdmessung\", University of Hannover, July 1988.\n\t   * Internet: www.ife.uni-hannover.de\n\t   * Iterative computation of CPHI,SPHI and Height.\n\t   * Iteration of CPHI and SPHI to 10**-12 radian resp.\n\t   * 2*10**-7 arcsec.\n\t   * --------------------------------------------------------------\n\t   */\n\t  CT = Z / RR;\n\t  ST = P / RR;\n\t  RX = 1.0 / Math.sqrt(1.0 - es * (2.0 - es) * ST * ST);\n\t  CPHI0 = ST * (1.0 - es) * RX;\n\t  SPHI0 = CT * RX;\n\t  iter = 0;\n\n\t  /* loop to find sin(Latitude) resp. Latitude\n\t   * until |sin(Latitude(iter)-Latitude(iter-1))| < genau */\n\t  do {\n\t    iter++;\n\t    RN = a / Math.sqrt(1.0 - es * SPHI0 * SPHI0);\n\n\t    /*  ellipsoidal (geodetic) height */\n\t    Height = P * CPHI0 + Z * SPHI0 - RN * (1.0 - es * SPHI0 * SPHI0);\n\n\t    RK = es * RN / (RN + Height);\n\t    RX = 1.0 / Math.sqrt(1.0 - RK * (2.0 - RK) * ST * ST);\n\t    CPHI = ST * (1.0 - RK) * RX;\n\t    SPHI = CT * RX;\n\t    SDPHI = SPHI * CPHI0 - CPHI * SPHI0;\n\t    CPHI0 = CPHI;\n\t    SPHI0 = SPHI;\n\t  }\n\t  while (SDPHI * SDPHI > genau2 && iter < maxiter);\n\n\t  /*      ellipsoidal (geodetic) latitude */\n\t  Latitude = Math.atan(SPHI / Math.abs(CPHI));\n\t  return {\n\t    x: Longitude,\n\t    y: Latitude,\n\t    z: Height\n\t  };\n\t} // cs_geocentric_to_geodetic()\n\n\t/****************************************************************/\n\t// pj_geocentic_to_wgs84( p )\n\t//  p = point to transform in geocentric coordinates (x,y,z)\n\n\n\t/** point object, nothing fancy, just allows values to be\n\t    passed back and forth by reference rather than by value.\n\t    Other point classes may be used as long as they have\n\t    x and y properties, which will get modified in the transform method.\n\t*/\n\tfunction geocentricToWgs84(p, datum_type, datum_params) {\n\n\t  if (datum_type === PJD_3PARAM) {\n\t    // if( x[io] === HUGE_VAL )\n\t    //    continue;\n\t    return {\n\t      x: p.x + datum_params[0],\n\t      y: p.y + datum_params[1],\n\t      z: p.z + datum_params[2],\n\t    };\n\t  } else if (datum_type === PJD_7PARAM) {\n\t    var Dx_BF = datum_params[0];\n\t    var Dy_BF = datum_params[1];\n\t    var Dz_BF = datum_params[2];\n\t    var Rx_BF = datum_params[3];\n\t    var Ry_BF = datum_params[4];\n\t    var Rz_BF = datum_params[5];\n\t    var M_BF = datum_params[6];\n\t    // if( x[io] === HUGE_VAL )\n\t    //    continue;\n\t    return {\n\t      x: M_BF * (p.x - Rz_BF * p.y + Ry_BF * p.z) + Dx_BF,\n\t      y: M_BF * (Rz_BF * p.x + p.y - Rx_BF * p.z) + Dy_BF,\n\t      z: M_BF * (-Ry_BF * p.x + Rx_BF * p.y + p.z) + Dz_BF\n\t    };\n\t  }\n\t} // cs_geocentric_to_wgs84\n\n\t/****************************************************************/\n\t// pj_geocentic_from_wgs84()\n\t//  coordinate system definition,\n\t//  point to transform in geocentric coordinates (x,y,z)\n\tfunction geocentricFromWgs84(p, datum_type, datum_params) {\n\n\t  if (datum_type === PJD_3PARAM) {\n\t    //if( x[io] === HUGE_VAL )\n\t    //    continue;\n\t    return {\n\t      x: p.x - datum_params[0],\n\t      y: p.y - datum_params[1],\n\t      z: p.z - datum_params[2],\n\t    };\n\n\t  } else if (datum_type === PJD_7PARAM) {\n\t    var Dx_BF = datum_params[0];\n\t    var Dy_BF = datum_params[1];\n\t    var Dz_BF = datum_params[2];\n\t    var Rx_BF = datum_params[3];\n\t    var Ry_BF = datum_params[4];\n\t    var Rz_BF = datum_params[5];\n\t    var M_BF = datum_params[6];\n\t    var x_tmp = (p.x - Dx_BF) / M_BF;\n\t    var y_tmp = (p.y - Dy_BF) / M_BF;\n\t    var z_tmp = (p.z - Dz_BF) / M_BF;\n\t    //if( x[io] === HUGE_VAL )\n\t    //    continue;\n\n\t    return {\n\t      x: x_tmp + Rz_BF * y_tmp - Ry_BF * z_tmp,\n\t      y: -Rz_BF * x_tmp + y_tmp + Rx_BF * z_tmp,\n\t      z: Ry_BF * x_tmp - Rx_BF * y_tmp + z_tmp\n\t    };\n\t  } //cs_geocentric_from_wgs84()\n\t}\n\n\tfunction checkParams(type) {\n\t  return (type === PJD_3PARAM || type === PJD_7PARAM);\n\t}\n\n\tvar datum_transform = function(source, dest, point) {\n\t  // Short cut if the datums are identical.\n\t  if (compareDatums(source, dest)) {\n\t    return point; // in this case, zero is sucess,\n\t    // whereas cs_compare_datums returns 1 to indicate TRUE\n\t    // confusing, should fix this\n\t  }\n\n\t  // Explicitly skip datum transform by setting 'datum=none' as parameter for either source or dest\n\t  if (source.datum_type === PJD_NODATUM || dest.datum_type === PJD_NODATUM) {\n\t    return point;\n\t  }\n\n\t  // If this datum requires grid shifts, then apply it to geodetic coordinates.\n\n\t  // Do we need to go through geocentric coordinates?\n\t  if (source.es === dest.es && source.a === dest.a && !checkParams(source.datum_type) &&  !checkParams(dest.datum_type)) {\n\t    return point;\n\t  }\n\n\t  // Convert to geocentric coordinates.\n\t  point = geodeticToGeocentric(point, source.es, source.a);\n\t  // Convert between datums\n\t  if (checkParams(source.datum_type)) {\n\t    point = geocentricToWgs84(point, source.datum_type, source.datum_params);\n\t  }\n\t  if (checkParams(dest.datum_type)) {\n\t    point = geocentricFromWgs84(point, dest.datum_type, dest.datum_params);\n\t  }\n\t  return geocentricToGeodetic(point, dest.es, dest.a, dest.b);\n\n\t};\n\n\tvar adjust_axis = function(crs, denorm, point) {\n\t  var xin = point.x,\n\t    yin = point.y,\n\t    zin = point.z || 0.0;\n\t  var v, t, i;\n\t  var out = {};\n\t  for (i = 0; i < 3; i++) {\n\t    if (denorm && i === 2 && point.z === undefined) {\n\t      continue;\n\t    }\n\t    if (i === 0) {\n\t      v = xin;\n\t      t = 'x';\n\t    }\n\t    else if (i === 1) {\n\t      v = yin;\n\t      t = 'y';\n\t    }\n\t    else {\n\t      v = zin;\n\t      t = 'z';\n\t    }\n\t    switch (crs.axis[i]) {\n\t    case 'e':\n\t      out[t] = v;\n\t      break;\n\t    case 'w':\n\t      out[t] = -v;\n\t      break;\n\t    case 'n':\n\t      out[t] = v;\n\t      break;\n\t    case 's':\n\t      out[t] = -v;\n\t      break;\n\t    case 'u':\n\t      if (point[t] !== undefined) {\n\t        out.z = v;\n\t      }\n\t      break;\n\t    case 'd':\n\t      if (point[t] !== undefined) {\n\t        out.z = -v;\n\t      }\n\t      break;\n\t    default:\n\t      //console.log(\"ERROR: unknow axis (\"+crs.axis[i]+\") - check definition of \"+crs.projName);\n\t      return null;\n\t    }\n\t  }\n\t  return out;\n\t};\n\n\tvar toPoint = function (array){\n\t  var out = {\n\t    x: array[0],\n\t    y: array[1]\n\t  };\n\t  if (array.length>2) {\n\t    out.z = array[2];\n\t  }\n\t  if (array.length>3) {\n\t    out.m = array[3];\n\t  }\n\t  return out;\n\t};\n\n\tvar checkSanity = function (point) {\n\t  checkCoord(point.x);\n\t  checkCoord(point.y);\n\t};\n\tfunction checkCoord(num) {\n\t  if (typeof Number.isFinite === 'function') {\n\t    if (Number.isFinite(num)) {\n\t      return;\n\t    }\n\t    throw new TypeError('coordinates must be finite numbers');\n\t  }\n\t  if (typeof num !== 'number' || num !== num || !isFinite(num)) {\n\t    throw new TypeError('coordinates must be finite numbers');\n\t  }\n\t}\n\n\tfunction checkNotWGS(source, dest) {\n\t  return ((source.datum.datum_type === PJD_3PARAM || source.datum.datum_type === PJD_7PARAM) && dest.datumCode !== 'WGS84') || ((dest.datum.datum_type === PJD_3PARAM || dest.datum.datum_type === PJD_7PARAM) && source.datumCode !== 'WGS84');\n\t}\n\n\tfunction transform(source, dest, point) {\n\t  var wgs84;\n\t  if (Array.isArray(point)) {\n\t    point = toPoint(point);\n\t  }\n\t  checkSanity(point);\n\t  // Workaround for datum shifts towgs84, if either source or destination projection is not wgs84\n\t  if (source.datum && dest.datum && checkNotWGS(source, dest)) {\n\t    wgs84 = new Projection('WGS84');\n\t    point = transform(source, wgs84, point);\n\t    source = wgs84;\n\t  }\n\t  // DGR, 2010/11/12\n\t  if (source.axis !== 'enu') {\n\t    point = adjust_axis(source, false, point);\n\t  }\n\t  // Transform source points to long/lat, if they aren't already.\n\t  if (source.projName === 'longlat') {\n\t    point = {\n\t      x: point.x * D2R,\n\t      y: point.y * D2R\n\t    };\n\t  }\n\t  else {\n\t    if (source.to_meter) {\n\t      point = {\n\t        x: point.x * source.to_meter,\n\t        y: point.y * source.to_meter\n\t      };\n\t    }\n\t    point = source.inverse(point); // Convert Cartesian to longlat\n\t  }\n\t  // Adjust for the prime meridian if necessary\n\t  if (source.from_greenwich) {\n\t    point.x += source.from_greenwich;\n\t  }\n\n\t  // Convert datums if needed, and if possible.\n\t  point = datum_transform(source.datum, dest.datum, point);\n\n\t  // Adjust for the prime meridian if necessary\n\t  if (dest.from_greenwich) {\n\t    point = {\n\t      x: point.x - dest.from_greenwich,\n\t      y: point.y\n\t    };\n\t  }\n\n\t  if (dest.projName === 'longlat') {\n\t    // convert radians to decimal degrees\n\t    point = {\n\t      x: point.x * R2D,\n\t      y: point.y * R2D\n\t    };\n\t  } else { // else project\n\t    point = dest.forward(point);\n\t    if (dest.to_meter) {\n\t      point = {\n\t        x: point.x / dest.to_meter,\n\t        y: point.y / dest.to_meter\n\t      };\n\t    }\n\t  }\n\n\t  // DGR, 2010/11/12\n\t  if (dest.axis !== 'enu') {\n\t    return adjust_axis(dest, true, point);\n\t  }\n\n\t  return point;\n\t}\n\n\tvar wgs84 = Projection('WGS84');\n\n\tfunction transformer(from, to, coords) {\n\t  var transformedArray, out, keys;\n\t  if (Array.isArray(coords)) {\n\t    transformedArray = transform(from, to, coords);\n\t    if (coords.length === 3) {\n\t      return [transformedArray.x, transformedArray.y, transformedArray.z];\n\t    }\n\t    else {\n\t      return [transformedArray.x, transformedArray.y];\n\t    }\n\t  }\n\t  else {\n\t    out = transform(from, to, coords);\n\t    keys = Object.keys(coords);\n\t    if (keys.length === 2) {\n\t      return out;\n\t    }\n\t    keys.forEach(function (key) {\n\t      if (key === 'x' || key === 'y') {\n\t        return;\n\t      }\n\t      out[key] = coords[key];\n\t    });\n\t    return out;\n\t  }\n\t}\n\n\tfunction checkProj(item) {\n\t  if (item instanceof Projection) {\n\t    return item;\n\t  }\n\t  if (item.oProj) {\n\t    return item.oProj;\n\t  }\n\t  return Projection(item);\n\t}\n\tfunction proj4$1(fromProj, toProj, coord) {\n\t  fromProj = checkProj(fromProj);\n\t  var single = false;\n\t  var obj;\n\t  if (typeof toProj === 'undefined') {\n\t    toProj = fromProj;\n\t    fromProj = wgs84;\n\t    single = true;\n\t  }\n\t  else if (typeof toProj.x !== 'undefined' || Array.isArray(toProj)) {\n\t    coord = toProj;\n\t    toProj = fromProj;\n\t    fromProj = wgs84;\n\t    single = true;\n\t  }\n\t  toProj = checkProj(toProj);\n\t  if (coord) {\n\t    return transformer(fromProj, toProj, coord);\n\t  }\n\t  else {\n\t    obj = {\n\t      forward: function(coords) {\n\t        return transformer(fromProj, toProj, coords);\n\t      },\n\t      inverse: function(coords) {\n\t        return transformer(toProj, fromProj, coords);\n\t      }\n\t    };\n\t    if (single) {\n\t      obj.oProj = toProj;\n\t    }\n\t    return obj;\n\t  }\n\t}\n\n\t/**\n\t * UTM zones are grouped, and assigned to one of a group of 6\n\t * sets.\n\t *\n\t * {int} @private\n\t */\n\tvar NUM_100K_SETS = 6;\n\n\t/**\n\t * The column letters (for easting) of the lower left value, per\n\t * set.\n\t *\n\t * {string} @private\n\t */\n\tvar SET_ORIGIN_COLUMN_LETTERS = 'AJSAJS';\n\n\t/**\n\t * The row letters (for northing) of the lower left value, per\n\t * set.\n\t *\n\t * {string} @private\n\t */\n\tvar SET_ORIGIN_ROW_LETTERS = 'AFAFAF';\n\n\tvar A = 65; // A\n\tvar I = 73; // I\n\tvar O = 79; // O\n\tvar V = 86; // V\n\tvar Z = 90; // Z\n\tvar mgrs = {\n\t  forward: forward$1,\n\t  inverse: inverse$1,\n\t  toPoint: toPoint$1\n\t};\n\t/**\n\t * Conversion of lat/lon to MGRS.\n\t *\n\t * @param {object} ll Object literal with lat and lon properties on a\n\t *     WGS84 ellipsoid.\n\t * @param {int} accuracy Accuracy in digits (5 for 1 m, 4 for 10 m, 3 for\n\t *      100 m, 2 for 1000 m or 1 for 10000 m). Optional, default is 5.\n\t * @return {string} the MGRS string for the given location and accuracy.\n\t */\n\tfunction forward$1(ll, accuracy) {\n\t  accuracy = accuracy || 5; // default accuracy 1m\n\t  return encode(LLtoUTM({\n\t    lat: ll[1],\n\t    lon: ll[0]\n\t  }), accuracy);\n\t}\n\n\t/**\n\t * Conversion of MGRS to lat/lon.\n\t *\n\t * @param {string} mgrs MGRS string.\n\t * @return {array} An array with left (longitude), bottom (latitude), right\n\t *     (longitude) and top (latitude) values in WGS84, representing the\n\t *     bounding box for the provided MGRS reference.\n\t */\n\tfunction inverse$1(mgrs) {\n\t  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n\t  if (bbox.lat && bbox.lon) {\n\t    return [bbox.lon, bbox.lat, bbox.lon, bbox.lat];\n\t  }\n\t  return [bbox.left, bbox.bottom, bbox.right, bbox.top];\n\t}\n\n\tfunction toPoint$1(mgrs) {\n\t  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n\t  if (bbox.lat && bbox.lon) {\n\t    return [bbox.lon, bbox.lat];\n\t  }\n\t  return [(bbox.left + bbox.right) / 2, (bbox.top + bbox.bottom) / 2];\n\t}\n\t/**\n\t * Conversion from degrees to radians.\n\t *\n\t * @private\n\t * @param {number} deg the angle in degrees.\n\t * @return {number} the angle in radians.\n\t */\n\tfunction degToRad(deg) {\n\t  return (deg * (Math.PI / 180.0));\n\t}\n\n\t/**\n\t * Conversion from radians to degrees.\n\t *\n\t * @private\n\t * @param {number} rad the angle in radians.\n\t * @return {number} the angle in degrees.\n\t */\n\tfunction radToDeg(rad) {\n\t  return (180.0 * (rad / Math.PI));\n\t}\n\n\t/**\n\t * Converts a set of Longitude and Latitude co-ordinates to UTM\n\t * using the WGS84 ellipsoid.\n\t *\n\t * @private\n\t * @param {object} ll Object literal with lat and lon properties\n\t *     representing the WGS84 coordinate to be converted.\n\t * @return {object} Object literal containing the UTM value with easting,\n\t *     northing, zoneNumber and zoneLetter properties, and an optional\n\t *     accuracy property in digits. Returns null if the conversion failed.\n\t */\n\tfunction LLtoUTM(ll) {\n\t  var Lat = ll.lat;\n\t  var Long = ll.lon;\n\t  var a = 6378137.0; //ellip.radius;\n\t  var eccSquared = 0.00669438; //ellip.eccsq;\n\t  var k0 = 0.9996;\n\t  var LongOrigin;\n\t  var eccPrimeSquared;\n\t  var N, T, C, A, M;\n\t  var LatRad = degToRad(Lat);\n\t  var LongRad = degToRad(Long);\n\t  var LongOriginRad;\n\t  var ZoneNumber;\n\t  // (int)\n\t  ZoneNumber = Math.floor((Long + 180) / 6) + 1;\n\n\t  //Make sure the longitude 180.00 is in Zone 60\n\t  if (Long === 180) {\n\t    ZoneNumber = 60;\n\t  }\n\n\t  // Special zone for Norway\n\t  if (Lat >= 56.0 && Lat < 64.0 && Long >= 3.0 && Long < 12.0) {\n\t    ZoneNumber = 32;\n\t  }\n\n\t  // Special zones for Svalbard\n\t  if (Lat >= 72.0 && Lat < 84.0) {\n\t    if (Long >= 0.0 && Long < 9.0) {\n\t      ZoneNumber = 31;\n\t    }\n\t    else if (Long >= 9.0 && Long < 21.0) {\n\t      ZoneNumber = 33;\n\t    }\n\t    else if (Long >= 21.0 && Long < 33.0) {\n\t      ZoneNumber = 35;\n\t    }\n\t    else if (Long >= 33.0 && Long < 42.0) {\n\t      ZoneNumber = 37;\n\t    }\n\t  }\n\n\t  LongOrigin = (ZoneNumber - 1) * 6 - 180 + 3; //+3 puts origin\n\t  // in middle of\n\t  // zone\n\t  LongOriginRad = degToRad(LongOrigin);\n\n\t  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n\t  N = a / Math.sqrt(1 - eccSquared * Math.sin(LatRad) * Math.sin(LatRad));\n\t  T = Math.tan(LatRad) * Math.tan(LatRad);\n\t  C = eccPrimeSquared * Math.cos(LatRad) * Math.cos(LatRad);\n\t  A = Math.cos(LatRad) * (LongRad - LongOriginRad);\n\n\t  M = a * ((1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256) * LatRad - (3 * eccSquared / 8 + 3 * eccSquared * eccSquared / 32 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(2 * LatRad) + (15 * eccSquared * eccSquared / 256 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(4 * LatRad) - (35 * eccSquared * eccSquared * eccSquared / 3072) * Math.sin(6 * LatRad));\n\n\t  var UTMEasting = (k0 * N * (A + (1 - T + C) * A * A * A / 6.0 + (5 - 18 * T + T * T + 72 * C - 58 * eccPrimeSquared) * A * A * A * A * A / 120.0) + 500000.0);\n\n\t  var UTMNorthing = (k0 * (M + N * Math.tan(LatRad) * (A * A / 2 + (5 - T + 9 * C + 4 * C * C) * A * A * A * A / 24.0 + (61 - 58 * T + T * T + 600 * C - 330 * eccPrimeSquared) * A * A * A * A * A * A / 720.0)));\n\t  if (Lat < 0.0) {\n\t    UTMNorthing += 10000000.0; //10000000 meter offset for\n\t    // southern hemisphere\n\t  }\n\n\t  return {\n\t    northing: Math.round(UTMNorthing),\n\t    easting: Math.round(UTMEasting),\n\t    zoneNumber: ZoneNumber,\n\t    zoneLetter: getLetterDesignator(Lat)\n\t  };\n\t}\n\n\t/**\n\t * Converts UTM coords to lat/long, using the WGS84 ellipsoid. This is a convenience\n\t * class where the Zone can be specified as a single string eg.\"60N\" which\n\t * is then broken down into the ZoneNumber and ZoneLetter.\n\t *\n\t * @private\n\t * @param {object} utm An object literal with northing, easting, zoneNumber\n\t *     and zoneLetter properties. If an optional accuracy property is\n\t *     provided (in meters), a bounding box will be returned instead of\n\t *     latitude and longitude.\n\t * @return {object} An object literal containing either lat and lon values\n\t *     (if no accuracy was provided), or top, right, bottom and left values\n\t *     for the bounding box calculated according to the provided accuracy.\n\t *     Returns null if the conversion failed.\n\t */\n\tfunction UTMtoLL(utm) {\n\n\t  var UTMNorthing = utm.northing;\n\t  var UTMEasting = utm.easting;\n\t  var zoneLetter = utm.zoneLetter;\n\t  var zoneNumber = utm.zoneNumber;\n\t  // check the ZoneNummber is valid\n\t  if (zoneNumber < 0 || zoneNumber > 60) {\n\t    return null;\n\t  }\n\n\t  var k0 = 0.9996;\n\t  var a = 6378137.0; //ellip.radius;\n\t  var eccSquared = 0.00669438; //ellip.eccsq;\n\t  var eccPrimeSquared;\n\t  var e1 = (1 - Math.sqrt(1 - eccSquared)) / (1 + Math.sqrt(1 - eccSquared));\n\t  var N1, T1, C1, R1, D, M;\n\t  var LongOrigin;\n\t  var mu, phi1Rad;\n\n\t  // remove 500,000 meter offset for longitude\n\t  var x = UTMEasting - 500000.0;\n\t  var y = UTMNorthing;\n\n\t  // We must know somehow if we are in the Northern or Southern\n\t  // hemisphere, this is the only time we use the letter So even\n\t  // if the Zone letter isn't exactly correct it should indicate\n\t  // the hemisphere correctly\n\t  if (zoneLetter < 'N') {\n\t    y -= 10000000.0; // remove 10,000,000 meter offset used\n\t    // for southern hemisphere\n\t  }\n\n\t  // There are 60 zones with zone 1 being at West -180 to -174\n\t  LongOrigin = (zoneNumber - 1) * 6 - 180 + 3; // +3 puts origin\n\t  // in middle of\n\t  // zone\n\n\t  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n\t  M = y / k0;\n\t  mu = M / (a * (1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256));\n\n\t  phi1Rad = mu + (3 * e1 / 2 - 27 * e1 * e1 * e1 / 32) * Math.sin(2 * mu) + (21 * e1 * e1 / 16 - 55 * e1 * e1 * e1 * e1 / 32) * Math.sin(4 * mu) + (151 * e1 * e1 * e1 / 96) * Math.sin(6 * mu);\n\t  // double phi1 = ProjMath.radToDeg(phi1Rad);\n\n\t  N1 = a / Math.sqrt(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad));\n\t  T1 = Math.tan(phi1Rad) * Math.tan(phi1Rad);\n\t  C1 = eccPrimeSquared * Math.cos(phi1Rad) * Math.cos(phi1Rad);\n\t  R1 = a * (1 - eccSquared) / Math.pow(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad), 1.5);\n\t  D = x / (N1 * k0);\n\n\t  var lat = phi1Rad - (N1 * Math.tan(phi1Rad) / R1) * (D * D / 2 - (5 + 3 * T1 + 10 * C1 - 4 * C1 * C1 - 9 * eccPrimeSquared) * D * D * D * D / 24 + (61 + 90 * T1 + 298 * C1 + 45 * T1 * T1 - 252 * eccPrimeSquared - 3 * C1 * C1) * D * D * D * D * D * D / 720);\n\t  lat = radToDeg(lat);\n\n\t  var lon = (D - (1 + 2 * T1 + C1) * D * D * D / 6 + (5 - 2 * C1 + 28 * T1 - 3 * C1 * C1 + 8 * eccPrimeSquared + 24 * T1 * T1) * D * D * D * D * D / 120) / Math.cos(phi1Rad);\n\t  lon = LongOrigin + radToDeg(lon);\n\n\t  var result;\n\t  if (utm.accuracy) {\n\t    var topRight = UTMtoLL({\n\t      northing: utm.northing + utm.accuracy,\n\t      easting: utm.easting + utm.accuracy,\n\t      zoneLetter: utm.zoneLetter,\n\t      zoneNumber: utm.zoneNumber\n\t    });\n\t    result = {\n\t      top: topRight.lat,\n\t      right: topRight.lon,\n\t      bottom: lat,\n\t      left: lon\n\t    };\n\t  }\n\t  else {\n\t    result = {\n\t      lat: lat,\n\t      lon: lon\n\t    };\n\t  }\n\t  return result;\n\t}\n\n\t/**\n\t * Calculates the MGRS letter designator for the given latitude.\n\t *\n\t * @private\n\t * @param {number} lat The latitude in WGS84 to get the letter designator\n\t *     for.\n\t * @return {char} The letter designator.\n\t */\n\tfunction getLetterDesignator(lat) {\n\t  //This is here as an error flag to show that the Latitude is\n\t  //outside MGRS limits\n\t  var LetterDesignator = 'Z';\n\n\t  if ((84 >= lat) && (lat >= 72)) {\n\t    LetterDesignator = 'X';\n\t  }\n\t  else if ((72 > lat) && (lat >= 64)) {\n\t    LetterDesignator = 'W';\n\t  }\n\t  else if ((64 > lat) && (lat >= 56)) {\n\t    LetterDesignator = 'V';\n\t  }\n\t  else if ((56 > lat) && (lat >= 48)) {\n\t    LetterDesignator = 'U';\n\t  }\n\t  else if ((48 > lat) && (lat >= 40)) {\n\t    LetterDesignator = 'T';\n\t  }\n\t  else if ((40 > lat) && (lat >= 32)) {\n\t    LetterDesignator = 'S';\n\t  }\n\t  else if ((32 > lat) && (lat >= 24)) {\n\t    LetterDesignator = 'R';\n\t  }\n\t  else if ((24 > lat) && (lat >= 16)) {\n\t    LetterDesignator = 'Q';\n\t  }\n\t  else if ((16 > lat) && (lat >= 8)) {\n\t    LetterDesignator = 'P';\n\t  }\n\t  else if ((8 > lat) && (lat >= 0)) {\n\t    LetterDesignator = 'N';\n\t  }\n\t  else if ((0 > lat) && (lat >= -8)) {\n\t    LetterDesignator = 'M';\n\t  }\n\t  else if ((-8 > lat) && (lat >= -16)) {\n\t    LetterDesignator = 'L';\n\t  }\n\t  else if ((-16 > lat) && (lat >= -24)) {\n\t    LetterDesignator = 'K';\n\t  }\n\t  else if ((-24 > lat) && (lat >= -32)) {\n\t    LetterDesignator = 'J';\n\t  }\n\t  else if ((-32 > lat) && (lat >= -40)) {\n\t    LetterDesignator = 'H';\n\t  }\n\t  else if ((-40 > lat) && (lat >= -48)) {\n\t    LetterDesignator = 'G';\n\t  }\n\t  else if ((-48 > lat) && (lat >= -56)) {\n\t    LetterDesignator = 'F';\n\t  }\n\t  else if ((-56 > lat) && (lat >= -64)) {\n\t    LetterDesignator = 'E';\n\t  }\n\t  else if ((-64 > lat) && (lat >= -72)) {\n\t    LetterDesignator = 'D';\n\t  }\n\t  else if ((-72 > lat) && (lat >= -80)) {\n\t    LetterDesignator = 'C';\n\t  }\n\t  return LetterDesignator;\n\t}\n\n\t/**\n\t * Encodes a UTM location as MGRS string.\n\t *\n\t * @private\n\t * @param {object} utm An object literal with easting, northing,\n\t *     zoneLetter, zoneNumber\n\t * @param {number} accuracy Accuracy in digits (1-5).\n\t * @return {string} MGRS string for the given UTM location.\n\t */\n\tfunction encode(utm, accuracy) {\n\t  // prepend with leading zeroes\n\t  var seasting = \"00000\" + utm.easting,\n\t    snorthing = \"00000\" + utm.northing;\n\n\t  return utm.zoneNumber + utm.zoneLetter + get100kID(utm.easting, utm.northing, utm.zoneNumber) + seasting.substr(seasting.length - 5, accuracy) + snorthing.substr(snorthing.length - 5, accuracy);\n\t}\n\n\t/**\n\t * Get the two letter 100k designator for a given UTM easting,\n\t * northing and zone number value.\n\t *\n\t * @private\n\t * @param {number} easting\n\t * @param {number} northing\n\t * @param {number} zoneNumber\n\t * @return the two letter 100k designator for the given UTM location.\n\t */\n\tfunction get100kID(easting, northing, zoneNumber) {\n\t  var setParm = get100kSetForZone(zoneNumber);\n\t  var setColumn = Math.floor(easting / 100000);\n\t  var setRow = Math.floor(northing / 100000) % 20;\n\t  return getLetter100kID(setColumn, setRow, setParm);\n\t}\n\n\t/**\n\t * Given a UTM zone number, figure out the MGRS 100K set it is in.\n\t *\n\t * @private\n\t * @param {number} i An UTM zone number.\n\t * @return {number} the 100k set the UTM zone is in.\n\t */\n\tfunction get100kSetForZone(i) {\n\t  var setParm = i % NUM_100K_SETS;\n\t  if (setParm === 0) {\n\t    setParm = NUM_100K_SETS;\n\t  }\n\n\t  return setParm;\n\t}\n\n\t/**\n\t * Get the two-letter MGRS 100k designator given information\n\t * translated from the UTM northing, easting and zone number.\n\t *\n\t * @private\n\t * @param {number} column the column index as it relates to the MGRS\n\t *        100k set spreadsheet, created from the UTM easting.\n\t *        Values are 1-8.\n\t * @param {number} row the row index as it relates to the MGRS 100k set\n\t *        spreadsheet, created from the UTM northing value. Values\n\t *        are from 0-19.\n\t * @param {number} parm the set block, as it relates to the MGRS 100k set\n\t *        spreadsheet, created from the UTM zone. Values are from\n\t *        1-60.\n\t * @return two letter MGRS 100k code.\n\t */\n\tfunction getLetter100kID(column, row, parm) {\n\t  // colOrigin and rowOrigin are the letters at the origin of the set\n\t  var index = parm - 1;\n\t  var colOrigin = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(index);\n\t  var rowOrigin = SET_ORIGIN_ROW_LETTERS.charCodeAt(index);\n\n\t  // colInt and rowInt are the letters to build to return\n\t  var colInt = colOrigin + column - 1;\n\t  var rowInt = rowOrigin + row;\n\t  var rollover = false;\n\n\t  if (colInt > Z) {\n\t    colInt = colInt - Z + A - 1;\n\t    rollover = true;\n\t  }\n\n\t  if (colInt === I || (colOrigin < I && colInt > I) || ((colInt > I || colOrigin < I) && rollover)) {\n\t    colInt++;\n\t  }\n\n\t  if (colInt === O || (colOrigin < O && colInt > O) || ((colInt > O || colOrigin < O) && rollover)) {\n\t    colInt++;\n\n\t    if (colInt === I) {\n\t      colInt++;\n\t    }\n\t  }\n\n\t  if (colInt > Z) {\n\t    colInt = colInt - Z + A - 1;\n\t  }\n\n\t  if (rowInt > V) {\n\t    rowInt = rowInt - V + A - 1;\n\t    rollover = true;\n\t  }\n\t  else {\n\t    rollover = false;\n\t  }\n\n\t  if (((rowInt === I) || ((rowOrigin < I) && (rowInt > I))) || (((rowInt > I) || (rowOrigin < I)) && rollover)) {\n\t    rowInt++;\n\t  }\n\n\t  if (((rowInt === O) || ((rowOrigin < O) && (rowInt > O))) || (((rowInt > O) || (rowOrigin < O)) && rollover)) {\n\t    rowInt++;\n\n\t    if (rowInt === I) {\n\t      rowInt++;\n\t    }\n\t  }\n\n\t  if (rowInt > V) {\n\t    rowInt = rowInt - V + A - 1;\n\t  }\n\n\t  var twoLetter = String.fromCharCode(colInt) + String.fromCharCode(rowInt);\n\t  return twoLetter;\n\t}\n\n\t/**\n\t * Decode the UTM parameters from a MGRS string.\n\t *\n\t * @private\n\t * @param {string} mgrsString an UPPERCASE coordinate string is expected.\n\t * @return {object} An object literal with easting, northing, zoneLetter,\n\t *     zoneNumber and accuracy (in meters) properties.\n\t */\n\tfunction decode(mgrsString) {\n\n\t  if (mgrsString && mgrsString.length === 0) {\n\t    throw (\"MGRSPoint coverting from nothing\");\n\t  }\n\n\t  var length = mgrsString.length;\n\n\t  var hunK = null;\n\t  var sb = \"\";\n\t  var testChar;\n\t  var i = 0;\n\n\t  // get Zone number\n\t  while (!(/[A-Z]/).test(testChar = mgrsString.charAt(i))) {\n\t    if (i >= 2) {\n\t      throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n\t    }\n\t    sb += testChar;\n\t    i++;\n\t  }\n\n\t  var zoneNumber = parseInt(sb, 10);\n\n\t  if (i === 0 || i + 3 > length) {\n\t    // A good MGRS string has to be 4-5 digits long,\n\t    // ##AAA/#AAA at least.\n\t    throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n\t  }\n\n\t  var zoneLetter = mgrsString.charAt(i++);\n\n\t  // Should we check the zone letter here? Why not.\n\t  if (zoneLetter <= 'A' || zoneLetter === 'B' || zoneLetter === 'Y' || zoneLetter >= 'Z' || zoneLetter === 'I' || zoneLetter === 'O') {\n\t    throw (\"MGRSPoint zone letter \" + zoneLetter + \" not handled: \" + mgrsString);\n\t  }\n\n\t  hunK = mgrsString.substring(i, i += 2);\n\n\t  var set = get100kSetForZone(zoneNumber);\n\n\t  var east100k = getEastingFromChar(hunK.charAt(0), set);\n\t  var north100k = getNorthingFromChar(hunK.charAt(1), set);\n\n\t  // We have a bug where the northing may be 2000000 too low.\n\t  // How\n\t  // do we know when to roll over?\n\n\t  while (north100k < getMinNorthing(zoneLetter)) {\n\t    north100k += 2000000;\n\t  }\n\n\t  // calculate the char index for easting/northing separator\n\t  var remainder = length - i;\n\n\t  if (remainder % 2 !== 0) {\n\t    throw (\"MGRSPoint has to have an even number \\nof digits after the zone letter and two 100km letters - front \\nhalf for easting meters, second half for \\nnorthing meters\" + mgrsString);\n\t  }\n\n\t  var sep = remainder / 2;\n\n\t  var sepEasting = 0.0;\n\t  var sepNorthing = 0.0;\n\t  var accuracyBonus, sepEastingString, sepNorthingString, easting, northing;\n\t  if (sep > 0) {\n\t    accuracyBonus = 100000.0 / Math.pow(10, sep);\n\t    sepEastingString = mgrsString.substring(i, i + sep);\n\t    sepEasting = parseFloat(sepEastingString) * accuracyBonus;\n\t    sepNorthingString = mgrsString.substring(i + sep);\n\t    sepNorthing = parseFloat(sepNorthingString) * accuracyBonus;\n\t  }\n\n\t  easting = sepEasting + east100k;\n\t  northing = sepNorthing + north100k;\n\n\t  return {\n\t    easting: easting,\n\t    northing: northing,\n\t    zoneLetter: zoneLetter,\n\t    zoneNumber: zoneNumber,\n\t    accuracy: accuracyBonus\n\t  };\n\t}\n\n\t/**\n\t * Given the first letter from a two-letter MGRS 100k zone, and given the\n\t * MGRS table set for the zone number, figure out the easting value that\n\t * should be added to the other, secondary easting value.\n\t *\n\t * @private\n\t * @param {char} e The first letter from a two-letter MGRS 100k zone.\n\t * @param {number} set The MGRS table set for the zone number.\n\t * @return {number} The easting value for the given letter and set.\n\t */\n\tfunction getEastingFromChar(e, set) {\n\t  // colOrigin is the letter at the origin of the set for the\n\t  // column\n\t  var curCol = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(set - 1);\n\t  var eastingValue = 100000.0;\n\t  var rewindMarker = false;\n\n\t  while (curCol !== e.charCodeAt(0)) {\n\t    curCol++;\n\t    if (curCol === I) {\n\t      curCol++;\n\t    }\n\t    if (curCol === O) {\n\t      curCol++;\n\t    }\n\t    if (curCol > Z) {\n\t      if (rewindMarker) {\n\t        throw (\"Bad character: \" + e);\n\t      }\n\t      curCol = A;\n\t      rewindMarker = true;\n\t    }\n\t    eastingValue += 100000.0;\n\t  }\n\n\t  return eastingValue;\n\t}\n\n\t/**\n\t * Given the second letter from a two-letter MGRS 100k zone, and given the\n\t * MGRS table set for the zone number, figure out the northing value that\n\t * should be added to the other, secondary northing value. You have to\n\t * remember that Northings are determined from the equator, and the vertical\n\t * cycle of letters mean a 2000000 additional northing meters. This happens\n\t * approx. every 18 degrees of latitude. This method does *NOT* count any\n\t * additional northings. You have to figure out how many 2000000 meters need\n\t * to be added for the zone letter of the MGRS coordinate.\n\t *\n\t * @private\n\t * @param {char} n Second letter of the MGRS 100k zone\n\t * @param {number} set The MGRS table set number, which is dependent on the\n\t *     UTM zone number.\n\t * @return {number} The northing value for the given letter and set.\n\t */\n\tfunction getNorthingFromChar(n, set) {\n\n\t  if (n > 'V') {\n\t    throw (\"MGRSPoint given invalid Northing \" + n);\n\t  }\n\n\t  // rowOrigin is the letter at the origin of the set for the\n\t  // column\n\t  var curRow = SET_ORIGIN_ROW_LETTERS.charCodeAt(set - 1);\n\t  var northingValue = 0.0;\n\t  var rewindMarker = false;\n\n\t  while (curRow !== n.charCodeAt(0)) {\n\t    curRow++;\n\t    if (curRow === I) {\n\t      curRow++;\n\t    }\n\t    if (curRow === O) {\n\t      curRow++;\n\t    }\n\t    // fixing a bug making whole application hang in this loop\n\t    // when 'n' is a wrong character\n\t    if (curRow > V) {\n\t      if (rewindMarker) { // making sure that this loop ends\n\t        throw (\"Bad character: \" + n);\n\t      }\n\t      curRow = A;\n\t      rewindMarker = true;\n\t    }\n\t    northingValue += 100000.0;\n\t  }\n\n\t  return northingValue;\n\t}\n\n\t/**\n\t * The function getMinNorthing returns the minimum northing value of a MGRS\n\t * zone.\n\t *\n\t * Ported from Geotrans' c Lattitude_Band_Value structure table.\n\t *\n\t * @private\n\t * @param {char} zoneLetter The MGRS zone to get the min northing for.\n\t * @return {number}\n\t */\n\tfunction getMinNorthing(zoneLetter) {\n\t  var northing;\n\t  switch (zoneLetter) {\n\t  case 'C':\n\t    northing = 1100000.0;\n\t    break;\n\t  case 'D':\n\t    northing = 2000000.0;\n\t    break;\n\t  case 'E':\n\t    northing = 2800000.0;\n\t    break;\n\t  case 'F':\n\t    northing = 3700000.0;\n\t    break;\n\t  case 'G':\n\t    northing = 4600000.0;\n\t    break;\n\t  case 'H':\n\t    northing = 5500000.0;\n\t    break;\n\t  case 'J':\n\t    northing = 6400000.0;\n\t    break;\n\t  case 'K':\n\t    northing = 7300000.0;\n\t    break;\n\t  case 'L':\n\t    northing = 8200000.0;\n\t    break;\n\t  case 'M':\n\t    northing = 9100000.0;\n\t    break;\n\t  case 'N':\n\t    northing = 0.0;\n\t    break;\n\t  case 'P':\n\t    northing = 800000.0;\n\t    break;\n\t  case 'Q':\n\t    northing = 1700000.0;\n\t    break;\n\t  case 'R':\n\t    northing = 2600000.0;\n\t    break;\n\t  case 'S':\n\t    northing = 3500000.0;\n\t    break;\n\t  case 'T':\n\t    northing = 4400000.0;\n\t    break;\n\t  case 'U':\n\t    northing = 5300000.0;\n\t    break;\n\t  case 'V':\n\t    northing = 6200000.0;\n\t    break;\n\t  case 'W':\n\t    northing = 7000000.0;\n\t    break;\n\t  case 'X':\n\t    northing = 7900000.0;\n\t    break;\n\t  default:\n\t    northing = -1.0;\n\t  }\n\t  if (northing >= 0.0) {\n\t    return northing;\n\t  }\n\t  else {\n\t    throw (\"Invalid zone letter: \" + zoneLetter);\n\t  }\n\n\t}\n\n\tfunction Point(x, y, z) {\n\t  if (!(this instanceof Point)) {\n\t    return new Point(x, y, z);\n\t  }\n\t  if (Array.isArray(x)) {\n\t    this.x = x[0];\n\t    this.y = x[1];\n\t    this.z = x[2] || 0.0;\n\t  } else if(typeof x === 'object') {\n\t    this.x = x.x;\n\t    this.y = x.y;\n\t    this.z = x.z || 0.0;\n\t  } else if (typeof x === 'string' && typeof y === 'undefined') {\n\t    var coords = x.split(',');\n\t    this.x = parseFloat(coords[0], 10);\n\t    this.y = parseFloat(coords[1], 10);\n\t    this.z = parseFloat(coords[2], 10) || 0.0;\n\t  } else {\n\t    this.x = x;\n\t    this.y = y;\n\t    this.z = z || 0.0;\n\t  }\n\t  console.warn('proj4.Point will be removed in version 3, use proj4.toPoint');\n\t}\n\n\tPoint.fromMGRS = function(mgrsStr) {\n\t  return new Point(toPoint$1(mgrsStr));\n\t};\n\tPoint.prototype.toMGRS = function(accuracy) {\n\t  return forward$1([this.x, this.y], accuracy);\n\t};\n\n\tvar version = \"2.5.0\";\n\n\tvar C00 = 1;\n\tvar C02 = 0.25;\n\tvar C04 = 0.046875;\n\tvar C06 = 0.01953125;\n\tvar C08 = 0.01068115234375;\n\tvar C22 = 0.75;\n\tvar C44 = 0.46875;\n\tvar C46 = 0.01302083333333333333;\n\tvar C48 = 0.00712076822916666666;\n\tvar C66 = 0.36458333333333333333;\n\tvar C68 = 0.00569661458333333333;\n\tvar C88 = 0.3076171875;\n\n\tvar pj_enfn = function(es) {\n\t  var en = [];\n\t  en[0] = C00 - es * (C02 + es * (C04 + es * (C06 + es * C08)));\n\t  en[1] = es * (C22 - es * (C04 + es * (C06 + es * C08)));\n\t  var t = es * es;\n\t  en[2] = t * (C44 - es * (C46 + es * C48));\n\t  t *= es;\n\t  en[3] = t * (C66 - es * C68);\n\t  en[4] = t * es * C88;\n\t  return en;\n\t};\n\n\tvar pj_mlfn = function(phi, sphi, cphi, en) {\n\t  cphi *= sphi;\n\t  sphi *= sphi;\n\t  return (en[0] * phi - cphi * (en[1] + sphi * (en[2] + sphi * (en[3] + sphi * en[4]))));\n\t};\n\n\tvar MAX_ITER = 20;\n\n\tvar pj_inv_mlfn = function(arg, es, en) {\n\t  var k = 1 / (1 - es);\n\t  var phi = arg;\n\t  for (var i = MAX_ITER; i; --i) { /* rarely goes over 2 iterations */\n\t    var s = Math.sin(phi);\n\t    var t = 1 - es * s * s;\n\t    //t = this.pj_mlfn(phi, s, Math.cos(phi), en) - arg;\n\t    //phi -= t * (t * Math.sqrt(t)) * k;\n\t    t = (pj_mlfn(phi, s, Math.cos(phi), en) - arg) * (t * Math.sqrt(t)) * k;\n\t    phi -= t;\n\t    if (Math.abs(t) < EPSLN) {\n\t      return phi;\n\t    }\n\t  }\n\t  //..reportError(\"cass:pj_inv_mlfn: Convergence error\");\n\t  return phi;\n\t};\n\n\t// Heavily based on this tmerc projection implementation\n\t// https://github.com/mbloch/mapshaper-proj/blob/master/src/projections/tmerc.js\n\n\tfunction init$2() {\n\t  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n\t  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n\t  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n\t  this.lat0 = this.lat0 !== undefined ? this.lat0 : 0;\n\n\t  if (this.es) {\n\t    this.en = pj_enfn(this.es);\n\t    this.ml0 = pj_mlfn(this.lat0, Math.sin(this.lat0), Math.cos(this.lat0), this.en);\n\t  }\n\t}\n\n\t/**\n\t    Transverse Mercator Forward  - long/lat to x/y\n\t    long/lat in radians\n\t  */\n\tfunction forward$2(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  var delta_lon = adjust_lon(lon - this.long0);\n\t  var con;\n\t  var x, y;\n\t  var sin_phi = Math.sin(lat);\n\t  var cos_phi = Math.cos(lat);\n\n\t  if (!this.es) {\n\t    var b = cos_phi * Math.sin(delta_lon);\n\n\t    if ((Math.abs(Math.abs(b) - 1)) < EPSLN) {\n\t      return (93);\n\t    }\n\t    else {\n\t      x = 0.5 * this.a * this.k0 * Math.log((1 + b) / (1 - b)) + this.x0;\n\t      y = cos_phi * Math.cos(delta_lon) / Math.sqrt(1 - Math.pow(b, 2));\n\t      b = Math.abs(y);\n\n\t      if (b >= 1) {\n\t        if ((b - 1) > EPSLN) {\n\t          return (93);\n\t        }\n\t        else {\n\t          y = 0;\n\t        }\n\t      }\n\t      else {\n\t        y = Math.acos(y);\n\t      }\n\n\t      if (lat < 0) {\n\t        y = -y;\n\t      }\n\n\t      y = this.a * this.k0 * (y - this.lat0) + this.y0;\n\t    }\n\t  }\n\t  else {\n\t    var al = cos_phi * delta_lon;\n\t    var als = Math.pow(al, 2);\n\t    var c = this.ep2 * Math.pow(cos_phi, 2);\n\t    var cs = Math.pow(c, 2);\n\t    var tq = Math.abs(cos_phi) > EPSLN ? Math.tan(lat) : 0;\n\t    var t = Math.pow(tq, 2);\n\t    var ts = Math.pow(t, 2);\n\t    con = 1 - this.es * Math.pow(sin_phi, 2);\n\t    al = al / Math.sqrt(con);\n\t    var ml = pj_mlfn(lat, sin_phi, cos_phi, this.en);\n\n\t    x = this.a * (this.k0 * al * (1 +\n\t      als / 6 * (1 - t + c +\n\t      als / 20 * (5 - 18 * t + ts + 14 * c - 58 * t * c +\n\t      als / 42 * (61 + 179 * ts - ts * t - 479 * t))))) +\n\t      this.x0;\n\n\t    y = this.a * (this.k0 * (ml - this.ml0 +\n\t      sin_phi * delta_lon * al / 2 * (1 +\n\t      als / 12 * (5 - t + 9 * c + 4 * cs +\n\t      als / 30 * (61 + ts - 58 * t + 270 * c - 330 * t * c +\n\t      als / 56 * (1385 + 543 * ts - ts * t - 3111 * t)))))) +\n\t      this.y0;\n\t  }\n\n\t  p.x = x;\n\t  p.y = y;\n\n\t  return p;\n\t}\n\n\t/**\n\t    Transverse Mercator Inverse  -  x/y to long/lat\n\t  */\n\tfunction inverse$2(p) {\n\t  var con, phi;\n\t  var lat, lon;\n\t  var x = (p.x - this.x0) * (1 / this.a);\n\t  var y = (p.y - this.y0) * (1 / this.a);\n\n\t  if (!this.es) {\n\t    var f = Math.exp(x / this.k0);\n\t    var g = 0.5 * (f - 1 / f);\n\t    var temp = this.lat0 + y / this.k0;\n\t    var h = Math.cos(temp);\n\t    con = Math.sqrt((1 - Math.pow(h, 2)) / (1 + Math.pow(g, 2)));\n\t    lat = Math.asin(con);\n\n\t    if (y < 0) {\n\t      lat = -lat;\n\t    }\n\n\t    if ((g === 0) && (h === 0)) {\n\t      lon = 0;\n\t    }\n\t    else {\n\t      lon = adjust_lon(Math.atan2(g, h) + this.long0);\n\t    }\n\t  }\n\t  else { // ellipsoidal form\n\t    con = this.ml0 + y / this.k0;\n\t    phi = pj_inv_mlfn(con, this.es, this.en);\n\n\t    if (Math.abs(phi) < HALF_PI) {\n\t      var sin_phi = Math.sin(phi);\n\t      var cos_phi = Math.cos(phi);\n\t      var tan_phi = Math.abs(cos_phi) > EPSLN ? Math.tan(phi) : 0;\n\t      var c = this.ep2 * Math.pow(cos_phi, 2);\n\t      var cs = Math.pow(c, 2);\n\t      var t = Math.pow(tan_phi, 2);\n\t      var ts = Math.pow(t, 2);\n\t      con = 1 - this.es * Math.pow(sin_phi, 2);\n\t      var d = x * Math.sqrt(con) / this.k0;\n\t      var ds = Math.pow(d, 2);\n\t      con = con * tan_phi;\n\n\t      lat = phi - (con * ds / (1 - this.es)) * 0.5 * (1 -\n\t        ds / 12 * (5 + 3 * t - 9 * c * t + c - 4 * cs -\n\t        ds / 30 * (61 + 90 * t - 252 * c * t + 45 * ts + 46 * c -\n\t        ds / 56 * (1385 + 3633 * t + 4095 * ts + 1574 * ts * t))));\n\n\t      lon = adjust_lon(this.long0 + (d * (1 -\n\t        ds / 6 * (1 + 2 * t + c -\n\t        ds / 20 * (5 + 28 * t + 24 * ts + 8 * c * t + 6 * c -\n\t        ds / 42 * (61 + 662 * t + 1320 * ts + 720 * ts * t)))) / cos_phi));\n\t    }\n\t    else {\n\t      lat = HALF_PI * sign(y);\n\t      lon = 0;\n\t    }\n\t  }\n\n\t  p.x = lon;\n\t  p.y = lat;\n\n\t  return p;\n\t}\n\n\tvar names$3 = [\"Transverse_Mercator\", \"Transverse Mercator\", \"tmerc\"];\n\tvar tmerc = {\n\t  init: init$2,\n\t  forward: forward$2,\n\t  inverse: inverse$2,\n\t  names: names$3\n\t};\n\n\tvar sinh = function(x) {\n\t  var r = Math.exp(x);\n\t  r = (r - 1 / r) / 2;\n\t  return r;\n\t};\n\n\tvar hypot = function(x, y) {\n\t  x = Math.abs(x);\n\t  y = Math.abs(y);\n\t  var a = Math.max(x, y);\n\t  var b = Math.min(x, y) / (a ? a : 1);\n\n\t  return a * Math.sqrt(1 + Math.pow(b, 2));\n\t};\n\n\tvar log1py = function(x) {\n\t  var y = 1 + x;\n\t  var z = y - 1;\n\n\t  return z === 0 ? x : x * Math.log(y) / z;\n\t};\n\n\tvar asinhy = function(x) {\n\t  var y = Math.abs(x);\n\t  y = log1py(y * (1 + y / (hypot(1, y) + 1)));\n\n\t  return x < 0 ? -y : y;\n\t};\n\n\tvar gatg = function(pp, B) {\n\t  var cos_2B = 2 * Math.cos(2 * B);\n\t  var i = pp.length - 1;\n\t  var h1 = pp[i];\n\t  var h2 = 0;\n\t  var h;\n\n\t  while (--i >= 0) {\n\t    h = -h2 + cos_2B * h1 + pp[i];\n\t    h2 = h1;\n\t    h1 = h;\n\t  }\n\n\t  return (B + h * Math.sin(2 * B));\n\t};\n\n\tvar clens = function(pp, arg_r) {\n\t  var r = 2 * Math.cos(arg_r);\n\t  var i = pp.length - 1;\n\t  var hr1 = pp[i];\n\t  var hr2 = 0;\n\t  var hr;\n\n\t  while (--i >= 0) {\n\t    hr = -hr2 + r * hr1 + pp[i];\n\t    hr2 = hr1;\n\t    hr1 = hr;\n\t  }\n\n\t  return Math.sin(arg_r) * hr;\n\t};\n\n\tvar cosh = function(x) {\n\t  var r = Math.exp(x);\n\t  r = (r + 1 / r) / 2;\n\t  return r;\n\t};\n\n\tvar clens_cmplx = function(pp, arg_r, arg_i) {\n\t  var sin_arg_r = Math.sin(arg_r);\n\t  var cos_arg_r = Math.cos(arg_r);\n\t  var sinh_arg_i = sinh(arg_i);\n\t  var cosh_arg_i = cosh(arg_i);\n\t  var r = 2 * cos_arg_r * cosh_arg_i;\n\t  var i = -2 * sin_arg_r * sinh_arg_i;\n\t  var j = pp.length - 1;\n\t  var hr = pp[j];\n\t  var hi1 = 0;\n\t  var hr1 = 0;\n\t  var hi = 0;\n\t  var hr2;\n\t  var hi2;\n\n\t  while (--j >= 0) {\n\t    hr2 = hr1;\n\t    hi2 = hi1;\n\t    hr1 = hr;\n\t    hi1 = hi;\n\t    hr = -hr2 + r * hr1 - i * hi1 + pp[j];\n\t    hi = -hi2 + i * hr1 + r * hi1;\n\t  }\n\n\t  r = sin_arg_r * cosh_arg_i;\n\t  i = cos_arg_r * sinh_arg_i;\n\n\t  return [r * hr - i * hi, r * hi + i * hr];\n\t};\n\n\t// Heavily based on this etmerc projection implementation\n\t// https://github.com/mbloch/mapshaper-proj/blob/master/src/projections/etmerc.js\n\n\tfunction init$3() {\n\t  if (this.es === undefined || this.es <= 0) {\n\t    throw new Error('incorrect elliptical usage');\n\t  }\n\n\t  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n\t  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n\t  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n\t  this.lat0 = this.lat0 !== undefined ? this.lat0 : 0;\n\n\t  this.cgb = [];\n\t  this.cbg = [];\n\t  this.utg = [];\n\t  this.gtu = [];\n\n\t  var f = this.es / (1 + Math.sqrt(1 - this.es));\n\t  var n = f / (2 - f);\n\t  var np = n;\n\n\t  this.cgb[0] = n * (2 + n * (-2 / 3 + n * (-2 + n * (116 / 45 + n * (26 / 45 + n * (-2854 / 675 ))))));\n\t  this.cbg[0] = n * (-2 + n * ( 2 / 3 + n * ( 4 / 3 + n * (-82 / 45 + n * (32 / 45 + n * (4642 / 4725))))));\n\n\t  np = np * n;\n\t  this.cgb[1] = np * (7 / 3 + n * (-8 / 5 + n * (-227 / 45 + n * (2704 / 315 + n * (2323 / 945)))));\n\t  this.cbg[1] = np * (5 / 3 + n * (-16 / 15 + n * ( -13 / 9 + n * (904 / 315 + n * (-1522 / 945)))));\n\n\t  np = np * n;\n\t  this.cgb[2] = np * (56 / 15 + n * (-136 / 35 + n * (-1262 / 105 + n * (73814 / 2835))));\n\t  this.cbg[2] = np * (-26 / 15 + n * (34 / 21 + n * (8 / 5 + n * (-12686 / 2835))));\n\n\t  np = np * n;\n\t  this.cgb[3] = np * (4279 / 630 + n * (-332 / 35 + n * (-399572 / 14175)));\n\t  this.cbg[3] = np * (1237 / 630 + n * (-12 / 5 + n * ( -24832 / 14175)));\n\n\t  np = np * n;\n\t  this.cgb[4] = np * (4174 / 315 + n * (-144838 / 6237));\n\t  this.cbg[4] = np * (-734 / 315 + n * (109598 / 31185));\n\n\t  np = np * n;\n\t  this.cgb[5] = np * (601676 / 22275);\n\t  this.cbg[5] = np * (444337 / 155925);\n\n\t  np = Math.pow(n, 2);\n\t  this.Qn = this.k0 / (1 + n) * (1 + np * (1 / 4 + np * (1 / 64 + np / 256)));\n\n\t  this.utg[0] = n * (-0.5 + n * ( 2 / 3 + n * (-37 / 96 + n * ( 1 / 360 + n * (81 / 512 + n * (-96199 / 604800))))));\n\t  this.gtu[0] = n * (0.5 + n * (-2 / 3 + n * (5 / 16 + n * (41 / 180 + n * (-127 / 288 + n * (7891 / 37800))))));\n\n\t  this.utg[1] = np * (-1 / 48 + n * (-1 / 15 + n * (437 / 1440 + n * (-46 / 105 + n * (1118711 / 3870720)))));\n\t  this.gtu[1] = np * (13 / 48 + n * (-3 / 5 + n * (557 / 1440 + n * (281 / 630 + n * (-1983433 / 1935360)))));\n\n\t  np = np * n;\n\t  this.utg[2] = np * (-17 / 480 + n * (37 / 840 + n * (209 / 4480 + n * (-5569 / 90720 ))));\n\t  this.gtu[2] = np * (61 / 240 + n * (-103 / 140 + n * (15061 / 26880 + n * (167603 / 181440))));\n\n\t  np = np * n;\n\t  this.utg[3] = np * (-4397 / 161280 + n * (11 / 504 + n * (830251 / 7257600)));\n\t  this.gtu[3] = np * (49561 / 161280 + n * (-179 / 168 + n * (6601661 / 7257600)));\n\n\t  np = np * n;\n\t  this.utg[4] = np * (-4583 / 161280 + n * (108847 / 3991680));\n\t  this.gtu[4] = np * (34729 / 80640 + n * (-3418889 / 1995840));\n\n\t  np = np * n;\n\t  this.utg[5] = np * (-20648693 / 638668800);\n\t  this.gtu[5] = np * (212378941 / 319334400);\n\n\t  var Z = gatg(this.cbg, this.lat0);\n\t  this.Zb = -this.Qn * (Z + clens(this.gtu, 2 * Z));\n\t}\n\n\tfunction forward$3(p) {\n\t  var Ce = adjust_lon(p.x - this.long0);\n\t  var Cn = p.y;\n\n\t  Cn = gatg(this.cbg, Cn);\n\t  var sin_Cn = Math.sin(Cn);\n\t  var cos_Cn = Math.cos(Cn);\n\t  var sin_Ce = Math.sin(Ce);\n\t  var cos_Ce = Math.cos(Ce);\n\n\t  Cn = Math.atan2(sin_Cn, cos_Ce * cos_Cn);\n\t  Ce = Math.atan2(sin_Ce * cos_Cn, hypot(sin_Cn, cos_Cn * cos_Ce));\n\t  Ce = asinhy(Math.tan(Ce));\n\n\t  var tmp = clens_cmplx(this.gtu, 2 * Cn, 2 * Ce);\n\n\t  Cn = Cn + tmp[0];\n\t  Ce = Ce + tmp[1];\n\n\t  var x;\n\t  var y;\n\n\t  if (Math.abs(Ce) <= 2.623395162778) {\n\t    x = this.a * (this.Qn * Ce) + this.x0;\n\t    y = this.a * (this.Qn * Cn + this.Zb) + this.y0;\n\t  }\n\t  else {\n\t    x = Infinity;\n\t    y = Infinity;\n\t  }\n\n\t  p.x = x;\n\t  p.y = y;\n\n\t  return p;\n\t}\n\n\tfunction inverse$3(p) {\n\t  var Ce = (p.x - this.x0) * (1 / this.a);\n\t  var Cn = (p.y - this.y0) * (1 / this.a);\n\n\t  Cn = (Cn - this.Zb) / this.Qn;\n\t  Ce = Ce / this.Qn;\n\n\t  var lon;\n\t  var lat;\n\n\t  if (Math.abs(Ce) <= 2.623395162778) {\n\t    var tmp = clens_cmplx(this.utg, 2 * Cn, 2 * Ce);\n\n\t    Cn = Cn + tmp[0];\n\t    Ce = Ce + tmp[1];\n\t    Ce = Math.atan(sinh(Ce));\n\n\t    var sin_Cn = Math.sin(Cn);\n\t    var cos_Cn = Math.cos(Cn);\n\t    var sin_Ce = Math.sin(Ce);\n\t    var cos_Ce = Math.cos(Ce);\n\n\t    Cn = Math.atan2(sin_Cn * cos_Ce, hypot(sin_Ce, cos_Ce * cos_Cn));\n\t    Ce = Math.atan2(sin_Ce, cos_Ce * cos_Cn);\n\n\t    lon = adjust_lon(Ce + this.long0);\n\t    lat = gatg(this.cgb, Cn);\n\t  }\n\t  else {\n\t    lon = Infinity;\n\t    lat = Infinity;\n\t  }\n\n\t  p.x = lon;\n\t  p.y = lat;\n\n\t  return p;\n\t}\n\n\tvar names$4 = [\"Extended_Transverse_Mercator\", \"Extended Transverse Mercator\", \"etmerc\"];\n\tvar etmerc = {\n\t  init: init$3,\n\t  forward: forward$3,\n\t  inverse: inverse$3,\n\t  names: names$4\n\t};\n\n\tvar adjust_zone = function(zone, lon) {\n\t  if (zone === undefined) {\n\t    zone = Math.floor((adjust_lon(lon) + Math.PI) * 30 / Math.PI) + 1;\n\n\t    if (zone < 0) {\n\t      return 0;\n\t    } else if (zone > 60) {\n\t      return 60;\n\t    }\n\t  }\n\t  return zone;\n\t};\n\n\tvar dependsOn = 'etmerc';\n\tfunction init$4() {\n\t  var zone = adjust_zone(this.zone, this.long0);\n\t  if (zone === undefined) {\n\t    throw new Error('unknown utm zone');\n\t  }\n\t  this.lat0 = 0;\n\t  this.long0 =  ((6 * Math.abs(zone)) - 183) * D2R;\n\t  this.x0 = 500000;\n\t  this.y0 = this.utmSouth ? 10000000 : 0;\n\t  this.k0 = 0.9996;\n\n\t  etmerc.init.apply(this);\n\t  this.forward = etmerc.forward;\n\t  this.inverse = etmerc.inverse;\n\t}\n\n\tvar names$5 = [\"Universal Transverse Mercator System\", \"utm\"];\n\tvar utm = {\n\t  init: init$4,\n\t  names: names$5,\n\t  dependsOn: dependsOn\n\t};\n\n\tvar srat = function(esinp, exp) {\n\t  return (Math.pow((1 - esinp) / (1 + esinp), exp));\n\t};\n\n\tvar MAX_ITER$1 = 20;\n\tfunction init$6() {\n\t  var sphi = Math.sin(this.lat0);\n\t  var cphi = Math.cos(this.lat0);\n\t  cphi *= cphi;\n\t  this.rc = Math.sqrt(1 - this.es) / (1 - this.es * sphi * sphi);\n\t  this.C = Math.sqrt(1 + this.es * cphi * cphi / (1 - this.es));\n\t  this.phic0 = Math.asin(sphi / this.C);\n\t  this.ratexp = 0.5 * this.C * this.e;\n\t  this.K = Math.tan(0.5 * this.phic0 + FORTPI) / (Math.pow(Math.tan(0.5 * this.lat0 + FORTPI), this.C) * srat(this.e * sphi, this.ratexp));\n\t}\n\n\tfunction forward$5(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  p.y = 2 * Math.atan(this.K * Math.pow(Math.tan(0.5 * lat + FORTPI), this.C) * srat(this.e * Math.sin(lat), this.ratexp)) - HALF_PI;\n\t  p.x = this.C * lon;\n\t  return p;\n\t}\n\n\tfunction inverse$5(p) {\n\t  var DEL_TOL = 1e-14;\n\t  var lon = p.x / this.C;\n\t  var lat = p.y;\n\t  var num = Math.pow(Math.tan(0.5 * lat + FORTPI) / this.K, 1 / this.C);\n\t  for (var i = MAX_ITER$1; i > 0; --i) {\n\t    lat = 2 * Math.atan(num * srat(this.e * Math.sin(p.y), - 0.5 * this.e)) - HALF_PI;\n\t    if (Math.abs(lat - p.y) < DEL_TOL) {\n\t      break;\n\t    }\n\t    p.y = lat;\n\t  }\n\t  /* convergence failed */\n\t  if (!i) {\n\t    return null;\n\t  }\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$7 = [\"gauss\"];\n\tvar gauss = {\n\t  init: init$6,\n\t  forward: forward$5,\n\t  inverse: inverse$5,\n\t  names: names$7\n\t};\n\n\tfunction init$5() {\n\t  gauss.init.apply(this);\n\t  if (!this.rc) {\n\t    return;\n\t  }\n\t  this.sinc0 = Math.sin(this.phic0);\n\t  this.cosc0 = Math.cos(this.phic0);\n\t  this.R2 = 2 * this.rc;\n\t  if (!this.title) {\n\t    this.title = \"Oblique Stereographic Alternative\";\n\t  }\n\t}\n\n\tfunction forward$4(p) {\n\t  var sinc, cosc, cosl, k;\n\t  p.x = adjust_lon(p.x - this.long0);\n\t  gauss.forward.apply(this, [p]);\n\t  sinc = Math.sin(p.y);\n\t  cosc = Math.cos(p.y);\n\t  cosl = Math.cos(p.x);\n\t  k = this.k0 * this.R2 / (1 + this.sinc0 * sinc + this.cosc0 * cosc * cosl);\n\t  p.x = k * cosc * Math.sin(p.x);\n\t  p.y = k * (this.cosc0 * sinc - this.sinc0 * cosc * cosl);\n\t  p.x = this.a * p.x + this.x0;\n\t  p.y = this.a * p.y + this.y0;\n\t  return p;\n\t}\n\n\tfunction inverse$4(p) {\n\t  var sinc, cosc, lon, lat, rho;\n\t  p.x = (p.x - this.x0) / this.a;\n\t  p.y = (p.y - this.y0) / this.a;\n\n\t  p.x /= this.k0;\n\t  p.y /= this.k0;\n\t  if ((rho = Math.sqrt(p.x * p.x + p.y * p.y))) {\n\t    var c = 2 * Math.atan2(rho, this.R2);\n\t    sinc = Math.sin(c);\n\t    cosc = Math.cos(c);\n\t    lat = Math.asin(cosc * this.sinc0 + p.y * sinc * this.cosc0 / rho);\n\t    lon = Math.atan2(p.x * sinc, rho * this.cosc0 * cosc - p.y * this.sinc0 * sinc);\n\t  }\n\t  else {\n\t    lat = this.phic0;\n\t    lon = 0;\n\t  }\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  gauss.inverse.apply(this, [p]);\n\t  p.x = adjust_lon(p.x + this.long0);\n\t  return p;\n\t}\n\n\tvar names$6 = [\"Stereographic_North_Pole\", \"Oblique_Stereographic\", \"Polar_Stereographic\", \"sterea\",\"Oblique Stereographic Alternative\",\"Double_Stereographic\"];\n\tvar sterea = {\n\t  init: init$5,\n\t  forward: forward$4,\n\t  inverse: inverse$4,\n\t  names: names$6\n\t};\n\n\tfunction ssfn_(phit, sinphi, eccen) {\n\t  sinphi *= eccen;\n\t  return (Math.tan(0.5 * (HALF_PI + phit)) * Math.pow((1 - sinphi) / (1 + sinphi), 0.5 * eccen));\n\t}\n\n\tfunction init$7() {\n\t  this.coslat0 = Math.cos(this.lat0);\n\t  this.sinlat0 = Math.sin(this.lat0);\n\t  if (this.sphere) {\n\t    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {\n\t      this.k0 = 0.5 * (1 + sign(this.lat0) * Math.sin(this.lat_ts));\n\t    }\n\t  }\n\t  else {\n\t    if (Math.abs(this.coslat0) <= EPSLN) {\n\t      if (this.lat0 > 0) {\n\t        //North pole\n\t        //trace('stere:north pole');\n\t        this.con = 1;\n\t      }\n\t      else {\n\t        //South pole\n\t        //trace('stere:south pole');\n\t        this.con = -1;\n\t      }\n\t    }\n\t    this.cons = Math.sqrt(Math.pow(1 + this.e, 1 + this.e) * Math.pow(1 - this.e, 1 - this.e));\n\t    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {\n\t      this.k0 = 0.5 * this.cons * msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts)) / tsfnz(this.e, this.con * this.lat_ts, this.con * Math.sin(this.lat_ts));\n\t    }\n\t    this.ms1 = msfnz(this.e, this.sinlat0, this.coslat0);\n\t    this.X0 = 2 * Math.atan(this.ssfn_(this.lat0, this.sinlat0, this.e)) - HALF_PI;\n\t    this.cosX0 = Math.cos(this.X0);\n\t    this.sinX0 = Math.sin(this.X0);\n\t  }\n\t}\n\n\t// Stereographic forward equations--mapping lat,long to x,y\n\tfunction forward$6(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  var sinlat = Math.sin(lat);\n\t  var coslat = Math.cos(lat);\n\t  var A, X, sinX, cosX, ts, rh;\n\t  var dlon = adjust_lon(lon - this.long0);\n\n\t  if (Math.abs(Math.abs(lon - this.long0) - Math.PI) <= EPSLN && Math.abs(lat + this.lat0) <= EPSLN) {\n\t    //case of the origine point\n\t    //trace('stere:this is the origin point');\n\t    p.x = NaN;\n\t    p.y = NaN;\n\t    return p;\n\t  }\n\t  if (this.sphere) {\n\t    //trace('stere:sphere case');\n\t    A = 2 * this.k0 / (1 + this.sinlat0 * sinlat + this.coslat0 * coslat * Math.cos(dlon));\n\t    p.x = this.a * A * coslat * Math.sin(dlon) + this.x0;\n\t    p.y = this.a * A * (this.coslat0 * sinlat - this.sinlat0 * coslat * Math.cos(dlon)) + this.y0;\n\t    return p;\n\t  }\n\t  else {\n\t    X = 2 * Math.atan(this.ssfn_(lat, sinlat, this.e)) - HALF_PI;\n\t    cosX = Math.cos(X);\n\t    sinX = Math.sin(X);\n\t    if (Math.abs(this.coslat0) <= EPSLN) {\n\t      ts = tsfnz(this.e, lat * this.con, this.con * sinlat);\n\t      rh = 2 * this.a * this.k0 * ts / this.cons;\n\t      p.x = this.x0 + rh * Math.sin(lon - this.long0);\n\t      p.y = this.y0 - this.con * rh * Math.cos(lon - this.long0);\n\t      //trace(p.toString());\n\t      return p;\n\t    }\n\t    else if (Math.abs(this.sinlat0) < EPSLN) {\n\t      //Eq\n\t      //trace('stere:equateur');\n\t      A = 2 * this.a * this.k0 / (1 + cosX * Math.cos(dlon));\n\t      p.y = A * sinX;\n\t    }\n\t    else {\n\t      //other case\n\t      //trace('stere:normal case');\n\t      A = 2 * this.a * this.k0 * this.ms1 / (this.cosX0 * (1 + this.sinX0 * sinX + this.cosX0 * cosX * Math.cos(dlon)));\n\t      p.y = A * (this.cosX0 * sinX - this.sinX0 * cosX * Math.cos(dlon)) + this.y0;\n\t    }\n\t    p.x = A * cosX * Math.sin(dlon) + this.x0;\n\t  }\n\t  //trace(p.toString());\n\t  return p;\n\t}\n\n\t//* Stereographic inverse equations--mapping x,y to lat/long\n\tfunction inverse$6(p) {\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  var lon, lat, ts, ce, Chi;\n\t  var rh = Math.sqrt(p.x * p.x + p.y * p.y);\n\t  if (this.sphere) {\n\t    var c = 2 * Math.atan(rh / (2 * this.a * this.k0));\n\t    lon = this.long0;\n\t    lat = this.lat0;\n\t    if (rh <= EPSLN) {\n\t      p.x = lon;\n\t      p.y = lat;\n\t      return p;\n\t    }\n\t    lat = Math.asin(Math.cos(c) * this.sinlat0 + p.y * Math.sin(c) * this.coslat0 / rh);\n\t    if (Math.abs(this.coslat0) < EPSLN) {\n\t      if (this.lat0 > 0) {\n\t        lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));\n\t      }\n\t      else {\n\t        lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));\n\t      }\n\t    }\n\t    else {\n\t      lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(c), rh * this.coslat0 * Math.cos(c) - p.y * this.sinlat0 * Math.sin(c)));\n\t    }\n\t    p.x = lon;\n\t    p.y = lat;\n\t    return p;\n\t  }\n\t  else {\n\t    if (Math.abs(this.coslat0) <= EPSLN) {\n\t      if (rh <= EPSLN) {\n\t        lat = this.lat0;\n\t        lon = this.long0;\n\t        p.x = lon;\n\t        p.y = lat;\n\t        //trace(p.toString());\n\t        return p;\n\t      }\n\t      p.x *= this.con;\n\t      p.y *= this.con;\n\t      ts = rh * this.cons / (2 * this.a * this.k0);\n\t      lat = this.con * phi2z(this.e, ts);\n\t      lon = this.con * adjust_lon(this.con * this.long0 + Math.atan2(p.x, - 1 * p.y));\n\t    }\n\t    else {\n\t      ce = 2 * Math.atan(rh * this.cosX0 / (2 * this.a * this.k0 * this.ms1));\n\t      lon = this.long0;\n\t      if (rh <= EPSLN) {\n\t        Chi = this.X0;\n\t      }\n\t      else {\n\t        Chi = Math.asin(Math.cos(ce) * this.sinX0 + p.y * Math.sin(ce) * this.cosX0 / rh);\n\t        lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(ce), rh * this.cosX0 * Math.cos(ce) - p.y * this.sinX0 * Math.sin(ce)));\n\t      }\n\t      lat = -1 * phi2z(this.e, Math.tan(0.5 * (HALF_PI + Chi)));\n\t    }\n\t  }\n\t  p.x = lon;\n\t  p.y = lat;\n\n\t  //trace(p.toString());\n\t  return p;\n\n\t}\n\n\tvar names$8 = [\"stere\", \"Stereographic_South_Pole\", \"Polar Stereographic (variant B)\"];\n\tvar stere = {\n\t  init: init$7,\n\t  forward: forward$6,\n\t  inverse: inverse$6,\n\t  names: names$8,\n\t  ssfn_: ssfn_\n\t};\n\n\t/*\n\t  references:\n\t    Formules et constantes pour le Calcul pour la\n\t    projection cylindrique conforme  axe oblique et pour la transformation entre\n\t    des systmes de rfrence.\n\t    http://www.swisstopo.admin.ch/internet/swisstopo/fr/home/topics/survey/sys/refsys/switzerland.parsysrelated1.31216.downloadList.77004.DownloadFile.tmp/swissprojectionfr.pdf\n\t  */\n\n\tfunction init$8() {\n\t  var phy0 = this.lat0;\n\t  this.lambda0 = this.long0;\n\t  var sinPhy0 = Math.sin(phy0);\n\t  var semiMajorAxis = this.a;\n\t  var invF = this.rf;\n\t  var flattening = 1 / invF;\n\t  var e2 = 2 * flattening - Math.pow(flattening, 2);\n\t  var e = this.e = Math.sqrt(e2);\n\t  this.R = this.k0 * semiMajorAxis * Math.sqrt(1 - e2) / (1 - e2 * Math.pow(sinPhy0, 2));\n\t  this.alpha = Math.sqrt(1 + e2 / (1 - e2) * Math.pow(Math.cos(phy0), 4));\n\t  this.b0 = Math.asin(sinPhy0 / this.alpha);\n\t  var k1 = Math.log(Math.tan(Math.PI / 4 + this.b0 / 2));\n\t  var k2 = Math.log(Math.tan(Math.PI / 4 + phy0 / 2));\n\t  var k3 = Math.log((1 + e * sinPhy0) / (1 - e * sinPhy0));\n\t  this.K = k1 - this.alpha * k2 + this.alpha * e / 2 * k3;\n\t}\n\n\tfunction forward$7(p) {\n\t  var Sa1 = Math.log(Math.tan(Math.PI / 4 - p.y / 2));\n\t  var Sa2 = this.e / 2 * Math.log((1 + this.e * Math.sin(p.y)) / (1 - this.e * Math.sin(p.y)));\n\t  var S = -this.alpha * (Sa1 + Sa2) + this.K;\n\n\t  // spheric latitude\n\t  var b = 2 * (Math.atan(Math.exp(S)) - Math.PI / 4);\n\n\t  // spheric longitude\n\t  var I = this.alpha * (p.x - this.lambda0);\n\n\t  // psoeudo equatorial rotation\n\t  var rotI = Math.atan(Math.sin(I) / (Math.sin(this.b0) * Math.tan(b) + Math.cos(this.b0) * Math.cos(I)));\n\n\t  var rotB = Math.asin(Math.cos(this.b0) * Math.sin(b) - Math.sin(this.b0) * Math.cos(b) * Math.cos(I));\n\n\t  p.y = this.R / 2 * Math.log((1 + Math.sin(rotB)) / (1 - Math.sin(rotB))) + this.y0;\n\t  p.x = this.R * rotI + this.x0;\n\t  return p;\n\t}\n\n\tfunction inverse$7(p) {\n\t  var Y = p.x - this.x0;\n\t  var X = p.y - this.y0;\n\n\t  var rotI = Y / this.R;\n\t  var rotB = 2 * (Math.atan(Math.exp(X / this.R)) - Math.PI / 4);\n\n\t  var b = Math.asin(Math.cos(this.b0) * Math.sin(rotB) + Math.sin(this.b0) * Math.cos(rotB) * Math.cos(rotI));\n\t  var I = Math.atan(Math.sin(rotI) / (Math.cos(this.b0) * Math.cos(rotI) - Math.sin(this.b0) * Math.tan(rotB)));\n\n\t  var lambda = this.lambda0 + I / this.alpha;\n\n\t  var S = 0;\n\t  var phy = b;\n\t  var prevPhy = -1000;\n\t  var iteration = 0;\n\t  while (Math.abs(phy - prevPhy) > 0.0000001) {\n\t    if (++iteration > 20) {\n\t      //...reportError(\"omercFwdInfinity\");\n\t      return;\n\t    }\n\t    //S = Math.log(Math.tan(Math.PI / 4 + phy / 2));\n\t    S = 1 / this.alpha * (Math.log(Math.tan(Math.PI / 4 + b / 2)) - this.K) + this.e * Math.log(Math.tan(Math.PI / 4 + Math.asin(this.e * Math.sin(phy)) / 2));\n\t    prevPhy = phy;\n\t    phy = 2 * Math.atan(Math.exp(S)) - Math.PI / 2;\n\t  }\n\n\t  p.x = lambda;\n\t  p.y = phy;\n\t  return p;\n\t}\n\n\tvar names$9 = [\"somerc\"];\n\tvar somerc = {\n\t  init: init$8,\n\t  forward: forward$7,\n\t  inverse: inverse$7,\n\t  names: names$9\n\t};\n\n\t/* Initialize the Oblique Mercator  projection\n\t    ------------------------------------------*/\n\tfunction init$9() {\n\t  this.no_off = this.no_off || false;\n\t  this.no_rot = this.no_rot || false;\n\n\t  if (isNaN(this.k0)) {\n\t    this.k0 = 1;\n\t  }\n\t  var sinlat = Math.sin(this.lat0);\n\t  var coslat = Math.cos(this.lat0);\n\t  var con = this.e * sinlat;\n\n\t  this.bl = Math.sqrt(1 + this.es / (1 - this.es) * Math.pow(coslat, 4));\n\t  this.al = this.a * this.bl * this.k0 * Math.sqrt(1 - this.es) / (1 - con * con);\n\t  var t0 = tsfnz(this.e, this.lat0, sinlat);\n\t  var dl = this.bl / coslat * Math.sqrt((1 - this.es) / (1 - con * con));\n\t  if (dl * dl < 1) {\n\t    dl = 1;\n\t  }\n\t  var fl;\n\t  var gl;\n\t  if (!isNaN(this.longc)) {\n\t    //Central point and azimuth method\n\n\t    if (this.lat0 >= 0) {\n\t      fl = dl + Math.sqrt(dl * dl - 1);\n\t    }\n\t    else {\n\t      fl = dl - Math.sqrt(dl * dl - 1);\n\t    }\n\t    this.el = fl * Math.pow(t0, this.bl);\n\t    gl = 0.5 * (fl - 1 / fl);\n\t    this.gamma0 = Math.asin(Math.sin(this.alpha) / dl);\n\t    this.long0 = this.longc - Math.asin(gl * Math.tan(this.gamma0)) / this.bl;\n\n\t  }\n\t  else {\n\t    //2 points method\n\t    var t1 = tsfnz(this.e, this.lat1, Math.sin(this.lat1));\n\t    var t2 = tsfnz(this.e, this.lat2, Math.sin(this.lat2));\n\t    if (this.lat0 >= 0) {\n\t      this.el = (dl + Math.sqrt(dl * dl - 1)) * Math.pow(t0, this.bl);\n\t    }\n\t    else {\n\t      this.el = (dl - Math.sqrt(dl * dl - 1)) * Math.pow(t0, this.bl);\n\t    }\n\t    var hl = Math.pow(t1, this.bl);\n\t    var ll = Math.pow(t2, this.bl);\n\t    fl = this.el / hl;\n\t    gl = 0.5 * (fl - 1 / fl);\n\t    var jl = (this.el * this.el - ll * hl) / (this.el * this.el + ll * hl);\n\t    var pl = (ll - hl) / (ll + hl);\n\t    var dlon12 = adjust_lon(this.long1 - this.long2);\n\t    this.long0 = 0.5 * (this.long1 + this.long2) - Math.atan(jl * Math.tan(0.5 * this.bl * (dlon12)) / pl) / this.bl;\n\t    this.long0 = adjust_lon(this.long0);\n\t    var dlon10 = adjust_lon(this.long1 - this.long0);\n\t    this.gamma0 = Math.atan(Math.sin(this.bl * (dlon10)) / gl);\n\t    this.alpha = Math.asin(dl * Math.sin(this.gamma0));\n\t  }\n\n\t  if (this.no_off) {\n\t    this.uc = 0;\n\t  }\n\t  else {\n\t    if (this.lat0 >= 0) {\n\t      this.uc = this.al / this.bl * Math.atan2(Math.sqrt(dl * dl - 1), Math.cos(this.alpha));\n\t    }\n\t    else {\n\t      this.uc = -1 * this.al / this.bl * Math.atan2(Math.sqrt(dl * dl - 1), Math.cos(this.alpha));\n\t    }\n\t  }\n\n\t}\n\n\t/* Oblique Mercator forward equations--mapping lat,long to x,y\n\t    ----------------------------------------------------------*/\n\tfunction forward$8(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  var dlon = adjust_lon(lon - this.long0);\n\t  var us, vs;\n\t  var con;\n\t  if (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN) {\n\t    if (lat > 0) {\n\t      con = -1;\n\t    }\n\t    else {\n\t      con = 1;\n\t    }\n\t    vs = this.al / this.bl * Math.log(Math.tan(FORTPI + con * this.gamma0 * 0.5));\n\t    us = -1 * con * HALF_PI * this.al / this.bl;\n\t  }\n\t  else {\n\t    var t = tsfnz(this.e, lat, Math.sin(lat));\n\t    var ql = this.el / Math.pow(t, this.bl);\n\t    var sl = 0.5 * (ql - 1 / ql);\n\t    var tl = 0.5 * (ql + 1 / ql);\n\t    var vl = Math.sin(this.bl * (dlon));\n\t    var ul = (sl * Math.sin(this.gamma0) - vl * Math.cos(this.gamma0)) / tl;\n\t    if (Math.abs(Math.abs(ul) - 1) <= EPSLN) {\n\t      vs = Number.POSITIVE_INFINITY;\n\t    }\n\t    else {\n\t      vs = 0.5 * this.al * Math.log((1 - ul) / (1 + ul)) / this.bl;\n\t    }\n\t    if (Math.abs(Math.cos(this.bl * (dlon))) <= EPSLN) {\n\t      us = this.al * this.bl * (dlon);\n\t    }\n\t    else {\n\t      us = this.al * Math.atan2(sl * Math.cos(this.gamma0) + vl * Math.sin(this.gamma0), Math.cos(this.bl * dlon)) / this.bl;\n\t    }\n\t  }\n\n\t  if (this.no_rot) {\n\t    p.x = this.x0 + us;\n\t    p.y = this.y0 + vs;\n\t  }\n\t  else {\n\n\t    us -= this.uc;\n\t    p.x = this.x0 + vs * Math.cos(this.alpha) + us * Math.sin(this.alpha);\n\t    p.y = this.y0 + us * Math.cos(this.alpha) - vs * Math.sin(this.alpha);\n\t  }\n\t  return p;\n\t}\n\n\tfunction inverse$8(p) {\n\t  var us, vs;\n\t  if (this.no_rot) {\n\t    vs = p.y - this.y0;\n\t    us = p.x - this.x0;\n\t  }\n\t  else {\n\t    vs = (p.x - this.x0) * Math.cos(this.alpha) - (p.y - this.y0) * Math.sin(this.alpha);\n\t    us = (p.y - this.y0) * Math.cos(this.alpha) + (p.x - this.x0) * Math.sin(this.alpha);\n\t    us += this.uc;\n\t  }\n\t  var qp = Math.exp(-1 * this.bl * vs / this.al);\n\t  var sp = 0.5 * (qp - 1 / qp);\n\t  var tp = 0.5 * (qp + 1 / qp);\n\t  var vp = Math.sin(this.bl * us / this.al);\n\t  var up = (vp * Math.cos(this.gamma0) + sp * Math.sin(this.gamma0)) / tp;\n\t  var ts = Math.pow(this.el / Math.sqrt((1 + up) / (1 - up)), 1 / this.bl);\n\t  if (Math.abs(up - 1) < EPSLN) {\n\t    p.x = this.long0;\n\t    p.y = HALF_PI;\n\t  }\n\t  else if (Math.abs(up + 1) < EPSLN) {\n\t    p.x = this.long0;\n\t    p.y = -1 * HALF_PI;\n\t  }\n\t  else {\n\t    p.y = phi2z(this.e, ts);\n\t    p.x = adjust_lon(this.long0 - Math.atan2(sp * Math.cos(this.gamma0) - vp * Math.sin(this.gamma0), Math.cos(this.bl * us / this.al)) / this.bl);\n\t  }\n\t  return p;\n\t}\n\n\tvar names$10 = [\"Hotine_Oblique_Mercator\", \"Hotine Oblique Mercator\", \"Hotine_Oblique_Mercator_Azimuth_Natural_Origin\", \"Hotine_Oblique_Mercator_Azimuth_Center\", \"omerc\"];\n\tvar omerc = {\n\t  init: init$9,\n\t  forward: forward$8,\n\t  inverse: inverse$8,\n\t  names: names$10\n\t};\n\n\tfunction init$10() {\n\n\t  // array of:  r_maj,r_min,lat1,lat2,c_lon,c_lat,false_east,false_north\n\t  //double c_lat;                   /* center latitude                      */\n\t  //double c_lon;                   /* center longitude                     */\n\t  //double lat1;                    /* first standard parallel              */\n\t  //double lat2;                    /* second standard parallel             */\n\t  //double r_maj;                   /* major axis                           */\n\t  //double r_min;                   /* minor axis                           */\n\t  //double false_east;              /* x offset in meters                   */\n\t  //double false_north;             /* y offset in meters                   */\n\n\t  if (!this.lat2) {\n\t    this.lat2 = this.lat1;\n\t  } //if lat2 is not defined\n\t  if (!this.k0) {\n\t    this.k0 = 1;\n\t  }\n\t  this.x0 = this.x0 || 0;\n\t  this.y0 = this.y0 || 0;\n\t  // Standard Parallels cannot be equal and on opposite sides of the equator\n\t  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n\t    return;\n\t  }\n\n\t  var temp = this.b / this.a;\n\t  this.e = Math.sqrt(1 - temp * temp);\n\n\t  var sin1 = Math.sin(this.lat1);\n\t  var cos1 = Math.cos(this.lat1);\n\t  var ms1 = msfnz(this.e, sin1, cos1);\n\t  var ts1 = tsfnz(this.e, this.lat1, sin1);\n\n\t  var sin2 = Math.sin(this.lat2);\n\t  var cos2 = Math.cos(this.lat2);\n\t  var ms2 = msfnz(this.e, sin2, cos2);\n\t  var ts2 = tsfnz(this.e, this.lat2, sin2);\n\n\t  var ts0 = tsfnz(this.e, this.lat0, Math.sin(this.lat0));\n\n\t  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n\t    this.ns = Math.log(ms1 / ms2) / Math.log(ts1 / ts2);\n\t  }\n\t  else {\n\t    this.ns = sin1;\n\t  }\n\t  if (isNaN(this.ns)) {\n\t    this.ns = sin1;\n\t  }\n\t  this.f0 = ms1 / (this.ns * Math.pow(ts1, this.ns));\n\t  this.rh = this.a * this.f0 * Math.pow(ts0, this.ns);\n\t  if (!this.title) {\n\t    this.title = \"Lambert Conformal Conic\";\n\t  }\n\t}\n\n\t// Lambert Conformal conic forward equations--mapping lat,long to x,y\n\t// -----------------------------------------------------------------\n\tfunction forward$9(p) {\n\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  // singular cases :\n\t  if (Math.abs(2 * Math.abs(lat) - Math.PI) <= EPSLN) {\n\t    lat = sign(lat) * (HALF_PI - 2 * EPSLN);\n\t  }\n\n\t  var con = Math.abs(Math.abs(lat) - HALF_PI);\n\t  var ts, rh1;\n\t  if (con > EPSLN) {\n\t    ts = tsfnz(this.e, lat, Math.sin(lat));\n\t    rh1 = this.a * this.f0 * Math.pow(ts, this.ns);\n\t  }\n\t  else {\n\t    con = lat * this.ns;\n\t    if (con <= 0) {\n\t      return null;\n\t    }\n\t    rh1 = 0;\n\t  }\n\t  var theta = this.ns * adjust_lon(lon - this.long0);\n\t  p.x = this.k0 * (rh1 * Math.sin(theta)) + this.x0;\n\t  p.y = this.k0 * (this.rh - rh1 * Math.cos(theta)) + this.y0;\n\n\t  return p;\n\t}\n\n\t// Lambert Conformal Conic inverse equations--mapping x,y to lat/long\n\t// -----------------------------------------------------------------\n\tfunction inverse$9(p) {\n\n\t  var rh1, con, ts;\n\t  var lat, lon;\n\t  var x = (p.x - this.x0) / this.k0;\n\t  var y = (this.rh - (p.y - this.y0) / this.k0);\n\t  if (this.ns > 0) {\n\t    rh1 = Math.sqrt(x * x + y * y);\n\t    con = 1;\n\t  }\n\t  else {\n\t    rh1 = -Math.sqrt(x * x + y * y);\n\t    con = -1;\n\t  }\n\t  var theta = 0;\n\t  if (rh1 !== 0) {\n\t    theta = Math.atan2((con * x), (con * y));\n\t  }\n\t  if ((rh1 !== 0) || (this.ns > 0)) {\n\t    con = 1 / this.ns;\n\t    ts = Math.pow((rh1 / (this.a * this.f0)), con);\n\t    lat = phi2z(this.e, ts);\n\t    if (lat === -9999) {\n\t      return null;\n\t    }\n\t  }\n\t  else {\n\t    lat = -HALF_PI;\n\t  }\n\t  lon = adjust_lon(theta / this.ns + this.long0);\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$11 = [\"Lambert Tangential Conformal Conic Projection\", \"Lambert_Conformal_Conic\", \"Lambert_Conformal_Conic_2SP\", \"lcc\"];\n\tvar lcc = {\n\t  init: init$10,\n\t  forward: forward$9,\n\t  inverse: inverse$9,\n\t  names: names$11\n\t};\n\n\tfunction init$11() {\n\t  this.a = 6377397.155;\n\t  this.es = 0.006674372230614;\n\t  this.e = Math.sqrt(this.es);\n\t  if (!this.lat0) {\n\t    this.lat0 = 0.863937979737193;\n\t  }\n\t  if (!this.long0) {\n\t    this.long0 = 0.7417649320975901 - 0.308341501185665;\n\t  }\n\t  /* if scale not set default to 0.9999 */\n\t  if (!this.k0) {\n\t    this.k0 = 0.9999;\n\t  }\n\t  this.s45 = 0.785398163397448; /* 45 */\n\t  this.s90 = 2 * this.s45;\n\t  this.fi0 = this.lat0;\n\t  this.e2 = this.es;\n\t  this.e = Math.sqrt(this.e2);\n\t  this.alfa = Math.sqrt(1 + (this.e2 * Math.pow(Math.cos(this.fi0), 4)) / (1 - this.e2));\n\t  this.uq = 1.04216856380474;\n\t  this.u0 = Math.asin(Math.sin(this.fi0) / this.alfa);\n\t  this.g = Math.pow((1 + this.e * Math.sin(this.fi0)) / (1 - this.e * Math.sin(this.fi0)), this.alfa * this.e / 2);\n\t  this.k = Math.tan(this.u0 / 2 + this.s45) / Math.pow(Math.tan(this.fi0 / 2 + this.s45), this.alfa) * this.g;\n\t  this.k1 = this.k0;\n\t  this.n0 = this.a * Math.sqrt(1 - this.e2) / (1 - this.e2 * Math.pow(Math.sin(this.fi0), 2));\n\t  this.s0 = 1.37008346281555;\n\t  this.n = Math.sin(this.s0);\n\t  this.ro0 = this.k1 * this.n0 / Math.tan(this.s0);\n\t  this.ad = this.s90 - this.uq;\n\t}\n\n\t/* ellipsoid */\n\t/* calculate xy from lat/lon */\n\t/* Constants, identical to inverse transform function */\n\tfunction forward$10(p) {\n\t  var gfi, u, deltav, s, d, eps, ro;\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  var delta_lon = adjust_lon(lon - this.long0);\n\t  /* Transformation */\n\t  gfi = Math.pow(((1 + this.e * Math.sin(lat)) / (1 - this.e * Math.sin(lat))), (this.alfa * this.e / 2));\n\t  u = 2 * (Math.atan(this.k * Math.pow(Math.tan(lat / 2 + this.s45), this.alfa) / gfi) - this.s45);\n\t  deltav = -delta_lon * this.alfa;\n\t  s = Math.asin(Math.cos(this.ad) * Math.sin(u) + Math.sin(this.ad) * Math.cos(u) * Math.cos(deltav));\n\t  d = Math.asin(Math.cos(u) * Math.sin(deltav) / Math.cos(s));\n\t  eps = this.n * d;\n\t  ro = this.ro0 * Math.pow(Math.tan(this.s0 / 2 + this.s45), this.n) / Math.pow(Math.tan(s / 2 + this.s45), this.n);\n\t  p.y = ro * Math.cos(eps) / 1;\n\t  p.x = ro * Math.sin(eps) / 1;\n\n\t  if (!this.czech) {\n\t    p.y *= -1;\n\t    p.x *= -1;\n\t  }\n\t  return (p);\n\t}\n\n\t/* calculate lat/lon from xy */\n\tfunction inverse$10(p) {\n\t  var u, deltav, s, d, eps, ro, fi1;\n\t  var ok;\n\n\t  /* Transformation */\n\t  /* revert y, x*/\n\t  var tmp = p.x;\n\t  p.x = p.y;\n\t  p.y = tmp;\n\t  if (!this.czech) {\n\t    p.y *= -1;\n\t    p.x *= -1;\n\t  }\n\t  ro = Math.sqrt(p.x * p.x + p.y * p.y);\n\t  eps = Math.atan2(p.y, p.x);\n\t  d = eps / Math.sin(this.s0);\n\t  s = 2 * (Math.atan(Math.pow(this.ro0 / ro, 1 / this.n) * Math.tan(this.s0 / 2 + this.s45)) - this.s45);\n\t  u = Math.asin(Math.cos(this.ad) * Math.sin(s) - Math.sin(this.ad) * Math.cos(s) * Math.cos(d));\n\t  deltav = Math.asin(Math.cos(s) * Math.sin(d) / Math.cos(u));\n\t  p.x = this.long0 - deltav / this.alfa;\n\t  fi1 = u;\n\t  ok = 0;\n\t  var iter = 0;\n\t  do {\n\t    p.y = 2 * (Math.atan(Math.pow(this.k, - 1 / this.alfa) * Math.pow(Math.tan(u / 2 + this.s45), 1 / this.alfa) * Math.pow((1 + this.e * Math.sin(fi1)) / (1 - this.e * Math.sin(fi1)), this.e / 2)) - this.s45);\n\t    if (Math.abs(fi1 - p.y) < 0.0000000001) {\n\t      ok = 1;\n\t    }\n\t    fi1 = p.y;\n\t    iter += 1;\n\t  } while (ok === 0 && iter < 15);\n\t  if (iter >= 15) {\n\t    return null;\n\t  }\n\n\t  return (p);\n\t}\n\n\tvar names$12 = [\"Krovak\", \"krovak\"];\n\tvar krovak = {\n\t  init: init$11,\n\t  forward: forward$10,\n\t  inverse: inverse$10,\n\t  names: names$12\n\t};\n\n\tvar mlfn = function(e0, e1, e2, e3, phi) {\n\t  return (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi));\n\t};\n\n\tvar e0fn = function(x) {\n\t  return (1 - 0.25 * x * (1 + x / 16 * (3 + 1.25 * x)));\n\t};\n\n\tvar e1fn = function(x) {\n\t  return (0.375 * x * (1 + 0.25 * x * (1 + 0.46875 * x)));\n\t};\n\n\tvar e2fn = function(x) {\n\t  return (0.05859375 * x * x * (1 + 0.75 * x));\n\t};\n\n\tvar e3fn = function(x) {\n\t  return (x * x * x * (35 / 3072));\n\t};\n\n\tvar gN = function(a, e, sinphi) {\n\t  var temp = e * sinphi;\n\t  return a / Math.sqrt(1 - temp * temp);\n\t};\n\n\tvar adjust_lat = function(x) {\n\t  return (Math.abs(x) < HALF_PI) ? x : (x - (sign(x) * Math.PI));\n\t};\n\n\tvar imlfn = function(ml, e0, e1, e2, e3) {\n\t  var phi;\n\t  var dphi;\n\n\t  phi = ml / e0;\n\t  for (var i = 0; i < 15; i++) {\n\t    dphi = (ml - (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi))) / (e0 - 2 * e1 * Math.cos(2 * phi) + 4 * e2 * Math.cos(4 * phi) - 6 * e3 * Math.cos(6 * phi));\n\t    phi += dphi;\n\t    if (Math.abs(dphi) <= 0.0000000001) {\n\t      return phi;\n\t    }\n\t  }\n\n\t  //..reportError(\"IMLFN-CONV:Latitude failed to converge after 15 iterations\");\n\t  return NaN;\n\t};\n\n\tfunction init$12() {\n\t  if (!this.sphere) {\n\t    this.e0 = e0fn(this.es);\n\t    this.e1 = e1fn(this.es);\n\t    this.e2 = e2fn(this.es);\n\t    this.e3 = e3fn(this.es);\n\t    this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);\n\t  }\n\t}\n\n\t/* Cassini forward equations--mapping lat,long to x,y\n\t  -----------------------------------------------------------------------*/\n\tfunction forward$11(p) {\n\n\t  /* Forward equations\n\t      -----------------*/\n\t  var x, y;\n\t  var lam = p.x;\n\t  var phi = p.y;\n\t  lam = adjust_lon(lam - this.long0);\n\n\t  if (this.sphere) {\n\t    x = this.a * Math.asin(Math.cos(phi) * Math.sin(lam));\n\t    y = this.a * (Math.atan2(Math.tan(phi), Math.cos(lam)) - this.lat0);\n\t  }\n\t  else {\n\t    //ellipsoid\n\t    var sinphi = Math.sin(phi);\n\t    var cosphi = Math.cos(phi);\n\t    var nl = gN(this.a, this.e, sinphi);\n\t    var tl = Math.tan(phi) * Math.tan(phi);\n\t    var al = lam * Math.cos(phi);\n\t    var asq = al * al;\n\t    var cl = this.es * cosphi * cosphi / (1 - this.es);\n\t    var ml = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);\n\n\t    x = nl * al * (1 - asq * tl * (1 / 6 - (8 - tl + 8 * cl) * asq / 120));\n\t    y = ml - this.ml0 + nl * sinphi / cosphi * asq * (0.5 + (5 - tl + 6 * cl) * asq / 24);\n\n\n\t  }\n\n\t  p.x = x + this.x0;\n\t  p.y = y + this.y0;\n\t  return p;\n\t}\n\n\t/* Inverse equations\n\t  -----------------*/\n\tfunction inverse$11(p) {\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  var x = p.x / this.a;\n\t  var y = p.y / this.a;\n\t  var phi, lam;\n\n\t  if (this.sphere) {\n\t    var dd = y + this.lat0;\n\t    phi = Math.asin(Math.sin(dd) * Math.cos(x));\n\t    lam = Math.atan2(Math.tan(x), Math.cos(dd));\n\t  }\n\t  else {\n\t    /* ellipsoid */\n\t    var ml1 = this.ml0 / this.a + y;\n\t    var phi1 = imlfn(ml1, this.e0, this.e1, this.e2, this.e3);\n\t    if (Math.abs(Math.abs(phi1) - HALF_PI) <= EPSLN) {\n\t      p.x = this.long0;\n\t      p.y = HALF_PI;\n\t      if (y < 0) {\n\t        p.y *= -1;\n\t      }\n\t      return p;\n\t    }\n\t    var nl1 = gN(this.a, this.e, Math.sin(phi1));\n\n\t    var rl1 = nl1 * nl1 * nl1 / this.a / this.a * (1 - this.es);\n\t    var tl1 = Math.pow(Math.tan(phi1), 2);\n\t    var dl = x * this.a / nl1;\n\t    var dsq = dl * dl;\n\t    phi = phi1 - nl1 * Math.tan(phi1) / rl1 * dl * dl * (0.5 - (1 + 3 * tl1) * dl * dl / 24);\n\t    lam = dl * (1 - dsq * (tl1 / 3 + (1 + 3 * tl1) * tl1 * dsq / 15)) / Math.cos(phi1);\n\n\t  }\n\n\t  p.x = adjust_lon(lam + this.long0);\n\t  p.y = adjust_lat(phi);\n\t  return p;\n\n\t}\n\n\tvar names$13 = [\"Cassini\", \"Cassini_Soldner\", \"cass\"];\n\tvar cass = {\n\t  init: init$12,\n\t  forward: forward$11,\n\t  inverse: inverse$11,\n\t  names: names$13\n\t};\n\n\tvar qsfnz = function(eccent, sinphi) {\n\t  var con;\n\t  if (eccent > 1.0e-7) {\n\t    con = eccent * sinphi;\n\t    return ((1 - eccent * eccent) * (sinphi / (1 - con * con) - (0.5 / eccent) * Math.log((1 - con) / (1 + con))));\n\t  }\n\t  else {\n\t    return (2 * sinphi);\n\t  }\n\t};\n\n\t/*\n\t  reference\n\t    \"New Equal-Area Map Projections for Noncircular Regions\", John P. Snyder,\n\t    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.\n\t  */\n\n\tvar S_POLE = 1;\n\n\tvar N_POLE = 2;\n\tvar EQUIT = 3;\n\tvar OBLIQ = 4;\n\n\t/* Initialize the Lambert Azimuthal Equal Area projection\n\t  ------------------------------------------------------*/\n\tfunction init$13() {\n\t  var t = Math.abs(this.lat0);\n\t  if (Math.abs(t - HALF_PI) < EPSLN) {\n\t    this.mode = this.lat0 < 0 ? this.S_POLE : this.N_POLE;\n\t  }\n\t  else if (Math.abs(t) < EPSLN) {\n\t    this.mode = this.EQUIT;\n\t  }\n\t  else {\n\t    this.mode = this.OBLIQ;\n\t  }\n\t  if (this.es > 0) {\n\t    var sinphi;\n\n\t    this.qp = qsfnz(this.e, 1);\n\t    this.mmf = 0.5 / (1 - this.es);\n\t    this.apa = authset(this.es);\n\t    switch (this.mode) {\n\t    case this.N_POLE:\n\t      this.dd = 1;\n\t      break;\n\t    case this.S_POLE:\n\t      this.dd = 1;\n\t      break;\n\t    case this.EQUIT:\n\t      this.rq = Math.sqrt(0.5 * this.qp);\n\t      this.dd = 1 / this.rq;\n\t      this.xmf = 1;\n\t      this.ymf = 0.5 * this.qp;\n\t      break;\n\t    case this.OBLIQ:\n\t      this.rq = Math.sqrt(0.5 * this.qp);\n\t      sinphi = Math.sin(this.lat0);\n\t      this.sinb1 = qsfnz(this.e, sinphi) / this.qp;\n\t      this.cosb1 = Math.sqrt(1 - this.sinb1 * this.sinb1);\n\t      this.dd = Math.cos(this.lat0) / (Math.sqrt(1 - this.es * sinphi * sinphi) * this.rq * this.cosb1);\n\t      this.ymf = (this.xmf = this.rq) / this.dd;\n\t      this.xmf *= this.dd;\n\t      break;\n\t    }\n\t  }\n\t  else {\n\t    if (this.mode === this.OBLIQ) {\n\t      this.sinph0 = Math.sin(this.lat0);\n\t      this.cosph0 = Math.cos(this.lat0);\n\t    }\n\t  }\n\t}\n\n\t/* Lambert Azimuthal Equal Area forward equations--mapping lat,long to x,y\n\t  -----------------------------------------------------------------------*/\n\tfunction forward$12(p) {\n\n\t  /* Forward equations\n\t      -----------------*/\n\t  var x, y, coslam, sinlam, sinphi, q, sinb, cosb, b, cosphi;\n\t  var lam = p.x;\n\t  var phi = p.y;\n\n\t  lam = adjust_lon(lam - this.long0);\n\t  if (this.sphere) {\n\t    sinphi = Math.sin(phi);\n\t    cosphi = Math.cos(phi);\n\t    coslam = Math.cos(lam);\n\t    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n\t      y = (this.mode === this.EQUIT) ? 1 + cosphi * coslam : 1 + this.sinph0 * sinphi + this.cosph0 * cosphi * coslam;\n\t      if (y <= EPSLN) {\n\t        return null;\n\t      }\n\t      y = Math.sqrt(2 / y);\n\t      x = y * cosphi * Math.sin(lam);\n\t      y *= (this.mode === this.EQUIT) ? sinphi : this.cosph0 * sinphi - this.sinph0 * cosphi * coslam;\n\t    }\n\t    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n\t      if (this.mode === this.N_POLE) {\n\t        coslam = -coslam;\n\t      }\n\t      if (Math.abs(phi + this.phi0) < EPSLN) {\n\t        return null;\n\t      }\n\t      y = FORTPI - phi * 0.5;\n\t      y = 2 * ((this.mode === this.S_POLE) ? Math.cos(y) : Math.sin(y));\n\t      x = y * Math.sin(lam);\n\t      y *= coslam;\n\t    }\n\t  }\n\t  else {\n\t    sinb = 0;\n\t    cosb = 0;\n\t    b = 0;\n\t    coslam = Math.cos(lam);\n\t    sinlam = Math.sin(lam);\n\t    sinphi = Math.sin(phi);\n\t    q = qsfnz(this.e, sinphi);\n\t    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n\t      sinb = q / this.qp;\n\t      cosb = Math.sqrt(1 - sinb * sinb);\n\t    }\n\t    switch (this.mode) {\n\t    case this.OBLIQ:\n\t      b = 1 + this.sinb1 * sinb + this.cosb1 * cosb * coslam;\n\t      break;\n\t    case this.EQUIT:\n\t      b = 1 + cosb * coslam;\n\t      break;\n\t    case this.N_POLE:\n\t      b = HALF_PI + phi;\n\t      q = this.qp - q;\n\t      break;\n\t    case this.S_POLE:\n\t      b = phi - HALF_PI;\n\t      q = this.qp + q;\n\t      break;\n\t    }\n\t    if (Math.abs(b) < EPSLN) {\n\t      return null;\n\t    }\n\t    switch (this.mode) {\n\t    case this.OBLIQ:\n\t    case this.EQUIT:\n\t      b = Math.sqrt(2 / b);\n\t      if (this.mode === this.OBLIQ) {\n\t        y = this.ymf * b * (this.cosb1 * sinb - this.sinb1 * cosb * coslam);\n\t      }\n\t      else {\n\t        y = (b = Math.sqrt(2 / (1 + cosb * coslam))) * sinb * this.ymf;\n\t      }\n\t      x = this.xmf * b * cosb * sinlam;\n\t      break;\n\t    case this.N_POLE:\n\t    case this.S_POLE:\n\t      if (q >= 0) {\n\t        x = (b = Math.sqrt(q)) * sinlam;\n\t        y = coslam * ((this.mode === this.S_POLE) ? b : -b);\n\t      }\n\t      else {\n\t        x = y = 0;\n\t      }\n\t      break;\n\t    }\n\t  }\n\n\t  p.x = this.a * x + this.x0;\n\t  p.y = this.a * y + this.y0;\n\t  return p;\n\t}\n\n\t/* Inverse equations\n\t  -----------------*/\n\tfunction inverse$12(p) {\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  var x = p.x / this.a;\n\t  var y = p.y / this.a;\n\t  var lam, phi, cCe, sCe, q, rho, ab;\n\t  if (this.sphere) {\n\t    var cosz = 0,\n\t      rh, sinz = 0;\n\n\t    rh = Math.sqrt(x * x + y * y);\n\t    phi = rh * 0.5;\n\t    if (phi > 1) {\n\t      return null;\n\t    }\n\t    phi = 2 * Math.asin(phi);\n\t    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n\t      sinz = Math.sin(phi);\n\t      cosz = Math.cos(phi);\n\t    }\n\t    switch (this.mode) {\n\t    case this.EQUIT:\n\t      phi = (Math.abs(rh) <= EPSLN) ? 0 : Math.asin(y * sinz / rh);\n\t      x *= sinz;\n\t      y = cosz * rh;\n\t      break;\n\t    case this.OBLIQ:\n\t      phi = (Math.abs(rh) <= EPSLN) ? this.phi0 : Math.asin(cosz * this.sinph0 + y * sinz * this.cosph0 / rh);\n\t      x *= sinz * this.cosph0;\n\t      y = (cosz - Math.sin(phi) * this.sinph0) * rh;\n\t      break;\n\t    case this.N_POLE:\n\t      y = -y;\n\t      phi = HALF_PI - phi;\n\t      break;\n\t    case this.S_POLE:\n\t      phi -= HALF_PI;\n\t      break;\n\t    }\n\t    lam = (y === 0 && (this.mode === this.EQUIT || this.mode === this.OBLIQ)) ? 0 : Math.atan2(x, y);\n\t  }\n\t  else {\n\t    ab = 0;\n\t    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n\t      x /= this.dd;\n\t      y *= this.dd;\n\t      rho = Math.sqrt(x * x + y * y);\n\t      if (rho < EPSLN) {\n\t        p.x = 0;\n\t        p.y = this.phi0;\n\t        return p;\n\t      }\n\t      sCe = 2 * Math.asin(0.5 * rho / this.rq);\n\t      cCe = Math.cos(sCe);\n\t      x *= (sCe = Math.sin(sCe));\n\t      if (this.mode === this.OBLIQ) {\n\t        ab = cCe * this.sinb1 + y * sCe * this.cosb1 / rho;\n\t        q = this.qp * ab;\n\t        y = rho * this.cosb1 * cCe - y * this.sinb1 * sCe;\n\t      }\n\t      else {\n\t        ab = y * sCe / rho;\n\t        q = this.qp * ab;\n\t        y = rho * cCe;\n\t      }\n\t    }\n\t    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n\t      if (this.mode === this.N_POLE) {\n\t        y = -y;\n\t      }\n\t      q = (x * x + y * y);\n\t      if (!q) {\n\t        p.x = 0;\n\t        p.y = this.phi0;\n\t        return p;\n\t      }\n\t      ab = 1 - q / this.qp;\n\t      if (this.mode === this.S_POLE) {\n\t        ab = -ab;\n\t      }\n\t    }\n\t    lam = Math.atan2(x, y);\n\t    phi = authlat(Math.asin(ab), this.apa);\n\t  }\n\n\t  p.x = adjust_lon(this.long0 + lam);\n\t  p.y = phi;\n\t  return p;\n\t}\n\n\t/* determine latitude from authalic latitude */\n\tvar P00 = 0.33333333333333333333;\n\n\tvar P01 = 0.17222222222222222222;\n\tvar P02 = 0.10257936507936507936;\n\tvar P10 = 0.06388888888888888888;\n\tvar P11 = 0.06640211640211640211;\n\tvar P20 = 0.01641501294219154443;\n\n\tfunction authset(es) {\n\t  var t;\n\t  var APA = [];\n\t  APA[0] = es * P00;\n\t  t = es * es;\n\t  APA[0] += t * P01;\n\t  APA[1] = t * P10;\n\t  t *= es;\n\t  APA[0] += t * P02;\n\t  APA[1] += t * P11;\n\t  APA[2] = t * P20;\n\t  return APA;\n\t}\n\n\tfunction authlat(beta, APA) {\n\t  var t = beta + beta;\n\t  return (beta + APA[0] * Math.sin(t) + APA[1] * Math.sin(t + t) + APA[2] * Math.sin(t + t + t));\n\t}\n\n\tvar names$14 = [\"Lambert Azimuthal Equal Area\", \"Lambert_Azimuthal_Equal_Area\", \"laea\"];\n\tvar laea = {\n\t  init: init$13,\n\t  forward: forward$12,\n\t  inverse: inverse$12,\n\t  names: names$14,\n\t  S_POLE: S_POLE,\n\t  N_POLE: N_POLE,\n\t  EQUIT: EQUIT,\n\t  OBLIQ: OBLIQ\n\t};\n\n\tvar asinz = function(x) {\n\t  if (Math.abs(x) > 1) {\n\t    x = (x > 1) ? 1 : -1;\n\t  }\n\t  return Math.asin(x);\n\t};\n\n\tfunction init$14() {\n\n\t  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n\t    return;\n\t  }\n\t  this.temp = this.b / this.a;\n\t  this.es = 1 - Math.pow(this.temp, 2);\n\t  this.e3 = Math.sqrt(this.es);\n\n\t  this.sin_po = Math.sin(this.lat1);\n\t  this.cos_po = Math.cos(this.lat1);\n\t  this.t1 = this.sin_po;\n\t  this.con = this.sin_po;\n\t  this.ms1 = msfnz(this.e3, this.sin_po, this.cos_po);\n\t  this.qs1 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n\t  this.sin_po = Math.sin(this.lat2);\n\t  this.cos_po = Math.cos(this.lat2);\n\t  this.t2 = this.sin_po;\n\t  this.ms2 = msfnz(this.e3, this.sin_po, this.cos_po);\n\t  this.qs2 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n\t  this.sin_po = Math.sin(this.lat0);\n\t  this.cos_po = Math.cos(this.lat0);\n\t  this.t3 = this.sin_po;\n\t  this.qs0 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n\t  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n\t    this.ns0 = (this.ms1 * this.ms1 - this.ms2 * this.ms2) / (this.qs2 - this.qs1);\n\t  }\n\t  else {\n\t    this.ns0 = this.con;\n\t  }\n\t  this.c = this.ms1 * this.ms1 + this.ns0 * this.qs1;\n\t  this.rh = this.a * Math.sqrt(this.c - this.ns0 * this.qs0) / this.ns0;\n\t}\n\n\t/* Albers Conical Equal Area forward equations--mapping lat,long to x,y\n\t  -------------------------------------------------------------------*/\n\tfunction forward$13(p) {\n\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  this.sin_phi = Math.sin(lat);\n\t  this.cos_phi = Math.cos(lat);\n\n\t  var qs = qsfnz(this.e3, this.sin_phi, this.cos_phi);\n\t  var rh1 = this.a * Math.sqrt(this.c - this.ns0 * qs) / this.ns0;\n\t  var theta = this.ns0 * adjust_lon(lon - this.long0);\n\t  var x = rh1 * Math.sin(theta) + this.x0;\n\t  var y = this.rh - rh1 * Math.cos(theta) + this.y0;\n\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\tfunction inverse$13(p) {\n\t  var rh1, qs, con, theta, lon, lat;\n\n\t  p.x -= this.x0;\n\t  p.y = this.rh - p.y + this.y0;\n\t  if (this.ns0 >= 0) {\n\t    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);\n\t    con = 1;\n\t  }\n\t  else {\n\t    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);\n\t    con = -1;\n\t  }\n\t  theta = 0;\n\t  if (rh1 !== 0) {\n\t    theta = Math.atan2(con * p.x, con * p.y);\n\t  }\n\t  con = rh1 * this.ns0 / this.a;\n\t  if (this.sphere) {\n\t    lat = Math.asin((this.c - con * con) / (2 * this.ns0));\n\t  }\n\t  else {\n\t    qs = (this.c - con * con) / this.ns0;\n\t    lat = this.phi1z(this.e3, qs);\n\t  }\n\n\t  lon = adjust_lon(theta / this.ns0 + this.long0);\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\t/* Function to compute phi1, the latitude for the inverse of the\n\t   Albers Conical Equal-Area projection.\n\t-------------------------------------------*/\n\tfunction phi1z(eccent, qs) {\n\t  var sinphi, cosphi, con, com, dphi;\n\t  var phi = asinz(0.5 * qs);\n\t  if (eccent < EPSLN) {\n\t    return phi;\n\t  }\n\n\t  var eccnts = eccent * eccent;\n\t  for (var i = 1; i <= 25; i++) {\n\t    sinphi = Math.sin(phi);\n\t    cosphi = Math.cos(phi);\n\t    con = eccent * sinphi;\n\t    com = 1 - con * con;\n\t    dphi = 0.5 * com * com / cosphi * (qs / (1 - eccnts) - sinphi / com + 0.5 / eccent * Math.log((1 - con) / (1 + con)));\n\t    phi = phi + dphi;\n\t    if (Math.abs(dphi) <= 1e-7) {\n\t      return phi;\n\t    }\n\t  }\n\t  return null;\n\t}\n\n\tvar names$15 = [\"Albers_Conic_Equal_Area\", \"Albers\", \"aea\"];\n\tvar aea = {\n\t  init: init$14,\n\t  forward: forward$13,\n\t  inverse: inverse$13,\n\t  names: names$15,\n\t  phi1z: phi1z\n\t};\n\n\t/*\n\t  reference:\n\t    Wolfram Mathworld \"Gnomonic Projection\"\n\t    http://mathworld.wolfram.com/GnomonicProjection.html\n\t    Accessed: 12th November 2009\n\t  */\n\tfunction init$15() {\n\n\t  /* Place parameters in static storage for common use\n\t      -------------------------------------------------*/\n\t  this.sin_p14 = Math.sin(this.lat0);\n\t  this.cos_p14 = Math.cos(this.lat0);\n\t  // Approximation for projecting points to the horizon (infinity)\n\t  this.infinity_dist = 1000 * this.a;\n\t  this.rc = 1;\n\t}\n\n\t/* Gnomonic forward equations--mapping lat,long to x,y\n\t    ---------------------------------------------------*/\n\tfunction forward$14(p) {\n\t  var sinphi, cosphi; /* sin and cos value        */\n\t  var dlon; /* delta longitude value      */\n\t  var coslon; /* cos of longitude        */\n\t  var ksp; /* scale factor          */\n\t  var g;\n\t  var x, y;\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  /* Forward equations\n\t      -----------------*/\n\t  dlon = adjust_lon(lon - this.long0);\n\n\t  sinphi = Math.sin(lat);\n\t  cosphi = Math.cos(lat);\n\n\t  coslon = Math.cos(dlon);\n\t  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;\n\t  ksp = 1;\n\t  if ((g > 0) || (Math.abs(g) <= EPSLN)) {\n\t    x = this.x0 + this.a * ksp * cosphi * Math.sin(dlon) / g;\n\t    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon) / g;\n\t  }\n\t  else {\n\n\t    // Point is in the opposing hemisphere and is unprojectable\n\t    // We still need to return a reasonable point, so we project\n\t    // to infinity, on a bearing\n\t    // equivalent to the northern hemisphere equivalent\n\t    // This is a reasonable approximation for short shapes and lines that\n\t    // straddle the horizon.\n\n\t    x = this.x0 + this.infinity_dist * cosphi * Math.sin(dlon);\n\t    y = this.y0 + this.infinity_dist * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);\n\n\t  }\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\tfunction inverse$14(p) {\n\t  var rh; /* Rho */\n\t  var sinc, cosc;\n\t  var c;\n\t  var lon, lat;\n\n\t  /* Inverse equations\n\t      -----------------*/\n\t  p.x = (p.x - this.x0) / this.a;\n\t  p.y = (p.y - this.y0) / this.a;\n\n\t  p.x /= this.k0;\n\t  p.y /= this.k0;\n\n\t  if ((rh = Math.sqrt(p.x * p.x + p.y * p.y))) {\n\t    c = Math.atan2(rh, this.rc);\n\t    sinc = Math.sin(c);\n\t    cosc = Math.cos(c);\n\n\t    lat = asinz(cosc * this.sin_p14 + (p.y * sinc * this.cos_p14) / rh);\n\t    lon = Math.atan2(p.x * sinc, rh * this.cos_p14 * cosc - p.y * this.sin_p14 * sinc);\n\t    lon = adjust_lon(this.long0 + lon);\n\t  }\n\t  else {\n\t    lat = this.phic0;\n\t    lon = 0;\n\t  }\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$16 = [\"gnom\"];\n\tvar gnom = {\n\t  init: init$15,\n\t  forward: forward$14,\n\t  inverse: inverse$14,\n\t  names: names$16\n\t};\n\n\tvar iqsfnz = function(eccent, q) {\n\t  var temp = 1 - (1 - eccent * eccent) / (2 * eccent) * Math.log((1 - eccent) / (1 + eccent));\n\t  if (Math.abs(Math.abs(q) - temp) < 1.0E-6) {\n\t    if (q < 0) {\n\t      return (-1 * HALF_PI);\n\t    }\n\t    else {\n\t      return HALF_PI;\n\t    }\n\t  }\n\t  //var phi = 0.5* q/(1-eccent*eccent);\n\t  var phi = Math.asin(0.5 * q);\n\t  var dphi;\n\t  var sin_phi;\n\t  var cos_phi;\n\t  var con;\n\t  for (var i = 0; i < 30; i++) {\n\t    sin_phi = Math.sin(phi);\n\t    cos_phi = Math.cos(phi);\n\t    con = eccent * sin_phi;\n\t    dphi = Math.pow(1 - con * con, 2) / (2 * cos_phi) * (q / (1 - eccent * eccent) - sin_phi / (1 - con * con) + 0.5 / eccent * Math.log((1 - con) / (1 + con)));\n\t    phi += dphi;\n\t    if (Math.abs(dphi) <= 0.0000000001) {\n\t      return phi;\n\t    }\n\t  }\n\n\t  //console.log(\"IQSFN-CONV:Latitude failed to converge after 30 iterations\");\n\t  return NaN;\n\t};\n\n\t/*\n\t  reference:\n\t    \"Cartographic Projection Procedures for the UNIX Environment-\n\t    A User's Manual\" by Gerald I. Evenden,\n\t    USGS Open File Report 90-284and Release 4 Interim Reports (2003)\n\t*/\n\tfunction init$16() {\n\t  //no-op\n\t  if (!this.sphere) {\n\t    this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));\n\t  }\n\t}\n\n\t/* Cylindrical Equal Area forward equations--mapping lat,long to x,y\n\t    ------------------------------------------------------------*/\n\tfunction forward$15(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  var x, y;\n\t  /* Forward equations\n\t      -----------------*/\n\t  var dlon = adjust_lon(lon - this.long0);\n\t  if (this.sphere) {\n\t    x = this.x0 + this.a * dlon * Math.cos(this.lat_ts);\n\t    y = this.y0 + this.a * Math.sin(lat) / Math.cos(this.lat_ts);\n\t  }\n\t  else {\n\t    var qs = qsfnz(this.e, Math.sin(lat));\n\t    x = this.x0 + this.a * this.k0 * dlon;\n\t    y = this.y0 + this.a * qs * 0.5 / this.k0;\n\t  }\n\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\t/* Cylindrical Equal Area inverse equations--mapping x,y to lat/long\n\t    ------------------------------------------------------------*/\n\tfunction inverse$15(p) {\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  var lon, lat;\n\n\t  if (this.sphere) {\n\t    lon = adjust_lon(this.long0 + (p.x / this.a) / Math.cos(this.lat_ts));\n\t    lat = Math.asin((p.y / this.a) * Math.cos(this.lat_ts));\n\t  }\n\t  else {\n\t    lat = iqsfnz(this.e, 2 * p.y * this.k0 / this.a);\n\t    lon = adjust_lon(this.long0 + p.x / (this.a * this.k0));\n\t  }\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$17 = [\"cea\"];\n\tvar cea = {\n\t  init: init$16,\n\t  forward: forward$15,\n\t  inverse: inverse$15,\n\t  names: names$17\n\t};\n\n\tfunction init$17() {\n\n\t  this.x0 = this.x0 || 0;\n\t  this.y0 = this.y0 || 0;\n\t  this.lat0 = this.lat0 || 0;\n\t  this.long0 = this.long0 || 0;\n\t  this.lat_ts = this.lat_ts || 0;\n\t  this.title = this.title || \"Equidistant Cylindrical (Plate Carre)\";\n\n\t  this.rc = Math.cos(this.lat_ts);\n\t}\n\n\t// forward equations--mapping lat,long to x,y\n\t// -----------------------------------------------------------------\n\tfunction forward$16(p) {\n\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  var dlon = adjust_lon(lon - this.long0);\n\t  var dlat = adjust_lat(lat - this.lat0);\n\t  p.x = this.x0 + (this.a * dlon * this.rc);\n\t  p.y = this.y0 + (this.a * dlat);\n\t  return p;\n\t}\n\n\t// inverse equations--mapping x,y to lat/long\n\t// -----------------------------------------------------------------\n\tfunction inverse$16(p) {\n\n\t  var x = p.x;\n\t  var y = p.y;\n\n\t  p.x = adjust_lon(this.long0 + ((x - this.x0) / (this.a * this.rc)));\n\t  p.y = adjust_lat(this.lat0 + ((y - this.y0) / (this.a)));\n\t  return p;\n\t}\n\n\tvar names$18 = [\"Equirectangular\", \"Equidistant_Cylindrical\", \"eqc\"];\n\tvar eqc = {\n\t  init: init$17,\n\t  forward: forward$16,\n\t  inverse: inverse$16,\n\t  names: names$18\n\t};\n\n\tvar MAX_ITER$2 = 20;\n\n\tfunction init$18() {\n\t  /* Place parameters in static storage for common use\n\t      -------------------------------------------------*/\n\t  this.temp = this.b / this.a;\n\t  this.es = 1 - Math.pow(this.temp, 2); // devait etre dans tmerc.js mais n y est pas donc je commente sinon retour de valeurs nulles\n\t  this.e = Math.sqrt(this.es);\n\t  this.e0 = e0fn(this.es);\n\t  this.e1 = e1fn(this.es);\n\t  this.e2 = e2fn(this.es);\n\t  this.e3 = e3fn(this.es);\n\t  this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0); //si que des zeros le calcul ne se fait pas\n\t}\n\n\t/* Polyconic forward equations--mapping lat,long to x,y\n\t    ---------------------------------------------------*/\n\tfunction forward$17(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  var x, y, el;\n\t  var dlon = adjust_lon(lon - this.long0);\n\t  el = dlon * Math.sin(lat);\n\t  if (this.sphere) {\n\t    if (Math.abs(lat) <= EPSLN) {\n\t      x = this.a * dlon;\n\t      y = -1 * this.a * this.lat0;\n\t    }\n\t    else {\n\t      x = this.a * Math.sin(el) / Math.tan(lat);\n\t      y = this.a * (adjust_lat(lat - this.lat0) + (1 - Math.cos(el)) / Math.tan(lat));\n\t    }\n\t  }\n\t  else {\n\t    if (Math.abs(lat) <= EPSLN) {\n\t      x = this.a * dlon;\n\t      y = -1 * this.ml0;\n\t    }\n\t    else {\n\t      var nl = gN(this.a, this.e, Math.sin(lat)) / Math.tan(lat);\n\t      x = nl * Math.sin(el);\n\t      y = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, lat) - this.ml0 + nl * (1 - Math.cos(el));\n\t    }\n\n\t  }\n\t  p.x = x + this.x0;\n\t  p.y = y + this.y0;\n\t  return p;\n\t}\n\n\t/* Inverse equations\n\t  -----------------*/\n\tfunction inverse$17(p) {\n\t  var lon, lat, x, y, i;\n\t  var al, bl;\n\t  var phi, dphi;\n\t  x = p.x - this.x0;\n\t  y = p.y - this.y0;\n\n\t  if (this.sphere) {\n\t    if (Math.abs(y + this.a * this.lat0) <= EPSLN) {\n\t      lon = adjust_lon(x / this.a + this.long0);\n\t      lat = 0;\n\t    }\n\t    else {\n\t      al = this.lat0 + y / this.a;\n\t      bl = x * x / this.a / this.a + al * al;\n\t      phi = al;\n\t      var tanphi;\n\t      for (i = MAX_ITER$2; i; --i) {\n\t        tanphi = Math.tan(phi);\n\t        dphi = -1 * (al * (phi * tanphi + 1) - phi - 0.5 * (phi * phi + bl) * tanphi) / ((phi - al) / tanphi - 1);\n\t        phi += dphi;\n\t        if (Math.abs(dphi) <= EPSLN) {\n\t          lat = phi;\n\t          break;\n\t        }\n\t      }\n\t      lon = adjust_lon(this.long0 + (Math.asin(x * Math.tan(phi) / this.a)) / Math.sin(lat));\n\t    }\n\t  }\n\t  else {\n\t    if (Math.abs(y + this.ml0) <= EPSLN) {\n\t      lat = 0;\n\t      lon = adjust_lon(this.long0 + x / this.a);\n\t    }\n\t    else {\n\n\t      al = (this.ml0 + y) / this.a;\n\t      bl = x * x / this.a / this.a + al * al;\n\t      phi = al;\n\t      var cl, mln, mlnp, ma;\n\t      var con;\n\t      for (i = MAX_ITER$2; i; --i) {\n\t        con = this.e * Math.sin(phi);\n\t        cl = Math.sqrt(1 - con * con) * Math.tan(phi);\n\t        mln = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);\n\t        mlnp = this.e0 - 2 * this.e1 * Math.cos(2 * phi) + 4 * this.e2 * Math.cos(4 * phi) - 6 * this.e3 * Math.cos(6 * phi);\n\t        ma = mln / this.a;\n\t        dphi = (al * (cl * ma + 1) - ma - 0.5 * cl * (ma * ma + bl)) / (this.es * Math.sin(2 * phi) * (ma * ma + bl - 2 * al * ma) / (4 * cl) + (al - ma) * (cl * mlnp - 2 / Math.sin(2 * phi)) - mlnp);\n\t        phi -= dphi;\n\t        if (Math.abs(dphi) <= EPSLN) {\n\t          lat = phi;\n\t          break;\n\t        }\n\t      }\n\n\t      //lat=phi4z(this.e,this.e0,this.e1,this.e2,this.e3,al,bl,0,0);\n\t      cl = Math.sqrt(1 - this.es * Math.pow(Math.sin(lat), 2)) * Math.tan(lat);\n\t      lon = adjust_lon(this.long0 + Math.asin(x * cl / this.a) / Math.sin(lat));\n\t    }\n\t  }\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$19 = [\"Polyconic\", \"poly\"];\n\tvar poly = {\n\t  init: init$18,\n\t  forward: forward$17,\n\t  inverse: inverse$17,\n\t  names: names$19\n\t};\n\n\t/*\n\t  reference\n\t    Department of Land and Survey Technical Circular 1973/32\n\t      http://www.linz.govt.nz/docs/miscellaneous/nz-map-definition.pdf\n\t    OSG Technical Report 4.1\n\t      http://www.linz.govt.nz/docs/miscellaneous/nzmg.pdf\n\t  */\n\n\t/**\n\t * iterations: Number of iterations to refine inverse transform.\n\t *     0 -> km accuracy\n\t *     1 -> m accuracy -- suitable for most mapping applications\n\t *     2 -> mm accuracy\n\t */\n\n\n\tfunction init$19() {\n\t  this.A = [];\n\t  this.A[1] = 0.6399175073;\n\t  this.A[2] = -0.1358797613;\n\t  this.A[3] = 0.063294409;\n\t  this.A[4] = -0.02526853;\n\t  this.A[5] = 0.0117879;\n\t  this.A[6] = -0.0055161;\n\t  this.A[7] = 0.0026906;\n\t  this.A[8] = -0.001333;\n\t  this.A[9] = 0.00067;\n\t  this.A[10] = -0.00034;\n\n\t  this.B_re = [];\n\t  this.B_im = [];\n\t  this.B_re[1] = 0.7557853228;\n\t  this.B_im[1] = 0;\n\t  this.B_re[2] = 0.249204646;\n\t  this.B_im[2] = 0.003371507;\n\t  this.B_re[3] = -0.001541739;\n\t  this.B_im[3] = 0.041058560;\n\t  this.B_re[4] = -0.10162907;\n\t  this.B_im[4] = 0.01727609;\n\t  this.B_re[5] = -0.26623489;\n\t  this.B_im[5] = -0.36249218;\n\t  this.B_re[6] = -0.6870983;\n\t  this.B_im[6] = -1.1651967;\n\n\t  this.C_re = [];\n\t  this.C_im = [];\n\t  this.C_re[1] = 1.3231270439;\n\t  this.C_im[1] = 0;\n\t  this.C_re[2] = -0.577245789;\n\t  this.C_im[2] = -0.007809598;\n\t  this.C_re[3] = 0.508307513;\n\t  this.C_im[3] = -0.112208952;\n\t  this.C_re[4] = -0.15094762;\n\t  this.C_im[4] = 0.18200602;\n\t  this.C_re[5] = 1.01418179;\n\t  this.C_im[5] = 1.64497696;\n\t  this.C_re[6] = 1.9660549;\n\t  this.C_im[6] = 2.5127645;\n\n\t  this.D = [];\n\t  this.D[1] = 1.5627014243;\n\t  this.D[2] = 0.5185406398;\n\t  this.D[3] = -0.03333098;\n\t  this.D[4] = -0.1052906;\n\t  this.D[5] = -0.0368594;\n\t  this.D[6] = 0.007317;\n\t  this.D[7] = 0.01220;\n\t  this.D[8] = 0.00394;\n\t  this.D[9] = -0.0013;\n\t}\n\n\t/**\n\t    New Zealand Map Grid Forward  - long/lat to x/y\n\t    long/lat in radians\n\t  */\n\tfunction forward$18(p) {\n\t  var n;\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  var delta_lat = lat - this.lat0;\n\t  var delta_lon = lon - this.long0;\n\n\t  // 1. Calculate d_phi and d_psi    ...                          // and d_lambda\n\t  // For this algorithm, delta_latitude is in seconds of arc x 10-5, so we need to scale to those units. Longitude is radians.\n\t  var d_phi = delta_lat / SEC_TO_RAD * 1E-5;\n\t  var d_lambda = delta_lon;\n\t  var d_phi_n = 1; // d_phi^0\n\n\t  var d_psi = 0;\n\t  for (n = 1; n <= 10; n++) {\n\t    d_phi_n = d_phi_n * d_phi;\n\t    d_psi = d_psi + this.A[n] * d_phi_n;\n\t  }\n\n\t  // 2. Calculate theta\n\t  var th_re = d_psi;\n\t  var th_im = d_lambda;\n\n\t  // 3. Calculate z\n\t  var th_n_re = 1;\n\t  var th_n_im = 0; // theta^0\n\t  var th_n_re1;\n\t  var th_n_im1;\n\n\t  var z_re = 0;\n\t  var z_im = 0;\n\t  for (n = 1; n <= 6; n++) {\n\t    th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n\t    th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n\t    th_n_re = th_n_re1;\n\t    th_n_im = th_n_im1;\n\t    z_re = z_re + this.B_re[n] * th_n_re - this.B_im[n] * th_n_im;\n\t    z_im = z_im + this.B_im[n] * th_n_re + this.B_re[n] * th_n_im;\n\t  }\n\n\t  // 4. Calculate easting and northing\n\t  p.x = (z_im * this.a) + this.x0;\n\t  p.y = (z_re * this.a) + this.y0;\n\n\t  return p;\n\t}\n\n\t/**\n\t    New Zealand Map Grid Inverse  -  x/y to long/lat\n\t  */\n\tfunction inverse$18(p) {\n\t  var n;\n\t  var x = p.x;\n\t  var y = p.y;\n\n\t  var delta_x = x - this.x0;\n\t  var delta_y = y - this.y0;\n\n\t  // 1. Calculate z\n\t  var z_re = delta_y / this.a;\n\t  var z_im = delta_x / this.a;\n\n\t  // 2a. Calculate theta - first approximation gives km accuracy\n\t  var z_n_re = 1;\n\t  var z_n_im = 0; // z^0\n\t  var z_n_re1;\n\t  var z_n_im1;\n\n\t  var th_re = 0;\n\t  var th_im = 0;\n\t  for (n = 1; n <= 6; n++) {\n\t    z_n_re1 = z_n_re * z_re - z_n_im * z_im;\n\t    z_n_im1 = z_n_im * z_re + z_n_re * z_im;\n\t    z_n_re = z_n_re1;\n\t    z_n_im = z_n_im1;\n\t    th_re = th_re + this.C_re[n] * z_n_re - this.C_im[n] * z_n_im;\n\t    th_im = th_im + this.C_im[n] * z_n_re + this.C_re[n] * z_n_im;\n\t  }\n\n\t  // 2b. Iterate to refine the accuracy of the calculation\n\t  //        0 iterations gives km accuracy\n\t  //        1 iteration gives m accuracy -- good enough for most mapping applications\n\t  //        2 iterations bives mm accuracy\n\t  for (var i = 0; i < this.iterations; i++) {\n\t    var th_n_re = th_re;\n\t    var th_n_im = th_im;\n\t    var th_n_re1;\n\t    var th_n_im1;\n\n\t    var num_re = z_re;\n\t    var num_im = z_im;\n\t    for (n = 2; n <= 6; n++) {\n\t      th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n\t      th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n\t      th_n_re = th_n_re1;\n\t      th_n_im = th_n_im1;\n\t      num_re = num_re + (n - 1) * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);\n\t      num_im = num_im + (n - 1) * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);\n\t    }\n\n\t    th_n_re = 1;\n\t    th_n_im = 0;\n\t    var den_re = this.B_re[1];\n\t    var den_im = this.B_im[1];\n\t    for (n = 2; n <= 6; n++) {\n\t      th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n\t      th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n\t      th_n_re = th_n_re1;\n\t      th_n_im = th_n_im1;\n\t      den_re = den_re + n * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);\n\t      den_im = den_im + n * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);\n\t    }\n\n\t    // Complex division\n\t    var den2 = den_re * den_re + den_im * den_im;\n\t    th_re = (num_re * den_re + num_im * den_im) / den2;\n\t    th_im = (num_im * den_re - num_re * den_im) / den2;\n\t  }\n\n\t  // 3. Calculate d_phi              ...                                    // and d_lambda\n\t  var d_psi = th_re;\n\t  var d_lambda = th_im;\n\t  var d_psi_n = 1; // d_psi^0\n\n\t  var d_phi = 0;\n\t  for (n = 1; n <= 9; n++) {\n\t    d_psi_n = d_psi_n * d_psi;\n\t    d_phi = d_phi + this.D[n] * d_psi_n;\n\t  }\n\n\t  // 4. Calculate latitude and longitude\n\t  // d_phi is calcuated in second of arc * 10^-5, so we need to scale back to radians. d_lambda is in radians.\n\t  var lat = this.lat0 + (d_phi * SEC_TO_RAD * 1E5);\n\t  var lon = this.long0 + d_lambda;\n\n\t  p.x = lon;\n\t  p.y = lat;\n\n\t  return p;\n\t}\n\n\tvar names$20 = [\"New_Zealand_Map_Grid\", \"nzmg\"];\n\tvar nzmg = {\n\t  init: init$19,\n\t  forward: forward$18,\n\t  inverse: inverse$18,\n\t  names: names$20\n\t};\n\n\t/*\n\t  reference\n\t    \"New Equal-Area Map Projections for Noncircular Regions\", John P. Snyder,\n\t    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.\n\t  */\n\n\n\t/* Initialize the Miller Cylindrical projection\n\t  -------------------------------------------*/\n\tfunction init$20() {\n\t  //no-op\n\t}\n\n\t/* Miller Cylindrical forward equations--mapping lat,long to x,y\n\t    ------------------------------------------------------------*/\n\tfunction forward$19(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  /* Forward equations\n\t      -----------------*/\n\t  var dlon = adjust_lon(lon - this.long0);\n\t  var x = this.x0 + this.a * dlon;\n\t  var y = this.y0 + this.a * Math.log(Math.tan((Math.PI / 4) + (lat / 2.5))) * 1.25;\n\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\t/* Miller Cylindrical inverse equations--mapping x,y to lat/long\n\t    ------------------------------------------------------------*/\n\tfunction inverse$19(p) {\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\n\t  var lon = adjust_lon(this.long0 + p.x / this.a);\n\t  var lat = 2.5 * (Math.atan(Math.exp(0.8 * p.y / this.a)) - Math.PI / 4);\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$21 = [\"Miller_Cylindrical\", \"mill\"];\n\tvar mill = {\n\t  init: init$20,\n\t  forward: forward$19,\n\t  inverse: inverse$19,\n\t  names: names$21\n\t};\n\n\tvar MAX_ITER$3 = 20;\n\tfunction init$21() {\n\t  /* Place parameters in static storage for common use\n\t    -------------------------------------------------*/\n\n\n\t  if (!this.sphere) {\n\t    this.en = pj_enfn(this.es);\n\t  }\n\t  else {\n\t    this.n = 1;\n\t    this.m = 0;\n\t    this.es = 0;\n\t    this.C_y = Math.sqrt((this.m + 1) / this.n);\n\t    this.C_x = this.C_y / (this.m + 1);\n\t  }\n\n\t}\n\n\t/* Sinusoidal forward equations--mapping lat,long to x,y\n\t  -----------------------------------------------------*/\n\tfunction forward$20(p) {\n\t  var x, y;\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  /* Forward equations\n\t    -----------------*/\n\t  lon = adjust_lon(lon - this.long0);\n\n\t  if (this.sphere) {\n\t    if (!this.m) {\n\t      lat = this.n !== 1 ? Math.asin(this.n * Math.sin(lat)) : lat;\n\t    }\n\t    else {\n\t      var k = this.n * Math.sin(lat);\n\t      for (var i = MAX_ITER$3; i; --i) {\n\t        var V = (this.m * lat + Math.sin(lat) - k) / (this.m + Math.cos(lat));\n\t        lat -= V;\n\t        if (Math.abs(V) < EPSLN) {\n\t          break;\n\t        }\n\t      }\n\t    }\n\t    x = this.a * this.C_x * lon * (this.m + Math.cos(lat));\n\t    y = this.a * this.C_y * lat;\n\n\t  }\n\t  else {\n\n\t    var s = Math.sin(lat);\n\t    var c = Math.cos(lat);\n\t    y = this.a * pj_mlfn(lat, s, c, this.en);\n\t    x = this.a * lon * c / Math.sqrt(1 - this.es * s * s);\n\t  }\n\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\tfunction inverse$20(p) {\n\t  var lat, temp, lon, s;\n\n\t  p.x -= this.x0;\n\t  lon = p.x / this.a;\n\t  p.y -= this.y0;\n\t  lat = p.y / this.a;\n\n\t  if (this.sphere) {\n\t    lat /= this.C_y;\n\t    lon = lon / (this.C_x * (this.m + Math.cos(lat)));\n\t    if (this.m) {\n\t      lat = asinz((this.m * lat + Math.sin(lat)) / this.n);\n\t    }\n\t    else if (this.n !== 1) {\n\t      lat = asinz(Math.sin(lat) / this.n);\n\t    }\n\t    lon = adjust_lon(lon + this.long0);\n\t    lat = adjust_lat(lat);\n\t  }\n\t  else {\n\t    lat = pj_inv_mlfn(p.y / this.a, this.es, this.en);\n\t    s = Math.abs(lat);\n\t    if (s < HALF_PI) {\n\t      s = Math.sin(lat);\n\t      temp = this.long0 + p.x * Math.sqrt(1 - this.es * s * s) / (this.a * Math.cos(lat));\n\t      //temp = this.long0 + p.x / (this.a * Math.cos(lat));\n\t      lon = adjust_lon(temp);\n\t    }\n\t    else if ((s - EPSLN) < HALF_PI) {\n\t      lon = this.long0;\n\t    }\n\t  }\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$22 = [\"Sinusoidal\", \"sinu\"];\n\tvar sinu = {\n\t  init: init$21,\n\t  forward: forward$20,\n\t  inverse: inverse$20,\n\t  names: names$22\n\t};\n\n\tfunction init$22() {}\n\t/* Mollweide forward equations--mapping lat,long to x,y\n\t    ----------------------------------------------------*/\n\tfunction forward$21(p) {\n\n\t  /* Forward equations\n\t      -----------------*/\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  var delta_lon = adjust_lon(lon - this.long0);\n\t  var theta = lat;\n\t  var con = Math.PI * Math.sin(lat);\n\n\t  /* Iterate using the Newton-Raphson method to find theta\n\t      -----------------------------------------------------*/\n\t  while (true) {\n\t    var delta_theta = -(theta + Math.sin(theta) - con) / (1 + Math.cos(theta));\n\t    theta += delta_theta;\n\t    if (Math.abs(delta_theta) < EPSLN) {\n\t      break;\n\t    }\n\t  }\n\t  theta /= 2;\n\n\t  /* If the latitude is 90 deg, force the x coordinate to be \"0 + false easting\"\n\t       this is done here because of precision problems with \"cos(theta)\"\n\t       --------------------------------------------------------------------------*/\n\t  if (Math.PI / 2 - Math.abs(lat) < EPSLN) {\n\t    delta_lon = 0;\n\t  }\n\t  var x = 0.900316316158 * this.a * delta_lon * Math.cos(theta) + this.x0;\n\t  var y = 1.4142135623731 * this.a * Math.sin(theta) + this.y0;\n\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\tfunction inverse$21(p) {\n\t  var theta;\n\t  var arg;\n\n\t  /* Inverse equations\n\t      -----------------*/\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  arg = p.y / (1.4142135623731 * this.a);\n\n\t  /* Because of division by zero problems, 'arg' can not be 1.  Therefore\n\t       a number very close to one is used instead.\n\t       -------------------------------------------------------------------*/\n\t  if (Math.abs(arg) > 0.999999999999) {\n\t    arg = 0.999999999999;\n\t  }\n\t  theta = Math.asin(arg);\n\t  var lon = adjust_lon(this.long0 + (p.x / (0.900316316158 * this.a * Math.cos(theta))));\n\t  if (lon < (-Math.PI)) {\n\t    lon = -Math.PI;\n\t  }\n\t  if (lon > Math.PI) {\n\t    lon = Math.PI;\n\t  }\n\t  arg = (2 * theta + Math.sin(2 * theta)) / Math.PI;\n\t  if (Math.abs(arg) > 1) {\n\t    arg = 1;\n\t  }\n\t  var lat = Math.asin(arg);\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$23 = [\"Mollweide\", \"moll\"];\n\tvar moll = {\n\t  init: init$22,\n\t  forward: forward$21,\n\t  inverse: inverse$21,\n\t  names: names$23\n\t};\n\n\tfunction init$23() {\n\n\t  /* Place parameters in static storage for common use\n\t      -------------------------------------------------*/\n\t  // Standard Parallels cannot be equal and on opposite sides of the equator\n\t  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n\t    return;\n\t  }\n\t  this.lat2 = this.lat2 || this.lat1;\n\t  this.temp = this.b / this.a;\n\t  this.es = 1 - Math.pow(this.temp, 2);\n\t  this.e = Math.sqrt(this.es);\n\t  this.e0 = e0fn(this.es);\n\t  this.e1 = e1fn(this.es);\n\t  this.e2 = e2fn(this.es);\n\t  this.e3 = e3fn(this.es);\n\n\t  this.sinphi = Math.sin(this.lat1);\n\t  this.cosphi = Math.cos(this.lat1);\n\n\t  this.ms1 = msfnz(this.e, this.sinphi, this.cosphi);\n\t  this.ml1 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat1);\n\n\t  if (Math.abs(this.lat1 - this.lat2) < EPSLN) {\n\t    this.ns = this.sinphi;\n\t  }\n\t  else {\n\t    this.sinphi = Math.sin(this.lat2);\n\t    this.cosphi = Math.cos(this.lat2);\n\t    this.ms2 = msfnz(this.e, this.sinphi, this.cosphi);\n\t    this.ml2 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat2);\n\t    this.ns = (this.ms1 - this.ms2) / (this.ml2 - this.ml1);\n\t  }\n\t  this.g = this.ml1 + this.ms1 / this.ns;\n\t  this.ml0 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);\n\t  this.rh = this.a * (this.g - this.ml0);\n\t}\n\n\t/* Equidistant Conic forward equations--mapping lat,long to x,y\n\t  -----------------------------------------------------------*/\n\tfunction forward$22(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  var rh1;\n\n\t  /* Forward equations\n\t      -----------------*/\n\t  if (this.sphere) {\n\t    rh1 = this.a * (this.g - lat);\n\t  }\n\t  else {\n\t    var ml = mlfn(this.e0, this.e1, this.e2, this.e3, lat);\n\t    rh1 = this.a * (this.g - ml);\n\t  }\n\t  var theta = this.ns * adjust_lon(lon - this.long0);\n\t  var x = this.x0 + rh1 * Math.sin(theta);\n\t  var y = this.y0 + this.rh - rh1 * Math.cos(theta);\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\t/* Inverse equations\n\t  -----------------*/\n\tfunction inverse$22(p) {\n\t  p.x -= this.x0;\n\t  p.y = this.rh - p.y + this.y0;\n\t  var con, rh1, lat, lon;\n\t  if (this.ns >= 0) {\n\t    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);\n\t    con = 1;\n\t  }\n\t  else {\n\t    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);\n\t    con = -1;\n\t  }\n\t  var theta = 0;\n\t  if (rh1 !== 0) {\n\t    theta = Math.atan2(con * p.x, con * p.y);\n\t  }\n\n\t  if (this.sphere) {\n\t    lon = adjust_lon(this.long0 + theta / this.ns);\n\t    lat = adjust_lat(this.g - rh1 / this.a);\n\t    p.x = lon;\n\t    p.y = lat;\n\t    return p;\n\t  }\n\t  else {\n\t    var ml = this.g - rh1 / this.a;\n\t    lat = imlfn(ml, this.e0, this.e1, this.e2, this.e3);\n\t    lon = adjust_lon(this.long0 + theta / this.ns);\n\t    p.x = lon;\n\t    p.y = lat;\n\t    return p;\n\t  }\n\n\t}\n\n\tvar names$24 = [\"Equidistant_Conic\", \"eqdc\"];\n\tvar eqdc = {\n\t  init: init$23,\n\t  forward: forward$22,\n\t  inverse: inverse$22,\n\t  names: names$24\n\t};\n\n\t/* Initialize the Van Der Grinten projection\n\t  ----------------------------------------*/\n\tfunction init$24() {\n\t  //this.R = 6370997; //Radius of earth\n\t  this.R = this.a;\n\t}\n\n\tfunction forward$23(p) {\n\n\t  var lon = p.x;\n\t  var lat = p.y;\n\n\t  /* Forward equations\n\t    -----------------*/\n\t  var dlon = adjust_lon(lon - this.long0);\n\t  var x, y;\n\n\t  if (Math.abs(lat) <= EPSLN) {\n\t    x = this.x0 + this.R * dlon;\n\t    y = this.y0;\n\t  }\n\t  var theta = asinz(2 * Math.abs(lat / Math.PI));\n\t  if ((Math.abs(dlon) <= EPSLN) || (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN)) {\n\t    x = this.x0;\n\t    if (lat >= 0) {\n\t      y = this.y0 + Math.PI * this.R * Math.tan(0.5 * theta);\n\t    }\n\t    else {\n\t      y = this.y0 + Math.PI * this.R * -Math.tan(0.5 * theta);\n\t    }\n\t    //  return(OK);\n\t  }\n\t  var al = 0.5 * Math.abs((Math.PI / dlon) - (dlon / Math.PI));\n\t  var asq = al * al;\n\t  var sinth = Math.sin(theta);\n\t  var costh = Math.cos(theta);\n\n\t  var g = costh / (sinth + costh - 1);\n\t  var gsq = g * g;\n\t  var m = g * (2 / sinth - 1);\n\t  var msq = m * m;\n\t  var con = Math.PI * this.R * (al * (g - msq) + Math.sqrt(asq * (g - msq) * (g - msq) - (msq + asq) * (gsq - msq))) / (msq + asq);\n\t  if (dlon < 0) {\n\t    con = -con;\n\t  }\n\t  x = this.x0 + con;\n\t  //con = Math.abs(con / (Math.PI * this.R));\n\t  var q = asq + g;\n\t  con = Math.PI * this.R * (m * q - al * Math.sqrt((msq + asq) * (asq + 1) - q * q)) / (msq + asq);\n\t  if (lat >= 0) {\n\t    //y = this.y0 + Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);\n\t    y = this.y0 + con;\n\t  }\n\t  else {\n\t    //y = this.y0 - Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);\n\t    y = this.y0 - con;\n\t  }\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\t/* Van Der Grinten inverse equations--mapping x,y to lat/long\n\t  ---------------------------------------------------------*/\n\tfunction inverse$23(p) {\n\t  var lon, lat;\n\t  var xx, yy, xys, c1, c2, c3;\n\t  var a1;\n\t  var m1;\n\t  var con;\n\t  var th1;\n\t  var d;\n\n\t  /* inverse equations\n\t    -----------------*/\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  con = Math.PI * this.R;\n\t  xx = p.x / con;\n\t  yy = p.y / con;\n\t  xys = xx * xx + yy * yy;\n\t  c1 = -Math.abs(yy) * (1 + xys);\n\t  c2 = c1 - 2 * yy * yy + xx * xx;\n\t  c3 = -2 * c1 + 1 + 2 * yy * yy + xys * xys;\n\t  d = yy * yy / c3 + (2 * c2 * c2 * c2 / c3 / c3 / c3 - 9 * c1 * c2 / c3 / c3) / 27;\n\t  a1 = (c1 - c2 * c2 / 3 / c3) / c3;\n\t  m1 = 2 * Math.sqrt(-a1 / 3);\n\t  con = ((3 * d) / a1) / m1;\n\t  if (Math.abs(con) > 1) {\n\t    if (con >= 0) {\n\t      con = 1;\n\t    }\n\t    else {\n\t      con = -1;\n\t    }\n\t  }\n\t  th1 = Math.acos(con) / 3;\n\t  if (p.y >= 0) {\n\t    lat = (-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;\n\t  }\n\t  else {\n\t    lat = -(-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;\n\t  }\n\n\t  if (Math.abs(xx) < EPSLN) {\n\t    lon = this.long0;\n\t  }\n\t  else {\n\t    lon = adjust_lon(this.long0 + Math.PI * (xys - 1 + Math.sqrt(1 + 2 * (xx * xx - yy * yy) + xys * xys)) / 2 / xx);\n\t  }\n\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$25 = [\"Van_der_Grinten_I\", \"VanDerGrinten\", \"vandg\"];\n\tvar vandg = {\n\t  init: init$24,\n\t  forward: forward$23,\n\t  inverse: inverse$23,\n\t  names: names$25\n\t};\n\n\tfunction init$25() {\n\t  this.sin_p12 = Math.sin(this.lat0);\n\t  this.cos_p12 = Math.cos(this.lat0);\n\t}\n\n\tfunction forward$24(p) {\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  var sinphi = Math.sin(p.y);\n\t  var cosphi = Math.cos(p.y);\n\t  var dlon = adjust_lon(lon - this.long0);\n\t  var e0, e1, e2, e3, Mlp, Ml, tanphi, Nl1, Nl, psi, Az, G, H, GH, Hs, c, kp, cos_c, s, s2, s3, s4, s5;\n\t  if (this.sphere) {\n\t    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n\t      //North Pole case\n\t      p.x = this.x0 + this.a * (HALF_PI - lat) * Math.sin(dlon);\n\t      p.y = this.y0 - this.a * (HALF_PI - lat) * Math.cos(dlon);\n\t      return p;\n\t    }\n\t    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n\t      //South Pole case\n\t      p.x = this.x0 + this.a * (HALF_PI + lat) * Math.sin(dlon);\n\t      p.y = this.y0 + this.a * (HALF_PI + lat) * Math.cos(dlon);\n\t      return p;\n\t    }\n\t    else {\n\t      //default case\n\t      cos_c = this.sin_p12 * sinphi + this.cos_p12 * cosphi * Math.cos(dlon);\n\t      c = Math.acos(cos_c);\n\t      kp = c / Math.sin(c);\n\t      p.x = this.x0 + this.a * kp * cosphi * Math.sin(dlon);\n\t      p.y = this.y0 + this.a * kp * (this.cos_p12 * sinphi - this.sin_p12 * cosphi * Math.cos(dlon));\n\t      return p;\n\t    }\n\t  }\n\t  else {\n\t    e0 = e0fn(this.es);\n\t    e1 = e1fn(this.es);\n\t    e2 = e2fn(this.es);\n\t    e3 = e3fn(this.es);\n\t    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n\t      //North Pole case\n\t      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n\t      Ml = this.a * mlfn(e0, e1, e2, e3, lat);\n\t      p.x = this.x0 + (Mlp - Ml) * Math.sin(dlon);\n\t      p.y = this.y0 - (Mlp - Ml) * Math.cos(dlon);\n\t      return p;\n\t    }\n\t    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n\t      //South Pole case\n\t      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n\t      Ml = this.a * mlfn(e0, e1, e2, e3, lat);\n\t      p.x = this.x0 + (Mlp + Ml) * Math.sin(dlon);\n\t      p.y = this.y0 + (Mlp + Ml) * Math.cos(dlon);\n\t      return p;\n\t    }\n\t    else {\n\t      //Default case\n\t      tanphi = sinphi / cosphi;\n\t      Nl1 = gN(this.a, this.e, this.sin_p12);\n\t      Nl = gN(this.a, this.e, sinphi);\n\t      psi = Math.atan((1 - this.es) * tanphi + this.es * Nl1 * this.sin_p12 / (Nl * cosphi));\n\t      Az = Math.atan2(Math.sin(dlon), this.cos_p12 * Math.tan(psi) - this.sin_p12 * Math.cos(dlon));\n\t      if (Az === 0) {\n\t        s = Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));\n\t      }\n\t      else if (Math.abs(Math.abs(Az) - Math.PI) <= EPSLN) {\n\t        s = -Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));\n\t      }\n\t      else {\n\t        s = Math.asin(Math.sin(dlon) * Math.cos(psi) / Math.sin(Az));\n\t      }\n\t      G = this.e * this.sin_p12 / Math.sqrt(1 - this.es);\n\t      H = this.e * this.cos_p12 * Math.cos(Az) / Math.sqrt(1 - this.es);\n\t      GH = G * H;\n\t      Hs = H * H;\n\t      s2 = s * s;\n\t      s3 = s2 * s;\n\t      s4 = s3 * s;\n\t      s5 = s4 * s;\n\t      c = Nl1 * s * (1 - s2 * Hs * (1 - Hs) / 6 + s3 / 8 * GH * (1 - 2 * Hs) + s4 / 120 * (Hs * (4 - 7 * Hs) - 3 * G * G * (1 - 7 * Hs)) - s5 / 48 * GH);\n\t      p.x = this.x0 + c * Math.sin(Az);\n\t      p.y = this.y0 + c * Math.cos(Az);\n\t      return p;\n\t    }\n\t  }\n\n\n\t}\n\n\tfunction inverse$24(p) {\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  var rh, z, sinz, cosz, lon, lat, con, e0, e1, e2, e3, Mlp, M, N1, psi, Az, cosAz, tmp, A, B, D, Ee, F;\n\t  if (this.sphere) {\n\t    rh = Math.sqrt(p.x * p.x + p.y * p.y);\n\t    if (rh > (2 * HALF_PI * this.a)) {\n\t      return;\n\t    }\n\t    z = rh / this.a;\n\n\t    sinz = Math.sin(z);\n\t    cosz = Math.cos(z);\n\n\t    lon = this.long0;\n\t    if (Math.abs(rh) <= EPSLN) {\n\t      lat = this.lat0;\n\t    }\n\t    else {\n\t      lat = asinz(cosz * this.sin_p12 + (p.y * sinz * this.cos_p12) / rh);\n\t      con = Math.abs(this.lat0) - HALF_PI;\n\t      if (Math.abs(con) <= EPSLN) {\n\t        if (this.lat0 >= 0) {\n\t          lon = adjust_lon(this.long0 + Math.atan2(p.x, - p.y));\n\t        }\n\t        else {\n\t          lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));\n\t        }\n\t      }\n\t      else {\n\t        /*con = cosz - this.sin_p12 * Math.sin(lat);\n\t        if ((Math.abs(con) < EPSLN) && (Math.abs(p.x) < EPSLN)) {\n\t          //no-op, just keep the lon value as is\n\t        } else {\n\t          var temp = Math.atan2((p.x * sinz * this.cos_p12), (con * rh));\n\t          lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz * this.cos_p12), (con * rh)));\n\t        }*/\n\t        lon = adjust_lon(this.long0 + Math.atan2(p.x * sinz, rh * this.cos_p12 * cosz - p.y * this.sin_p12 * sinz));\n\t      }\n\t    }\n\n\t    p.x = lon;\n\t    p.y = lat;\n\t    return p;\n\t  }\n\t  else {\n\t    e0 = e0fn(this.es);\n\t    e1 = e1fn(this.es);\n\t    e2 = e2fn(this.es);\n\t    e3 = e3fn(this.es);\n\t    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n\t      //North pole case\n\t      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n\t      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n\t      M = Mlp - rh;\n\t      lat = imlfn(M / this.a, e0, e1, e2, e3);\n\t      lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));\n\t      p.x = lon;\n\t      p.y = lat;\n\t      return p;\n\t    }\n\t    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n\t      //South pole case\n\t      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n\t      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n\t      M = rh - Mlp;\n\n\t      lat = imlfn(M / this.a, e0, e1, e2, e3);\n\t      lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));\n\t      p.x = lon;\n\t      p.y = lat;\n\t      return p;\n\t    }\n\t    else {\n\t      //default case\n\t      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n\t      Az = Math.atan2(p.x, p.y);\n\t      N1 = gN(this.a, this.e, this.sin_p12);\n\t      cosAz = Math.cos(Az);\n\t      tmp = this.e * this.cos_p12 * cosAz;\n\t      A = -tmp * tmp / (1 - this.es);\n\t      B = 3 * this.es * (1 - A) * this.sin_p12 * this.cos_p12 * cosAz / (1 - this.es);\n\t      D = rh / N1;\n\t      Ee = D - A * (1 + A) * Math.pow(D, 3) / 6 - B * (1 + 3 * A) * Math.pow(D, 4) / 24;\n\t      F = 1 - A * Ee * Ee / 2 - D * Ee * Ee * Ee / 6;\n\t      psi = Math.asin(this.sin_p12 * Math.cos(Ee) + this.cos_p12 * Math.sin(Ee) * cosAz);\n\t      lon = adjust_lon(this.long0 + Math.asin(Math.sin(Az) * Math.sin(Ee) / Math.cos(psi)));\n\t      lat = Math.atan((1 - this.es * F * this.sin_p12 / Math.sin(psi)) * Math.tan(psi) / (1 - this.es));\n\t      p.x = lon;\n\t      p.y = lat;\n\t      return p;\n\t    }\n\t  }\n\n\t}\n\n\tvar names$26 = [\"Azimuthal_Equidistant\", \"aeqd\"];\n\tvar aeqd = {\n\t  init: init$25,\n\t  forward: forward$24,\n\t  inverse: inverse$24,\n\t  names: names$26\n\t};\n\n\tfunction init$26() {\n\t  //double temp;      /* temporary variable    */\n\n\t  /* Place parameters in static storage for common use\n\t      -------------------------------------------------*/\n\t  this.sin_p14 = Math.sin(this.lat0);\n\t  this.cos_p14 = Math.cos(this.lat0);\n\t}\n\n\t/* Orthographic forward equations--mapping lat,long to x,y\n\t    ---------------------------------------------------*/\n\tfunction forward$25(p) {\n\t  var sinphi, cosphi; /* sin and cos value        */\n\t  var dlon; /* delta longitude value      */\n\t  var coslon; /* cos of longitude        */\n\t  var ksp; /* scale factor          */\n\t  var g, x, y;\n\t  var lon = p.x;\n\t  var lat = p.y;\n\t  /* Forward equations\n\t      -----------------*/\n\t  dlon = adjust_lon(lon - this.long0);\n\n\t  sinphi = Math.sin(lat);\n\t  cosphi = Math.cos(lat);\n\n\t  coslon = Math.cos(dlon);\n\t  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;\n\t  ksp = 1;\n\t  if ((g > 0) || (Math.abs(g) <= EPSLN)) {\n\t    x = this.a * ksp * cosphi * Math.sin(dlon);\n\t    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);\n\t  }\n\t  p.x = x;\n\t  p.y = y;\n\t  return p;\n\t}\n\n\tfunction inverse$25(p) {\n\t  var rh; /* height above ellipsoid      */\n\t  var z; /* angle          */\n\t  var sinz, cosz; /* sin of z and cos of z      */\n\t  var con;\n\t  var lon, lat;\n\t  /* Inverse equations\n\t      -----------------*/\n\t  p.x -= this.x0;\n\t  p.y -= this.y0;\n\t  rh = Math.sqrt(p.x * p.x + p.y * p.y);\n\t  z = asinz(rh / this.a);\n\n\t  sinz = Math.sin(z);\n\t  cosz = Math.cos(z);\n\n\t  lon = this.long0;\n\t  if (Math.abs(rh) <= EPSLN) {\n\t    lat = this.lat0;\n\t    p.x = lon;\n\t    p.y = lat;\n\t    return p;\n\t  }\n\t  lat = asinz(cosz * this.sin_p14 + (p.y * sinz * this.cos_p14) / rh);\n\t  con = Math.abs(this.lat0) - HALF_PI;\n\t  if (Math.abs(con) <= EPSLN) {\n\t    if (this.lat0 >= 0) {\n\t      lon = adjust_lon(this.long0 + Math.atan2(p.x, - p.y));\n\t    }\n\t    else {\n\t      lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));\n\t    }\n\t    p.x = lon;\n\t    p.y = lat;\n\t    return p;\n\t  }\n\t  lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz), rh * this.cos_p14 * cosz - p.y * this.sin_p14 * sinz));\n\t  p.x = lon;\n\t  p.y = lat;\n\t  return p;\n\t}\n\n\tvar names$27 = [\"ortho\"];\n\tvar ortho = {\n\t  init: init$26,\n\t  forward: forward$25,\n\t  inverse: inverse$25,\n\t  names: names$27\n\t};\n\n\t// QSC projection rewritten from the original PROJ4\n\t// https://github.com/OSGeo/proj.4/blob/master/src/PJ_qsc.c\n\n\t/* constants */\n\tvar FACE_ENUM = {\n\t    FRONT: 1,\n\t    RIGHT: 2,\n\t    BACK: 3,\n\t    LEFT: 4,\n\t    TOP: 5,\n\t    BOTTOM: 6\n\t};\n\n\tvar AREA_ENUM = {\n\t    AREA_0: 1,\n\t    AREA_1: 2,\n\t    AREA_2: 3,\n\t    AREA_3: 4\n\t};\n\n\tfunction init$27() {\n\n\t  this.x0 = this.x0 || 0;\n\t  this.y0 = this.y0 || 0;\n\t  this.lat0 = this.lat0 || 0;\n\t  this.long0 = this.long0 || 0;\n\t  this.lat_ts = this.lat_ts || 0;\n\t  this.title = this.title || \"Quadrilateralized Spherical Cube\";\n\n\t  /* Determine the cube face from the center of projection. */\n\t  if (this.lat0 >= HALF_PI - FORTPI / 2.0) {\n\t    this.face = FACE_ENUM.TOP;\n\t  } else if (this.lat0 <= -(HALF_PI - FORTPI / 2.0)) {\n\t    this.face = FACE_ENUM.BOTTOM;\n\t  } else if (Math.abs(this.long0) <= FORTPI) {\n\t    this.face = FACE_ENUM.FRONT;\n\t  } else if (Math.abs(this.long0) <= HALF_PI + FORTPI) {\n\t    this.face = this.long0 > 0.0 ? FACE_ENUM.RIGHT : FACE_ENUM.LEFT;\n\t  } else {\n\t    this.face = FACE_ENUM.BACK;\n\t  }\n\n\t  /* Fill in useful values for the ellipsoid <-> sphere shift\n\t   * described in [LK12]. */\n\t  if (this.es !== 0) {\n\t    this.one_minus_f = 1 - (this.a - this.b) / this.a;\n\t    this.one_minus_f_squared = this.one_minus_f * this.one_minus_f;\n\t  }\n\t}\n\n\t// QSC forward equations--mapping lat,long to x,y\n\t// -----------------------------------------------------------------\n\tfunction forward$26(p) {\n\t  var xy = {x: 0, y: 0};\n\t  var lat, lon;\n\t  var theta, phi;\n\t  var t, mu;\n\t  /* nu; */\n\t  var area = {value: 0};\n\n\t  // move lon according to projection's lon\n\t  p.x -= this.long0;\n\n\t  /* Convert the geodetic latitude to a geocentric latitude.\n\t   * This corresponds to the shift from the ellipsoid to the sphere\n\t   * described in [LK12]. */\n\t  if (this.es !== 0) {//if (P->es != 0) {\n\t    lat = Math.atan(this.one_minus_f_squared * Math.tan(p.y));\n\t  } else {\n\t    lat = p.y;\n\t  }\n\n\t  /* Convert the input lat, lon into theta, phi as used by QSC.\n\t   * This depends on the cube face and the area on it.\n\t   * For the top and bottom face, we can compute theta and phi\n\t   * directly from phi, lam. For the other faces, we must use\n\t   * unit sphere cartesian coordinates as an intermediate step. */\n\t  lon = p.x; //lon = lp.lam;\n\t  if (this.face === FACE_ENUM.TOP) {\n\t    phi = HALF_PI - lat;\n\t    if (lon >= FORTPI && lon <= HALF_PI + FORTPI) {\n\t      area.value = AREA_ENUM.AREA_0;\n\t      theta = lon - HALF_PI;\n\t    } else if (lon > HALF_PI + FORTPI || lon <= -(HALF_PI + FORTPI)) {\n\t      area.value = AREA_ENUM.AREA_1;\n\t      theta = (lon > 0.0 ? lon - SPI : lon + SPI);\n\t    } else if (lon > -(HALF_PI + FORTPI) && lon <= -FORTPI) {\n\t      area.value = AREA_ENUM.AREA_2;\n\t      theta = lon + HALF_PI;\n\t    } else {\n\t      area.value = AREA_ENUM.AREA_3;\n\t      theta = lon;\n\t    }\n\t  } else if (this.face === FACE_ENUM.BOTTOM) {\n\t    phi = HALF_PI + lat;\n\t    if (lon >= FORTPI && lon <= HALF_PI + FORTPI) {\n\t      area.value = AREA_ENUM.AREA_0;\n\t      theta = -lon + HALF_PI;\n\t    } else if (lon < FORTPI && lon >= -FORTPI) {\n\t      area.value = AREA_ENUM.AREA_1;\n\t      theta = -lon;\n\t    } else if (lon < -FORTPI && lon >= -(HALF_PI + FORTPI)) {\n\t      area.value = AREA_ENUM.AREA_2;\n\t      theta = -lon - HALF_PI;\n\t    } else {\n\t      area.value = AREA_ENUM.AREA_3;\n\t      theta = (lon > 0.0 ? -lon + SPI : -lon - SPI);\n\t    }\n\t  } else {\n\t    var q, r, s;\n\t    var sinlat, coslat;\n\t    var sinlon, coslon;\n\n\t    if (this.face === FACE_ENUM.RIGHT) {\n\t      lon = qsc_shift_lon_origin(lon, +HALF_PI);\n\t    } else if (this.face === FACE_ENUM.BACK) {\n\t      lon = qsc_shift_lon_origin(lon, +SPI);\n\t    } else if (this.face === FACE_ENUM.LEFT) {\n\t      lon = qsc_shift_lon_origin(lon, -HALF_PI);\n\t    }\n\t    sinlat = Math.sin(lat);\n\t    coslat = Math.cos(lat);\n\t    sinlon = Math.sin(lon);\n\t    coslon = Math.cos(lon);\n\t    q = coslat * coslon;\n\t    r = coslat * sinlon;\n\t    s = sinlat;\n\n\t    if (this.face === FACE_ENUM.FRONT) {\n\t      phi = Math.acos(q);\n\t      theta = qsc_fwd_equat_face_theta(phi, s, r, area);\n\t    } else if (this.face === FACE_ENUM.RIGHT) {\n\t      phi = Math.acos(r);\n\t      theta = qsc_fwd_equat_face_theta(phi, s, -q, area);\n\t    } else if (this.face === FACE_ENUM.BACK) {\n\t      phi = Math.acos(-q);\n\t      theta = qsc_fwd_equat_face_theta(phi, s, -r, area);\n\t    } else if (this.face === FACE_ENUM.LEFT) {\n\t      phi = Math.acos(-r);\n\t      theta = qsc_fwd_equat_face_theta(phi, s, q, area);\n\t    } else {\n\t      /* Impossible */\n\t      phi = theta = 0;\n\t      area.value = AREA_ENUM.AREA_0;\n\t    }\n\t  }\n\n\t  /* Compute mu and nu for the area of definition.\n\t   * For mu, see Eq. (3-21) in [OL76], but note the typos:\n\t   * compare with Eq. (3-14). For nu, see Eq. (3-38). */\n\t  mu = Math.atan((12 / SPI) * (theta + Math.acos(Math.sin(theta) * Math.cos(FORTPI)) - HALF_PI));\n\t  t = Math.sqrt((1 - Math.cos(phi)) / (Math.cos(mu) * Math.cos(mu)) / (1 - Math.cos(Math.atan(1 / Math.cos(theta)))));\n\n\t  /* Apply the result to the real area. */\n\t  if (area.value === AREA_ENUM.AREA_1) {\n\t    mu += HALF_PI;\n\t  } else if (area.value === AREA_ENUM.AREA_2) {\n\t    mu += SPI;\n\t  } else if (area.value === AREA_ENUM.AREA_3) {\n\t    mu += 1.5 * SPI;\n\t  }\n\n\t  /* Now compute x, y from mu and nu */\n\t  xy.x = t * Math.cos(mu);\n\t  xy.y = t * Math.sin(mu);\n\t  xy.x = xy.x * this.a + this.x0;\n\t  xy.y = xy.y * this.a + this.y0;\n\n\t  p.x = xy.x;\n\t  p.y = xy.y;\n\t  return p;\n\t}\n\n\t// QSC inverse equations--mapping x,y to lat/long\n\t// -----------------------------------------------------------------\n\tfunction inverse$26(p) {\n\t  var lp = {lam: 0, phi: 0};\n\t  var mu, nu, cosmu, tannu;\n\t  var tantheta, theta, cosphi, phi;\n\t  var t;\n\t  var area = {value: 0};\n\n\t  /* de-offset */\n\t  p.x = (p.x - this.x0) / this.a;\n\t  p.y = (p.y - this.y0) / this.a;\n\n\t  /* Convert the input x, y to the mu and nu angles as used by QSC.\n\t   * This depends on the area of the cube face. */\n\t  nu = Math.atan(Math.sqrt(p.x * p.x + p.y * p.y));\n\t  mu = Math.atan2(p.y, p.x);\n\t  if (p.x >= 0.0 && p.x >= Math.abs(p.y)) {\n\t    area.value = AREA_ENUM.AREA_0;\n\t  } else if (p.y >= 0.0 && p.y >= Math.abs(p.x)) {\n\t    area.value = AREA_ENUM.AREA_1;\n\t    mu -= HALF_PI;\n\t  } else if (p.x < 0.0 && -p.x >= Math.abs(p.y)) {\n\t    area.value = AREA_ENUM.AREA_2;\n\t    mu = (mu < 0.0 ? mu + SPI : mu - SPI);\n\t  } else {\n\t    area.value = AREA_ENUM.AREA_3;\n\t    mu += HALF_PI;\n\t  }\n\n\t  /* Compute phi and theta for the area of definition.\n\t   * The inverse projection is not described in the original paper, but some\n\t   * good hints can be found here (as of 2011-12-14):\n\t   * http://fits.gsfc.nasa.gov/fitsbits/saf.93/saf.9302\n\t   * (search for \"Message-Id: <9302181759.AA25477 at fits.cv.nrao.edu>\") */\n\t  t = (SPI / 12) * Math.tan(mu);\n\t  tantheta = Math.sin(t) / (Math.cos(t) - (1 / Math.sqrt(2)));\n\t  theta = Math.atan(tantheta);\n\t  cosmu = Math.cos(mu);\n\t  tannu = Math.tan(nu);\n\t  cosphi = 1 - cosmu * cosmu * tannu * tannu * (1 - Math.cos(Math.atan(1 / Math.cos(theta))));\n\t  if (cosphi < -1) {\n\t    cosphi = -1;\n\t  } else if (cosphi > +1) {\n\t    cosphi = +1;\n\t  }\n\n\t  /* Apply the result to the real area on the cube face.\n\t   * For the top and bottom face, we can compute phi and lam directly.\n\t   * For the other faces, we must use unit sphere cartesian coordinates\n\t   * as an intermediate step. */\n\t  if (this.face === FACE_ENUM.TOP) {\n\t    phi = Math.acos(cosphi);\n\t    lp.phi = HALF_PI - phi;\n\t    if (area.value === AREA_ENUM.AREA_0) {\n\t      lp.lam = theta + HALF_PI;\n\t    } else if (area.value === AREA_ENUM.AREA_1) {\n\t      lp.lam = (theta < 0.0 ? theta + SPI : theta - SPI);\n\t    } else if (area.value === AREA_ENUM.AREA_2) {\n\t      lp.lam = theta - HALF_PI;\n\t    } else /* area.value == AREA_ENUM.AREA_3 */ {\n\t      lp.lam = theta;\n\t    }\n\t  } else if (this.face === FACE_ENUM.BOTTOM) {\n\t    phi = Math.acos(cosphi);\n\t    lp.phi = phi - HALF_PI;\n\t    if (area.value === AREA_ENUM.AREA_0) {\n\t      lp.lam = -theta + HALF_PI;\n\t    } else if (area.value === AREA_ENUM.AREA_1) {\n\t      lp.lam = -theta;\n\t    } else if (area.value === AREA_ENUM.AREA_2) {\n\t      lp.lam = -theta - HALF_PI;\n\t    } else /* area.value == AREA_ENUM.AREA_3 */ {\n\t      lp.lam = (theta < 0.0 ? -theta - SPI : -theta + SPI);\n\t    }\n\t  } else {\n\t    /* Compute phi and lam via cartesian unit sphere coordinates. */\n\t    var q, r, s;\n\t    q = cosphi;\n\t    t = q * q;\n\t    if (t >= 1) {\n\t      s = 0;\n\t    } else {\n\t      s = Math.sqrt(1 - t) * Math.sin(theta);\n\t    }\n\t    t += s * s;\n\t    if (t >= 1) {\n\t      r = 0;\n\t    } else {\n\t      r = Math.sqrt(1 - t);\n\t    }\n\t    /* Rotate q,r,s into the correct area. */\n\t    if (area.value === AREA_ENUM.AREA_1) {\n\t      t = r;\n\t      r = -s;\n\t      s = t;\n\t    } else if (area.value === AREA_ENUM.AREA_2) {\n\t      r = -r;\n\t      s = -s;\n\t    } else if (area.value === AREA_ENUM.AREA_3) {\n\t      t = r;\n\t      r = s;\n\t      s = -t;\n\t    }\n\t    /* Rotate q,r,s into the correct cube face. */\n\t    if (this.face === FACE_ENUM.RIGHT) {\n\t      t = q;\n\t      q = -r;\n\t      r = t;\n\t    } else if (this.face === FACE_ENUM.BACK) {\n\t      q = -q;\n\t      r = -r;\n\t    } else if (this.face === FACE_ENUM.LEFT) {\n\t      t = q;\n\t      q = r;\n\t      r = -t;\n\t    }\n\t    /* Now compute phi and lam from the unit sphere coordinates. */\n\t    lp.phi = Math.acos(-s) - HALF_PI;\n\t    lp.lam = Math.atan2(r, q);\n\t    if (this.face === FACE_ENUM.RIGHT) {\n\t      lp.lam = qsc_shift_lon_origin(lp.lam, -HALF_PI);\n\t    } else if (this.face === FACE_ENUM.BACK) {\n\t      lp.lam = qsc_shift_lon_origin(lp.lam, -SPI);\n\t    } else if (this.face === FACE_ENUM.LEFT) {\n\t      lp.lam = qsc_shift_lon_origin(lp.lam, +HALF_PI);\n\t    }\n\t  }\n\n\t  /* Apply the shift from the sphere to the ellipsoid as described\n\t   * in [LK12]. */\n\t  if (this.es !== 0) {\n\t    var invert_sign;\n\t    var tanphi, xa;\n\t    invert_sign = (lp.phi < 0 ? 1 : 0);\n\t    tanphi = Math.tan(lp.phi);\n\t    xa = this.b / Math.sqrt(tanphi * tanphi + this.one_minus_f_squared);\n\t    lp.phi = Math.atan(Math.sqrt(this.a * this.a - xa * xa) / (this.one_minus_f * xa));\n\t    if (invert_sign) {\n\t      lp.phi = -lp.phi;\n\t    }\n\t  }\n\n\t  lp.lam += this.long0;\n\t  p.x = lp.lam;\n\t  p.y = lp.phi;\n\t  return p;\n\t}\n\n\t/* Helper function for forward projection: compute the theta angle\n\t * and determine the area number. */\n\tfunction qsc_fwd_equat_face_theta(phi, y, x, area) {\n\t  var theta;\n\t  if (phi < EPSLN) {\n\t    area.value = AREA_ENUM.AREA_0;\n\t    theta = 0.0;\n\t  } else {\n\t    theta = Math.atan2(y, x);\n\t    if (Math.abs(theta) <= FORTPI) {\n\t      area.value = AREA_ENUM.AREA_0;\n\t    } else if (theta > FORTPI && theta <= HALF_PI + FORTPI) {\n\t      area.value = AREA_ENUM.AREA_1;\n\t      theta -= HALF_PI;\n\t    } else if (theta > HALF_PI + FORTPI || theta <= -(HALF_PI + FORTPI)) {\n\t      area.value = AREA_ENUM.AREA_2;\n\t      theta = (theta >= 0.0 ? theta - SPI : theta + SPI);\n\t    } else {\n\t      area.value = AREA_ENUM.AREA_3;\n\t      theta += HALF_PI;\n\t    }\n\t  }\n\t  return theta;\n\t}\n\n\t/* Helper function: shift the longitude. */\n\tfunction qsc_shift_lon_origin(lon, offset) {\n\t  var slon = lon + offset;\n\t  if (slon < -SPI) {\n\t    slon += TWO_PI;\n\t  } else if (slon > +SPI) {\n\t    slon -= TWO_PI;\n\t  }\n\t  return slon;\n\t}\n\n\tvar names$28 = [\"Quadrilateralized Spherical Cube\", \"Quadrilateralized_Spherical_Cube\", \"qsc\"];\n\tvar qsc = {\n\t  init: init$27,\n\t  forward: forward$26,\n\t  inverse: inverse$26,\n\t  names: names$28\n\t};\n\n\t// Robinson projection\n\t// Based on https://github.com/OSGeo/proj.4/blob/master/src/PJ_robin.c\n\t// Polynomial coeficients from http://article.gmane.org/gmane.comp.gis.proj-4.devel/6039\n\n\tvar COEFS_X = [\n\t    [1.0000, 2.2199e-17, -7.15515e-05, 3.1103e-06],\n\t    [0.9986, -0.000482243, -2.4897e-05, -1.3309e-06],\n\t    [0.9954, -0.00083103, -4.48605e-05, -9.86701e-07],\n\t    [0.9900, -0.00135364, -5.9661e-05, 3.6777e-06],\n\t    [0.9822, -0.00167442, -4.49547e-06, -5.72411e-06],\n\t    [0.9730, -0.00214868, -9.03571e-05, 1.8736e-08],\n\t    [0.9600, -0.00305085, -9.00761e-05, 1.64917e-06],\n\t    [0.9427, -0.00382792, -6.53386e-05, -2.6154e-06],\n\t    [0.9216, -0.00467746, -0.00010457, 4.81243e-06],\n\t    [0.8962, -0.00536223, -3.23831e-05, -5.43432e-06],\n\t    [0.8679, -0.00609363, -0.000113898, 3.32484e-06],\n\t    [0.8350, -0.00698325, -6.40253e-05, 9.34959e-07],\n\t    [0.7986, -0.00755338, -5.00009e-05, 9.35324e-07],\n\t    [0.7597, -0.00798324, -3.5971e-05, -2.27626e-06],\n\t    [0.7186, -0.00851367, -7.01149e-05, -8.6303e-06],\n\t    [0.6732, -0.00986209, -0.000199569, 1.91974e-05],\n\t    [0.6213, -0.010418, 8.83923e-05, 6.24051e-06],\n\t    [0.5722, -0.00906601, 0.000182, 6.24051e-06],\n\t    [0.5322, -0.00677797, 0.000275608, 6.24051e-06]\n\t];\n\n\tvar COEFS_Y = [\n\t    [-5.20417e-18, 0.0124, 1.21431e-18, -8.45284e-11],\n\t    [0.0620, 0.0124, -1.26793e-09, 4.22642e-10],\n\t    [0.1240, 0.0124, 5.07171e-09, -1.60604e-09],\n\t    [0.1860, 0.0123999, -1.90189e-08, 6.00152e-09],\n\t    [0.2480, 0.0124002, 7.10039e-08, -2.24e-08],\n\t    [0.3100, 0.0123992, -2.64997e-07, 8.35986e-08],\n\t    [0.3720, 0.0124029, 9.88983e-07, -3.11994e-07],\n\t    [0.4340, 0.0123893, -3.69093e-06, -4.35621e-07],\n\t    [0.4958, 0.0123198, -1.02252e-05, -3.45523e-07],\n\t    [0.5571, 0.0121916, -1.54081e-05, -5.82288e-07],\n\t    [0.6176, 0.0119938, -2.41424e-05, -5.25327e-07],\n\t    [0.6769, 0.011713, -3.20223e-05, -5.16405e-07],\n\t    [0.7346, 0.0113541, -3.97684e-05, -6.09052e-07],\n\t    [0.7903, 0.0109107, -4.89042e-05, -1.04739e-06],\n\t    [0.8435, 0.0103431, -6.4615e-05, -1.40374e-09],\n\t    [0.8936, 0.00969686, -6.4636e-05, -8.547e-06],\n\t    [0.9394, 0.00840947, -0.000192841, -4.2106e-06],\n\t    [0.9761, 0.00616527, -0.000256, -4.2106e-06],\n\t    [1.0000, 0.00328947, -0.000319159, -4.2106e-06]\n\t];\n\n\tvar FXC = 0.8487;\n\tvar FYC = 1.3523;\n\tvar C1 = R2D/5; // rad to 5-degree interval\n\tvar RC1 = 1/C1;\n\tvar NODES = 18;\n\n\tvar poly3_val = function(coefs, x) {\n\t    return coefs[0] + x * (coefs[1] + x * (coefs[2] + x * coefs[3]));\n\t};\n\n\tvar poly3_der = function(coefs, x) {\n\t    return coefs[1] + x * (2 * coefs[2] + x * 3 * coefs[3]);\n\t};\n\n\tfunction newton_rapshon(f_df, start, max_err, iters) {\n\t    var x = start;\n\t    for (; iters; --iters) {\n\t        var upd = f_df(x);\n\t        x -= upd;\n\t        if (Math.abs(upd) < max_err) {\n\t            break;\n\t        }\n\t    }\n\t    return x;\n\t}\n\n\tfunction init$28() {\n\t    this.x0 = this.x0 || 0;\n\t    this.y0 = this.y0 || 0;\n\t    this.long0 = this.long0 || 0;\n\t    this.es = 0;\n\t    this.title = this.title || \"Robinson\";\n\t}\n\n\tfunction forward$27(ll) {\n\t    var lon = adjust_lon(ll.x - this.long0);\n\n\t    var dphi = Math.abs(ll.y);\n\t    var i = Math.floor(dphi * C1);\n\t    if (i < 0) {\n\t        i = 0;\n\t    } else if (i >= NODES) {\n\t        i = NODES - 1;\n\t    }\n\t    dphi = R2D * (dphi - RC1 * i);\n\t    var xy = {\n\t        x: poly3_val(COEFS_X[i], dphi) * lon,\n\t        y: poly3_val(COEFS_Y[i], dphi)\n\t    };\n\t    if (ll.y < 0) {\n\t        xy.y = -xy.y;\n\t    }\n\n\t    xy.x = xy.x * this.a * FXC + this.x0;\n\t    xy.y = xy.y * this.a * FYC + this.y0;\n\t    return xy;\n\t}\n\n\tfunction inverse$27(xy) {\n\t    var ll = {\n\t        x: (xy.x - this.x0) / (this.a * FXC),\n\t        y: Math.abs(xy.y - this.y0) / (this.a * FYC)\n\t    };\n\n\t    if (ll.y >= 1) { // pathologic case\n\t        ll.x /= COEFS_X[NODES][0];\n\t        ll.y = xy.y < 0 ? -HALF_PI : HALF_PI;\n\t    } else {\n\t        // find table interval\n\t        var i = Math.floor(ll.y * NODES);\n\t        if (i < 0) {\n\t            i = 0;\n\t        } else if (i >= NODES) {\n\t            i = NODES - 1;\n\t        }\n\t        for (;;) {\n\t            if (COEFS_Y[i][0] > ll.y) {\n\t                --i;\n\t            } else if (COEFS_Y[i+1][0] <= ll.y) {\n\t                ++i;\n\t            } else {\n\t                break;\n\t            }\n\t        }\n\t        // linear interpolation in 5 degree interval\n\t        var coefs = COEFS_Y[i];\n\t        var t = 5 * (ll.y - coefs[0]) / (COEFS_Y[i+1][0] - coefs[0]);\n\t        // find t so that poly3_val(coefs, t) = ll.y\n\t        t = newton_rapshon(function(x) {\n\t            return (poly3_val(coefs, x) - ll.y) / poly3_der(coefs, x);\n\t        }, t, EPSLN, 100);\n\n\t        ll.x /= poly3_val(COEFS_X[i], t);\n\t        ll.y = (5 * i + t) * D2R;\n\t        if (xy.y < 0) {\n\t            ll.y = -ll.y;\n\t        }\n\t    }\n\n\t    ll.x = adjust_lon(ll.x + this.long0);\n\t    return ll;\n\t}\n\n\tvar names$29 = [\"Robinson\", \"robin\"];\n\tvar robin = {\n\t  init: init$28,\n\t  forward: forward$27,\n\t  inverse: inverse$27,\n\t  names: names$29\n\t};\n\n\tvar includedProjections = function(proj4){\n\t  proj4.Proj.projections.add(tmerc);\n\t  proj4.Proj.projections.add(etmerc);\n\t  proj4.Proj.projections.add(utm);\n\t  proj4.Proj.projections.add(sterea);\n\t  proj4.Proj.projections.add(stere);\n\t  proj4.Proj.projections.add(somerc);\n\t  proj4.Proj.projections.add(omerc);\n\t  proj4.Proj.projections.add(lcc);\n\t  proj4.Proj.projections.add(krovak);\n\t  proj4.Proj.projections.add(cass);\n\t  proj4.Proj.projections.add(laea);\n\t  proj4.Proj.projections.add(aea);\n\t  proj4.Proj.projections.add(gnom);\n\t  proj4.Proj.projections.add(cea);\n\t  proj4.Proj.projections.add(eqc);\n\t  proj4.Proj.projections.add(poly);\n\t  proj4.Proj.projections.add(nzmg);\n\t  proj4.Proj.projections.add(mill);\n\t  proj4.Proj.projections.add(sinu);\n\t  proj4.Proj.projections.add(moll);\n\t  proj4.Proj.projections.add(eqdc);\n\t  proj4.Proj.projections.add(vandg);\n\t  proj4.Proj.projections.add(aeqd);\n\t  proj4.Proj.projections.add(ortho);\n\t  proj4.Proj.projections.add(qsc);\n\t  proj4.Proj.projections.add(robin);\n\t};\n\n\tproj4$1.defaultDatum = 'WGS84'; //default datum\n\tproj4$1.Proj = Projection;\n\tproj4$1.WGS84 = new proj4$1.Proj('WGS84');\n\tproj4$1.Point = Point;\n\tproj4$1.toPoint = toPoint;\n\tproj4$1.defs = defs;\n\tproj4$1.transform = transform;\n\tproj4$1.mgrs = mgrs;\n\tproj4$1.version = version;\n\tincludedProjections(proj4$1);\n\n\treturn proj4$1;\n\n})));\n","/**\n * @module ol/source/BingMaps\n */\n\nimport {createFromTileUrlFunctions} from '../tileurlfunction.js';\nimport {applyTransform, intersects} from '../extent.js';\nimport {jsonp as requestJSONP} from '../net.js';\nimport {get as getProjection, getTransformFromProjections} from '../proj.js';\nimport SourceState from './State.js';\nimport TileImage from './TileImage.js';\nimport {createOrUpdate, quadKey} from '../tilecoord.js';\nimport {createXYZ, extentFromProjection} from '../tilegrid.js';\n\n\n/**\n * The attribution containing a link to the Microsoft Bing Maps Platform APIs\n * Terms Of Use.\n * @const\n * @type {string}\n */\nconst TOS_ATTRIBUTION = '<a class=\"ol-attribution-bing-tos\" ' +\n      'href=\"https://www.microsoft.com/maps/product/terms.html\">' +\n      'Terms of Use</a>';\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [cacheSize=2048] Cache size.\n * @property {boolean} [hidpi=false] If `true` hidpi tiles will be requested.\n * @property {string} [culture='en-us'] Culture code.\n * @property {string} key Bing Maps API key. Get yours at http://www.bingmapsportal.com/.\n * @property {string} imagerySet Type of imagery.\n * @property {number} [maxZoom=21] Max zoom. Default is what's advertized by the BingMaps service.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction] Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n * @property {number} [transition] Duration of the opacity transition for rendering.\n * To disable the opacity transition, pass `transition: 0`.\n */\n\n\n/**\n * @typedef {Object} BingMapsImageryMetadataResponse\n * @property {number} statusCode The response status code\n * @property {string} statusDescription The response status description\n * @property {string} authenticationResultCode The authentication result code\n * @property {Array<ResourceSet>} resourceSets The array of resource sets\n */\n\n\n/**\n * @typedef {Object} ResourceSet\n * @property {Array<Resource>} resources\n */\n\n\n/**\n * @typedef {Object} Resource\n * @property {number} imageHeight The image height\n * @property {number} imageWidth The image width\n * @property {number} zoomMin The minimum zoom level\n * @property {number} zoomMax The maximum zoom level\n * @property {string} imageUrl The image URL\n * @property {Array<string>} imageUrlSubdomains The image URL subdomains for rotation\n * @property {Array<ImageryProvider>} [imageryProviders] The array of ImageryProviders\n */\n\n\n/**\n * @typedef {Object} ImageryProvider\n * @property {Array<CoverageArea>} coverageAreas The coverage areas\n * @property {string} [attribution] The attribution\n */\n\n\n/**\n * @typedef {Object} CoverageArea\n * @property {number} zoomMin The minimum zoom\n * @property {number} zoomMax The maximum zoom\n * @property {Array<number>} bbox The coverage bounding box\n */\n\n\n/**\n * @classdesc\n * Layer source for Bing Maps tile data.\n * @api\n */\nclass BingMaps extends TileImage {\n  /**\n   * @param {Options} options Bing Maps options.\n   */\n  constructor(options) {\n\n    const hidpi = options.hidpi !== undefined ? options.hidpi : false;\n\n    super({\n      cacheSize: options.cacheSize,\n      crossOrigin: 'anonymous',\n      opaque: true,\n      projection: getProjection('EPSG:3857'),\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      state: SourceState.LOADING,\n      tileLoadFunction: options.tileLoadFunction,\n      tilePixelRatio: hidpi ? 2 : 1,\n      wrapX: options.wrapX !== undefined ? options.wrapX : true,\n      transition: options.transition\n    });\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.hidpi_ = hidpi;\n\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.culture_ = options.culture !== undefined ? options.culture : 'en-us';\n\n    /**\n     * @private\n     * @type {number}\n     */\n    this.maxZoom_ = options.maxZoom !== undefined ? options.maxZoom : -1;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.apiKey_ = options.key;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.imagerySet_ = options.imagerySet;\n\n    const url = 'https://dev.virtualearth.net/REST/v1/Imagery/Metadata/' +\n        this.imagerySet_ +\n        '?uriScheme=https&include=ImageryProviders&key=' + this.apiKey_ +\n        '&c=' + this.culture_;\n\n    requestJSONP(url, this.handleImageryMetadataResponse.bind(this), undefined,\n      'jsonp');\n\n  }\n\n  /**\n   * Get the api key used for this source.\n   *\n   * @return {string} The api key.\n   * @api\n   */\n  getApiKey() {\n    return this.apiKey_;\n  }\n\n  /**\n   * Get the imagery set associated with this source.\n   *\n   * @return {string} The imagery set.\n   * @api\n   */\n  getImagerySet() {\n    return this.imagerySet_;\n  }\n\n  /**\n   * @param {BingMapsImageryMetadataResponse} response Response.\n   */\n  handleImageryMetadataResponse(response) {\n    if (response.statusCode != 200 ||\n        response.statusDescription != 'OK' ||\n        response.authenticationResultCode != 'ValidCredentials' ||\n        response.resourceSets.length != 1 ||\n        response.resourceSets[0].resources.length != 1) {\n      this.setState(SourceState.ERROR);\n      return;\n    }\n\n    const resource = response.resourceSets[0].resources[0];\n    const maxZoom = this.maxZoom_ == -1 ? resource.zoomMax : this.maxZoom_;\n\n    const sourceProjection = this.getProjection();\n    const extent = extentFromProjection(sourceProjection);\n    const scale = this.hidpi_ ? 2 : 1;\n    const tileSize = resource.imageWidth == resource.imageHeight ?\n      resource.imageWidth / scale :\n      [resource.imageWidth / scale, resource.imageHeight / scale];\n\n    const tileGrid = createXYZ({\n      extent: extent,\n      minZoom: resource.zoomMin,\n      maxZoom: maxZoom,\n      tileSize: tileSize\n    });\n    this.tileGrid = tileGrid;\n\n    const culture = this.culture_;\n    const hidpi = this.hidpi_;\n    this.tileUrlFunction = createFromTileUrlFunctions(\n      resource.imageUrlSubdomains.map(function(subdomain) {\n        const quadKeyTileCoord = [0, 0, 0];\n        const imageUrl = resource.imageUrl\n          .replace('{subdomain}', subdomain)\n          .replace('{culture}', culture);\n        return (\n          /**\n           * @param {import(\"../tilecoord.js\").TileCoord} tileCoord Tile coordinate.\n           * @param {number} pixelRatio Pixel ratio.\n           * @param {import(\"../proj/Projection.js\").default} projection Projection.\n           * @return {string|undefined} Tile URL.\n           */\n          function(tileCoord, pixelRatio, projection) {\n            if (!tileCoord) {\n              return undefined;\n            } else {\n              createOrUpdate(tileCoord[0], tileCoord[1], -tileCoord[2] - 1, quadKeyTileCoord);\n              let url = imageUrl;\n              if (hidpi) {\n                url += '&dpi=d1&device=mobile';\n              }\n              return url.replace('{quadkey}', quadKey(quadKeyTileCoord));\n            }\n          }\n        );\n      }));\n\n    if (resource.imageryProviders) {\n      const transform = getTransformFromProjections(\n        getProjection('EPSG:4326'), this.getProjection());\n\n      this.setAttributions(function(frameState) {\n        const attributions = [];\n        const viewState = frameState.viewState;\n        const tileGrid = this.getTileGrid();\n        const tileCoord = tileGrid.getTileCoordForCoordAndResolution(viewState.center, viewState.resolution);\n        const zoom = tileCoord[0];\n        resource.imageryProviders.map(function(imageryProvider) {\n          let intersecting = false;\n          const coverageAreas = imageryProvider.coverageAreas;\n          for (let i = 0, ii = coverageAreas.length; i < ii; ++i) {\n            const coverageArea = coverageAreas[i];\n            if (zoom >= coverageArea.zoomMin && zoom <= coverageArea.zoomMax) {\n              const bbox = coverageArea.bbox;\n              const epsg4326Extent = [bbox[1], bbox[0], bbox[3], bbox[2]];\n              const extent = applyTransform(epsg4326Extent, transform);\n              if (intersects(extent, frameState.extent)) {\n                intersecting = true;\n                break;\n              }\n            }\n          }\n          if (intersecting) {\n            attributions.push(imageryProvider.attribution);\n          }\n        });\n\n        attributions.push(TOS_ATTRIBUTION);\n        return attributions;\n      }.bind(this));\n    }\n\n    this.setState(SourceState.READY);\n  }\n}\n\nexport default BingMaps;\n","/**\n * @module ol/proj/proj4\n */\nimport {addCoordinateTransforms, addProjection, addEquivalentProjections, get} from '../proj.js';\nimport {get as getTransform} from './transforms.js';\nimport Projection from './Projection.js';\n\n/**\n * Make projections defined in proj4 (with `proj4.defs()`) available in\n * OpenLayers.\n *\n * This function should be called whenever changes are made to the proj4\n * registry, e.g. after calling `proj4.defs()`. Existing transforms will not be\n * modified by this function.\n *\n * @param {?} proj4 Proj4.\n * @api\n */\nexport function register(proj4) {\n  const projCodes = Object.keys(proj4.defs);\n  const len = projCodes.length;\n  let i, j;\n  for (i = 0; i < len; ++i) {\n    const code = projCodes[i];\n    if (!get(code)) {\n      const def = proj4.defs(code);\n      addProjection(new Projection({\n        code: code,\n        axisOrientation: def.axis,\n        metersPerUnit: def.to_meter,\n        units: def.units\n      }));\n    }\n  }\n  for (i = 0; i < len; ++i) {\n    const code1 = projCodes[i];\n    const proj1 = get(code1);\n    for (j = 0; j < len; ++j) {\n      const code2 = projCodes[j];\n      const proj2 = get(code2);\n      if (!getTransform(code1, code2)) {\n        if (proj4.defs[code1] === proj4.defs[code2]) {\n          addEquivalentProjections([proj1, proj2]);\n        } else {\n          const transform = proj4(code1, code2);\n          addCoordinateTransforms(proj1, proj2, transform.forward, transform.inverse);\n        }\n      }\n    }\n  }\n}\n","/**\n * @module ol/source/Stamen\n */\n\nimport {ATTRIBUTION as OSM_ATTRIBUTION} from './OSM.js';\nimport XYZ from './XYZ.js';\n\n\n/**\n * @const\n * @type {Array<string>}\n */\nconst ATTRIBUTIONS = [\n  'Map tiles by <a href=\"https://stamen.com/\">Stamen Design</a>, ' +\n        'under <a href=\"https://creativecommons.org/licenses/by/3.0/\">CC BY' +\n        ' 3.0</a>.',\n  OSM_ATTRIBUTION\n];\n\n\n/**\n * @type {Object<string, {extension: string, opaque: boolean}>}\n */\nconst LayerConfig = {\n  'terrain': {\n    extension: 'jpg',\n    opaque: true\n  },\n  'terrain-background': {\n    extension: 'jpg',\n    opaque: true\n  },\n  'terrain-labels': {\n    extension: 'png',\n    opaque: false\n  },\n  'terrain-lines': {\n    extension: 'png',\n    opaque: false\n  },\n  'toner-background': {\n    extension: 'png',\n    opaque: true\n  },\n  'toner': {\n    extension: 'png',\n    opaque: true\n  },\n  'toner-hybrid': {\n    extension: 'png',\n    opaque: false\n  },\n  'toner-labels': {\n    extension: 'png',\n    opaque: false\n  },\n  'toner-lines': {\n    extension: 'png',\n    opaque: false\n  },\n  'toner-lite': {\n    extension: 'png',\n    opaque: true\n  },\n  'watercolor': {\n    extension: 'jpg',\n    opaque: true\n  }\n};\n\n\n/**\n * @type {Object<string, {minZoom: number, maxZoom: number}>}\n */\nconst ProviderConfig = {\n  'terrain': {\n    minZoom: 4,\n    maxZoom: 18\n  },\n  'toner': {\n    minZoom: 0,\n    maxZoom: 20\n  },\n  'watercolor': {\n    minZoom: 1,\n    maxZoom: 16\n  }\n};\n\n\n/**\n * @typedef {Object} Options\n * @property {number} [cacheSize=2048] Cache size.\n * @property {string} layer Layer name.\n * @property {number} [minZoom] Minimum zoom.\n * @property {number} [maxZoom] Maximum zoom.\n * @property {number} [reprojectionErrorThreshold=0.5] Maximum allowed reprojection error (in pixels).\n * Higher values can increase reprojection performance, but decrease precision.\n * @property {import(\"../Tile.js\").LoadFunction} [tileLoadFunction]\n * Optional function to load a tile given a URL. The default is\n * ```js\n * function(imageTile, src) {\n *   imageTile.getImage().src = src;\n * };\n * ```\n * @property {string} [url] URL template. Must include `{x}`, `{y}` or `{-y}`, and `{z}` placeholders.\n * @property {boolean} [wrapX=true] Whether to wrap the world horizontally.\n */\n\n\n/**\n * @classdesc\n * Layer source for the Stamen tile server.\n * @api\n */\nclass Stamen extends XYZ {\n  /**\n   * @param {Options} options Stamen options.\n   */\n  constructor(options) {\n    const i = options.layer.indexOf('-');\n    const provider = i == -1 ? options.layer : options.layer.slice(0, i);\n    const providerConfig = ProviderConfig[provider];\n\n    const layerConfig = LayerConfig[options.layer];\n\n    const url = options.url !== undefined ? options.url :\n      'https://stamen-tiles-{a-d}.a.ssl.fastly.net/' + options.layer +\n        '/{z}/{x}/{y}.' + layerConfig.extension;\n\n    super({\n      attributions: ATTRIBUTIONS,\n      cacheSize: options.cacheSize,\n      crossOrigin: 'anonymous',\n      maxZoom: options.maxZoom != undefined ? options.maxZoom : providerConfig.maxZoom,\n      minZoom: options.minZoom != undefined ? options.minZoom : providerConfig.minZoom,\n      opaque: layerConfig.opaque,\n      reprojectionErrorThreshold: options.reprojectionErrorThreshold,\n      tileLoadFunction: options.tileLoadFunction,\n      url: url,\n      wrapX: options.wrapX\n    });\n\n  }\n\n}\n\nexport default Stamen;\n","/**\n * @module ol/format/GPX\n */\nimport Feature from '../Feature.js';\nimport {includes} from '../array.js';\nimport {transformWithOptions} from './Feature.js';\nimport XMLFeature from './XMLFeature.js';\nimport {readString, readDecimal, readNonNegativeInteger, readDateTime, writeStringTextNode, writeNonNegativeIntegerTextNode, writeDecimalTextNode, writeDateTimeTextNode} from './xsd.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport Point from '../geom/Point.js';\nimport {get as getProjection} from '../proj.js';\nimport {createElementNS, makeArrayPusher, makeArraySerializer, makeChildAppender,\n  makeObjectPropertySetter, makeSequence, makeSimpleNodeFactory, makeStructureNS,\n  OBJECT_PROPERTY_NODE_FACTORY, parseNode, pushParseAndPop, pushSerializeAndPop,\n  XML_SCHEMA_INSTANCE_URI} from '../xml.js';\n\n\n/**\n * @const\n * @type {Array<null|string>}\n */\nconst NAMESPACE_URIS = [\n  null,\n  'http://www.topografix.com/GPX/1/0',\n  'http://www.topografix.com/GPX/1/1'\n];\n\n\n/**\n * @const\n * @type {string}\n */\nconst SCHEMA_LOCATION = 'http://www.topografix.com/GPX/1/1 ' +\n    'http://www.topografix.com/GPX/1/1/gpx.xsd';\n\n\n/**\n * @const\n * @type {Object<string, function(Node, Array<*>): (Feature|undefined)>}\n */\nconst FEATURE_READER = {\n  'rte': readRte,\n  'trk': readTrk,\n  'wpt': readWpt\n};\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst GPX_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'rte': makeArrayPusher(readRte),\n    'trk': makeArrayPusher(readTrk),\n    'wpt': makeArrayPusher(readWpt)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst LINK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'text': makeObjectPropertySetter(readString, 'linkText'),\n    'type': makeObjectPropertySetter(readString, 'linkType')\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst GPX_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'rte': makeChildAppender(writeRte),\n    'trk': makeChildAppender(writeTrk),\n    'wpt': makeChildAppender(writeWpt)\n  });\n\n\n/**\n * @typedef {Object} Options\n * @property {function(Feature, Node)} [readExtensions] Callback function\n * to process `extensions` nodes. To prevent memory leaks, this callback function must\n * not store any references to the node. Note that the `extensions`\n * node is not allowed in GPX 1.0. Moreover, only `extensions`\n * nodes from `wpt`, `rte` and `trk` can be processed, as those are\n * directly mapped to a feature.\n */\n\n/**\n * @typedef {Object} LayoutOptions\n * @property {boolean} [hasZ]\n * @property {boolean} [hasM]\n */\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the GPX format.\n *\n * Note that {@link module:ol/format/GPX~GPX#readFeature} only reads the first\n * feature of the source.\n *\n * When reading, routes (`<rte>`) are converted into LineString geometries, and\n * tracks (`<trk>`) into MultiLineString. Any properties on route and track\n * waypoints are ignored.\n *\n * When writing, LineString geometries are output as routes (`<rte>`), and\n * MultiLineString as tracks (`<trk>`).\n *\n * @api\n */\nclass GPX extends XMLFeature {\n\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    super();\n\n    const options = opt_options ? opt_options : {};\n\n\n    /**\n     * @inheritDoc\n     */\n    this.dataProjection = getProjection('EPSG:4326');\n\n    /**\n     * @type {function(Feature, Node)|undefined}\n     * @private\n     */\n    this.readExtensions_ = options.readExtensions;\n  }\n\n  /**\n   * @param {Array<Feature>} features List of features.\n   * @private\n   */\n  handleReadExtensions_(features) {\n    if (!features) {\n      features = [];\n    }\n    for (let i = 0, ii = features.length; i < ii; ++i) {\n      const feature = features[i];\n      if (this.readExtensions_) {\n        const extensionsNode = feature.get('extensionsNode_') || null;\n        this.readExtensions_(feature, extensionsNode);\n      }\n      feature.set('extensionsNode_', undefined);\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeatureFromNode(node, opt_options) {\n    if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n      return null;\n    }\n    const featureReader = FEATURE_READER[node.localName];\n    if (!featureReader) {\n      return null;\n    }\n    const feature = featureReader(node, [this.getReadOptions(node, opt_options)]);\n    if (!feature) {\n      return null;\n    }\n    this.handleReadExtensions_([feature]);\n    return feature;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeaturesFromNode(node, opt_options) {\n    if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n      return [];\n    }\n    if (node.localName == 'gpx') {\n      /** @type {Array<Feature>} */\n      const features = pushParseAndPop([], GPX_PARSERS,\n        node, [this.getReadOptions(node, opt_options)]);\n      if (features) {\n        this.handleReadExtensions_(features);\n        return features;\n      } else {\n        return [];\n      }\n    }\n    return [];\n  }\n\n  /**\n   * Encode an array of features in the GPX format as an XML node.\n   * LineString geometries are output as routes (`<rte>`), and MultiLineString\n   * as tracks (`<trk>`).\n   *\n   * @param {Array<Feature>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Options.\n   * @return {Node} Node.\n   * @override\n   * @api\n   */\n  writeFeaturesNode(features, opt_options) {\n    opt_options = this.adaptOptions(opt_options);\n    //FIXME Serialize metadata\n    const gpx = createElementNS('http://www.topografix.com/GPX/1/1', 'gpx');\n    const xmlnsUri = 'http://www.w3.org/2000/xmlns/';\n    gpx.setAttributeNS(xmlnsUri, 'xmlns:xsi', XML_SCHEMA_INSTANCE_URI);\n    gpx.setAttributeNS(XML_SCHEMA_INSTANCE_URI, 'xsi:schemaLocation', SCHEMA_LOCATION);\n    gpx.setAttribute('version', '1.1');\n    gpx.setAttribute('creator', 'OpenLayers');\n\n    pushSerializeAndPop(/** @type {import(\"../xml.js\").NodeStackItem} */\n      ({node: gpx}), GPX_SERIALIZERS, GPX_NODE_FACTORY, features, [opt_options]);\n    return gpx;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst RTE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'name': makeObjectPropertySetter(readString),\n    'cmt': makeObjectPropertySetter(readString),\n    'desc': makeObjectPropertySetter(readString),\n    'src': makeObjectPropertySetter(readString),\n    'link': parseLink,\n    'number': makeObjectPropertySetter(readNonNegativeInteger),\n    'extensions': parseExtensions,\n    'type': makeObjectPropertySetter(readString),\n    'rtept': parseRtePt\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst RTEPT_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ele': makeObjectPropertySetter(readDecimal),\n    'time': makeObjectPropertySetter(readDateTime)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst TRK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'name': makeObjectPropertySetter(readString),\n    'cmt': makeObjectPropertySetter(readString),\n    'desc': makeObjectPropertySetter(readString),\n    'src': makeObjectPropertySetter(readString),\n    'link': parseLink,\n    'number': makeObjectPropertySetter(readNonNegativeInteger),\n    'type': makeObjectPropertySetter(readString),\n    'extensions': parseExtensions,\n    'trkseg': parseTrkSeg\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst TRKSEG_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'trkpt': parseTrkPt\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst TRKPT_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ele': makeObjectPropertySetter(readDecimal),\n    'time': makeObjectPropertySetter(readDateTime)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst WPT_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ele': makeObjectPropertySetter(readDecimal),\n    'time': makeObjectPropertySetter(readDateTime),\n    'magvar': makeObjectPropertySetter(readDecimal),\n    'geoidheight': makeObjectPropertySetter(readDecimal),\n    'name': makeObjectPropertySetter(readString),\n    'cmt': makeObjectPropertySetter(readString),\n    'desc': makeObjectPropertySetter(readString),\n    'src': makeObjectPropertySetter(readString),\n    'link': parseLink,\n    'sym': makeObjectPropertySetter(readString),\n    'type': makeObjectPropertySetter(readString),\n    'fix': makeObjectPropertySetter(readString),\n    'sat': makeObjectPropertySetter(readNonNegativeInteger),\n    'hdop': makeObjectPropertySetter(readDecimal),\n    'vdop': makeObjectPropertySetter(readDecimal),\n    'pdop': makeObjectPropertySetter(readDecimal),\n    'ageofdgpsdata': makeObjectPropertySetter(readDecimal),\n    'dgpsid': makeObjectPropertySetter(readNonNegativeInteger),\n    'extensions': parseExtensions\n  });\n\n\n/**\n * @const\n * @type {Array<string>}\n */\nconst LINK_SEQUENCE = ['text', 'type'];\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst LINK_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'text': makeChildAppender(writeStringTextNode),\n    'type': makeChildAppender(writeStringTextNode)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst RTE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'name', 'cmt', 'desc', 'src', 'link', 'number', 'type', 'rtept'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst RTE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'name': makeChildAppender(writeStringTextNode),\n    'cmt': makeChildAppender(writeStringTextNode),\n    'desc': makeChildAppender(writeStringTextNode),\n    'src': makeChildAppender(writeStringTextNode),\n    'link': makeChildAppender(writeLink),\n    'number': makeChildAppender(writeNonNegativeIntegerTextNode),\n    'type': makeChildAppender(writeStringTextNode),\n    'rtept': makeArraySerializer(makeChildAppender(writeWptType))\n  });\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst RTEPT_TYPE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'ele', 'time'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst TRK_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'name', 'cmt', 'desc', 'src', 'link', 'number', 'type', 'trkseg'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst TRK_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'name': makeChildAppender(writeStringTextNode),\n    'cmt': makeChildAppender(writeStringTextNode),\n    'desc': makeChildAppender(writeStringTextNode),\n    'src': makeChildAppender(writeStringTextNode),\n    'link': makeChildAppender(writeLink),\n    'number': makeChildAppender(writeNonNegativeIntegerTextNode),\n    'type': makeChildAppender(writeStringTextNode),\n    'trkseg': makeArraySerializer(makeChildAppender(writeTrkSeg))\n  });\n\n\n/**\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst TRKSEG_NODE_FACTORY = makeSimpleNodeFactory('trkpt');\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst TRKSEG_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'trkpt': makeChildAppender(writeWptType)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst WPT_TYPE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'ele', 'time', 'magvar', 'geoidheight', 'name', 'cmt', 'desc', 'src',\n    'link', 'sym', 'type', 'fix', 'sat', 'hdop', 'vdop', 'pdop',\n    'ageofdgpsdata', 'dgpsid'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst WPT_TYPE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ele': makeChildAppender(writeDecimalTextNode),\n    'time': makeChildAppender(writeDateTimeTextNode),\n    'magvar': makeChildAppender(writeDecimalTextNode),\n    'geoidheight': makeChildAppender(writeDecimalTextNode),\n    'name': makeChildAppender(writeStringTextNode),\n    'cmt': makeChildAppender(writeStringTextNode),\n    'desc': makeChildAppender(writeStringTextNode),\n    'src': makeChildAppender(writeStringTextNode),\n    'link': makeChildAppender(writeLink),\n    'sym': makeChildAppender(writeStringTextNode),\n    'type': makeChildAppender(writeStringTextNode),\n    'fix': makeChildAppender(writeStringTextNode),\n    'sat': makeChildAppender(writeNonNegativeIntegerTextNode),\n    'hdop': makeChildAppender(writeDecimalTextNode),\n    'vdop': makeChildAppender(writeDecimalTextNode),\n    'pdop': makeChildAppender(writeDecimalTextNode),\n    'ageofdgpsdata': makeChildAppender(writeDecimalTextNode),\n    'dgpsid': makeChildAppender(writeNonNegativeIntegerTextNode)\n  });\n\n\n/**\n * @const\n * @type {Object<string, string>}\n */\nconst GEOMETRY_TYPE_TO_NODENAME = {\n  'Point': 'wpt',\n  'LineString': 'rte',\n  'MultiLineString': 'trk'\n};\n\n\n/**\n * @param {*} value Value.\n * @param {Array<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n */\nfunction GPX_NODE_FACTORY(value, objectStack, opt_nodeName) {\n  const geometry = /** @type {Feature} */ (value).getGeometry();\n  if (geometry) {\n    const nodeName = GEOMETRY_TYPE_TO_NODENAME[geometry.getType()];\n    if (nodeName) {\n      const parentNode = objectStack[objectStack.length - 1].node;\n      return createElementNS(parentNode.namespaceURI, nodeName);\n    }\n  }\n}\n\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {LayoutOptions} layoutOptions Layout options.\n * @param {Element} node Node.\n * @param {!Object} values Values.\n * @return {Array<number>} Flat coordinates.\n */\nfunction appendCoordinate(flatCoordinates, layoutOptions, node, values) {\n  flatCoordinates.push(\n    parseFloat(node.getAttribute('lon')),\n    parseFloat(node.getAttribute('lat')));\n  if ('ele' in values) {\n    flatCoordinates.push(/** @type {number} */ (values['ele']));\n    delete values['ele'];\n    layoutOptions.hasZ = true;\n  } else {\n    flatCoordinates.push(0);\n  }\n  if ('time' in values) {\n    flatCoordinates.push(/** @type {number} */ (values['time']));\n    delete values['time'];\n    layoutOptions.hasM = true;\n  } else {\n    flatCoordinates.push(0);\n  }\n  return flatCoordinates;\n}\n\n\n/**\n * Choose GeometryLayout based on flags in layoutOptions and adjust flatCoordinates\n * and ends arrays by shrinking them accordingly (removing unused zero entries).\n *\n * @param {LayoutOptions} layoutOptions Layout options.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {Array<number>=} ends Ends.\n * @return {GeometryLayout} Layout.\n */\nfunction applyLayoutOptions(layoutOptions, flatCoordinates, ends) {\n  let layout = GeometryLayout.XY;\n  let stride = 2;\n  if (layoutOptions.hasZ && layoutOptions.hasM) {\n    layout = GeometryLayout.XYZM;\n    stride = 4;\n  } else if (layoutOptions.hasZ) {\n    layout = GeometryLayout.XYZ;\n    stride = 3;\n  } else if (layoutOptions.hasM) {\n    layout = GeometryLayout.XYM;\n    stride = 3;\n  }\n  if (stride !== 4) {\n    for (let i = 0, ii = flatCoordinates.length / 4; i < ii; i++) {\n      flatCoordinates[i * stride] = flatCoordinates[i * 4];\n      flatCoordinates[i * stride + 1] = flatCoordinates[i * 4 + 1];\n      if (layoutOptions.hasZ) {\n        flatCoordinates[i * stride + 2] = flatCoordinates[i * 4 + 2];\n      }\n      if (layoutOptions.hasM) {\n        flatCoordinates[i * stride + 2] = flatCoordinates[i * 4 + 3];\n      }\n    }\n    flatCoordinates.length = flatCoordinates.length / 4 * stride;\n    if (ends) {\n      for (let i = 0, ii = ends.length; i < ii; i++) {\n        ends[i] = ends[i] / 4 * stride;\n      }\n    }\n  }\n  return layout;\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseLink(node, objectStack) {\n  const values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const href = node.getAttribute('href');\n  if (href !== null) {\n    values['link'] = href;\n  }\n  parseNode(LINK_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseExtensions(node, objectStack) {\n  const values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  values['extensionsNode_'] = node;\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseRtePt(node, objectStack) {\n  const values = pushParseAndPop({}, RTEPT_PARSERS, node, objectStack);\n  if (values) {\n    const rteValues = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\n    const flatCoordinates = /** @type {Array<number>} */ (rteValues['flatCoordinates']);\n    const layoutOptions = /** @type {LayoutOptions} */ (rteValues['layoutOptions']);\n    appendCoordinate(flatCoordinates, layoutOptions, node, values);\n  }\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseTrkPt(node, objectStack) {\n  const values = pushParseAndPop({}, TRKPT_PARSERS, node, objectStack);\n  if (values) {\n    const trkValues = /** @type {!Object} */ (objectStack[objectStack.length - 1]);\n    const flatCoordinates = /** @type {Array<number>} */ (trkValues['flatCoordinates']);\n    const layoutOptions = /** @type {LayoutOptions} */ (trkValues['layoutOptions']);\n    appendCoordinate(flatCoordinates, layoutOptions, node, values);\n  }\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction parseTrkSeg(node, objectStack) {\n  const values = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  parseNode(TRKSEG_PARSERS, node, objectStack);\n  const flatCoordinates = /** @type {Array<number>} */\n      (values['flatCoordinates']);\n  const ends = /** @type {Array<number>} */ (values['ends']);\n  ends.push(flatCoordinates.length);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Feature|undefined} Track.\n */\nfunction readRte(node, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").ReadOptions} */ (objectStack[0]);\n  const values = pushParseAndPop({\n    'flatCoordinates': [],\n    'layoutOptions': {}\n  }, RTE_PARSERS, node, objectStack);\n  if (!values) {\n    return undefined;\n  }\n  const flatCoordinates = /** @type {Array<number>} */\n      (values['flatCoordinates']);\n  delete values['flatCoordinates'];\n  const layoutOptions = /** @type {LayoutOptions} */ (values['layoutOptions']);\n  delete values['layoutOptions'];\n  const layout = applyLayoutOptions(layoutOptions, flatCoordinates);\n  const geometry = new LineString(flatCoordinates, layout);\n  transformWithOptions(geometry, false, options);\n  const feature = new Feature(geometry);\n  feature.setProperties(values);\n  return feature;\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Feature|undefined} Track.\n */\nfunction readTrk(node, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").ReadOptions} */ (objectStack[0]);\n  const values = pushParseAndPop({\n    'flatCoordinates': [],\n    'ends': [],\n    'layoutOptions': {}\n  }, TRK_PARSERS, node, objectStack);\n  if (!values) {\n    return undefined;\n  }\n  const flatCoordinates = /** @type {Array<number>} */\n      (values['flatCoordinates']);\n  delete values['flatCoordinates'];\n  const ends = /** @type {Array<number>} */ (values['ends']);\n  delete values['ends'];\n  const layoutOptions = /** @type {LayoutOptions} */ (values['layoutOptions']);\n  delete values['layoutOptions'];\n  const layout = applyLayoutOptions(layoutOptions, flatCoordinates, ends);\n  const geometry = new MultiLineString(flatCoordinates, layout, ends);\n  transformWithOptions(geometry, false, options);\n  const feature = new Feature(geometry);\n  feature.setProperties(values);\n  return feature;\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Feature|undefined} Waypoint.\n */\nfunction readWpt(node, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").ReadOptions} */ (objectStack[0]);\n  const values = pushParseAndPop({}, WPT_PARSERS, node, objectStack);\n  if (!values) {\n    return undefined;\n  }\n  const layoutOptions = /** @type {LayoutOptions} */ ({});\n  const coordinates = appendCoordinate([], layoutOptions, node, values);\n  const layout = applyLayoutOptions(layoutOptions, coordinates);\n  const geometry = new Point(coordinates, layout);\n  transformWithOptions(geometry, false, options);\n  const feature = new Feature(geometry);\n  feature.setProperties(values);\n  return feature;\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {string} value Value for the link's `href` attribute.\n * @param {Array<*>} objectStack Node stack.\n */\nfunction writeLink(node, value, objectStack) {\n  node.setAttribute('href', value);\n  const context = objectStack[objectStack.length - 1];\n  const properties = context['properties'];\n  const link = [\n    properties['linkText'],\n    properties['linkType']\n  ];\n  pushSerializeAndPop(/** @type {import(\"../xml.js\").NodeStackItem} */ ({node: node}),\n    LINK_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\n    link, objectStack, LINK_SEQUENCE);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {import(\"../coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeWptType(node, coordinate, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n  const parentNode = context.node;\n  const namespaceURI = parentNode.namespaceURI;\n  const properties = context['properties'];\n  //FIXME Projection handling\n  node.setAttributeNS(null, 'lat', String(coordinate[1]));\n  node.setAttributeNS(null, 'lon', String(coordinate[0]));\n  const geometryLayout = context['geometryLayout'];\n  switch (geometryLayout) {\n    case GeometryLayout.XYZM:\n      if (coordinate[3] !== 0) {\n        properties['time'] = coordinate[3];\n      }\n      // fall through\n    case GeometryLayout.XYZ:\n      if (coordinate[2] !== 0) {\n        properties['ele'] = coordinate[2];\n      }\n      break;\n    case GeometryLayout.XYM:\n      if (coordinate[2] !== 0) {\n        properties['time'] = coordinate[2];\n      }\n      break;\n    default:\n      // pass\n  }\n  const orderedKeys = (node.nodeName == 'rtept') ?\n    RTEPT_TYPE_SEQUENCE[namespaceURI] :\n    WPT_TYPE_SEQUENCE[namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(/** @type {import(\"../xml.js\").NodeStackItem} */\n    ({node: node, 'properties': properties}),\n    WPT_TYPE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\n    values, objectStack, orderedKeys);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeRte(node, feature, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").WriteOptions} */ (objectStack[0]);\n  const properties = feature.getProperties();\n  const context = {node: node};\n  context['properties'] = properties;\n  const geometry = feature.getGeometry();\n  if (geometry.getType() == GeometryType.LINE_STRING) {\n    const lineString = /** @type {LineString} */ (transformWithOptions(geometry, true, options));\n    context['geometryLayout'] = lineString.getLayout();\n    properties['rtept'] = lineString.getCoordinates();\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = RTE_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context,\n    RTE_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\n    values, objectStack, orderedKeys);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeTrk(node, feature, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").WriteOptions} */ (objectStack[0]);\n  const properties = feature.getProperties();\n  /** @type {import(\"../xml.js\").NodeStackItem} */\n  const context = {node: node};\n  context['properties'] = properties;\n  const geometry = feature.getGeometry();\n  if (geometry.getType() == GeometryType.MULTI_LINE_STRING) {\n    const multiLineString = /** @type {MultiLineString} */ (transformWithOptions(geometry, true, options));\n    properties['trkseg'] = multiLineString.getLineStrings();\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = TRK_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context,\n    TRK_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\n    values, objectStack, orderedKeys);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {LineString} lineString LineString.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeTrkSeg(node, lineString, objectStack) {\n  /** @type {import(\"../xml.js\").NodeStackItem} */\n  const context = {node: node};\n  context['geometryLayout'] = lineString.getLayout();\n  context['properties'] = {};\n  pushSerializeAndPop(context,\n    TRKSEG_SERIALIZERS, TRKSEG_NODE_FACTORY,\n    lineString.getCoordinates(), objectStack);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeWpt(node, feature, objectStack) {\n  const options = /** @type {import(\"./Feature.js\").WriteOptions} */ (objectStack[0]);\n  const context = objectStack[objectStack.length - 1];\n  context['properties'] = feature.getProperties();\n  const geometry = feature.getGeometry();\n  if (geometry.getType() == GeometryType.POINT) {\n    const point = /** @type {Point} */ (transformWithOptions(geometry, true, options));\n    context['geometryLayout'] = point.getLayout();\n    writeWptType(node, point.getCoordinates(), objectStack);\n  }\n}\n\n\nexport default GPX;\n","/**\n * @module ol/format/KML\n */\nimport Feature from '../Feature.js';\nimport {extend, includes} from '../array.js';\nimport {assert} from '../asserts.js';\nimport {asArray} from '../color.js';\nimport {transformWithOptions} from './Feature.js';\nimport XMLFeature from './XMLFeature.js';\nimport {readDecimal, readBoolean, readString, writeStringTextNode, writeCDATASection, writeDecimalTextNode, writeBooleanTextNode} from './xsd.js';\nimport GeometryCollection from '../geom/GeometryCollection.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport GeometryType from '../geom/GeometryType.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport {toRadians} from '../math.js';\nimport {get as getProjection} from '../proj.js';\nimport Fill from '../style/Fill.js';\nimport Icon from '../style/Icon.js';\nimport IconAnchorUnits from '../style/IconAnchorUnits.js';\nimport IconOrigin from '../style/IconOrigin.js';\nimport Stroke from '../style/Stroke.js';\nimport Style from '../style/Style.js';\nimport Text from '../style/Text.js';\nimport {createElementNS, getAllTextContent, isDocument, makeArrayExtender,\n  makeArrayPusher, makeChildAppender, makeObjectPropertySetter,\n  makeReplacer, makeSequence, makeSimpleNodeFactory, makeStructureNS,\n  OBJECT_PROPERTY_NODE_FACTORY, parse, parseNode, pushParseAndPop,\n  pushSerializeAndPop, XML_SCHEMA_INSTANCE_URI} from '../xml.js';\n\n/**\n * @typedef {Object} Vec2\n * @property {number} x\n * @property {IconAnchorUnits} xunits\n * @property {number} y\n * @property {IconAnchorUnits} yunits\n * @property {IconOrigin} origin\n */\n\n/**\n * @typedef {Object} GxTrackObject\n * @property {Array<number>} flatCoordinates\n * @property {Array<number>} whens\n */\n\n\n/**\n * @const\n * @type {Array<string>}\n */\nconst GX_NAMESPACE_URIS = [\n  'http://www.google.com/kml/ext/2.2'\n];\n\n\n/**\n * @const\n * @type {Array<null|string>}\n */\nconst NAMESPACE_URIS = [\n  null,\n  'http://earth.google.com/kml/2.0',\n  'http://earth.google.com/kml/2.1',\n  'http://earth.google.com/kml/2.2',\n  'http://www.opengis.net/kml/2.2'\n];\n\n\n/**\n * @const\n * @type {string}\n */\nconst SCHEMA_LOCATION = 'http://www.opengis.net/kml/2.2 ' +\n    'https://developers.google.com/kml/schema/kml22gx.xsd';\n\n\n/**\n * @type {Object<string, IconAnchorUnits>}\n */\nconst ICON_ANCHOR_UNITS_MAP = {\n  'fraction': IconAnchorUnits.FRACTION,\n  'pixels': IconAnchorUnits.PIXELS,\n  'insetPixels': IconAnchorUnits.PIXELS\n};\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst PLACEMARK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ExtendedData': extendedDataParser,\n    'Region': regionParser,\n    'MultiGeometry': makeObjectPropertySetter(\n      readMultiGeometry, 'geometry'),\n    'LineString': makeObjectPropertySetter(\n      readLineString, 'geometry'),\n    'LinearRing': makeObjectPropertySetter(\n      readLinearRing, 'geometry'),\n    'Point': makeObjectPropertySetter(\n      readPoint, 'geometry'),\n    'Polygon': makeObjectPropertySetter(\n      readPolygon, 'geometry'),\n    'Style': makeObjectPropertySetter(readStyle),\n    'StyleMap': placemarkStyleMapParser,\n    'address': makeObjectPropertySetter(readString),\n    'description': makeObjectPropertySetter(readString),\n    'name': makeObjectPropertySetter(readString),\n    'open': makeObjectPropertySetter(readBoolean),\n    'phoneNumber': makeObjectPropertySetter(readString),\n    'styleUrl': makeObjectPropertySetter(readURI),\n    'visibility': makeObjectPropertySetter(readBoolean)\n  }, makeStructureNS(\n    GX_NAMESPACE_URIS, {\n      'MultiTrack': makeObjectPropertySetter(\n        readGxMultiTrack, 'geometry'),\n      'Track': makeObjectPropertySetter(\n        readGxTrack, 'geometry')\n    }\n  ));\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst NETWORK_LINK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ExtendedData': extendedDataParser,\n    'Region': regionParser,\n    'Link': linkParser,\n    'address': makeObjectPropertySetter(readString),\n    'description': makeObjectPropertySetter(readString),\n    'name': makeObjectPropertySetter(readString),\n    'open': makeObjectPropertySetter(readBoolean),\n    'phoneNumber': makeObjectPropertySetter(readString),\n    'visibility': makeObjectPropertySetter(readBoolean)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst LINK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'href': makeObjectPropertySetter(readURI)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst REGION_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LatLonAltBox': latLonAltBoxParser,\n    'Lod': lodParser\n  });\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst KML_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'Document', 'Placemark'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst KML_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Document': makeChildAppender(writeDocument),\n    'Placemark': makeChildAppender(writePlacemark)\n  });\n\n\n/**\n * @type {import(\"../color.js\").Color}\n */\nlet DEFAULT_COLOR;\n\n/**\n * @type {Fill}\n */\nlet DEFAULT_FILL_STYLE = null;\n\n/**\n * Get the default fill style (or null if not yet set).\n * @return {Fill} The default fill style.\n */\nexport function getDefaultFillStyle() {\n  return DEFAULT_FILL_STYLE;\n}\n\n/**\n * @type {import(\"../size.js\").Size}\n */\nlet DEFAULT_IMAGE_STYLE_ANCHOR;\n\n/**\n * @type {IconAnchorUnits}\n */\nlet DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS;\n\n/**\n * @type {IconAnchorUnits}\n */\nlet DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS;\n\n/**\n * @type {import(\"../size.js\").Size}\n */\nlet DEFAULT_IMAGE_STYLE_SIZE;\n\n/**\n * @type {string}\n */\nlet DEFAULT_IMAGE_STYLE_SRC;\n\n/**\n * @type {number}\n */\nlet DEFAULT_IMAGE_SCALE_MULTIPLIER;\n\n/**\n * @type {import(\"../style/Image.js\").default}\n */\nlet DEFAULT_IMAGE_STYLE = null;\n\n/**\n * Get the default image style (or null if not yet set).\n * @return {import(\"../style/Image.js\").default} The default image style.\n */\nexport function getDefaultImageStyle() {\n  return DEFAULT_IMAGE_STYLE;\n}\n\n/**\n * @type {string}\n */\nlet DEFAULT_NO_IMAGE_STYLE;\n\n/**\n * @type {Stroke}\n */\nlet DEFAULT_STROKE_STYLE = null;\n\n/**\n * Get the default stroke style (or null if not yet set).\n * @return {Stroke} The default stroke style.\n */\nexport function getDefaultStrokeStyle() {\n  return DEFAULT_STROKE_STYLE;\n}\n\n/**\n * @type {Stroke}\n */\nlet DEFAULT_TEXT_STROKE_STYLE;\n\n/**\n * @type {Text}\n */\nlet DEFAULT_TEXT_STYLE = null;\n\n/**\n * Get the default text style (or null if not yet set).\n * @return {Text} The default text style.\n */\nexport function getDefaultTextStyle() {\n  return DEFAULT_TEXT_STYLE;\n}\n\n/**\n * @type {Style}\n */\nlet DEFAULT_STYLE = null;\n\n/**\n * Get the default style (or null if not yet set).\n * @return {Style} The default style.\n */\nexport function getDefaultStyle() {\n  return DEFAULT_STYLE;\n}\n\n/**\n * @type {Array<Style>}\n */\nlet DEFAULT_STYLE_ARRAY = null;\n\n/**\n * Get the default style array (or null if not yet set).\n * @return {Array<Style>} The default style.\n */\nexport function getDefaultStyleArray() {\n  return DEFAULT_STYLE_ARRAY;\n}\n\n\nfunction createStyleDefaults() {\n\n  DEFAULT_COLOR = [255, 255, 255, 1];\n\n  DEFAULT_FILL_STYLE = new Fill({\n    color: DEFAULT_COLOR\n  });\n\n  DEFAULT_IMAGE_STYLE_ANCHOR = [20, 2]; // FIXME maybe [8, 32] ?\n\n  DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS = IconAnchorUnits.PIXELS;\n\n  DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS = IconAnchorUnits.PIXELS;\n\n  DEFAULT_IMAGE_STYLE_SIZE = [64, 64];\n\n  DEFAULT_IMAGE_STYLE_SRC =\n      'https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png';\n\n  DEFAULT_IMAGE_SCALE_MULTIPLIER = 0.5;\n\n  DEFAULT_IMAGE_STYLE = new Icon({\n    anchor: DEFAULT_IMAGE_STYLE_ANCHOR,\n    anchorOrigin: IconOrigin.BOTTOM_LEFT,\n    anchorXUnits: DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,\n    anchorYUnits: DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS,\n    crossOrigin: 'anonymous',\n    rotation: 0,\n    scale: DEFAULT_IMAGE_SCALE_MULTIPLIER,\n    size: DEFAULT_IMAGE_STYLE_SIZE,\n    src: DEFAULT_IMAGE_STYLE_SRC\n  });\n\n  DEFAULT_NO_IMAGE_STYLE = 'NO_IMAGE';\n\n  DEFAULT_STROKE_STYLE = new Stroke({\n    color: DEFAULT_COLOR,\n    width: 1\n  });\n\n  DEFAULT_TEXT_STROKE_STYLE = new Stroke({\n    color: [51, 51, 51, 1],\n    width: 2\n  });\n\n  DEFAULT_TEXT_STYLE = new Text({\n    font: 'bold 16px Helvetica',\n    fill: DEFAULT_FILL_STYLE,\n    stroke: DEFAULT_TEXT_STROKE_STYLE,\n    scale: 0.8\n  });\n\n  DEFAULT_STYLE = new Style({\n    fill: DEFAULT_FILL_STYLE,\n    image: DEFAULT_IMAGE_STYLE,\n    text: DEFAULT_TEXT_STYLE,\n    stroke: DEFAULT_STROKE_STYLE,\n    zIndex: 0\n  });\n\n  DEFAULT_STYLE_ARRAY = [DEFAULT_STYLE];\n\n}\n\n\n/**\n * @typedef {Object} Options\n * @property {boolean} [extractStyles=true] Extract styles from the KML.\n * @property {boolean} [showPointNames=true] Show names as labels for placemarks which contain points.\n * @property {Array<Style>} [defaultStyle] Default style. The\n * default default style is the same as Google Earth.\n * @property {boolean} [writeStyles=true] Write styles into KML.\n */\n\n\n/**\n * @classdesc\n * Feature format for reading and writing data in the KML format.\n *\n * {@link module:ol/format/KML~KML#readFeature} will read the first feature from\n * a KML source.\n *\n * MultiGeometries are converted into GeometryCollections if they are a mix of\n * geometry types, and into MultiPoint/MultiLineString/MultiPolygon if they are\n * all of the same type.\n *\n * Note that the KML format uses the URL() constructor. Older browsers such as IE\n * which do not support this will need a URL polyfill to be loaded before use.\n *\n * @api\n */\nclass KML extends XMLFeature {\n\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    super();\n\n    const options = opt_options ? opt_options : {};\n\n    if (!DEFAULT_STYLE_ARRAY) {\n      createStyleDefaults();\n    }\n\n    /**\n     * @inheritDoc\n     */\n    this.dataProjection = getProjection('EPSG:4326');\n\n    /**\n     * @private\n     * @type {Array<Style>}\n     */\n    this.defaultStyle_ = options.defaultStyle ?\n      options.defaultStyle : DEFAULT_STYLE_ARRAY;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.extractStyles_ = options.extractStyles !== undefined ?\n      options.extractStyles : true;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.writeStyles_ = options.writeStyles !== undefined ?\n      options.writeStyles : true;\n\n    /**\n     * @private\n     * @type {!Object<string, (Array<Style>|string)>}\n     */\n    this.sharedStyles_ = {};\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.showPointNames_ = options.showPointNames !== undefined ?\n      options.showPointNames : true;\n\n  }\n\n  /**\n   * @param {Node} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @private\n   * @return {Array<Feature>|undefined} Features.\n   */\n  readDocumentOrFolder_(node, objectStack) {\n    // FIXME use scope somehow\n    const parsersNS = makeStructureNS(\n      NAMESPACE_URIS, {\n        'Document': makeArrayExtender(this.readDocumentOrFolder_, this),\n        'Folder': makeArrayExtender(this.readDocumentOrFolder_, this),\n        'Placemark': makeArrayPusher(this.readPlacemark_, this),\n        'Style': this.readSharedStyle_.bind(this),\n        'StyleMap': this.readSharedStyleMap_.bind(this)\n      });\n    /** @type {Array<Feature>} */\n    const features = pushParseAndPop([], parsersNS, node, objectStack, this);\n    if (features) {\n      return features;\n    } else {\n      return undefined;\n    }\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @private\n   * @return {Feature|undefined} Feature.\n   */\n  readPlacemark_(node, objectStack) {\n    const object = pushParseAndPop({'geometry': null},\n      PLACEMARK_PARSERS, node, objectStack);\n    if (!object) {\n      return undefined;\n    }\n    const feature = new Feature();\n    const id = node.getAttribute('id');\n    if (id !== null) {\n      feature.setId(id);\n    }\n    const options = /** @type {import(\"./Feature.js\").ReadOptions} */ (objectStack[0]);\n\n    const geometry = object['geometry'];\n    if (geometry) {\n      transformWithOptions(geometry, false, options);\n    }\n    feature.setGeometry(geometry);\n    delete object['geometry'];\n\n    if (this.extractStyles_) {\n      const style = object['Style'];\n      const styleUrl = object['styleUrl'];\n      const styleFunction = createFeatureStyleFunction(\n        style, styleUrl, this.defaultStyle_, this.sharedStyles_,\n        this.showPointNames_);\n      feature.setStyle(styleFunction);\n    }\n    delete object['Style'];\n    // we do not remove the styleUrl property from the object, so it\n    // gets stored on feature when setProperties is called\n\n    feature.setProperties(object);\n\n    return feature;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @private\n   */\n  readSharedStyle_(node, objectStack) {\n    const id = node.getAttribute('id');\n    if (id !== null) {\n      const style = readStyle(node, objectStack);\n      if (style) {\n        let styleUri;\n        let baseURI = node.baseURI;\n        if (!baseURI || baseURI == 'about:blank') {\n          baseURI = window.location.href;\n        }\n        if (baseURI) {\n          const url = new URL('#' + id, baseURI);\n          styleUri = url.href;\n        } else {\n          styleUri = '#' + id;\n        }\n        this.sharedStyles_[styleUri] = style;\n      }\n    }\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @param {Array<*>} objectStack Object stack.\n   * @private\n   */\n  readSharedStyleMap_(node, objectStack) {\n    const id = node.getAttribute('id');\n    if (id === null) {\n      return;\n    }\n    const styleMapValue = readStyleMapValue(node, objectStack);\n    if (!styleMapValue) {\n      return;\n    }\n    let styleUri;\n    let baseURI = node.baseURI;\n    if (!baseURI || baseURI == 'about:blank') {\n      baseURI = window.location.href;\n    }\n    if (baseURI) {\n      const url = new URL('#' + id, baseURI);\n      styleUri = url.href;\n    } else {\n      styleUri = '#' + id;\n    }\n    this.sharedStyles_[styleUri] = styleMapValue;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeatureFromNode(node, opt_options) {\n    if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n      return null;\n    }\n    const feature = this.readPlacemark_(\n      node, [this.getReadOptions(node, opt_options)]);\n    if (feature) {\n      return feature;\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeaturesFromNode(node, opt_options) {\n    if (!includes(NAMESPACE_URIS, node.namespaceURI)) {\n      return [];\n    }\n    let features;\n    const localName = node.localName;\n    if (localName == 'Document' || localName == 'Folder') {\n      features = this.readDocumentOrFolder_(\n        node, [this.getReadOptions(node, opt_options)]);\n      if (features) {\n        return features;\n      } else {\n        return [];\n      }\n    } else if (localName == 'Placemark') {\n      const feature = this.readPlacemark_(\n        node, [this.getReadOptions(node, opt_options)]);\n      if (feature) {\n        return [feature];\n      } else {\n        return [];\n      }\n    } else if (localName == 'kml') {\n      features = [];\n      for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n        const fs = this.readFeaturesFromNode(n, opt_options);\n        if (fs) {\n          extend(features, fs);\n        }\n      }\n      return features;\n    } else {\n      return [];\n    }\n  }\n\n  /**\n   * Read the name of the KML.\n   *\n   * @param {Document|Element|string} source Source.\n   * @return {string|undefined} Name.\n   * @api\n   */\n  readName(source) {\n    if (!source) {\n      return undefined;\n    } else if (typeof source === 'string') {\n      const doc = parse(source);\n      return this.readNameFromDocument(doc);\n    } else if (isDocument(source)) {\n      return this.readNameFromDocument(/** @type {Document} */ (source));\n    } else {\n      return this.readNameFromNode(/** @type {Element} */ (source));\n    }\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @return {string|undefined} Name.\n   */\n  readNameFromDocument(doc) {\n    for (let n = /** @type {Node} */ (doc.firstChild); n; n = n.nextSibling) {\n      if (n.nodeType == Node.ELEMENT_NODE) {\n        const name = this.readNameFromNode(/** @type {Element} */ (n));\n        if (name) {\n          return name;\n        }\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @return {string|undefined} Name.\n   */\n  readNameFromNode(node) {\n    for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n      if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n          n.localName == 'name') {\n        return readString(n);\n      }\n    }\n    for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n      const localName = n.localName;\n      if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n          (localName == 'Document' ||\n           localName == 'Folder' ||\n           localName == 'Placemark' ||\n           localName == 'kml')) {\n        const name = this.readNameFromNode(n);\n        if (name) {\n          return name;\n        }\n      }\n    }\n    return undefined;\n  }\n\n  /**\n   * Read the network links of the KML.\n   *\n   * @param {Document|Element|string} source Source.\n   * @return {Array<Object>} Network links.\n   * @api\n   */\n  readNetworkLinks(source) {\n    const networkLinks = [];\n    if (typeof source === 'string') {\n      const doc = parse(source);\n      extend(networkLinks, this.readNetworkLinksFromDocument(doc));\n    } else if (isDocument(source)) {\n      extend(networkLinks, this.readNetworkLinksFromDocument(\n        /** @type {Document} */ (source)));\n    } else {\n      extend(networkLinks, this.readNetworkLinksFromNode(\n        /** @type {Element} */ (source)));\n    }\n    return networkLinks;\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @return {Array<Object>} Network links.\n   */\n  readNetworkLinksFromDocument(doc) {\n    const networkLinks = [];\n    for (let n = /** @type {Node} */ (doc.firstChild); n; n = n.nextSibling) {\n      if (n.nodeType == Node.ELEMENT_NODE) {\n        extend(networkLinks, this.readNetworkLinksFromNode(/** @type {Element} */ (n)));\n      }\n    }\n    return networkLinks;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @return {Array<Object>} Network links.\n   */\n  readNetworkLinksFromNode(node) {\n    const networkLinks = [];\n    for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n      if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n          n.localName == 'NetworkLink') {\n        const obj = pushParseAndPop({}, NETWORK_LINK_PARSERS,\n          n, []);\n        networkLinks.push(obj);\n      }\n    }\n    for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n      const localName = n.localName;\n      if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n          (localName == 'Document' ||\n           localName == 'Folder' ||\n           localName == 'kml')) {\n        extend(networkLinks, this.readNetworkLinksFromNode(n));\n      }\n    }\n    return networkLinks;\n  }\n\n  /**\n   * Read the regions of the KML.\n   *\n   * @param {Document|Element|string} source Source.\n   * @return {Array<Object>} Regions.\n   * @api\n   */\n  readRegion(source) {\n    const regions = [];\n    if (typeof source === 'string') {\n      const doc = parse(source);\n      extend(regions, this.readRegionFromDocument(doc));\n    } else if (isDocument(source)) {\n      extend(regions, this.readRegionFromDocument(\n        /** @type {Document} */ (source)));\n    } else {\n      extend(regions, this.readRegionFromNode(\n        /** @type {Element} */ (source)));\n    }\n    return regions;\n  }\n\n  /**\n   * @param {Document} doc Document.\n   * @return {Array<Object>} Region.\n   */\n  readRegionFromDocument(doc) {\n    const regions = [];\n    for (let n = /** @type {Node} */ (doc.firstChild); n; n = n.nextSibling) {\n      if (n.nodeType == Node.ELEMENT_NODE) {\n        extend(regions, this.readRegionFromNode(/** @type {Element} */ (n)));\n      }\n    }\n    return regions;\n  }\n\n  /**\n   * @param {Element} node Node.\n   * @return {Array<Object>} Region.\n   * @api\n   */\n  readRegionFromNode(node) {\n    const regions = [];\n    for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n      if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n          n.localName == 'Region') {\n        const obj = pushParseAndPop({}, REGION_PARSERS,\n          n, []);\n        regions.push(obj);\n      }\n    }\n    for (let n = node.firstElementChild; n; n = n.nextElementSibling) {\n      const localName = n.localName;\n      if (includes(NAMESPACE_URIS, n.namespaceURI) &&\n          (localName == 'Document' ||\n           localName == 'Folder' ||\n           localName == 'kml')) {\n        extend(regions, this.readRegionFromNode(n));\n      }\n    }\n    return regions;\n  }\n\n  /**\n   * Encode an array of features in the KML format as an XML node. GeometryCollections,\n   * MultiPoints, MultiLineStrings, and MultiPolygons are output as MultiGeometries.\n   *\n   * @param {Array<Feature>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Options.\n   * @return {Node} Node.\n   * @override\n   * @api\n   */\n  writeFeaturesNode(features, opt_options) {\n    opt_options = this.adaptOptions(opt_options);\n    const kml = createElementNS(NAMESPACE_URIS[4], 'kml');\n    const xmlnsUri = 'http://www.w3.org/2000/xmlns/';\n    kml.setAttributeNS(xmlnsUri, 'xmlns:gx', GX_NAMESPACE_URIS[0]);\n    kml.setAttributeNS(xmlnsUri, 'xmlns:xsi', XML_SCHEMA_INSTANCE_URI);\n    kml.setAttributeNS(XML_SCHEMA_INSTANCE_URI, 'xsi:schemaLocation', SCHEMA_LOCATION);\n\n    const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: kml};\n    /** @type {!Object<string, (Array<Feature>|Feature|undefined)>} */\n    const properties = {};\n    if (features.length > 1) {\n      properties['Document'] = features;\n    } else if (features.length == 1) {\n      properties['Placemark'] = features[0];\n    }\n    const orderedKeys = KML_SEQUENCE[kml.namespaceURI];\n    const values = makeSequence(properties, orderedKeys);\n    pushSerializeAndPop(context, KML_SERIALIZERS,\n      OBJECT_PROPERTY_NODE_FACTORY, values, [opt_options], orderedKeys,\n      this);\n    return kml;\n  }\n}\n\n\n/**\n * @param {Style|undefined} foundStyle Style.\n * @param {string} name Name.\n * @return {Style} style Style.\n */\nfunction createNameStyleFunction(foundStyle, name) {\n  let textStyle = null;\n  const textOffset = [0, 0];\n  let textAlign = 'start';\n  if (foundStyle.getImage()) {\n    let imageSize = foundStyle.getImage().getImageSize();\n    if (imageSize === null) {\n      imageSize = DEFAULT_IMAGE_STYLE_SIZE;\n    }\n    if (imageSize.length == 2) {\n      const imageScale = foundStyle.getImage().getScale();\n      // Offset the label to be centered to the right of the icon, if there is\n      // one.\n      textOffset[0] = imageScale * imageSize[0] / 2;\n      textOffset[1] = -imageScale * imageSize[1] / 2;\n      textAlign = 'left';\n    }\n  }\n  if (foundStyle.getText() !== null) {\n    // clone the text style, customizing it with name, alignments and offset.\n    // Note that kml does not support many text options that OpenLayers does (rotation, textBaseline).\n    const foundText = foundStyle.getText();\n    textStyle = foundText.clone();\n    textStyle.setFont(foundText.getFont() || DEFAULT_TEXT_STYLE.getFont());\n    textStyle.setScale(foundText.getScale() || DEFAULT_TEXT_STYLE.getScale());\n    textStyle.setFill(foundText.getFill() || DEFAULT_TEXT_STYLE.getFill());\n    textStyle.setStroke(foundText.getStroke() || DEFAULT_TEXT_STROKE_STYLE);\n  } else {\n    textStyle = DEFAULT_TEXT_STYLE.clone();\n  }\n  textStyle.setText(name);\n  textStyle.setOffsetX(textOffset[0]);\n  textStyle.setOffsetY(textOffset[1]);\n  textStyle.setTextAlign(textAlign);\n\n  const nameStyle = new Style({\n    text: textStyle\n  });\n  return nameStyle;\n}\n\n\n/**\n * @param {Array<Style>|undefined} style Style.\n * @param {string} styleUrl Style URL.\n * @param {Array<Style>} defaultStyle Default style.\n * @param {!Object<string, (Array<Style>|string)>} sharedStyles Shared styles.\n * @param {boolean|undefined} showPointNames true to show names for point placemarks.\n * @return {import(\"../style/Style.js\").StyleFunction} Feature style function.\n */\nfunction createFeatureStyleFunction(style, styleUrl, defaultStyle, sharedStyles, showPointNames) {\n\n  return (\n    /**\n     * @param {Feature} feature feature.\n     * @param {number} resolution Resolution.\n     * @return {Array<Style>} Style.\n     */\n    function(feature, resolution) {\n      let drawName = showPointNames;\n      /** @type {Style|undefined} */\n      let nameStyle;\n      let name = '';\n      if (drawName) {\n        const geometry = feature.getGeometry();\n        if (geometry) {\n          drawName = geometry.getType() === GeometryType.POINT;\n        }\n      }\n\n      if (drawName) {\n        name = /** @type {string} */ (feature.get('name'));\n        drawName = drawName && !!name;\n      }\n\n      if (style) {\n        if (drawName) {\n          nameStyle = createNameStyleFunction(style[0], name);\n          return style.concat(nameStyle);\n        }\n        return style;\n      }\n      if (styleUrl) {\n        const foundStyle = findStyle(styleUrl, defaultStyle, sharedStyles);\n        if (drawName) {\n          nameStyle = createNameStyleFunction(foundStyle[0], name);\n          return foundStyle.concat(nameStyle);\n        }\n        return foundStyle;\n      }\n      if (drawName) {\n        nameStyle = createNameStyleFunction(defaultStyle[0], name);\n        return defaultStyle.concat(nameStyle);\n      }\n      return defaultStyle;\n    }\n  );\n}\n\n\n/**\n * @param {Array<Style>|string|undefined} styleValue Style value.\n * @param {Array<Style>} defaultStyle Default style.\n * @param {!Object<string, (Array<Style>|string)>} sharedStyles\n * Shared styles.\n * @return {Array<Style>} Style.\n */\nfunction findStyle(styleValue, defaultStyle, sharedStyles) {\n  if (Array.isArray(styleValue)) {\n    return styleValue;\n  } else if (typeof styleValue === 'string') {\n    // KML files in the wild occasionally forget the leading `#` on styleUrls\n    // defined in the same document.  Add a leading `#` if it enables to find\n    // a style.\n    if (!(styleValue in sharedStyles) && ('#' + styleValue in sharedStyles)) {\n      styleValue = '#' + styleValue;\n    }\n    return findStyle(sharedStyles[styleValue], defaultStyle, sharedStyles);\n  } else {\n    return defaultStyle;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {import(\"../color.js\").Color|undefined} Color.\n */\nfunction readColor(node) {\n  const s = getAllTextContent(node, false);\n  // The KML specification states that colors should not include a leading `#`\n  // but we tolerate them.\n  const m = /^\\s*#?\\s*([0-9A-Fa-f]{8})\\s*$/.exec(s);\n  if (m) {\n    const hexColor = m[1];\n    return [\n      parseInt(hexColor.substr(6, 2), 16),\n      parseInt(hexColor.substr(4, 2), 16),\n      parseInt(hexColor.substr(2, 2), 16),\n      parseInt(hexColor.substr(0, 2), 16) / 255\n    ];\n\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {Array<number>|undefined} Flat coordinates.\n */\nexport function readFlatCoordinates(node) {\n  let s = getAllTextContent(node, false);\n  const flatCoordinates = [];\n  // The KML specification states that coordinate tuples should not include\n  // spaces, but we tolerate them.\n  const re =\n      /^\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?)\\s*,\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?)(?:\\s*,\\s*([+\\-]?\\d*\\.?\\d+(?:e[+\\-]?\\d+)?))?\\s*/i;\n  let m;\n  while ((m = re.exec(s))) {\n    const x = parseFloat(m[1]);\n    const y = parseFloat(m[2]);\n    const z = m[3] ? parseFloat(m[3]) : 0;\n    flatCoordinates.push(x, y, z);\n    s = s.substr(m[0].length);\n  }\n  if (s !== '') {\n    return undefined;\n  }\n  return flatCoordinates;\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {string} URI.\n */\nfunction readURI(node) {\n  const s = getAllTextContent(node, false).trim();\n  let baseURI = node.baseURI;\n  if (!baseURI || baseURI == 'about:blank') {\n    baseURI = window.location.href;\n  }\n  if (baseURI) {\n    const url = new URL(s, baseURI);\n    return url.href;\n  } else {\n    return s;\n  }\n}\n\n\n/**\n * @param {Element} node Node.\n * @return {Vec2} Vec2.\n */\nfunction readVec2(node) {\n  const xunits = node.getAttribute('xunits');\n  const yunits = node.getAttribute('yunits');\n  let origin;\n  if (xunits !== 'insetPixels') {\n    if (yunits !== 'insetPixels') {\n      origin = IconOrigin.BOTTOM_LEFT;\n    } else {\n      origin = IconOrigin.TOP_LEFT;\n    }\n  } else {\n    if (yunits !== 'insetPixels') {\n      origin = IconOrigin.BOTTOM_RIGHT;\n    } else {\n      origin = IconOrigin.TOP_RIGHT;\n    }\n  }\n  return {\n    x: parseFloat(node.getAttribute('x')),\n    xunits: ICON_ANCHOR_UNITS_MAP[xunits],\n    y: parseFloat(node.getAttribute('y')),\n    yunits: ICON_ANCHOR_UNITS_MAP[yunits],\n    origin: origin\n  };\n}\n\n\n/**\n * @param {Node} node Node.\n * @return {number|undefined} Scale.\n */\nfunction readScale(node) {\n  return readDecimal(node);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst STYLE_MAP_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Pair': pairDataParser\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Array<Style>|string|undefined} StyleMap.\n */\nfunction readStyleMapValue(node, objectStack) {\n  return pushParseAndPop(undefined,\n    STYLE_MAP_PARSERS, node, objectStack);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst ICON_STYLE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Icon': makeObjectPropertySetter(readIcon),\n    'heading': makeObjectPropertySetter(readDecimal),\n    'hotSpot': makeObjectPropertySetter(readVec2),\n    'scale': makeObjectPropertySetter(readScale)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction iconStyleParser(node, objectStack) {\n  // FIXME refreshMode\n  // FIXME refreshInterval\n  // FIXME viewRefreshTime\n  // FIXME viewBoundScale\n  // FIXME viewFormat\n  // FIXME httpQuery\n  const object = pushParseAndPop(\n    {}, ICON_STYLE_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const styleObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const IconObject = 'Icon' in object ? object['Icon'] : {};\n  const drawIcon = (!('Icon' in object) || Object.keys(IconObject).length > 0);\n  let src;\n  const href = /** @type {string|undefined} */\n      (IconObject['href']);\n  if (href) {\n    src = href;\n  } else if (drawIcon) {\n    src = DEFAULT_IMAGE_STYLE_SRC;\n  }\n  let anchor, anchorXUnits, anchorYUnits;\n  let anchorOrigin = IconOrigin.BOTTOM_LEFT;\n  const hotSpot = /** @type {Vec2|undefined} */\n      (object['hotSpot']);\n  if (hotSpot) {\n    anchor = [hotSpot.x, hotSpot.y];\n    anchorXUnits = hotSpot.xunits;\n    anchorYUnits = hotSpot.yunits;\n    anchorOrigin = hotSpot.origin;\n  } else if (src === DEFAULT_IMAGE_STYLE_SRC) {\n    anchor = DEFAULT_IMAGE_STYLE_ANCHOR;\n    anchorXUnits = DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS;\n    anchorYUnits = DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS;\n  } else if (/^http:\\/\\/maps\\.(?:google|gstatic)\\.com\\//.test(src)) {\n    anchor = [0.5, 0];\n    anchorXUnits = IconAnchorUnits.FRACTION;\n    anchorYUnits = IconAnchorUnits.FRACTION;\n  }\n\n  let offset;\n  const x = /** @type {number|undefined} */\n      (IconObject['x']);\n  const y = /** @type {number|undefined} */\n      (IconObject['y']);\n  if (x !== undefined && y !== undefined) {\n    offset = [x, y];\n  }\n\n  let size;\n  const w = /** @type {number|undefined} */\n      (IconObject['w']);\n  const h = /** @type {number|undefined} */\n      (IconObject['h']);\n  if (w !== undefined && h !== undefined) {\n    size = [w, h];\n  }\n\n  let rotation;\n  const heading = /** @type {number} */\n      (object['heading']);\n  if (heading !== undefined) {\n    rotation = toRadians(heading);\n  }\n\n  let scale = /** @type {number|undefined} */\n      (object['scale']);\n\n  if (drawIcon) {\n    if (src == DEFAULT_IMAGE_STYLE_SRC) {\n      size = DEFAULT_IMAGE_STYLE_SIZE;\n      if (scale === undefined) {\n        scale = DEFAULT_IMAGE_SCALE_MULTIPLIER;\n      }\n    }\n\n    const imageStyle = new Icon({\n      anchor: anchor,\n      anchorOrigin: anchorOrigin,\n      anchorXUnits: anchorXUnits,\n      anchorYUnits: anchorYUnits,\n      crossOrigin: 'anonymous', // FIXME should this be configurable?\n      offset: offset,\n      offsetOrigin: IconOrigin.BOTTOM_LEFT,\n      rotation: rotation,\n      scale: scale,\n      size: size,\n      src: src\n    });\n    styleObject['imageStyle'] = imageStyle;\n  } else {\n    // handle the case when we explicitly want to draw no icon.\n    styleObject['imageStyle'] = DEFAULT_NO_IMAGE_STYLE;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst LABEL_STYLE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeObjectPropertySetter(readColor),\n    'scale': makeObjectPropertySetter(readScale)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction labelStyleParser(node, objectStack) {\n  // FIXME colorMode\n  const object = pushParseAndPop(\n    {}, LABEL_STYLE_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const styleObject = objectStack[objectStack.length - 1];\n  const textStyle = new Text({\n    fill: new Fill({\n      color: /** @type {import(\"../color.js\").Color} */\n          ('color' in object ? object['color'] : DEFAULT_COLOR)\n    }),\n    scale: /** @type {number|undefined} */\n        (object['scale'])\n  });\n  styleObject['textStyle'] = textStyle;\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst LINE_STYLE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeObjectPropertySetter(readColor),\n    'width': makeObjectPropertySetter(readDecimal)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction lineStyleParser(node, objectStack) {\n  // FIXME colorMode\n  // FIXME gx:outerColor\n  // FIXME gx:outerWidth\n  // FIXME gx:physicalWidth\n  // FIXME gx:labelVisibility\n  const object = pushParseAndPop(\n    {}, LINE_STYLE_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const styleObject = objectStack[objectStack.length - 1];\n  const strokeStyle = new Stroke({\n    color: /** @type {import(\"../color.js\").Color} */\n        ('color' in object ? object['color'] : DEFAULT_COLOR),\n    width: /** @type {number} */ ('width' in object ? object['width'] : 1)\n  });\n  styleObject['strokeStyle'] = strokeStyle;\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst POLY_STYLE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeObjectPropertySetter(readColor),\n    'fill': makeObjectPropertySetter(readBoolean),\n    'outline': makeObjectPropertySetter(readBoolean)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction polyStyleParser(node, objectStack) {\n  // FIXME colorMode\n  const object = pushParseAndPop(\n    {}, POLY_STYLE_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const styleObject = objectStack[objectStack.length - 1];\n  const fillStyle = new Fill({\n    color: /** @type {import(\"../color.js\").Color} */\n        ('color' in object ? object['color'] : DEFAULT_COLOR)\n  });\n  styleObject['fillStyle'] = fillStyle;\n  const fill = /** @type {boolean|undefined} */ (object['fill']);\n  if (fill !== undefined) {\n    styleObject['fill'] = fill;\n  }\n  const outline = /** @type {boolean|undefined} */ (object['outline']);\n  if (outline !== undefined) {\n    styleObject['outline'] = outline;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst FLAT_LINEAR_RING_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'coordinates': makeReplacer(readFlatCoordinates)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Array<number>} LinearRing flat coordinates.\n */\nfunction readFlatLinearRing(node, objectStack) {\n  return pushParseAndPop(null,\n    FLAT_LINEAR_RING_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction gxCoordParser(node, objectStack) {\n  const gxTrackObject = /** @type {GxTrackObject} */\n      (objectStack[objectStack.length - 1]);\n  const flatCoordinates = gxTrackObject.flatCoordinates;\n  const s = getAllTextContent(node, false);\n  const re =\n      /^\\s*([+\\-]?\\d+(?:\\.\\d*)?(?:e[+\\-]?\\d*)?)\\s+([+\\-]?\\d+(?:\\.\\d*)?(?:e[+\\-]?\\d*)?)\\s+([+\\-]?\\d+(?:\\.\\d*)?(?:e[+\\-]?\\d*)?)\\s*$/i;\n  const m = re.exec(s);\n  if (m) {\n    const x = parseFloat(m[1]);\n    const y = parseFloat(m[2]);\n    const z = parseFloat(m[3]);\n    flatCoordinates.push(x, y, z, 0);\n  } else {\n    flatCoordinates.push(0, 0, 0, 0);\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst GX_MULTITRACK_GEOMETRY_PARSERS = makeStructureNS(\n  GX_NAMESPACE_URIS, {\n    'Track': makeArrayPusher(readGxTrack)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {MultiLineString|undefined} MultiLineString.\n */\nfunction readGxMultiTrack(node, objectStack) {\n  const lineStrings = pushParseAndPop([],\n    GX_MULTITRACK_GEOMETRY_PARSERS, node, objectStack);\n  if (!lineStrings) {\n    return undefined;\n  }\n  return new MultiLineString(lineStrings);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst GX_TRACK_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'when': whenParser\n  }, makeStructureNS(\n    GX_NAMESPACE_URIS, {\n      'coord': gxCoordParser\n    }));\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {LineString|undefined} LineString.\n */\nfunction readGxTrack(node, objectStack) {\n  const gxTrackObject = pushParseAndPop(\n    /** @type {GxTrackObject} */ ({\n      flatCoordinates: [],\n      whens: []\n    }), GX_TRACK_PARSERS, node, objectStack);\n  if (!gxTrackObject) {\n    return undefined;\n  }\n  const flatCoordinates = gxTrackObject.flatCoordinates;\n  const whens = gxTrackObject.whens;\n  for (let i = 0, ii = Math.min(flatCoordinates.length, whens.length); i < ii; ++i) {\n    flatCoordinates[4 * i + 3] = whens[i];\n  }\n  return new LineString(flatCoordinates, GeometryLayout.XYZM);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst ICON_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'href': makeObjectPropertySetter(readURI)\n  }, makeStructureNS(\n    GX_NAMESPACE_URIS, {\n      'x': makeObjectPropertySetter(readDecimal),\n      'y': makeObjectPropertySetter(readDecimal),\n      'w': makeObjectPropertySetter(readDecimal),\n      'h': makeObjectPropertySetter(readDecimal)\n    }));\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Object} Icon object.\n */\nfunction readIcon(node, objectStack) {\n  const iconObject = pushParseAndPop(\n    {}, ICON_PARSERS, node, objectStack);\n  if (iconObject) {\n    return iconObject;\n  } else {\n    return null;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst GEOMETRY_FLAT_COORDINATES_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'coordinates': makeReplacer(readFlatCoordinates)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Array<number>} Flat coordinates.\n */\nfunction readFlatCoordinatesFromNode(node, objectStack) {\n  return pushParseAndPop(null,\n    GEOMETRY_FLAT_COORDINATES_PARSERS, node, objectStack);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst EXTRUDE_AND_ALTITUDE_MODE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'extrude': makeObjectPropertySetter(readBoolean),\n    'tessellate': makeObjectPropertySetter(readBoolean),\n    'altitudeMode': makeObjectPropertySetter(readString)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {LineString|undefined} LineString.\n */\nfunction readLineString(node, objectStack) {\n  const properties = pushParseAndPop({},\n    EXTRUDE_AND_ALTITUDE_MODE_PARSERS, node,\n    objectStack);\n  const flatCoordinates =\n      readFlatCoordinatesFromNode(node, objectStack);\n  if (flatCoordinates) {\n    const lineString = new LineString(flatCoordinates, GeometryLayout.XYZ);\n    lineString.setProperties(properties);\n    return lineString;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Polygon|undefined} Polygon.\n */\nfunction readLinearRing(node, objectStack) {\n  const properties = pushParseAndPop({},\n    EXTRUDE_AND_ALTITUDE_MODE_PARSERS, node,\n    objectStack);\n  const flatCoordinates =\n      readFlatCoordinatesFromNode(node, objectStack);\n  if (flatCoordinates) {\n    const polygon = new Polygon(flatCoordinates, GeometryLayout.XYZ, [flatCoordinates.length]);\n    polygon.setProperties(properties);\n    return polygon;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst MULTI_GEOMETRY_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LineString': makeArrayPusher(readLineString),\n    'LinearRing': makeArrayPusher(readLinearRing),\n    'MultiGeometry': makeArrayPusher(readMultiGeometry),\n    'Point': makeArrayPusher(readPoint),\n    'Polygon': makeArrayPusher(readPolygon)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {import(\"../geom/Geometry.js\").default} Geometry.\n */\nfunction readMultiGeometry(node, objectStack) {\n  const geometries = pushParseAndPop([],\n    MULTI_GEOMETRY_PARSERS, node, objectStack);\n  if (!geometries) {\n    return null;\n  }\n  if (geometries.length === 0) {\n    return new GeometryCollection(geometries);\n  }\n  let multiGeometry;\n  let homogeneous = true;\n  const type = geometries[0].getType();\n  let geometry;\n  for (let i = 1, ii = geometries.length; i < ii; ++i) {\n    geometry = geometries[i];\n    if (geometry.getType() != type) {\n      homogeneous = false;\n      break;\n    }\n  }\n  if (homogeneous) {\n    let layout;\n    let flatCoordinates;\n    if (type == GeometryType.POINT) {\n      const point = geometries[0];\n      layout = point.getLayout();\n      flatCoordinates = point.getFlatCoordinates();\n      for (let i = 1, ii = geometries.length; i < ii; ++i) {\n        geometry = geometries[i];\n        extend(flatCoordinates, geometry.getFlatCoordinates());\n      }\n      multiGeometry = new MultiPoint(flatCoordinates, layout);\n      setCommonGeometryProperties(multiGeometry, geometries);\n    } else if (type == GeometryType.LINE_STRING) {\n      multiGeometry = new MultiLineString(geometries);\n      setCommonGeometryProperties(multiGeometry, geometries);\n    } else if (type == GeometryType.POLYGON) {\n      multiGeometry = new MultiPolygon(geometries);\n      setCommonGeometryProperties(multiGeometry, geometries);\n    } else if (type == GeometryType.GEOMETRY_COLLECTION) {\n      multiGeometry = new GeometryCollection(geometries);\n    } else {\n      assert(false, 37); // Unknown geometry type found\n    }\n  } else {\n    multiGeometry = new GeometryCollection(geometries);\n  }\n  return (\n    /** @type {import(\"../geom/Geometry.js\").default} */ (multiGeometry)\n  );\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Point|undefined} Point.\n */\nfunction readPoint(node, objectStack) {\n  const properties = pushParseAndPop({},\n    EXTRUDE_AND_ALTITUDE_MODE_PARSERS, node,\n    objectStack);\n  const flatCoordinates =\n      readFlatCoordinatesFromNode(node, objectStack);\n  if (flatCoordinates) {\n    const point = new Point(flatCoordinates, GeometryLayout.XYZ);\n    point.setProperties(properties);\n    return point;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst FLAT_LINEAR_RINGS_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'innerBoundaryIs': innerBoundaryIsParser,\n    'outerBoundaryIs': outerBoundaryIsParser\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Polygon|undefined} Polygon.\n */\nfunction readPolygon(node, objectStack) {\n  const properties = pushParseAndPop(/** @type {Object<string,*>} */ ({}),\n    EXTRUDE_AND_ALTITUDE_MODE_PARSERS, node,\n    objectStack);\n  const flatLinearRings = pushParseAndPop([null],\n    FLAT_LINEAR_RINGS_PARSERS, node, objectStack);\n  if (flatLinearRings && flatLinearRings[0]) {\n    const flatCoordinates = flatLinearRings[0];\n    const ends = [flatCoordinates.length];\n    for (let i = 1, ii = flatLinearRings.length; i < ii; ++i) {\n      extend(flatCoordinates, flatLinearRings[i]);\n      ends.push(flatCoordinates.length);\n    }\n    const polygon = new Polygon(flatCoordinates, GeometryLayout.XYZ, ends);\n    polygon.setProperties(properties);\n    return polygon;\n  } else {\n    return undefined;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst STYLE_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'IconStyle': iconStyleParser,\n    'LabelStyle': labelStyleParser,\n    'LineStyle': lineStyleParser,\n    'PolyStyle': polyStyleParser\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n * @return {Array<Style>} Style.\n */\nfunction readStyle(node, objectStack) {\n  const styleObject = pushParseAndPop(\n    {}, STYLE_PARSERS, node, objectStack);\n  if (!styleObject) {\n    return null;\n  }\n  let fillStyle = /** @type {Fill} */\n      ('fillStyle' in styleObject ?\n        styleObject['fillStyle'] : DEFAULT_FILL_STYLE);\n  const fill = /** @type {boolean|undefined} */ (styleObject['fill']);\n  if (fill !== undefined && !fill) {\n    fillStyle = null;\n  }\n  let imageStyle;\n  if ('imageStyle' in styleObject) {\n    if (styleObject['imageStyle'] != DEFAULT_NO_IMAGE_STYLE) {\n      imageStyle = styleObject['imageStyle'];\n    }\n  } else {\n    imageStyle = DEFAULT_IMAGE_STYLE;\n  }\n  const textStyle = /** @type {Text} */\n      ('textStyle' in styleObject ?\n        styleObject['textStyle'] : DEFAULT_TEXT_STYLE);\n  let strokeStyle = /** @type {Stroke} */\n      ('strokeStyle' in styleObject ?\n        styleObject['strokeStyle'] : DEFAULT_STROKE_STYLE);\n  const outline = /** @type {boolean|undefined} */\n      (styleObject['outline']);\n  if (outline !== undefined && !outline) {\n    strokeStyle = null;\n  }\n  return [new Style({\n    fill: fillStyle,\n    image: imageStyle,\n    stroke: strokeStyle,\n    text: textStyle,\n    zIndex: undefined // FIXME\n  })];\n}\n\n\n/**\n * Reads an array of geometries and creates arrays for common geometry\n * properties. Then sets them to the multi geometry.\n * @param {MultiPoint|MultiLineString|MultiPolygon} multiGeometry A multi-geometry.\n * @param {Array<import(\"../geom/Geometry.js\").default>} geometries List of geometries.\n */\nfunction setCommonGeometryProperties(multiGeometry, geometries) {\n  const ii = geometries.length;\n  const extrudes = new Array(geometries.length);\n  const tessellates = new Array(geometries.length);\n  const altitudeModes = new Array(geometries.length);\n  let hasExtrude, hasTessellate, hasAltitudeMode;\n  hasExtrude = hasTessellate = hasAltitudeMode = false;\n  for (let i = 0; i < ii; ++i) {\n    const geometry = geometries[i];\n    extrudes[i] = geometry.get('extrude');\n    tessellates[i] = geometry.get('tessellate');\n    altitudeModes[i] = geometry.get('altitudeMode');\n    hasExtrude = hasExtrude || extrudes[i] !== undefined;\n    hasTessellate = hasTessellate || tessellates[i] !== undefined;\n    hasAltitudeMode = hasAltitudeMode || altitudeModes[i];\n  }\n  if (hasExtrude) {\n    multiGeometry.set('extrude', extrudes);\n  }\n  if (hasTessellate) {\n    multiGeometry.set('tessellate', tessellates);\n  }\n  if (hasAltitudeMode) {\n    multiGeometry.set('altitudeMode', altitudeModes);\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst DATA_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'displayName': makeObjectPropertySetter(readString),\n    'value': makeObjectPropertySetter(readString)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction dataParser(node, objectStack) {\n  const name = node.getAttribute('name');\n  parseNode(DATA_PARSERS, node, objectStack);\n  const featureObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  if (name !== null) {\n    featureObject[name] = featureObject.value;\n  } else if (featureObject.displayName !== null) {\n    featureObject[featureObject.displayName] = featureObject.value;\n  }\n  delete featureObject['value'];\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst EXTENDED_DATA_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Data': dataParser,\n    'SchemaData': schemaDataParser\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction extendedDataParser(node, objectStack) {\n  parseNode(EXTENDED_DATA_PARSERS, node, objectStack);\n}\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction regionParser(node, objectStack) {\n  parseNode(REGION_PARSERS, node, objectStack);\n}\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst PAIR_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Style': makeObjectPropertySetter(readStyle),\n    'key': makeObjectPropertySetter(readString),\n    'styleUrl': makeObjectPropertySetter(readURI)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction pairDataParser(node, objectStack) {\n  const pairObject = pushParseAndPop(\n    {}, PAIR_PARSERS, node, objectStack);\n  if (!pairObject) {\n    return;\n  }\n  const key = /** @type {string|undefined} */\n      (pairObject['key']);\n  if (key && key == 'normal') {\n    const styleUrl = /** @type {string|undefined} */\n        (pairObject['styleUrl']);\n    if (styleUrl) {\n      objectStack[objectStack.length - 1] = styleUrl;\n    }\n    const style = /** @type {Style} */\n        (pairObject['Style']);\n    if (style) {\n      objectStack[objectStack.length - 1] = style;\n    }\n  }\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction placemarkStyleMapParser(node, objectStack) {\n  const styleMapValue = readStyleMapValue(node, objectStack);\n  if (!styleMapValue) {\n    return;\n  }\n  const placemarkObject = objectStack[objectStack.length - 1];\n  if (Array.isArray(styleMapValue)) {\n    placemarkObject['Style'] = styleMapValue;\n  } else if (typeof styleMapValue === 'string') {\n    placemarkObject['styleUrl'] = styleMapValue;\n  } else {\n    assert(false, 38); // `styleMapValue` has an unknown type\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst SCHEMA_DATA_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'SimpleData': simpleDataParser\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction schemaDataParser(node, objectStack) {\n  parseNode(SCHEMA_DATA_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction simpleDataParser(node, objectStack) {\n  const name = node.getAttribute('name');\n  if (name !== null) {\n    const data = readString(node);\n    const featureObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n    featureObject[name] = data;\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst LAT_LON_ALT_BOX_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'altitudeMode': makeObjectPropertySetter(readString),\n    'minAltitude': makeObjectPropertySetter(readDecimal),\n    'maxAltitude': makeObjectPropertySetter(readDecimal),\n    'north': makeObjectPropertySetter(readDecimal),\n    'south': makeObjectPropertySetter(readDecimal),\n    'east': makeObjectPropertySetter(readDecimal),\n    'west': makeObjectPropertySetter(readDecimal)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction latLonAltBoxParser(node, objectStack) {\n  const object = pushParseAndPop({}, LAT_LON_ALT_BOX_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const regionObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  const extent = [\n    parseFloat(object['west']),\n    parseFloat(object['south']),\n    parseFloat(object['east']),\n    parseFloat(object['north'])\n  ];\n  regionObject['extent'] = extent;\n  regionObject['altitudeMode'] = object['altitudeMode'];\n  regionObject['minAltitude'] = parseFloat(object['minAltitude']);\n  regionObject['maxAltitude'] = parseFloat(object['maxAltitude']);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst LOD_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'minLodPixels': makeObjectPropertySetter(readDecimal),\n    'maxLodPixels': makeObjectPropertySetter(readDecimal),\n    'minFadeExtent': makeObjectPropertySetter(readDecimal),\n    'maxFadeExtent': makeObjectPropertySetter(readDecimal)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction lodParser(node, objectStack) {\n  const object = pushParseAndPop({}, LOD_PARSERS, node, objectStack);\n  if (!object) {\n    return;\n  }\n  const lodObject = /** @type {Object} */ (objectStack[objectStack.length - 1]);\n  lodObject['minLodPixels'] = parseFloat(object['minLodPixels']);\n  lodObject['maxLodPixels'] = parseFloat(object['maxLodPixels']);\n  lodObject['minFadeExtent'] = parseFloat(object['minFadeExtent']);\n  lodObject['maxFadeExtent'] = parseFloat(object['maxFadeExtent']);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst INNER_BOUNDARY_IS_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LinearRing': makeReplacer(readFlatLinearRing)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction innerBoundaryIsParser(node, objectStack) {\n  /** @type {Array<number>|undefined} */\n  const flatLinearRing = pushParseAndPop(undefined,\n    INNER_BOUNDARY_IS_PARSERS, node, objectStack);\n  if (flatLinearRing) {\n    const flatLinearRings = /** @type {Array<Array<number>>} */\n        (objectStack[objectStack.length - 1]);\n    flatLinearRings.push(flatLinearRing);\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Parser>>}\n */\nconst OUTER_BOUNDARY_IS_PARSERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LinearRing': makeReplacer(readFlatLinearRing)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction outerBoundaryIsParser(node, objectStack) {\n  /** @type {Array<number>|undefined} */\n  const flatLinearRing = pushParseAndPop(undefined,\n    OUTER_BOUNDARY_IS_PARSERS, node, objectStack);\n  if (flatLinearRing) {\n    const flatLinearRings = /** @type {Array<Array<number>>} */\n        (objectStack[objectStack.length - 1]);\n    flatLinearRings[0] = flatLinearRing;\n  }\n}\n\n\n/**\n * @param {Element} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction linkParser(node, objectStack) {\n  parseNode(LINK_PARSERS, node, objectStack);\n}\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction whenParser(node, objectStack) {\n  const gxTrackObject = /** @type {GxTrackObject} */\n      (objectStack[objectStack.length - 1]);\n  const whens = gxTrackObject.whens;\n  const s = getAllTextContent(node, false);\n  const when = Date.parse(s);\n  whens.push(isNaN(when) ? 0 : when);\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the color to.\n * @param {import(\"../color.js\").Color|string} color Color.\n */\nfunction writeColorTextNode(node, color) {\n  const rgba = asArray(color);\n  const opacity = (rgba.length == 4) ? rgba[3] : 1;\n  /** @type {Array<string|number>} */\n  const abgr = [opacity * 255, rgba[2], rgba[1], rgba[0]];\n  for (let i = 0; i < 4; ++i) {\n    const hex = Math.floor(/** @type {number} */ (abgr[i])).toString(16);\n    abgr[i] = (hex.length == 1) ? '0' + hex : hex;\n  }\n  writeStringTextNode(node, abgr.join(''));\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the coordinates to.\n * @param {Array<number>} coordinates Coordinates.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeCoordinatesTextNode(node, coordinates, objectStack) {\n  const context = objectStack[objectStack.length - 1];\n\n  const layout = context['layout'];\n  const stride = context['stride'];\n\n  let dimension;\n  if (layout == GeometryLayout.XY ||\n      layout == GeometryLayout.XYM) {\n    dimension = 2;\n  } else if (layout == GeometryLayout.XYZ ||\n      layout == GeometryLayout.XYZM) {\n    dimension = 3;\n  } else {\n    assert(false, 34); // Invalid geometry layout\n  }\n\n  const ii = coordinates.length;\n  let text = '';\n  if (ii > 0) {\n    text += coordinates[0];\n    for (let d = 1; d < dimension; ++d) {\n      text += ',' + coordinates[d];\n    }\n    for (let i = stride; i < ii; i += stride) {\n      text += ' ' + coordinates[i];\n      for (let d = 1; d < dimension; ++d) {\n        text += ',' + coordinates[i + d];\n      }\n    }\n  }\n  writeStringTextNode(node, text);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst EXTENDEDDATA_NODE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Data': makeChildAppender(writeDataNode),\n    'value': makeChildAppender(writeDataNodeValue),\n    'displayName': makeChildAppender(writeDataNodeName)\n  });\n\n\n/**\n * @param {Element} node Node.\n * @param {{name: *, value: *}} pair Name value pair.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeDataNode(node, pair, objectStack) {\n  node.setAttribute('name', pair.name);\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  const value = pair.value;\n\n  if (typeof value == 'object') {\n    if (value !== null && value.displayName) {\n      pushSerializeAndPop(context, EXTENDEDDATA_NODE_SERIALIZERS,\n        OBJECT_PROPERTY_NODE_FACTORY, [value.displayName], objectStack, ['displayName']);\n    }\n\n    if (value !== null && value.value) {\n      pushSerializeAndPop(context, EXTENDEDDATA_NODE_SERIALIZERS,\n        OBJECT_PROPERTY_NODE_FACTORY, [value.value], objectStack, ['value']);\n    }\n  } else {\n    pushSerializeAndPop(context, EXTENDEDDATA_NODE_SERIALIZERS,\n      OBJECT_PROPERTY_NODE_FACTORY, [value], objectStack, ['value']);\n  }\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the name to.\n * @param {string} name DisplayName.\n */\nfunction writeDataNodeName(node, name) {\n  writeCDATASection(node, name);\n}\n\n\n/**\n * @param {Node} node Node to append a CDATA Section with the value to.\n * @param {string} value Value.\n */\nfunction writeDataNodeValue(node, value) {\n  writeStringTextNode(node, value);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst DOCUMENT_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Placemark': makeChildAppender(writePlacemark)\n  });\n\n\n/**\n * @const\n * @param {*} value Value.\n * @param {Array<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n */\nconst DOCUMENT_NODE_FACTORY = function(value, objectStack, opt_nodeName) {\n  const parentNode = objectStack[objectStack.length - 1].node;\n  return createElementNS(parentNode.namespaceURI, 'Placemark');\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Array<Feature>} features Features.\n * @param {Array<*>} objectStack Object stack.\n * @this {KML}\n */\nfunction writeDocument(node, features, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  pushSerializeAndPop(context, DOCUMENT_SERIALIZERS,\n    DOCUMENT_NODE_FACTORY, features, objectStack, undefined,\n    this);\n}\n\n\n/**\n * A factory for creating Data nodes.\n * @const\n * @type {function(*, Array<*>): (Node|undefined)}\n */\nconst DATA_NODE_FACTORY = makeSimpleNodeFactory('Data');\n\n\n/**\n * @param {Node} node Node.\n * @param {{names: Array<string>, values: (Array<*>)}} namesAndValues Names and values.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeExtendedData(node, namesAndValues, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  const names = namesAndValues.names;\n  const values = namesAndValues.values;\n  const length = names.length;\n\n  for (let i = 0; i < length; i++) {\n    pushSerializeAndPop(context, EXTENDEDDATA_NODE_SERIALIZERS,\n      DATA_NODE_FACTORY, [{name: names[i], value: values[i]}], objectStack);\n  }\n}\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst ICON_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'href'\n  ],\n  makeStructureNS(GX_NAMESPACE_URIS, [\n    'x', 'y', 'w', 'h'\n  ]));\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst ICON_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'href': makeChildAppender(writeStringTextNode)\n  }, makeStructureNS(\n    GX_NAMESPACE_URIS, {\n      'x': makeChildAppender(writeDecimalTextNode),\n      'y': makeChildAppender(writeDecimalTextNode),\n      'w': makeChildAppender(writeDecimalTextNode),\n      'h': makeChildAppender(writeDecimalTextNode)\n    }));\n\n\n/**\n * @const\n * @param {*} value Value.\n * @param {Array<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n */\nconst GX_NODE_FACTORY = function(value, objectStack, opt_nodeName) {\n  return createElementNS(GX_NAMESPACE_URIS[0],\n    'gx:' + opt_nodeName);\n};\n\n\n/**\n * @param {Node} node Node.\n * @param {Object} icon Icon object.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeIcon(node, icon, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  const parentNode = objectStack[objectStack.length - 1].node;\n  let orderedKeys = ICON_SEQUENCE[parentNode.namespaceURI];\n  let values = makeSequence(icon, orderedKeys);\n  pushSerializeAndPop(context,\n    ICON_SERIALIZERS, OBJECT_PROPERTY_NODE_FACTORY,\n    values, objectStack, orderedKeys);\n  orderedKeys =\n      ICON_SEQUENCE[GX_NAMESPACE_URIS[0]];\n  values = makeSequence(icon, orderedKeys);\n  pushSerializeAndPop(context, ICON_SERIALIZERS,\n    GX_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst ICON_STYLE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'scale', 'heading', 'Icon', 'hotSpot'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst ICON_STYLE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'Icon': makeChildAppender(writeIcon),\n    'heading': makeChildAppender(writeDecimalTextNode),\n    'hotSpot': makeChildAppender(writeVec2),\n    'scale': makeChildAppender(writeScaleTextNode)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {import(\"../style/Icon.js\").default} style Icon style.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeIconStyle(node, style, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  const properties = {};\n  const src = style.getSrc();\n  const size = style.getSize();\n  const iconImageSize = style.getImageSize();\n  const iconProperties = {\n    'href': src\n  };\n\n  if (size) {\n    iconProperties['w'] = size[0];\n    iconProperties['h'] = size[1];\n    const anchor = style.getAnchor(); // top-left\n    const origin = style.getOrigin(); // top-left\n\n    if (origin && iconImageSize && origin[0] !== 0 && origin[1] !== size[1]) {\n      iconProperties['x'] = origin[0];\n      iconProperties['y'] = iconImageSize[1] - (origin[1] + size[1]);\n    }\n\n    if (anchor && (anchor[0] !== size[0] / 2 || anchor[1] !== size[1] / 2)) {\n      const /** @type {Vec2} */ hotSpot = {\n        x: anchor[0],\n        xunits: IconAnchorUnits.PIXELS,\n        y: size[1] - anchor[1],\n        yunits: IconAnchorUnits.PIXELS\n      };\n      properties['hotSpot'] = hotSpot;\n    }\n  }\n\n  properties['Icon'] = iconProperties;\n\n  const scale = style.getScale();\n  if (scale !== 1) {\n    properties['scale'] = scale;\n  }\n\n  const rotation = style.getRotation();\n  if (rotation !== 0) {\n    properties['heading'] = rotation; // 0-360\n  }\n\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = ICON_STYLE_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, ICON_STYLE_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst LABEL_STYLE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'color', 'scale'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst LABEL_STYLE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeChildAppender(writeColorTextNode),\n    'scale': makeChildAppender(writeScaleTextNode)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Text} style style.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeLabelStyle(node, style, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  const properties = {};\n  const fill = style.getFill();\n  if (fill) {\n    properties['color'] = fill.getColor();\n  }\n  const scale = style.getScale();\n  if (scale && scale !== 1) {\n    properties['scale'] = scale;\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys =\n      LABEL_STYLE_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, LABEL_STYLE_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst LINE_STYLE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'color', 'width'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst LINE_STYLE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeChildAppender(writeColorTextNode),\n    'width': makeChildAppender(writeDecimalTextNode)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Stroke} style style.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeLineStyle(node, style, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  const properties = {\n    'color': style.getColor(),\n    'width': style.getWidth()\n  };\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = LINE_STYLE_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, LINE_STYLE_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @const\n * @type {Object<string, string>}\n */\nconst GEOMETRY_TYPE_TO_NODENAME = {\n  'Point': 'Point',\n  'LineString': 'LineString',\n  'LinearRing': 'LinearRing',\n  'Polygon': 'Polygon',\n  'MultiPoint': 'MultiGeometry',\n  'MultiLineString': 'MultiGeometry',\n  'MultiPolygon': 'MultiGeometry',\n  'GeometryCollection': 'MultiGeometry'\n};\n\n\n/**\n * @const\n * @param {*} value Value.\n * @param {Array<*>} objectStack Object stack.\n * @param {string=} opt_nodeName Node name.\n * @return {Node|undefined} Node.\n */\nconst GEOMETRY_NODE_FACTORY = function(value, objectStack, opt_nodeName) {\n  if (value) {\n    const parentNode = objectStack[objectStack.length - 1].node;\n    return createElementNS(parentNode.namespaceURI,\n      GEOMETRY_TYPE_TO_NODENAME[/** @type {import(\"../geom/Geometry.js\").default} */ (value).getType()]);\n  }\n};\n\n\n/**\n * A factory for creating Point nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst POINT_NODE_FACTORY = makeSimpleNodeFactory('Point');\n\n\n/**\n * A factory for creating LineString nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst LINE_STRING_NODE_FACTORY = makeSimpleNodeFactory('LineString');\n\n\n/**\n * A factory for creating LinearRing nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst LINEAR_RING_NODE_FACTORY = makeSimpleNodeFactory('LinearRing');\n\n\n/**\n * A factory for creating Polygon nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst POLYGON_NODE_FACTORY = makeSimpleNodeFactory('Polygon');\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst MULTI_GEOMETRY_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LineString': makeChildAppender(\n      writePrimitiveGeometry),\n    'Point': makeChildAppender(\n      writePrimitiveGeometry),\n    'Polygon': makeChildAppender(writePolygon),\n    'GeometryCollection': makeChildAppender(\n      writeMultiGeometry)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeMultiGeometry(node, geometry, objectStack) {\n  /** @type {import(\"../xml.js\").NodeStackItem} */\n  const context = {node: node};\n  const type = geometry.getType();\n  /** @type {Array<import(\"../geom/Geometry.js\").default>} */\n  let geometries;\n  /** @type {function(*, Array<*>, string=): (Node|undefined)} */\n  let factory;\n  if (type == GeometryType.GEOMETRY_COLLECTION) {\n    geometries = /** @type {GeometryCollection} */ (geometry).getGeometries();\n    factory = GEOMETRY_NODE_FACTORY;\n  } else if (type == GeometryType.MULTI_POINT) {\n    geometries = /** @type {MultiPoint} */ (geometry).getPoints();\n    factory = POINT_NODE_FACTORY;\n  } else if (type == GeometryType.MULTI_LINE_STRING) {\n    geometries =\n        (/** @type {MultiLineString} */ (geometry)).getLineStrings();\n    factory = LINE_STRING_NODE_FACTORY;\n  } else if (type == GeometryType.MULTI_POLYGON) {\n    geometries =\n        (/** @type {MultiPolygon} */ (geometry)).getPolygons();\n    factory = POLYGON_NODE_FACTORY;\n  } else {\n    assert(false, 39); // Unknown geometry type\n  }\n  pushSerializeAndPop(context,\n    MULTI_GEOMETRY_SERIALIZERS, factory,\n    geometries, objectStack);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst BOUNDARY_IS_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'LinearRing': makeChildAppender(\n      writePrimitiveGeometry)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {import(\"../geom/LinearRing.js\").default} linearRing Linear ring.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeBoundaryIs(node, linearRing, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  pushSerializeAndPop(context,\n    BOUNDARY_IS_SERIALIZERS,\n    LINEAR_RING_NODE_FACTORY, [linearRing], objectStack);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst PLACEMARK_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'ExtendedData': makeChildAppender(writeExtendedData),\n    'MultiGeometry': makeChildAppender(writeMultiGeometry),\n    'LineString': makeChildAppender(writePrimitiveGeometry),\n    'LinearRing': makeChildAppender(writePrimitiveGeometry),\n    'Point': makeChildAppender(writePrimitiveGeometry),\n    'Polygon': makeChildAppender(writePolygon),\n    'Style': makeChildAppender(writeStyle),\n    'address': makeChildAppender(writeStringTextNode),\n    'description': makeChildAppender(writeStringTextNode),\n    'name': makeChildAppender(writeStringTextNode),\n    'open': makeChildAppender(writeBooleanTextNode),\n    'phoneNumber': makeChildAppender(writeStringTextNode),\n    'styleUrl': makeChildAppender(writeStringTextNode),\n    'visibility': makeChildAppender(writeBooleanTextNode)\n  });\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst PLACEMARK_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'name', 'open', 'visibility', 'address', 'phoneNumber', 'description',\n    'styleUrl', 'Style'\n  ]);\n\n\n/**\n * A factory for creating ExtendedData nodes.\n * @const\n * @type {function(*, Array<*>): (Node|undefined)}\n */\nconst EXTENDEDDATA_NODE_FACTORY = makeSimpleNodeFactory('ExtendedData');\n\n\n/**\n * FIXME currently we do serialize arbitrary/custom feature properties\n * (ExtendedData).\n * @param {Element} node Node.\n * @param {Feature} feature Feature.\n * @param {Array<*>} objectStack Object stack.\n * @this {KML}\n */\nfunction writePlacemark(node, feature, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n\n  // set id\n  if (feature.getId()) {\n    node.setAttribute('id', /** @type {string} */ (feature.getId()));\n  }\n\n  // serialize properties (properties unknown to KML are not serialized)\n  const properties = feature.getProperties();\n\n  // don't export these to ExtendedData\n  const filter = {'address': 1, 'description': 1, 'name': 1, 'open': 1,\n    'phoneNumber': 1, 'styleUrl': 1, 'visibility': 1};\n  filter[feature.getGeometryName()] = 1;\n  const keys = Object.keys(properties || {}).sort().filter(function(v) {\n    return !filter[v];\n  });\n\n  if (keys.length > 0) {\n    const sequence = makeSequence(properties, keys);\n    const namesAndValues = {names: keys, values: sequence};\n    pushSerializeAndPop(context, PLACEMARK_SERIALIZERS,\n      EXTENDEDDATA_NODE_FACTORY, [namesAndValues], objectStack);\n  }\n\n  const styleFunction = feature.getStyleFunction();\n  if (styleFunction) {\n    // FIXME the styles returned by the style function are supposed to be\n    // resolution-independent here\n    const styles = styleFunction(feature, 0);\n    if (styles) {\n      const style = Array.isArray(styles) ? styles[0] : styles;\n      if (this.writeStyles_) {\n        properties['Style'] = style;\n      }\n      const textStyle = style.getText();\n      if (textStyle) {\n        properties['name'] = textStyle.getText();\n      }\n    }\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = PLACEMARK_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, PLACEMARK_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n\n  // serialize geometry\n  const options = /** @type {import(\"./Feature.js\").WriteOptions} */ (objectStack[0]);\n  let geometry = feature.getGeometry();\n  if (geometry) {\n    geometry = /** @type {import(\"../geom/Geometry.js\").default} */ (transformWithOptions(geometry, true, options));\n  }\n  pushSerializeAndPop(context, PLACEMARK_SERIALIZERS,\n    GEOMETRY_NODE_FACTORY, [geometry], objectStack);\n}\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst PRIMITIVE_GEOMETRY_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'extrude', 'tessellate', 'altitudeMode', 'coordinates'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst PRIMITIVE_GEOMETRY_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'extrude': makeChildAppender(writeBooleanTextNode),\n    'tessellate': makeChildAppender(writeBooleanTextNode),\n    'altitudeMode': makeChildAppender(writeStringTextNode),\n    'coordinates': makeChildAppender(writeCoordinatesTextNode)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {import(\"../geom/SimpleGeometry.js\").default} geometry Geometry.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writePrimitiveGeometry(node, geometry, objectStack) {\n  const flatCoordinates = geometry.getFlatCoordinates();\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  context['layout'] = geometry.getLayout();\n  context['stride'] = geometry.getStride();\n\n  // serialize properties (properties unknown to KML are not serialized)\n  const properties = geometry.getProperties();\n  properties.coordinates = flatCoordinates;\n\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = PRIMITIVE_GEOMETRY_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, PRIMITIVE_GEOMETRY_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst POLYGON_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'outerBoundaryIs': makeChildAppender(\n      writeBoundaryIs),\n    'innerBoundaryIs': makeChildAppender(\n      writeBoundaryIs)\n  });\n\n\n/**\n * A factory for creating innerBoundaryIs nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst INNER_BOUNDARY_NODE_FACTORY = makeSimpleNodeFactory('innerBoundaryIs');\n\n\n/**\n * A factory for creating outerBoundaryIs nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst OUTER_BOUNDARY_NODE_FACTORY = makeSimpleNodeFactory('outerBoundaryIs');\n\n\n/**\n * @param {Node} node Node.\n * @param {Polygon} polygon Polygon.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writePolygon(node, polygon, objectStack) {\n  const linearRings = polygon.getLinearRings();\n  const outerRing = linearRings.shift();\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  // inner rings\n  pushSerializeAndPop(context,\n    POLYGON_SERIALIZERS,\n    INNER_BOUNDARY_NODE_FACTORY,\n    linearRings, objectStack);\n  // outer ring\n  pushSerializeAndPop(context,\n    POLYGON_SERIALIZERS,\n    OUTER_BOUNDARY_NODE_FACTORY,\n    [outerRing], objectStack);\n}\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst POLY_STYLE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'color': makeChildAppender(writeColorTextNode)\n  });\n\n\n/**\n * A factory for creating coordinates nodes.\n * @const\n * @type {function(*, Array<*>, string=): (Node|undefined)}\n */\nconst COLOR_NODE_FACTORY = makeSimpleNodeFactory('color');\n\n\n/**\n * @param {Node} node Node.\n * @param {Fill} style Style.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writePolyStyle(node, style, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  pushSerializeAndPop(context, POLY_STYLE_SERIALIZERS,\n    COLOR_NODE_FACTORY, [style.getColor()], objectStack);\n}\n\n\n/**\n * @param {Node} node Node to append a TextNode with the scale to.\n * @param {number|undefined} scale Scale.\n */\nfunction writeScaleTextNode(node, scale) {\n  // the Math is to remove any excess decimals created by float arithmetic\n  writeDecimalTextNode(node,\n    Math.round(scale * 1e6) / 1e6);\n}\n\n\n/**\n * @const\n * @type {Object<string, Array<string>>}\n */\nconst STYLE_SEQUENCE = makeStructureNS(\n  NAMESPACE_URIS, [\n    'IconStyle', 'LabelStyle', 'LineStyle', 'PolyStyle'\n  ]);\n\n\n/**\n * @const\n * @type {Object<string, Object<string, import(\"../xml.js\").Serializer>>}\n */\nconst STYLE_SERIALIZERS = makeStructureNS(\n  NAMESPACE_URIS, {\n    'IconStyle': makeChildAppender(writeIconStyle),\n    'LabelStyle': makeChildAppender(writeLabelStyle),\n    'LineStyle': makeChildAppender(writeLineStyle),\n    'PolyStyle': makeChildAppender(writePolyStyle)\n  });\n\n\n/**\n * @param {Node} node Node.\n * @param {Style} style Style.\n * @param {Array<*>} objectStack Object stack.\n */\nfunction writeStyle(node, style, objectStack) {\n  const /** @type {import(\"../xml.js\").NodeStackItem} */ context = {node: node};\n  const properties = {};\n  const fillStyle = style.getFill();\n  const strokeStyle = style.getStroke();\n  const imageStyle = style.getImage();\n  const textStyle = style.getText();\n  if (imageStyle && typeof /** @type {?} */ (imageStyle).getSrc === 'function') {\n    properties['IconStyle'] = imageStyle;\n  }\n  if (textStyle) {\n    properties['LabelStyle'] = textStyle;\n  }\n  if (strokeStyle) {\n    properties['LineStyle'] = strokeStyle;\n  }\n  if (fillStyle) {\n    properties['PolyStyle'] = fillStyle;\n  }\n  const parentNode = objectStack[objectStack.length - 1].node;\n  const orderedKeys = STYLE_SEQUENCE[parentNode.namespaceURI];\n  const values = makeSequence(properties, orderedKeys);\n  pushSerializeAndPop(context, STYLE_SERIALIZERS,\n    OBJECT_PROPERTY_NODE_FACTORY, values, objectStack, orderedKeys);\n}\n\n\n/**\n * @param {Element} node Node to append a TextNode with the Vec2 to.\n * @param {Vec2} vec2 Vec2.\n */\nfunction writeVec2(node, vec2) {\n  node.setAttribute('x', String(vec2.x));\n  node.setAttribute('y', String(vec2.y));\n  node.setAttribute('xunits', vec2.xunits);\n  node.setAttribute('yunits', vec2.yunits);\n}\n\n\nexport default KML;\n","/**\n * @module ol/format/TopoJSON\n */\nimport Feature from '../Feature.js';\nimport {transformWithOptions} from './Feature.js';\nimport JSONFeature from './JSONFeature.js';\nimport LineString from '../geom/LineString.js';\nimport MultiLineString from '../geom/MultiLineString.js';\nimport MultiPoint from '../geom/MultiPoint.js';\nimport MultiPolygon from '../geom/MultiPolygon.js';\nimport Point from '../geom/Point.js';\nimport Polygon from '../geom/Polygon.js';\nimport {get as getProjection} from '../proj.js';\n\n/**\n * @typedef {import(\"topojson-specification\").Topology} TopoJSONTopology\n * @typedef {import(\"topojson-specification\").GeometryCollection} TopoJSONGeometryCollection\n * @typedef {import(\"topojson-specification\").GeometryObject} TopoJSONGeometry\n * @typedef {import(\"topojson-specification\").Point} TopoJSONPoint\n * @typedef {import(\"topojson-specification\").MultiPoint} TopoJSONMultiPoint\n * @typedef {import(\"topojson-specification\").LineString} TopoJSONLineString\n * @typedef {import(\"topojson-specification\").MultiLineString} TopoJSONMultiLineString\n * @typedef {import(\"topojson-specification\").Polygon} TopoJSONPolygon\n * @typedef {import(\"topojson-specification\").MultiPolygon} TopoJSONMultiPolygon\n */\n\n/**\n * @typedef {Object} Options\n * @property {import(\"../proj.js\").ProjectionLike} [dataProjection='EPSG:4326'] Default data projection.\n * @property {string} [layerName] Set the name of the TopoJSON topology\n * `objects`'s children as feature property with the specified name. This means\n * that when set to `'layer'`, a topology like\n * ```\n * {\n *   \"type\": \"Topology\",\n *   \"objects\": {\n *     \"example\": {\n *       \"type\": \"GeometryCollection\",\n *       \"geometries\": []\n *     }\n *   }\n * }\n * ```\n * will result in features that have a property `'layer'` set to `'example'`.\n * When not set, no property will be added to features.\n * @property {Array<string>} [layers] Names of the TopoJSON topology's\n * `objects`'s children to read features from.  If not provided, features will\n * be read from all children.\n */\n\n\n/**\n * @classdesc\n * Feature format for reading data in the TopoJSON format.\n *\n * @api\n */\nclass TopoJSON extends JSONFeature {\n\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    super();\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n     * @private\n     * @type {string|undefined}\n     */\n    this.layerName_ = options.layerName;\n\n    /**\n     * @private\n     * @type {Array<string>}\n     */\n    this.layers_ = options.layers ? options.layers : null;\n\n    /**\n     * @inheritDoc\n     */\n    this.dataProjection = getProjection(\n      options.dataProjection ?\n        options.dataProjection : 'EPSG:4326');\n\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeaturesFromObject(object, opt_options) {\n    if (object.type == 'Topology') {\n      const topoJSONTopology = /** @type {TopoJSONTopology} */ (object);\n      let transform, scale = null, translate = null;\n      if (topoJSONTopology['transform']) {\n        transform = topoJSONTopology['transform'];\n        scale = transform['scale'];\n        translate = transform['translate'];\n      }\n      const arcs = topoJSONTopology['arcs'];\n      if (transform) {\n        transformArcs(arcs, scale, translate);\n      }\n      /** @type {Array<Feature>} */\n      const features = [];\n      const topoJSONFeatures = topoJSONTopology['objects'];\n      const property = this.layerName_;\n      let feature;\n      for (const objectName in topoJSONFeatures) {\n        if (this.layers_ && this.layers_.indexOf(objectName) == -1) {\n          continue;\n        }\n        if (topoJSONFeatures[objectName].type === 'GeometryCollection') {\n          feature = /** @type {TopoJSONGeometryCollection} */ (topoJSONFeatures[objectName]);\n          features.push.apply(features, readFeaturesFromGeometryCollection(\n            feature, arcs, scale, translate, property, objectName, opt_options));\n        } else {\n          feature = /** @type {TopoJSONGeometry} */ (topoJSONFeatures[objectName]);\n          features.push(readFeatureFromGeometry(\n            feature, arcs, scale, translate, property, objectName, opt_options));\n        }\n      }\n      return features;\n    } else {\n      return [];\n    }\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readProjectionFromObject(object) {\n    return this.dataProjection;\n  }\n\n}\n\n\n/**\n * @const\n * @type {Object<string, function(TopoJSONGeometry, Array, ...Array=): import(\"../geom/Geometry.js\").default>}\n */\nconst GEOMETRY_READERS = {\n  'Point': readPointGeometry,\n  'LineString': readLineStringGeometry,\n  'Polygon': readPolygonGeometry,\n  'MultiPoint': readMultiPointGeometry,\n  'MultiLineString': readMultiLineStringGeometry,\n  'MultiPolygon': readMultiPolygonGeometry\n};\n\n\n/**\n * Concatenate arcs into a coordinate array.\n * @param {Array<number>} indices Indices of arcs to concatenate.  Negative\n *     values indicate arcs need to be reversed.\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs (already\n *     transformed).\n * @return {Array<import(\"../coordinate.js\").Coordinate>} Coordinates array.\n */\nfunction concatenateArcs(indices, arcs) {\n  /** @type {Array<import(\"../coordinate.js\").Coordinate>} */\n  const coordinates = [];\n  let index, arc;\n  for (let i = 0, ii = indices.length; i < ii; ++i) {\n    index = indices[i];\n    if (i > 0) {\n      // splicing together arcs, discard last point\n      coordinates.pop();\n    }\n    if (index >= 0) {\n      // forward arc\n      arc = arcs[index];\n    } else {\n      // reverse arc\n      arc = arcs[~index].slice().reverse();\n    }\n    coordinates.push.apply(coordinates, arc);\n  }\n  // provide fresh copies of coordinate arrays\n  for (let j = 0, jj = coordinates.length; j < jj; ++j) {\n    coordinates[j] = coordinates[j].slice();\n  }\n  return coordinates;\n}\n\n\n/**\n * Create a point from a TopoJSON geometry object.\n *\n * @param {TopoJSONPoint} object TopoJSON object.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n * @return {Point} Geometry.\n */\nfunction readPointGeometry(object, scale, translate) {\n  const coordinates = object['coordinates'];\n  if (scale && translate) {\n    transformVertex(coordinates, scale, translate);\n  }\n  return new Point(coordinates);\n}\n\n\n/**\n * Create a multi-point from a TopoJSON geometry object.\n *\n * @param {TopoJSONMultiPoint} object TopoJSON object.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n * @return {MultiPoint} Geometry.\n */\nfunction readMultiPointGeometry(object, scale, translate) {\n  const coordinates = object['coordinates'];\n  if (scale && translate) {\n    for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n      transformVertex(coordinates[i], scale, translate);\n    }\n  }\n  return new MultiPoint(coordinates);\n}\n\n\n/**\n * Create a linestring from a TopoJSON geometry object.\n *\n * @param {TopoJSONLineString} object TopoJSON object.\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs.\n * @return {LineString} Geometry.\n */\nfunction readLineStringGeometry(object, arcs) {\n  const coordinates = concatenateArcs(object['arcs'], arcs);\n  return new LineString(coordinates);\n}\n\n\n/**\n * Create a multi-linestring from a TopoJSON geometry object.\n *\n * @param {TopoJSONMultiLineString} object TopoJSON object.\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs.\n * @return {MultiLineString} Geometry.\n */\nfunction readMultiLineStringGeometry(object, arcs) {\n  const coordinates = [];\n  for (let i = 0, ii = object['arcs'].length; i < ii; ++i) {\n    coordinates[i] = concatenateArcs(object['arcs'][i], arcs);\n  }\n  return new MultiLineString(coordinates);\n}\n\n\n/**\n * Create a polygon from a TopoJSON geometry object.\n *\n * @param {TopoJSONPolygon} object TopoJSON object.\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs.\n * @return {Polygon} Geometry.\n */\nfunction readPolygonGeometry(object, arcs) {\n  const coordinates = [];\n  for (let i = 0, ii = object['arcs'].length; i < ii; ++i) {\n    coordinates[i] = concatenateArcs(object['arcs'][i], arcs);\n  }\n  return new Polygon(coordinates);\n}\n\n\n/**\n * Create a multi-polygon from a TopoJSON geometry object.\n *\n * @param {TopoJSONMultiPolygon} object TopoJSON object.\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs.\n * @return {MultiPolygon} Geometry.\n */\nfunction readMultiPolygonGeometry(object, arcs) {\n  const coordinates = [];\n  for (let i = 0, ii = object['arcs'].length; i < ii; ++i) {\n    // for each polygon\n    const polyArray = object['arcs'][i];\n    const ringCoords = [];\n    for (let j = 0, jj = polyArray.length; j < jj; ++j) {\n      // for each ring\n      ringCoords[j] = concatenateArcs(polyArray[j], arcs);\n    }\n    coordinates[i] = ringCoords;\n  }\n  return new MultiPolygon(coordinates);\n}\n\n\n/**\n * Create features from a TopoJSON GeometryCollection object.\n *\n * @param {TopoJSONGeometryCollection} collection TopoJSON Geometry\n *     object.\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n * @param {string|undefined} property Property to set the `GeometryCollection`'s parent\n *     object to.\n * @param {string} name Name of the `Topology`'s child object.\n * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n * @return {Array<Feature>} Array of features.\n */\nfunction readFeaturesFromGeometryCollection(collection, arcs, scale, translate, property, name, opt_options) {\n  const geometries = collection['geometries'];\n  const features = [];\n  for (let i = 0, ii = geometries.length; i < ii; ++i) {\n    features[i] = readFeatureFromGeometry(\n      geometries[i], arcs, scale, translate, property, name, opt_options);\n  }\n  return features;\n}\n\n\n/**\n * Create a feature from a TopoJSON geometry object.\n *\n * @param {TopoJSONGeometry} object TopoJSON geometry object.\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n * @param {string|undefined} property Property to set the `GeometryCollection`'s parent\n *     object to.\n * @param {string} name Name of the `Topology`'s child object.\n * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n * @return {Feature} Feature.\n */\nfunction readFeatureFromGeometry(object, arcs, scale, translate, property, name, opt_options) {\n  let geometry;\n  const type = object.type;\n  const geometryReader = GEOMETRY_READERS[type];\n  if ((type === 'Point') || (type === 'MultiPoint')) {\n    geometry = geometryReader(object, scale, translate);\n  } else {\n    geometry = geometryReader(object, arcs);\n  }\n  const feature = new Feature();\n  feature.setGeometry(/** @type {import(\"../geom/Geometry.js\").default} */ (\n    transformWithOptions(geometry, false, opt_options)));\n  if (object.id !== undefined) {\n    feature.setId(object.id);\n  }\n  let properties = object.properties;\n  if (property) {\n    if (!properties) {\n      properties = {};\n    }\n    properties[property] = name;\n  }\n  if (properties) {\n    feature.setProperties(properties);\n  }\n  return feature;\n}\n\n\n/**\n * Apply a linear transform to array of arcs.  The provided array of arcs is\n * modified in place.\n *\n * @param {Array<Array<import(\"../coordinate.js\").Coordinate>>} arcs Array of arcs.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n */\nfunction transformArcs(arcs, scale, translate) {\n  for (let i = 0, ii = arcs.length; i < ii; ++i) {\n    transformArc(arcs[i], scale, translate);\n  }\n}\n\n\n/**\n * Apply a linear transform to an arc.  The provided arc is modified in place.\n *\n * @param {Array<import(\"../coordinate.js\").Coordinate>} arc Arc.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n */\nfunction transformArc(arc, scale, translate) {\n  let x = 0;\n  let y = 0;\n  for (let i = 0, ii = arc.length; i < ii; ++i) {\n    const vertex = arc[i];\n    x += vertex[0];\n    y += vertex[1];\n    vertex[0] = x;\n    vertex[1] = y;\n    transformVertex(vertex, scale, translate);\n  }\n}\n\n\n/**\n * Apply a linear transform to a vertex.  The provided vertex is modified in\n * place.\n *\n * @param {import(\"../coordinate.js\").Coordinate} vertex Vertex.\n * @param {Array<number>} scale Scale for each dimension.\n * @param {Array<number>} translate Translation for each dimension.\n */\nfunction transformVertex(vertex, scale, translate) {\n  vertex[0] = vertex[0] * scale[0] + translate[0];\n  vertex[1] = vertex[1] * scale[1] + translate[1];\n}\n\n\nexport default TopoJSON;\n","/**\n * @module ol/format/TextFeature\n */\nimport {abstract} from '../util.js';\nimport FeatureFormat from '../format/Feature.js';\nimport FormatType from '../format/FormatType.js';\n\n/**\n * @classdesc\n * Abstract base class; normally only used for creating subclasses and not\n * instantiated in apps.\n * Base class for text feature formats.\n *\n * @abstract\n */\nclass TextFeature extends FeatureFormat {\n  constructor() {\n    super();\n  }\n\n  /**\n   * @inheritDoc\n   */\n  getType() {\n    return FormatType.TEXT;\n  }\n\n  /**\n   * Read the feature from the source.\n   *\n   * @param {Document|Node|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @return {import(\"../Feature.js\").default} Feature.\n   * @api\n   */\n  readFeature(source, opt_options) {\n    return this.readFeatureFromText(getText(source), this.adaptOptions(opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {string} text Text.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @protected\n   * @return {import(\"../Feature.js\").default} Feature.\n   */\n  readFeatureFromText(text, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Read the features from the source.\n   *\n   * @param {Document|Node|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   * @api\n   */\n  readFeatures(source, opt_options) {\n    return this.readFeaturesFromText(getText(source), this.adaptOptions(opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {string} text Text.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @protected\n   * @return {Array<import(\"../Feature.js\").default>} Features.\n   */\n  readFeaturesFromText(text, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Read the geometry from the source.\n   *\n   * @param {Document|Node|Object|string} source Source.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   * @api\n   */\n  readGeometry(source, opt_options) {\n    return this.readGeometryFromText(getText(source), this.adaptOptions(opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {string} text Text.\n   * @param {import(\"./Feature.js\").ReadOptions=} opt_options Read options.\n   * @protected\n   * @return {import(\"../geom/Geometry.js\").default} Geometry.\n   */\n  readGeometryFromText(text, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Read the projection from the source.\n   *\n   * @param {Document|Node|Object|string} source Source.\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   * @api\n   */\n  readProjection(source) {\n    return this.readProjectionFromText(getText(source));\n  }\n\n  /**\n   * @param {string} text Text.\n   * @protected\n   * @return {import(\"../proj/Projection.js\").default} Projection.\n   */\n  readProjectionFromText(text) {\n    return this.dataProjection;\n  }\n\n  /**\n   * Encode a feature as a string.\n   *\n   * @param {import(\"../Feature.js\").default} feature Feature.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {string} Encoded feature.\n   * @api\n   */\n  writeFeature(feature, opt_options) {\n    return this.writeFeatureText(feature, this.adaptOptions(opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../Feature.js\").default} feature Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @protected\n   * @return {string} Text.\n   */\n  writeFeatureText(feature, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Encode an array of features as string.\n   *\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {string} Encoded features.\n   * @api\n   */\n  writeFeatures(features, opt_options) {\n    return this.writeFeaturesText(features, this.adaptOptions(opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {Array<import(\"../Feature.js\").default>} features Features.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @protected\n   * @return {string} Text.\n   */\n  writeFeaturesText(features, opt_options) {\n    return abstract();\n  }\n\n  /**\n   * Write a single geometry.\n   *\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @return {string} Geometry.\n   * @api\n   */\n  writeGeometry(geometry, opt_options) {\n    return this.writeGeometryText(geometry, this.adaptOptions(opt_options));\n  }\n\n  /**\n   * @abstract\n   * @param {import(\"../geom/Geometry.js\").default} geometry Geometry.\n   * @param {import(\"./Feature.js\").WriteOptions=} opt_options Write options.\n   * @protected\n   * @return {string} Text.\n   */\n  writeGeometryText(geometry, opt_options) {\n    return abstract();\n  }\n}\n\n\n/**\n * @param {Document|Node|Object|string} source Source.\n * @return {string} Text.\n */\nfunction getText(source) {\n  if (typeof source === 'string') {\n    return source;\n  } else {\n    return '';\n  }\n}\n\n\nexport default TextFeature;\n","/**\n * @module ol/format/IGC\n */\nimport Feature from '../Feature.js';\nimport {transformWithOptions} from './Feature.js';\nimport TextFeature from './TextFeature.js';\nimport GeometryLayout from '../geom/GeometryLayout.js';\nimport LineString from '../geom/LineString.js';\nimport {get as getProjection} from '../proj.js';\n\n/**\n * IGC altitude/z. One of 'barometric', 'gps', 'none'.\n * @enum {string}\n */\nconst IGCZ = {\n  BAROMETRIC: 'barometric',\n  GPS: 'gps',\n  NONE: 'none'\n};\n\n/**\n * @const\n * @type {RegExp}\n */\nconst B_RECORD_RE =\n    /^B(\\d{2})(\\d{2})(\\d{2})(\\d{2})(\\d{5})([NS])(\\d{3})(\\d{5})([EW])([AV])(\\d{5})(\\d{5})/;\n\n\n/**\n * @const\n * @type {RegExp}\n */\nconst H_RECORD_RE = /^H.([A-Z]{3}).*?:(.*)/;\n\n\n/**\n * @const\n * @type {RegExp}\n */\nconst HFDTE_RECORD_RE = /^HFDTE(\\d{2})(\\d{2})(\\d{2})/;\n\n\n/**\n * A regular expression matching the newline characters `\\r\\n`, `\\r` and `\\n`.\n *\n * @const\n * @type {RegExp}\n */\nconst NEWLINE_RE = /\\r\\n|\\r|\\n/;\n\n\n/**\n * @typedef {Object} Options\n * @property {IGCZ|string} [altitudeMode='none'] Altitude mode. Possible\n * values are `'barometric'`, `'gps'`, and `'none'`.\n */\n\n\n/**\n * @classdesc\n * Feature format for `*.igc` flight recording files.\n *\n * As IGC sources contain a single feature,\n * {@link module:ol/format/IGC~IGC#readFeatures} will return the feature in an\n * array\n *\n * @api\n */\nclass IGC extends TextFeature {\n\n  /**\n   * @param {Options=} opt_options Options.\n   */\n  constructor(opt_options) {\n    super();\n\n    const options = opt_options ? opt_options : {};\n\n    /**\n     * @inheritDoc\n     */\n    this.dataProjection = getProjection('EPSG:4326');\n\n    /**\n     * @private\n     * @type {IGCZ}\n     */\n    this.altitudeMode_ = options.altitudeMode ? options.altitudeMode : IGCZ.NONE;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeatureFromText(text, opt_options) {\n    const altitudeMode = this.altitudeMode_;\n    const lines = text.split(NEWLINE_RE);\n    /** @type {Object<string, string>} */\n    const properties = {};\n    const flatCoordinates = [];\n    let year = 2000;\n    let month = 0;\n    let day = 1;\n    let lastDateTime = -1;\n    let i, ii;\n    for (i = 0, ii = lines.length; i < ii; ++i) {\n      const line = lines[i];\n      let m;\n      if (line.charAt(0) == 'B') {\n        m = B_RECORD_RE.exec(line);\n        if (m) {\n          const hour = parseInt(m[1], 10);\n          const minute = parseInt(m[2], 10);\n          const second = parseInt(m[3], 10);\n          let y = parseInt(m[4], 10) + parseInt(m[5], 10) / 60000;\n          if (m[6] == 'S') {\n            y = -y;\n          }\n          let x = parseInt(m[7], 10) + parseInt(m[8], 10) / 60000;\n          if (m[9] == 'W') {\n            x = -x;\n          }\n          flatCoordinates.push(x, y);\n          if (altitudeMode != IGCZ.NONE) {\n            let z;\n            if (altitudeMode == IGCZ.GPS) {\n              z = parseInt(m[11], 10);\n            } else if (altitudeMode == IGCZ.BAROMETRIC) {\n              z = parseInt(m[12], 10);\n            } else {\n              z = 0;\n            }\n            flatCoordinates.push(z);\n          }\n          let dateTime = Date.UTC(year, month, day, hour, minute, second);\n          // Detect UTC midnight wrap around.\n          if (dateTime < lastDateTime) {\n            dateTime = Date.UTC(year, month, day + 1, hour, minute, second);\n          }\n          flatCoordinates.push(dateTime / 1000);\n          lastDateTime = dateTime;\n        }\n      } else if (line.charAt(0) == 'H') {\n        m = HFDTE_RECORD_RE.exec(line);\n        if (m) {\n          day = parseInt(m[1], 10);\n          month = parseInt(m[2], 10) - 1;\n          year = 2000 + parseInt(m[3], 10);\n        } else {\n          m = H_RECORD_RE.exec(line);\n          if (m) {\n            properties[m[1]] = m[2].trim();\n          }\n        }\n      }\n    }\n    if (flatCoordinates.length === 0) {\n      return null;\n    }\n    const layout = altitudeMode == IGCZ.NONE ? GeometryLayout.XYM : GeometryLayout.XYZM;\n    const lineString = new LineString(flatCoordinates, layout);\n    const feature = new Feature(transformWithOptions(lineString, false, opt_options));\n    feature.setProperties(properties);\n    return feature;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  readFeaturesFromText(text, opt_options) {\n    const feature = this.readFeatureFromText(text, opt_options);\n    if (feature) {\n      return [feature];\n    } else {\n      return [];\n    }\n  }\n\n}\n\nexport default IGC;\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.quickselect = factory());\n}(this, (function () { 'use strict';\n\nfunction quickselect(arr, k, left, right, compare) {\n    quickselectStep(arr, k, left || 0, right || (arr.length - 1), compare || defaultCompare);\n}\n\nfunction quickselectStep(arr, k, left, right, compare) {\n\n    while (right > left) {\n        if (right - left > 600) {\n            var n = right - left + 1;\n            var m = k - left + 1;\n            var z = Math.log(n);\n            var s = 0.5 * Math.exp(2 * z / 3);\n            var sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n            var newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n            var newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n            quickselectStep(arr, k, newLeft, newRight, compare);\n        }\n\n        var t = arr[k];\n        var i = left;\n        var j = right;\n\n        swap(arr, left, k);\n        if (compare(arr[right], t) > 0) swap(arr, left, right);\n\n        while (i < j) {\n            swap(arr, i, j);\n            i++;\n            j--;\n            while (compare(arr[i], t) < 0) i++;\n            while (compare(arr[j], t) > 0) j--;\n        }\n\n        if (compare(arr[left], t) === 0) swap(arr, left, j);\n        else {\n            j++;\n            swap(arr, j, right);\n        }\n\n        if (j <= k) left = j + 1;\n        if (k <= j) right = j - 1;\n    }\n}\n\nfunction swap(arr, i, j) {\n    var tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\nfunction defaultCompare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n\nreturn quickselect;\n\n})));\n"],"sourceRoot":""}